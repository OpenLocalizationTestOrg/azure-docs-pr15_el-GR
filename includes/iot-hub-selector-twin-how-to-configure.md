> [AZURE.SELECTOR]
- [Node.js](../articles/iot-hub/iot-hub-node-node-twin-how-to-configure.md)
- [C#](../articles/iot-hub/iot-hub-csharp-node-twin-how-to-configure.md)

## <a name="introduction"></a>Εισαγωγή

Σε [Γρήγορα αποτελέσματα με το διανομέα IoT twins][lnk-twin-tutorial], τον τρόπο ρύθμισης της συσκευής μετα-δεδομένα από το τέλος πίσω λύση χρησιμοποιώντας *ετικέτες*, συνθήκες συσκευή αναφορά από μια εφαρμογή συσκευή χρησιμοποιώντας *Ιδιότητες που αναφέρθηκαν*, η εκμάθηση και ερωτήματος χρησιμοποιώντας μια γλώσσα SQL όπως αυτές τις πληροφορίες.

Σε αυτό το πρόγραμμα εκμάθησης, θα μάθετε πώς να χρησιμοποιείτε το το δίδυμους *επιθυμητές ιδιότητες* σε συνδυασμό με *ανέφερε ιδιότητες*, για την απομακρυσμένη ρύθμιση παραμέτρων συσκευής apps. Πιο συγκεκριμένα, αυτό το εκπαιδευτικό πρόγραμμα σας δείχνει πώς του δίδυμους ανέφερε και επιθυμητές ιδιότητες να ενεργοποιήσετε μια ρύθμιση παραμέτρων πολλαπλών βήμα μια ρύθμιση εφαρμογής της συσκευής και να παρέχουν την ορατότητα λύση περιβάλλοντος υποστήριξης της κατάστασης αυτής της λειτουργίας σε όλες τις συσκευές.

Σε υψηλό επίπεδο, αυτό το πρόγραμμα εκμάθησης, ακολουθεί το *μοτίβο επιθυμητή κατάσταση* για τη Διαχείριση συσκευών. Η βασική ιδέα αυτό το μοτίβο είναι να έχετε λύση παρασκηνίου Καθορίστε την επιθυμητή κατάσταση για τις διαχειριζόμενες συσκευές, αντί να στείλετε συγκεκριμένες εντολές. Με τον τρόπο αυτό η συσκευή είναι υπεύθυνο για τον καθορισμό ο καλύτερος τρόπος για να φτάσει η επιθυμητή κατάσταση (πολύ σημαντικό σε IoT σενάρια όπου συγκεκριμένη συσκευή συνθήκες επηρεάζουν τη δυνατότητα να διεκπεραιώνουν αμέσως συγκεκριμένες εντολές,) κατά την αναφορά συνεχώς στο παρασκήνιο την τρέχουσα κατάσταση και τις πιθανές συνθήκες σφάλματος. Το μοτίβο επιθυμητή κατάσταση είναι πολύ σημαντική για τη διαχείριση μεγάλων συνόλων συσκευές, όπως ενεργοποιεί παρασκηνίου για να έχετε πλήρη ορατότητα για την κατάσταση της διαδικασίας ρύθμισης παραμέτρων για όλες τις συσκευές.
Μπορείτε να βρείτε περισσότερες πληροφορίες σχετικά με το ρόλο του μοτίβου επιθυμητή κατάσταση στη Διαχείριση συσκευών στη [Διαχείριση συσκευών διανομέα IoT Επισκόπηση Azure][lnk-dm-overview].

> [AZURE.NOTE] Σε σενάρια όπου ελέγχονται συσκευές με τρόπο πιο αλληλεπιδραστική (Ενεργοποίηση ανεμιστήρα από μια εφαρμογή που ελέγχεται από το χρήστη), θα πρέπει να χρησιμοποιήσετε [μεθόδους σύννεφο σε συσκευή][lnk-methods].

Σε αυτό το πρόγραμμα εκμάθησης, η αλλαγή παρασκηνίου εφαρμογής τις ρυθμίσεις τηλεμετρία συσκευή προορισμού και, ως αποτέλεσμα ότι, η εφαρμογή της συσκευής ακολουθεί μια διαδικασία πολλών βήμα για να εφαρμόσετε μια ενημέρωση της ρύθμισης παραμέτρων (π.χ. που απαιτούν επανεκκίνηση λειτουργική μονάδα λογισμικού), που ενεργοποιεί αυτό το πρόγραμμα εκμάθησης με απλή καθυστέρηση).

Η παρασκηνιακή αποθηκεύει τη ρύθμιση παραμέτρων σε επιθυμητές ιδιότητες του δίδυμους τη συσκευή με τον ακόλουθο τρόπο:

        {
            ...
            "properties": {
                ...
                "desired": {
                    "telemetryConfig": {
                        "configId": "{id of the configuration}",
                        "sendFrequency": "{config}"
                    }
                }
                ...
            }
            ...
        }

> [AZURE.NOTE] Δεδομένου ότι οι ρυθμίσεις παραμέτρων μπορεί να είναι σύνθετα αντικείμενα, αντιστοιχίζονται συνήθως μοναδικά αναγνωριστικά (αλγόριθμοι κατακερματισμού ή [GUID][lnk-guid]) για να απλοποιήσετε τις συγκρίσεις.

Η εφαρμογή της συσκευής αναφέρει την τρέχουσα ρύθμιση παραμέτρων κατοπτρισμού την επιθυμητή ιδιότητα **telemetryConfig** με τις ιδιότητες που αναφέρθηκαν:

        {
            "properties": {
                ...
                "reported": {
                    "telemetryConfig": {
                        "changeId": "{id of the current configuration}",
                        "sendFrequency": "{current configuration}",
                        "status": "Success",
                    }
                }
                ...
            }
        }

Σημειώστε πως το αναφερόμενο **telemetryConfig** έχει μια πρόσθετη ιδιότητα **κατάσταση**, χρησιμοποιείται για να αναφέρετε την κατάσταση της διαδικασίας ρύθμισης παραμέτρων της ενημερωμένης έκδοσης.

Όταν λαμβάνεται μια νέα επιθυμητή ρύθμιση παραμέτρων, η εφαρμογή της συσκευής αναφέρει μια ρύθμιση παραμέτρων σε εκκρεμότητα, αλλάζοντας τις πληροφορίες:

        {
            "properties": {
                ...
                "reported": {
                    "telemetryConfig": {
                        "changeId": "{id of the current configuration}",
                        "sendFrequency": "{current configuration}",
                        "status": "Pending",
                        "pendingConfig": {
                            "changeId": "{id of the pending configuration}",
                            "sendFrequency": "{pending configuration}"
                        }
                    }
                }
                ...
            }
        }

Στη συνέχεια, κάποια στιγμή αργότερα, η εφαρμογή της συσκευής θα αναφέρει την επιτυχία της αποτυχίας της επιχείρησης αυτής, ενημερώνοντας την παραπάνω ιδιότητα.
Σημειώστε τον τρόπο παρασκηνίου είναι δυνατό, ανά πάσα στιγμή, ερωτήματος για την κατάσταση της διαδικασίας ρύθμισης παραμέτρων σε όλες τις συσκευές.

Αυτό το εκπαιδευτικό πρόγραμμα σας δείχνει τον τρόπο για να:

- Δημιουργήστε μια συσκευή προσομοίωσης που λαμβάνει ενημερώσεις ρύθμισης παραμέτρων από το πίσω άκρο και αναφέρει πολλές ενημερωμένες εκδόσεις ως *Ιδιότητες αναφερθεί* σχετικά με τη διαδικασία ενημέρωσης της ρύθμισης παραμέτρων.
- Δημιουργήστε μια εφαρμογή παρασκηνίου που ενημερώνει τις επιθυμητές παραμέτρους μιας συσκευής και, στη συνέχεια, υποβάλλει ερώτημα για τη διαδικασία ενημέρωσης της ρύθμισης παραμέτρων.

<!-- links -->

[lnk-methods]: ../articles/iot-hub/iot-hub-devguide-direct-methods.md
[lnk-dm-overview]: ../articles/iot-hub/iot-hub-device-management-overview.md
[lnk-twin-tutorial]: ../articles/iot-hub/iot-hub-node-node-twin-getstarted.md
[lnk-guid]: https://en.wikipedia.org/wiki/Globally_unique_identifier