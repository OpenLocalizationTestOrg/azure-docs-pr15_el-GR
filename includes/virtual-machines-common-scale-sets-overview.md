

Για τις εφαρμογές που πρέπει να κλιμακωθεί πόρων υπολογισμού ανάληψη και σε κλίμακα λειτουργίες έχουν ρητά εξισορρόπηση σε τομείς σφαλμάτων και ενημέρωση. Για μια εισαγωγή σχετικά με κλίμακα Εικονική σύνολα ανατρέξτε πρόσφατες [ανακοίνωση Azure ιστολογίου](https://azure.microsoft.com/blog/azure-vm-scale-sets-public-preview/).

Ρίξτε μια ματιά σε αυτά τα βίντεο για περισσότερες πληροφορίες σχετικά με τα σύνολα κλίμακα Εικονική:

 - [Σήμανση Russinovich ακρόασης σύνολα κλίμακα Azure](https://channel9.msdn.com/Blogs/Regular-IT-Guy/Mark-Russinovich-Talks-Azure-Scale-Sets/)  

 - [Εικονική μηχανή κλίμακα σύνολα με Guy Bowerman](https://channel9.msdn.com/Shows/Cloud+Cover/Episode-191-Virtual-Machine-Scale-Sets-with-Guy-Bowerman)

## <a name="creating-and-managing-vm-scale-sets"></a>Δημιουργία και διαχείριση κλίμακα Εικονική σύνολα

Εικονική κλίμακα σύνολα μπορεί να οριστεί και αναπτυχθεί με τη χρήση προτύπων JSON και [ΥΠΌΛΟΙΠΑ APIs](https://msdn.microsoft.com/library/mt589023.aspx) απλώς όπως μεμονωμένα ΣΠΣ διαχείριση πόρων Azure. Επομένως, μπορεί να χρησιμοποιηθεί οποιαδήποτε τυπική μεθόδους ανάπτυξης Azure διαχείριση πόρων. Για περισσότερες πληροφορίες σχετικά με τα πρότυπα, ανατρέξτε στο θέμα [Διαχείριση πόρων σύνταξης Azure πρότυπα](../articles/resource-group-authoring-templates.md).

Μπορείτε να βρείτε ένα σύνολο προτύπων παράδειγμα για σύνολα κλίμακα Εικονική στο Azure γρήγορη έναρξη πρότυπα GitHub αποθετήριο εδώ:

[https://github.com/Azure/azure-quickstart-templates](https://github.com/Azure/azure-quickstart-templates) - εμφάνισης για τα πρότυπα με _vmss_ στον τίτλο.

Στις σελίδες λεπτομέρειες για αυτά τα πρότυπα θα βλέπετε ένα κουμπί που συνδέεται με τη δυνατότητα ανάπτυξης πύλης. Για να αναπτύξετε το σύνολο κλίμακα Εικονική, κάντε κλικ στο κουμπί και, στη συνέχεια, συμπληρώστε τις παραμέτρους που απαιτούνται στην πύλη του. Εάν δεν είστε βέβαιοι εάν ένας πόρος υποστηρίζει επάνω ή μεικτές υπόθεση είναι πιο ασφαλές να χρησιμοποιείται πάντα τιμές παραμέτρων πεζούς. Υπάρχει επίσης ένα εύχρηστο βίντεο ανατομή Εικονική κλίμακα Ορισμός προτύπου εδώ:

[Εικονική κλίμακα Ορισμός ανατομή προτύπου](https://channel9.msdn.com/Blogs/Windows-Azure/VM-Scale-Set-Template-Dissection/player)

## <a name="scaling-a-vm-scale-set-out-and-in"></a>Κλιμάκωση μια Εικονική κλίμακα που ανάληψη και στο

Για να αυξήσετε ή να μειώσετε τον αριθμό των εικονικές μηχανές σε ένα σύνολο κλίμακα Εικονική, απλώς να αλλάξετε την ιδιότητα _δυνατότητα_ και αναπτύξτε ξανά το πρότυπο. Αυτό απλότητα διευκολύνει να συντάξετε το δικό σας προσαρμοσμένο επίπεδο κλίμακας εάν θέλετε να ορίσετε προσαρμοσμένη κλίμακα συμβάντα που δεν υποστηρίζονται από το Azure autoscale.

Εάν επανάληψη ανάπτυξης ενός προτύπου για να αλλάξετε την ικανότητα, θα μπορούσατε να ορίσετε ένα πολύ μικρότερο πρότυπο το οποίο περιλαμβάνει μόνο την SKU και η δυναμικότητα ενημερωμένο. Ένα παράδειγμα εμφανίζεται εδώ: [https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-vmss-scale-in-or-out/azuredeploy.json](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-vmss-linux-nat/azuredeploy.json).

Για να δείτε τα βήματα που θα δημιουργήσετε ένα σύνολο κλίμακας που προσαρμόζεται αυτόματα, ανατρέξτε στο θέμα [Αυτόματη κλίμακα μηχανές σε ένα σύνολο κλίμακα εικονική μηχανή](../articles/virtual-machines/virtual-machines-windows-vmss-powershell-creating.md)

## <a name="monitoring-your-vm-scale-set"></a>Παρακολούθηση σας κλίμακα Εικονική ρύθμιση

Προς το παρόν συνιστάται να χρησιμοποιείτε την [Εξερεύνηση των πόρων Azure](https://resources.azure.com) για να προβάλετε τα σύνολα κλίμακα Εικονική. Εικονική κλίμακα σύνολα είναι ένας πόρος στην περιοχή Microsoft.Compute, ώστε να από αυτήν την τοποθεσία μπορείτε να τα δείτε, επεκτείνοντας τις παρακάτω συνδέσεις:

    subscriptions -> your subscription -> resourceGroups -> providers -> Microsoft.Compute -> virtualMachineScaleSets -> your VM scale set -> etc.

## <a name="vm-scale-set-scenarios"></a>Εικονική κλίμακα Ορισμός σενάρια

Αυτή η ενότητα παραθέτει ορισμένα τυπικά σενάρια σύνολο κλίμακα Εικονική. Ορισμένες ανώτερο επίπεδο Azure υπηρεσίες (όπως δέσμη, ύφασμα υπηρεσίας, η υπηρεσία κοντέινερ Azure) θα χρησιμοποιήσει αυτά τα σενάρια.

 - **RDP / SSH κλίμακα Εικονική ρύθμιση παρουσίες** - μια Εικονική κλίμακα σύνολο δημιουργείται μέσα σε ένα VNET και μεμονωμένες ΣΠΣ στο δεν εκχωρούνται δημόσιων διευθύνσεων IP. Αυτό είναι ένα καλό επειδή γενικά δεν θέλετε τα έξοδα και διαχείριση επιβάρυνσης κατανομή ξεχωριστές διευθύνσεις IP για όλους τους πόρους χωρίς κατάσταση του πλέγματος υπολογισμού και μπορείτε εύκολα να συνδεθείτε σε αυτές τις ΣΠΣ από άλλους πόρους στο σας VNET, συμπεριλαμβανομένων και αυτών που έχουν δημόσιες διευθύνσεις IP όπως φόρτωση balancers ή μεμονωμένη εικονικές μηχανές.

 - **Σύνδεση με χρήση κανόνων NAT ΣΠΣ** - μπορείτε να δημιουργήσετε μια δημόσια διεύθυνση IP, να εκχωρήσετε σε μια μονάδα εξισορρόπησης φόρτου και να ορίσετε κανόνες εισερχόμενων NAT που αντιστοίχισης μιας θύρας της διεύθυνσης IP σε μια θύρα μια Εικονική στα το σύνολο κλίμακα Εικονική. Π.χ.

    Δημόσια IP -> θυρών 50000 -> vmss\_-> 0 θύρα 22 δημόσια IP - > θύρα 50001 -> vmss\_1 -> θύρα 22 δημόσια IP - > θύρα 50002 -> vmss\_2 -> θύρα 22

    Ακολουθεί ένα παράδειγμα της δημιουργίας ενός συνόλου κλίμακα Εικονική που χρησιμοποιεί NAT κανόνες για να ενεργοποιήσετε SSH σύνδεσης σε κάθε Εικονική στα μια κλίμακα συνόλου με χρήση ένα μεμονωμένο δημόσια IP: [https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-linux-nat](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-linux-nat)

    Ακολουθεί ένα παράδειγμα της κάνει το ίδιο με το Windows και RDP: [https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-windows-nat](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-windows-nat)

 - **Σύνδεση με ΣΠΣ χρησιμοποιώντας μια "jumpbox"** - εάν δημιουργείτε μια κλίμακα Εικονική ορίστε και μια μεμονωμένη Εικονική στα το ίδιο VNET, τη μεμονωμένη Εικονική και το σύνολο κλίμακα Εικονική ΣΠΣ να συνδεθείτε σε ένα άλλο χρησιμοποιώντας τους εσωτερική IP διευθύνσεις όπως ορίζεται από το VNET/υποδίκτυο. Εάν μπορείτε να δημιουργήσετε μια δημόσια διεύθυνση IP και να το εκχωρήσετε σε τη μεμονωμένη Εικονική μπορείτε να RDP ή SSH στο αυτόνομο Εικονική και, στη συνέχεια, συνδεθείτε από αυτόν τον υπολογιστή σας παρουσίες Εικονική κλίμακα σύνολο. Ίσως παρατηρήσετε αυτήν τη στιγμή που ένα απλό σύνολο κλίμακα Εικονική είναι εγγενώς πιο ασφαλής από ένα απλό μεμονωμένη Εικονική με μια δημόσια διεύθυνση IP με την προεπιλεγμένη ρύθμιση παραμέτρων.

    Για ένα παράδειγμα αυτής της προσέγγισης, αυτό το πρότυπο δημιουργεί μια απλή σύμπλεγμα Mesos που αποτελείται από ένα αυτόνομο Εικονική υπόδειγμα που διαχειρίζεται ένα σύμπλεγμα Εικονική κλίμακα συνόλου βάσει ΣΠΣ: [https://github.com/gbowerman/azure-myriad/blob/master/mesos-vmss-simple-cluster.json](https://github.com/gbowerman/azure-myriad/blob/master/mesos-vmss-simple-cluster.json)

 - **Εξισορρόπηση φόρτου Round robin κλίμακα Εικονική ρύθμιση παρουσίες** - εάν θέλετε να κάνετε την εργασία σε ένα σύμπλεγμα υπολογισμού του ΣΠΣ χρησιμοποιώντας μια προσέγγιση "round robin", μπορείτε να ρυθμίσετε μια μονάδα εξισορρόπησης φόρτου Azure με εξισορρόπησης φόρτου κανόνες αντίστοιχα. Μπορείτε επίσης να ορίσετε καθετήρες για να επαληθεύσετε την εφαρμογή σας εκτελείται κάνοντας ping θύρες με μια συγκεκριμένη διαδρομή πρωτόκολλο, διάστημα και αίτηση.

    Ακολουθεί ένα παράδειγμα το οποίο δημιουργεί ένα σύνολο κλίμακα Εικονική ΣΠΣ εκτελεί διακομιστή web των υπηρεσιών IIS και χρησιμοποιεί μια μονάδα εξισορρόπησης φόρτου για εξισορρόπηση του φόρτου που λαμβάνει κάθε Εικονική. Χρησιμοποιεί το πρωτόκολλο HTTP για να κάνετε ping μια συγκεκριμένη διεύθυνση URL σε κάθε Εικονική: [https://github.com/gbowerman/azure-myriad/blob/master/vmss-win-iis-vnet-storage-lb.json](https://github.com/gbowerman/azure-myriad/blob/master/vmss-win-iis-vnet-storage-lb.json) - ματιά στις τον τύπο πόρου Microsoft.Network/loadBalancers και networkProfile και extensionProfile στο το virtualMachineScaleSet.

 - **Ανάπτυξη μια κλίμακα Εικονική Ορισμός ως ένα σύμπλεγμα υπολογισμού σε ένα διαχειριστή συμπλέγματος PaaS** - κλίμακα Εικονική σύνολα περιγράφονται μερικές φορές ως ένα ρόλο εργαζόμενου επόμενης γενιάς. Πρόκειται για μια έγκυρη περιγραφή αλλά επίσης εκτελούν τον κίνδυνο προκαλεί σύγχυση κλίμακα σύνολο δυνατοτήτων με PaaS v1 εργαζόμενου ρόλο δυνατότητες. Σε μια Εικονική κλίμακα νόημα σύνολα παρέχουν μια τιμή true "εργαζόμενου ρόλων" ή πόρο εργασίας, σε που παρέχουν έναν πόρο γενικευμένη υπολογισμού που είναι πλατφόρμα/χρόνου εκτέλεσης ανεξάρτητη, προσαρμόσιμες και ενσωματώνει σε Azure διαχείριση πόρων IaaS.

    Ένα ρόλο εργαζόμενου v1 PaaS, ενώ περιορισμένη όσον αφορά την πλατφόρμα/runtime υποστήριξης (μόνο σε εικόνες πλατφόρμας του Windows) και περιλαμβάνει επίσης υπηρεσίες, όπως εναλλαγή VIP, με δυνατότητα ρύθμισης παραμέτρων ρυθμίσεις αναβάθμισης, χρόνου εκτέλεσης/εφαρμογή ανάπτυξης συγκεκριμένες ρυθμίσεις οι οποίες δεν _ακόμη_ διαθέσιμη σε Εικονική κλιμάκωση σύνολα, ή θα παραδίδονται από άλλες ανώτερο επίπεδο PaaS υπηρεσίες όπως το ύφασμα υπηρεσίας. Με αυτό στον ότι μπορείτε να δείτε σύνολα κλίμακα Εικονική ως ένα υποδομής που υποστηρίζει PaaS. Π.χ. Λύσεις PaaS όπως ύφασμα υπηρεσία ή την διαχειριστές συμπλέγματος όπως Mesos να δημιουργήσετε επάνω σε Εικονική κλίμακα σύνολα ως επίπεδο μεταβλητού μεγέθους υπολογισμού.

    Ακολουθεί ένα παράδειγμα ενός συμπλέγματος Mesos που αναπτύσσει μια Εικονική ρύθμιση κλίμακας στο το ίδιο VNET ως αυτόνομης υπηρεσίας Εικονική. Το μεμονωμένου Εικονική είναι ένα υπόδειγμα Mesos και το σύνολο κλίμακα Εικονική αντιπροσωπεύει ένα σύνολο εξαρτώμενη κόμβοι: [https://github.com/gbowerman/azure-myriad/blob/master/mesos-vmss-simple-cluster.json](https://github.com/gbowerman/azure-myriad/blob/master/mesos-vmss-simple-cluster.json). Μελλοντικές εκδόσεις της [Υπηρεσίας κοντέινερ Azure](https://azure.microsoft.com/blog/azure-container-service-now-and-the-future/) θα αναπτύξετε περισσότερες εκδόσεις μιγαδικού/ενισχυμένη από αυτό το σενάριο που βασίζονται σε Εικονική κλίμακα σύνολα.

## <a name="vm-scale-set-performance-and-scale-guidance"></a>Εικονική κλίμακα σύνολο επιδόσεις και την κλίμακα καθοδήγηση

- Κατά τη διάρκεια του public preview, μην δημιουργήσετε περισσότερους από 500 ΣΠΣ σε πολλά σύνολα κλίμακα Εικονική κάθε φορά.
- Σχεδιασμός για όχι περισσότερους από 40 ΣΠΣ ανά λογαριασμού χώρου αποθήκευσης.
- Διασπορά τα πρώτα γράμματα της ονόματα λογαριασμών αποθήκευσης όσο είναι δυνατό.  Τα πρότυπα VMSS παράδειγμα σε [πρότυπα γρήγορη έναρξη Azure](https://github.com/Azure/azure-quickstart-templates/) παρέχουν παραδείγματα πώς μπορείτε να το κάνετε αυτό.
- Εάν χρησιμοποιείτε προσαρμοσμένο ΣΠΣ, Σχεδιασμός για όχι περισσότερους από 40 ΣΠΣ ανά σύνολο κλίμακα Εικονική, σε ένα λογαριασμό μόνο χώρου αποθήκευσης.  Θα πρέπει η εικόνα προ-αντιγραφεί στο λογαριασμό χώρου αποθήκευσης πριν να αρχίσετε την Εικονική ανάπτυξης συνόλου κλίμακα. Ανατρέξτε στις συνήθεις Ερωτήσεις για περισσότερες πληροφορίες.
- Σχεδιασμός για λιγότερα από 2048 ΣΠΣ ανά VNET.  Αυτό το όριο θα αυξηθεί στο μέλλον.
- Ο αριθμός των ΣΠΣ μπορείτε να δημιουργήσετε περιορίζεται από το όριο του πυρήνα υπολογισμού σε κάθε περιοχή. Ίσως χρειαστεί να επικοινωνήσετε με την υποστήριξη πελατών για να αυξήσετε το όριο μεγέθους υπολογισμού σας αυξάνεται ακόμα και αν έχετε υψηλή όριο πυρήνων για χρήση με τις υπηρεσίες cloud ή IaaS v1 σήμερα. Ερώτημα για το όριο, μπορείτε να εκτελέσετε την ακόλουθη εντολή Azure CLI: _λίστα azure εικονική - χρήση_και την παρακάτω εντολή PowerShell: _Get-AzureRmVMUsage_ (εάν χρησιμοποιώντας μια έκδοση του PowerShell κάτω από το στοιχείο 1.0 Χρησιμοποιήστε _Get-AzureVMUsage_).

## <a name="vm-scale-set-frequently-asked-questions"></a>Εικονική κλίμακα Ορισμός συχνά ερωτήσεις

**ΟΙ ΕΡΩΤΉΣΕΙΣ.** Πόσες ΣΠΣ μπορεί να έχετε σε ένα σύνολο κλίμακα Εικονική;

**ΑΠΑΝΤΉΣΕΙΣ.** 100 Εάν χρησιμοποιείτε εικόνες πλατφόρμα που μπορούν να διανεμηθούν σε πολλαπλούς λογαριασμούς χώρου αποθήκευσης. Εάν χρησιμοποιείτε προσαρμοσμένες εικόνες, έως και 40, επειδή προσαρμοσμένες εικόνες περιορίζονται σε ένα λογαριασμό μόνο χώρο αποθήκευσης κατά τη διάρκεια της προεπισκόπησης.

**Ερωτήσεις** υπάρχουν ποια άλλα όρια πόρων για τα σύνολα κλίμακα Εικονική;

**ΑΠΑΝΤΉΣΕΙΣ.** Περιορίζονται για τη δημιουργία περισσότερων από 500 ΣΠΣ σε πολλά σύνολα κλίμακα ανά περιοχή κατά την περίοδο preview. Το υπάρχον [όρια Azure συνδρομητική υπηρεσία /](../articles/azure-subscription-service-limits.md) εφαρμογή.

**ΟΙ ΕΡΩΤΉΣΕΙΣ.** Είναι δεδομένων που υποστηρίζονται δίσκων μέσα σε σύνολα κλίμακα Εικονική;

**ΑΠΑΝΤΉΣΕΙΣ.** Δεν στην αρχική έκδοση. Οι επιλογές σας για την αποθήκευση δεδομένων είναι:

- Azure αρχείων (Ερωτήσεων κοινόχρηστα μονάδες)

- Μονάδα δίσκου λειτουργικό σύστημα

- Temp μονάδα δίσκου (τοπικά, δεν υποστηρίζεται από χώρο αποθήκευσης Azure)

- Εξωτερικά δεδομένα υπηρεσίας (π.χ., απομακρυσμένο DB, Azure πίνακες, Azure αντικείμενα BLOB)

**ΟΙ ΕΡΩΤΉΣΕΙΣ.** Ποιες περιοχές Azure υποστήριξης για σύνολα κλίμακα Εικονική;

**ΑΠΑΝΤΉΣΕΙΣ.** Οποιαδήποτε περιοχή που υποστηρίζει διαχείριση πόρων Azure υποστηρίζει Εικονική κλίμακα σύνολα.

**ΟΙ ΕΡΩΤΉΣΕΙΣ.** Πώς μπορείτε να δημιουργήσω μια κλίμακα Εικονική σύνολα χρησιμοποιώντας μια προσαρμοσμένη εικόνα;

**ΑΠΑΝΤΉΣΕΙΣ.** Αφήστε την ιδιότητα vhdContainers κενά, για παράδειγμα:

    "storageProfile": {
        "osDisk": {
            "name": "vmssosdisk",
            "caching": "ReadOnly",
            "createOption": "FromImage",
            "image": {
                "uri": [https://mycustomimage.blob.core.windows.net/system/Microsoft.Compute/Images/mytemplates/template-osDisk.vhd](https://mycustomimage.blob.core.windows.net/system/Microsoft.Compute/Images/mytemplates/template-osDisk.vhd)
            },
            "osType": "Windows"
        }
    },


**ΟΙ ΕΡΩΤΉΣΕΙΣ.** Εάν να μειώσετε μου κλίμακα Εικονική Ορισμός Δυναμικότητας από 20 έως 15, που θα καταργηθούν ΣΠΣ;

**ΑΠΑΝΤΉΣΕΙΣ.** Εικονικές μηχανές καταργούνται από την κλίμακα σύνολο ομοιόμορφα κατά μήκος αναβάθμισης τομέων και τομέων σφαλμάτων για να μεγιστοποιήσετε τη διαθεσιμότητα.

**ΟΙ ΕΡΩΤΉΣΕΙΣ.** Πώς σχετικά με το εάν να, στη συνέχεια, να αυξήσετε τη δυνατότητα από 15 18;

**ΑΠΑΝΤΉΣΕΙΣ.** Αν αυξήσετε έως 18, ΣΠΣ με ευρετήριο 15, 16, 17 θα δημιουργηθεί. Και στις δύο περιπτώσεις είναι εξισορρόπηση του ΣΠΣ σε FDs και UDs.

**ΟΙ ΕΡΩΤΉΣΕΙΣ.** Όταν χρησιμοποιείτε πολλές επεκτάσεις σε ένα σύνολο κλίμακα Εικονική, να να επιβάλετε μια ακολουθία εκτέλεσης

**ΑΠΑΝΤΉΣΕΙΣ.** Δεν απευθείας, αλλά για την επέκταση customScript, δέσμη ενεργειών σας θα μπορούσε να περιμένετε για μια άλλη επέκταση για την ολοκλήρωση (για παράδειγμα, παρακολουθώντας την επέκταση συνδεθείτε - δείτε [https://github.com/Azure/azure-quickstart-templates/blob/master/201-vmss-lapstack-autoscale/install\_lap.sh](https://github.com/Azure/azure-quickstart-templates/blob/master/201-vmss-lapstack-autoscale/install_lap.sh)).

**ΟΙ ΕΡΩΤΉΣΕΙΣ.** Λειτουργούν Εικονική κλίμακα σύνολα με σύνολα Azure διαθεσιμότητα;

**ΑΠΑΝΤΉΣΕΙΣ.** Ναι. Ένα σύνολο κλίμακα Εικονική είναι μια μη διαθεσιμότητα Ορισμός με 3 FDs και 5 UDs. Δεν χρειάζεται να ρυθμίσετε τις παραμέτρους οτιδήποτε στην περιοχή virtualMachineProfile. Στο μέλλον εκδόσεων, σύνολα κλίμακα Εικονική είναι πιθανό να εκτείνονται σε πολλούς μισθωτές του, αλλά για τώρα, ορίστε μια κλίμακα είναι ένα σύνολο μόνο διαθεσιμότητα.
