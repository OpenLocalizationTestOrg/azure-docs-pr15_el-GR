## <a name="specifying-formats"></a>Καθορισμός μορφές

Azure εργοστασίου δεδομένων υποστηρίζει τους ακόλουθους τύπους μορφοποίησης: 

- [Μορφή κειμένου](#specifying-textformat)
- [Μορφή JSON](#specifying-jsonformat)
- [Μορφή Avro](#specifying-avroformat)
- [Μορφή ORC](#specifying-orcformat)
- [Μορφή parquet](#specifying-parquetformat)

### <a name="specifying-textformat"></a>Καθορισμός TextFormat

Εάν η μορφή έχει οριστεί σε **TextFormat**, μπορείτε να καθορίσετε τις ακόλουθες **προαιρετικές** ιδιότητες στην ενότητα **μορφή** .

| Ιδιότητα | Περιγραφή | Επιτρεπόμενη τιμή | Απαιτείται |
| -------- | ----------- | -------- | -------- | 
| Διαχωριστικό_στήλης | Ο χαρακτήρας που χρησιμοποιείται για το διαχωρισμό των στηλών σε ένα αρχείο. | Επιτρέπεται μόνο ένα χαρακτήρα. Η προεπιλεγμένη τιμή είναι κόμμα (','). <br/><br/>Για να χρησιμοποιήσετε ένα χαρακτήρα Unicode, ανατρέξτε στην [Χαρακτήρες Unicode](https://en.wikipedia.org/wiki/List_of_Unicode_characters) για να λάβετε τον αντίστοιχο κώδικα για αυτό. Για παράδειγμα, μπορείτε να εξετάστε το ενδεχόμενο να χρησιμοποιήσετε ένα σπάνιων εκτυπώσιμες ένα χαρακτήρα που δεν είναι πιθανό να υπάρχουν στα δεδομένα σας: Καθορίστε "\u0001" που αντιπροσωπεύει την έναρξη της επικεφαλίδας λειτουργίας (SOH). | Όχι |
| Διαχωριστικό-γραμμής | Ο χαρακτήρας που χρησιμοποιείται για να διαχωρίσετε γραμμές σε ένα αρχείο. | Επιτρέπεται μόνο ένα χαρακτήρα. Η προεπιλεγμένη τιμή είναι οποιαδήποτε από τις παρακάτω τιμές στην ανάγνωση: ["\r\n", "\r", "\n"] και "\r\n" στην εγγραφή. | Όχι |
| escapeChar | Ο ειδικός χαρακτήρας που χρησιμοποιείται για να βγείτε οριοθέτη στήλης στο περιεχόμενο του αρχείου εισαγωγής. <br/><br/>Δεν μπορείτε να καθορίσετε escapeChar και quoteChar για έναν πίνακα. | Επιτρέπεται μόνο ένα χαρακτήρα. Δεν υπάρχει προεπιλεγμένη τιμή. <br/><br/>Παράδειγμα: Εάν έχετε με κόμματα (', ') ως ο οριοθέτης στήλη αλλά θέλετε να έχετε το κόμμα στο κείμενο (παράδειγμα: "Hello, world"), μπορείτε να ορίσετε '$' ως χαρακτήρα διαφυγής και να χρησιμοποιήσετε συμβολοσειράς "Hello$, κόσμο" στο αρχείο προέλευσης. | Όχι | 
| quoteChar | Ο χαρακτήρας που χρησιμοποιείται για την προσφορά τιμή συμβολοσειράς. Τους οριοθέτες στηλών και γραμμών μέσα τους χαρακτήρες προσφοράς θα αντιμετωπίζεται ως τμήμα της τιμής συμβολοσειρά. Αυτή η ιδιότητα είναι ισχύουν για σύνολα δεδομένων εισαγωγής και εξαγωγής.<br/><br/>Δεν μπορείτε να καθορίσετε escapeChar και quoteChar για έναν πίνακα. | Επιτρέπεται μόνο ένα χαρακτήρα. Δεν υπάρχει προεπιλεγμένη τιμή. <br/><br/>Για παράδειγμα, εάν έχετε με κόμματα (', ') ως ο οριοθέτης στήλη αλλά θέλετε να έχετε κόμμα στο κείμενο (παράδειγμα: < Hello, world >), μπορείτε να ορίσετε "(διπλά εισαγωγικά) ως η χαρακτήρα προσφοράς και η χρήση της συμβολοσειράς"Hello, world"στο αρχείο προέλευσης. | Όχι |
| nullValue | Έναν ή περισσότερους χαρακτήρες που χρησιμοποιούνται για να αντιπροσωπεύει μια τιμή null. | Έναν ή περισσότερους χαρακτήρες. Οι προεπιλεγμένες τιμές είναι "\N" και "NULL" ανάγνωση και "\N" στην εγγραφή. | Όχι |
| encodingName | Καθορίστε το όνομα κωδικοποίησης. | Ένα έγκυρο όνομα κωδικοποίησης. ανατρέξτε στο θέμα [Encoding.EncodingName ιδιότητα](https://msdn.microsoft.com/library/system.text.encoding.aspx). Παράδειγμα: windows 1250 ή shift_jis. Η προεπιλεγμένη τιμή είναι UTF-8. | Όχι | 
| firstRowAsHeader | Καθορίζει εάν πρέπει να λάβετε υπόψη της πρώτης γραμμής ως κεφαλίδας. Για ένα σύνολο δεδομένων εισόδου, εργοστασίου δεδομένων διαβάζει πρώτης γραμμής ως κεφαλίδας. Για ένα σύνολο δεδομένων εξόδου, εργοστασιακές δεδομένων συντάσσει πρώτης γραμμής ως κεφαλίδας. <br/><br/>Ανατρέξτε στο θέμα [σενάρια για τη χρήση **firstRowAsHeader** και **skipLineCount** ](#scenarios-for-using-firstrowasheader-and-skiplinecount) για δείγμα σενάρια. | TRUE<br/>FALSE (προεπιλογή) | Όχι |
| skipLineCount | Υποδεικνύει τον αριθμό των γραμμών για να παραλείψετε κατά την ανάγνωση δεδομένων από αρχεία εισόδου. Εάν έχουν καθοριστεί skipLineCount και firstRowAsHeader, οι γραμμές παραλείπονται πρώτα και, στη συνέχεια, οι πληροφορίες της κεφαλίδας είναι για ανάγνωση από το αρχείο εισαγωγής. <br/><br/>Ανατρέξτε στο θέμα [σενάρια για τη χρήση firstRowAsHeader και skipLineCount](#scenarios-for-using-firstrowasheader-and-skiplinecount) για δείγμα σενάρια. | Ακέραιος αριθμός | Όχι | 
| treatEmptyAsNull | Καθορίζει αν θέλετε να χειριστείτε μηδενική ή κενή συμβολοσειρά ως τιμή null κατά την ανάγνωση δεδομένων από ένα αρχείο εισόδου. | TRUE (προεπιλογή)<br/>FALSE | Όχι |  

#### <a name="textformat-example"></a>Παράδειγμα TextFormat
Το παρακάτω παράδειγμα εμφανίζει ορισμένες από τις ιδιότητες μορφοποίηση για TextFormat.

    "typeProperties":
    {
        "folderPath": "mycontainer/myfolder",
        "fileName": "myblobname"
        "format":
        {
            "type": "TextFormat",
            "columnDelimiter": ",",
            "rowDelimiter": ";",
            "quoteChar": "\"",
            "NullValue": "NaN"
            "firstRowAsHeader": true,
            "skipLineCount": 0,
            "treatEmptyAsNull": true
        }
    },

Για να χρησιμοποιήσετε ένα escapeChar αντί για quoteChar, αντικαταστήστε γραμμής με quoteChar με την παρακάτω escapeChar:

    "escapeChar": "$",



### <a name="scenarios-for-using-firstrowasheader-and-skiplinecount"></a>Σενάρια για τη χρήση firstRowAsHeader και skipLineCount

- Γίνεται η αντιγραφή ενός μη αρχείου προέλευσης σε ένα αρχείο κειμένου και θέλετε να προσθέσετε μια γραμμή κεφαλίδας που περιέχει τα μετα-δεδομένα σχήματος (για παράδειγμα: SQL σχήμα). Καθορίστε **firstRowAsHeader** ως true στο του συνόλου δεδομένων εξόδου για αυτό το σενάριο. 
- Μπορείτε να γίνεται η αντιγραφή από ένα αρχείο κειμένου που περιέχει μια γραμμή κεφαλίδας σε ένα μη αρχείο δέκτη και θα θέλατε να αποθέσετε αυτήν τη γραμμή. Καθορίστε **firstRowAsHeader** ως true στο του συνόλου δεδομένων εισόδου.
- Μπορείτε να γίνεται η αντιγραφή από ένα αρχείο κειμένου και θέλετε να παραλείψετε μερικά τις γραμμές που περιέχουν καμία πληροφορία δεδομένων ή κεφαλίδων στην αρχή. Καθορίστε **skipLineCount** για να υποδείξετε τον αριθμό των γραμμών που θα παραλειφθούν. Εάν το υπόλοιπο του αρχείου περιέχει μια γραμμή κεφαλίδας, μπορείτε επίσης να καθορίσετε **firstRowAsHeader**. Εάν έχουν καθοριστεί **skipLineCount** και **firstRowAsHeader** , οι γραμμές παραλείπονται πρώτα και, στη συνέχεια, οι πληροφορίες της κεφαλίδας είναι ανάγνωση από το αρχείο εισαγωγής

### <a name="specifying-avroformat"></a>Καθορισμός AvroFormat
Εάν η μορφή έχει οριστεί σε AvroFormat, δεν χρειάζεται για να καθορίσετε τις ιδιότητες στην ενότητα μορφή μέσα στην ενότητα typeProperties. Παράδειγμα:

    "format":
    {
        "type": "AvroFormat",
    }

Για να χρησιμοποιήσετε μορφοποίηση Avro σε έναν πίνακα ομάδα, μπορείτε να ανατρέξετε στην [εκμάθηση του Hive Apache](https://cwiki.apache.org/confluence/display/Hive/AvroSerDe).

Λάβετε υπόψη τα εξής σημεία:  

- Δεν υποστηρίζονται [πολύπλοκους τύπους δεδομένων](http://avro.apache.org/docs/current/spec.html#schema_complex) (εγγραφών, απαριθμήσεις, πίνακες, χάρτες, ενώσεις και σταθερής)

### <a name="specifying-jsonformat"></a>Καθορισμός JsonFormat

Εάν η μορφή έχει οριστεί σε **JsonFormat**, μπορείτε να καθορίσετε τις ακόλουθες **προαιρετικές** ιδιότητες στην ενότητα **μορφή** .

| Ιδιότητα | Περιγραφή | Απαιτείται |
| -------- | ----------- | -------- |
| filePattern | Υποδεικνύουν το μοτίβο των δεδομένων που είναι αποθηκευμένα σε κάθε αρχείο JSON. Επιτρέπονται τιμές είναι: **setOfObjects** και **arrayOfObjects**. Η **προεπιλεγμένη** τιμή είναι: **setOfObjects**. Ανατρέξτε στα ακόλουθα ενότητες για λεπτομέρειες σχετικά με αυτά τα μοτίβα.| Όχι |
| encodingName | Καθορίστε το όνομα κωδικοποίησης. Για τη λίστα των ονομάτων έγκυρη κωδικοποίησης, ανατρέξτε στο θέμα: η ιδιότητα [Encoding.EncodingName](https://msdn.microsoft.com/library/system.text.encoding.aspx) . Για παράδειγμα: windows 1250 ή shift_jis. Η **προεπιλεγμένη** τιμή είναι: **UTF-8**. | Όχι | 
| nestingSeparator | Χαρακτήρας που χρησιμοποιείται για να διαχωρίσετε τα επίπεδα ένθεσης. Η προεπιλεγμένη τιμή είναι '.' (τελεία). | Όχι | 


#### <a name="setofobjects-file-pattern"></a>setOfObjects αρχείου μοτίβου

Κάθε αρχείο που περιέχει ένα αντικείμενο ή γραμμής-Διαχ.: / συνδέονται πολλά αντικείμενα. Εάν επιλέξετε αυτήν την επιλογή σε ένα σύνολο δεδομένων εξόδου, δραστηριότητας αντίγραφο δημιουργεί ένα μεμονωμένο αρχείο JSON με κάθε αντικείμενο ανά γραμμή (γραμμή-με κόμματα).

**ένα αντικείμενο** 

    {
        "time": "2015-04-29T07:12:20.9100000Z",
        "callingimsi": "466920403025604",
        "callingnum1": "678948008",
        "callingnum2": "567834760",
        "switch1": "China",
        "switch2": "Germany"
    }

**γραμμή με κόμματα JSON** 

    {"time":"2015-04-29T07:12:20.9100000Z","callingimsi":"466920403025604","callingnum1":"678948008","callingnum2":"567834760","switch1":"China","switch2":"Germany"}
    {"time":"2015-04-29T07:13:21.0220000Z","callingimsi":"466922202613463","callingnum1":"123436380","callingnum2":"789037573","switch1":"US","switch2":"UK"}
    {"time":"2015-04-29T07:13:21.4370000Z","callingimsi":"466923101048691","callingnum1":"678901578","callingnum2":"345626404","switch1":"Germany","switch2":"UK"}
    {"time":"2015-04-29T07:13:22.0960000Z","callingimsi":"466922202613463","callingnum1":"789037573","callingnum2":"789044691","switch1":"UK","switch2":"Australia"}
    {"time":"2015-04-29T07:13:22.0960000Z","callingimsi":"466922202613463","callingnum1":"123436380","callingnum2":"789044691","switch1":"US","switch2":"Australia"}

**συνενωμένων JSON**

    {
        "time": "2015-04-29T07:12:20.9100000Z",
        "callingimsi": "466920403025604",
        "callingnum1": "678948008",
        "callingnum2": "567834760",
        "switch1": "China",
        "switch2": "Germany"
    }
    {
        "time": "2015-04-29T07:13:21.0220000Z",
        "callingimsi": "466922202613463",
        "callingnum1": "123436380",
        "callingnum2": "789037573",
        "switch1": "US",
        "switch2": "UK"
    }
    {
        "time": "2015-04-29T07:13:21.4370000Z",
        "callingimsi": "466923101048691",
        "callingnum1": "678901578",
        "callingnum2": "345626404",
        "switch1": "Germany",
        "switch2": "UK"
    }


#### <a name="arrayofobjects-file-pattern"></a>arrayOfObjects αρχείων μοτίβο. 

Κάθε αρχείο περιέχει έναν πίνακα των αντικειμένων. 

    [
        {
            "time": "2015-04-29T07:12:20.9100000Z",
            "callingimsi": "466920403025604",
            "callingnum1": "678948008",
            "callingnum2": "567834760",
            "switch1": "China",
            "switch2": "Germany"
        },
        {
            "time": "2015-04-29T07:13:21.0220000Z",
            "callingimsi": "466922202613463",
            "callingnum1": "123436380",
            "callingnum2": "789037573",
            "switch1": "US",
            "switch2": "UK"
        },
        {
            "time": "2015-04-29T07:13:21.4370000Z",
            "callingimsi": "466923101048691",
            "callingnum1": "678901578",
            "callingnum2": "345626404",
            "switch1": "Germany",
            "switch2": "UK"
        },
        {
            "time": "2015-04-29T07:13:22.0960000Z",
            "callingimsi": "466922202613463",
            "callingnum1": "789037573",
            "callingnum2": "789044691",
            "switch1": "UK",
            "switch2": "Australia"
        },
        {
            "time": "2015-04-29T07:13:22.0960000Z",
            "callingimsi": "466922202613463",
            "callingnum1": "123436380",
            "callingnum2": "789044691",
            "switch1": "US",
            "switch2": "Australia"
        },
        {
            "time": "2015-04-29T07:13:24.2120000Z",
            "callingimsi": "466922201102759",
            "callingnum1": "345698602",
            "callingnum2": "789097900",
            "switch1": "UK",
            "switch2": "Australia"
        },
        {
            "time": "2015-04-29T07:13:25.6320000Z",
            "callingimsi": "466923300236137",
            "callingnum1": "567850552",
            "callingnum2": "789086133",
            "switch1": "China",
            "switch2": "Germany"
        }
    ]

### <a name="jsonformat-example"></a>Παράδειγμα JsonFormat

Εάν έχετε ένα αρχείο JSON με το εξής περιεχόμενο:  

    {
        "Id": 1,
        "Name": {
            "First": "John",
            "Last": "Doe"
        },
        "Tags": ["Data Factory”, "Azure"]
    }

και θέλετε να αντιγράψετε σε πίνακα του Azure SQL με την εξής μορφή: 

Αναγνωριστικό  | Name.First | Name.Middle | Name.Last | Ετικέτες
--- | ---------- | ----------- | --------- | ----
1 | Ιωάννης | τιμή null | Κωστίδου | ["Δεδομένων Factory", "Azure"]

Το σύνολο δεδομένων εισαγωγής με τον τύπο JsonFormat ορίζεται ως εξής: (μερική Ορισμός με μόνο τα σχετικά τμήματα)

    "properties": {
        "structure": [
            {"name": "Id", "type": "Int"},
            {"name": "Name.First", "type": "String"},
            {"name": "Name.Middle", "type": "String"},
            {"name": "Name.Last", "type": "String"},
            {"name": "Tags", "type": "string"}
        ],
        "typeProperties":
        {
            "folderPath": "mycontainer/myfolder",
            "format":
            {
                "type": "JsonFormat",
                "filePattern": "setOfObjects",
                "encodingName": "UTF-8",
                "nestingSeparator": "."
            }
        }
    }

Εάν δεν έχει οριστεί τη δομή, τη δραστηριότητα αντίγραφο ισοπεδώνει τη δομή από προεπιλογή και αντιγράψτε κάθε σημείο. 

#### <a name="supported-json-structure"></a>Υποστηριζόμενες JSON δομή
Λάβετε υπόψη τα εξής σημεία: 

- Κάθε αντικείμενο με μια συλλογή από ζεύγη ονόματος/τιμής έχει αντιστοιχιστεί σε μία γραμμή δεδομένων σε μορφή πίνακα. Αντικείμενα μπορούν να ενσωματωθούν και μπορείτε να ορίσετε τον τρόπο ισοπεδώσετε τη δομή σε ένα σύνολο δεδομένων με το διαχωριστικό ένθεσης (.), από προεπιλογή. Δείτε το [παράδειγμα JsonFormat](#jsonformat-example) πριν από την ενότητα για ένα παράδειγμα.  
- Εάν τη δομή δεν έχει οριστεί στο dataset εργοστασίου δεδομένων, τη δραστηριότητα αντίγραφο εντοπίσει το σχήμα από το πρώτο αντικείμενο και ισοπέδωση ολόκληρο το αντικείμενο. 
- Εάν τα δεδομένα εισόδου JSON έχει έναν πίνακα, τη δραστηριότητα αντίγραφο μετατρέπει την τιμή ολόκληρο πίνακα σε μια συμβολοσειρά. Μπορείτε να επιλέξετε να παραλείψετε με χρήση της [αντιστοίχισης στηλών ή φιλτράρισμα](#column-mapping-with-translator-rules).
- Εάν υπάρχουν διπλότυπα ονόματα στο ίδιο επίπεδο, τη δραστηριότητα αντίγραφο συλλογών τελευταίος.
- Τα ονόματα των ιδιοτήτων διάκριση πεζών-κεφαλαίων. Δύο ιδιότητες με το ίδιο όνομα αλλά διαφορετικές εντέρων αντιμετωπίζονται ως δύο ξεχωριστές ιδιότητες. 

### <a name="specifying-orcformat"></a>Καθορισμός OrcFormat
Εάν η μορφή έχει οριστεί σε OrcFormat, δεν χρειάζεται για να καθορίσετε τις ιδιότητες στην ενότητα μορφή μέσα στην ενότητα typeProperties. Παράδειγμα:

    "format":
    {
        "type": "OrcFormat"
    }

> [AZURE.IMPORTANT] Εάν δεν θέλετε να αντιγράψετε τα αρχεία ORC **ως-είναι** μεταξύ της εσωτερικής εγκατάστασης και cloud χώροι αποθήκευσης δεδομένων, πρέπει να εγκαταστήσετε το JRE 8 (περιβάλλοντος χρόνου εκτέλεσης Java) στον υπολογιστή σας πύλης. Μια πύλη 64-bit απαιτεί JRE 64-bit και 32-bit πύλης απαιτεί JRE 32-bit. Μπορείτε να βρείτε και τις δύο εκδόσεις από [εδώ](http://go.microsoft.com/fwlink/?LinkId=808605). Επιλέξτε το κατάλληλο.

Λάβετε υπόψη τα εξής σημεία:

-   Σύνθετη δεδομένων και όχι οι τύποι υποστηρίζονται (ΔΟΜΉ, ΧΆΡΤΗ, ΛΊΣΤΑ, ΈΝΩΣΗΣ)
-   Αρχείο ORC έχει τρεις [Επιλογές που σχετίζονται με τη συμπίεση](http://hortonworks.com/blog/orcfile-in-hdp-2-better-compression-better-performance/): ΚΑΜΊΑ, ZLIB, SNAPPY. Δεδομένα εργοστασιακές υποστηρίζει την ανάγνωση δεδομένων από αρχείο ORC σε οποιαδήποτε από αυτές τις μορφές συμπιεσμένη. Χρησιμοποιεί τη συμπίεση είναι κωδικοποιητής στο τα μετα-δεδομένα για να διαβάσετε τα δεδομένα. Ωστόσο, κατά τη σύνταξη σε ένα αρχείο ORC, εργοστασίου δεδομένων επιλέγει ZLIB, που είναι η προεπιλογή για ORC. Προς το παρόν, δεν υπάρχει επιλογή για να παρακάμψετε αυτήν τη συμπεριφορά. 

### <a name="specifying-parquetformat"></a>Καθορισμός ParquetFormat
Εάν η μορφή έχει οριστεί σε ParquetFormat, δεν χρειάζεται για να καθορίσετε τις ιδιότητες στην ενότητα μορφή μέσα στην ενότητα typeProperties. Παράδειγμα:

    "format":
    {
        "type": "ParquetFormat"
    }

> [AZURE.IMPORTANT] Εάν δεν θέλετε να αντιγράψετε τα αρχεία Parquet **ως-είναι** μεταξύ της εσωτερικής εγκατάστασης και cloud χώροι αποθήκευσης δεδομένων, πρέπει να εγκαταστήσετε το JRE 8 (περιβάλλοντος χρόνου εκτέλεσης Java) στον υπολογιστή σας πύλης. Μια πύλη 64-bit απαιτεί JRE 64-bit και 32-bit πύλης απαιτεί JRE 32-bit. Μπορείτε να βρείτε και τις δύο εκδόσεις από [εδώ](http://go.microsoft.com/fwlink/?LinkId=808605). Επιλέξτε το κατάλληλο.

Λάβετε υπόψη τα εξής σημεία:

-   Σύνθετη δεδομένων και όχι οι τύποι υποστηρίζονται (ΧΆΡΤΗ, ΛΊΣΤΑ)
-   Αρχείο parquet περιλαμβάνει τις ακόλουθες επιλογές που σχετίζονται με τη συμπίεση: ΚΑΜΊΑ, SNAPPY, GZIP και LZO. Προέλευση δεδομένων υποστηρίζει την ανάγνωση δεδομένων από αρχείο ORC σε οποιαδήποτε από αυτές τις μορφές συμπιεσμένο. Χρησιμοποιεί τον κωδικοποιητή συμπίεσης σε μετα-δεδομένων για να διαβάσετε τα δεδομένα. Ωστόσο, κατά τη σύνταξη σε ένα αρχείο Parquet, εργοστασιακές δεδομένων επιλέγει SNAPPY, που είναι η προεπιλογή για τη μορφή Parquet. Προς το παρόν, δεν υπάρχει επιλογή για να παρακάμψετε αυτήν τη συμπεριφορά. 
