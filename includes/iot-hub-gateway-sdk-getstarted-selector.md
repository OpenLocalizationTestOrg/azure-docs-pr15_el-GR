> [AZURE.SELECTOR]
- [Linux](../articles/iot-hub/iot-hub-linux-gateway-sdk-get-started.md)
- [Τα Windows](../articles/iot-hub/iot-hub-windows-gateway-sdk-get-started.md)

Αυτό το άρθρο παρέχει μια λεπτομερή αναλυτική παρουσίαση του [δείγματος κώδικα Γεια] [ lnk-helloworld-sample] για να παρουσιάσει τα θεμελιώδη στοιχεία του [SDK πύλη IoT Azure] [ lnk-gateway-sdk] αρχιτεκτονική. Το δείγμα χρησιμοποιεί το SDK IoT διανομέα πύλη για να δημιουργήσετε μια απλή πύλη που καταγράφει ένα μήνυμα "hello world" σε ένα αρχείο, κάθε πέντε δευτερόλεπτα.

Αυτή η αναλυτική παρουσίαση καλύπτει:

- **Έννοιες**: μια εννοιολογική επισκόπηση των στοιχείων που αποτελούν κάθε πύλη που δημιουργείτε με το SDK πύλη IoT.  
- **Γεια δείγμα αρχιτεκτονικής**: περιγράφει πώς εφαρμόζονται οι έννοιες του δείγματος Γεια και πώς τα στοιχεία συνδυάζονται μεταξύ τους.
- **Πώς μπορείτε να δημιουργήσετε το δείγμα**: τα βήματα που απαιτούνται για τη δημιουργία του δείγματος.
- **Τρόπος εκτέλεσης δείγματος**: τα βήματα που απαιτούνται για την εκτέλεση του δείγματος. 
- **Η τυπική έξοδος**: ένα παράδειγμα της εξόδου που θα εμφανιστεί, όταν εκτελείτε το δείγμα.
- **Τμήματα κώδικα**: μια συλλογή από τμήματα κώδικα για να εμφανίσετε πώς το δείγμα Γεια υλοποιεί στοιχεία κλειδιών πύλη.

## <a name="azure-iot-gateway-sdk-concepts"></a>Έννοιες IoT SDK πύλη Azure

Εξετάζει το δείγμα κώδικα ή να δημιουργήσετε τη δική σας πύλη πεδίο χρησιμοποιώντας το SDK πύλη IoT, θα πρέπει να κατανοήσετε τις βασικές έννοιες που θα υποστηριχθεί η αρχιτεκτονική του SDK.

### <a name="modules"></a>Λειτουργικές μονάδες

Μπορείτε να δημιουργήσετε μια πύλη με το SDK πύλη IoT Azure, δημιουργίας και σύνδεσης των *λειτουργικών μονάδων*. Λειτουργικές μονάδες χρησιμοποιούν *μηνύματα* για την ανταλλαγή δεδομένων μεταξύ τους. Μια λειτουργική μονάδα λαμβάνει ένα μήνυμα, εκτελεί κάποια ενέργεια σε αυτόν, προαιρετικά το μετατρέπει σε ένα νέο μήνυμα και, στη συνέχεια, εκδίδει για άλλες λειτουργικές μονάδες για την επεξεργασία. Ορισμένες λειτουργικές μονάδες μπορεί να παράγει μόνο τα νέα μηνύματα και ποτέ επεξεργασία εισερχόμενων μηνυμάτων. Μια αλυσίδα των λειτουργικών μονάδων δημιουργεί μια διοχέτευση επεξεργασίας δεδομένων με κάθε λειτουργική μονάδα που εκτελεί ένα μετασχηματισμό των δεδομένων σε ένα σημείο που διοχέτευσης.

![Μια αλυσίδα των λειτουργικών μονάδων σε πύλη που δημιουργήθηκε με το SDK Azure IoT πύλη][1]
 
Το SDK περιέχει τα εξής:

- Εκ των προτέρων γραπτή λειτουργικές μονάδες που εκτελούν κοινές λειτουργίες πύλη.
- Οι διασυνδέσεις που ο προγραμματιστής να χρησιμοποιήσετε για να γράψετε προσαρμοσμένες λειτουργικές μονάδες.
- Η υποδομή που είναι αναγκαίες για να αναπτύξετε και να εκτελέσετε ένα σύνολο λειτουργικών μονάδων.

Το SDK περιέχει ένα επίπεδο αφαίρεσης που σας επιτρέπει να δημιουργήσετε πύλες που πρέπει να εκτελούνται σε διάφορα λειτουργικά συστήματα και πλατφόρμες.

![Επίπεδο αφαίρεσης Azure SDK πύλη IoT][2]

### <a name="messages"></a>Μηνύματα

Παρόλο που η σκέψη σχετικά με τις λειτουργικές μονάδες που διέρχεται μηνυμάτων μεταξύ τους είναι ένας εύκολος τρόπος για να conceptualize πώς μια πύλη λειτουργίες, αυτό δεν αντικατοπτρίζουν με ακρίβεια τι θα συμβεί. Λειτουργικές μονάδες, χρησιμοποιήστε ενός μεσίτη για να επικοινωνούν μεταξύ τους, να δημοσιεύουν μηνύματα για το μεσίτη (διαύλου, pubsub ή οποιαδήποτε άλλη μοτίβο ανταλλαγής μηνυμάτων) και στη συνέχεια, αφήστε το broker δρομολόγηση του μηνύματος για τις λειτουργικές μονάδες που συνδέονται σε αυτόν.

Μια λειτουργικές μονάδες χρησιμοποιεί τη συνάρτηση **Broker_Publish** για να δημοσιεύσετε ένα μήνυμα σε broker. Broker που παραδίδει τα μηνύματα σε μια λειτουργική μονάδα κατά την κλήση μιας συνάρτησης επιστροφής κλήσης. Ένα μήνυμα αποτελείται από ένα σύνολο ιδιοτήτων κλειδιού/τιμής και περιεχομένου που μεταβιβάζονται ως ένα μπλοκ μνήμης.

![Ο ρόλος του Broker στο SDK πύλη Azure IoT][3]

### <a name="message-routing-and-filtering"></a>Η δρομολόγηση μηνυμάτων και το φιλτράρισμα

Υπάρχουν δύο τρόποι κατευθύνοντας μηνύματα για τις σωστές λειτουργικές μονάδες. Ένα σύνολο συνδέσεων μπορούν να περάσουν το broker broker που γνωρίζει η προέλευση και ο δέκτης για κάθε λειτουργική μονάδα ή λειτουργική μονάδα να φιλτράρετε με βάση τις ιδιότητες του μηνύματος. Μια λειτουργική μονάδα θα πρέπει να ενεργεί μόνο μετά από ένα μήνυμα, αν το μήνυμα προορίζεται για το σκοπό αυτό. Τις συνδέσεις και φιλτραρίσματος μηνυμάτων είναι τι ουσιαστικά δημιουργεί ένα μήνυμα διοχέτευσης.

## <a name="hello-world-sample-architecture"></a>Hello World δείγμα αρχιτεκτονικής

Το δείγμα Γεια παρουσιάζει τις έννοιες που περιγράφονται στην προηγούμενη ενότητα. Το δείγμα Γεια υλοποιεί μια πύλη με δίκτυο αγωγών που αποτελείται από δύο λειτουργικές μονάδες:

-   Η λειτουργική μονάδα *Χαίρετε* δημιουργεί ένα μήνυμα κάθε πέντε δευτερόλεπτα και μεταβιβάζει τη λειτουργική μονάδα καταγραφής.
-   Η λειτουργική μονάδα *καταγραφής* εγγράφει τα μηνύματα που λαμβάνει σε ένα αρχείο.

![Η αρχιτεκτονική του δείγματος Γεια που δημιουργήθηκε με το SDK Azure IoT πύλη][4]

Όπως περιγράφεται στην προηγούμενη ενότητα, η λειτουργική μονάδα Γεια δεν μεταβιβάζεται μηνύματα απευθείας τη λειτουργική μονάδα καταγραφής κάθε πέντε δευτερόλεπτα. Αντί για αυτό, δημοσιεύει ένα μήνυμα για να το broker κάθε πέντε δευτερόλεπτα.

Η λειτουργική μονάδα καταγραφής λαμβάνει το μήνυμα από το broker και ενεργεί σε, εγγραφή σε αρχείο τα περιεχόμενα του μηνύματος.

Η λειτουργική μονάδα καταγραφής καταναλώνει μόνο μηνύματα από το broker, δημοσιεύει ποτέ νέα μηνύματα για το μεσίτη.

![Πώς το broker δρομολογεί μηνύματα μεταξύ λειτουργικών μονάδων στο SDK Azure IoT πύλη][5]

Στην παραπάνω εικόνα παρουσιάζει την αρχιτεκτονική του δείγματος Γεια και οι σχετικές διαδρομές προς τα αρχεία προέλευσης που υλοποιούν διαφορετικά τμήματα του δείγματος στο χώρο [φύλαξης][lnk-gateway-sdk]. Εξερευνήσετε μόνοι σας τον κωδικό ή χρησιμοποιήστε τα τμήματα κώδικα παρακάτω ως οδηγό.

<!-- Images -->
[1]: media/iot-hub-gateway-sdk-getstarted-selector/modules.png
[2]: media/iot-hub-gateway-sdk-getstarted-selector/modules_2.png
[3]: media/iot-hub-gateway-sdk-getstarted-selector/messages_1.png
[4]: media/iot-hub-gateway-sdk-getstarted-selector/high_level_architecture.png
[5]: media/iot-hub-gateway-sdk-getstarted-selector/detailed_architecture.png

<!-- Links -->
[lnk-helloworld-sample]: https://github.com/Azure/azure-iot-gateway-sdk/tree/master/samples/hello_world
[lnk-gateway-sdk]: https://github.com/Azure/azure-iot-gateway-sdk