<properties 
    pageTitle="Υπηρεσία Bus αρχιτεκτονική | Microsoft Azure"
    description="Περιγράφει το μήνυμα και μετάδοση επεξεργασίας αρχιτεκτονική του Azure Service Bus."
    services="service-bus"
    documentationCenter="na"
    authors="sethmanheim"
    manager="timlt"
    editor="" />
<tags 
    ms.service="service-bus"
    ms.devlang="na"
    ms.topic="get-started-article"
    ms.tgt_pltfrm="na"
    ms.workload="na"
    ms.date="07/11/2016"
    ms.author="sethm" />

# <a name="service-bus-architecture"></a>Αρχιτεκτονική Bus υπηρεσίας

Σε αυτό το άρθρο περιγράφει το μήνυμα και μετάδοση επεξεργασίας αρχιτεκτονική του Azure Service Bus.

## <a name="service-bus-scale-units"></a>Μονάδες κλίμακας Bus υπηρεσίας

Υπηρεσία Bus είναι οργανωμένο κατά *μονάδες κλίμακας*. Μια μονάδα κλίμακα είναι μια μονάδα ανάπτυξης και περιέχει όλα στοιχεία που απαιτούνται εκτελείται η υπηρεσία. Κάθε περιοχή αναπτύσσει μία ή περισσότερες μονάδες κλίμακας Bus υπηρεσίας.

Ένας χώρος ονομάτων Bus υπηρεσίας έχει αντιστοιχιστεί σε μια μονάδα κλίμακα. Η μονάδα κλίμακα χειρίζεται όλους τους τύπους των οντοτήτων Bus υπηρεσίας: αναμετάδοση και όπου μεσολαβούν ανταλλαγής μηνυμάτων οντοτήτων για (ουρές, θέματα, συνδρομές). Μια μονάδα κλίμακα Bus υπηρεσίας αποτελείται από τα ακόλουθα στοιχεία:

- **Ένα σύνολο κόμβους πύλης.** Πύλη κόμβους τον έλεγχο ταυτότητας εισερχόμενες αιτήσεις και χειρισμού των αιτήσεων μεταγωγή. Κάθε κόμβο πύλης περιλαμβάνει μια δημόσια διεύθυνση IP.

- **Ένα σύνολο μηνυμάτων broker κόμβους.** Ανταλλαγής μηνυμάτων κόμβους broker επεξεργαστεί αιτήσεις σχετικά με ανταλλαγή μηνυμάτων οντοτήτων.

- **Χώρος αποθήκευσης μία πύλη.** Ο χώρος αποθήκευσης πύλης διατηρεί τα δεδομένα για κάθε οντότητα που έχει οριστεί σε αυτή τη μονάδα κλίμακα. Ο χώρος αποθήκευσης πύλης έχει υλοποιηθεί επάνω σε μια βάση δεδομένων SQL Azure.

- **Πολλών μηνυμάτων stores.** Ανταλλαγής μηνυμάτων αποθηκεύει κρατήστε τα μηνύματα όλα ουρές, θέματα και συνδρομές που ορίζονται σε αυτήν τη μονάδα κλίμακα. Επίσης, περιλαμβάνει όλα τα δεδομένα συνδρομής. Εκτός εάν [διαμερίσματα μηνυμάτων οντοτήτων](service-bus-partitioning.md) είναι ενεργοποιημένη, ουρά ή το θέμα έχει αντιστοιχιστεί σε ένα χώρο αποθήκευσης μηνυμάτων. Συνδρομές αποθηκεύονται στον ίδιο ανταλλαγής μηνυμάτων χώρο αποθήκευσης στο τους γονικού θέματος. Με εξαίρεση υπηρεσίας Bus [Premium μηνυμάτων](service-bus-premium-messaging.md), την ανταλλαγή μηνυμάτων αποθηκεύει υλοποιούνται επάνω σε βάσεις δεδομένων SQL Azure.

## <a name="containers"></a>Κοντέινερ

Κάθε ανταλλαγής μηνυμάτων οντότητα εκχωρείται ένα συγκεκριμένο κοντέινερ. Το κοντέινερ είναι μια λογική δομή που χρησιμοποιεί ακριβώς ένα μηνυμάτων με το κατάστημα όλων των σχετικών δεδομένων για αυτό το κοντέινερ. Κάθε κοντέινερ έχει ανατεθεί σε έναν κόμβο broker ανταλλαγής μηνυμάτων. Συνήθως, υπάρχουν περισσότερες κοντέινερ από μηνυμάτων broker κόμβους. Επομένως, κάθε ανταλλαγής μηνυμάτων κόμβο broker φορτώνει πολλών κοντέινερ. Η κατανομή των κοντέινερ σε έναν κόμβο broker ανταλλαγής μηνυμάτων είναι οργανωμένο τέτοια ώστε όλους τους κόμβους ανταλλαγής μηνυμάτων broker εξίσου γίνεται φόρτωση. Εάν η φόρτωση μοτίβο αλλαγών (για παράδειγμα, ένα από τα κοντέινερ λαμβάνει πολύ απασχολημένοι), ή εάν έναν κόμβο broker ανταλλαγής μηνυμάτων δεν είναι διαθέσιμος προσωρινά, τα κοντέινερ είναι αναδιανομή μεταξύ τους κόμβους broker ανταλλαγής μηνυμάτων.

## <a name="processing-of-incoming-messaging-requests"></a>Η επεξεργασία των εισερχόμενες προσκλήσεις ανταλλαγής μηνυμάτων

Όταν ένας υπολογιστής-πελάτης στέλνει την αίτηση για Bus υπηρεσίας, η Azure εξισορρόπηση φόρτου δρομολογεί το σε οποιονδήποτε από τους κόμβους πύλης. Ο κόμβος πύλης επιτρέπει την αίτηση. Εάν η πρόσκληση σε αφορά μια οντότητα ανταλλαγής μηνυμάτων (ουρά, το θέμα, συνδρομή), ο κόμβος πύλης αναζητά την οντότητα στο χώρο αποθήκευσης πύλης και καθορίζει σε ποια μηνύματα store βρίσκεται η οντότητα. Στη συνέχεια, αναζητά ποια μηνύματα κόμβο broker αυτήν τη στιγμή εξυπηρετεί αυτό το κοντέινερ και στέλνει την αίτηση για αυτόν τον κόμβο broker ανταλλαγής μηνυμάτων. Ο κόμβος broker ανταλλαγής μηνυμάτων επεξεργάζεται την αίτηση και ενημερώνει την κατάσταση οντότητα στο χώρο αποθήκευσης του κοντέινερ. Ο κόμβος broker ανταλλαγής μηνυμάτων, στη συνέχεια, στέλνει την απόκριση πίσω τον κόμβο πύλη, η οποία αποστέλλει μια κατάλληλη απόκριση του υπολογιστή-πελάτη που εξέδωσε την αρχική αίτηση.

![Η επεξεργασία των εισερχόμενες προσκλήσεις ανταλλαγής μηνυμάτων](./media/service-bus-architecture/IC690644.png)

## <a name="processing-of-incoming-relay-requests"></a>Επεξεργασία των εισερχόμενων αιτήσεων αναμετάδοσης

Όταν ένας υπολογιστής-πελάτης στέλνει την αίτηση για Bus υπηρεσίας, η Azure εξισορρόπηση φόρτου δρομολογεί το σε οποιονδήποτε από τους κόμβους πύλης. Εάν η αίτηση είναι μια αίτηση ακρόασης, ο κόμβος πύλης δημιουργεί μια νέα μεταγωγή. Εάν η αίτηση είναι μια αίτηση σύνδεσης σε ένα συγκεκριμένο αναμετάδοσης, ο κόμβος πύλης προωθεί την αίτηση σύνδεσης στον κόμβο πύλης που ανήκει η μετάδοση. Ο κόμβος πύλης που ανήκει η μετάδοση αποστέλλει μια αίτηση σημείο συνάντησης στο ακρόασης πρόγραμμα-πελάτη, που σας ζητά να δημιουργήσετε ένα προσωρινό κανάλι στον κόμβο πύλης που λάβατε την αίτηση σύνδεσης το ακροατήριο.

Όταν δημιουργηθεί η σύνδεση μεταγωγής, τα προγράμματα-πελάτες μπορούν να ανταλλαγή μηνυμάτων μέσω του κόμβου πύλης που χρησιμοποιείται για το σημείο συνάντησης.

![Η επεξεργασία των εισερχόμενες αιτήσεις αναμετάδοσης](./media/service-bus-architecture/IC690645.png)

## <a name="next-steps"></a>Επόμενα βήματα

Τώρα που έχετε διαβάσει μια επισκόπηση της υπηρεσίας Bus αρχιτεκτονική, για να ξεκινήσετε να επισκεφθείτε τις παρακάτω συνδέσεις:

- [Επισκόπηση μηνυμάτων Bus υπηρεσίας](service-bus-messaging-overview.md)
- [Υπηρεσία Bus τα θεμελιώδη στοιχεία](service-bus-fundamentals-hybrid-solutions.md)
- [Μια σε ουρά μηνυμάτων λύση χρησιμοποιώντας ουρές Bus υπηρεσίας](service-bus-dotnet-multi-tier-app-using-service-bus-queues.md)
