<properties
    pageTitle="Πώς μπορείτε να χρησιμοποιήσετε τα θέματα Bus υπηρεσίας (φωνητικής γραφής) | Microsoft Azure"
    description="Μάθετε πώς να χρησιμοποιείτε θέματα Bus υπηρεσίας και συνδρομές στο Azure. Δείγματα κώδικα έχουν εγγραφεί για εφαρμογές φωνητικής γραφής."
    services="service-bus"
    documentationCenter="ruby"
    authors="sethmanheim"
    manager="timlt"
    editor=""/>

<tags
    ms.service="service-bus"
    ms.workload="na"
    ms.tgt_pltfrm="na"
    ms.devlang="ruby"
    ms.topic="article"
    ms.date="10/04/2016"
    ms.author="sethm"/>

# <a name="how-to-use-service-bus-topicssubscriptions"></a>Πώς μπορείτε να χρησιμοποιήσετε την υπηρεσία Bus θέματα/συνδρομές

[AZURE.INCLUDE [service-bus-selector-topics](../../includes/service-bus-selector-topics.md)]

Σε αυτό το άρθρο περιγράφει τον τρόπο χρήσης της υπηρεσίας Bus θέματα και οι συνδρομές από τις εφαρμογές φωνητικής γραφής. Τα σενάρια καλύπτεται περιλαμβάνουν **τη δημιουργία θέματα και συνδρομές, τη δημιουργία συνδρομής φίλτρα, αποστολή μηνυμάτων** σε ένα θέμα, **λαμβάνετε μηνύματα από μια συνδρομή**και **Διαγραφή θέματα και συνδρομών**. Για περισσότερες πληροφορίες σχετικά με τα θέματα και οι συνδρομές, ανατρέξτε στην ενότητα [Επόμενα βήματα](#next-steps) .

## <a name="service-bus-topics-and-subscriptions"></a>Θέματα υπηρεσίας Bus και συνδρομών

Θέματα υπηρεσίας Bus και συνδρομές υποστηρίζει μια *δημοσίευση/εγγραφή* ανταλλαγής μηνυμάτων μοντέλο επικοινωνίας. Όταν χρησιμοποιείτε τα θέματα και οι συνδρομές, στοιχεία μια κατανεμημένη εφαρμογή δεν επικοινωνούν απευθείας μεταξύ τους; αντί για αυτό, μπορούν να ανταλλάσσουν μηνύματα μέσω ενός θέματος, η οποία λειτουργεί ως ενδιάμεσο.

![TopicConcepts](./media/service-bus-ruby-how-to-use-topics-subscriptions/sb-topics-01.png)

Σε αντίθεση με το ουρές Bus υπηρεσίας, όπου κάθε μήνυμα υποβάλλεται σε επεξεργασία από ένα μεμονωμένο καταναλωτή, θέματα και οι συνδρομές παρέχουν **ένα-προς-πολλά** φόρμας επικοινωνίας, χρησιμοποιώντας ένα μοτίβο δημοσίευση/εγγραφή. Είναι δυνατή η καταχώρηση πολλές συνδρομές σε ένα θέμα. Κατά την αποστολή ενός μηνύματος σε ένα θέμα, στη συνέχεια, γίνεται διαθέσιμη σε κάθε συνδρομής για την επεξεργασία ανεξάρτητα.

Μια συνδρομή θέμα μοιάζει με μια εικονική ουρά που λαμβάνει αντίγραφα των μηνυμάτων που έχουν αποσταλεί στο θέμα. Προαιρετικά, μπορείτε να καταχωρήσετε κανόνες φιλτραρίσματος για ένα θέμα σε βάση ανά συνδρομή, που σας επιτρέπει να φίλτρου/περιορισμός των μηνυμάτων σε ένα θέμα λαμβάνονται από ποιες συνδρομές το θέμα.

Θέματα υπηρεσίας Bus και συνδρομές σάς επιτρέπουν να κλιμακωθεί για την επεξεργασία ενός μεγάλου αριθμού μηνυμάτων σε μεγάλο αριθμό των χρηστών και των εφαρμογών.

## <a name="create-a-namespace"></a>Δημιουργία ενός χώρου ονομάτων

Για να ξεκινήσετε να χρησιμοποιείτε ουρές Bus υπηρεσίας στο Azure, πρέπει πρώτα να δημιουργήσετε ένα χώρο ονομάτων. Ένα χώρο ονομάτων παρέχει ένα κοντέινερ πεδίου για την προσθήκη διεύθυνσης σε πόρους Bus υπηρεσίας στην εφαρμογή σας. Πρέπει να δημιουργήσετε το χώρο ονομάτων έως το περιβάλλον γραμμής εντολών επειδή το [Azure πύλη][] δεν δημιουργεί το χώρο ονομάτων με σύνδεση ACS.

Για να δημιουργήσετε ένα χώρο ονομάτων:

1. Ανοίξτε ένα παράθυρο κονσόλας Azure Powershell.

2. Πληκτρολογήστε την παρακάτω εντολή για να δημιουργήσετε ένα χώρο ονομάτων. Δώστε τη δική σας τιμή χώρο ονομάτων και καθορίστε στην ίδια περιοχή με την εφαρμογή σας.

    ```
    New-AzureSBNamespace -Name 'yourexamplenamespace' -Location 'West US' -NamespaceType 'Messaging' -CreateACSNamespace $true
    ```

    ![Δημιουργία Namespace](./media/service-bus-ruby-how-to-use-topics-subscriptions/showcmdcreate.png)

## <a name="obtain-default-management-credentials-for-the-namespace"></a>Λήψη προεπιλεγμένη Διαχείριση διαπιστευτηρίων για το χώρο ονομάτων

Για να εκτελέσετε εργασίες διαχείρισης, όπως τη δημιουργία μιας ουράς σε νέο χώρο ονομάτων, πρέπει να λάβετε τα διαπιστευτήρια διαχείρισης για το χώρο ονομάτων.

Το cmdlet του PowerShell που εκτελέσατε για να δημιουργήσετε το χώρο ονομάτων υπηρεσίας Bus εμφανίζει τον αριθμό-κλειδί μπορείτε να χρησιμοποιήσετε για να διαχειριστείτε το χώρο ονομάτων. Αντιγράψτε την τιμή **DefaultKey** . Παρακάτω σε αυτό το πρόγραμμα εκμάθησης, θα χρησιμοποιήσετε αυτήν την τιμή στον κώδικά σας.

![Αντιγραφή αριθμού-κλειδιού](./media/service-bus-ruby-how-to-use-topics-subscriptions/defaultkey.png)

> [AZURE.NOTE]
> Μπορείτε επίσης να βρείτε αυτό το κλειδί εάν συνδεθείτε [πύλη του Azure][] και μεταβείτε στις πληροφορίες σύνδεσης για το χώρο ονομάτων.

## <a name="create-a-ruby-application"></a>Δημιουργία μιας εφαρμογής φωνητικής γραφής

Για οδηγίες, ανατρέξτε στο θέμα [Δημιουργία μιας εφαρμογής φωνητικής γραφής στο Azure](../virtual-machines/linux/classic/virtual-machines-linux-classic-ruby-rails-web-app.md).

## <a name="configure-your-application-to-use-service-bus"></a>Ρύθμιση παραμέτρων σας εφαρμογής για χρήση υπηρεσίας Bus

Για να χρησιμοποιήσετε Bus υπηρεσίας, κάντε λήψη και χρησιμοποιήστε το πακέτο Azure φωνητικής γραφής, η οποία περιλαμβάνει ένα σύνολο βιβλιοθηκών ευκολία που επικοινωνία με τις υπηρεσίες ΥΠΌΛΟΙΠΟ του χώρου αποθήκευσης.

### <a name="use-rubygems-to-obtain-the-package"></a>Χρήση RubyGems λήψης του πακέτου

1. Χρησιμοποιήστε ένα περιβάλλον γραμμής εντολών όπως **PowerShell** (Windows), το **Terminal** (Mac) ή το **πάρτι** (Unix).

2. Πληκτρολογήστε "Περσικό azure εγκατάσταση" στο παράθυρο εντολών για να εγκαταστήσετε το περσικό και τις εξαρτήσεις.

### <a name="import-the-package"></a>Εισαγωγή του πακέτου

Χρησιμοποιώντας το πρόγραμμα επεξεργασίας κειμένου Αγαπημένα, προσθέστε τα ακόλουθα στο επάνω μέρος του αρχείου φωνητικής γραφής στην οποία σκοπεύετε να χρησιμοποιήσετε χώρου αποθήκευσης:

```
require "azure"
```

## <a name="set-up-a-service-bus-connection"></a>Ρύθμιση σύνδεσης Bus υπηρεσίας

Η λειτουργική μονάδα Azure διαβάζει τις μεταβλητές περιβάλλοντος **AZURE\_SERVICEBUS\_χώρο ΟΝΟΜΆΤΩΝ** και **AZURE\_SERVICEBUS\_ACCESS\_αριθμού-ΚΛΕΙΔΙΟΎ** για τις πληροφορίες που απαιτούνται για να συνδεθείτε με το χώρο ονομάτων. Αν δεν έχουν οριστεί αυτές τις μεταβλητές περιβάλλοντος, πρέπει να καθορίσετε τις πληροφορίες χώρο ονομάτων πριν από τη χρήση **Azure::ServiceBusService** με τον ακόλουθο κώδικα:

```
Azure.config.sb_namespace = "<your azure service bus namespace>"
Azure.config.sb_access_key = "<your azure service bus access key>"
```

Ορίστε την τιμή χώρου ονομάτων στην τιμή που δημιουργήσατε και όχι ολόκληρη τη διεύθυνση URL. Για παράδειγμα, χρησιμοποιήστε **"yourexamplenamespace"**, δεν "yourexamplenamespace.servicebus.windows.net".

## <a name="create-a-topic"></a>Δημιουργία θέματος

Το αντικείμενο **Azure::ServiceBusService** σάς επιτρέπει να εργαστείτε με τα θέματα. Ο ακόλουθος κώδικας δημιουργεί ένα αντικείμενο **Azure::ServiceBusService** . Για να δημιουργήσετε ένα θέμα, χρησιμοποιήστε το **Δημιουργία\_topic()** μέθοδο. Το παρακάτω παράδειγμα δημιουργεί ένα θέμα ή για να εκτυπώσετε τα σφάλματα αν υπάρχουν.

```
azure_service_bus_service = Azure::ServiceBusService.new
begin
  topic = azure_service_bus_service.create_queue("test-topic")
rescue
  puts $!
end
```

Μπορείτε επίσης να μεταβιβάσετε ένα αντικείμενο **Azure::ServiceBus::Topic** με πρόσθετες επιλογές, που σας επιτρέπουν να Παράκαμψη προεπιλεγμένων ρυθμίσεων θέμα όπως χρόνος ζωής του μηνύματος σε live ή ουρά μέγιστο μέγεθος. Το παρακάτω παράδειγμα εμφανίζει τη ρύθμιση του μεγέθους μέγιστο ουρά 5GB και την ώρα στο live σε 1 λεπτό:

```
topic = Azure::ServiceBus::Topic.new("test-topic")
topic.max_size_in_megabytes = 5120
topic.default_message_time_to_live = "PT1M"

topic = azure_service_bus_service.create_topic(topic)
```

## <a name="create-subscriptions"></a>Δημιουργία εγγραφών

Το θέμα συνδρομές δημιουργούνται επίσης με το αντικείμενο **Azure::ServiceBusService** . Συνδρομές ονομάζονται και μπορούν να έχουν ένα προαιρετικό φίλτρο που περιορίζει το σύνολο των μηνυμάτων που παραδίδονται σε ουρά εικονικού τη συνδρομή.

Συνδρομές είναι μόνιμες και θα εξακολουθούν να υπάρχουν παρά μόνο αφού είτε ή στο θέμα συσχετίζονται με, διαγράφονται. Εάν η εφαρμογή σας περιέχει λογική για να δημιουργήσετε μια συνδρομή, το πρώτα πρέπει να ελέγξετε αν υπάρχει ήδη τη συνδρομή, χρησιμοποιώντας τη μέθοδο getSubscription.

### <a name="create-a-subscription-with-the-default-matchall-filter"></a>Δημιουργήστε μια συνδρομή με το φίλτρο προεπιλεγμένη (MatchAll)

Το φίλτρο **MatchAll** είναι το προεπιλεγμένο φίλτρο που χρησιμοποιείται, αν υπάρχει φίλτρο έχει καθοριστεί όταν δημιουργείται μια νέα συνδρομή. Όταν χρησιμοποιείται το φίλτρο **MatchAll** , όλα τα μηνύματα που δημοσιεύονται στο θέμα τοποθετούνται στην ουρά εικονικού τη συνδρομή. Το παρακάτω παράδειγμα δημιουργεί μια εγγραφή με όνομα "όλα-μηνυμάτων" και χρησιμοποιεί το προεπιλεγμένο φίλτρο **MatchAll** .

```
subscription = azure_service_bus_service.create_subscription("test-topic", "all-messages")
```

### <a name="create-subscriptions-with-filters"></a>Δημιουργία συνδρομές με τα φίλτρα

Μπορείτε επίσης να ορίσετε φίλτρα που σας επιτρέπουν να καθορίσετε ποιο θα πρέπει να εμφανίζονται τα μηνύματα που αποστέλλονται σε ένα θέμα μέσα σε μια συγκεκριμένη συνδρομή.

Η πιο ευέλικτη τύπο φίλτρου που υποστηρίζονται από συνδρομές είναι το **Azure::ServiceBus::SqlFilter**, που εφαρμόζει ένα υποσύνολο SQL92. Φίλτρα SQL λειτουργούν σχετικά με τις ιδιότητες των μηνυμάτων που δημοσιεύονται στο θέμα. Για περισσότερες λεπτομέρειες σχετικά με τις παραστάσεις που μπορούν να χρησιμοποιηθούν με φίλτρο SQL, ελέγξτε τη σύνταξη [SqlFilter.SqlExpression](http://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.sqlfilter.sqlexpression.aspx) .

Μπορείτε να προσθέσετε φίλτρα σε μια συνδρομή με τη χρήση του **Δημιουργία\_rule()** μέθοδο του αντικειμένου **Azure::ServiceBusService** . Αυτή η μέθοδος σάς επιτρέπει να προσθέσετε νέα φίλτρα σε μια υπάρχουσα συνδρομή.

Επειδή το προεπιλεγμένο φίλτρο εφαρμόζεται αυτόματα σε όλες τις νέες εγγραφές, πρέπει πρώτα να καταργήσετε το προεπιλεγμένο φίλτρο ή το **MatchAll** θα αντικαταστήσει τα άλλα φίλτρα μπορείτε να καθορίσετε. Μπορείτε να καταργήσετε τον προεπιλεγμένο κανόνα, χρησιμοποιώντας το **Διαγραφή\_rule()** μέθοδος στο αντικείμενο **Azure::ServiceBusService** .

Το ακόλουθο παράδειγμα δημιουργεί μια εγγραφή με όνομα "ανώτερη-μηνύματα" με ένα **Azure::ServiceBus::SqlFilter** που επιλέγει μόνο τα μηνύματα που έχουν μια προσαρμοσμένη **μήνυμα\_αριθμό** ιδιότητα μεγαλύτερο από 3:

```
subscription = azure_service_bus_service.create_subscription("test-topic", "high-messages")
azure_service_bus_service.delete_rule("test-topic", "high-messages", "$Default")

rule = Azure::ServiceBus::Rule.new("high-messages-rule")
rule.topic = "test-topic"
rule.subscription = "high-messages"
rule.filter = Azure::ServiceBus::SqlFilter.new({
  :sql_expression => "message_number > 3" })
rule = azure_service_bus_service.create_rule(rule)
```

Ομοίως, το ακόλουθο παράδειγμα δημιουργεί μια εγγραφή με όνομα "Χαμηλή-μηνύματα" με ένα **Azure::ServiceBus::SqlFilter** που επιλέγει μόνο τα μηνύματα που έχουν ιδιότητας **message_number** μικρότερη ή ίση με 3:

```
subscription = azure_service_bus_service.create_subscription("test-topic", "low-messages")
azure_service_bus_service.delete_rule("test-topic", "low-messages", "$Default")

rule = Azure::ServiceBus::Rule.new("low-messages-rule")
rule.topic = "test-topic"
rule.subscription = "low-messages"
rule.filter = Azure::ServiceBus::SqlFilter.new({
  :sql_expression => "message_number <= 3" })
rule = azure_service_bus_service.create_rule(rule)
```

Όταν ένα μήνυμα αποστέλλεται τώρα "δοκιμή-θέματος", είναι η παράδοση πάντα σε δέκτες μια συνδρομή με τη συνδρομή το θέμα "όλα-μηνυμάτων" και επιλεκτική παραδίδονται δέκτες μια συνδρομή για τις συνδρομές το θέμα "ανώτερη-" και "Χαμηλό-μηνύματα" (ανάλογα με το περιεχόμενο του μηνύματος).

## <a name="send-messages-to-a-topic"></a>Αποστολή μηνυμάτων σε ένα θέμα

Για να στείλετε ένα μήνυμα σε ένα θέμα Bus υπηρεσία, πρέπει να χρησιμοποιήσετε την εφαρμογή σας το **Αποστολή\_θέμα\_message()** μέθοδος στο αντικείμενο **Azure::ServiceBusService** . Τα μηνύματα που αποστέλλονται σε θέματα υπηρεσίας Bus είναι παρουσίες των αντικειμένων **Azure::ServiceBus::BrokeredMessage** . **Azure::ServiceBus::BrokeredMessage** τα αντικείμενα έχουν ένα σύνολο τυπικές ιδιότητες (όπως είναι η **ετικέτα** και **χρόνου\_να\_live**), ένα λεξικό που χρησιμοποιείται για τη διατήρηση προσαρμοσμένη εφαρμογή συγκεκριμένες ιδιότητες, και ένα σώμα δεδομένων συμβολοσειρά. Μια εφαρμογή του, να ορίσετε το σώμα του μηνύματος, μεταφέροντας μια τιμή συμβολοσειρά για να την **Αποστολή\_θέμα\_message()** απαιτείται μέθοδο και οποιαδήποτε τυπικές ιδιότητες θα συμπληρώνεται με προεπιλεγμένες τιμές.

Το παρακάτω παράδειγμα δείχνει πώς μπορείτε να στείλετε πέντε δοκιμή μηνύματα "δοκιμή-θέματος". Σημειώστε ότι η τιμή προσαρμοσμένη ιδιότητα **message_number** για κάθε μήνυμα ποικίλλει σε την επανάληψη του βρόχου (αυτή καθορίζει ποια συνδρομή λαμβάνει όπως):

```
5.times do |i|
  message = Azure::ServiceBus::BrokeredMessage.new("test message " + i,
    { :message_number => i })
  azure_service_bus_service.send_topic_message("test-topic", message)
end
```

Θέματα υπηρεσίας Bus υποστηρίζει ένα μέγιστο μέγεθος μηνύματος 256 KB η [τυπική σειρά](service-bus-premium-messaging.md) και 1 MB στο [επίπεδο Premium](service-bus-premium-messaging.md). Την επικεφαλίδα, η οποία περιλαμβάνει τις ιδιότητες τυπικών και προσαρμοσμένων εφαρμογών, μπορεί να έχει ένα μέγιστο μέγεθος των 64 KB. Υπάρχει όριο στον αριθμό των μηνυμάτων που θα διατηρούνται σε ένα θέμα, αλλά υπάρχει μια καπέλο το συνολικό μέγεθος των μηνυμάτων που διαθέτει ένα θέμα. Σε αυτό το θέμα μέγεθος ορίζεται κατά τη δημιουργία, με ένα ανώτερο όριο των 5 GB.

## <a name="receive-messages-from-a-subscription"></a>Λήψη μηνυμάτων από μια συνδρομή

Γίνεται λήψη των μηνυμάτων από μια συνδρομή με τη χρήση του **Λήψη\_συνδρομή\_message()** μέθοδος στο αντικείμενο **Azure::ServiceBusService** . Από προεπιλογή, τα μηνύματα read(peak) και κλειδωμένο χωρίς να το διαγράψετε από τη συνδρομή. Μπορείτε να διαβάσετε και να διαγράψετε το μήνυμα από τη συνδρομή, ορίζοντας την **Σύνοψη\_κλείδωμα** επιλογή σε **false**.

Η προεπιλεγμένη συμπεριφορά κάνει την ανάγνωση και τη διαγραφή μια λειτουργία δύο σταδίων, η οποία παρέχει επίσης τη δυνατότητα για την υποστήριξη εφαρμογών που δεν θέλετε να γίνει που λείπουν μηνύματα. Όταν Bus υπηρεσία λαμβάνει μια αίτηση, βρίσκει στο επόμενο μήνυμα να καταναλωθεί, κλειδώνει για να αποτρέψετε άλλους καταναλωτές πραγματοποιεί λήψη του και, στη συνέχεια, επιστρέφει το στην εφαρμογή. Μετά την εφαρμογή ολοκληρώσει την επεξεργασία του μηνύματος (ή αποθηκεύει αξιόπιστα για μελλοντική επεξεργασία), ολοκληρώνει δεύτερου σταδίου της διαδικασίας παραλαβής καλώντας **Διαγραφή\_συνδρομή\_message()** μέθοδο και παροχή το μήνυμα που θα διαγραφεί ως παράμετρο. Το **Διαγραφή\_συνδρομή\_message()** μέθοδο θα επισημάνετε το μήνυμα ως που καταναλώνεται και να το καταργήσετε από τη συνδρομή.

Εάν το **: Σύνοψη\_κλείδωμα** παράμετρος έχει οριστεί σε **false**, ανάγνωσης και τη διαγραφή του μηνύματος γίνεται πιο απλός μοντέλο και λειτουργεί καλύτερα με την οποία μια εφαρμογή μπορεί να αποδεχτεί τις δεν επεξεργασία ενός μηνύματος σε περίπτωση αποτυχίας σενάρια. Για να κατανοήσετε αυτήν, εξετάστε το ενδεχόμενο να ένα σενάριο που ζητήματα της αίτησης λήψης του καταναλωτή και, στη συνέχεια, παρουσιάζει σφάλμα πριν από την επεξεργασία του. Επειδή η υπηρεσία Bus θα έχουν σήμανση του μηνύματος ως που καταναλώνεται, στη συνέχεια, όταν η εφαρμογή επανεκκίνηση του και αρχίζει κατανάλωση ξανά τα μηνύματα, το θα έχετε παραβλέψει το μήνυμα που καταναλώθηκε πριν από το σφάλμα.

Το παρακάτω παράδειγμα δείχνει πώς μπορούν να ληφθούν τα μηνύματα και επεξεργασία χρησιμοποιώντας **Λήψη\_συνδρομή\_message()**. Το παράδειγμα πρώτα λαμβάνει και διαγράφει ένα μήνυμα από τη συνδρομή "Χαμηλή-μηνύματα" με τη χρήση **: Σύνοψη\_κλείδωμα** οριστεί σε **false**, θα λαμβάνει ένα άλλο μήνυμα από το "Υψηλή μηνυμάτων" και, στη συνέχεια, διαγράφει το μήνυμα με χρήση **Διαγραφή\_συνδρομή\_message()**:

```
message = azure_service_bus_service.receive_subscription_message(
  "test-topic", "low-messages", { :peek_lock => false })
message = azure_service_bus_service.receive_subscription_message(
  "test-topic", "high-messages")
azure_service_bus_service.delete_subscription_message(message)
```

## <a name="handle-application-crashes-and-unreadable-messages"></a>Χειριστείτε σφάλματα εφαρμογών και αναγνώσιμα μηνύματα

Υπηρεσία Bus παρέχει λειτουργικότητα που θα σας βοηθήσουν να ανακτήσετε ομαλά από σφάλματα στο εφαρμογής ή δυσκολίες επεξεργασία ενός μηνύματος. Εάν μια εφαρμογή ακουστικό είναι δυνατή η επεξεργασία του μηνύματος για κάποιο λόγο και, στη συνέχεια, να καλέσετε αυτό το **ξεκλειδώσετε\_συνδρομή\_message()** μέθοδος στο αντικείμενο **Azure::ServiceBusService** . Αυτό προκαλεί Bus υπηρεσίας για να ξεκλειδώσετε το μήνυμα εντός της συνδρομής και να την κάνετε διαθέσιμη θα ληφθεί ξανά, με την ίδια εφαρμογή καταναλώνει ή από άλλη εφαρμογή καταναλώνει.

Υπάρχει επίσης ένα χρονικό όριο που σχετίζεται με ένα μήνυμα κλειδωμένο εντός της συνδρομής και, εάν η εφαρμογή δεν μπορεί να επεξεργαστεί το μήνυμα πριν από την κλείδωμα λήξει το χρονικό όριο (για παράδειγμα, εάν η εφαρμογή παρουσιάζει σφάλμα), στη συνέχεια, υπηρεσία Bus θα ξεκλειδώσετε αυτόματα το μήνυμα και να την κάνετε διαθέσιμη θα ληφθεί ξανά.

Σε περίπτωση που η εφαρμογή παρουσιάζει σφάλμα μετά την επεξεργασία του μηνύματος αλλά πριν την **Διαγραφή\_συνδρομή\_message()** μέθοδος καλείται και, στη συνέχεια, το μήνυμα είναι redelivered με την εφαρμογή κατά την επανεκκίνηση. Συχνά αυτό ονομάζεται **Τουλάχιστον μία φορά επεξεργασία**; Αυτό σημαίνει ότι θα υποβληθούν τουλάχιστον μία φορά σε κάθε μήνυμα αλλά σε ορισμένες περιπτώσεις ίσως redelivered το ίδιο μήνυμα. Εάν το σενάριο δεν θέλετε να γίνει διπλότυπων επεξεργασίας, στη συνέχεια, προγραμματιστές εφαρμογών πρέπει να Προσθήκη επιπλέον λογικής σε εφαρμογή τους χειρισμού διπλότυπων μήνυμα παράδοσης. Αυτή η λογική είναι συχνά πραγματοποιηθούν με τη χρήση του **μήνυμα\_αναγνωριστικό** ιδιοτήτων του μηνύματος, η οποία θα παραμένει σταθερή κατά μήκος προσπαθειών παράδοσης.

## <a name="delete-topics-and-subscriptions"></a>Διαγράψτε τα θέματα και συνδρομών

Θέματα και συνδρομές είναι μόνιμες και πρέπει να διαγραφούν ρητά είτε μέσω του [Azure πύλη][] ή μέσω προγραμματισμού. Το παρακάτω παράδειγμα δείχνει πώς μπορείτε να διαγράψετε το θέμα με το όνομα "δοκιμή-θέματος".

```
azure_service_bus_service.delete_topic("test-topic")
```

Διαγραφή ενός θέματος διαγράφει επίσης τις συνδρομές που έχουν καταχωρηθεί με το θέμα. Συνδρομές μπορεί επίσης να διαγραφεί ανεξάρτητα. Ο ακόλουθος κώδικας περιγράφει πώς μπορείτε να διαγράψετε την εγγραφή με το όνομα "ανώτερη-μηνύματα" από το θέμα "Έλεγχος-θέματος":

```
azure_service_bus_service.delete_subscription("test-topic", "high-messages")
```

## <a name="next-steps"></a>Επόμενα βήματα

Τώρα που μάθατε τα βασικά στοιχεία για τα θέματα Bus υπηρεσίας, ακολουθήστε αυτές τις συνδέσεις για να μάθετε περισσότερα.

- Ανατρέξτε στο θέμα [ουρές, θέματα, και συνδρομών](service-bus-queues-topics-subscriptions.md).
- Αναφορά API για [SqlFilter](http://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.sqlfilter.aspx).
- Επισκεφθείτε το αποθετήριο [SDK Azure για το κείμενο φωνητικής γραφής](https://github.com/Azure/azure-sdk-for-ruby) στο GitHub.
 
[Πύλη του Azure]: https://portal.azure.com
