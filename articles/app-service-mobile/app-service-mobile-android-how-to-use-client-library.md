<properties
    pageTitle="Πώς μπορείτε να χρησιμοποιήσετε τη βιβλιοθήκη προγράμματος-πελάτη του Android Mobile εφαρμογές"
    description="Πώς να χρησιμοποιείτε Android προγράμματος-πελάτη SDK για εφαρμογές του Mobile Azure."
    services="app-service\mobile"
    documentationCenter="android"
    authors="ysxu"
    manager="erikre"
    editor=""/>

<tags
    ms.service="app-service-mobile"
    ms.workload="mobile"
    ms.tgt_pltfrm="mobile-android"
    ms.devlang="java"
    ms.topic="article"
    ms.date="10/01/2016"
    ms.author="yuaxu"/>


# <a name="how-to-use-the-android-client-library-for-mobile-apps"></a>Πώς μπορείτε να χρησιμοποιήσετε τη βιβλιοθήκη Android προγράμματος-πελάτη για τις εφαρμογές του Mobile

[AZURE.INCLUDE [app-service-mobile-selector-client-library](../../includes/app-service-mobile-selector-client-library.md)]

Αυτός ο οδηγός σας δείχνει πώς μπορείτε να χρησιμοποιήσετε το Android πρόγραμμα-πελάτη SDK για τις εφαρμογές του Mobile για την υλοποίηση συνηθισμένα σενάρια, όπως:

- Υποβολή ερωτήματος για δεδομένα (εισαγωγή, ενημέρωση και διαγραφή).
- Έλεγχος ταυτότητας.
- Χειρισμού σφαλμάτων.
- Προσαρμογή του προγράμματος-πελάτη. 

Κάνει επίσης βάθος κατάρρευση σε κοινά κώδικα προγράμματος-πελάτη που χρησιμοποιείται σε εφαρμογές πιο κινητές συσκευές.

Αυτός ο οδηγός εστιάζει σε Android SDK για την πλευρά του προγράμματος-πελάτη.  Για να μάθετε περισσότερα σχετικά με την πλευρά του διακομιστή SDK για τις εφαρμογές του Mobile, ανατρέξτε στο θέμα [εργασία με το .NET παρασκηνίου SDK] [ 10] ή [πώς μπορείτε να χρησιμοποιήσετε το παρασκηνίου Node.js SDK][11].

## <a name="reference-documentation"></a>Τεκμηρίωση αναφοράς

Μπορείτε να βρείτε την [αναφορά Javadocs API] [ 12] για τη βιβλιοθήκη Android προγράμματος-πελάτη στην GitHub.

## <a name="supported-platforms"></a>Υποστηριζόμενες πλατφόρμες

Android SDK εφαρμογές του Mobile Azure υποστηρίζει επίπεδα API 19 έως 24 (KitKat έως Nougat).  

Ο έλεγχος ταυτότητας "διακομιστή ροής" χρησιμοποιεί μια προβολής Web για το περιβάλλον εργασίας Χρήστη που παρουσιάστηκε. Εάν η συσκευή δεν είναι σε θέση να εμφανίσει ένα περιβάλλον εργασίας Χρήστη προβολής Web, στη συνέχεια, άλλες μεθόδους ελέγχου ταυτότητας που χρειάζονται για την βρίσκεται εκτός του αντικειμένου του προϊόντος.  Αυτό το SDK δεν είναι κατάλληλη για παρακολούθησης ή τύπου ομοίως περιορισμένα συσκευές.

## <a name="setup-and-prerequisites"></a>Το πρόγραμμα εγκατάστασης και τις προϋποθέσεις

Ολοκληρώστε το πρόγραμμα εκμάθησης [γρήγορη έναρξη εφαρμογές του Mobile](app-service-mobile-android-get-started.md) .  Αυτή η εργασία εξασφαλίζει ότι πληρούνται όλες προαπαιτούμενα για την ανάπτυξη εφαρμογών Mobile Azure.  Η γρήγορη έναρξη σάς βοηθά επίσης να ρυθμίσετε το λογαριασμό σας και να δημιουργήσετε την πρώτη εφαρμογή Mobile παρασκηνίου.

Εάν αποφασίσετε να μην ολοκληρώστε την εκμάθηση γρήγορη έναρξη, ολοκληρώστε τις ακόλουθες εργασίες:

- [Δημιουργήστε μια εφαρμογή Mobile παρασκηνίου] [ 13] για χρήση με την εφαρμογή σας Android.
- Στο Android Studio, [ενημερώστε τα αρχεία Δόμηση Gradle](#gradle-build).
- [Ενεργοποιήστε τα δικαιώματα στο internet](#enable-internet).

###<a name="gradle-build"></a>Ενημέρωση του αρχείου Δόμηση Gradle

Αλλαγή και τα δύο αρχεία **build.gradle** :

1. Προσθέστε αυτόν τον κωδικό στο αρχείο *έργου* επιπέδου **build.gradle** μέσα στην ετικέτα *buildscript* :

        buildscript {
            repositories {
                jcenter()
            }
        }

2. Προσθέστε αυτόν τον κωδικό στο αρχείο επιπέδου **build.gradle** *εφαρμογής λειτουργικής μονάδας* μέσα στην ετικέτα *εξαρτήσεις* :

        compile 'com.microsoft.azure:azure-mobile-android:3.1.0'

    Προς το παρόν την πιο πρόσφατη έκδοση είναι 3.1.0. Τις υποστηριζόμενες εκδόσεις παρατίθενται [εδώ][14].

###<a name="enable-internet"></a>Ενεργοποιήστε τα δικαιώματα στο internet

Για να αποκτήσετε πρόσβαση στο Azure, την εφαρμογή σας πρέπει να έχετε το δικαίωμα στο INTERNET με δυνατότητα. Εάν δεν έχει ήδη ενεργοποιηθεί, προσθέστε την ακόλουθη γραμμή κώδικα στο αρχείο **AndroidManifest.xml** :

    <uses-permission android:name="android.permission.INTERNET" />

## <a name="the-basics-deep-dive"></a>Τα βασικά στοιχεία βαθύ κατάρρευση

Αυτή η ενότητα περιγράφει ορισμένες από τον κώδικα στην εφαρμογή γρήγορη έναρξη που αναφέρεται στη χρήση εφαρμογών του Azure Mobile.  

###<a name="data-object"></a>Ορισμός κατηγοριών δεδομένων προγράμματος-πελάτη

Για να αποκτήσετε πρόσβαση σε δεδομένα από τους πίνακες του SQL Azure, Ορισμός κατηγοριών δεδομένων προγράμματος-πελάτη που αντιστοιχούν με τους πίνακες στο υπόβαθρο εφαρμογή Mobile. Παραδείγματα σε αυτό το θέμα λαμβάνεται ως δεδομένο πίνακα με την ονομασία **ToDoItem**, που περιλαμβάνει τις ακόλουθες στήλες:

- αναγνωριστικό
- κείμενο
- Ολοκλήρωση

Το αντίστοιχο πληκτρολογήσατε αντικείμενο πλευρά του προγράμματος-πελάτη:

    public class ToDoItem {
        private String id;
        private String text;
        private Boolean complete;
    }

Ο κώδικας βρίσκεται σε ένα αρχείο που ονομάζεται **ToDoItem.java**.

Εάν ο πίνακας του SQL Azure περιέχει περισσότερες στήλες, προσθέστε τα αντίστοιχα πεδία σε αυτήν την κλάση.  Για παράδειγμα, εάν το DTO μιας στήλης προτεραιότητα integer είχατε (αντικείμενο μεταφοράς δεδομένων) και, στη συνέχεια, μπορείτε να προσθέσετε αυτό το πεδίο, μαζί με το αποτέλεσμα την και setter μεθόδους:

    private Integer priority;

    /**
    * Returns the item priority
    */
    public Integer getPriority() {
        return mPriority;
    }
    
    /**
    * Sets the item priority
    *
    * @param priority
    *            priority to set
    */
    public final void setPriority(Integer priority) {
        mPriority = priority;
    }

Για να μάθετε πώς μπορείτε να δημιουργήσετε επιπλέον πίνακες στο τις εφαρμογές του Mobile παρασκηνίου, ανατρέξτε στο θέμα [πώς μπορείτε να: Ορισμός ενός πίνακα ελεγκτή] [ 15] (.NET παρασκηνίου) ή [Ορισμός πίνακες χρησιμοποιώντας ένα σχήμα δυναμικής] [ 16] (Node.js παρασκηνίου). Για έναν υπολογιστή στο παρασκήνιο Node.js, μπορείτε επίσης να χρησιμοποιήσετε τη ρύθμιση **εύκολο πίνακες** στην [πύλη του Azure].

###<a name="create-client"></a>Πώς μπορείτε να: δημιουργία του περιβάλλοντος του προγράμματος-πελάτη

Αυτός ο κώδικας δημιουργεί το αντικείμενο **MobileServiceClient** που χρησιμοποιείται για να αποκτήσετε πρόσβαση σας παρασκηνίου εφαρμογή Mobile. Ο κώδικας με οδηγεί το `onCreate` μέθοδο κλάσης **δραστηριότητας** που καθορίζεται στο *AndroidManifest.xml* ως **ΚΎΡΙΑ** ενέργεια και κατηγορία **ΕΚΚΊΝΗΣΗ** . Στον κώδικα γρήγορη έναρξη, Μετάβαση στο αρχείο **ToDoActivity.java** .

        MobileServiceClient mClient = new MobileServiceClient(
            "MobileAppUrl", // Replace with the Site URL
            this)

Σε αυτόν τον κωδικό, αντικαταστήστε `MobileAppUrl` με τη διεύθυνση URL από την εφαρμογή Mobile παρασκηνίου, όπου μπορείτε να βρείτε στην [πύλη του Azure] με το blade για την εφαρμογή Mobile παρασκηνίου. Για αυτήν τη γραμμή του κώδικα για να μεταγλωττίσετε, πρέπει επίσης να προσθέσετε την ακόλουθη πρόταση **εισαγωγής** :

    import com.microsoft.windowsazure.mobileservices.*;

###<a name="instantiating"></a>Πώς μπορείτε να: Δημιουργήστε μια αναφορά πίνακα

Ο ευκολότερος τρόπος για να ερωτήματος ή να τροποποιήσετε δεδομένα σε υπολογιστή στο παρασκήνιο είναι χρησιμοποιώντας το που *πληκτρολογήσατε μοντέλο προγραμματισμού*, επειδή η Java είναι μια γλώσσα ισχυρό τύπο. Αυτό το μοντέλο παρέχει απρόσκοπτη JSON σειριοποίησης και αποσειριοποίησης χρησιμοποιώντας το [gson] [ 3] βιβλιοθήκη κατά την αποστολή δεδομένων μεταξύ του προγράμματος-πελάτη αντικείμενα και πίνακες στο υπόβαθρο Azure SQL.

Για να αποκτήσετε πρόσβαση σε έναν πίνακα, δημιουργήστε πρώτα ένα [MobileServiceTable] [ 8] αντικείμενο καλώντας την **getTable** μέθοδο στην το [MobileServiceClient][9].  Αυτή η μέθοδος έχει δύο τύποι:

    public class MobileServiceClient {
        public <E> MobileServiceTable<E> getTable(Class<E> clazz);
        public <E> MobileServiceTable<E> getTable(String name, Class<E> clazz);
    }

Στο ακόλουθο κώδικα, **mClient** είναι μια αναφορά στο αντικείμενό σας MobileServiceClient.  Η πρώτη υπερφόρτωσης χρησιμοποιείται όπου το όνομα κλάσης και το όνομα του πίνακα είναι το ίδιο και αυτήν που χρησιμοποιείται στο τη γρήγορη έναρξη:

    MobileServiceTable<ToDoItem> mToDoTable = mClient.getTable(ToDoItem.class);

Η δεύτερη υπερφόρτωσης χρησιμοποιείται όταν το όνομα του πίνακα είναι διαφορετικό από το όνομα της κλάσης: η πρώτη παράμετρος είναι το όνομα του πίνακα.

    MobileServiceTable<ToDoItem> mToDoTable = mClient.getTable("ToDoItemBackup", ToDoItem.class);

###<a name="binding"></a>Πώς μπορείτε να: η σύνδεση δεδομένων με το περιβάλλον εργασίας χρήστη

Σύνδεση δεδομένων περιλαμβάνει τρία στοιχεία:

- Το αρχείο προέλευσης δεδομένων
- Η οθόνη διάταξης
- Τον προσαρμογέα που συνδέει δύο μαζί.

Στο δείγμα μας κώδικα, θα σας επιστρέφουν τα δεδομένα από τον πίνακα Mobile Apps SQL Azure **ToDoItem** σε έναν πίνακα. Αυτή η δραστηριότητα είναι ένα κοινό μοτίβο για εφαρμογές δεδομένων.  Ερωτήματα βάσης δεδομένων συχνά επιστρέφουν μια συλλογή των γραμμών που λαμβάνει το πρόγραμμα-πελάτη σε μια λίστα ή έναν πίνακα. Σε αυτό το δείγμα, ο πίνακας είναι το αρχείο προέλευσης δεδομένων.

Ο κωδικός καθορίζει μια διάταξη οθόνη που ορίζει την προβολή των δεδομένων που εμφανίζεται στη συσκευή.  Τα δύο είναι συνδεδεμένα μαζί με έναν προσαρμογέα, η οποία είναι μια επέκταση σε αυτόν τον κωδικό από το **ArrayAdapter&lt;ToDoItem&gt; ** τάξης.

#### <a name="layout"></a>Πώς μπορείτε να: Ορισμός της διάταξης

Η διάταξη ορίζεται από πολλά τμήματα του κώδικα XML. Δίνεται μια υπάρχουσα διάταξη, ο ακόλουθος κώδικας αντιπροσωπεύει την **Προβολή λίστας** θέλουμε να συμπληρώσετε με ένα διακομιστή δεδομένων.

    <ListView
        android:id="@+id/listViewToDo"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        tools:listitem="@layout/row_list_to_do" >
    </ListView>

Στο προηγούμενο κώδικα, το χαρακτηριστικό *listitem* Καθορίζει το αναγνωριστικό της διάταξης μιας μεμονωμένης γραμμής από τη λίστα. Αυτός ο κωδικός καθορίζει ένα πλαίσιο ελέγχου και το κείμενο και λαμβάνει δημιουργηθεί μόνο μία φορά για κάθε στοιχείο της λίστας. Αυτή η διάταξη δεν εμφανίζει το πεδίο " **αναγνωριστικό** " και μια πιο σύνθετη διάταξη θα ορίσετε πρόσθετα πεδία, στην οθόνη. Αυτός ο κώδικας είναι στο αρχείο **row_list_to_do.xml** .

    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal">
        <CheckBox
            android:id="@+id/checkToDoItem"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/checkbox_text" />
    </LinearLayout>


#### <a name="adapter"></a>Πώς μπορείτε να: Ορισμός του προσαρμογέα

Επειδή το αρχείο προέλευσης δεδομένων της προβολής μας είναι ένας πίνακας με **ToDoItem**, θα σας υποκατηγορίας μας προσαρμογέα από μια **ArrayAdapter&lt;ToDoItem&gt; ** τάξης. Αυτό υποκατηγορίας δημιουργεί μια προβολή για κάθε **ToDoItem** χρησιμοποιώντας τη διάταξη **row_list_to_do** .

Μας κώδικα ορισμού την ακόλουθη κλάση που είναι μια επέκταση του το **ArrayAdapter&lt;E&gt; ** κλάσης:

    public class ToDoItemAdapter extends ArrayAdapter<ToDoItem> {

Παράκαμψη της μεθόδου **getView** προσαρμογέων. Για παράδειγμα:

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;

        final ToDoItem currentItem = getItem(position);

        if (row == null) {
            LayoutInflater inflater = ((Activity) mContext).getLayoutInflater();
            row = inflater.inflate(R.layout.row_list_to_do, parent, false);
        }

        row.setTag(currentItem);

        final CheckBox checkBox = (CheckBox) row.findViewById(R.id.checkToDoItem);
        checkBox.setText(currentItem.getText());
        checkBox.setChecked(false);
        checkBox.setEnabled(true);

        checkBox.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if (checkBox.isChecked()) {
                    checkBox.setEnabled(false);
                    if (mContext instanceof ToDoActivity) {
                        ToDoActivity activity = (ToDoActivity) mContext;
                        activity.checkItem(currentItem);
                    }
                }
            }
        });


        return row;
    }

Δημιουργούμε μια παρουσία αυτής της κλάσης μας δραστηριότητα ως εξής:

    ToDoItemAdapter mAdapter;
    mAdapter = new ToDoItemAdapter(this, R.layout.row_list_to_do);

Η δεύτερη παράμετρος στην κατασκευή ToDoItemAdapter είναι μια αναφορά στη διάταξη. Τώρα να ξεκινήσει η **Προβολή λίστας** και να αντιστοιχίσετε τον προσαρμογέα για την **Προβολή λίστας**.

    ListView listViewToDo = (ListView) findViewById(R.id.listViewToDo);
    listViewToDo.setAdapter(mAdapter);

### <a name="api"></a>Η δομή API

Λειτουργίες πίνακα εφαρμογές του Mobile και προσαρμοσμένες κλήσεις API είναι ασύγχρονης. Χρησιμοποιήστε το [μέλλον] και [AsyncTask] αντικειμένων για τις ασύγχρονης μεθόδους που αφορούν τα ερωτήματα, εισάγει, ενημερώσεις και διαγραφές. Χρήση futures διευκολύνει για την εκτέλεση πολλαπλών λειτουργιών σε ένα νήμα φόντο χωρίς να χρειάζεται να ασχοληθείτε με πολλαπλές ένθετη επιστροφές κλήσης.

Εξετάστε το αρχείο **ToDoActivity.java** του Android γρήγορη έναρξη έργου από την [πύλη του Azure] για ένα παράδειγμα.

#### <a name="use-adapter"></a>Πώς μπορείτε να: χρήση του προσαρμογέα

Τώρα είστε έτοιμοι να χρησιμοποιήσετε τη σύνδεση δεδομένων. Ο ακόλουθος κώδικας δείχνει πώς μπορείτε να λάβετε τα στοιχεία του πίνακα και συμπληρώνει του τοπικού προσαρμογέα με τα είδη επιστροφής.

    public void showAll(View view) {
        AsyncTask<Void, Void, Void> task = new AsyncTask<Void, Void, Void>(){
            @Override
            protected Void doInBackground(Void... params) {
                try {
                    final List<ToDoItem> results = mToDoTable.execute().get();
                    runOnUiThread(new Runnable() {

                        @Override
                        public void run() {
                            mAdapter.clear();
                            for (ToDoItem item : results) {
                                mAdapter.add(item);
                            }
                        }
                    });
                } catch (Exception exception) {
                    createAndShowDialog(exception, "Error");
                }
                return null;
            }
        };
        runAsyncTask(task);
    }

Καλέστε τον προσαρμογέα οποιαδήποτε στιγμή μπορείτε να τροποποιήσετε τον πίνακα **ToDoItem** . Επειδή το τροποποιήσεις γίνονται σε βάση ανά εγγραφή, μπορείτε να διαχειριστείτε μία γραμμή αντί για μια συλλογή. Κατά την εισαγωγή ενός στοιχείου, η κλήση της μεθόδου **Προσθήκη** στον προσαρμογέα; κατά τη διαγραφή, καλέστε τη μέθοδο **remove** .

##<a name="querying"></a>Πώς μπορείτε να: ερωτημάτων δεδομένων από την εφαρμογή Mobile παρασκηνίου

Αυτή η ενότητα περιγράφει πώς μπορείτε να δημοσιεύετε ερωτήματα για την εφαρμογή Mobile στον υπολογιστή στο παρασκήνιο, που περιλαμβάνει τις ακόλουθες εργασίες:

- [Επιστροφή όλων των στοιχείων]
- [Φιλτράρετε δεδομένα που επιστρέφονται]
- [Ταξινόμηση επέστρεψε δεδομένα]
- [Επιστροφή δεδομένων σε σελίδες]
- [Επιλέξτε συγκεκριμένες στήλες]
- [Μέθοδοι CONCATENATE ερωτήματος](#chaining)

### <a name="showAll"></a>Πώς μπορείτε να: επιστροφή όλων των στοιχείων από έναν πίνακα

Το παρακάτω ερώτημα επιστρέφει όλα τα στοιχεία στον πίνακα **ToDoItem** .

    List<ToDoItem> results = mToDoTable.execute().get();

Η μεταβλητή *αποτελέσματα* επιστρέφει το σύνολο από το ερώτημα ως λίστα αποτελεσμάτων.

### <a name="filtering"></a>Πώς μπορείτε να: φίλτρο επέστρεψε δεδομένα

Η παρακάτω εκτέλεση του ερωτήματος επιστρέφει όλα τα στοιχεία από τον πίνακα **ToDoItem** όπου **ολοκλήρωσης** ισούται με την **τιμή false**.

    List<ToDoItem> result = mToDoTable.where()
                                .field("complete").eq(false)
                                .execute().get();

**mToDoTable** είναι η αναφορά στον πίνακα υπηρεσία κινητών τηλεφώνων που δημιουργήσαμε προηγουμένως.

Ορίστε ένα φίλτρο που χρησιμοποιεί την κλήση μεθόδου **όπου** στην αναφορά του πίνακα. Η μέθοδος **όπου** ακολουθείται από μια μέθοδο **πεδίο** ακολουθούμενο από μια μέθοδο που καθορίζει το λογικό κατηγόρημα. Πιθανές μεθόδους κατηγορήματος περιλαμβάνουν **eq** (ίσον), **** (δεν ισούται), **gt** (μεγαλύτερο από), **σελίδας** (μεγαλύτερο από ή ίσο με), **lt** (μικρότερο του), **le** (μικρότερο ή ίσο με). Αυτές οι μέθοδοι σάς επιτρέπουν να συγκρίνετε αριθμός και συμβολοσειρά πεδίων για συγκεκριμένες τιμές.

Μπορείτε να φιλτράρετε ημερομηνίες. Τις παρακάτω μεθόδους σάς επιτρέπουν να συγκρίνετε το πεδίο ολόκληρη την ημερομηνία ή τα τμήματα της ημερομηνίας: **έτος**, **Μήνας**, **ημέρα**, **ώρα**, **λεπτό**και **δεύτερο**. Το παρακάτω παράδειγμα προσθέτει ένα φίλτρο για τα στοιχεία των οποίων η *ημερομηνία παράδοσης* είναι ίσο με 2013.

    mToDoTable.where().year("due").eq(2013).execute().get();

Τις παρακάτω μεθόδους υποστηρίζει σύνθετα φίλτρα στα πεδία συμβολοσειρά: **startsWith**, **endsWith**, **concat**, **δευτερεύουσα συμβολοσειρά**, **indexOf**, **Αντικατάσταση**, **toLower**, **toUpper**, **Αποκοπή**και **διάρκεια**. Το παρακάτω παράδειγμα φίλτρα για γραμμές πίνακα όπου στη στήλη *κειμένου* αρχίζει με "PRI0."

    mToDoTable.where().startsWith("text", "PRI0").execute().get();

Τις παρακάτω μεθόδους τελεστή υποστηρίζονται σε πεδία αριθμών: **Προσθήκη**, **sub**, **mul**, **div**, **mod**, **floor**, **ceiling**και **Στρογγυλοποίηση**. Το παρακάτω παράδειγμα φιλτράρει για γραμμές πίνακα όταν η **διάρκεια** είναι άρτιος αριθμός.

    mToDoTable.where().field("duration").mod(2).eq(0).execute().get();

Μπορείτε να συνδυάσετε κατηγορήματα με αυτές τις μεθόδους λογική: **και**, **ή** και **όχι**. Το παρακάτω παράδειγμα συνδυάζει δύο από τα προηγούμενα παραδείγματα.

    mToDoTable.where().year("due").eq(2013).and().startsWith("text", "PRI0")
                .execute().get();

Ομαδοποίηση και ένθεση λογικούς τελεστές:

    mToDoTable.where()
                .year("due").eq(2013)
                    .and
                (startsWith("text", "PRI0").or().field("duration").gt(10))
                .execute().get();

Για πιο λεπτομερείς πληροφορίες και παραδείγματα για το φιλτράρισμα, ανατρέξτε στο θέμα [Εξερεύνηση τον πλούτο των το μοντέλο Android προγράμματος-πελάτη ερωτήματος](http://hashtagfail.com/post/46493261719/mobile-services-android-querying).

### <a name="sorting"></a>Πώς μπορείτε να: ταξινόμηση επέστρεψε δεδομένα

Ο ακόλουθος κώδικας επιστρέφει όλα τα στοιχεία από έναν πίνακα **ToDoItems** με αύξουσα ταξινόμηση κατά πεδίο *κειμένου* . *mToDoTable* είναι η αναφορά στον πίνακα παρασκηνίου που δημιουργήσατε προηγουμένως:

    mToDoTable.orderBy("text", QueryOrder.Ascending).execute().get();

Η πρώτη παράμετρος της μεθόδου **orderBy** είναι μια συμβολοσειρά που ισούται με το όνομα του πεδίου στο οποίο θέλετε να ταξινομήσετε. Η δεύτερη παράμετρος χρησιμοποιεί την απαρίθμηση **QueryOrder** για να καθορίσετε εάν θέλετε να ταξινομήσετε κατά αύξουσα ή φθίνουσα σειρά.  Εάν φιλτράρετε χρησιμοποιώντας τη μέθοδο ***όπου*** , πρέπει να είναι δυνατή η μεθόδου ***όπου*** πριν από τη μέθοδο ***orderBy*** .

### <a name="paging"></a>Πώς μπορείτε να: επιστροφή δεδομένων σε σελίδες

Το πρώτο παράδειγμα δείχνει πώς μπορείτε να επιλέξετε τα πρώτα πέντε στοιχεία από έναν πίνακα. Το ερώτημα επιστρέφει τα στοιχεία από ένα πίνακα **ToDoItems**. **mToDoTable** είναι η αναφορά στον πίνακα παρασκηνίου που δημιουργήσατε προηγουμένως:

    List<ToDoItem> result = mToDoTable.top(5).execute().get();


Ακολουθεί ένα ερώτημα που παρακάμπτει τα πρώτα πέντε στοιχεία και, στη συνέχεια, επιστρέφει τις επόμενες πέντε:

    mToDoTable.skip(5).top(5).execute().get();

### <a name="selecting"></a>Πώς μπορείτε να: Επιλέξτε συγκεκριμένες στήλες

Ο ακόλουθος κώδικας παρουσιάζει πώς μπορείτε να επαναφέρετε όλα τα στοιχεία από ένα πίνακα **ToDoItems**, αλλά εμφανίζει μόνο τα πεδία **ολοκλήρωσης** και **κείμενο** . **mToDoTable** είναι η αναφορά στον πίνακα παρασκηνίου που δημιουργήσαμε προηγουμένως.

    List<ToDoItemNarrow> result = mToDoTable.select("complete", "text").execute().get();

Οι παράμετροι της επιλογής συνάρτησης είναι τα ονόματα συμβολοσειρά των στηλών του πίνακα που θέλετε να επαναφέρετε.

Η μέθοδος **Επιλέξτε** πρέπει να ακολουθήσετε μεθόδους όπως **όπου** και **orderBy**. Αυτό μπορεί να ακολουθείται από μεθόδους σελιδοποίησης όπως **αρχή**.

### <a name="chaining"></a>Πώς μπορείτε να: Concatenate μεθόδους ερωτήματος

Μπορεί να τοποθετηθεί το διαδοχικά τις μεθόδους που χρησιμοποιούνται κατά την υποβολή ερωτημάτων πίνακες παρασκηνίου. Αλυσιδωτή μεθόδους ερωτήματος σάς επιτρέπει να επιλέξετε συγκεκριμένες στήλες φιλτραρισμένες γραμμές που ταξινομούνται και σελίδων. Μπορείτε να δημιουργήσετε σύνθετα φίλτρα λογική.
Κάθε μέθοδο ερώτημα επιστρέφει ένα αντικείμενο ερωτήματος. Για να τερματίσετε τη σειρά των μεθόδων και στην πραγματικότητα εκτέλεση του ερωτήματος, καλέστε την **Εκτέλεση** μεθόδου. Για παράδειγμα:

    mToDoTable.where()
        .year("due").eq(2013)
        .and().startsWith("text", "PRI0")
        .or().field("duration").gt(10)
        .orderBy(duration, QueryOrder.Ascending)
        .select("id", "complete", "text", "duration")
        .top(20)
        .execute().get();

Οι μέθοδοι συνδεδεμένες ερωτήματος πρέπει να παραγγελθούν ως εξής:

1. Φιλτράρισμα μεθόδους (**όπου**).
2. Ταξινόμηση μεθόδους (**orderBy**).
3. Μέθοδοι επιλογής (**Επιλέξτε**).
4. σελιδοποίησης μεθόδους (**παραλείψετε** και **επάνω**).

##<a name="inserting"></a>Πώς μπορείτε να: εισαγωγή δεδομένων σε υπολογιστή στο παρασκήνιο

Δημιουργία μιας παρουσίας της κλάσης *ToDoItem* και ορίστε τις ιδιότητές του.

    ToDoItem item = new ToDoItem();
    item.text = "Test Program";
    item.complete = false;

Στη συνέχεια, χρησιμοποιήστε **insert()** για να εισαγάγετε ένα αντικείμενο:

    ToDoItem entity = mToDoTable.insert(item).get();

Τα δεδομένα που έχουν εισαχθεί σε πίνακα παρασκηνίου, τις συμφωνίες επιστρέφεται οντότητα περιλαμβάνεται το Αναγνωριστικό και οποιεσδήποτε άλλες τιμές ρύθμιση στον υπολογιστή στο παρασκήνιο.

Εφαρμογές του Mobile πίνακες απαιτούν **αναγνωριστικό**που ονομάζεται στήλη πρωτεύοντος κλειδιού. Από προεπιλογή, η στήλη αυτή είναι μια συμβολοσειρά. Η προεπιλεγμένη τιμή της στήλης Αναγνωριστικό είναι ένα GUID.  Μπορείτε να παράσχετε άλλες μοναδικές τιμές, όπως διευθύνσεις ηλεκτρονικού ταχυδρομείου ή τα ονόματα των χρηστών. Όταν μια τιμή συμβολοσειρά Αναγνωριστικού δεν παρέχεται για μια εγγραφή που έχει εισαχθεί, υπόβαθρο δημιουργεί ένα νέο GUID.

Τιμές Αναγνωριστικού συμβολοσειρά έχουν τα ακόλουθα πλεονεκτήματα:

+ Αναγνωριστικά μπορεί να δημιουργηθεί χωρίς να κάνετε ένα χρόνο αποστολής και επιστροφής στη βάση δεδομένων.
+ Εγγραφές που είναι πιο εύκολο να συγχωνεύσετε από διαφορετικούς πίνακες ή σε βάσεις δεδομένων.
+ Τιμές Αναγνωριστικού καλύτερη ενοποίηση με λογική μιας εφαρμογής.

Τιμές Αναγνωριστικού συμβολοσειράς είναι **ΕΝΕΡΓΕΙΕΣ** για την υποστήριξη συγχρονισμού χωρίς σύνδεση.

##<a name="updating"></a>Πώς μπορείτε να: ενημέρωση δεδομένων σε μια εφαρμογή για κινητές συσκευές

Για να ενημερώσετε δεδομένα σε έναν πίνακα, μεταβιβάζουν νέου αντικειμένου για τη μέθοδο του **στοιχείου update()** .

    mToDoTable.update(item).get();

Σε αυτό το παράδειγμα, το *στοιχείο* είναι μια αναφορά σε μια γραμμή στον πίνακα *ToDoItem* , η οποία είχε ορισμένες αλλαγές που έγιναν σε αυτό.
Η γραμμή με το ίδιο **αναγνωριστικό** είναι ενημερωθεί.

##<a name="deleting"></a>Πώς μπορείτε να: διαγραφή δεδομένων σε μια εφαρμογή για κινητές συσκευές

Ο ακόλουθος κώδικας δείχνει πώς μπορείτε να διαγράψετε δεδομένα από έναν πίνακα, καθορίζοντας το αντικείμενο δεδομένων.

    mToDoTable.delete(item);

Μπορείτε επίσης να διαγράψετε ένα στοιχείο, καθορίζοντας το πεδίο **αναγνωριστικού** από τη γραμμή για να διαγράψετε.

    String myRowId = "2FA404AB-E458-44CD-BC1B-3BC847EF0902";
    mToDoTable.delete(myRowId);

##<a name="lookup"></a>Πώς μπορείτε να: αναζήτηση ενός συγκεκριμένου στοιχείου

Αναζήτηση στοιχείου με ένα συγκεκριμένο **αναγνωριστικό** πεδίο με τη μέθοδο **lookUp()** :

    ToDoItem result = mToDoTable
                        .lookUp("0380BAFB-BCFF-443C-B7D5-30199F730335")
                        .get();

##<a name="untyped"></a>Πώς μπορείτε να: εργασία με ένα δεδομένα

Το ένα μοντέλο προγραμματισμού παρέχει ακριβή έλεγχο JSON σειριοποίησης.  Υπάρχουν ορισμένα κοινά σενάρια όπου μπορεί να θέλετε να χρησιμοποιήσετε ένα ένα μοντέλο προγραμματισμού. Για παράδειγμα, εάν ο πίνακας υπολογιστή στο παρασκήνιο σας περιέχει πολλές στήλες και μόνο πρέπει να αναφέρονται σε ένα υποσύνολο των στηλών.  Το μοντέλο πληκτρολογήσατε απαιτεί να ορίσετε όλες τις εφαρμογές για κινητές συσκευές στήλες του πίνακα στην τάξη σας δεδομένα.  

Οι περισσότερες τις κλήσεις API για την πρόσβαση σε δεδομένα είναι παρόμοια με τις πληκτρολογημένες προγραμματισμού κλήσεις. Η κύρια διαφορά είναι ότι σε ένα μοντέλο καλείτε μέθοδοι στο αντικείμενο **MobileServiceJsonTable** , αντί για το αντικείμενο **MobileServiceTable** .

### <a name="json_instance"></a>Πώς μπορείτε να: Δημιουργήστε μια παρουσία ενός ένα πίνακα

Παρόμοιο με το μοντέλο πληκτρολογήσατε, ξεκινάτε με γρήγορα μια αναφορά πίνακα, αλλά σε αυτήν την περίπτωση είναι ένα αντικείμενο **MobileServicesJsonTable** . Αποκτήστε την αναφορά, καλώντας την **getTable** μέθοδος σε μια παρουσία του προγράμματος-πελάτη:

    private MobileServiceJsonTable mJsonToDoTable;
    //...
    mJsonToDoTable = mClient.getTable("ToDoItem");

Αφού δημιουργήσετε μια παρουσία του **MobileServiceJsonTable**, που έχει σχεδόν το ίδιο API διαθέσιμη ως με το μοντέλο προγραμματισμού που πληκτρολογήσατε. Σε ορισμένες περιπτώσεις, τις μεθόδους λαμβάνουν μια παράμετρο ένα αντί για μια παράμετρο που πληκτρολογήσατε.

### <a name="json_insert"></a>Πώς μπορείτε να: εισαγωγή σε ένα πίνακα του

Ο ακόλουθος κώδικας δείχνει πώς μπορείτε να κάνετε μια εισαγωγή. Το πρώτο βήμα είναι να δημιουργήσετε ένα [JsonObject][1], που είναι μέρος του [gson] [ 3] βιβλιοθήκη.

    JsonObject jsonItem = new JsonObject();
    jsonItem.addProperty("text", "Wake up");
    jsonItem.addProperty("complete", false);

Στη συνέχεια, χρησιμοποιήστε **insert()** για να εισαγάγετε το ένα αντικείμενο στον πίνακα.

    mJsonToDoTable.insert(jsonItem).get();

Εάν χρειάζεστε για να λάβετε το Αναγνωριστικό του αντικειμένου που έχει εισαχθεί, χρησιμοποιήστε τη μέθοδο **getAsJsonPrimitive()** .

    jsonItem.getAsJsonPrimitive("id").getAsInt());

### <a name="json_delete"></a>Πώς μπορείτε να: διαγραφή από ένα πίνακα

Ο ακόλουθος κώδικας δείχνει πώς μπορείτε να διαγράψετε μια παρουσία, σε αυτήν την περίπτωση, την ίδια παρουσία της **JsonObject** που δημιουργήθηκε στο παράδειγμα εκ των προτέρων *Εισαγωγή* . Ο κώδικας είναι ίδια με την περίπτωση που πληκτρολογήσατε, αλλά η μέθοδος έχει διαφορετική υπογραφή επειδή αναφέρεται σε ένα **JsonObject**.

         mToDoTable.delete(jsonItem);

Μπορείτε επίσης να διαγράψετε μια παρουσία απευθείας με τη χρήση του Αναγνωριστικού:

         mToDoTable.delete(ID);

### <a name="json_get"></a>Πώς μπορείτε να: επιστρέψει όλες τις γραμμές από ένα πίνακα

Ο ακόλουθος κώδικας δείχνει πώς μπορείτε να ανακτήσετε έναν ολόκληρο πίνακα. Επειδή χρησιμοποιείτε έναν πίνακα JSON, να ανακτήσετε επιλεκτικής μόνο ορισμένες από τις στήλες του πίνακα.

    public void showAllUntyped(View view) {
        new AsyncTask<Void, Void, Void>() {
            @Override
            protected Void doInBackground(Void... params) {
                try {
                    final JsonElement result = mJsonToDoTable.execute().get();
                    final JsonArray results = result.getAsJsonArray();
                    runOnUiThread(new Runnable() {

                        @Override
                        public void run() {
                            mAdapter.clear();
                            for (JsonElement item : results) {
                                String ID = item.getAsJsonObject().getAsJsonPrimitive("id").getAsString();
                                String mText = item.getAsJsonObject().getAsJsonPrimitive("text").getAsString();
                                Boolean mComplete = item.getAsJsonObject().getAsJsonPrimitive("complete").getAsBoolean();
                                ToDoItem mToDoItem = new ToDoItem();
                                mToDoItem.setId(ID);
                                mToDoItem.setText(mText);
                                mToDoItem.setComplete(mComplete);
                                mAdapter.add(mToDoItem);
                            }
                        }
                    });
                } catch (Exception exception) {
                    createAndShowDialog(exception, "Error");
                }
                return null;
            }
        }.execute();
    }

Το ίδιο σύνολο φιλτράρισμα, φιλτράρισμα και σελιδοποίηση μεθόδους που είναι διαθέσιμες για το πληκτρολογημένο μοντέλο είναι διαθέσιμες για ένα μοντέλο.

##<a name="custom-api"></a>Πώς μπορείτε να: κλήση ένα προσαρμοσμένο API

Ένα προσαρμοσμένο API σάς επιτρέπει να ορίσετε προσαρμοσμένο τα τελικά σημεία που εκθέτουν λειτουργικότητα διακομιστή που δεν αντιστοίχιση με μια εισαγωγή, ενημέρωση, διαγραφή ή λειτουργία ανάγνωσης. Με τη χρήση μιας προσαρμοσμένης API, μπορείτε να έχετε περισσότερο έλεγχο μηνυμάτων, συμπεριλαμβανομένης της ανάγνωσης και τη ρύθμιση των κεφαλίδων μηνυμάτων HTTP και τον ορισμό μια μορφή σώμα μηνύματος εκτός από JSON.

Από ένα Android πρόγραμμα-πελάτη, μπορείτε να καλέσετε τη μέθοδο **invokeApi** για να καλέσετε το προσαρμοσμένο τελικό σημείο API. Το παρακάτω παράδειγμα δείχνει πώς μπορείτε να καλέσετε ένα τελικό σημείο API με το όνομα **completeAll**, που επιστρέφει μια κλάση συλλογής με το όνομα **MarkAllResult**.

    public void completeItem(View view) {

        ListenableFuture<MarkAllResult> result = mClient.invokeApi( "completeAll", MarkAllResult.class );

            Futures.addCallback(result, new FutureCallback<MarkAllResult>() {
                @Override
                public void onFailure(Throwable exc) {
                    createAndShowDialog((Exception) exc, "Error");
                }

                @Override
                public void onSuccess(MarkAllResult result) {
                    createAndShowDialog(result.getCount() + " item(s) marked as complete.", "Completed Items");
                    refreshItemsFromTable();
                }
            });
        }

Η μέθοδος **invokeApi** καλείται του υπολογιστή-πελάτη, η οποία αποστέλλει μια αίτηση ΚΑΤΑΧΏΡΗΣΗ για το νέο προσαρμοσμένο API. Το αποτέλεσμα που επιστρέφεται από το προσαρμοσμένο API εμφανίζεται σε ένα παράθυρο διαλόγου του μηνύματος, όπως σφάλματα. Άλλες εκδόσεις του **invokeApi** σάς επιτρέπουν να προαιρετικά Αποστολή αντικειμένου στο σώμα της αίτησης, Καθορισμός της μεθόδου HTTP και αποστολή παράμετροι ερωτήματος με την αίτηση. Ένα εκδόσεις του **invokeApi** παρέχονται καθώς και.

##<a name="authentication"></a>Πώς μπορείτε να: Προσθήκη ελέγχου ταυτότητας για την εφαρμογή σας

Προγράμματα εκμάθησης περιγράφουν ήδη με λεπτομέρειες τον τρόπο για να προσθέσετε αυτές τις δυνατότητες.

Εφαρμογή υπηρεσίας υποστηρίζει [τον έλεγχο ταυτότητας χρηστών εφαρμογή](app-service-mobile-android-get-started-users.md) χρησιμοποιώντας μια ποικιλία υπηρεσιών παροχής ταυτότητας εξωτερικών: Facebook, Google, λογαριασμό Microsoft που διαθέτετε, Twitter και Azure Active Directory. Μπορείτε να ορίσετε δικαιώματα σε πίνακες για να περιορίσετε την πρόσβαση για συγκεκριμένες ενέργειες μόνο σε χρήστες με έλεγχο ταυτότητας. Μπορείτε επίσης να χρησιμοποιήσετε την ταυτότητα των εξουσιοδοτημένων χρηστών για την υλοποίηση των κανόνων εξουσιοδότησης στο σας παρασκηνίου.

Υποστηρίζονται δύο ροών ελέγχου ταυτότητας: ένα **διακομιστή** και μια ροή **προγράμματος-πελάτη** . Η ροή διακομιστή παρέχει την εμπειρία απλούστερος ελέγχου ταυτότητας, όπως βασίζεται στο περιβάλλον εργασίας web υπηρεσίες παροχής ταυτότητας.  Χωρίς επιπλέον SDK απαιτούνται για την υλοποίηση ελέγχου ταυτότητας διακομιστή ροής. Έλεγχος ταυτότητας διακομιστή ροής δεν παρέχει μια ενοποίηση με την κινητή συσκευή και συνιστάται μόνο για απόδειξη έννοια σενάρια.

Η ροή προγράμματος-πελάτη επιτρέπει βαθύτερη ενοποίηση με τις δυνατότητες ειδικά για τη συσκευή, όπως καθολικής σύνδεσης που βασίζεται σε SDK που παρέχεται από την υπηρεσία παροχής ταυτότητας.  Για παράδειγμα, μπορείτε να ενοποιήσετε το SDK του Facebook στην εφαρμογή κινητές συσκευές σας.  Το πρόγραμμα-πελάτη κινητών αντιμεταθέτει στην εφαρμογή Facebook και επιβεβαιώνει σας καθολικής σύνδεσης πριν από την ανταλλαγή Επιστροφή στην εφαρμογή για κινητές συσκευές σας.

Απαιτούνται τέσσερα βήματα για να ενεργοποιήσετε τον έλεγχο ταυτότητας στην εφαρμογή σας:

- Να καταχωρήσει την εφαρμογή σας για τον έλεγχο ταυτότητας με μια υπηρεσία παροχής ταυτότητας.
- Ρύθμιση παραμέτρων του στοιχείου διακομιστή εφαρμογής υπηρεσίας.
- Περιορισμός δικαιωμάτων πίνακα σε εξουσιοδοτημένους χρήστες μόνο στον υπολογιστή στο παρασκήνιο εφαρμογής υπηρεσίας.
- Προσθέστε κωδικό ελέγχου ταυτότητας για την εφαρμογή σας.

Μπορείτε να ορίσετε δικαιώματα σε πίνακες για να περιορίσετε την πρόσβαση για συγκεκριμένες ενέργειες μόνο σε χρήστες με έλεγχο ταυτότητας. Μπορείτε επίσης να χρησιμοποιήσετε το αναγνωριστικό ΑΣΦΑΛΕΊΑΣ από ένα χρήστη με έλεγχο ταυτότητας για να τροποποιήσετε αιτήσεις.  Για περισσότερες πληροφορίες, διαβάστε [Γρήγορα αποτελέσματα με τον έλεγχο ταυτότητας] και την τεκμηρίωση ΔΙΑΔΙΚΑΣΙΕΣ SDK διακομιστή.

### <a name="caching"></a>Πώς μπορείτε να: Προσθήκη κώδικα ελέγχου ταυτότητας για την εφαρμογή σας

Ο ακόλουθος κώδικας ξεκινά μια διεργασία login ροής διακομιστή χρησιμοποιώντας την υπηρεσία παροχής Google:

    MobileServiceUser user = mClient.login(MobileServiceAuthenticationProvider.Google);

Προμηθευτείτε το Αναγνωριστικό του χρήστη για σύνδεση από μια **MobileServiceUser** χρησιμοποιώντας τη μέθοδο **getUserId** . Για ένα παράδειγμα του τρόπου χρήσης Futures για να καλέσετε ασύγχρονης login APIs, ανατρέξτε στο θέμα [Γρήγορα αποτελέσματα με τον έλεγχο ταυτότητας].

### <a name="caching"></a>Πώς μπορείτε να: Cache κωδικοί ελέγχου ταυτότητας

Προσωρινή αποθήκευση κωδικοί ελέγχου ταυτότητας απαιτεί να αποθηκεύσετε το Αναγνωριστικό χρήστη και τον έλεγχο ταυτότητας διακριτικού τοπικά στη συσκευή. Την επόμενη φορά που ξεκινά η εφαρμογή, μπορείτε να ελέγξετε το cache και, εάν υπάρχουν αυτές τις τιμές, μπορείτε να παραλείψετε το αρχείο καταγραφής της διαδικασίας και rehydrate το πρόγραμμα-πελάτη με αυτά τα δεδομένα. Ωστόσο, αυτά τα δεδομένα είναι διάκριση πεζών-κεφαλαίων και πρέπει να αποθηκεύονται κρυπτογραφημένα για την ασφάλεια, σε περίπτωση που το τηλέφωνο λαμβάνει κλοπής.

Μπορείτε να δείτε μια πλήρη παράδειγμα του τρόπου στο cache κωδικοί ελέγχου ταυτότητας σε [Cache ελέγχου ταυτότητας διακριτικά ενότητα][7].

Όταν προσπαθείτε να χρησιμοποιήσετε ένα έληξε διακριτικό, λαμβάνετε μια απάντηση *401 μη εξουσιοδοτημένο* . Μπορείτε να χειριστείτε σφάλματα ελέγχου ταυτότητας χρησιμοποιώντας φίλτρα.  Φίλτρα intercept αιτήσεις στον υπολογιστή στο παρασκήνιο εφαρμογής υπηρεσίας. Τον κωδικό φίλτρο ελέγχει την απόκριση για μια 401, ενεργοποιεί τη διαδικασία εισόδου και, στη συνέχεια, να ισχύει την αίτηση που δημιούργησε το 401. 

## <a name="adal"></a>Πώς μπορείτε να: ελέγχουν την ταυτότητα χρηστών με τη βιβλιοθήκη ελέγχου ταυτότητας Active Directory

Μπορείτε να χρησιμοποιήσετε το ενεργό βιβλιοθήκη ελέγχου ταυτότητας καταλόγου (ADAL) για να πραγματοποιήσετε τους χρήστες στην εφαρμογή σας με χρήση Azure Active Directory. Χρησιμοποιώντας μια σύνδεση ροής προγράμματος-πελάτη συχνά είναι προτιμότερο να χρησιμοποιείτε το `loginAsync()` μεθόδους όπως παρέχει μια πιο εγγενή αίσθηση UX και επιτρέπει την επιπλέον προσαρμογής.

1. Ρύθμιση παραμέτρων του στοιχείου διακομιστή εφαρμογής για κινητές συσκευές για AAD εισόδου, ακολουθώντας το πρόγραμμα εκμάθησης [πώς μπορείτε να ρυθμίσετε τις παραμέτρους της εφαρμογής υπηρεσίας για τη σύνδεση υπηρεσίας καταλόγου Active Directory](app-service-mobile-how-to-configure-active-directory-authentication.md) . Βεβαιωθείτε ότι για να ολοκληρώσετε το προαιρετικό βήμα την καταχώρηση μιας εφαρμογής εγγενές πρόγραμμα-πελάτη.

2. Εγκαταστήστε το ADAL, τροποποιώντας το αρχείο build.gradle για να συμπεριλάβετε τους ακόλουθους ορισμούς:

```
repositories {
    mavenCentral()
    flatDir {
        dirs 'libs'
    }
    maven {
        url "YourLocalMavenRepoPath\\.m2\\repository"
    }
}
packagingOptions {
    exclude 'META-INF/MSFTSIG.RSA'
    exclude 'META-INF/MSFTSIG.SF'
}
dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile('com.microsoft.aad:adal:1.1.1') {
        exclude group: 'com.android.support'
    } // Recent version is 1.1.1
    compile 'com.android.support:support-v4:23.0.0'
}
```

3. Προσθέστε τον ακόλουθο κώδικα στην εφαρμογή σας, κάνοντας τα εξής αντικατάστασης ελέγχου:

* Αντικαταστήστε **Εισαγωγή-ΑΡΧΉ-ΕΔΏ** με το όνομα του μισθωτή με την οποία παρασχεθεί την εφαρμογή σας. Η μορφή πρέπει να είναι https://login.windows.net/contoso.onmicrosoft.com. Αυτή η τιμή μπορεί να αντιγραφεί από την καρτέλα τομέα στο σας Azure Active Directory στο [Azure κλασική πύλη].

* Αντικαταστήστε **Εισαγωγή-ΠΌΡΩΝ-ID-ΕΔΏ** με το Αναγνωριστικό υπολογιστή-πελάτη για την εφαρμογή για κινητές συσκευές παρασκηνίου. Μπορείτε να αποκτήσετε το Αναγνωριστικό υπολογιστή-πελάτη από την καρτέλα **για προχωρημένους** στην περιοχή **Azure Active Directory ρυθμίσεις** στην πύλη.

* Αντικαταστήστε **Εισαγωγή-πρόγραμμα-ΠΕΛΆΤΗ-ID-ΕΔΏ** με το Αναγνωριστικό πελάτη που αντιγράψατε από την εφαρμογή εγγενές πρόγραμμα-πελάτη.

* Αντικαταστήστε **Εισαγωγή-REDIRECT-URI-ΕΔΏ** με το τελικό σημείο _/.auth/login/done_ της τοποθεσίας σας, χρησιμοποιώντας το σχήμα HTTPS. Αυτή η τιμή πρέπει να είναι παρόμοια με _https://contoso.azurewebsites.net/.auth/login/done_.

        private AuthenticationContext mContext;

        private void authenticate() {
            String authority = "INSERT-AUTHORITY-HERE";
            String resourceId = "INSERT-RESOURCE-ID-HERE";
            String clientId = "INSERT-CLIENT-ID-HERE";
            String redirectUri = "INSERT-REDIRECT-URI-HERE";
            try {
                mContext = new AuthenticationContext(this, authority, true);
                mContext.acquireToken(this, resourceId, clientId, redirectUri, PromptBehavior.Auto, "", callback);
            } catch (Exception exc) {
                exc.printStackTrace();
            }
        }

        private AuthenticationCallback<AuthenticationResult> callback = new AuthenticationCallback<AuthenticationResult>() {
            @Override
            public void onError(Exception exc) {
                if (exc instanceof AuthenticationException) {
                    Log.d(TAG, "Cancelled");
                } else {
                    Log.d(TAG, "Authentication error:" + exc.getMessage());
                }
            }

            @Override
            public void onSuccess(AuthenticationResult result) {
                if (result == null || result.getAccessToken() == null
                        || result.getAccessToken().isEmpty()) {
                    Log.d(TAG, "Token is empty");
                } else {
                    try {
                        JSONObject payload = new JSONObject();
                        payload.put("access_token", result.getAccessToken());
                        ListenableFuture<MobileServiceUser> mLogin = mClient.login("aad", payload.toString());
                        Futures.addCallback(mLogin, new FutureCallback<MobileServiceUser>() {
                            @Override
                            public void onFailure(Throwable exc) {
                                exc.printStackTrace();
                            }
                            @Override
                            public void onSuccess(MobileServiceUser user) {
                                Log.d(TAG, "Login Complete");
                            }
                        });
                    }
                    catch (Exception exc){
                        Log.d(TAG, "Authentication error:" + exc.getMessage());
                    }
                }
            }
        };

        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);
            if (mContext != null) {
                mContext.onActivityResult(requestCode, resultCode, data);
            }
        }

## <a name="how-to-add-push-notification-to-your-app"></a>Πώς μπορείτε να: Προσθήκη ειδοποιήσεων push για την εφαρμογή σας

Μπορείτε να [διαβάσετε μια επισκόπηση] [ 6] που περιγράφει τον τρόπο Microsoft Azure ειδοποίηση διανομείς υποστηρίζει μια μεγάλη ποικιλία ειδοποιήσεων push.  Σε [αυτό το πρόγραμμα εκμάθησης][5], αποστέλλεται μια ειδοποίηση push σε όλες τις συσκευές κάθε φορά που έχει εισαχθεί μια εγγραφή.

## <a name="how-to-add-offline-sync-to-your-app"></a>Πώς μπορείτε να: Προσθήκη συγχρονισμού χωρίς σύνδεση για την εφαρμογή σας

Το πρόγραμμα εκμάθησης γρήγορη έναρξη περιέχει κώδικα που υλοποιεί συγχρονισμού χωρίς σύνδεση. Αναζητήστε το πρόθεμα με σχόλια κώδικα:

    // Offline Sync

Από τις ακόλουθες γραμμές κώδικα uncommenting, μπορείτε να εφαρμόσετε συγχρονισμού χωρίς σύνδεση και μπορείτε να προσθέσετε παρόμοιες κώδικα σε άλλες εφαρμογές του Mobile κώδικα.

##<a name="customizing"></a>Πώς μπορείτε να: Προσαρμογή του προγράμματος-πελάτη

Υπάρχουν πολλοί τρόποι για να προσαρμόσετε την προεπιλεγμένη συμπεριφορά του προγράμματος-πελάτη.

### <a name="headers"></a>Πώς μπορείτε να: Προσαρμογή αίτηση κεφαλίδες

Ρυθμίστε τις παραμέτρους μιας **ServiceFilter** για να προσθέσετε μια προσαρμοσμένη κεφαλίδα HTTP σε κάθε αίτηση:

    private class CustomHeaderFilter implements ServiceFilter {

        @Override
        public ListenableFuture<ServiceFilterResponse> handleRequest(
                    ServiceFilterRequest request,
                    NextServiceFilterCallback next) {

            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    request.addHeader("My-Header", "Value");                    }
            });

            SettableFuture<ServiceFilterResponse> result = SettableFuture.create();
            try {
                ServiceFilterResponse response = next.onNext(request).get();
                result.set(response);
            } catch (Exception exc) {
                result.setException(exc);
            }
        }

### <a name="serialization"></a>Πώς μπορείτε να: Προσαρμογή σειριοποίησης

Το πρόγραμμα-πελάτη προϋποθέτει ότι τα ονόματα πινάκων, στηλών και δεδομένων τύπων στο υπόβαθρο όλα αντιστοιχούν ακριβώς τα αντικείμενα δεδομένων που ορίζονται από το στο πρόγραμμα-πελάτη. Μπορεί να υπάρχει διάφορους λόγους γιατί να μην ταιριάζουν και τα ονόματα διακομιστή και προγράμματος-πελάτη. Στη δική σας περίπτωση, ενδέχεται να θέλετε να κάνετε τα παρακάτω είδη προσαρμογές:

- Τα ονόματα των στηλών χρησιμοποιείται στον πίνακα εφαρμογής υπηρεσίας δεν ταιριάζουν με τα ονόματα που χρησιμοποιείτε στο πρόγραμμα-πελάτη.
- Χρησιμοποιήστε έναν πίνακα εφαρμογής υπηρεσίας με διαφορετικό όνομα από την κλάση αντιστοιχίζονται σε στο πρόγραμμα-πελάτη.
- Ενεργοποιήστε την ιδιότητα αυτόματη μετατροπή σε κεφαλαία.
- Προσθήκη σύνθετες ιδιότητες σε ένα αντικείμενο.

### <a name="columns"></a>Πώς μπορείτε να: αντιστοίχιση διαφορετικά ονόματα υπολογιστή-πελάτη και διακομιστή

Ας υποθέσουμε ότι ο κώδικας προγράμματος-πελάτη σας Java χρησιμοποιεί τυπική Java στυλ ονόματα για τις ιδιότητες του αντικειμένου **ToDoItem** , όπως τις ακόλουθες ιδιότητες:

- mId
- mText
- mComplete
- συνάρτηση mDuration

Σειριοποίηση τα ονόματα προγράμματος-πελάτη σε JSON ονόματα που ταιριάζουν με τα ονόματα των στηλών του πίνακα **ToDoItem** στο διακομιστή. Ο ακόλουθος κώδικας χρησιμοποιεί το [gson] [ 3] βιβλιοθήκη για να προσθέσετε σχόλια τις ιδιότητες:

    @com.google.gson.annotations.SerializedName("text")
    private String mText;

    @com.google.gson.annotations.SerializedName("id")
    private int mId;

    @com.google.gson.annotations.SerializedName("complete")
    private boolean mComplete;

    @com.google.gson.annotations.SerializedName("duration")
    private String mDuration;

### <a name="table"></a>Πώς μπορείτε να: αντιστοιχίστε τα ονόματα πινάκων διαφορετικές μεταξύ του προγράμματος-πελάτη και του υπολογιστή στο παρασκήνιο

Αντιστοιχίστε το όνομα του πίνακα προγράμματος-πελάτη σε ένα όνομα πίνακα διαφορετικές υπηρεσίες του κινητού χρησιμοποιώντας παράκαμψη της το [getTable()] [ 4] μέθοδο:

    mToDoTable = mClient.getTable("ToDoItemBackup", ToDoItem.class);

### <a name="conversions"></a>Πώς μπορείτε να: αυτοματοποίηση αντιστοιχίσεων ονομάτων στηλών

Μπορείτε να καθορίσετε μια στρατηγική μετατροπής που ισχύει για κάθε στήλη, χρησιμοποιώντας το [gson] [ 3] API. Η βιβλιοθήκη Android προγράμματος-πελάτη χρησιμοποιεί [gson] [ 3] τι συμβαίνει στο παρασκήνιο σειριοποίηση Java αντικείμενα δεδομένων JSON πριν από την αποστολή των δεδομένων σε Azure εφαρμογής υπηρεσίας.  Ο ακόλουθος κώδικας χρησιμοποιεί τη μέθοδο **setFieldNamingStrategy()** για να ορίσετε τη στρατηγική. Αυτό το παράδειγμα διαγράφει το αρχικό χαρακτήρα (ένα "μ"), και, στη συνέχεια, πεζά στον επόμενο χαρακτήρα, για κάθε όνομα πεδίου. Για παράδειγμα, αυτό θα μετατρέψετε "mId" σε "αναγνωριστικό".

    client.setGsonBuilder(
        MobileServiceClient
        .createMobileServiceGsonBuilder()
        .setFieldNamingStrategy(new FieldNamingStrategy() {
            public String translateName(Field field) {
                String name = field.getName();
                return Character.toLowerCase(name.charAt(1))
                    + name.substring(2);
                }
            });

Αυτός ο κωδικός πρέπει να εκτελείται πριν από τη χρήση του **MobileServiceClient**.

### <a name="complex"></a>Πώς μπορείτε να: Αποθηκεύστε μια ιδιότητα αντικειμένου ή έναν πίνακα σε πίνακα

Μέχρι στιγμής, μας παραδείγματα σειριοποίησης έχουν σχετίζονται στοιχειώδεις τύπους όπως ακέραιους αριθμούς και συμβολοσειρές.  Στοιχειώδεις τύπους σειριοποίηση εύκολα σε JSON.  Εάν θέλουμε να προσθέσετε μια σύνθετη αντικείμενο το οποίο δεν σειριοποίηση αυτόματα σε JSON, πρέπει να παρέχουμε τη μέθοδο σειριοποίησης JSON.  Για να δείτε ένα παράδειγμα του τρόπου για την παροχή προσαρμοσμένων σειριοποίησης JSON, ελέγξτε τη δημοσίευση ιστολογίου [Προσαρμογή σειριοποίησης χρησιμοποιώντας τη βιβλιοθήκη gson στο πρόγραμμα-πελάτη κινητών υπηρεσίες Android][2].

<!-- Anchors. -->

[What is Mobile Services]: #what-is
[Concepts]: #concepts
[How to: Create the Mobile Services client]: #create-client
[How to: Create a table reference]: #instantiating
[The API structure]: #api
[How to: Query data from a mobile service]: #querying
[Επιστροφή όλων των στοιχείων]: #showAll
[Φιλτράρετε δεδομένα που επιστρέφονται]: #filtering
[Ταξινόμηση επέστρεψε δεδομένα]: #sorting
[Επιστροφή δεδομένων σε σελίδες]: #paging
[Επιλέξτε συγκεκριμένες στήλες]: #selecting
[How to: Concatenate query methods]: #chaining
[How to: Bind data to the user interface]: #binding
[How to: Define the layout]: #layout
[How to: Define the adapter]: #adapter
[How to: Use the adapter]: #use-adapter
[How to: Insert data into a mobile service]: #inserting
[How to: update data in a mobile service]: #updating
[How to: Delete data in a mobile service]: #deleting
[How to: Look up a specific item]: #lookup
[How to: Work with untyped data]: #untyped
[How to: Authenticate users]: #authentication
[Cache authentication tokens]: #caching
[How to: Handle errors]: #errors
[How to: Design unit tests]: #tests
[How to: Customize the client]: #customizing
[Customize request headers]: #headers
[Customize serialization]: #serialization
[Next Steps]: #next-steps
[Setup and Prerequisites]: #setup

<!-- Images. -->

<!-- URLs. -->
[Get started with Azure Mobile Apps]: app-service-mobile-android-get-started.md
[ASCII control codes C0 and C1]: http://en.wikipedia.org/wiki/Data_link_escape_character#C1_set
[Mobile Services SDK for Android]: http://go.microsoft.com/fwlink/p/?LinkID=717033
[Πύλη του Azure]: https://portal.azure.com
[Γρήγορα αποτελέσματα με τον έλεγχο ταυτότητας]: app-service-mobile-android-get-started-users.md
[1]: http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonObject.html
[2]: http://hashtagfail.com/post/44606137082/mobile-services-android-serialization-gson
[3]: http://go.microsoft.com/fwlink/p/?LinkId=290801
[4]: http://go.microsoft.com/fwlink/p/?LinkId=296840
[5]: app-service-mobile-android-get-started-push.md
[6]: ../notification-hubs/notification-hubs-push-notification-overview.md#integration-with-app-service-mobile-apps
[7]: app-service-mobile-android-get-started-users.md#cache-tokens
[8]: http://azure.github.io/azure-mobile-apps-android-client/com/microsoft/windowsazure/mobileservices/table/MobileServiceTable.html
[9]: http://azure.github.io/azure-mobile-apps-android-client/com/microsoft/windowsazure/mobileservices/MobileServiceClient.html
[10]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md
[11]: app-service-mobile-node-backend-how-to-use-server-sdk.md
[12]: http://azure.github.io/azure-mobile-apps-android-client/
[13]: app-service-mobile-android-get-started.md#create-a-new-azure-mobile-app-backend
[14]: http://go.microsoft.com/fwlink/p/?LinkID=717034
[15]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#how-to-define-a-table-controller
[16]: app-service-mobile-node-backend-how-to-use-server-sdk.md#TableOperations
[Μέλλον]: http://developer.android.com/reference/java/util/concurrent/Future.html
[AsyncTask]: http://developer.android.com/reference/android/os/AsyncTask.html