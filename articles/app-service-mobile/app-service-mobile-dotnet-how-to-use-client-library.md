<properties
    pageTitle="Εργασία με τη βιβλιοθήκη Mobile εφαρμογών υπηρεσίας διαχειριζόμενων προγράμματος-πελάτη (Windows | Xamarin) | Microsoft Azure"
    description="Μάθετε πώς να χρησιμοποιείτε ένα πρόγραμμα-πελάτη .NET για Azure εφαρμογής υπηρεσίας εφαρμογές του Mobile με τις εφαρμογές των Windows και Xamarin."
    services="app-service\mobile"
    documentationCenter=""
    authors="adrianhall"
    manager="erikre"
    editor=""/>

<tags
    ms.service="app-service-mobile"
    ms.workload="mobile"
    ms.tgt_pltfrm="mobile-multiple"
    ms.devlang="dotnet"
    ms.topic="article"
    ms.date="10/01/2016"
    ms.author="adrianha"/>

# <a name="how-to-use-the-managed-client-for-azure-mobile-apps"></a>Πώς μπορείτε να χρησιμοποιήσετε το πρόγραμμα-πελάτη διαχειριζόμενων για εφαρμογές του Mobile Azure

[AZURE.INCLUDE [app-service-mobile-selector-client-library](../../includes/app-service-mobile-selector-client-library.md)]

##<a name="overview"></a>Επισκόπηση

Αυτός ο οδηγός δείχνει πώς μπορείτε να εκτελέσετε συνηθισμένα σενάρια χρήσης στη βιβλιοθήκη διαχειριζόμενων προγράμματος-πελάτη για Azure εφαρμογής υπηρεσίας Mobile Apps για Windows και Xamarin εφαρμογές. Εάν είστε εξοικειωμένοι με εφαρμογές του Mobile, πρέπει να εξετάσετε πρώτα την ολοκλήρωση τη [γρήγορη έναρξη εφαρμογές του Mobile Azure] [ 1] το πρόγραμμα εκμάθησης. Σε αυτόν τον οδηγό, εστίαση σε διαχειριζόμενες SDK για την πλευρά του προγράμματος-πελάτη. Για να μάθετε περισσότερα σχετικά με την πλευρά του διακομιστή SDK για τις εφαρμογές του Mobile, ανατρέξτε στην τεκμηρίωση για το [.NET διακομιστή SDK] [ 2] ή το [Node.js διακομιστή SDK][3].

## <a name="reference-documentation"></a>Τεκμηρίωση αναφοράς

Η τεκμηρίωση αναφοράς για το πρόγραμμα-πελάτη SDK βρίσκεται εδώ: [αναφορά προγράμματος-πελάτη .NET εφαρμογές του Mobile Azure][4].
Μπορείτε επίσης να βρείτε πολλές δείγματα προγράμματος-πελάτη στο [αποθετήριο δεδομένων Azure δείγματα GitHub][5].

## <a name="supported-platforms"></a>Υποστηριζόμενες πλατφόρμες

Την πλατφόρμα .NET υποστηρίζει τις ακόλουθες πλατφόρμες:

* Xamarin Android για ενημερωμένες εκδόσεις για το API 19 έως 24 (KitKat έως Nougat)
* Xamarin iOS εκδόσεις για iOS 8.0 και οι νεότερες εκδόσεις
* Πλατφόρμα γενικής χρήσης των Windows
* Windows Phone 8.1
* Windows Phone 8.0 εκτός από τις εφαρμογές του Silverlight

Ο έλεγχος ταυτότητας "διακομιστή ροής" χρησιμοποιεί μια προβολής Web για το περιβάλλον εργασίας Χρήστη που παρουσιάστηκε.  Εάν η συσκευή δεν είναι σε θέση να εμφανίσει ένα περιβάλλον εργασίας Χρήστη προβολής Web, απαιτούνται άλλες μεθόδους ελέγχου ταυτότητας.  Αυτό το SDK δεν είναι κατάλληλη για παρακολούθησης ή τύπου ομοίως περιορισμένα συσκευές, επομένως.

##<a name="setup"></a>Το πρόγραμμα εγκατάστασης και τις προϋποθέσεις

Θα σας λαμβάνεται ως δεδομένο ότι έχετε ήδη δημιουργήσει και δημοσιεύονται εφαρμογή Mobile παρασκηνίου το έργο σας, που περιλαμβάνει τουλάχιστον έναν πίνακα.  Στον κώδικα που χρησιμοποιείται σε αυτό το θέμα, με το όνομα του πίνακα `TodoItem` και που έχει τις ακόλουθες στήλες: `Id`, `Text`, και `Complete`. Αυτός ο πίνακας είναι στον ίδιο πίνακα που δημιουργήσατε κατά την ολοκλήρωση [εφαρμογές του Mobile Azure γρήγορη έναρξη].

Ο αντίστοιχος τύπος πληκτρολογήσατε πλευρά του προγράμματος-πελάτη στο C# είναι η εξής κλάση:

    public class TodoItem
    {
        public string Id { get; set; }

        [JsonProperty(PropertyName = "text")]
        public string Text { get; set; }

        [JsonProperty(PropertyName = "complete")]
        public bool Complete { get; set; }
    }

Το [JsonPropertyAttribute] [ 6] χρησιμοποιείται για να ορίσετε την αντιστοίχιση *PropertyName* μεταξύ του τύπου προγράμματος-πελάτη και του πίνακα.

Για να μάθετε πώς να δημιουργείτε πίνακες στην τις εφαρμογές του Mobile παρασκηνίου, δείτε τις πληροφορίες στο [θέμα .NET διακομιστή SDK] [ 7] ή το [θέμα Node.js διακομιστή SDK][8]. Εάν έχετε δημιουργήσει την εφαρμογή Mobile παρασκηνίου στην πύλη του Azure χρησιμοποιώντας τη Γρήγορη εκκίνηση, μπορείτε επίσης να χρησιμοποιήσετε τη ρύθμιση **εύκολο πίνακες** στην [πύλη του Azure].

###<a name="how-to-install-the-managed-client-sdk-package"></a>Πώς μπορείτε να: εγκατάσταση του πακέτου SDK διαχειριζόμενων προγράμματος-πελάτη

Χρησιμοποιήστε μία από τις παρακάτω μεθόδους για να εγκαταστήσετε το πακέτο SDK διαχειριζόμενων προγράμματος-πελάτη για εφαρμογές του Mobile από το [NuGet][9]:

+ **Visual Studio** Κάντε δεξιό κλικ στο έργο σας, κάντε κλικ στην επιλογή **Διαχείριση πακέτων NuGet**, αναζητήστε το `Microsoft.Azure.Mobile.Client` συσκευασία και, στη συνέχεια, κάντε κλικ στην επιλογή **εγκατάσταση**.

+ **Xamarin Studio** Κάντε δεξιό κλικ στο έργο σας, κάντε κλικ στην επιλογή **Προσθήκη** > **Προσθήκη πακέτων NuGet**, αναζητήστε το `Microsoft.Azure.Mobile.Client `συσκευασία και, στη συνέχεια, κάντε κλικ στην επιλογή **Προσθήκη πακέτου**.

Στο αρχείο σας κύρια δραστηριότητα, να θυμάστε να προσθέσετε την ακόλουθη πρόταση **χρησιμοποιώντας** :

    using Microsoft.WindowsAzure.MobileServices;

###<a name="symbolsource"></a>Πώς μπορείτε να: εργασία με σύμβολα εντοπισμού σφαλμάτων στο Visual Studio

Τα σύμβολα για το χώρο ονομάτων Microsoft.Azure.Mobile είναι διαθέσιμες στην [SymbolSource][10].  Ανατρέξτε στις [οδηγίες SymbolSource] [ 11] για να ενσωματώσετε SymbolSource με το Visual Studio.

##<a name="create-client"></a>Δημιουργία του προγράμματος-πελάτη εφαρμογές του Mobile

Ο ακόλουθος κώδικας δημιουργεί το [MobileServiceClient] [ 12] αντικειμένου που χρησιμοποιείται για να αποκτήσετε πρόσβαση σας παρασκηνίου εφαρμογή Mobile.

    var client = new MobileServiceClient("MOBILE_APP_URL");

Στο προηγούμενο κώδικα, αντικαταστήστε `MOBILE_APP_URL` με τη διεύθυνση URL του υπολογιστή στο παρασκήνιο εφαρμογή Mobile, που βρίσκεται στο το blade για την εφαρμογή Mobile παρασκηνίου στην [πύλη του Azure]. Το αντικείμενο MobileServiceClient πρέπει να είναι singleton.

## <a name="work-with-tables"></a>Εργασία με πίνακες

Στην παρακάτω ενότητα λεπτομέρειες τρόπος για να πραγματοποιήσετε αναζήτηση και ανάκτηση εγγραφών και τροποποίηση των δεδομένων μέσα στον πίνακα.  Καλύπτονται τα ακόλουθα θέματα:

* [Δημιουργήστε μια αναφορά πίνακα](#instantiating)
* [Δεδομένα ερωτήματος](#querying)
* [Φιλτράρετε δεδομένα που επιστρέφονται](#filtering)
* [Ταξινόμηση επέστρεψε δεδομένα](#sorting)
* [Επιστροφή δεδομένων σε σελίδες](#paging)
* [Επιλέξτε συγκεκριμένες στήλες](#selecting)
* [Αναζητήστε μια εγγραφή κατά αναγνωριστικό](#lookingup)
* [Χειρισμός ερωτημάτων ένα](#untypedqueries)
* [Εισαγωγή δεδομένων](#inserting)
* [Ενημέρωση δεδομένων](#updating)
* [Διαγραφή δεδομένων](#deleting)
* [Επίλυση διενέξεων και βέλτιστου](#optimisticconcurrency)
* [Σύνδεση σε ένα περιβάλλον εργασίας χρήστη των Windows](#binding)
* [Αλλαγή του μεγέθους σελίδας](#pagesize)

###<a name="instantiating"></a>Πώς μπορείτε να: Δημιουργήστε μια αναφορά πίνακα

Όλος ο κώδικας που αποκτά πρόσβαση ή τροποποιεί δεδομένα σε έναν πίνακα παρασκηνίου κλήσεις συναρτήσεων στην το `MobileServiceTable` αντικειμένου. Αποκτήστε μια αναφορά σε πίνακα, καλώντας τη μέθοδο [η δυνατότητα GetTable] , ως εξής:

    IMobileServiceTable<TodoItem> todoTable = client.GetTable<TodoItem>();

Το αντικείμενο που επιστρέφεται χρησιμοποιεί το μοντέλο πληκτρολογήσατε σειριοποίησης. Υποστηρίζεται επίσης ένα μοντέλο ένα σειριοποίησης. Το παρακάτω παράδειγμα [δημιουργεί μια αναφορά σε ένα πίνακα]:

    // Get an untyped table reference
    IMobileServiceTable untypedTodoTable = client.GetTable("TodoItem");

Σε ένα ερωτήματα, πρέπει να καθορίσετε τα υποκείμενα συμβολοσειρά ερωτήματος OData.

###<a name="querying"></a>Πώς μπορείτε να: ερωτήματος δεδομένα από την εφαρμογή Mobile

Αυτή η ενότητα περιγράφει πώς μπορείτε να δημοσιεύετε ερωτήματα για την εφαρμογή Mobile στον υπολογιστή στο παρασκήνιο, που περιλαμβάνει τις ακόλουθες λειτουργίες:

- [Φιλτράρετε δεδομένα που επιστρέφονται](#filtering)
- [Ταξινόμηση επέστρεψε δεδομένα](#sorting)
- [Επιστροφή δεδομένων σε σελίδες](#paging)
- [Επιλέξτε συγκεκριμένες στήλες](#selecting)
- [Αναζήτηση δεδομένων κατά Αναγνωριστικό](#lookingup)

>[AZURE.NOTE]Μέγεθος σελίδας που βασίζονται σε διακομιστή τίθεται σε ισχύ για να αποτρέψετε την επιστροφή όλες τις γραμμές.  Σελιδοποίησης διατηρεί προεπιλεγμένη αιτήσεις για μεγάλα σύνολα δεδομένων από αρνητικά επηρεάζουν την υπηρεσία.  Για να λάβετε περισσότερα από 50 γραμμές, χρησιμοποιήστε το `Skip` και `Take` μέθοδο, όπως περιγράφεται στο [επιστροφής δεδομένων σε σελίδες του].

###<a name="filtering"></a>Πώς μπορείτε να: φίλτρο επέστρεψε δεδομένα

Ο κώδικας που ακολουθεί παρουσιάζει τον τρόπο για να φιλτράρετε δεδομένα, συμπεριλαμβάνοντας μια `Where` όρο σε ένα ερώτημα. Η συνάρτηση επιστρέφει όλα τα στοιχεία από `todoTable` των οποίων `Complete` ιδιότητα είναι ίση με `false`. Η συνάρτηση [όπου] ισχύει μια γραμμή φιλτράρισμα κατηγόρημα στο ερώτημα σε σχέση με τον πίνακα.

    // This query filters out completed TodoItems and items without a timestamp.
    List<TodoItem> items = await todoTable
       .Where(todoItem => todoItem.Complete == false)
       .ToListAsync();

Μπορείτε να προβάλετε το URI της αίτησης αποστέλλονται στον υπολογιστή στο παρασκήνιο, χρησιμοποιώντας λογισμικό επιθεώρησης μήνυμα, όπως εργαλεία για προγραμματιστές του προγράμματος περιήγησης ή [Fiddler]. Αν κοιτάξετε την αίτηση URI, παρατηρήστε ότι έχει τροποποιηθεί η συμβολοσειρά ερωτήματος:

    GET /tables/todoitem?$filter=(complete+eq+false) HTTP/1.1

Αυτή η αίτηση OData μετατρέπεται σε ένα ερώτημα SQL από το διακομιστή SDK:

    SELECT *
    FROM TodoItem
    WHERE ISNULL(complete, 0) = 0

Η συνάρτηση που μεταβιβάζεται το `Where` μέθοδο μπορούν να έχουν έναν αυθαίρετο αριθμό συνθήκες.

    // This query filters out completed TodoItems where Text isn't null
    List<TodoItem> items = await todoTable
       .Where(todoItem => todoItem.Complete == false && todoItem.Text != null)
       .ToListAsync();

Αυτό το παράδειγμα μπορεί να μετατραπεί σε ένα ερώτημα SQL από το διακομιστή SDK:

    SELECT *
    FROM TodoItem
    WHERE ISNULL(complete, 0) = 0
          AND ISNULL(text, 0) = 0

Αυτό το ερώτημα μπορεί επίσης να διαιρεθεί σε πολλούς όρους:

    List<TodoItem> items = await todoTable
       .Where(todoItem => todoItem.Complete == false)
       .Where(todoItem => todoItem.Text != null)
       .ToListAsync();

Οι δύο μέθοδοι θεωρούνται ισοδύναμα και μπορεί να χρησιμοποιηθεί εναλλακτικά.  Η επιλογή πρώην&mdash;της συνένωση πολλών κατηγορήματα σε ένα ερώτημα&mdash;είναι πιο συμπαγές και προτεινόμενες.

Το `Where` όρος υποστηρίζει λειτουργίες που να μεταφραστεί το υποσύνολο OData. Λειτουργίες περιλαμβάνουν τα εξής:

* Σχεσιακούς τελεστές (==,! =, <, < =, >, > =),
* Αριθμητικοί τελεστές (+, -, /, *, %),
* Ο αριθμός ακρίβεια (Math.Floor, Math.Ceiling)
* Συναρτήσεις συμβολοσειράς (μήκος, δευτερεύουσα συμβολοσειρά, αντικατάσταση, IndexOf, StartsWith, EndsWith),
* Ιδιότητες ημερομηνίας (έτος, μήνας, ημέρα, ώρα, λεπτό, δευτερόλεπτο),
* Πρόσβαση σε ιδιότητες ενός αντικειμένου, και
* Παραστάσεις συνδυασμός οποιαδήποτε από αυτές τις εργασίες.

Όταν εξετάζετε ποια υποστηρίζει το διακομιστή SDK, που μπορούν να μπορείτε να την [τεκμηρίωση OData v3].

###<a name="sorting"></a>Πώς μπορείτε να: ταξινόμηση επέστρεψε δεδομένα

Ο κώδικας που ακολουθεί παρουσιάζει τον τρόπο για να ταξινομήσετε δεδομένα, συμπεριλαμβάνοντας μια συνάρτηση [OrderBy] ή [OrderByDescending] στο ερώτημα. Επιστρέφει στοιχεία από `todoTable` με αύξουσα ταξινόμηση από το `Text` πεδίο.

    // Sort items in ascending order by Text field
    MobileServiceTableQuery<TodoItem> query = todoTable
                    .OrderBy(todoItem => todoItem.Text)
    List<TodoItem> items = await query.ToListAsync();

    // Sort items in descending order by Text field
    MobileServiceTableQuery<TodoItem> query = todoTable
                    .OrderByDescending(todoItem => todoItem.Text)
    List<TodoItem> items = await query.ToListAsync();

###<a name="paging"></a>Πώς μπορείτε να: επιστροφή δεδομένων σε σελίδες

Από προεπιλογή, υπόβαθρο επιστρέφει μόνο τις πρώτες 50 γραμμές. Μπορείτε να αυξήσετε τον αριθμό των γραμμών που θα επιστραφούν καλώντας τη μέθοδο [λήψη] . Χρήση `Take` μαζί με τη μέθοδο [Παράλειψη] για να ζητήσετε από ένα συγκεκριμένο "σελίδα" του συνόλου dataset επιστρέφονται από το ερώτημα. Το ακόλουθο ερώτημα, όταν εκτελείται, επιστρέφει το τα τρία πρώτα στοιχεία στον πίνακα.

    // Define a filtered query that returns the top 3 items.
    MobileServiceTableQuery<TodoItem> query = todoTable
                    .Take(3);
    List<TodoItem> items = await query.ToListAsync();

Το παρακάτω ερώτημα αναθεωρημένο παραλείπει τα πρώτα τρία αποτελέσματα και επιστρέφει το αποτέλεσμα επόμενες τρεις. Αυτό το ερώτημα δημιουργεί τη δεύτερη "σελίδα" δεδομένων, όπου το μέγεθος σελίδας είναι τρία στοιχεία.

    // Define a filtered query that skips the top 3 items and returns the next 3 items.
    MobileServiceTableQuery<TodoItem> query = todoTable
                    .Skip(3)
                    .Take(3);
    List<TodoItem> items = await query.ToListAsync();

Η μέθοδος [IncludeTotalCount] ζητά το συνολικό πλήθος για _όλες_ τις εγγραφές που θα έχουν επιστραφεί, παραβλέποντας τυχόν όρος σελιδοποίησης/όριο που καθορίζεται:

    query = query.IncludeTotalCount();

Σε μια εφαρμογή πραγματικό κόσμο, μπορείτε να χρησιμοποιήσετε ερωτήματα παρόμοιο με το προηγούμενο παράδειγμα με ένα στοιχείο ελέγχου Τηλεειδοποίηση ή συγκρίσιμη περιβάλλοντος εργασίας Χρήστη για να μετακινηθείτε μεταξύ των σελίδων.

>[AZURE.NOTE]Για να παρακάμψετε το όριο 50 γραμμή σε έναν υπολογιστή στο παρασκήνιο εφαρμογή Mobile, πρέπει να επίσης να ισχύουν τα [EnableQueryAttribute] για τη δημόσια μέθοδο GET και να καθορίσετε τη συμπεριφορά σελιδοποίησης. Όταν εφαρμόζονται σε τη μέθοδο, τα ακόλουθα ορίζει το μέγιστο όριο επιστρέφονται γραμμές 1000:
>
>    [EnableQuery(MaxTop=1000)]

### <a name="selecting"></a>Πώς μπορείτε να: Επιλέξτε συγκεκριμένες στήλες

Μπορείτε να καθορίσετε το σύνολο ιδιοτήτων που θα συμπεριλάβετε στα αποτελέσματα με την προσθήκη όρου [Επιλέξτε] στο ερώτημά σας. Για παράδειγμα, ο ακόλουθος κώδικας δείχνει τον τρόπο για να επιλέξετε ένα μόνο πεδίο και επίσης για να επιλέξετε και να διαμορφώσετε πολλά πεδία:

    // Select one field -- just the Text
    MobileServiceTableQuery<TodoItem> query = todoTable
                    .Select(todoItem => todoItem.Text);
    List<string> items = await query.ToListAsync();

    // Select multiple fields -- both Complete and Text info
    MobileServiceTableQuery<TodoItem> query = todoTable
                    .Select(todoItem => string.Format("{0} -- {1}",
                        todoItem.Text.PadRight(30), todoItem.Complete ?
                        "Now complete!" : "Incomplete!"));
    List<string> items = await query.ToListAsync();

Όλες οι συναρτήσεις που περιγράφεται μέχρι στιγμής είναι προσθετικά, έτσι θα σας μπορεί να διατηρήσετε αλυσιδωτή τους. Κάθε συνδεδεμένη κλήση επηρεάζει περισσότερα από το ερώτημα. Ένα παράδειγμα περισσότερες:

    MobileServiceTableQuery<TodoItem> query = todoTable
                    .Where(todoItem => todoItem.Complete == false)
                    .Select(todoItem => todoItem.Text)
                    .Skip(3).
                    .Take(3);
    List<string> items = await query.ToListAsync();

### <a name="lookingup"></a>Πώς μπορείτε να: αναζήτηση δεδομένων κατά Αναγνωριστικό

Η συνάρτηση [LookupAsync] μπορεί να χρησιμοποιηθεί για να αναζητήσετε αντικείμενα από τη βάση δεδομένων με ένα συγκεκριμένο αναγνωριστικό.

    // This query filters out the item with the ID of 37BBF396-11F0-4B39-85C8-B319C729AF6D
    TodoItem item = await todoTable.LookupAsync("37BBF396-11F0-4B39-85C8-B319C729AF6D");

### <a name="untypedqueries"></a>Πώς μπορείτε να: εκτέλεση ένα ερωτημάτων

Όταν εκτελείτε ένα ερώτημα με ένα αντικείμενο ένα πίνακα, πρέπει να καθορίσετε ρητά τη συμβολοσειρά ερωτήματος OData καλώντας [ReadAsync], όπως στο ακόλουθο παράδειγμα:

    // Lookup untyped data using OData
    JToken untypedItems = await untypedTodoTable.ReadAsync("$filter=complete eq 0&$orderby=text");

Μπορείτε να επιστρέψετε JSON τιμές που μπορείτε να χρησιμοποιήσετε, όπως μια ιδιότητα τσάντα. Για περισσότερες πληροφορίες σχετικά με JToken και Newtonsoft Json.NET, ανατρέξτε στην τοποθεσία [Json.NET] .

### <a name="inserting"></a>Πώς μπορείτε να: εισαγωγή δεδομένων σε έναν υπολογιστή στο παρασκήνιο εφαρμογή Mobile

Όλοι οι τύποι προγράμματος-πελάτη πρέπει να περιέχει ένα μέλος με όνομα **αναγνωριστικό**, το οποίο είναι από προεπιλογή μια συμβολοσειρά. Αυτό το **αναγνωριστικό** απαιτείται για να εκτελέσετε λειτουργίες CRUD και για συγχρονισμού χωρίς σύνδεση. Ο κώδικας που ακολουθεί παρουσιάζει πώς μπορείτε να χρησιμοποιήσετε τη μέθοδο [InsertAsync] για την εισαγωγή νέων γραμμών σε πίνακα. Η παράμετρος περιέχει τα δεδομένα που θα εισαχθούν ως ένα αντικείμενο .NET.

    await todoTable.InsertAsync(todoItem);

Εάν μια μοναδική τιμή προσαρμοσμένου Αναγνωριστικό δεν περιλαμβάνεται στο το `todoItem` κατά τη διάρκεια μια εισαγωγή, δημιουργείται ένα GUID από το διακομιστή.
Μπορείτε να ανακτήσετε το αναγνωριστικό που δημιουργείται με έλεγχο του αντικειμένου αφού επιστρέφει την κλήση.

Για να εισαγάγετε ένα δεδομένων, μπορείτε να επωφεληθείτε από Json.NET:

    JObject jo = new JObject();
    jo.Add("Text", "Hello World");
    jo.Add("Complete", false);
    var inserted = await table.InsertAsync(jo);

Ακολουθεί ένα παράδειγμα, χρησιμοποιώντας μια διεύθυνση ηλεκτρονικού ταχυδρομείου ως συμβολοσειρά μοναδικό αναγνωριστικό:

    JObject jo = new JObject();
    jo.Add("id", "myemail@emaildomain.com");
    jo.Add("Text", "Hello World");
    jo.Add("Complete", false);
    var inserted = await table.InsertAsync(jo);

### <a name="working-with-id-values"></a>Εργασία με τιμές Αναγνωριστικού

Εφαρμογές του Mobile υποστηρίζει προσαρμοσμένη συμβολοσειρά μοναδικές τιμές για τη στήλη **αναγνωριστικό** του πίνακα. Μια τιμή συμβολοσειράς επιτρέπει στις εφαρμογές να χρησιμοποιήσετε τις προσαρμοσμένες τιμές όπως διευθύνσεις ηλεκτρονικού ταχυδρομείου ή ονόματα χρηστών για το αναγνωριστικό.  Αναγνωριστικά συμβολοσειρά παρέχει τα ακόλουθα πλεονεκτήματα:

* Αναγνωριστικά δημιουργούνται χωρίς να κάνετε ένα χρόνο αποστολής και επιστροφής στη βάση δεδομένων.
* Εγγραφές που είναι πιο εύκολο να συγχωνεύσετε από διαφορετικούς πίνακες ή σε βάσεις δεδομένων.
* Αναγνωριστικά τιμές να ενοποιήσετε καλύτερα με λογική μιας εφαρμογής.

Όταν μια τιμή συμβολοσειράς Αναγνωριστικό δεν έχει οριστεί σε μια εγγραφή που έχει εισαχθεί, η εφαρμογή Mobile παρασκηνίου δημιουργεί μια μοναδική τιμή για το αναγνωριστικό. Μπορείτε να χρησιμοποιήσετε τη μέθοδο [Guid.NewGuid] για να δημιουργήσετε τις δικές σας τιμές Αναγνωριστικού, είτε με το πρόγραμμα-πελάτη είτε στον υπολογιστή στο παρασκήνιο.

    JObject jo = new JObject();
    jo.Add("id", Guid.NewGuid().ToString("N"));

###<a name="modifying"></a>Πώς μπορείτε να: τροποποίηση των δεδομένων σε μια εφαρμογή Mobile παρασκηνίου

Ο κώδικας που ακολουθεί παρουσιάζει πώς μπορείτε να χρησιμοποιήσετε τη μέθοδο [UpdateAsync] για να ενημερώσετε μια υπάρχουσα εγγραφή με το ίδιο Αναγνωριστικό με νέες πληροφορίες. Η παράμετρος περιέχει τα δεδομένα που θα ενημερωθούν ως αντικείμενο .NET.

    await todoTable.UpdateAsync(todoItem);

Για να ενημερώσετε ένα δεδομένων, μπορείτε να επωφεληθείτε από [Json.NET] ως εξής:

    JObject jo = new JObject();
    jo.Add("id", "37BBF396-11F0-4B39-85C8-B319C729AF6D");
    jo.Add("Text", "Hello World");
    jo.Add("Complete", false);
    var inserted = await table.UpdateAsync(jo);

Μια `id` πεδίο πρέπει να έχει καθοριστεί όταν πραγματοποιείτε μια ενημερωμένη έκδοση. Υπόβαθρο χρησιμοποιεί το `id` πεδίων για τον προσδιορισμό της γραμμής για να ενημερώσετε. Το `id` πεδίο μπορεί να ληφθεί από το αποτέλεσμα του `InsertAsync` κλήσεων. Μια `ArgumentException` ενεργοποιείται εάν προσπαθήσετε να ενημερώσετε ένα στοιχείο χωρίς να παραχωρήσετε το `id` τιμή.

###<a name="deleting"></a>Πώς μπορείτε να: διαγραφή δεδομένων σε μια εφαρμογή Mobile παρασκηνίου

Ο ακόλουθος κώδικας παρουσιάζει πώς μπορείτε να χρησιμοποιήσετε τη μέθοδο [DeleteAsync] για να διαγράψετε μια υπάρχουσα περίοδο λειτουργίας. Η παρουσία προσδιορίζεται από το `id` σύνολο πεδίων στην το `todoItem`.

    await todoTable.DeleteAsync(todoItem);

Για να διαγράψετε ένα δεδομένων, μπορείτε να επωφεληθείτε από Json.NET ως εξής:

    JObject jo = new JObject();
    jo.Add("id", "37BBF396-11F0-4B39-85C8-B319C729AF6D");
    await table.DeleteAsync(jo);

Όταν κάνετε μια αίτηση διαγραφής, πρέπει να καθοριστεί σε Αναγνωριστικό. Άλλες ιδιότητες δεν μεταβιβάζονται στην υπηρεσία ή λαμβάνονται υπόψη κατά την υπηρεσία. Το αποτέλεσμα ενός `DeleteAsync` κλήσης είναι συνήθως `null`. Μπορείτε να αποκτήσετε το Αναγνωριστικό για τη μεταβίβαση στο από το αποτέλεσμα του `InsertAsync` κλήσεων. A `MobileServiceInvalidOperationException` προκαλείται, όταν προσπαθείτε να διαγράψετε ένα στοιχείο χωρίς να καθορίσετε το `id` πεδίο.

###<a name="optimisticconcurrency"></a>Πώς μπορείτε να: χρήση βέλτιστου για επίλυση διενέξεων

Δύο ή περισσότερους πελάτες μπορεί να γράψετε αλλαγές στο ίδιο στοιχείο ταυτόχρονα. Χωρίς εντοπισμού διενέξεων, το τελευταίο εγγραφής θα αντικαταστήσει τις προηγούμενες ενημερώσεις. **Βέλτιστου ελέγχου** προϋποθέτει ότι κάθε συναλλαγή να ολοκληρώσετε και επομένως δεν χρησιμοποιεί οποιοδήποτε κλείδωμα πόρων.  Πριν από την οριστικοποίηση των συναλλαγή, βέλτιστου ελέγχου επαληθεύει ότι δεν υπάρχει άλλη συναλλαγή έχει τροποποιηθεί τα δεδομένα. Εάν τα δεδομένα έχει τροποποιηθεί, η ολοκλήρωση συναλλαγή επανέρχεται.

Εφαρμογές του Mobile υποστηρίζει βέλτιστου ελέγχου με την παρακολούθηση αλλαγών σε κάθε στοιχείου με χρήση του `version` σύστημα ιδιότητα στήλη που έχει οριστεί για κάθε πίνακα σας παρασκηνίου εφαρμογή Mobile. Κάθε φορά που ενημερώνεται μια εγγραφή, οι εφαρμογές του Mobile ορίζει το `version` ιδιότητας για αυτήν την εγγραφή σε μια νέα τιμή. Κατά τη διάρκεια αίτησης κάθε ενημέρωση, την `version` ιδιότητα της εγγραφής περιλαμβάνεται η αίτηση είναι σε σύγκριση με την ίδια ιδιότητα για την εγγραφή στο διακομιστή. Εάν η έκδοση που εισήχθησαν με την αίτηση δεν ταιριάζουν με υπολογιστή στο παρασκήνιο και, στη συνέχεια, στη βιβλιοθήκη του προγράμματος-πελάτη που εμφανίζει μια `MobileServicePreconditionFailedException<T>` εξαίρεση. Ο τύπος που περιλαμβάνεται με την εξαίρεση είναι η εγγραφή από υπολογιστή στο παρασκήνιο που περιέχει την έκδοση διακομιστές της εγγραφής. Η εφαρμογή, στη συνέχεια, να χρησιμοποιήσετε αυτές τις πληροφορίες για να αποφασίσετε εάν θα εκτελέσει την αίτηση ενημέρωσης ξανά με το σωστό `version` τιμή από την πλευρά του διακομιστή για να πραγματοποιήσετε αλλαγές.

Καθορισμός μιας στήλης σε πίνακα τάξη για το `version` ιδιότητα συστήματος για να ενεργοποιήσετε την βέλτιστου. Για παράδειγμα:

    public class TodoItem
    {
        public string Id { get; set; }

        [JsonProperty(PropertyName = "text")]
        public string Text { get; set; }

        [JsonProperty(PropertyName = "complete")]
        public bool Complete { get; set; }

        // *** Enable Optimistic Concurrency *** //
        [JsonProperty(PropertyName = "version")]
        public string Version { set; get; }
    }


Οι εφαρμογές που χρησιμοποιούν ένα πίνακες Ενεργοποίηση βέλτιστου, ορίζοντας την `Version` Προσθήκη σημαίας σε το `SystemProperties` του πίνακα ως εξής.

    //Enable optimistic concurrency by retrieving version
    todoTable.SystemProperties |= MobileServiceSystemProperties.Version;

Εκτός από την ενεργοποίηση του βέλτιστου, πρέπει επίσης να ενημερωθείτε το `MobileServicePreconditionFailedException<T>` εξαίρεση στον κώδικα κατά την κλήση [UpdateAsync].  Επίλυση της διένεξης, εφαρμόζοντας τη σωστή `version` για την ενημερωμένη εγγραφή και κλήση [UpdateAsync] με την επίλυση εγγραφή. Ο ακόλουθος κώδικας δείχνει πώς μπορείτε να επιλύσετε μια διένεξη εγγραφής εντοπίζονται μία φορά:

    private async void UpdateToDoItem(TodoItem item)
    {
        MobileServicePreconditionFailedException<TodoItem> exception = null;

        try
        {
            //update at the remote table
            await todoTable.UpdateAsync(item);
        }
        catch (MobileServicePreconditionFailedException<TodoItem> writeException)
        {
            exception = writeException;
        }

        if (exception != null)
        {
            // Conflict detected, the item has changed since the last query
            // Resolve the conflict between the local and server item
            await ResolveConflict(item, exception.Item);
        }
    }


    private async Task ResolveConflict(TodoItem localItem, TodoItem serverItem)
    {
        //Ask user to choose the resoltion between versions
        MessageDialog msgDialog = new MessageDialog(
            String.Format("Server Text: \"{0}\" \nLocal Text: \"{1}\"\n",
            serverItem.Text, localItem.Text),
            "CONFLICT DETECTED - Select a resolution:");

        UICommand localBtn = new UICommand("Commit Local Text");
        UICommand ServerBtn = new UICommand("Leave Server Text");
        msgDialog.Commands.Add(localBtn);
        msgDialog.Commands.Add(ServerBtn);

        localBtn.Invoked = async (IUICommand command) =>
        {
            // To resolve the conflict, update the version of the item being committed. Otherwise, you will keep
            // catching a MobileServicePreConditionFailedException.
            localItem.Version = serverItem.Version;

            // Updating recursively here just in case another change happened while the user was making a decision
            UpdateToDoItem(localItem);
        };

        ServerBtn.Invoked = async (IUICommand command) =>
        {
            RefreshTodoItems();
        };

        await msgDialog.ShowAsync();
    }

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Δεδομένων συγχρονισμού χωρίς σύνδεση σε εφαρμογές του Mobile Azure] .

###<a name="binding"></a>Πώς μπορείτε να: εφαρμογές του Mobile σύνδεση δεδομένων σε ένα περιβάλλον εργασίας χρήστη των Windows

Αυτή η ενότητα δείχνει πώς μπορείτε να εμφανίσετε δεδομένα που επιστρέφονται αντικείμενα χρησιμοποιώντας στοιχεία περιβάλλοντος εργασίας Χρήστη σε μια εφαρμογή για Windows.  Το παρακάτω παράδειγμα κώδικα συνδέει με την προέλευση της λίστας με ένα ερώτημα για τα στοιχεία δεν ολοκληρώθηκε. Το [MobileServiceCollection] δημιουργεί μια κινητή εφαρμογές αναγνωρίζουν συλλογή σύνδεσης.

    // This query filters out completed TodoItems.
    MobileServiceCollection<TodoItem, TodoItem> items = await todoTable
        .Where(todoItem => todoItem.Complete == false)
        .ToCollectionAsync();

    // itemsControl is an IEnumerable that could be bound to a UI list control
    IEnumerable itemsControl  = items;

    // Bind this to a ListBox
    ListBox lb = new ListBox();
    lb.ItemsSource = items;

Ορισμένα στοιχεία ελέγχου στο χρόνο εκτέλεσης διαχειριζόμενων υποστηρίζει ένα περιβάλλον εργασίας που ονομάζεται [ISupportIncrementalLoading]. Αυτή η διασύνδεση επιτρέπει στοιχεία ελέγχου για να ζητήσετε επιπλέον δεδομένων όταν ο χρήστης κάνει κύλιση. Υπάρχει ενσωματωμένη υποστήριξη για αυτήν τη διασύνδεση για καθολική εφαρμογές των Windows μέσω του [MobileServiceIncrementalLoadingCollection], που αυτόματα χειρίζεται τις κλήσεις από τα στοιχεία ελέγχου. Χρήση `MobileServiceIncrementalLoadingCollection` στις εφαρμογές των Windows ως εξής:

    MobileServiceIncrementalLoadingCollection<TodoItem,TodoItem> items;
    items = todoTable.Where(todoItem => todoItem.Complete == false).ToIncrementalLoadingCollection();

    ListBox lb = new ListBox();
    lb.ItemsSource = items;

Για να χρησιμοποιήσετε τη νέα συλλογή σε Windows Phone 8 και "Silverlight" οι εφαρμογές, χρησιμοποιήστε το `ToCollection` επέκταση μεθόδους στις `IMobileServiceTableQuery<T>` και `IMobileServiceTable<T>`. Για να φορτώσετε δεδομένα, καλέστε `LoadMoreItemsAsync()`.

    MobileServiceCollection<TodoItem, TodoItem> items = todoTable.Where(todoItem => todoItem.Complete==false).ToCollection();
    await items.LoadMoreItemsAsync();

Όταν χρησιμοποιείτε τη συλλογή που δημιουργούνται με την κλήση `ToCollectionAsync` ή `ToCollection`, λαμβάνετε μια συλλογή που μπορεί να συνδεθεί σε στοιχεία ελέγχου του περιβάλλοντος εργασίας Χρήστη.  Αυτή η συλλογή είναι υπόψη σελιδοποίησης.  Επειδή η συλλογή γίνεται φόρτωση δεδομένων από το δίκτυο, μερικές φορές η φόρτωση αποτυγχάνει. Για να χειριστείτε τέτοιες αποτυχίες, παρακάμπτουν το `OnException` μέθοδος σε `MobileServiceIncrementalLoadingCollection` να χειρίζεται τις εξαιρέσεις που προκύπτει από κλήσεις σε `LoadMoreItemsAsync`.

Εξετάστε το ενδεχόμενο αν ο πίνακας έχει πολλά πεδία, αλλά θέλετε να εμφανίσετε ορισμένες από αυτές σε το στοιχείο ελέγχου. Μπορείτε να χρησιμοποιήσετε τις οδηγίες στην προηγούμενη ενότητα "[επιλογή συγκεκριμένες στήλες](#selecting)" για να επιλέξετε συγκεκριμένες στήλες για να εμφανίσετε το περιβάλλον εργασίας χρήστη.

###<a name="pagesize"></a>Αλλαγή μεγέθους σελίδας

Οι εφαρμογές του Mobile Azure επιστρέφει έως 50 στοιχεία ανά αίτηση από προεπιλογή.  Μπορείτε να αλλάξετε το μέγεθος του σελιδοποίησης, αυξάνοντας το μέγιστο μέγεθος σελίδας και του προγράμματος-πελάτη και διακομιστή.  Για να αυξήσετε το μέγεθος σελίδας που ζητήθηκε, καθορίστε `PullOptions` κατά τη χρήση `PullAsync()`:

    PullOptions pullOptions = new PullOptions
        {
            MaxPageSize = 100
        };

Υπό την προϋπόθεση ότι έχετε κάνει το `PageSize` ίση ή μεγαλύτερη από 100 μέσα στο διακομιστή, μια αίτηση επιστρέφει έως 100 στοιχεία.

##<a name="#offlinesync"></a>Εργασία με πίνακες για εργασία χωρίς σύνδεση

Εργασία χωρίς σύνδεση πίνακες χρησιμοποιούν ένα τοπικών δεδομένων με το κατάστημα SQLite για χρήση κατά την εργασία χωρίς σύνδεση.  Όλα πίνακα γίνονται λειτουργίες σε σχέση με την τοπική αποθήκευση SQLite αντί για το χώρο αποθήκευσης απομακρυσμένο διακομιστή.  Για να δημιουργήσετε έναν πίνακα χωρίς σύνδεση, προετοιμάστε πρώτα το έργο σας:

1. Στο Visual Studio, κάντε δεξί κλικ της λύσης > **Διαχείριση πακέτων NuGet για λύση...**, στη συνέχεια, αναζητήστε και εγκαταστήστε το πακέτο NuGet **Microsoft.Azure.Mobile.Client.SQLiteStore** για όλα τα έργα από τη λύση.

2. (Προαιρετικό) Για να υποστηρίζουν συσκευές με Windows, εγκαταστήστε ένα από τα εξής πακέτα χρόνου εκτέλεσης SQLite:

    * **Χρόνου εκτέλεσης Windows 8.1:** Εγκατάσταση [SQLite για τα Windows 8.1][3].
    * **Windows Phone 8.1:** Εγκατάσταση [SQLite για Windows Phone 8.1][4].
    * **Πλατφόρμα γενικής χρήσης των Windows** Εγκατάσταση [SQLite για την καθολική Windows Universal][5].

3. (Προαιρετικό). Για συσκευές με Windows, κάντε κλικ στην επιλογή **αναφορές** > **Προσθήκη αναφοράς...**, αναπτύξτε το φάκελο **των Windows** > **επεκτάσεις**, στη συνέχεια, ενεργοποίηση το κατάλληλο **SQLite για Windows** SDK μαζί με τη **Visual C++ 2013 Runtime για Windows** SDK.
    Τα ονόματα SQLite SDK λίγο ανάλογα με κάθε πλατφόρμα των Windows.

Να μπορέσετε να δημιουργήσετε μια αναφορά πίνακα, πρέπει να προετοιμαστεί του τοπικού χώρου αποθήκευσης:

    var store = new MobileServiceSQLiteStore(Constants.OfflineDbPath);
    store.DefineTable<TodoItem>();

    //Initializes the SyncContext using the default IMobileServiceSyncHandler.
    await this.client.SyncContext.InitializeAsync(store);

Προετοιμασία αποθήκευσης κανονικά συμβαίνει αμέσως μετά τη δημιουργία του προγράμματος-πελάτη.  Το **OfflineDbPath** πρέπει να είναι ένα όνομα αρχείου που είναι κατάλληλη για χρήση σε όλες τις πλατφόρμες που υποστηρίζετε.  Εάν η διαδρομή είναι μια πλήρως προσδιορισμένη διαδρομή (δηλαδή, ξεκινά με μια κάθετο), τότε χρησιμοποιείται αυτήν τη διαδρομή.  Εάν η διαδρομή δεν είναι πλήρως προσδιορισμένο, το αρχείο τοποθετείται σε μια θέση συγκεκριμένης πλατφόρμας.

* Για συσκευές iOS και Android, η προεπιλεγμένη διαδρομή είναι ο φάκελος "Προσωπικά αρχεία".
* Για συσκευές με Windows, η προεπιλεγμένη διαδρομή είναι ο φάκελος "AppData" συγκεκριμένη εφαρμογή.

Μπορείτε να αποκτήσετε μια αναφορά πίνακα χρησιμοποιώντας το `GetSyncTable<>` μέθοδο:

    var table = client.GetSyncTable<TodoItem>();

Δεν χρειάζεται για τον έλεγχο ταυτότητας για να χρησιμοποιήσετε έναν πίνακα χωρίς σύνδεση.  Χρειάζεστε μόνο για τον έλεγχο ταυτότητας όταν επικοινωνείτε με την υπηρεσία υποστήριξης.

###<a name="syncoffline"></a>Συγχρονισμός ενός πίνακα χωρίς σύνδεση

Εργασία χωρίς σύνδεση πινάκων δεν συγχρονίζονται με υπόβαθρο από προεπιλογή.  Συγχρονισμός χωρίζεται σε δύο στοιχεία.  Να πατήσετε αλλαγές ξεχωριστά από τη λήψη νέων στοιχείων.  Ακολουθεί μια μέθοδο τυπικές συγχρονισμού:

    public async Task SyncAsync()
    {
        ReadOnlyCollection<MobileServiceTableOperationError> syncErrors = null;

        try
        {
            await this.client.SyncContext.PushAsync();

            await this.todoTable.PullAsync(
                //The first parameter is a query name that is used internally by the client SDK to implement incremental sync.
                //Use a different query name for each unique query in your program
                "allTodoItems",
                this.todoTable.CreateQuery());
        }
        catch (MobileServicePushFailedException exc)
        {
            if (exc.PushResult != null)
            {
                syncErrors = exc.PushResult.Errors;
            }
        }

        // Simple error/conflict handling. A real application would handle the various errors like network conditions,
        // server conflicts and others via the IMobileServiceSyncHandler.
        if (syncErrors != null)
        {
            foreach (var error in syncErrors)
            {
                if (error.OperationKind == MobileServiceTableOperationKind.Update && error.Result != null)
                {
                    //Update failed, reverting to server's copy.
                    await error.CancelAndUpdateItemAsync(error.Result);
                }
                else
                {
                    // Discard local change.
                    await error.CancelAndDiscardItemAsync();
                }

                Debug.WriteLine(@"Error executing sync operation. Item: {0} ({1}). Operation discarded.", error.TableName, error.Item["id"]);
            }
        }
    }

Εάν το πρώτο όρισμα `PullAsync` είναι μηδέν, τότε δεν χρησιμοποιείται αυξάνονται συγχρονισμού.  Κάθε λειτουργίας συγχρονισμού ανακτά όλες τις εγγραφές.

Το SDK εκτελεί ένα έμμεσο `PushAsync()` πριν από την έλξη εγγραφές.

Χειρισμός διένεξη συμβαίνει σε μια `PullAsync()` μέθοδο.  Μπορείτε να ασχοληθείτε με τις διενέξεις με τον ίδιο τρόπο όπως πίνακες online.  Η διένεξη παράγεται όταν `PullAsync()` ονομάζεται αντί κατά την εισαγωγή, ενημέρωση ή διαγραφή. Εάν προκύψει πολλές διενέξεις, ομαδοποιούνται σε ένα μεμονωμένο MobileServicePushFailedException.  Λαβή κάθε αποτυχία ξεχωριστά.

##<a name="#customapi"></a>Εργασία με ένα προσαρμοσμένο API

Ένα προσαρμοσμένο API σάς επιτρέπει να ορίσετε προσαρμοσμένο τα τελικά σημεία που εκθέτουν λειτουργικότητα διακομιστή που δεν αντιστοίχιση με μια εισαγωγή, ενημέρωση, διαγραφή ή λειτουργία ανάγνωσης. Με τη χρήση μιας προσαρμοσμένης API, μπορείτε να έχετε περισσότερο έλεγχο μηνυμάτων, συμπεριλαμβανομένης της ανάγνωσης και τη ρύθμιση των κεφαλίδων μηνυμάτων HTTP και τον ορισμό μια μορφή σώμα μηνύματος εκτός από JSON.

Μπορείτε να καλέσετε μια προσαρμοσμένη API καλώντας μία από τις μεθόδους [InvokeApiAsync] του υπολογιστή-πελάτη. Για παράδειγμα, την ακόλουθη γραμμή κώδικα στέλνει μια αίτηση POST σε το **completeAll** API στον υπολογιστή στο παρασκήνιο:

    var result = await client.InvokeApiAsync<MarkAllResult>("completeAll", System.Net.Http.HttpMethod.Post, null);

Αυτήν τη φόρμα είναι η κλήση πληκτρολογήσατε μέθοδο και απαιτεί ότι ο επιστρεφόμενος τύπος **MarkAllResult** ορίζεται. Υποστηρίζονται τόσο πληκτρολογημένων και ένα μεθόδους.

##<a name="authentication"></a>Ο έλεγχος ταυτότητας χρηστών

Εφαρμογές του Mobile υποστηρίζει τον έλεγχο ταυτότητας και εξουσιοδότησης χρησιμοποιώντας διάφορες υπηρεσίες παροχής ταυτότητας εξωτερικών χρήστες της εφαρμογής: Facebook, Google, λογαριασμό Microsoft που διαθέτετε, Twitter και Azure Active Directory. Μπορείτε να ορίσετε δικαιώματα σε πίνακες για να περιορίσετε την πρόσβαση για συγκεκριμένες ενέργειες μόνο σε χρήστες με έλεγχο ταυτότητας. Μπορείτε επίσης να χρησιμοποιήσετε την ταυτότητα των εξουσιοδοτημένων χρηστών για την υλοποίηση των κανόνων εξουσιοδότησης σε δέσμες ενεργειών διακομιστή. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα το πρόγραμμα εκμάθησης [Προσθήκη ελέγχου ταυτότητας για την εφαρμογή σας].

Υποστηρίζονται δύο ροών ελέγχου ταυτότητας: _γίνεται από το πρόγραμμα-πελάτη_ και _διακομιστή Διαχείριση_ ροής. Τη ροή Διαχείριση διακομιστή παρέχει το πιο απλός εμπειρία ελέγχου ταυτότητας, όπως βασίζεται στο περιβάλλον εργασίας ελέγχου ταυτότητας web της υπηρεσίας παροχής. Η ροή διαχειριζόμενο από το πρόγραμμα-πελάτη επιτρέπει για βαθύτερη ενοποίηση με τις δυνατότητες ειδικά για τη συσκευή, όπως βασίζεται σε SDK ειδικά για τη συσκευή υπηρεσίας παροχής.

>[AZURE.NOTE] Συνιστάται να χρησιμοποιείτε μια ροή διαχειριζόμενο από το πρόγραμμα-πελάτη σε εφαρμογές σας παραγωγής.

Για να ρυθμίσετε τον έλεγχο ταυτότητας, πρέπει να καταχωρήσετε την εφαρμογή σας με μία ή περισσότερες υπηρεσίες παροχής ταυτότητας.  Η υπηρεσία παροχής ταυτότητας δημιουργεί ένα Αναγνωριστικό πελάτη και ένα μυστικό προγράμματος-πελάτη για την εφαρμογή σας.  Αυτές οι τιμές έχουν οριστεί, στη συνέχεια, στο υπόβαθρο σας για να ενεργοποιήσετε τον έλεγχο ταυτότητας/εξουσιοδότησης Azure εφαρμογής υπηρεσίας.  Για περισσότερες πληροφορίες, ακολουθήστε τις λεπτομερείς οδηγίες στην εκμάθηση [Προσθήκη ελέγχου ταυτότητας για την εφαρμογή σας].

Σε αυτήν την ενότητα, καλύπτονται τα ακόλουθα θέματα:

+ [Διαχείριση προγράμματος-πελάτη ελέγχου ταυτότητας](#clientflow)
+ [Διαχείριση διακομιστή ελέγχου ταυτότητας](#serverflow)
+ [Προσωρινή αποθήκευση το διακριτικό ελέγχου ταυτότητας](#caching)

###<a name="clientflow"></a>Διαχείριση προγράμματος-πελάτη ελέγχου ταυτότητας

Εφαρμογή σας μπορεί να ανεξάρτητη επικοινωνήστε με την υπηρεσία παροχής ταυτότητας και στη συνέχεια, καταχωρήστε το επιστρεφόμενο διακριτικό κατά τη σύνδεση με τον υπολογιστή στο παρασκήνιο. Αυτήν τη ροή προγράμματος-πελάτη σας επιτρέπει να παρέχουν μια μεμονωμένη εμπειρία καθολικής σύνδεσης για τους χρήστες ή για να ανακτήσετε δεδομένα επιπλέον χρηστών από την υπηρεσία παροχής ταυτότητας. Έλεγχος ταυτότητας ροής προγράμματος-πελάτη είναι προτιμώμενη με τη χρήση μιας ροής διακομιστή καθώς η υπηρεσία παροχής ταυτότητας SDK παρέχει μια πιο εγγενή αίσθηση UX και επιτρέπει την επιπλέον προσαρμογής.

Παραδείγματα παρέχονται για τα ακόλουθα μοτίβα ελέγχου ταυτότητας ροής προγράμματος-πελάτη:

+ [Βιβλιοθήκη ελέγχου ταυτότητας Active Directory](#adal)
+ [Facebook ή Google](#client-facebook)
+ [Live SDK](#client-livesdk)

#### <a name="adal"></a>Ο έλεγχος ταυτότητας χρηστών με τη βιβλιοθήκη ελέγχου ταυτότητας Active Directory

Μπορείτε να χρησιμοποιήσετε το ενεργό βιβλιοθήκη ελέγχου ταυτότητας καταλόγου (ADAL) για τον έλεγχο ταυτότητας χρήστη προετοιμασία από το πρόγραμμα-πελάτη με χρήση ελέγχου ταυτότητας Azure Active Directory.

1. Ρύθμιση παραμέτρων του στοιχείου διακομιστή εφαρμογής για κινητές συσκευές για AAD σύνδεση ακολουθώντας το πρόγραμμα εκμάθησης [πώς μπορείτε να ρυθμίσετε τις παραμέτρους της εφαρμογής υπηρεσίας για τη σύνδεση υπηρεσίας καταλόγου Active Directory] . Βεβαιωθείτε ότι για να ολοκληρώσετε το προαιρετικό βήμα την καταχώρηση μιας εφαρμογής εγγενές πρόγραμμα-πελάτη.
2. Στο Visual Studio ή Xamarin Studio, ανοίξτε το έργο σας και προσθέστε μια αναφορά σε το `Microsoft.IdentityModel.CLients.ActiveDirectory` NuGet πακέτου. Κατά την αναζήτηση, συμπεριλάβετε εκδόσεις προ-έκδοση.
3. Προσθέστε τον ακόλουθο κώδικα στην εφαρμογή σας, ανάλογα με την πλατφόρμα που χρησιμοποιείτε. Σε κάθε, κάντε τα εξής αντικατάστασης ελέγχου:

    * Αντικαταστήστε **Εισαγωγή-ΑΡΧΉ-ΕΔΏ** με το όνομα του μισθωτή με την οποία παρασχεθεί την εφαρμογή σας. Η μορφή πρέπει να είναι https://login.windows.net/contoso.onmicrosoft.com. Αυτή η τιμή μπορεί να αντιγραφεί από την καρτέλα τομέα στο σας Azure Active Directory στην [πύλη του Azure κλασική].
    * Αντικαταστήστε **Εισαγωγή-ΠΌΡΩΝ-ID-ΕΔΏ** με το Αναγνωριστικό υπολογιστή-πελάτη για την εφαρμογή για κινητές συσκευές παρασκηνίου. Μπορείτε να αποκτήσετε το Αναγνωριστικό υπολογιστή-πελάτη από την καρτέλα **για προχωρημένους** στην περιοχή **Azure Active Directory ρυθμίσεις** στην πύλη.
    * Αντικαταστήστε **Εισαγωγή-πρόγραμμα-ΠΕΛΆΤΗ-ID-ΕΔΏ** με το Αναγνωριστικό πελάτη που αντιγράψατε από την εφαρμογή εγγενές πρόγραμμα-πελάτη.
    * Αντικαταστήστε **Εισαγωγή-REDIRECT-URI-ΕΔΏ** με το τελικό σημείο _/.auth/login/done_ της τοποθεσίας σας, χρησιμοποιώντας το σχήμα HTTPS. Αυτή η τιμή πρέπει να είναι παρόμοια με _https://contoso.azurewebsites.net/.auth/login/done_.

    Ο κώδικας που χρειάζονται για κάθε πλατφόρμα ακολουθεί:

    **Windows:**

        private MobileServiceUser user;
        private async Task AuthenticateAsync()
        {
            string authority = "INSERT-AUTHORITY-HERE";
            string resourceId = "INSERT-RESOURCE-ID-HERE";
            string clientId = "INSERT-CLIENT-ID-HERE";
            string redirectUri = "INSERT-REDIRECT-URI-HERE";
            while (user == null)
            {
                string message;
                try
                {
                    AuthenticationContext ac = new AuthenticationContext(authority);
                    AuthenticationResult ar = await ac.AcquireTokenAsync(resourceId, clientId,
                        new Uri(redirectUri), new PlatformParameters(PromptBehavior.Auto, false) );
                    JObject payload = new JObject();
                    payload["access_token"] = ar.AccessToken;
                    user = await App.MobileService.LoginAsync(
                        MobileServiceAuthenticationProvider.WindowsAzureActiveDirectory, payload);
                    message = string.Format("You are now logged in - {0}", user.UserId);
                }
                catch (InvalidOperationException)
                {
                    message = "You must log in. Login Required";
                }
                var dialog = new MessageDialog(message);
                dialog.Commands.Add(new UICommand("OK"));
                await dialog.ShowAsync();
            }
        }

    **Xamarin.iOS**

        private MobileServiceUser user;
        private async Task AuthenticateAsync(UIViewController view)
        {
            string authority = "INSERT-AUTHORITY-HERE";
            string resourceId = "INSERT-RESOURCE-ID-HERE";
            string clientId = "INSERT-CLIENT-ID-HERE";
            string redirectUri = "INSERT-REDIRECT-URI-HERE";
            try
            {
                AuthenticationContext ac = new AuthenticationContext(authority);
                AuthenticationResult ar = await ac.AcquireTokenAsync(resourceId, clientId,
                    new Uri(redirectUri), new PlatformParameters(view));
                JObject payload = new JObject();
                payload["access_token"] = ar.AccessToken;
                user = await client.LoginAsync(
                    MobileServiceAuthenticationProvider.WindowsAzureActiveDirectory, payload);
            }
            catch (Exception ex)
            {
                Console.Error.WriteLine(@"ERROR - AUTHENTICATION FAILED {0}", ex.Message);
            }
        }

    **Xamarin.Android**

        private MobileServiceUser user;
        private async Task AuthenticateAsync()
        {
            string authority = "INSERT-AUTHORITY-HERE";
            string resourceId = "INSERT-RESOURCE-ID-HERE";
            string clientId = "INSERT-CLIENT-ID-HERE";
            string redirectUri = "INSERT-REDIRECT-URI-HERE";
            try
            {
                AuthenticationContext ac = new AuthenticationContext(authority);
                AuthenticationResult ar = await ac.AcquireTokenAsync(resourceId, clientId,
                    new Uri(redirectUri), new PlatformParameters(this));
                JObject payload = new JObject();
                payload["access_token"] = ar.AccessToken;
                user = await client.LoginAsync(
                    MobileServiceAuthenticationProvider.WindowsAzureActiveDirectory, payload);
            }
            catch (Exception ex)
            {
                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.SetMessage(ex.Message);
                builder.SetTitle("You must log in. Login Required");
                builder.Create().Show();
            }
        }
        protected override void OnActivityResult(int requestCode, Result resultCode, Intent data)
        {
            base.OnActivityResult(requestCode, resultCode, data);
            AuthenticationAgentContinuationHelper.SetAuthenticationAgentContinuationEventArgs(requestCode, resultCode, data);
        }

####<a name="client-facebook"></a>Καθολικής σύνδεσης με χρήση ενός διακριτικού από το Facebook ή Google

Μπορείτε να χρησιμοποιήσετε τη ροή προγράμματος-πελάτη, όπως φαίνεται στην αυτό τμήματος κώδικα για το Facebook ή το Google.

    var token = new JObject();
    // Replace access_token_value with actual value of your access token obtained
    // using the Facebook or Google SDK.
    token.Add("access_token", "access_token_value");

    private MobileServiceUser user;
    private async Task AuthenticateAsync()
    {
        while (user == null)
        {
            string message;
            try
            {
                // Change MobileServiceAuthenticationProvider.Facebook
                // to MobileServiceAuthenticationProvider.Google if using Google auth.
                user = await client.LoginAsync(MobileServiceAuthenticationProvider.Facebook, token);
                message = string.Format("You are now logged in - {0}", user.UserId);
            }
            catch (InvalidOperationException)
            {
                message = "You must log in. Login Required";
            }

            var dialog = new MessageDialog(message);
            dialog.Commands.Add(new UICommand("OK"));
            await dialog.ShowAsync();
        }
    }

####<a name="client-livesdk"></a>Μία μόνο είσοδο με λογαριασμό της Microsoft με το Live SDK

Για τον έλεγχο ταυτότητας χρηστών, πρέπει να καταχωρήσετε την εφαρμογή σας με το λογαριασμό Microsoft Κέντρο για προγραμματιστές. Ρύθμιση παραμέτρων τις λεπτομέρειες της εγγραφής στο σας παρασκηνίου εφαρμογή Mobile. Για να δημιουργήσετε μια καταχώρηση λογαριασμού Microsoft και συνδέστε τη με την εφαρμογή Mobile παρασκηνίου, ολοκληρώστε τα βήματα στο [μητρώο την εφαρμογή σας για να χρησιμοποιήσετε μια είσοδο με λογαριασμό Microsoft]. Εάν έχετε Windows Store και Windows Phone 8/Silverlight εκδόσεις της εφαρμογής, καταχωρήστε την έκδοση του Windows Store πρώτα.

Ο ακόλουθος κώδικας πραγματοποιεί έλεγχο ταυτότητας με χρήση Live SDK και χρησιμοποιεί το επιστρεφόμενο διακριτικό για εισόδου για την εφαρμογή Mobile παρασκηνίου.

    private LiveConnectSession session;
    //private static string clientId = "<microsoft-account-client-id>";
    private async System.Threading.Tasks.Task AuthenticateAsync()
    {

        // Get the URL the Mobile App backend.
        var serviceUrl = App.MobileService.ApplicationUri.AbsoluteUri;

        // Create the authentication client for Windows Store using the service URL.
        LiveAuthClient liveIdClient = new LiveAuthClient(serviceUrl);
        //// Create the authentication client for Windows Phone using the client ID of the registration.
        //LiveAuthClient liveIdClient = new LiveAuthClient(clientId);

        while (session == null)
        {
            // Request the authentication token from the Live authentication service.
            // The wl.basic scope should always be requested.  Other scopes can be added
            LiveLoginResult result = await liveIdClient.LoginAsync(new string[] { "wl.basic" });
            if (result.Status == LiveConnectSessionStatus.Connected)
            {
                session = result.Session;

                // Get information about the logged-in user.
                LiveConnectClient client = new LiveConnectClient(session);
                LiveOperationResult meResult = await client.GetAsync("me");

                // Use the Microsoft account auth token to sign in to App Service.
                MobileServiceUser loginResult = await App.MobileService
                    .LoginWithMicrosoftAccountAsync(result.Session.AuthenticationToken);

                // Display a personalized sign-in greeting.
                string title = string.Format("Welcome {0}!", meResult.Result["first_name"]);
                var message = string.Format("You are now logged in - {0}", loginResult.UserId);
                var dialog = new MessageDialog(message, title);
                dialog.Commands.Add(new UICommand("OK"));
                await dialog.ShowAsync();
            }
            else
            {
                session = null;
                var dialog = new MessageDialog("You must log in.", "Login Required");
                dialog.Commands.Add(new UICommand("OK"));
                await dialog.ShowAsync();
            }
        }
    }

Για περισσότερες πληροφορίες, ανατρέξτε στην τεκμηρίωση του [Windows Live SDK] .

###<a name="serverflow"></a>Διαχείριση διακομιστή ελέγχου ταυτότητας

Αφού έχετε καταχωρήσει την υπηρεσία παροχής ταυτότητας, καλέστε τη μέθοδο [LoginAsync] στο [MobileServiceClient] με την τιμή [MobileServiceAuthenticationProvider] της υπηρεσίας παροχής. Για παράδειγμα, ο ακόλουθος κώδικας προετοιμάζει ένα διακομιστή ροής είσοδος με χρήση του Facebook.

    private MobileServiceUser user;
    private async System.Threading.Tasks.Task Authenticate()
    {
        while (user == null)
        {
            string message;
            try
            {
                user = await client
                    .LoginAsync(MobileServiceAuthenticationProvider.Facebook);
                message =
                    string.Format("You are now logged in - {0}", user.UserId);
            }
            catch (InvalidOperationException)
            {
                message = "You must log in. Login Required";
            }

            var dialog = new MessageDialog(message);
            dialog.Commands.Add(new UICommand("OK"));
            await dialog.ShowAsync();
        }
    }

Εάν χρησιμοποιείτε μια υπηρεσία παροχής ταυτότητας εκτός από το Facebook, αλλάξτε την τιμή του [MobileServiceAuthenticationProvider] στην τιμή για την υπηρεσία παροχής.

Σε ένα διακομιστή ροής, Azure εφαρμογής υπηρεσίας διαχειρίζεται το διακριτικό ροής ελέγχου ταυτότητας, εμφανίζοντας τη σελίδα εισόδου της επιλεγμένης υπηρεσίας παροχής.  Όταν η επιστρέφει υπηρεσία παροχής ταυτότητας, Azure εφαρμογής υπηρεσίας δημιουργεί ένα διακριτικό ελέγχου ταυτότητας εφαρμογής υπηρεσίας. Η μέθοδος [LoginAsync] επιστρέφει μια [MobileServiceUser], το οποίο παρέχει τόσο το [αναγνωριστικό χρήστη] του χρήστη για τον έλεγχο ταυτότητας και [MobileServiceAuthenticationToken], ως διακριτικό web JSON (JWT). Αυτό το διακριτικό μπορεί να στο cache και να τα χρησιμοποιήσετε πάλι μέχρι τη λήξη. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [σε cache το διακριτικό έλεγχο ταυτότητας](#caching).

###<a name="caching"></a>Προσωρινή αποθήκευση το διακριτικό ελέγχου ταυτότητας

Σε ορισμένες περιπτώσεις, μπορεί να να αποφεύγεται η κλήση της μεθόδου σύνδεσης μετά την πρώτη επιτυχή έλεγχο ταυτότητας, αποθηκεύοντας το διακριτικό ελέγχου ταυτότητας από την υπηρεσία παροχής.  Εφαρμογές του Windows Store και UWP να χρησιμοποιήσετε [PasswordVault] για προσωρινή αποθήκευση του τρέχοντος διακριτικού ελέγχου ταυτότητας μετά από μια επιτυχημένη εισόδου, ως εξής:

    await client.LoginAsync(MobileServiceAuthenticationProvider.Facebook);

    PasswordVault vault = new PasswordVault();
    vault.Add(new PasswordCredential("Facebook", client.currentUser.UserId,
        client.currentUser.MobileServiceAuthenticationToken));

Η τιμή αναγνωριστικό χρήστη αποθηκεύεται ως το όνομα χρήστη από τα διαπιστευτήρια και το διακριτικό είναι αποθηκευμένο ως τον κωδικό πρόσβασης. Στην επόμενη φάσεις έναρξης, μπορείτε να ελέγξετε το **PasswordVault** για τα διαπιστευτήρια στο cache. Το παρακάτω παράδειγμα χρησιμοποιεί προσωρινά αποθηκευμένων διαπιστευτηρίων όταν βρεθούν και διαφορετικά προσπαθεί να ελέγχουν την ταυτότητα ξανά με υπολογιστή στο παρασκήνιο:

    // Try to retrieve stored credentials.
    var creds = vault.FindAllByResource("Facebook").FirstOrDefault();
    if (creds != null)
    {
        // Create the current user from the stored credentials.
        client.currentUser = new MobileServiceUser(creds.UserName);
        client.currentUser.MobileServiceAuthenticationToken =
            vault.Retrieve("Facebook", creds.UserName).Password;
    }
    else
    {
        // Regular login flow and cache the token as shown above.
    }

Κατά την αποσύνδεση ενός χρήστη, πρέπει επίσης να καταργήσετε το αποθηκευμένων διαπιστευτηρίων, ως εξής:

    client.Logout();
    vault.Remove(vault.Retrieve("Facebook", client.currentUser.UserId));

Εφαρμογές Xamarin Χρησιμοποιήστε [Xamarin.Auth] APIs για την ασφαλή αποθήκευση διαπιστευτηρίων σε ένα αντικείμενο **λογαριασμού** . Για ένα παράδειγμα της χρήσης αυτά τα API, δείτε το αρχείο κώδικα [AuthStore.cs] στη [φωτογραφία ContosoMoments κοινής χρήσης δείγματος].

Όταν χρησιμοποιείτε τον έλεγχο ταυτότητας διαχειριζόμενο από το πρόγραμμα-πελάτη, μπορείτε να αποθηκεύσετε προσωρινά επίσης το διακριτικό πρόσβασης που λαμβάνονται από την υπηρεσία παροχής, όπως το Facebook ή το Twitter. Αυτό το διακριτικό μπορεί να παρέχεται για να ζητήσετε έναν νέο κωδικό ελέγχου ταυτότητας από την πλευρά του διακομιστή, ως εξής:

    var token = new JObject();
    // Replace <your_access_token_value> with actual value of your access token
    token.Add("access_token", "<your_access_token_value>");

    // Authenticate using the access token.
    await client.LoginAsync(MobileServiceAuthenticationProvider.Facebook, token);

##<a name="pushnotifications"></a>Ειδοποιήσεις Push

Τα παρακάτω θέματα καλύπτουν τις ειδοποιήσεις Push:

* [Εγγραφή για τις ειδοποιήσεις Push](#register-for-push)
* [Αποκτήστε ένα πακέτο Windows Store αναγνωριστικό ΑΣΦΑΛΕΊΑΣ](#package-sid)
* [Καταχώρηση με τα πρότυπα πλατφόρμες](#register-xplat)

###<a name="register-for-push"></a>Πώς μπορείτε να: Register για τις ειδοποιήσεις Push

Το πρόγραμμα-πελάτη εφαρμογές του Mobile σάς επιτρέπει να εγγραφείτε για τις ειδοποιήσεις push με Azure ειδοποίηση διανομείς. Κατά την καταχώρηση, λαμβάνετε μια λαβή που λαμβάνετε από τη συγκεκριμένη πλατφόρμα Push ειδοποίηση υπηρεσίας (Γραμματίων). Στη συνέχεια, καταχωρήστε αυτήν την τιμή μαζί με τις ετικέτες κατά τη δημιουργία της καταχώρησης. Ο ακόλουθος κώδικας καταχωρεί της εφαρμογής Windows για τις ειδοποιήσεις push με την υπηρεσία ειδοποιήσεων των Windows (WNS):

    private async void InitNotificationsAsync()
    {
        // Request a push notification channel.
        var channel =await PushNotificationChannelManager.CreatePushNotificationChannelForApplicationAsync();

        // Register for notifications using the new channel.
        await MobileService.GetPush().RegisterNativeAsync(channel.Uri, null);
    }

Εάν ώθηση σε WNS, στη συνέχεια, θα πρέπει να [αποκτήσετε ένα πακέτο Windows Store αναγνωριστικό ΑΣΦΑΛΕΊΑΣ](#package-sid).  Για περισσότερες πληροφορίες σχετικά με εφαρμογές των Windows, συμπεριλαμβανομένου του τρόπου να εγγραφείτε για το πρότυπο εγγραφών, ανατρέξτε στο θέμα [Προσθήκη ειδοποιήσεων push για την εφαρμογή σας].

Δεν υποστηρίζεται η αίτηση ετικετών από το πρόγραμμα-πελάτη.  Ετικέτα αιτήσεις χάνονται σιωπηρά από την εγγραφή.
Εάν θέλετε να καταχωρήσετε τη συσκευή σας με ετικέτες, δημιουργήστε μια προσαρμοσμένη API που χρησιμοποιεί το API διανομείς ειδοποίηση για την εκτέλεση της εγγραφής για λογαριασμό σας.  [Καλέστε το API προσαρμοσμένη](#customapi) αντί για το `RegisterNativeAsync()` μέθοδο.

###<a name="package-sid"></a>Πώς μπορείτε να: αποκτήσετε ένα πακέτο Windows Store αναγνωριστικό ΑΣΦΑΛΕΊΑΣ

Ένα πακέτο αναγνωριστικό ΑΣΦΑΛΕΊΑΣ είναι απαραίτητη για την ενεργοποίηση ειδοποιήσεων push σε εφαρμογές του Windows Store.  Για να λάβετε ένα πακέτο αναγνωριστικό ΑΣΦΑΛΕΊΑΣ, καταχωρήστε την εφαρμογή σας με το Windows Store.

Για να αποκτήσετε αυτήν την τιμή:

1. Στην Εξερεύνηση λύσεων Visual Studio, κάντε δεξί κλικ στο έργο εφαρμογή Windows Store, κάντε κλικ στην επιλογή **Αποθήκευση** > **Συσχετίσετε εφαρμογή με το χώρο αποθήκευσης...**.
2. Στον οδηγό, κάντε κλικ στο κουμπί **Επόμενο**, συνδεθείτε με το λογαριασμό Microsoft, πληκτρολογήστε ένα όνομα για την εφαρμογή σας στο **απόθεμα ένα νέο όνομα εφαρμογής**και κατόπιν κάντε κλικ στην επιλογή **απόθεμα**.
3. Μετά την καταχώρηση εφαρμογής δημιουργήθηκε με επιτυχία, επιλέξτε το όνομα της εφαρμογής, κάντε κλικ στο κουμπί **Επόμενο**και, στη συνέχεια, κάντε κλικ στην επιλογή **Συσχέτιση**.
4. Συνδεθείτε με το [Κέντρο ανάπτυξης των Windows] χρησιμοποιώντας το λογαριασμό της Microsoft. Στην περιοχή **οι εφαρμογές μου**, κάντε κλικ στην καταχώρηση εφαρμογής που δημιουργήσατε.
5. Κάντε κλικ στην επιλογή **Διαχείριση εφαρμογών** > **ταυτότητας εφαρμογής**και, στη συνέχεια, κάντε κύλιση προς τα κάτω για να βρείτε το **Αναγνωριστικό πακέτου ΑΣΦΑΛΕΊΑΣ**.

Πολλές χρήσεις του πακέτου αναγνωριστικό ΑΣΦΑΛΕΊΑΣ χειριστείτε την ως URI, οπότε πρέπει να χρησιμοποιήσετε _ms-app: / /_ ως το συνδυασμό. Σημειώστε την έκδοση του πακέτου σας αναγνωριστικό ΑΣΦΑΛΕΊΑΣ μορφοποιημένη συνδέοντας αυτήν την τιμή ως πρόθεμα.

Εφαρμογές Xamarin απαιτούν ορισμένες επιπλέον κώδικα για να μπορέσετε να καταχωρήσετε μια εφαρμογή που εκτελείται στο iOS ή Android πλατφόρμες. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα για την πλατφόρμα σας:

* [Xamarin.Android](app-service-mobile-xamarin-android-get-started-push.md#add-push)
* [Xamarin.iOS](app-service-mobile-xamarin-ios-get-started-push.md#add-push)

###<a name="register-xplat"></a>Πώς μπορείτε να: Register push πρότυπα για την αποστολή ειδοποιήσεων πλατφόρμες

Για να καταχωρήσετε τα πρότυπα, χρησιμοποιήστε το `RegisterAsync()` μέθοδο με τα πρότυπα, ως εξής:

        JObject templates = myTemplates();
        MobileService.GetPush().RegisterAsync(channel.Uri, templates);

Τα πρότυπά σας θα πρέπει να είναι `JObject` τύπων και μπορούν να περιέχουν πολλά πρότυπα με την εξής μορφή JSON:

        public JObject myTemplates()
        {
            // single template for Windows Notification Service toast
            var template = "<toast><visual><binding template=\"ToastText01\"><text id=\"1\">$(message)</text></binding></visual></toast>";

            var templates = new JObject
            {
                ["generic-message"] = new JObject
                {
                    ["body"] = template,
                    ["headers"] = new JObject
                    {
                        ["X-WNS-Type"] = "wns/toast"
                    },
                    ["tags"] = new JArray()
                },
                ["more-templates"] = new JObject {...}
            };
            return templates;
        }

Η μέθοδος **RegisterAsync()** δέχεται επίσης δευτερεύοντα πλακίδια:

        MobileService.GetPush().RegisterAsync(string channelUri, JObject templates, JObject secondaryTiles);

Όλες οι ετικέτες αφαιρούνται δεν βρίσκομαι στον υπολογιστή κατά την εγγραφή για την ασφάλεια. Για να προσθέσετε ετικέτες σε εγκαταστάσεις ή πρότυπα στο εσωτερικό των εγκαταστάσεων, ανατρέξτε στο θέμα [με το διακομιστή υποστήριξης .NET SDK για εφαρμογές του Mobile Azure].

Για να στείλετε ειδοποιήσεις με χρήση αυτών των καταχωρημένων προτύπων, ανατρέξτε τα [APIs διανομείς ειδοποίησης].

##<a name="misc"></a>Διάφορα θέματα

###<a name="errors"></a>Πώς μπορείτε να: χειρισμού σφαλμάτων

Όταν παρουσιάζεται σφάλμα σε υπολογιστή στο παρασκήνιο, το πρόγραμμα-πελάτη ανάγει SDK μια `MobileServiceInvalidOperationException`.  Το παρακάτω παράδειγμα εμφανίζει τον τρόπο χειρισμού των μια εξαίρεση που επιστρέφεται από υπολογιστή στο παρασκήνιο:

    private async void InsertTodoItem(TodoItem todoItem)
    {
        // This code inserts a new TodoItem into the database. When the operation completes
        // and App Service has assigned an Id, the item is added to the CollectionView
        try
        {
            await todoTable.InsertAsync(todoItem);
            items.Add(todoItem);
        }
        catch (MobileServiceInvalidOperationException e)
        {
            // Handle error
        }
    }

Μπορείτε να βρείτε ένα άλλο παράδειγμα του Αντιμετώπιση συνθήκες σφάλματος στο [Δείγμα αρχεία εφαρμογών Mobile]. Το παράδειγμα [LoggingHandler] παρέχει μια καταγραφή πληρεξουσίου πρόγραμμα χειρισμού (παρακάτω) για να συνδεθείτε τις αιτήσεις που γίνονται στον υπολογιστή στο παρασκήνιο.

###<a name="headers"></a>Πώς μπορείτε να: Προσαρμογή αίτηση κεφαλίδες

Για να υποστηρίξει το σενάριό σας συγκεκριμένη εφαρμογή, ίσως χρειαστεί να προσαρμόσετε την επικοινωνία με την εφαρμογή Mobile παρασκηνίου. Για παράδειγμα, μπορεί να θέλετε να Προσθήκη προσαρμοσμένης κεφαλίδας σε κάθε εξερχόμενη αίτηση ή ακόμα και τις απαντήσεις τους κωδικούς κατάστασης. Μπορείτε να χρησιμοποιήσετε ένα προσαρμοσμένο [DelegatingHandler], όπως στο ακόλουθο παράδειγμα:

    public async Task CallClientWithHandler()
    {
        HttpResponseMessage[]
        MobileServiceClient client = new MobileServiceClient("AppUrl",
            new MyHandler()
            );
        IMobileServiceTable<TodoItem> todoTable = client.GetTable<TodoItem>();
        var newItem = new TodoItem { Text = "Hello world", Complete = false };
        await todoTable.InsertAsync(newItem);
    }

    public class MyHandler : DelegatingHandler
    {
        protected override async Task<HttpResponseMessage>
            SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
        {
            // Change the request-side here based on the HttpRequestMessage
            request.Headers.Add("x-my-header", "my value");

            // Do the request
            var response = await base.SendAsync(request, cancellationToken);

            // Change the response-side here based on the HttpResponseMessage

            // Return the modified response
            return response;
        }
    }


<!-- Anchors. -->


<!-- Images. -->

<!-- URLs. -->
[1]: app-service-mobile-windows-store-dotnet-get-started.md
[2]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md
[3]: app-service-mobile-node-backend-how-to-use-server-sdk.md
[4]: https://msdn.microsoft.com/en-us/library/azure/mt419521(v=azure.10).aspx
[5]: https://github.com/Azure-Samples
[6]: http://www.newtonsoft.com/json/help/html/Properties_T_Newtonsoft_Json_JsonPropertyAttribute.htm
[7]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#how-to-define-a-table-controller
[8]: app-service-mobile-node-backend-how-to-use-server-sdk.md#TableOperations
[9]: https://www.nuget.org/packages/Microsoft.Azure.Mobile.Client/
[10]: http://www.symbolsource.org/
[11]: http://www.symbolsource.org/Public/Wiki/Using
[12]: https://msdn.microsoft.com/en-us/library/azure/microsoft.windowsazure.mobileservices.mobileserviceclient(v=azure.10).aspx

[Προσθήκη ελέγχου ταυτότητας για την εφαρμογή σας]: app-service-mobile-windows-store-dotnet-get-started-users.md
[Συγχρονισμός δεδομένων χωρίς σύνδεση στο Azure εφαρμογές για κινητές συσκευές]: app-service-mobile-offline-data-sync.md
[Προσθέστε τις ειδοποιήσεις push για την εφαρμογή σας]: app-service-mobile-windows-store-dotnet-get-started-push.md
[Καταχώρηση την εφαρμογή σας για να χρησιμοποιήσετε μια είσοδο με λογαριασμό Microsoft]: app-service-mobile-how-to-configure-microsoft-authentication.md
[Πώς μπορείτε να ρυθμίσετε τις παραμέτρους της εφαρμογής υπηρεσίας για τη σύνδεση υπηρεσίας καταλόγου Active Directory]: app-service-mobile-how-to-configure-active-directory-authentication.md

<!-- Microsoft URLs. -->
[MobileServiceCollection]: https://msdn.microsoft.com/en-us/library/azure/dn250636(v=azure.10).aspx
[MobileServiceIncrementalLoadingCollection]: https://msdn.microsoft.com/en-us/library/azure/dn268408(v=azure.10).aspx
[MobileServiceAuthenticationProvider]: http://msdn.microsoft.com/library/windowsazure/microsoft.windowsazure.mobileservices.mobileserviceauthenticationprovider(v=azure.10).aspx
[MobileServiceUser]: http://msdn.microsoft.com/library/windowsazure/microsoft.windowsazure.mobileservices.mobileserviceuser(v=azure.10).aspx
[MobileServiceAuthenticationToken]: http://msdn.microsoft.com/library/windowsazure/microsoft.windowsazure.mobileservices.mobileserviceuser.mobileserviceauthenticationtoken(v=azure.10).aspx
[GetTable]: https://msdn.microsoft.com/en-us/library/azure/jj554275(v=azure.10).aspx
[δημιουργεί μια αναφορά σε ένα πίνακα]: https://msdn.microsoft.com/en-us/library/azure/jj554278(v=azure.10).aspx
[DeleteAsync]: https://msdn.microsoft.com/en-us/library/azure/dn296407(v=azure.10).aspx
[IncludeTotalCount]: https://msdn.microsoft.com/en-us/library/azure/dn250560(v=azure.10).aspx
[InsertAsync]: https://msdn.microsoft.com/en-us/library/azure/dn296400(v=azure.10).aspx
[InvokeApiAsync]: https://msdn.microsoft.com/en-us/library/azure/dn268343(v=azure.10).aspx
[LoginAsync]: https://msdn.microsoft.com/en-us/library/azure/dn296411(v=azure.10).aspx
[LookupAsync]: https://msdn.microsoft.com/en-us/library/azure/jj871654(v=azure.10).aspx
[OrderBy]: https://msdn.microsoft.com/en-us/library/azure/dn250572(v=azure.10).aspx
[OrderByDescending]: https://msdn.microsoft.com/en-us/library/azure/dn250568(v=azure.10).aspx
[ReadAsync]: https://msdn.microsoft.com/en-us/library/azure/mt691741(v=azure.10).aspx
[Λήψη]: https://msdn.microsoft.com/en-us/library/azure/dn250574(v=azure.10).aspx
[Επιλέξτε]: https://msdn.microsoft.com/en-us/library/azure/dn250569(v=azure.10).aspx
[Παράλειψη]: https://msdn.microsoft.com/en-us/library/azure/dn250573(v=azure.10).aspx
[UpdateAsync]: https://msdn.microsoft.com/en-us/library/azure/dn250536.(v=azure.10)aspx
[Αναγνωριστικό χρήστη]: http://msdn.microsoft.com/library/windowsazure/microsoft.windowsazure.mobileservices.mobileserviceuser.userid(v=azure.10).aspx
[Όπου]: https://msdn.microsoft.com/en-us/library/azure/dn250579(v=azure.10).aspx
[Πύλη του Azure]: https://portal.azure.com/
[Azure κλασική πύλη]: https://manage.windowsazure.com/
[EnableQueryAttribute]: https://msdn.microsoft.com/library/system.web.http.odata.enablequeryattribute.aspx
[Guid.NewGuid]: https://msdn.microsoft.com/en-us/library/system.guid.newguid(v=vs.110).aspx
[ISupportIncrementalLoading]: http://msdn.microsoft.com/library/windows/apps/Hh701916.aspx
[Κέντρο ανάπτυξης των Windows]: https://dev.windows.com/en-us/overview
[DelegatingHandler]: https://msdn.microsoft.com/library/system.net.http.delegatinghandler(v=vs.110).aspx
[SDK του Windows Live]: https://msdn.microsoft.com/en-us/library/bb404787.aspx
[PasswordVault]: http://msdn.microsoft.com/library/windows/apps/windows.security.credentials.passwordvault.aspx
[ProtectedData]: http://msdn.microsoft.com/library/system.security.cryptography.protecteddata%28VS.95%29.aspx
[Ειδοποίηση διανομείς APIs]: https://msdn.microsoft.com/library/azure/dn495101.aspx
[Δείγμα αρχεία εφαρμογών για κινητές συσκευές]: https://github.com/Azure-Samples/app-service-mobile-dotnet-todo-list-files
[LoggingHandler]: https://github.com/Azure-Samples/app-service-mobile-dotnet-todo-list-files/blob/master/src/client/MobileAppsFilesSample/Helpers/LoggingHandler.cs#L63

<!-- External URLs -->
[Τεκμηρίωση OData v3]: http://www.odata.org/documentation/odata-version-3-0/
[Fiddler]: http://www.telerik.com/fiddler
[Json.NET]: http://www.newtonsoft.com/json
[Xamarin.Auth]: https://components.xamarin.com/view/xamarin.auth/
[AuthStore.cs]: (https://github.com/azure-appservice-samples/ContosoMoments/blob/dev/src/Mobile/ContosoMoments/Helpers/AuthStore.cs)
[Δείγμα κοινής χρήσης φωτογραφιών ContosoMoments]: https://github.com/azure-appservice-samples/ContosoMoments