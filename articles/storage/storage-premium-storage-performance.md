<properties
    pageTitle="Χώρος αποθήκευσης Azure Premium: Σχεδίαση για απόδοση | Microsoft Azure"
    description="Σχεδίαση υψηλών επιδόσεων εφαρμογών χρησιμοποιώντας το χώρο αποθήκευσης Premium Azure. Χώρος αποθήκευσης Premium προσφέρει υποστήριξη υψηλών επιδόσεων, χαμηλής αδράνειας δίσκου για να/O-εντατική φόρτους εργασίας εκτελούνται σε εικονικές μηχανές Windows Azure."
    services="storage"
    documentationCenter="na"
    authors="aungoo-msft"
    manager="tadb"
    editor="tysonn" />

<tags
    ms.service="storage"
    ms.workload="storage"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="10/18/2016"
    ms.author="aungoo"/>

# <a name="azure-premium-storage-design-for-high-performance"></a>Χώρος αποθήκευσης Azure Premium: Σχεδίαση για υψηλές επιδόσεις

## <a name="overview"></a>Επισκόπηση  
Σε αυτό το άρθρο παρέχει οδηγίες για τη δημιουργία υψηλών επιδόσεων εφαρμογών χρησιμοποιώντας αποθήκευσης Premium Azure. Μπορείτε να χρησιμοποιήσετε τις οδηγίες που παρέχονται σε αυτό το έγγραφο σε συνδυασμό με επιδόσεων βέλτιστες πρακτικές που ισχύουν για τις τεχνολογίες που χρησιμοποιούνται από την εφαρμογή σας. Για την απεικόνιση τις κατευθυντήριες γραμμές, έχετε χρησιμοποιήσαμε SQL Server που εκτελείται στο χώρο αποθήκευσης Premium ως παράδειγμα σε όλο το έγγραφο.

Ενώ μας διεύθυνση σενάρια επιδόσεων για το επίπεδο του χώρου αποθήκευσης σε αυτό το άρθρο, θα πρέπει να βελτιστοποιήσετε το επίπεδο εφαρμογής. Για παράδειγμα, εάν φιλοξενείτε μια συστοιχία του SharePoint στο χώρο αποθήκευσης Premium Azure, μπορείτε να χρησιμοποιήσετε τα παραδείγματα SQL Server από αυτό το άρθρο για να βελτιστοποιήσετε το διακομιστή της βάσης δεδομένων. Επιπλέον, βελτιστοποίηση διακομιστή Web και διακομιστή εφαρμογών για να λάβετε περισσότερες τις επιδόσεις της συστοιχίας του SharePoint.

Σε αυτό το άρθρο θα σας βοηθήσει απαντήσεων ακολουθώντας συνήθεις ερωτήσεις σχετικά με τη βελτιστοποίηση των επιδόσεων εφαρμογή στο χώρο αποθήκευσης Premium Azure,

-   Πώς μπορώ να μετρήσετε την απόδοση της εφαρμογής;  
-   Για ποιο λόγο που δεν βλέπετε αναμενόμενο υψηλών επιδόσεων;  
-   Ποια παράγοντες επηρεάζουν τις επιδόσεις των εφαρμογών σε χώρο αποθήκευσης Premium;  
-   Πώς τους παρακάτω παράγοντες επηρεάζουν απόδοση της εφαρμογής σας στο χώρο αποθήκευσης Premium;  
-   Πώς να βελτιστοποιήσετε για IOP Προέλευσης, το εύρος ζώνης και λανθάνοντος χρόνου;  

Παρέχουμε αυτές τις οδηγίες ειδικά για το χώρο αποθήκευσης Premium επειδή φόρτους εργασίας εκτελούνται στο χώρο αποθήκευσης Premium είναι ιδιαίτερα ευαίσθητα επιδόσεων. Παρέχουμε παραδείγματα ανάλογα με την περίπτωση. Μπορείτε επίσης να εφαρμόσετε ορισμένες από αυτές τις οδηγίες για τις εφαρμογές που εκτελείται σε ΣΠΣ IaaS με τυπική αποθήκευσης δίσκων.

Προτού ξεκινήσετε, εάν είστε εξοικειωμένοι με το χώρο αποθήκευσης Premium, διαβάστε πρώτα το [αποθήκευσης Premium: υψηλών επιδόσεων χώρου αποθήκευσης για φόρτους εργασίας εικονική μηχανή Azure](storage-premium-storage.md) άρθρο και την [Κλιμάκωση αποθήκευσης Premium Azure και τους στόχους επιδόσεων](storage-scalability-targets.md#premium-storage-accounts).

## <a name="application-performance-indicators"></a>Δείκτες απόδοσης εφαρμογής  
Θα σας αξιολογεί εάν μια εφαρμογή εκτελεί καλά ή όχι χρησιμοποιώντας τις επιδόσεις όπως δείκτες, της ταχύτητας κίνησης μια εφαρμογή επεξεργάζεται μια αίτηση χρήστη, τον όγκο δεδομένων που επεξεργάζεται ανά πρόσκληση σε μια εφαρμογή του, πόσες αιτήσεις είναι μια εφαρμογή επεξεργασίας σε μια συγκεκριμένη χρονική περίοδο, πόσος χρόνος χρήστη πρέπει να περιμένουν για να αποσπάσετε μια απάντηση μετά την υποβολή αίτησης τους. Είναι το τεχνικούς όρους για αυτές τις ενδείξεις επιδόσεων, IOP Προέλευσης, μετάδοσης ή εύρους ζώνης και λανθάνων χρόνος.

Σε αυτήν την ενότητα, αναλύονται τα κοινά δείκτες απόδοσης στο περιβάλλον του χώρου αποθήκευσης Premium. Στην παρακάτω ενότητα, απαιτήσεις της εφαρμογής συλλογή, θα μάθετε πώς να μετρήσετε αυτές οι δείκτες απόδοσης για την εφαρμογή σας. Παρακάτω σε βελτιστοποίηση των επιδόσεων εφαρμογής, θα μάθετε σχετικά με τους παράγοντες που επηρεάζουν αυτές οι δείκτες απόδοσης και συστάσεις για να βελτιστοποιήσετε τους.

## <a name="iops"></a>IOP ΠΡΟΈΛΕΥΣΗΣ  
IOP Προέλευσης είναι ο αριθμός των αιτήσεων που στέλνει την εφαρμογή σας για το χώρο αποθήκευσης δίσκων ανά δευτερόλεπτο. Μια λειτουργία εισόδου/εξόδου μπορεί να διαβαστεί ή να γράψετε, διαδοχικές ή τυχαία. Εφαρμογές Συναλλαγής, όπως μια τοποθεσία Web ηλεκτρονικό κατάστημα λιανικής πώλησης πρέπει να επεξεργαστεί πολλές χρήστη ταυτόχρονες αιτήσεις αμέσως. Οι αιτήσεις χρήστη είναι εισαγωγή και ενημέρωση συναλλαγές εντατική βάσης δεδομένων, τα οποία πρέπει να επεξεργάζονται γρήγορα την εφαρμογή. Επομένως, οι εφαρμογές Συναλλαγής απαιτούν πολύ υψηλή IOP Προέλευσης. Οι εφαρμογές λαβή εκατομμύρια μικρό και τυχαίες αιτήσεις εισόδου/ΕΞΌΔΟΥ. Εάν έχετε μια εφαρμογή όπως, πρέπει να σχεδιάσετε την υποδομή εφαρμογής για να βελτιστοποιήσετε για IOP Προέλευσης. Στην ενότητα νεότερη έκδοση, *Βελτιστοποίηση των επιδόσεων εφαρμογής*, αναλύονται λεπτομερώς όλους τους παράγοντες που πρέπει να εξετάσετε για να λάβετε υψηλή IOP Προέλευσης.

Όταν συνδέετε ένα δίσκο premium χώρου αποθήκευσης για την υψηλή κλίμακα Εικονική Azure διατάξεις για εσάς ένα εγγυημένη αριθμό IOP Προέλευσης σύμφωνα με την προδιαγραφή δίσκου. Για παράδειγμα, ένα δίσκο P30 διατάξεις 5000 IOP Προέλευσης. Κάθε υψηλή κλίμακα μεγέθους Εικονική έχει επίσης ένα συγκεκριμένο όριο IOP Προέλευσης που αυτό μπορεί να διατηρήσει. Για παράδειγμα, μια τυπική Εικονική GS5 έχει 80.000 IOP Προέλευσης περιορισμός.

## <a name="throughput"></a>Μετάδοσης  
Μετάδοσης ή το εύρος ζώνης είναι η ποσότητα των δεδομένων που στέλνει την εφαρμογή σας για το χώρο αποθήκευσης δίσκων σε ένα καθορισμένο χρονικό διάστημα. Εάν η εφαρμογή σας εκτελεί λειτουργίες εισαγωγής/εξαγωγής με μεγάλα μεγέθη μονάδα εισόδου/ΕΞΌΔΟΥ, απαιτεί υψηλής απόδοσης. Τάση εφαρμογές αποθήκη δεδομένων για την έκδοση σάρωση εντατική λειτουργιών που πρόσβαση σε μεγάλες ποσότητες δεδομένων τη φορά και μαζικές λειτουργίες που εκτελούν πιο συχνά. Με άλλα λόγια, όπως εφαρμογές απαιτούν μεγαλύτερη ταχύτητα μετάδοσης. Εάν έχετε μια εφαρμογή όπως, πρέπει να σχεδιάσετε την υποδομή για να βελτιστοποιήσετε για μεταγωγή. Στην επόμενη ενότητα, αναλύονται λεπτομερώς τους παράγοντες που πρέπει να με ακρίβεια να επιτύχετε το εξής.

Όταν συνδέετε ένα δίσκο premium χώρου αποθήκευσης για μια κλίμακα υψηλή Εικονική Azure διατάξεις μετάδοσης σύμφωνα με αυτές τις προδιαγραφές δίσκου. Για παράδειγμα, ένα δίσκο P30 διατάξεις 200 MB ανά δεύτερο δίσκο μεταγωγή. Κάθε υψηλή κλίμακα μεγέθους Εικονική έχει επίσης ως συγκεκριμένο όριο μετάδοσης που αυτό μπορεί να διατηρήσει. Για παράδειγμα, τυπική Εικονική GS5 έχει μέγιστη απόδοση 2.000 MB ανά δευτερόλεπτο.

Υπάρχει μια σχέση μεταξύ μετάδοσης και IOP Προέλευσης όπως φαίνεται στην παρακάτω τύπο.

![](media/storage-premium-storage-performance/image1.png)

Επομένως, είναι σημαντικό να προσδιορίσετε τη βέλτιστη απόδοση και IOP Προέλευσης τιμές που απαιτεί την εφαρμογή σας. Καθώς προσπαθείτε να βελτιστοποιήσετε ένα, στο άλλο επίσης λαμβάνει επηρεάζονται. Στην επόμενη ενότητα, *Βελτιστοποίηση των επιδόσεων εφαρμογής*, αναλύονται σε περισσότερες λεπτομέρειες σχετικά με τη βελτιστοποίηση IOP Προέλευσης και απόδοση.

## <a name="latency"></a>Λανθάνων χρόνος  
Λανθάνων χρόνος είναι το χρόνο που χρειάζεται μια εφαρμογή για να λάβετε μια πρόσκληση σε μία μόνο, στείλτε την στον δίσκων αποθήκευσης και στείλετε την απάντηση στο πρόγραμμα-πελάτη. Αυτή είναι μια κρίσιμη μέτρηση των επιδόσεων μιας εφαρμογής εκτός από IOP Προέλευσης και απόδοση. Η αδράνεια των ένα δίσκο premium χώρου αποθήκευσης είναι το χρόνο που χρειάζεται να ανακτήσει τις πληροφορίες για μια αίτηση και να επικοινωνούν την επιστροφή στην εφαρμογή σας. Χώρος αποθήκευσης Premium παρέχει συνεπή χαμηλής των αδρανειών. Εάν ενεργοποιήσετε κεντρικού υπολογιστή μόνο για ανάγνωση σε cache premium δίσκων χώρου αποθήκευσης, μπορείτε να λάβετε πολύ κάτω λανθάνων χρόνος ανάγνωσης. Θα αναλύονται προσωρινή αποθήκευση στο δίσκο με περισσότερες λεπτομέρειες σε νεότερη έκδοση ενότητα στη *Βελτιστοποίηση των επιδόσεων εφαρμογής*.

Όταν θέλετε να βελτιστοποιήσετε την εφαρμογή σας για να λάβετε υψηλότερη IOP Προέλευσης και απόδοση, θα επηρεάσει την λανθάνων χρόνος της εφαρμογής σας. Μετά τη ρύθμιση των επιδόσεων εφαρμογής, αξιολόγηση πάντα το λανθάνων χρόνος της εφαρμογής για να αποφύγετε τη συμπεριφορά μη αναμενόμενο υψηλό λανθάνοντα χρόνο.

## <a name="gather-application-performance-requirements"></a>Συγκέντρωση απαιτήσεις απόδοσης της εφαρμογής  
Είναι το πρώτο βήμα κατά τη σχεδίαση του υψηλές επιδόσεις εφαρμογές που εκτελούνται στο χώρο αποθήκευσης Premium Azure, για να κατανοήσετε τις απαιτήσεις για τις επιδόσεις της εφαρμογής σας. Αφού συγκεντρώσετε απαιτήσεις για την απόδοση, μπορείτε να βελτιστοποιήσετε την εφαρμογή σας για να επιτύχετε την πιο βέλτιστη απόδοση.

Στην προηγούμενη ενότητα, θα σας επεξήγηση κοινές δείκτες επιδόσεων, IOP Προέλευσης, της απόδοσης και λανθάνοντος χρόνου. Πρέπει να προσδιορίσετε ποιες από αυτές τις ενδείξεις επιδόσεων είναι σημαντικές για την εφαρμογή σας για παράδοση της εμπειρίας χρήστη που θέλετε. Για παράδειγμα, υψηλή IOP Προέλευσης σημαντικότερα στοιχεία για τις εφαρμογές Συναλλαγής επεξεργασίας εκατομμύρια συναλλαγές σε μια δεύτερη. Ότι, υψηλής απόδοσης είναι σημαντικό για εφαρμογές αποθήκη δεδομένων επεξεργασίας μεγάλες ποσότητες δεδομένων σε μια δεύτερη. Πολύ χαμηλή λανθάνων χρόνος είναι κρίσιμης σημασίας για σε πραγματικό χρόνο εφαρμογές όπως το ζωντανό βίντεο ροής τοποθεσίες Web που διαθέτετε.

Στη συνέχεια, να μετρήσετε τις απαιτήσεις μέγιστη απόδοση της εφαρμογής σας σε όλη τη διάρκεια ζωής. Χρησιμοποιήστε τη λίστα ελέγχου δείγμα κάτω από το στοιχείο ως έναρξης. Εγγραφή τη μέγιστη απόδοση απαιτήσεις κατά την κανονική, Κορύφωση και μη εργάσιμες ώρες τελείες φόρτο εργασίας. Κατά τον προσδιορισμό απαιτήσεων για όλα τα επίπεδα φόρτους εργασίας, θα μπορείτε να προσδιορίσετε την απαίτηση συνολική απόδοση της εφαρμογής σας. Για παράδειγμα, το κανονικό φόρτο εργασίας τοποθεσίας Web σε ηλεκτρονικές θα είναι οι συναλλαγές εξυπηρετεί κατά τη διάρκεια περισσότερες ημερών ανά έτος. Το φόρτο εργασίας κορύφωσης της τοποθεσίας Web θα είναι οι συναλλαγές εξυπηρετεί κατά τη διάρκεια γιορτές ή συμβάντα ειδική πώλησης. Το φόρτο εργασίας κορύφωσης είναι συνήθως έμπειρους για ένα περιορισμένο χρονικό διάστημα, αλλά μπορεί να απαιτούν την εφαρμογή σας για να κλιμακωθεί δύο ή περισσότερες φορές την κανονική λειτουργία. Μάθετε το 50 εκατοστημόριο, 90 εκατοστημόριο και τις απαιτήσεις 99 εκατοστημόριο με παρεμβολή. Αυτό σας βοηθά φιλτράρισμα οποιαδήποτε ακραίες τιμές σε απαιτήσεις για τις επιδόσεις και μπορείτε να εστιάσετε προσπάθειες σας σχετικά με τη βελτιστοποίηση για τις σωστές τιμές.

**Λίστα ελέγχου απαιτήσεις επιδόσεων εφαρμογής**

| **Απαιτήσεις για την απόδοση** | **50 εκατοστημόριο** | **Συνάρτηση percentile 90** | **Συνάρτηση percentile 99** |
|---|---|---|---|
| MAX. Συναλλαγές ανά δευτερόλεπτο | | | |
| Λειτουργίες ανάγνωσης %            | | | |
| Λειτουργίες εγγραφής %           | | | |
| Λειτουργίες τυχαία %          | | | |
| Διαδοχικές λειτουργίες %      | | | |
| Μέγεθος αίτηση εισόδου/ΕΞΌΔΟΥ              | | | |
| Μέσος όρος μετάδοσης           | | | |
| MAX. Μετάδοσης              | | | |
| Min. Λανθάνων χρόνος                 | | | |
| Μέσο λανθάνοντα χρόνο              | | | |
| MAX. CPU                     | | | |
| Μέσος όρος CPU                  | | | |
| MAX. Μνήμη                  | | | |
| Μέσος όρος μνήμης               | | | |
| Βάθος ουράς                  | | | |

>**Σημαντική Σημείωση:**  
>Πρέπει να λάβετε υπόψη κλίμακας αυτούς τους αριθμούς που βασίζονται σε αναμενόμενη μελλοντική ανάπτυξη της εφαρμογής σας. Είναι καλή ιδέα για το σχεδιασμό για ανάπτυξη εκ των προτέρων, επειδή μπορεί να είναι δυσκολότερη για να αλλάξετε την υποδομή για τη βελτίωση της απόδοσης αργότερα.

Εάν έχετε μια υπάρχουσα εφαρμογή και θέλετε να μετακινήσετε στο χώρο αποθήκευσης Premium, δημιουργήστε πρώτα τη λίστα ελέγχου παραπάνω για την υπάρχουσα εφαρμογή. Στη συνέχεια, δημιουργήσετε ένα πρωτότυπο για την εφαρμογή στο χώρο αποθήκευσης Premium και να σχεδιάσετε την εφαρμογή που βασίζεται σε οδηγίες που περιγράφονται σε *Βελτιστοποίηση των επιδόσεων εφαρμογής* στην επόμενη ενότητα αυτού του εγγράφου. Στην επόμενη ενότητα περιγράφει τα εργαλεία που μπορείτε να χρησιμοποιήσετε για να συγκεντρώσετε τις μετρήσεις επιδόσεων.

Δημιουργία μιας λίστας ελέγχου παρόμοια με την υπάρχουσα εφαρμογή για το πρωτότυπο. Χρήση των εργαλείων Benchmarking για να προσομοιώσετε το φόρτο εργασίας και μέτρηση της απόδοσης σχετικά με την εφαρμογή πρωτοτύπου. Ανατρέξτε στην ενότητα σε [Benchmarking](#benchmarking) για να μάθετε περισσότερα. Κάνοντας, ώστε να μπορείτε να καθορίσετε αν Premium αποθήκευσης μπορεί να ταιριάζει με ή ξεπεράσει τις απαιτήσεις απόδοσης της εφαρμογής. Στη συνέχεια, μπορείτε να εφαρμόσετε τις ίδιες οδηγίες για την εφαρμογή σας παραγωγής.

### <a name="counters-to-measure-application-performance-requirements"></a>Μετρητές για τη μέτρηση της απόδοσης απαιτήσεις της εφαρμογής  
Ο καλύτερος τρόπος για να μετρήσετε απαιτήσεις για την απόδοση της εφαρμογής σας, είναι να χρησιμοποιήσετε εργαλεία εποπτείας που παρέχεται από το λειτουργικό σύστημα του διακομιστή. Μπορείτε να χρησιμοποιήσετε PerfMon για Windows και iostat για Linux. Αυτά τα εργαλεία καταγραφή μετρητές που αντιστοιχεί σε κάθε μέτρηση επεξήγηση στην παραπάνω ενότητα. Πρέπει να μπορείτε να καταγράψετε τις τιμές αυτών των μετρητών, όταν η εφαρμογή σας εκτελείται την κανονική, φόρτους εργασίας κορύφωσης και μη εργάσιμες ώρες.

Μετρητών παρακολούθησης επιδόσεων είναι διαθέσιμες για το πρόγραμμα επεξεργασίας, μνήμης και, κάθε λογικό δίσκο και το φυσικό δίσκο του διακομιστή σας. Όταν χρησιμοποιείτε δίσκων αποθήκευσης premium με μια Εικονική, οι μετρητές φυσικού δίσκου για κάθε δίσκο αποθήκευσης premium, και μετρητές λογικού δίσκου έχουν για κάθε ένταση δημιουργήθηκε των δίσκων αποθήκευσης premium. Πρέπει να καταγράψετε τις τιμές για το δίσκων που φιλοξενούν το φόρτο εργασίας εφαρμογής. Εάν υπάρχει μια αντιστοίχιση ένα προς ένα μεταξύ λογική και φυσική δίσκων, μπορείτε να ανατρέξετε μετρητές φυσικού δίσκου; Διαφορετικά αναφέρονται οι μετρητές λογικού δίσκου. Στην Linux, η εντολή iostat δημιουργεί μια αναφορά χρήσης CPU και του δίσκου. Η αναφορά χρήσης δίσκου παρέχει στατιστικά στοιχεία ανά φυσική συσκευή ή διαμερίσματα. Εάν έχετε ένα διακομιστή βάσης δεδομένων με τα δεδομένα και να συνδεθείτε σε ξεχωριστή δίσκων, συλλογή αυτών των δεδομένων για δύο δίσκων. Παρακάτω πίνακα περιγράφονται μετρητές για δίσκων, επεξεργαστή και μνήμης:

| Μετρητής | Περιγραφή | PerfMon | Iostat |
|---|---|---|---|
| **IOP Προέλευσης ή συναλλαγές ανά δευτερόλεπτο** | Αριθμός των αιτήσεων εισόδου εκδοθεί στο δίσκο χώρου αποθήκευσης ανά δευτερόλεπτο. | Ανάγνωση δίσκου/δευτερόλεπτο <br> Εγγραφές δίσκου/δευτερόλεπτο | tps <br> r/s <br> w/s |
| **Δίσκο ανάγνωσης και εγγραφής** | % του διαβάζει και λειτουργίες που εκτελούνται στο δίσκο εγγραφής. | % Χρόνου ανάγνωσης δίσκου <br> % Χρόνου εγγραφής δίσκου | r/s <br> w/s |
| **Μετάδοσης** | Ποσότητα δεδομένων ανάγνωση από ή εγγραφή σε δίσκο ανά δευτερόλεπτο. | Δίσκου byte ανάγνωσης/δευτερόλεπτο <br> Byte εγγραφής δίσκου/δευτερόλεπτο | kB_read/s <br> kB_wrtn/s |
| **Λανθάνων χρόνος** | Συνολικός χρόνος για να ολοκληρώσετε μια αίτηση εισόδου/ΕΞΌΔΟΥ δίσκου. | Μέσος όρος δίσκου/ανάγνωση <br> Μέσος όρος δίσκου/εγγραφή | αναμένει <br> svctm |
| **Μέγεθος εισόδου/ΕΞΌΔΟΥ** | Το μέγεθος της εισόδου/εξόδου αιτήσεις θέματα που πρέπει να δίσκων χώρου αποθήκευσης. | Μέσος όρος δίσκου byte/ανάγνωση <br> Byte μέσος όρος δίσκου/εγγραφή | avgrq sz |
| **Βάθος ουράς** | Αριθμός των εκκρεμών εισόδου/εξόδου αιτήσεων αναμονή για ανάγνωση φόρμας ή εγγραφή στο χώρο αποθήκευσης στο δίσκο. | Τρέχον μήκος ουράς δίσκου | avgqu sz |
| **MAX. Μνήμη** | Ποσό μνήμης που απαιτείται για την ομαλή εκτέλεση εφαρμογής | % Δεσμευμένου byte σε χρήση | Χρήση vmstat |
| **MAX. CPU** | Ποσό CPU που απαιτείται για την ομαλή εκτέλεση της εφαρμογής | % Χρόνος επεξεργασίας | % util |

Μάθετε περισσότερα σχετικά με [iostat](http://linuxcommand.org/man_pages/iostat1.html) και [PerfMon](https://msdn.microsoft.com/library/aa645516.aspx).


## <a name="optimizing-application-performance"></a>Βελτιστοποίηση των επιδόσεων εφαρμογής  
Οι βασικοί παράγοντες που επηρεάζουν τις επιδόσεις μιας εφαρμογής που εκτελείται σε Premium χώρου αποθήκευσης είναι φύση της εισόδου/ΕΞΌΔΟΥ αιτήσεις, Εικονική μέγεθος, το μέγεθος του δίσκου, αριθμός δίσκων, προσωρινή αποθήκευση στο δίσκο, Multithreading και βάθος ουράς. Μπορείτε να ελέγξετε ορισμένων από τους παρακάτω παράγοντες με knobs που παρέχεται από το σύστημα. Οι περισσότερες εφαρμογές ενδέχεται να σας παρέχει μια επιλογή για να αλλάξετε το μέγεθος εισόδου/ΕΞΌΔΟΥ και βάθος ουράς απευθείας. Για παράδειγμα, εάν χρησιμοποιείτε SQL Server, δεν μπορείτε να επιλέξετε το μέγεθος και ουρά βάθος εισόδου/ΕΞΌΔΟΥ. SQL Server επιλέγει το βέλτιστη εισόδου/ΕΞΌΔΟΥ τιμές μεγέθους και ουρά βάθους για να λάβετε τις περισσότερες επιδόσεις. Είναι σημαντικό να κατανοήσετε τις συνέπειες των δύο τύπων παράγοντες σε την απόδοση της εφαρμογής, ώστε να μπορούν να προμηθεύσουν κατάλληλους πόρους ώστε να ανταποκρίνεται στις ανάγκες επιδόσεων.

Σε αυτήν την ενότητα, ανατρέξτε στο λίστας απαιτήσεις εφαρμογής που έχετε δημιουργήσει, να εντοπίζετε πόσο χρειάζεστε για να βελτιστοποιήσετε την απόδοση της εφαρμογής. Βάση που, θα μπορείτε να προσδιορίσετε ποια παράγοντες από αυτήν την ενότητα, θα πρέπει να με ακρίβεια. Για να παρίσταται την επίδραση της κάθε παραγόντων στις επιδόσεις της εφαρμογής σας, εκτελέστε πρωτοποριακά εργαλεία στην εγκατάσταση της εφαρμογής σας. Ανατρέξτε στην ενότητα [Benchmarking](#Benchmarking) στο τέλος αυτού του άρθρου για τα βήματα για να εκτελέσετε κοινά εργαλεία πρωτοποριακά Windows και Linux ΣΠΣ.

### <a name="optimizing-iops-throughput-and-latency-at-a-glance"></a>Βελτιστοποίηση IOP Προέλευσης, της απόδοσης και λανθάνοντος χρόνου με μια ματιά  
Ο παρακάτω πίνακας συνοψίζει όλους τους παράγοντες επιδόσεων και τα βήματα για να βελτιστοποιήσετε IOP Προέλευσης, της απόδοσης και λανθάνοντος χρόνου. Οι ενότητες που ακολουθεί αυτήν τη σύνοψη θα περιγράφουν κάθε συντελεστής είναι πολύ περισσότερες βάθους.

| | **IOP ΠΡΟΈΛΕΥΣΗΣ** | **Μετάδοσης** | **Λανθάνων χρόνος** |
|---|---|---|---|
| **Παράδειγμα σεναρίου** | Για μεγάλες επιχειρήσεις Συναλλαγής εφαρμογής που απαιτεί πολύ υψηλή συναλλαγές ανά δεύτερο επιτόκιο.                                                                                                                                 | Εταιρικά δεδομένα αποταμίευσης εφαρμογή επεξεργασίας μεγάλες ποσότητες δεδομένων. | Κοντά σε πραγματικό χρόνο των εφαρμογών που απαιτεί άμεση απαντήσεων σε αιτήσεις χρήστη, όπως παιχνίδι στο δίκτυο. |
| Παράγοντες επιδόσεων  | | | |
| **Μέγεθος εισόδου/ΕΞΌΔΟΥ** | Μικρότερο μέγεθος εισόδου/ΕΞΌΔΟΥ αποδόσεις υψηλότερη IOP Προέλευσης.                                                                                                                                                                           | Μεγαλύτερο μέγεθος εισόδου/ΕΞΌΔΟΥ σε αποδόσεις υψηλότερη μεταγωγή. | |
| **Εικονική μέγεθος** | Χρησιμοποιήστε μια Εικονική μέγεθος που προσφέρει μεγαλύτερη από τις απαιτήσεις σας εφαρμογή IOP Προέλευσης. Ανατρέξτε στο θέμα Εικονική μεγέθη και τα όρια IOP Προέλευσης εδώ. | Χρησιμοποιήστε μια Εικονική μέγεθος με μεγαλύτερη από τις απαιτήσεις σας εφαρμογή όριο μετάδοσης. Ανατρέξτε στο θέμα Εικονική μεγέθη και τα όρια μετάδοσης εδώ. | Χρησιμοποιήστε μια Εικονική μέγεθος ότι προσφορές κλιμάκωση όρια μεγαλύτερη από τις απαιτήσεις εφαρμογής σας. Ανατρέξτε στο θέμα Εικονική μεγέθη και τα όρια εδώ. |
| **Μέγεθος δίσκου** | Χρησιμοποιήστε το μέγεθος του δίσκου που προσφέρει μεγαλύτερη από τις απαιτήσεις σας εφαρμογή IOP Προέλευσης. Ανατρέξτε στο θέμα μεγέθη δίσκου και τα όρια IOP Προέλευσης εδώ. | Χρησιμοποιήστε ένα δίσκο μέγεθος με όριο μετάδοσης μεγαλύτερη από τις απαιτήσεις εφαρμογής σας. Ανατρέξτε στο θέμα μεγέθη δίσκου και τα όρια μετάδοσης εδώ. | Χρησιμοποιήστε ένα μέγεθος δίσκου ότι προσφορές κλιμάκωση όρια μεγαλύτερη από τις απαιτήσεις εφαρμογής σας. Ανατρέξτε στο θέμα μεγέθη δίσκου και τα όρια εδώ. |
| **Εικονική και όρια κλίμακα δίσκο** | Όριο IOP Προέλευσης του μεγέθους Εικονική επιλέξει θα πρέπει να είναι μεγαλύτερο από σύνολο IOP Προέλευσης βάσει από δίσκων αποθήκευσης premium συνημμένη. | Όριο μετάδοσης του μεγέθους Εικονική επιλέξει θα πρέπει να είναι μεγαλύτερο από συνολικός αριθμός βάσει από premium δίσκων χώρου αποθήκευσης που έχουν επισυναφθεί σε αυτό. | Όρια κλίμακα του μεγέθους Εικονική επιλέξει πρέπει να είναι μεγαλύτερη από σύνολο κλίμακα όρια δίσκων αποθήκευσης συνημμένων premium. |
| **Προσωρινή αποθήκευση στο δίσκο** | Ενεργοποίηση μόνο για ανάγνωση Cache premium δίσκων χώρου αποθήκευσης με έντονη λειτουργίες ανάγνωσης για να λάβετε υψηλότερη ανάγνωση IOP Προέλευσης. | | Ενεργοποίηση μόνο για ανάγνωση Cache premium δίσκων χώρου αποθήκευσης με τις λειτουργίες του έντονη είστε έτοιμοι για να λάβετε πολύ χαμηλή ανάγνωση των αδρανειών. |
| **Επιμερισμό δίσκου** | Χρήση πολλών δίσκων και διαγραμμίσεων τους υπολογίζοντας το συνδυασμένο υψηλότερου IOP Προέλευσης και απόδοση ορίου. Σημειώστε ότι το συνδυασμένο όριο ανά Εικονική πρέπει να είναι υψηλότερα από τα συνδυασμένα όρια δίσκων συνημμένο premium. | |
| **Μέγεθος διαγράμμισης** | Μικρότερο μέγεθος διαγράμμισης για τυχαίες μικρές μοτίβο εισόδου/ΕΞΌΔΟΥ, εμφανίζεται σε εφαρμογές Συναλλαγής. Π.χ., χρησιμοποιήστε μέγεθος διαγράμμισης από 64KB εφαρμογή Συναλλαγής SQL Server. | Μεγαλύτερο μέγεθος διαγράμμισης για διαδοχικές μεγάλο μοτίβο εισόδου/ΕΞΌΔΟΥ εμφανίζεται σε εφαρμογές αποθήκη δεδομένων. Π.χ., χρησιμοποιήστε μέγεθος διαγράμμισης 256KB εφαρμογή αποθήκη δεδομένων του SQL Server. | |
| **Πολλαπλών νημάτων** | Χρήση πολλαπλών νημάτων για να προωθήσετε μεγαλύτερο αριθμό των αιτήσεων σε Premium χώρου αποθήκευσης που θα οδηγήσει σε υψηλότερες IOP Προέλευσης και απόδοση. Για παράδειγμα, στον SQL Server ορίστε μια υψηλή τιμή MAXDOP εκχώρηση περισσότερες CPU με τον SQL Server. | |
| **Βάθος ουράς** | Μεγαλύτερο βάθος ουράς αποδόσεις υψηλότερη IOP Προέλευσης. | Μεγαλύτερο βάθος ουράς αποδόσεις υψηλότερη μεταγωγή. | Μικρότερο βάθος ουράς αποδόσεις κάτω των αδρανειών. |

## <a name="nature-of-io-requests"></a>Φύση των αιτήσεων εισόδου/ΕΞΌΔΟΥ  
Μια αίτηση εισόδου/ΕΞΌΔΟΥ είναι μια μονάδα λειτουργίας εισόδου/εξόδου που θα εκτελέσετε την εφαρμογή σας. Εντοπισμός τη φύση των αιτήσεων εισόδου/ΕΞΌΔΟΥ, τυχαία ή συνεχόμενα, ανάγνωσης ή εγγραφής, μικρό ή μεγάλο, θα σας βοηθήσει να προσδιορίσετε απαιτήσεις για τις επιδόσεις της εφαρμογής σας. Είναι σημαντικό να κατανοήσετε τη φύση των αιτήσεων εισόδου/ΕΞΌΔΟΥ, για να κάνετε τη σωστή αποφάσεις κατά τη σχεδίαση του υποδομής εφαρμογών.

Μέγεθος εισόδου/ΕΞΌΔΟΥ είναι ένα από τα πιο σημαντικά στοιχεία. Το μέγεθος εισόδου/ΕΞΌΔΟΥ είναι το μέγεθος της πρόσκλησης σε λειτουργία εισόδου/εξόδου που δημιουργούνται από την εφαρμογή σας. Το μέγεθος εισόδου/ΕΞΌΔΟΥ έχει σημαντικές επιπτώσεις στις επιδόσεις ειδικά σε IOP Προέλευσης και το εύρος ζώνης που μπορεί να επιτύχετε την εφαρμογή. Ο ακόλουθος τύπος εμφανίζει τη σχέση μεταξύ IOP Προέλευσης, μέγεθος εισόδου/ΕΞΌΔΟΥ και το εύρος ζώνης/απόδοση.  
    ![](media/storage-premium-storage-performance/image1.png)

Ορισμένες εφαρμογές σάς επιτρέπουν να αλλάξετε το μέγεθος εισόδου/ΕΞΌΔΟΥ, ενώ ορισμένες εφαρμογές δεν. Για παράδειγμα, SQL Server καθορίζει τη βέλτιστη μέγεθος εισόδου/ΕΞΌΔΟΥ ίδια και δεν παρέχει στους χρήστες με οποιαδήποτε knobs για να την αλλάξετε. Από την άλλη πλευρά, Oracle παρέχει μια παράμετρο που ονομάζεται [DB\_ΑΠΟΚΛΕΙΣΜΌΣ\_ΜΈΓΕΘΟΣ](https://docs.oracle.com/cd/B19306_01/server.102/b14211/iodesign.htm#i28815) χρησιμοποιώντας που μπορείτε να ρυθμίσετε το μέγεθος της αίτησης εισόδου/εξόδου της βάσης δεδομένων.

Εάν χρησιμοποιείτε μια εφαρμογή, η οποία σας επιτρέπει να αλλάξετε το μέγεθος εισόδου/ΕΞΌΔΟΥ, χρησιμοποιήστε τις οδηγίες σε αυτό το άρθρο για να βελτιστοποιήσετε την απόδοση KPI που είναι πιο σχετικά με την εφαρμογή σας. Για παράδειγμα,

-   Μια εφαρμογή Συναλλαγής δημιουργεί εκατομμύρια μικρό και τυχαία αιτήσεις εισόδου/ΕΞΌΔΟΥ. Για να χειριστείτε αυτούς τους τύπους των αιτήσεων εισόδου/ΕΞΌΔΟΥ, πρέπει να σχεδιάσετε την υποδομή εφαρμογή σας για να λάβετε υψηλότερη IOP Προέλευσης.  
-   Δεδομένων αποταμίευσης εφαρμογή δημιουργεί μεγάλη και διαδοχικές αιτήσεις εισόδου/ΕΞΌΔΟΥ. Για να χειριστείτε αυτούς τους τύπους των αιτήσεων εισόδου/ΕΞΌΔΟΥ, πρέπει να σχεδιάσετε την υποδομή εφαρμογή σας για να λάβετε υψηλότερη εύρους ζώνης ή μετάδοσης.

Εάν χρησιμοποιείτε μια εφαρμογή, η οποία σας επιτρέπει να αλλάξετε το μέγεθος εισόδου/ΕΞΌΔΟΥ, χρησιμοποιήστε αυτό πρακτικός κανόνας για το μέγεθος εισόδου/ΕΞΌΔΟΥ, εκτός από άλλες οδηγίες επιδόσεων,

-   Μικρότερο μέγεθος εισόδου/ΕΞΌΔΟΥ για να λάβετε υψηλότερη IOP Προέλευσης. Για παράδειγμα, 8 KB για μια εφαρμογή Συναλλαγής.  
-   Μεγαλύτερο μέγεθος εισόδου/ΕΞΌΔΟΥ για να λάβετε υψηλότερη εύρους ζώνης/μεταγωγή. Για παράδειγμα, 1024 KB για μια εφαρμογή αποθήκη δεδομένων.

Ακολουθεί ένα παράδειγμα σε πώς μπορείτε να υπολογίσετε το IOP Προέλευσης και μετάδοσης/εύρους ζώνης για την εφαρμογή σας. Εξετάστε το ενδεχόμενο μια εφαρμογή χρησιμοποιώντας ένα δίσκο P30. Ο μέγιστος αριθμός IOP Προέλευσης και μετάδοσης/εύρους ζώνης ένα δίσκο P30 να επιτύχετε είναι 5000 IOP Προέλευσης και 200 MB ανά δευτερόλεπτο αντίστοιχα. Τώρα, εάν η εφαρμογή σας απαιτεί το μέγιστο IOP Προέλευσης από το δίσκο P30 και μπορείτε να χρησιμοποιήσετε ένα μικρότερο μέγεθος εισόδου/ΕΞΌΔΟΥ όπως 8 KB, το εύρος ζώνης που προκύπτει που θα μπορούν να λαμβάνουν είναι 40 MB ανά δευτερόλεπτο. Ωστόσο, εάν η εφαρμογή σας απαιτεί το μέγιστο μετάδοσης/εύρος ζώνης από δίσκο P30 και μπορείτε να χρησιμοποιήσετε ένα μεγαλύτερο μέγεθος εισόδου/ΕΞΌΔΟΥ όπως 1024 KB, την προκύπτουσα IOP Προέλευσης θα είναι μικρότερη, 200 IOP Προέλευσης. Επομένως, με ακρίβεια το μέγεθος εισόδου/ΕΞΌΔΟΥ ώστε να ικανοποιεί και τα δύο της εφαρμογής σας IOP Προέλευσης και μετάδοσης/εύρους ζώνης την απαίτηση. Παρακάτω πίνακας συνοψίζει τα διαφορετικά μεγέθη εισόδου/ΕΞΌΔΟΥ και τους αντίστοιχο IOP Προέλευσης και απόδοση για ένα δίσκο P30.

| **Απαίτηση εφαρμογής** | **Μέγεθος εισόδου/εξόδου** | **IOP ΠΡΟΈΛΕΥΣΗΣ** | **Μετάδοσης/εύρους ζώνης** |
|-----------------------------|--------------|----------|--------------------------|
| Max IOP Προέλευσης                    | 8 KB         | 5.000    | 40 MB ανά δευτερόλεπτο         |
| Max μετάδοσης              | 1024 KB      | 200      | 200 MB ανά δευτερόλεπτο        |
| Max μετάδοσης + υψηλή IOP Προέλευσης  | 64 KB        | 3.200    | 200 MB ανά δευτερόλεπτο        |
| Max IOP Προέλευσης + υψηλής απόδοσης  | 32 KB        | 5.000    | 160 MB ανά δευτερόλεπτο        |

Για να λάβετε IOP Προέλευσης και το εύρος ζώνης που είναι υψηλότερα από τη μέγιστη τιμή του δίσκου αποθήκευσης μία premium, χρησιμοποιήστε πολλές premium δίσκων διαγραμμίζονται μαζί. Για παράδειγμα, γραμμή δύο P30 δίσκων για να λάβετε μια συνδυαστική IOP Προέλευσης από 10.000 IOP Προέλευσης ή μια συνδυαστική απόδοση 400 MB ανά δευτερόλεπτο. Όπως εξηγείται στην επόμενη ενότητα, πρέπει να χρησιμοποιήσετε ένα μέγεθος Εικονική που υποστηρίζει το συνδυασμένο δίσκο IOP Προέλευσης και απόδοση.

>**Σημείωση:**  
>Καθώς αυξάνετε IOP Προέλευσης ή μετάδοσης στο άλλο επίσης αυξάνεται, βεβαιωθείτε ότι δεν πατήσετε μετάδοσης ή όρια IOP Προέλευσης του δίσκου ή Εικονική κατά αύξουσα είτε.

Να παρίσταται την επίδραση της μέγεθος εισόδου/ΕΞΌΔΟΥ στις επιδόσεις εφαρμογή, μπορείτε να εκτελέσετε πρωτοποριακά εργαλεία σε Εικονική και δίσκων. Δημιουργία πολλών εκτελείται δοκιμή και χρησιμοποιήστε διαφορετικό μέγεθος εισόδου/ΕΞΌΔΟΥ για κάθε εκτέλεση για να δείτε την επίδραση. Ανατρέξτε στην ενότητα [Benchmarking](#Benchmarking) στο τέλος αυτού του άρθρου για περισσότερες λεπτομέρειες.

## <a name="high-scale-vm-sizes"></a>Υψηλή κλίμακα Εικονική μεγέθη  
Όταν αρχίζετε να σχεδιάζετε μια εφαρμογή, μία από τις πρώτες ενέργειες για να το κάνετε είναι, επιλέξτε μια Εικονική για τη φιλοξενία της εφαρμογής σας. Χώρος αποθήκευσης Premium διατίθεται με μεγέθη υψηλή Εικονική κλίμακας που μπορούν να εκτελούν εφαρμογές που απαιτούν μεγαλύτερη power υπολογισμού και μια υψηλή στον τοπικό δίσκο επιδόσεις εισόδου/εξόδου. Αυτά τα ΣΠΣ παρέχουν ταχύτερους επεξεργαστές, ένα υψηλότερο λόγο μνήμης-πυρήνα και μια Solid-State μονάδα δίσκου (SSD) για το τοπικό δίσκο. Παραδείγματα υψηλή κλίμακα ΣΠΣ υποστήριξης Premium χώρου αποθήκευσης είναι η σειρά DS, DSv2 και GS ΣΠΣ.

Υψηλή ΣΠΣ κλίμακα είναι διαθέσιμες σε διάφορα μεγέθη με διαφορετικό αριθμό CPU πυρήνων, μνήμη, λειτουργικό σύστημα και το προσωρινό δίσκο μέγεθος. Κάθε μεγέθους Εικονική έχει επίσης μέγιστο αριθμό δίσκων δεδομένων που μπορείτε να επισυνάψετε την εικονική Μηχανή. Επομένως, το μέγεθος της επιλογής Εικονική θα επηρεάσει τον όγκο επεξεργασία, μνήμη, και χωρητικότητα αποθήκευσης είναι διαθέσιμη για την εφαρμογή σας. Επηρεάζει επίσης το υπολογισμού και κόστους χώρου αποθήκευσης. Για παράδειγμα, ακολουθούν οι προδιαγραφές από το μεγαλύτερο μέγεθος Εικονική σε μια σειρά DS, σειράς DSv2 και μια σειρά GS:

| Εικονική μέγεθος | CPU πυρήνων | Μνήμη | Εικονική δίσκου μεγέθη | MAX. δίσκων δεδομένων | Μέγεθος του cache | IOP ΠΡΟΈΛΕΥΣΗΣ | Όρια Cache εισόδου/ΕΞΌΔΟΥ εύρους ζώνης |
|---|---|---|---|---|---|---|---|
| Standard_DS14 | 16 | 112 GB | ΛΕΙΤΟΥΡΓΙΚΌ ΣΎΣΤΗΜΑ = 1023 GB <br> Τοπική SSD = 224 GB | 32 | 576 GB | 50.000 IOP ΠΡΟΈΛΕΥΣΗΣ <br> 512 MB ανά δευτερόλεπτο | 4.000 IOP Προέλευσης και 33 MB ανά δευτερόλεπτο |
| Standard_GS5 | 32 | 448 GB | ΛΕΙΤΟΥΡΓΙΚΌ ΣΎΣΤΗΜΑ = 1023 GB <br> Τοπική SSD = 896 GB | 64 | 4224 GB | 80.000 IOP ΠΡΟΈΛΕΥΣΗΣ <br> 2.000 MB ανά δευτερόλεπτο | 5.000 IOP Προέλευσης και 50 MB ανά δευτερόλεπτο |

Για να δείτε μια πλήρη λίστα με όλα τα διαθέσιμα μεγέθη Εικονική Azure, ανατρέξτε στο [Windows Εικονική μεγέθη](../virtual-machines/virtual-machines-windows-sizes.md) ή [μεγέθη Εικονική Linux](../virtual-machines/virtual-machines-linux-sizes.md). Επιλέξτε ένα μέγεθος Εικονική που μπορούν να πληροί και κλιμάκωση με τις απαιτήσεις σας επιδόσεων εφαρμογή που θέλετε. Εκτός από αυτό, λάβετε υπόψη ακολουθώντας σημαντικά θέματα κατά την επιλογή μεγέθη Εικονική.


*Όρια κλίμακας*  
Το μέγιστο όριο IOP Προέλευσης ανά Εικονική και ανά δίσκου είναι διαφορετικές και ανεξάρτητες μεταξύ τους. Βεβαιωθείτε ότι η εφαρμογή καθορίζει IOP Προέλευσης εντός των ορίων του Εικονική, καθώς και των δίσκων premium συνημμένη. Διαφορετικά, επιδόσεις εφαρμογής θα είναι η εμπειρία περιορισμού.

Ως παράδειγμα, ας υποθέσουμε ότι μια εφαρμογή απαίτηση είναι έως 4.000 IOP Προέλευσης. Για να επιτύχετε το εξής, προμήθεια ένα δίσκο P30 σε μια Εικονική DS1. Ο δίσκος P30 μπορούν να παρέχουν έως 5.000 IOP Προέλευσης. Ωστόσο, η Εικονική DS1 περιορίζεται στα 3,200 IOP Προέλευσης. Συνεπώς, οι επιδόσεις εφαρμογή θα περιορίζεται από το όριο Εικονική στο 3,200 IOP Προέλευσης και θα υπάρξει μειωμένη απόδοση. Για να αποφύγετε αυτήν την κατάσταση, επιλέξτε ένα μέγεθος Εικονική και δίσκου που θα και τα δύο πληροί τις απαιτήσεις της εφαρμογής.

*Κόστος λειτουργίας*  
Σε πολλές περιπτώσεις, είναι πιθανό ότι το συνολικό κόστος της λειτουργία χρησιμοποιώντας Premium χώρου αποθήκευσης είναι κάτω από τη χρήση τυπική χώρου αποθήκευσης.

Για παράδειγμα, εξετάστε το ενδεχόμενο μια εφαρμογή που απαιτεί 16.000 IOP Προέλευσης. Για να επιτύχετε αυτό επιδόσεων, θα χρειαστεί μια τυπική\_D14 Azure IaaS Εικονική, το οποίο μπορεί να σας δώσει μια μέγιστη IOP Προέλευσης του 16.000 χρήση 32 τυπική χώρο αποθήκευσης 1TB δίσκων. Κάθε δίσκο τυπική χώρο αποθήκευσης 1TB να επιτύχετε έως 500 IOP Προέλευσης. Εκτιμώμενη κόστους αυτό Εικονική ανά μήνα θα $1,570. Το μηνιαίο κόστος 32 δίσκων τυπική χώρου αποθήκευσης θα είναι $1,638. Το εκτιμώμενο συνολικό κόστος μηνιαία θα $3,208.

Ωστόσο, εάν φιλοξενούνται τα ίδια εφαρμογή στο χώρο αποθήκευσης Premium, θα χρειαστείτε ένα μικρότερο μέγεθος Εικονική και λιγότερες δίσκων αποθήκευσης premium, μειώνοντας έτσι το συνολικό κόστος. Μια τυπική\_DS13 Εικονική να πληρούν τις 16.000 απαιτήσεις IOP Προέλευσης χρησιμοποιώντας τέσσερις δίσκων P30. Η Εικονική DS13 έχει μια μέγιστη IOP Προέλευσης του 25,600 και κάθε P30 δίσκος έχει ένα μέγιστο IOP Προέλευσης του 5.000. Γενικά, αυτή η ρύθμιση παραμέτρων να επιτύχετε 5.000 x 4 = 20.000 IOP Προέλευσης. Εκτιμώμενη κόστους αυτό Εικονική ανά μήνα θα $1,003. Το μηνιαίο κόστος τέσσερις δίσκων αποθήκευσης premium P30 θα $544.34. Το εκτιμώμενο συνολικό κόστος μηνιαία θα $1,544.

Παρακάτω πίνακας συνοψίζει την κατανομή κόστος αυτό το σενάριο για τυπικές και Premium χώρου αποθήκευσης.

| | **Τυπική** | **Premium** |
|---|---|---|
| **Κόστος Εικονική ανά μήνα** | $1,570.58 (τυπική\_D14)   | $1,003.66 (τυπική\_DS13) |
| **Κόστος δίσκων ανά μήνα** | $1,638.40 (32 x 1 TB δίσκων) | $544.34 (4 x P30 δίσκων) |
| **Συνολικό κόστος ανά μήνα**  | $3,208.98 | $1,544.34 |

*Linux Distros*  

Με χώρο αποθήκευσης Premium Azure, θα λάβετε το ίδιο επίπεδο επιδόσεων για ΣΠΣ εκτελούν τα Windows και Linux. Υποστηρίζουμε πολλά μπορεί να είναι του Linux distros και μπορείτε να δείτε την πλήρη λίστα [εδώ](../virtual-machines/virtual-machines-linux-endorsed-distros.md). Είναι σημαντικό να λάβετε υπόψη ότι διαφορετικές distros είναι πιο κατάλληλος για διαφορετικούς τύπους φόρτους εργασίας. Θα δείτε τις επιδόσεις ανάλογα με το distro του φόρτου εργασίας εκτελείται σε διαφορετικά επίπεδα. Δοκιμή του distros Linux με την εφαρμογή σας και επιλέξτε αυτήν που ταιριάζει καλύτερα.


Κατά την εκτέλεση Linux με Premium αποθήκευσης, ελέγξτε τις πιο πρόσφατες ενημερώσεις σχετικά με τα απαιτούμενα προγράμματα οδήγησης για να βεβαιωθείτε ότι υψηλών επιδόσεων.

## <a name="premium-storage-disk-sizes"></a>Μεγέθη δίσκων Premium χώρου αποθήκευσης  
Χώρος αποθήκευσης Azure Premium παρέχει τρία μεγέθη δίσκου αυτήν τη στιγμή. Μέγεθος κάθε δίσκου έχει όριο διαφορετική κλίμακα για IOP Προέλευσης, το εύρος ζώνης και χώρου αποθήκευσης. Επιλέξτε στο σωστό μέγεθος δίσκου αποθήκευσης Premium ανάλογα με τις απαιτήσεις της εφαρμογής και την υψηλή κλίμακα Εικονική μέγεθος. Ο παρακάτω πίνακας παρουσιάζει τις δυνατότητες και τα μεγέθη τρεις δίσκων.

| **Τύπος δίσκου**       | **P10**           | **Ρ20**           | **P30**           |
|---------------------|-------------------|-------------------|-------------------|
| Μέγεθος δίσκου           | 128 απομείωση           | 512 απομείωση           | 1024 απομείωση (1 TB)   |
| IOP Προέλευσης ανά δίσκο       | 500               | 2300              | 5000              |
| Μετάδοσης ανά δίσκο | 100 MB ανά δευτερόλεπτο | 150 MB ανά δευτερόλεπτο | 200 MB ανά δευτερόλεπτο |

Τον αριθμό των δίσκων που επιλέγετε εξαρτάται από το δίσκο μεγέθους επιλεγμένος. Μπορείτε να χρησιμοποιήσετε έναν μόνο δίσκο P30 ή πολλών δίσκων P10 ώστε να πληρούνται οι απαιτήσεις της εφαρμογής σας. Λαμβάνει το λογαριασμό ζητήματα που παρατίθενται παρακάτω όταν κάνετε την επιλογή.

*Όρια κλίμακα (IOP Προέλευσης και μετάδοσης)*  
Τα όρια IOP Προέλευσης και απόδοση του κάθε μεγέθους δίσκου Premium είναι διαφορετικές και ανεξάρτητα από τα όρια κλίμακα Εικονική. Βεβαιωθείτε ότι το συνολικό IOP Προέλευσης και μετάδοσης από δίσκων είναι εντός ορίων κλίμακα του μεγέθους της επιλογής Εικονική.

Για παράδειγμα, εάν μια εφαρμογή απαίτηση είναι έως 250 MB/sec μετάδοσης και χρησιμοποιείτε μια Εικονική DS4 με έναν μόνο δίσκο P30. Η Εικονική DS4 μπορεί να σας δώσει έως 256 MB/sec μεταγωγή. Ωστόσο, ένας P30 δίσκος έχει όριο μετάδοσης 200 MB/sec. Επομένως, η εφαρμογή θα περιορίζεται στο 200 MB/sec λόγω του ορίου δίσκου. Πρέπει να αντιμετωπίσετε αυτό το όριο, προμήθεια περισσότερες από μία δίσκων δεδομένων για να την εικονική Μηχανή.

>**Σημείωση:**  
>Δεν περιλαμβάνονται διαβάζει που σερβιρίστηκε από το cache στο δίσκο IOP Προέλευσης και μετάδοσης, επομένως δεν υπόκειται σε όρια δίσκου. Cache έχει το νέο όριο IOP Προέλευσης και απόδοση ανά Εικονική.
>
>Για παράδειγμα, αρχικά σας ανάγνωσης και εγγραφής είναι 60MB/sec και 40MB/sec αντίστοιχα. Διάρκεια του χρόνου, το cache warms προς τα επάνω και λειτουργεί και περισσότερο τα διαβάζει από το cache. Στη συνέχεια, μπορείτε να λάβετε υψηλότερη εγγραφής μετάδοσης από το δίσκο.

*Αριθμός δίσκων*  
Να καθορίσετε τον αριθμό των δίσκων θα χρειαστεί κατά την αξιολόγηση απαιτήσεις της εφαρμογής. Κάθε μεγέθους Εικονική έχει επίσης όριο στον αριθμό των δίσκων που μπορείτε να επισυνάψετε την εικονική Μηχανή. Συνήθως, αυτό είναι δύο φορές ο αριθμός πυρήνων. Βεβαιωθείτε ότι το μέγεθος Εικονική που επιλέγετε μπορεί να υποστηρίξει τον αριθμό των δίσκων είναι απαραίτητο.

Να θυμάστε, των δίσκων Premium χώρο αποθήκευσης έχετε υψηλότερη απόδοσης δυνατότητες σε σύγκριση με το τυπικό αποθήκευσης δίσκων. Επομένως, εάν κάνετε μετεγκατάσταση την εφαρμογή από το Azure IaaS Εικονική χρησιμοποιώντας τυπική χώρου αποθήκευσης με το χώρο αποθήκευσης Premium, θα χρειαστεί πιθανώς λιγότερες premium δίσκων για να επιτύχετε το ίδιο ή νεότερη έκδοση επιδόσεων για την εφαρμογή σας.

## <a name="disk-caching"></a>Προσωρινή αποθήκευση στο δίσκο  
Υψηλή ΣΠΣ κλίμακας που αξιοποιήσετε αποθήκευσης Premium Azure έχουν μια πολλαπλών επιπέδων σε cache τεχνολογία που ονομάζεται BlobCache. BlobCache χρησιμοποιεί ένα συνδυασμό των εικονική μηχανή RAM και τοπικού SSD για προσωρινή αποθήκευση. Αυτή η μνήμη cache είναι διαθέσιμη για το δίσκων μόνιμη Premium αποθήκευσης και το τοπικό δίσκων Εικονική. Από προεπιλογή, αυτή η ρύθμιση cache έχει οριστεί σε ανάγνωσης/εγγραφής για το λειτουργικό σύστημα δίσκων και μόνο για ανάγνωση για δίσκων δεδομένων που φιλοξενούνται στο χώρο αποθήκευσης Premium. Με προσωρινή αποθήκευση στο δίσκο με δυνατότητα των δίσκων Premium χώρου αποθήκευσης, την υψηλή κλίμακα ΣΠΣ να επιτύχετε πολύ υψηλή επίπεδα επιδόσεων που υπερβαίνουν τα υποκείμενα επιδόσεων του δίσκου.

>[AZURE.WARNING] Αλλαγή της ρύθμισης cache του δισκέτα Azure αποσυνδέει και εκ νέου επισυνάπτει δίσκου προορισμού. Εάν είναι ο δίσκος λειτουργικού συστήματος, η Εικονική γίνει επανεκκίνηση του. Διακοπή όλες τις εφαρμογές/υπηρεσίες που μπορεί να επηρεάζεται από αυτό διαταραχή πριν να αλλάξετε τη ρύθμιση cache του δίσκου.

Για να μάθετε περισσότερα σχετικά με τον τρόπο λειτουργίας BlobCache, ανατρέξτε στο εσωτερικό [Χώρο αποθήκευσης Premium Azure](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) καταχώρηση ιστολογίου.

Είναι σημαντικό για να ενεργοποιήσετε την cache στη δεξιά Ορισμός δίσκων. Αν πρέπει να ενεργοποιήσετε την προσωρινή αποθήκευση στο δίσκο σε δίσκο premium ή δεν θα εξαρτώνται από το μοτίβο φόρτο εργασίας αυτού του δίσκου θα χειρισμός. Στον παρακάτω πίνακα παρουσιάζεται η προεπιλεγμένη ρυθμίσεις του cache για το λειτουργικό σύστημα και τα δεδομένα δίσκων.

| **Τύπος δίσκου** | **Προεπιλεγμένη ρύθμιση Cache** |
|---|---|
| Λειτουργικό σύστημα δίσκου | ReadWrite |
| Δίσκου δεδομένων | Κανένας |

Ακολουθούν τις ρυθμίσεις του cache προτεινόμενα δίσκου για δίσκων δεδομένων,

| **Ρύθμιση σε cache στο δίσκο** | **Σύσταση πότε να χρησιμοποιήσετε αυτήν τη ρύθμιση** |
|---|---|
| Κανένας | Ρύθμιση παραμέτρων host cache ως κανένα δίσκων μόνο για εγγραφή και χοντρό εγγραφής. |
| Μόνο για ανάγνωση | Ρύθμιση παραμέτρων host cache ως μόνο για ανάγνωση για δίσκων μόνο για ανάγνωση και ανάγνωση και εγγραφή. |
| ReadWrite | Ρύθμιση παραμέτρων host cache ως ReadWrite μόνο εάν η εφαρμογή σας χειρίζεται σωστά γράφετε δεδομένα στο cache για μόνιμη δίσκων όταν είναι απαραίτητο. |

*Μόνο για ανάγνωση*  
Ρυθμίζοντας μόνο για ανάγνωση σε cache στο χώρο αποθήκευσης Premium δεδομένων δίσκων, μπορείτε να επιτύχετε χαμηλής λανθάνων χρόνος ανάγνωση και να λάβετε πολύ υψηλή ανάγνωση IOP Προέλευσης και μετάδοσης για την εφαρμογή σας. Αυτό είναι προθεσμία δύο λόγοι,

1.  Διαβάζει που εκτελούνται από το cache, η οποία είναι ενεργοποιημένη η Εικονική μνήμη και η τοπική SSD, είναι πολύ ταχύτερα από διαβάζει από το δίσκο δεδομένων, που βρίσκεται στον χώρο αποθήκευσης αντικειμένων blob του Azure.  
2.  Χώρος αποθήκευσης Premium δεν πραγματοποιεί καταμέτρηση τα διαβάζει εξυπηρέτησης από το cache, προς το δίσκο IOP Προέλευσης και απόδοση. Γι ' αυτό, η εφαρμογή σας είναι σε θέση να επιτύχετε υψηλότερη συνολικό IOP Προέλευσης και απόδοση.

*ReadWrite*  
Από προεπιλογή, το λειτουργικό σύστημα δίσκων έχουν ενεργοποιημένη η προσωρινή αποθήκευση ReadWrite. Προσθέσαμε πρόσφατα υποστήριξη για προσωρινή αποθήκευση δεδομένων καθώς και δίσκων ReadWrite. Εάν χρησιμοποιείτε ReadWrite σε cache, πρέπει να έχετε ένα κατάλληλο τρόπο για να γράψετε τα δεδομένα από το cache για μόνιμη δίσκων. Για παράδειγμα, SQL Server χειρίζεται εγγραφή δεδομένων στο cache των δίσκων μόνιμη χώρου αποθήκευσης στο δικό του. Χρήση του ReadWrite cache με μια εφαρμογή που δεν χειρίζεται συνεχίζεται τα απαιτούμενα δεδομένα μπορεί να οδηγήσει σε απώλεια δεδομένων, εάν η Εικονική παρουσιάζει σφάλμα.

Ως παράδειγμα, μπορείτε να εφαρμόσετε αυτές τις οδηγίες στο SQL Server που εκτελείται στο χώρο αποθήκευσης Premium, κάνοντας τα εξής,

1.  Ρύθμιση παραμέτρων cache "Μόνο για ανάγνωση" στο δίσκων αποθήκευσης premium φιλοξενίας αρχεία δεδομένων.  
    μια.  Τα γρήγορα διαβάζει από το cache κάτω την ώρα ερωτήματος SQL Server, επειδή το σελίδες δεδομένων ανακτώνται πολύ ταχύτερα από το cache σε σύγκριση με το απευθείας από τα δεδομένα δίσκων.  
    β.  Εξυπηρέτηση διαβάζει από το cache, σημαίνει ότι είναι διαθέσιμη στο δίσκων δεδομένων premium επιπλέον μεταγωγή. SQL Server να χρησιμοποιήσετε αυτό επιπλέον μετάδοσης προς την ανάκτηση περισσότερες σελίδες δεδομένων και άλλες εργασίες όπως η δημιουργία αντιγράφων ασφαλείας/Επαναφορά μαζική φορτία και αναδημιουργεί ευρετηρίου.  
2.  Ρύθμιση παραμέτρων "Κανένα" cache δίσκων αποθήκευσης premium φιλοξενίας τα αρχεία καταγραφής.  
    μια.  Αρχεία καταγραφής έχουν κυρίως λειτουργίες χοντρό εγγραφής. Επομένως, να μην τις αξιοποιήσετε από το cache μόνο για ανάγνωση.

## <a name="disk-striping"></a>Επιμερισμό δίσκου  
Όταν μια υψηλή κλίμακα Εικονική είναι συνδεδεμένος με διάφορες μόνιμη δίσκων αποθήκευσης premium, των δίσκων να διαγραμμίζονται μαζί για να συγκεντρώσετε τους IOP εύρους ζώνης και χωρητικότητα αποθήκευσης.

Στα Windows, μπορείτε να χρησιμοποιήσετε διαστήματα χώρου αποθήκευσης για δίσκων διαγράμμισης μαζί. Πρέπει να ρυθμίσετε μία στήλη για κάθε δίσκο σε ένα χώρο συγκέντρωσης. Διαφορετικά, τη συνολική απόδοση της ραβδωτό ένταση μπορεί να είναι μικρότερη από το αναμενόμενο, λόγω άνιση κατανομή κίνησης κατά μήκος των δίσκων.

Σημαντικό: Χρησιμοποιώντας τη Διαχείριση διακομιστών περιβάλλοντος εργασίας Χρήστη, μπορείτε να ορίσετε τον συνολικό αριθμό των στηλών έως 8 για ένα ραβδωτό έντασης ήχου. Κατά την επισύναψη περισσότερους από 8 δίσκων, χρήση του PowerShell για να δημιουργήσετε την ένταση ήχου. Χρήση του PowerShell, μπορείτε να ορίσετε τον αριθμό των στηλών ίσο με τον αριθμό των δίσκων. Για παράδειγμα, εάν υπάρχουν 16 δίσκων σε ένα σύνολο μία μόνο γραμμή; Καθορίστε 16 στήλες στην παράμετρο *NumberOfColumns* της το cmdlet του PowerShell *Δημιουργία VirtualDisk* .


Στην Linux, χρησιμοποιήστε το βοηθητικό πρόγραμμα MDADM δίσκων διαγράμμισης μαζί. Για λεπτομερή βήματα επιμερισμό δίσκων σε Linux αναφέρονται σε [Ρύθμιση παραμέτρων RAID λογισμικού σε Linux](../virtual-machines/virtual-machines-linux-configure-raid.md).


*Μέγεθος διαγράμμισης*  
Ένα σημαντικό ρύθμισης παραμέτρων σε δίσκο επιμερισμό είναι το μέγεθος διαγράμμισης. Το μέγεθος διαγράμμισης ή το μέγεθος του μπλοκ είναι το μικρότερο τμήμα των δεδομένων που μπορούν να αντιμετωπίσουν εφαρμογής ενός ραβδωτό τόμου. Το μέγεθος διαγράμμισης ρυθμίζετε τις παραμέτρους εξαρτάται από τον τύπο της εφαρμογής και το μοτίβο αίτηση. Εάν επιλέξετε το μέγεθος διαγράμμισης λάθος, μπορεί να οδηγήσει σε σφάλμα στοίχισης εισόδου/ΕΞΌΔΟΥ, που οδηγεί σε μειωμένη απόδοση της εφαρμογής σας.

Για παράδειγμα, εάν μια αίτηση εισόδου/ΕΞΌΔΟΥ που δημιουργούνται από την εφαρμογή σας είναι μεγαλύτερο από το μέγεθος διαγράμμισης δίσκου, το σύστημα αποθήκευσης εγγράφει μακριά μονάδας διαγράμμισης σε περισσότερα από ένα δίσκο. Όταν είναι ώρα για να αποκτήσετε πρόσβαση σε αυτά τα δεδομένα, αυτό θα πρέπει να αναζήτηση σε περισσότερες από μία γραμμή μονάδες, για να ολοκληρώσετε την αίτηση. Το συγκεντρωτικό αποτέλεσμα αυτής της συμπεριφοράς μπορεί να οδηγήσει σε υποβάθμιση ουσιαστικά επιδόσεων. Από την άλλη πλευρά, εάν το μέγεθος της αίτησης εισόδου/ΕΞΌΔΟΥ είναι μικρότερη από μέγεθος διαγράμμισης και εάν είναι τυχαία, να προσθέσουν τις αιτήσεις εισόδου/ΕΞΌΔΟΥ προς τα επάνω στον ίδιο δίσκο προκαλεί συμφόρηση και ο τελικός μειωθεί η απόδοση εισόδου/ΕΞΌΔΟΥ σας.


Ανάλογα με τον τύπο του φόρτου εργασίας εκτελείται η εφαρμογή σας, επιλέξτε ένα μέγεθος κατάλληλο διαγράμμισης. Για τυχαία μικρές αιτήσεις εισόδου/ΕΞΌΔΟΥ, χρησιμοποιήστε ένα μικρότερο μέγεθος διαγράμμισης. Ότι, για μεγάλο εισόδου/ΕΞΌΔΟΥ αιτήσεις Χρησιμοποιήστε ένα μεγαλύτερο μέγεθος διαγράμμισης. Βρείτε τη γραμμή μέγεθος συστάσεις για την εφαρμογή που πρόκειται να εκτελείτε στο χώρο αποθήκευσης Premium. Για τον SQL Server, ρυθμίστε τις παραμέτρους μέγεθος διαγράμμισης από 64KB για φόρτους εργασίας Συναλλαγής και 256KB για δεδομένα αποταμίευσης φόρτους εργασίας. Ανατρέξτε στο θέμα [επιδόσεις βέλτιστες πρακτικές για τον SQL Server σε VM Azure](../virtual-machines/virtual-machines-windows-sql-performance.md#disks-and-performance-considerations) για να μάθετε περισσότερα.


>**Σημείωση:**  
>Μπορείτε να διαγραμμίσεων μαζί έως 32 δίσκων premium χώρου αποθήκευσης μιας σειράς DS Εικονική και 64 δίσκων αποθήκευσης premium σε μια σειρά GS Εικονική.

## <a name="multi-threading"></a>Η πολυνηματική επεξεργασία  
Azure έχει σχεδιαστεί πλατφόρμα Premium αποθήκευσης να είναι παράλληλες μαζικά. Επομένως, μια εφαρμογή πολυνηματικού επιτυγχάνει πολύ υψηλότερες επιδόσεις από μια εφαρμογή μονού νήματος. Μια εφαρμογή πολυνηματικού διαιρεί τις εργασίες σε πολλά νήματα και αυξάνει την αποτελεσματικότητα της εκτέλεσης του, χρησιμοποιώντας τους πόρους Εικονική και δίσκου για να τη μέγιστη τιμή.

Για παράδειγμα, εάν η εφαρμογή σας εκτελείται σε ένα μεμονωμένο πυρήνα Εικονική χρησιμοποιώντας δύο συνομιλίες, της CPU να εναλλάσσεστε μεταξύ τα δύο νήματα για την επίτευξη της αποδοτικότητας. Ενώ ένα νήμα είναι σε αναμονή σε ένα δίσκο εισόδου/ΕΞΌΔΟΥ για την ολοκλήρωση της CPU να μεταβείτε σε άλλο νήμα. Με αυτόν τον τρόπο, δύο νήματα να εκτελέσετε περισσότερα από ένα νήμα θα. Εάν η Εικονική έχει περισσότερες από μία πυρήνα, περαιτέρω μειώνει το χρόνος εκτέλεσης επειδή κάθε πυρήνα μπορεί να εκτελέσει εργασίες παράλληλα.

Ενδέχεται να μην μπορείτε να αλλάξετε τον τρόπο μια εφαρμογή του εμπορίου υλοποιεί μία πολυνηματική επεξεργασία ή η πολυνηματική επεξεργασία. Για παράδειγμα, SQL Server είναι δυνατό να χειρισμός πολλαπλών CPU και πολλών πυρήνων. Ωστόσο, SQL Server καθορίζεται ποιες συνθήκες αυτό θα αξιοποιήσετε ένα ή περισσότερα νήματα για την επεξεργασία ενός ερωτήματος. Αυτό μπορεί να εκτέλεση ερωτημάτων και δημιουργία ευρετηρίων με χρήση η πολυνηματική επεξεργασία. Για ένα ερώτημα που περιλαμβάνει τη συμμετοχή σε μεγάλους πίνακες και ταξινόμηση δεδομένων πριν από την επιστροφή στο χρήστη, SQL Server πιθανώς θα χρησιμοποιήσει πολλά νήματα. Ωστόσο, ένας χρήστης δεν μπορεί να ελέγξετε εάν SQL Server εκτελεί ένα ερώτημα με ένα νήμα ή πολλά νήματα.

Δεν υπάρχουν ρυθμίσεις παραμέτρων που μπορείτε να τροποποιήσετε να επηρεάσει αυτή η πολυνηματική επεξεργασία ή παράλληλες επεξεργασίας μιας εφαρμογής του. Για παράδειγμα, σε περίπτωση SQL Server είναι η μέγιστη διαμόρφωση βαθμού της παραλληλισμό. Αυτή η ρύθμιση που ονομάζεται MAXDOP, σας επιτρέπει να ρυθμίσετε τις παραμέτρους του μέγιστου αριθμού των επεξεργαστών SQL Server να χρησιμοποιήσετε όταν παράλληλες επεξεργασίας. Μπορείτε να ρυθμίσετε MAXDOP για μεμονωμένες ερωτήματα ή λειτουργίες ευρετηρίου. Αυτή η δυνατότητα είναι χρήσιμη όταν θέλετε να εξισορροπήσετε τους πόρους του συστήματος για μια εφαρμογή κρίσιμης επιδόσεων.

Για παράδειγμα, πείτε την εφαρμογή σας χρησιμοποιώντας τον SQL Server εκτελεί ένα μεγάλο ερώτημα και μια λειτουργία ευρετηρίου την ίδια στιγμή. Ας υποθέσουμε ότι θέλετε η λειτουργία ευρετηρίου για να περισσότερες performant σε σύγκριση με το μεγάλο ερώτημα. Σε αυτήν την περίπτωση, μπορείτε να ορίσετε τιμή MAXDOP της λειτουργίας ευρετήριο να είναι μεγαλύτερος από την τιμή MAXDOP για το ερώτημα. Με αυτόν τον τρόπο, SQL Server περιλαμβάνει περισσότερες αριθμού των επεξεργαστών που το να αξιοποιήσετε για τη λειτουργία ευρετήριο σε σύγκριση με το του αριθμού των επεξεργαστών αυτό μπορεί να χρησιμοποιηθεί στο μεγάλο ερώτημα. Να θυμάστε, δεν ελέγχουν τον αριθμό των νήματα SQL Server θα χρησιμοποιήσετε για κάθε εργασία. Μπορείτε να ελέγχετε τον μέγιστο αριθμό των επεξεργαστών που αφοσιωμένη για η πολυνηματική επεξεργασία.

Μάθετε περισσότερα σχετικά με τις [Μοίρες του παραλληλισμό](https://technet.microsoft.com/library/ms188611.aspx) στον SQL Server. Μάθετε οι ρυθμίσεις που επηρεάζουν η πολυνηματική επεξεργασία στην εφαρμογή σας και τις παραμέτρους τους για βελτιστοποίηση των επιδόσεων.

## <a name="queue-depth"></a>Βάθος ουράς  
Το βάθος ουράς ή μήκος ουράς ή μέγεθος ουράς είναι ο αριθμός των εκκρεμών αιτήσεων εισόδου/ΕΞΌΔΟΥ στο σύστημα. Η τιμή του άξονα βάθους ουρά καθορίζει πόσες ΔΙΑΙΡΕΜΈΝΩΝ λειτουργιών την εφαρμογή σας να ευθυγραμμίσετε, που θα επεξεργάζεται το χώρο αποθήκευσης δίσκων. Επηρεάζει όλους τους δείκτες επιδόσεων τρεις εφαρμογής που θα σας αναφέρονται σε αυτό το άρθρο ήτοι, IOP Προέλευσης, της απόδοσης και λανθάνοντος χρόνου.

Ουρά βάθους και η πολυνηματική επεξεργασία είναι στενά συσχετισμένα. Η τιμή βάθος ουράς υποδεικνύει την ποσότητα που η πολυνηματική επεξεργασία μπορεί να επίτευξη από την εφαρμογή. Εάν το βάθος ουράς είναι μεγάλο, εφαρμογή μπορεί να εκτελεί περισσότερες λειτουργίες ταυτόχρονα, με άλλα λόγια, πιο η πολυνηματική επεξεργασία. Εάν το βάθος ουράς είναι μικρό, παρόλο που η εφαρμογή είναι πολυνηματικού, δεν θα έχει αρκετό αιτήσεις στοιχίζονται στο για ταυτόχρονη εκτέλεση.

Συνήθως, εκτός του shelf εφαρμογές δεν σας επιτρέπουν να αλλάξετε βάθος ουράς, επειδή Εάν ορίσετε λάθος θα κάνει περισσότερες βλάβη από κατάλληλη. Εφαρμογές θα οριστεί η σωστή τιμή του βάθος ουράς για να λάβετε τη βέλτιστη απόδοση. Ωστόσο, είναι σημαντικό να κατανοήσετε αυτής της έννοιας έτσι ώστε να μπορείτε να αντιμετωπίσετε θέματα απόδοσης με την εφαρμογή σας. Μπορείτε επίσης να παρατηρήσετε την επίδραση της βάθος ουράς, εκτελώντας πρωτοποριακά εργαλεία στο σύστημά σας.

Ορισμένες εφαρμογές παρέχουν ρυθμίσεις για να επηρεάσετε τη βάθος ουράς. Για παράδειγμα, η ρύθμιση (μέγιστο βαθμό παραλληλισμό) MAXDOP στον SQL Server εξηγείται στην προηγούμενη ενότητα. MAXDOP είναι ένας τρόπος για να επηρεάσουν βάθος ουράς και η πολυνηματική επεξεργασία, παρόλο που απευθείας δεν αλλάζει την τιμή άξονα βάθους ουρά του SQL Server.

*Βάθος υψηλή ουράς*  
Βάθος υψηλή ουρά γραμμές προς τα επάνω περισσότερες λειτουργίες στο δίσκο. Ο δίσκος γνωρίζει την επόμενη αίτηση στην ουρά εκ των προτέρων. Συνεπώς, ο δίσκος μπορεί να προγραμματίσετε λειτουργίες εκ των προτέρων και να τις επεξεργαστείτε σε μια ακολουθία βέλτιστη. Εφόσον η αίτηση αποστολής περισσότερες αιτήσεις στο δίσκο, ο δίσκος μπορεί να επεξεργαστεί περισσότερες παράλληλες IOs. Ο τελικός η εφαρμογή θα μπορούν να επιτύχετε υψηλότερη IOP Προέλευσης. Επειδή το εφαρμογή επεξεργάζεται περισσότερες αιτήσεις, αυξάνεται επίσης ο συνολικός αριθμός της εφαρμογής.

Συνήθως, μια εφαρμογή μπορεί να επιτύχετε μέγιστη ταχύτητα μετάδοσης με 8-IOs εξαιρετική 16 + ανά συνδεδεμένο δίσκο. Εάν μια βάθος ουράς είναι ένα, εφαρμογή δεν Ώθηση αρκετό IOs στο σύστημα και θα επεξεργασία μικρότερη τιμή σε μια δεδομένη χρονική περίοδο. Με άλλα λόγια, λιγότερο μεταγωγή.

Για παράδειγμα, στον SQL Server, η ρύθμιση της τιμής MAXDOP για ένα ερώτημα για να "4" ενημερώνει για SQL Server που μπορεί να χρησιμοποιήσει έως και τέσσερα πυρήνων για την εκτέλεση του ερωτήματος. SQL Server θα καθορίσει τι είναι η καλύτερη τιμή άξονα βάθους ουρά και τον αριθμό των πυρήνων για την εκτέλεση του ερωτήματος.

*Βέλτιστη ουρά άξονα βάθους*  
Τιμή άξονα βάθους πολύ υψηλή ουρά έχει επίσης τα μειονεκτήματα. Εάν τιμή άξονα βάθους ουρά είναι πολύ υψηλή, η εφαρμογή θα προσπαθήσει να καθοδηγήσετε πολύ υψηλή IOP Προέλευσης. Εκτός και εάν η εφαρμογή έχει μόνιμη δίσκων με επαρκή προμήθεια του φακέλου IOP Προέλευσης, αυτό μπορεί να επηρεάσει αρνητικά των αδρανειών εφαρμογής. Παρακολούθηση τύπου εμφανίζει τη σχέση μεταξύ IOP Προέλευσης, λανθάνων χρόνος και βάθος ουράς.  
    ![](media/storage-premium-storage-performance/image6.png)

Δεν θα πρέπει να ρυθμίσετε το βάθος ουράς οποιαδήποτε υψηλή τιμή, αλλά σε βέλτιστη τιμή, που μπορούν να παρέχουν αρκετό IOP Προέλευσης για την εφαρμογή χωρίς να επηρεαστούν των αδρανειών. Για παράδειγμα, εάν η εφαρμογή λανθάνων χρόνος πρέπει να είναι 1 χιλιοστά του δευτερολέπτου, το βάθος ουράς που απαιτείται για την επίτευξη 5.000 IOP Προέλευσης είναι, QD = 5000 x 0,001 = 5.

*Βάθος ουράς για ραβδωτό έντασης ήχου*  
Για ένα ραβδωτό όγκος, διατήρηση βάθος ουρά αρκετά υψηλή ώστε, κάθε δίσκος έχει βάθος ουρά κορύφωσης ξεχωριστά. Για παράδειγμα, εξετάστε το ενδεχόμενο να μια εφαρμογή η οποία προωθεί βάθος ουρά 2 και υπάρχουν 4 δίσκων στο τη γραμμή. Οι δύο αιτήσεις εισόδου/ΕΞΌΔΟΥ θα μεταβείτε δύο δίσκων και υπόλοιπη δύο δίσκων θα είναι σε αδράνεια. Ρυθμίστε τις παραμέτρους του βάθος ουράς το γι ' αυτό, ώστε να μπορεί να είναι απασχολημένο όλων των δίσκων. Τύπος παρακάτω δείχνει τον τρόπο για να προσδιορίσετε το βάθος ουρά του ραβδωτό όγκους.  
    ![](media/storage-premium-storage-performance/image7.png)

## <a name="throttling"></a>Περιορισμού  
Azure διατάξεις Premium χώρου αποθήκευσης που καθορίζεται αριθμό IOP Προέλευσης και μετάδοσης ανάλογα με τα μεγέθη Εικονική και μεγέθη δίσκου που επιλέγετε. Οποιαδήποτε στιγμή την εφαρμογή προσπαθεί να καθοδηγήσετε IOP Προέλευσης ή μετάδοσης επάνω από αυτά τα όρια του τι μπορεί να διαχειριστεί την Εικονική ή δίσκο, Premium χώρου αποθήκευσης θα επιτάχυνσης του. Αυτό δηλώσεις μορφή μειωμένη απόδοση στην εφαρμογή σας. Αυτό μπορεί να σημαίνουν υψηλότερη λανθάνων χρόνος, κάτω μετάδοσης ή κάτω IOP Προέλευσης. Εάν δεν επιτάχυνσης Premium χώρου αποθήκευσης, την εφαρμογή σας μπορεί να αποτύχει εντελώς από την υπέρβαση του τι είναι σε θέση να την επίτευξη τους πόρους. Επομένως, για να αποφύγετε προβλήματα επιδόσεων λόγω περιορισμού, πάντα προμήθεια επαρκείς πόρους για την εφαρμογή σας. Λάβετε υπόψη ποια είπαμε στις ενότητες μεγέθη δίσκου παραπάνω και μεγέθη Εικονική. Πρωτοποριακά είναι ο καλύτερος τρόπος για να υπολογίσετε τους πόρους που θα πρέπει να φιλοξενήσετε την εφαρμογή σας.

## <a name="benchmarking"></a>Συγκριτική αξιολόγηση  
Πρωτοποριακά είναι η διαδικασία προσομοίωση διαφορετικό φόρτους εργασίας στην εφαρμογή σας και τη μέτρηση τις επιδόσεις εφαρμογής για κάθε φόρτο εργασίας. Χρησιμοποιώντας τα βήματα που περιγράφονται σε μια προηγούμενη ενότητα, που έχετε συλλέξει απαιτήσεις για τις επιδόσεις εφαρμογής. Εκτελώντας πρωτοποριακά εργαλεία στην του ΣΠΣ που φιλοξενεί την εφαρμογή, μπορείτε να προσδιορίσετε τα επίπεδα επιδόσεων που να επιτύχετε την εφαρμογή σας με το χώρο αποθήκευσης Premium. Σε αυτήν την ενότητα, παρέχουμε που παραδείγματα πρωτοποριακά μια τυπική Εικονική DS14 παρασχεθεί με το χώρο αποθήκευσης Premium Azure δίσκων.

Έχετε χρησιμοποιήσαμε κοινά εργαλεία πρωτοποριακά Iometer και FIO, για τα Windows και Linux αντίστοιχα. Αυτά τα εργαλεία δημιουργούν πολλά νήματα προσομοίωση παραγωγής όπως φόρτο εργασίας, και Μετρήστε τις επιδόσεις του συστήματος. Χρήση των εργαλείων Μπορείτε επίσης να ρυθμίσετε τις παραμέτρους όπως το μπλοκ μέγεθος και ουρά βάθος, το οποίο συνήθως δεν μπορείτε να αλλάξετε για μια εφαρμογή. Αυτό σας δίνει μεγαλύτερη ευελιξία για να καθοδηγήσετε τη μέγιστη απόδοση σε υψηλή κλίμακα Εικονική παρασχεθεί με premium δίσκων για διαφορετικούς τύπους φόρτους εργασίας εφαρμογών. Για να μάθετε περισσότερα σχετικά με κάθε εργαλείο benchmarking επισκεφθείτε [Iometer](http://www.iometer.org/) και [FIO](http://freecode.com/projects/fio).

Για να ακολουθήσετε τα παρακάτω παραδείγματα, δημιουργήστε μια τυπική Εικονική DS14 και 11 δίσκων Premium χώρου αποθήκευσης στο η Εικονική. Των 11 δίσκων, ρύθμιση παραμέτρων 10 δίσκων με κεντρικό υπολογιστή του προσωρινή αποθήκευση ως "Κανένα" και διαγραμμίσεων τους σε ένα τόμου που ονομάζεται NoCacheWrites. Ρύθμιση παραμέτρων κεντρικού υπολογιστή cache ως "Μόνο για ανάγνωση" στο υπόλοιπο δίσκο και Δημιουργία τόμου που ονομάζεται CacheReads με αυτόν το δίσκο. Χρησιμοποιώντας αυτό το πρόγραμμα εγκατάστασης, θα μπορείτε να δείτε τη μέγιστη απόδοση ανάγνωσης και εγγραφής από μια τυπική Εικονική DS14. Για λεπτομερείς οδηγίες σχετικά με τη δημιουργία μια Εικονική DS14 με δίσκων premium, μεταβείτε στη [Δημιουργία και χρήση του λογαριασμού Premium χώρου αποθήκευσης για μια εικονική μηχανή δίσκο δεδομένων](storage-premium-storage.md#create-and-use-a-premium-storage-account-for-a-virtual-machine-data-disk).

*Προετοιμασία του Cache*  
Ο δίσκος με κεντρικό υπολογιστή μόνο για ανάγνωση σε cache θα μπορούν να σας δώσει υψηλότερη IOP Προέλευσης από το όριο δίσκου. Για να λάβετε το μέγιστο επιδόσεις ανάγνωσης από το cache του κεντρικού υπολογιστή, πρώτα πρέπει να θερμή προς τα επάνω το cache αυτού του δίσκου. Αυτό εξασφαλίζει ότι η ανάγνωση IOs ποιο εργαλείο benchmarking θα οδηγήσει τόμου CacheReads στην πραγματικότητα επισκέψεις στη του cache και όχι στο δίσκο απευθείας. Το αποτέλεσμα επισκέψεων cache σε επιπλέον IOP Προέλευσης από το cache μόνο με δυνατότητα δίσκου.

>**Σημαντικό:**  
>Θα πρέπει να θερμή του cache, πριν από την εκτέλεση συγκριτικής αξιολόγησης, κάθε φορά που γίνεται επανεκκίνηση Εικονική.

#### <a name="iometer"></a>Iometer   
[Κάντε λήψη του εργαλείου Iometer](http://sourceforge.net/projects/iometer/files/iometer-stable/2006-07-27/iometer-2006.07.27.win32.i386-setup.exe/download) σε η Εικονική.

*Αρχείο δοκιμής*  
Iometer χρησιμοποιεί ένα αρχείο δοκιμής που είναι αποθηκευμένη σε την ένταση ήχου στην οποία θα εκτελεστεί η δοκιμή benchmarking. Το μονάδες διαβάζει και εγγράφει σε αυτό το αρχείο δοκιμής για τη μέτρηση του δίσκου IOP Προέλευσης και απόδοση. Iometer δημιουργεί αυτό το αρχείο δοκιμής, εάν δεν έχετε δώσει μία. Δημιουργήστε ένα αρχείο δοκιμής 200GB που ονομάζεται iobw.tst το όγκους CacheReads και NoCacheWrites.

*Προδιαγραφές της Access*  
Οι προδιαγραφές, αίτηση μέγεθος εισόδου/ΕΞΌΔΟΥ, % ανάγνωσης/εγγραφής, % τυχαία/διαδοχικές ρυθμίζονται χρησιμοποιώντας την καρτέλα "Προδιαγραφές Access" στο Iometer. Δημιουργήστε μια προδιαγραφή πρόσβαση για κάθε ένα από τα σενάρια που περιγράφεται παρακάτω. Δημιουργία οι προδιαγραφές της access και "Αποθήκευση" με ένα κατάλληλο όνομα όπως – RandomWrites\_8K, RandomReads\_8K. Επιλέξτε την αντίστοιχη προδιαγραφή όταν εκτελείται το σενάριο δοκιμής.

Ένα παράδειγμα της access προδιαγραφές για το μέγιστο σενάριο γράψετε IOP Προέλευσης είναι φαίνεται παρακάτω,  
    ![](media/storage-premium-storage-performance/image8.png)

*Προδιαγραφές δοκιμής μέγιστο IOP Προέλευσης*  
Για μια επίδειξη του μέγιστου IOP, χρησιμοποιήστε μικρότερο μέγεθος αίτηση. Χρησιμοποιήστε 8K αίτηση μέγεθος και δημιουργήστε προδιαγραφές για το τυχαίο εγγράφει και διαβάζει.

| Προδιαγραφές της Access | Πρόσκληση σε μέγεθος | Τυχαίες % | Ανάγνωση % |
|----------------------|--------------|----------|--------|
| RandomWrites\_8K     | 8K           | 100      | 0      |
| RandomReads\_8K      | 8K           | 100      | 100    |

*Προδιαγραφές δοκιμής μέγιστη ταχύτητα μετάδοσης*  
Για να αποδείξει μέγιστη ταχύτητα μετάδοσης, χρησιμοποιήστε μεγαλύτερο μέγεθος αίτηση. Χρησιμοποιήστε 64K αίτηση μέγεθος και δημιουργήστε προδιαγραφές για τυχαίες συντάσσει και διαβάζει.

| Προδιαγραφές της Access | Πρόσκληση σε μέγεθος | Τυχαίες % | Ανάγνωση % |
|----------------------|--------------|----------|--------|
| RandomWrites\_64K    | 64K          | 100      | 0      |
| RandomReads\_64K     | 64K          | 100      | 100    |

*Εκτέλεση του ελέγχου Iometer*  
Εκτελέστε τα παρακάτω βήματα για να θερμή του cache

1.  Δημιουργήστε δύο προδιαγραφές της access με τιμές που εμφανίζονται παρακάτω,

  	| Όνομα              | Πρόσκληση σε μέγεθος | Τυχαίες % | Ανάγνωση % |
  	|-------------------|--------------|----------|--------|
  	| RandomWrites\_1MB | 1MB          | 100      | 0      |
  	| RandomReads\_1MB  | 1MB          | 100      | 100    |

2.  Εκτελέστε τον έλεγχο Iometer για την προετοιμασία δίσκου cache με τις παρακάτω παραμέτρους. Χρησιμοποιήστε τρεις νήματα εργασίας για την ένταση προορισμού και βάθος ουρά 128. Ορίστε τη διάρκεια της δοκιμής "Εκτέλεση" σε 2hrs στην καρτέλα "Ρύθμιση δοκιμή".

  	| Σενάριο              | Ένταση προορισμού | Όνομα              | Διάρκεια |
  	|-----------------------|---------------|-------------------|----------|
  	| Προετοιμασία δίσκου Cache | CacheReads    | RandomWrites\_1MB | 2hrs     |

3.  Εκτελέστε τη δοκιμή Iometer για τη θέρμανση cache δίσκο με τις εξής παραμέτρους. Χρησιμοποιήστε τρεις νήματα εργασίας για την ένταση προορισμού και βάθος ουρά 128. Ορίστε τη διάρκεια της δοκιμής "Εκτέλεση" σε 2hrs στην καρτέλα "Ρύθμιση δοκιμή".

  	| Σενάριο           | Ένταση προορισμού | Όνομα             | Διάρκεια |
  	|--------------------|---------------|------------------|----------|
  	| Θερμές του δίσκου Cache | CacheReads    | RandomReads\_1MB | 2hrs     |

Μετά την cache προθερμαίνονται δίσκου, συνεχίστε με τα σενάρια δοκιμών που αναφέρονται κάτω από. Για να εκτελέσετε τον έλεγχο Iometer, χρησιμοποιήστε τουλάχιστον τρεις νήματα εργασίας για **κάθε** ένταση προορισμού. Για κάθε νήμα εργασίας, επιλέξτε την ένταση ήχου προορισμού, ορίστε βάθος ουράς και επιλέξτε μία από τις αποθηκευμένες δοκιμής προδιαγραφές, όπως φαίνεται στον παρακάτω πίνακα για να εκτελέσετε το αντίστοιχο σενάριο δοκιμής. Ο πίνακας εμφανίζει επίσης αναμενόμενα αποτελέσματα για IOP Προέλευσης και απόδοση κατά την εκτέλεση των δοκιμών αυτών. Για όλα τα σενάρια, χρησιμοποιείται ένα μικρό μέγεθος εισόδου/ΕΞΌΔΟΥ του 8KB και βάθος υψηλή ουρά 128.

| Σενάριο ελέγχου      | Ένταση προορισμού | Όνομα              | Αποτέλεσμα       |
|--------------------|---------------|-------------------|--------------|
| MAX. Διαβάστε IOP Προέλευσης     | CacheReads    | RandomWrites\_8K  | 50.000 IOP ΠΡΟΈΛΕΥΣΗΣ  |
| MAX. Γράψτε IOP Προέλευσης    | NoCacheWrites | RandomReads\_8K   | 64.000 IOP ΠΡΟΈΛΕΥΣΗΣ  |
| MAX. Συνολικό IOP Προέλευσης | CacheReads    | RandomWrites\_8K  | 100.000 IOP ΠΡΟΈΛΕΥΣΗΣ |
|                    | NoCacheWrites | RandomReads\_8K   |              |
| MAX. Ανάγνωση MB/sec   | CacheReads    | RandomWrites\_64K | 524 MB/sec   |
| MAX. Γράψτε MB/sec  | NoCacheWrites | RandomReads\_64K  | 524 MB/sec   |
| Συνολικό MB/sec    | CacheReads    | RandomWrites\_64K | 1000 MB/sec  |
|                    | NoCacheWrites | RandomReads\_64K  |              |

Παρακάτω υπάρχουν στιγμιότυπα οθόνης από το Iometer δοκιμή αποτελέσματα για το συνδυασμένο IOP Προέλευσης και απόδοση σενάρια.

*Μέγιστο IOP Προέλευσης συνδυασμένο ανάγνωσης και εγγραφής*  
![](media/storage-premium-storage-performance/image9.png)

*Μέγιστη ταχύτητα μετάδοσης συνδυασμένο ανάγνωσης και εγγραφής*  
![](media/storage-premium-storage-performance/image10.png)

### <a name="fio"></a>FIO  
FIO είναι ένα εργαλείο δημοφιλείς στη συγκριτικών storage του ΣΠΣ Linux. Έχει την ευελιξία να επιλέξετε διαφορετικά μεγέθη εισόδου/ΕΞΌΔΟΥ, διαδοχικές ή τυχαία διαβάζει και εγγράφει. Αυτό δημιουργεί νήματα εργασίας ή διαδικασίες για να εκτελέσετε το καθορισμένο λειτουργίες εισόδου/εξόδου. Μπορείτε να καθορίσετε τον τύπο της κάθε νήμα εργασίας πρέπει να εκτελέσετε χρήση αρχείων εργασίας λειτουργίες εισόδου/εξόδου. Έχουμε δημιουργήσει ένα αρχείο έργου ανά σενάριο με εικόνες στα παρακάτω παραδείγματα. Μπορείτε να αλλάξετε τις προδιαγραφές σε αυτά τα αρχεία έργου για να σημείων αναφοράς διαφορετικό φόρτους εργασίας εκτελούνται στο χώρο αποθήκευσης Premium. Στα παραδείγματα, χρησιμοποιούμε μια τυπική Εικονική 14 DS εκτελείται **Ubuntu**. Χρησιμοποιήστε την ίδια ρύθμιση περιγράφεται στην αρχή της [ενότητας Benchmarking](#Benchmarking) και ευχές προς τα επάνω το cache πριν από την εκτέλεση των δοκιμών benchmarking.

Πριν να ξεκινήσετε, [κάντε λήψη του FIO](https://github.com/axboe/fio) και να το εγκαταστήσετε στον υπολογιστή σας εικονική.

Εκτελέστε την ακόλουθη εντολή για Ubuntu,

        apt-get install fio

Θα χρησιμοποιήσουμε τέσσερα νήματα εργασίας για την λειτουργίες εγγραφής και τέσσερα νήματα εργασίας για οδήγησης λειτουργίες ανάγνωσης των δίσκων. Οι εργαζόμενοι εγγραφής θα την κίνηση σε την ένταση "nocache", η οποία έχει 10 δίσκων με cache "Καμία". Οι εργαζόμενοι ανάγνωση θα την κυκλοφορία του τόμου "readcache", η οποία έχει 1 δίσκο cache έχει οριστεί σε "Μόνο για ανάγνωση".

*Μέγιστο εγγραφής IOP Προέλευσης*  
Δημιουργία του αρχείου έργου προδιαγραφές που ακολουθούν για να λάβετε μέγιστο IOP Προέλευσης εγγραφής. Ονομάστε το "fiowrite.ini".

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[writer1]
rw=randwrite
directory=/mnt/nocache
[writer2]
rw=randwrite
directory=/mnt/nocache
[writer3]
rw=randwrite
directory=/mnt/nocache
[writer4]
rw=randwrite
directory=/mnt/nocache
```

Σημείωση η παρακολούθηση πράγματα που ευθυγραμμίζονται με τις οδηγίες σχεδίασης που αναφέρονται στις προηγούμενες ενότητες. Οι προδιαγραφές αυτές είναι απαραίτητες για να καθοδηγήσετε μέγιστο IOP Προέλευσης,  
-   Βάθος υψηλή ουρά 256.  
-   Ένα μικρό μπλοκ μέγεθος 8KB.  
-   Συντάσσει πολλά νήματα εκτέλεση τυχαία.

Εκτελέστε την παρακάτω εντολή για να ξεκινήσετε τον έλεγχο FIO για 30 δευτερόλεπτα,  

    sudo fio --runtime 30 fiowrite.ini

Ενώ εκτελείται η δοκιμή, θα μπορείτε να δείτε τον αριθμό των γράψετε IOP Προέλευσης η Εικονική και διάρκεια δίσκων Premium. Όπως φαίνεται στο παρακάτω δείγμα, η Εικονική DS14 προσφέρει το μέγιστο όριο IOP Προέλευσης 50.000 IOP Προέλευσης εγγραφής.  
    ![](media/storage-premium-storage-performance/image11.png)

*Μέγιστο ανάγνωση IOP Προέλευσης*  
Δημιουργία του αρχείου έργου προδιαγραφές που ακολουθούν για να λάβετε μέγιστο ανάγνωση IOP Προέλευσης. Ονομάστε το "fioread.ini".

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache
```

Σημείωση η παρακολούθηση πράγματα που ευθυγραμμίζονται με τις οδηγίες σχεδίασης που αναφέρονται στις προηγούμενες ενότητες. Οι προδιαγραφές αυτές είναι απαραίτητες για να καθοδηγήσετε μέγιστο IOP Προέλευσης,

-   Βάθος υψηλή ουρά 256.  
-   Ένα μικρό μπλοκ μέγεθος 8KB.  
-   Συντάσσει πολλά νήματα εκτέλεση τυχαία.

Εκτελέστε την παρακάτω εντολή για να ξεκινήσετε τον έλεγχο FIO για 30 δευτερόλεπτα,

    sudo fio --runtime 30 fioread.ini

Ενώ εκτελείται η δοκιμή, θα μπορείτε να δείτε τον αριθμό των ανάγνωση IOP Προέλευσης η Εικονική και διάρκεια δίσκων Premium. Όπως φαίνεται στο παρακάτω δείγμα, η Εικονική DS14 προσφέρει περισσότερες από 64.000 IOP Προέλευσης ανάγνωση. Αυτό είναι ένας συνδυασμός του δίσκου και τις επιδόσεις του cache.  
    ![](media/storage-premium-storage-performance/image12.png)

*Μέγιστη ανάγνωση και εγγραφή IOP Προέλευσης*  
Δημιουργία του αρχείου έργου με το εξής προδιαγραφές για να λάβετε μέγιστο συνδυάζονται ανάγνωση και εγγραφή IOP Προέλευσης. Ονομάστε το "fioreadwrite.ini".

```
[global]
size=30g
direct=1
iodepth=128
ioengine=libaio
bs=4k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache

[writer1]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer2]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer3]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer4]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
```

Σημείωση η παρακολούθηση πράγματα που ευθυγραμμίζονται με τις οδηγίες σχεδίασης που αναφέρονται στις προηγούμενες ενότητες. Οι προδιαγραφές αυτές είναι απαραίτητες για να καθοδηγήσετε μέγιστο IOP Προέλευσης,

-   Βάθος υψηλή ουρά 128.  
-   Ένα μικρό μπλοκ μέγεθος 4KB.  
-   Πολλά νήματα εκτέλεση τυχαίες διαβάζει και συντάσσει.

Εκτελέστε την παρακάτω εντολή για να ξεκινήσετε τον έλεγχο FIO για 30 δευτερόλεπτα,

    sudo fio --runtime 30 fioreadwrite.ini

Ενώ εκτελείται η δοκιμή, θα μπορείτε να δείτε τον αριθμό των συνδυασμένο ανάγνωση και εγγραφή IOP Προέλευσης η Εικονική και διάρκεια δίσκων Premium. Όπως φαίνεται στο παρακάτω δείγμα, η Εικονική DS14 προσφέρει ιεραρχική συνδυασμένο ανάγνωση και εγγραφή IOP Προέλευσης. Αυτό είναι ένας συνδυασμός του δίσκου και τις επιδόσεις του cache.  
    ![](media/storage-premium-storage-performance/image13.png)

*Μέγιστη συνδυάζονται μετάδοσης*  
Για να λάβετε το μέγιστο όριο συνδυασμού ανάγνωση και εγγραφή μετάδοσης, χρησιμοποιήστε ένα μεγαλύτερο μέγεθος μπλοκ και άξονα βάθους μεγάλη ουρά με πολλά νήματα εκτέλεση ανάγνωσης και εγγραφής. Μπορείτε να χρησιμοποιήσετε ένα μπλοκ μέγεθος από 64KB και βάθος ουράς 128.

## <a name="next-steps"></a>Επόμενα βήματα  

Μάθετε περισσότερα σχετικά με το χώρο αποθήκευσης Premium Azure:

- [Χώρος αποθήκευσης Premium: Χώρος αποθήκευσης υψηλών επιδόσεων για φόρτους εργασίας του Azure εικονική μηχανή](storage-premium-storage.md)  

Για χρήστες του SQL Server, Διαβάστε άρθρα για τις επιδόσεις βέλτιστες πρακτικές για τον SQL Server:

- [Απόδοση βέλτιστες πρακτικές για τον SQL Server σε εικονικές μηχανές Windows Azure](../virtual-machines/virtual-machines-windows-sql-performance.md)
- [Χώρος αποθήκευσης Azure Premium παρέχει υψηλότερη απόδοση για τον SQL Server σε Εικονική Azure](http://blogs.technet.com/b/dataplatforminsider/archive/2015/04/23/azure-premium-storage-provides-highest-performance-for-sql-server-in-azure-vm.aspx) 
