<properties
    pageTitle="Αντιμετώπιση σφαλμάτων όταν διαγράφετε λογαριασμοί Azure χώρου αποθήκευσης, κοντέινερ ή VHD σε μια ανάπτυξη του διαχειριστή πόρων | Microsoft Azure"
    description="Αντιμετώπιση σφαλμάτων όταν διαγράφετε λογαριασμοί Azure χώρου αποθήκευσης, κοντέινερ ή VHD σε μια ανάπτυξη του διαχειριστή πόρων"
    services="storage"
    documentationCenter=""
    authors="genlin"
    manager="felixwu"
    editor="na"
    tags="storage"/>

<tags
    ms.service="storage"
    ms.workload="na"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="10/17/2016"
    ms.author="genli"/>

# <a name="troubleshoot-errors-when-you-delete-azure-storage-accounts-containers-or-vhds-in-a-resource-manager-deployment"></a>Αντιμετώπιση σφαλμάτων όταν διαγράφετε λογαριασμοί Azure χώρου αποθήκευσης, κοντέινερ ή VHD σε μια ανάπτυξη του διαχειριστή πόρων

[AZURE.INCLUDE [storage-selector-cannot-delete-storage-account-container-vhd](../../includes/storage-selector-cannot-delete-storage-account-container-vhd.md)]

Που μπορεί να εμφανιστούν σφάλματα όταν προσπαθείτε να διαγράψετε ένα λογαριασμό Azure χώρου αποθήκευσης, κοντέινερ ή εικονικού σκληρού δίσκου (VHD) στην [πύλη του Azure](https://portal.azure.com). Σε αυτό το άρθρο παρέχει οδηγίες αντιμετώπισης προβλημάτων για να βοηθηθείτε στην αντιμετώπιση του προβλήματος σε μια ανάπτυξη του Azure διαχείριση πόρων.

Εάν αυτό το άρθρο δεν αφορά το Azure ζήτημά σας, επισκεφθείτε τα φόρουμ Azure στο [MSDN και υπερχείλισης στοίβας](https://azure.microsoft.com/support/forums/). Μπορείτε να δημοσιεύσετε το πρόβλημα που αντιμετωπίζετε στο φόρουμ αυτές τις ή για @AzureSupport στο Twitter. Επίσης, μπορείτε να υποβάλετε μια αίτηση υποστήριξης Azure, επιλέγοντας **Λήψη υποστήριξης** στην τοποθεσία [υποστήριξης Azure](https://azure.microsoft.com/support/options/) .

## <a name="symptoms"></a>Συμπτώματα

### <a name="scenario-1"></a>Σενάριο 1

Όταν προσπαθείτε να διαγράψετε έναν VHD σε λογαριασμό χώρου αποθήκευσης σε μια ανάπτυξη του διαχειριστή πόρων, λαμβάνετε το ακόλουθο μήνυμα σφάλματος:

**Απέτυχε η διαγραφή αντικειμένων blob 'vhds/BlobName.vhd'. Σφάλμα: Έχει αυτήν τη στιγμή μια μίσθωση στην το αντικείμενο blob και δεν υπάρχει Αναγνωριστικό μίσθωσης έχει καθοριστεί στην πρόσκληση σε.**

Αυτό το πρόβλημα μπορεί να προκύψει, επειδή μια εικονική μηχανή (Εικονική) έχει μια μίσθωση στον VHD που προσπαθείτε να διαγράψετε.

### <a name="scenario-2"></a>Σενάριο 2

Όταν προσπαθείτε να διαγράψετε ένα κοντέινερ σε λογαριασμό χώρου αποθήκευσης σε μια ανάπτυξη του διαχειριστή πόρων, λαμβάνετε το ακόλουθο μήνυμα σφάλματος:

**Απέτυχε η διαγραφή κοντέινερ 'οι VHD χώρου αποθήκευσης'. Σφάλμα: Έχει αυτήν τη στιγμή μια μίσθωση στο κοντέινερ και δεν υπάρχει Αναγνωριστικό μίσθωσης έχει καθοριστεί στην πρόσκληση σε.**

Αυτό το πρόβλημα μπορεί να προκύψει επειδή το κοντέινερ έχει έναν VHD που είναι κλειδωμένη σε κατάσταση μίσθωσης.

### <a name="scenario-3"></a>Σενάριο 3

Όταν προσπαθείτε να διαγράψετε έναν λογαριασμό χώρου αποθήκευσης σε μια ανάπτυξη του διαχειριστή πόρων, λαμβάνετε το ακόλουθο μήνυμα σφάλματος:

**Απέτυχε η διαγραφή του λογαριασμού χώρου αποθήκευσης 'StorageAccountName'. Σφάλμα: Το λογαριασμό χώρου αποθήκευσης δεν μπορούν να διαγραφούν λόγω τα αντικείμενα που χρησιμοποιείται.**

Αυτό το πρόβλημα μπορεί να προκύψει επειδή το λογαριασμό χώρου αποθήκευσης περιέχει έναν VHD που είναι σε κατάσταση μίσθωσης.

## <a name="solution"></a>Λύση

Για να επιλύσετε αυτά τα προβλήματα, πρέπει να προσδιορίσετε τον VHD που προκαλεί το σφάλμα και το σχετικό Εικονική. Στη συνέχεια, απόσπαση VHD από την εικονική Μηχανή (για δίσκων δεδομένων) ή διαγραφή η Εικονική που χρησιμοποιεί τον VHD (για το λειτουργικό σύστημα δίσκων). Αυτό καταργεί η μίσθωση από τον VHD και σας επιτρέπει να διαγραφούν.

### <a name="step-1-identify-the-problem-vhd-and-the-associated-vm"></a>Βήμα 1: Προσδιορίστε το πρόβλημα VHD και το σχετικό Εικονική


1. Είσοδος στην [πύλη του Azure](https://portal.azure.com).
2. Στο μενού **διανομέα** , επιλέξτε **όλους τους πόρους**. Μεταβείτε στο λογαριασμό χώρου αποθήκευσης που θέλετε να διαγράψετε και, στη συνέχεια, επιλέξτε **αντικείμενα BLOB** > **οι VHD**.

    ![Στιγμιότυπο οθόνης από την πύλη, με το λογαριασμό χώρου αποθήκευσης και το κοντέινερ "οι VHD" Επισήμανση](./media/storage-resource-manager-cannot-delete-storage-account-container-vhd/opencontainer.png)

3. Ελέγξτε τις ιδιότητες του κάθε VHD στο κοντέινερ. Εντοπίστε τον VHD που είναι σε κατάσταση **Leased** . Στη συνέχεια, προσδιορίστε που χρησιμοποιεί Εικονική VHD. Συνήθως, μπορείτε να καθορίσετε ποια Εικονική διατηρήσεις VHD κατά τον έλεγχο του ονόματος του VHD:

    - Λειτουργικό σύστημα δίσκων γενικά Ακολουθήστε αυτή κανόνες ονοματοθεσίας: VMNameYYYYMMDDHHMMSS.vhd
    - Δεδομένα δίσκων γενικά Ακολουθήστε αυτή κανόνες ονοματοθεσίας: VMName-ΕΕΕΕΜΜΗΗ-HHMMSS.vhd

    ![Στιγμιότυπο οθόνης των πληροφοριών κοντέινερ στην πύλη, με το όνομα του Εικονική, την κατάσταση εκμίσθωση "Κλειδωμένο" και της κατάστασης εκμίσθωση "Leased" Επισήμανση](./media/storage-resource-manager-cannot-delete-storage-account-container-vhd/locatevm.png)

### <a name="step-2-remove-the-lease-from-the-vhd"></a>Βήμα 2: Κατάργηση η μίσθωση από τον VHD

Για να διαγράψετε την εικονική Μηχανή που χρησιμοποιεί τον VHD (για το λειτουργικό σύστημα δίσκων):

1.  Είσοδος στην [πύλη του Azure](https://portal.azure.com).
2.  Στο μενού **διανομέα** , επιλέξτε **εικονικές μηχανές**.
3.  Επιλέξτε την εικονική Μηχανή που περιέχει μια μίσθωση στον VHD.
4.  Βεβαιωθείτε ότι τίποτα ενεργά χρησιμοποιεί το εικονικό υπολογιστή, και δεν χρειάζεστε πλέον η εικονική μηχανή.
5.  Στο επάνω μέρος του blade **Εικονική λεπτομέρειες** , επιλέξτε **Διαγραφή**και, στη συνέχεια, κάντε κλικ στο κουμπί **Ναι** για επιβεβαίωση.
6.  Η Εικονική πρέπει να διαγραφεί, αλλά θα πρέπει να διατηρηθούν VHD. Ωστόσο, VHD δεν είναι πλέον θα πρέπει να έχετε μια μίσθωση σε αυτό. Ενδέχεται να χρειαστούν μερικά λεπτά για την εκμίσθωση να κυκλοφορούν. Για να επαληθεύσετε ότι έχει κυκλοφορήσει η μίσθωση, μεταβείτε σε **όλους τους πόρους** > **Όνομα λογαριασμού χώρου αποθήκευσης** > **αντικείμενα BLOB** > **οι VHD**. Στο παράθυρο **Ιδιότητες αντικειμένων Blob** , η **Μίσθωση κατάστασης** τιμή πρέπει να είναι **Unlocked**.

Για να αποσπάσετε τον VHD από την εικονική Μηχανή που χρησιμοποιεί (για το δίσκων δεδομένων):

1.  Είσοδος στην [πύλη του Azure](https://portal.azure.com).
2.  Στο μενού **διανομέα** , επιλέξτε **εικονικές μηχανές**.
3.  Επιλέξτε την εικονική Μηχανή που περιέχει μια μίσθωση στον VHD.
4.  Επιλογή **δίσκων** σε το blade **Εικονική λεπτομέρειες** .
5.  Επιλέξτε το δίσκο δεδομένων που διατηρεί μια μίσθωση στον VHD. Μπορείτε να καθορίσετε ποια VHD είναι συνδεδεμένος στο δίσκο, επιλέγοντας τη διεύθυνση URL του VHD.
6.  Καθορισμός με βεβαιότητα ότι τίποτα ενεργά χρησιμοποιεί το δίσκο δεδομένων.
7.  Κάντε κλικ στην εντολή **Αποσύνδεση** το blade **Λεπτομέρειες δίσκου** .
8.  Ο δίσκος θα πρέπει τώρα να αποσπάται από την Εικονική και VHD δεν είναι πλέον θα πρέπει να έχετε μια μίσθωση σε αυτό. Ενδέχεται να χρειαστούν μερικά λεπτά για την εκμίσθωση να κυκλοφορούν. Για να επαληθεύσετε ότι έχει κυκλοφορήσει η μίσθωση, μεταβείτε σε **όλους τους πόρους** > **Όνομα λογαριασμού χώρου αποθήκευσης** > **αντικείμενα BLOB** > **οι VHD**. Στο παράθυρο **Ιδιότητες αντικειμένων Blob** , η **Μίσθωση κατάστασης** τιμή πρέπει να είναι **Unlocked**.

## <a name="what-is-a-lease"></a>Τι είναι μια μίσθωση;

Μια μίσθωση είναι μια κλειδαριά που μπορούν να χρησιμοποιηθούν για τον έλεγχο της πρόσβασης σε ένα αντικείμενο blob (για παράδειγμα, ένα VHD). Όταν ένα blob είναι μίσθωσης, μόνο οι κάτοχοι της μίσθωσης να αποκτήσετε πρόσβαση το αντικείμενο blob. Μια μίσθωση είναι σημαντικό για τους ακόλουθους λόγους:

-   Εμποδίζει καταστροφή δεδομένων εάν πολλών κάτοχοι, δοκιμάστε να κάνετε εγγραφή στο ίδιο τμήμα της το αντικείμενο blob την ίδια στιγμή.
-   Το αντικείμενο blob αποτρέπει τη διαγραφή Εάν κάτι που ενεργά τη χρησιμοποιείτε (για παράδειγμα, μια Εικονική).
-   Το λογαριασμό χώρου αποθήκευσης αποτρέπει τη διαγραφή Εάν κάτι που ενεργά τη χρησιμοποιείτε (για παράδειγμα, μια Εικονική).



## <a name="next-steps"></a>Επόμενα βήματα

- [Διαγραφή ενός λογαριασμού χώρου αποθήκευσης](storage-create-storage-account.md#delete-a-storage-account)
- [Πώς μπορείτε να διακόψετε την κλειδωμένων εκμίσθωση χώρο αποθήκευσης αντικειμένων blob στο Microsoft Azure (PowerShell)](https://gallery.technet.microsoft.com/scriptcenter/How-to-break-the-locked-c2cd6492)
