<properties
    pageTitle="Πώς να χρησιμοποιείτε το χώρο αποθήκευσης πινάκων του Azure από κείμενο φωνητικής γραφής | Microsoft Azure"
    description="Αποθηκεύστε δομημένων δεδομένων στο cloud χρησιμοποιώντας χώρος αποθήκευσης πινάκων του Azure, ένα χώρο αποθήκευσης δεδομένων NoSQL."
    services="storage"
    documentationCenter="ruby"
    authors="tamram"
    manager="carmonm"
    editor=""/>
<tags
    ms.service="storage"
    ms.workload="storage"
    ms.tgt_pltfrm="na"
    ms.devlang="ruby"
    ms.topic="article"
    ms.date="10/18/2016"
    ms.author="tamram"/>


# <a name="how-to-use-azure-table-storage-from-ruby"></a>Πώς να χρησιμοποιείτε το χώρο αποθήκευσης πινάκων του Azure από κείμενο φωνητικής γραφής

[AZURE.INCLUDE [storage-selector-table-include](../../includes/storage-selector-table-include.md)]
<br/>
[AZURE.INCLUDE [storage-try-azure-tools-queues](../../includes/storage-try-azure-tools-tables.md)]

## <a name="overview"></a>Επισκόπηση

Αυτός ο οδηγός δείχνει πώς μπορείτε να εκτελέσετε συνηθισμένα σενάρια με την υπηρεσία πίνακα Azure. Τα δείγματα γράφονται με χρήση του API φωνητικής γραφής. Τα σενάρια καλύπτεται περιλαμβάνουν **τη δημιουργία και τη διαγραφή ενός πίνακα, εισαγωγή και υποβολή ερωτημάτων οντοτήτων σε έναν πίνακα**.

[AZURE.INCLUDE [storage-table-concepts-include](../../includes/storage-table-concepts-include.md)]

[AZURE.INCLUDE [storage-create-account-include](../../includes/storage-create-account-include.md)]

## <a name="create-a-ruby-application"></a>Δημιουργία μιας εφαρμογής φωνητικής γραφής

Για οδηγίες πώς μπορείτε να δημιουργήσετε μια εφαρμογή φωνητικής γραφής, ανατρέξτε στο θέμα [φωνητικής γραφής στην εφαρμογή Web ράβδους σε μια Εικονική Azure](../virtual-machines/linux/classic/virtual-machines-linux-classic-ruby-rails-web-app.md).


## <a name="configure-your-application-to-access-storage"></a>Ρύθμιση των παραμέτρων σας εφαρμογής για να αποκτήσετε πρόσβαση χώρου αποθήκευσης

Για να χρησιμοποιήσετε το χώρο αποθήκευσης Azure, πρέπει να κάνετε λήψη και να χρησιμοποιήσετε το κείμενο φωνητικής azure πακέτο που περιλαμβάνει ένα σύνολο βιβλιοθηκών ευκολία που επικοινωνία με τις υπηρεσίες ΥΠΌΛΟΙΠΟ του χώρου αποθήκευσης.

### <a name="use-rubygems-to-obtain-the-package"></a>Χρήση RubyGems λήψης του πακέτου

1. Χρησιμοποιήστε ένα περιβάλλον γραμμής εντολών όπως **PowerShell** (Windows), το **Terminal** (Mac) ή το **πάρτι** (Unix).

2. Στο παράθυρο εντολών για να εγκαταστήσετε το περσικό και τις εξαρτήσεις, πληκτρολογήστε **Περσικό εγκατάσταση azure** .

### <a name="import-the-package"></a>Εισαγωγή του πακέτου

Χρησιμοποιήστε το πρόγραμμα επεξεργασίας κειμένου Αγαπημένα, προσθέστε τα ακόλουθα στο επάνω μέρος του αρχείου φωνητικής γραφής όπου σκοπεύετε να χρησιμοποιήσετε αποθήκευσης:

    require "azure"

## <a name="set-up-an-azure-storage-connection"></a>Ρύθμιση σύνδεσης αποθήκευσης Azure

Τη λειτουργική μονάδα azure θα διαβάσει τις μεταβλητές περιβάλλοντος **AZURE\_χώρου ΑΠΟΘΉΚΕΥΣΗΣ\_ΛΟΓΑΡΙΑΣΜΟΎ** και **AZURE\_χώρου ΑΠΟΘΉΚΕΥΣΗΣ\_ACCESS\_ΚΛΕΙΔΊ** για τις πληροφορίες που απαιτούνται για να συνδεθείτε στο λογαριασμό σας χώρο αποθήκευσης Azure. Αν δεν έχουν οριστεί αυτές τις μεταβλητές περιβάλλοντος, πρέπει να καθορίσετε τις πληροφορίες λογαριασμού πριν από τη χρήση **Azure::TableService** με τον ακόλουθο κώδικα:

    Azure.config.storage_account_name = "<your azure storage account>"
    Azure.config.storage_access_key = "<your azure storage access key>"

Για να λάβετε αυτές τις τιμές από μια κλασική ή το λογαριασμό χώρου αποθήκευσης για τη διαχείριση πόρων στην πύλη του Azure:

1. Συνδεθείτε [πύλη του Azure](https://portal.azure.com).
2. Μεταβείτε στο λογαριασμό του χώρου αποθήκευσης που θέλετε να χρησιμοποιήσετε.
3. Στο το blade ρυθμίσεις στα δεξιά, κάντε κλικ στην επιλογή **Πλήκτρα πρόσβασης**.
4. Στο το blade πλήκτρα πρόσβασης που εμφανίζεται, θα δείτε το πλήκτρο πρόσβασης 1 και το κλειδί πρόσβασης 2. Μπορείτε να χρησιμοποιήσετε ένα από τα παραπάνω. 
5. Κάντε κλικ στο εικονίδιο Αντιγραφή για να αντιγράψετε τον αριθμό-κλειδί στο Πρόχειρο. 

Για να λάβετε αυτές τις τιμές από ένα λογαριασμό κλασική χώρου αποθήκευσης στην κλασική Azure πύλη:

1. Συνδεθείτε [πύλη κλασική Azure](https://manage.windowsazure.com).
2. Μεταβείτε στο λογαριασμό του χώρου αποθήκευσης που θέλετε να χρησιμοποιήσετε.
3. Κάντε κλικ στην επιλογή **ΔΙΑΧΕΊΡΙΣΗ ΠΛΉΚΤΡΑ ΠΡΌΣΒΑΣΗΣ** στο κάτω μέρος του παραθύρου περιήγησης.
4. Στο αναδυόμενο παράθυρο διαλόγου, θα δείτε το όνομα λογαριασμού χώρου αποθήκευσης, πρόσβαση πρωτεύον κλειδί και πρόσβασης δευτερεύον κλειδί. Για το πλήκτρο πρόσβασης, μπορείτε να χρησιμοποιήσετε κύρια ή δευτερεύοντα αυτό. 
5. Κάντε κλικ στο εικονίδιο Αντιγραφή για να αντιγράψετε τον αριθμό-κλειδί στο Πρόχειρο.

## <a name="create-a-table"></a>Δημιουργία πίνακα

Το αντικείμενο **Azure::TableService** σάς επιτρέπει να εργάζεστε με πίνακες και οντοτήτων. Για να δημιουργήσετε έναν πίνακα, χρησιμοποιήστε το **Δημιουργία\_table()** μέθοδο. Το παρακάτω παράδειγμα δημιουργεί έναν πίνακα ή εκτύπωση από το σφάλμα εάν υπάρχει κάποια.

    azure_table_service = Azure::TableService.new
    begin
      azure_table_service.create_table("testtable")
    rescue
      puts $!
    end

## <a name="add-an-entity-to-a-table"></a>Προσθέστε μια οντότητα σε έναν πίνακα

Για να προσθέσετε μια οντότητα, πρέπει πρώτα να δημιουργήσετε ένα αντικείμενο κατακερματισμός που ορίζει ιδιότητες σας οντότητα. Σημειώστε ότι για κάθε οντότητα που πρέπει να καθορίσετε μια **PartitionKey** και **RowKey**. Αυτά είναι τα μοναδικά αναγνωριστικά των οντοτήτων σας και είναι τιμές που μπορούν να αναζητηθούν πολύ ταχύτερα από τις άλλες ιδιότητες. Χώρος αποθήκευσης Azure χρησιμοποιεί **PartitionKey** για την αυτόματη διανομή οντοτήτων του πίνακα επάνω από πολλούς κόμβους χώρου αποθήκευσης. Οντοτήτων με το ίδιο **PartitionKey** αποθηκεύονται στον ίδιο κόμβο. Το **RowKey** είναι το μοναδικό Αναγνωριστικό της οντότητας εντός τα διαμερίσματα ανήκει σε.

    entity = { "content" => "test entity",
      :PartitionKey => "test-partition-key", :RowKey => "1" }
    azure_table_service.insert_entity("testtable", entity)

## <a name="update-an-entity"></a>Ενημέρωση μιας οντότητας

Υπάρχουν πολλές μεθόδους που είναι διαθέσιμες για να ενημερώσετε μια υπάρχουσα οντότητα:

* **Ενημέρωση\_entity():** Ενημέρωση μιας υπάρχουσας οντότητας, αντικαθιστώντας αυτό.
* **συγχώνευσης\_entity():** Ενημερώνει μια υπάρχουσα οντότητα συγχώνευση νέες τιμές ιδιοτήτων στο την υπάρχουσα οντότητα.
* **Εισαγωγή\_ή\_συγχώνευσης\_entity():** Ενημερώνει μια υπάρχουσα οντότητα, αντικαθιστώντας αυτό. Εάν υπάρχει καμία οντότητα, θα εισαχθεί ένα νέο:
* **Εισαγωγή\_ή\_αντικατάσταση\_entity():** Ενημερώνει μια υπάρχουσα οντότητα συγχώνευση νέες τιμές ιδιοτήτων στο την υπάρχουσα οντότητα. Εάν υπάρχει καμία οντότητα, θα εισαχθεί ένα νέο.

Το παρακάτω παράδειγμα παρουσιάζει ενημέρωση μιας οντότητα χρησιμοποιώντας **Ενημέρωση\_entity()**:

    entity = { "content" => "test entity with updated content",
      :PartitionKey => "test-partition-key", :RowKey => "1" }
    azure_table_service.update_entity("testtable", entity)

Με **Ενημέρωση\_entity()** και **συγχώνευσης\_entity()**, εάν δεν υπάρχει η οντότητα που θέλετε να ενημερώσετε, στη συνέχεια, η λειτουργία update θα αποτύχει. Επομένως, εάν θέλετε να αποθηκεύσετε μια οντότητα ανεξάρτητα από το εάν υπάρχει ήδη, θα πρέπει να αντί για αυτό χρησιμοποιήσετε **Εισαγωγή\_ή\_αντικατάσταση\_entity()** ή **Εισαγωγή\_ή\_συγχώνευσης\_entity()**.

## <a name="work-with-groups-of-entities"></a>Εργασία με ομάδες οντοτήτων

Μερικές φορές έχει νόημα να υποβάλετε πολλές λειτουργίες μαζί σε μια δέσμη για να βεβαιωθείτε ότι ατομικής επεξεργασία από το διακομιστή. Για να πραγματοποιήσετε που, μπορείτε πρώτα να δημιουργήσετε ένα αντικείμενο **δέσμη** και, στη συνέχεια, χρησιμοποιήστε το **Εκτέλεση\_batch()** μέθοδος σε **TableService**. Το παρακάτω παράδειγμα παρουσιάζει την υποβολή δύο οντοτήτων με RowKey 2 και 3 σε μια δέσμη. Παρατηρήστε ότι λειτουργεί μόνο για οντοτήτων με το ίδιο PartitionKey.

    azure_table_service = Azure::TableService.new
    batch = Azure::Storage::Table::Batch.new("testtable",
      "test-partition-key") do
      insert "2", { "content" => "new content 2" }
      insert "3", { "content" => "new content 3" }
    end
    results = azure_table_service.execute_batch(batch)

## <a name="query-for-an-entity"></a>Ερώτημα για μια οντότητα

Για να το ερώτημα σε μια οντότητα σε έναν πίνακα, χρησιμοποιήστε το **Λήψη\_entity()** μέθοδος, μεταφέροντας το όνομα του πίνακα, **PartitionKey** και **RowKey**.

    result = azure_table_service.get_entity("testtable", "test-partition-key",
      "1")

## <a name="query-a-set-of-entities"></a>Ένα σύνολο οντοτήτων ερωτήματος

Για να ερώτημα σε ένα σύνολο οντοτήτων σε έναν πίνακα, δημιουργήστε ένα αντικείμενο κατακερματισμός ερωτήματος και χρησιμοποιήστε το **ερωτήματος\_entities()** μέθοδο. Το παρακάτω παράδειγμα δείχνει γρήγορα όλα τα οντοτήτων με το ίδιο **PartitionKey**:

    query = { :filter => "PartitionKey eq 'test-partition-key'" }
    result, token = azure_table_service.query_entities("testtable", query)

> [AZURE.NOTE] Εάν το σύνολο των αποτελεσμάτων είναι πολύ μεγάλο για ένα μεμονωμένο ερώτημα για να επιστρέψετε, ενός διακριτικού συνέχισης θα επιστραφεί το οποίο μπορείτε να χρησιμοποιήσετε για να ανακτήσετε οι επόμενες σελίδες.

## <a name="query-a-subset-of-entity-properties"></a>Ένα υποσύνολο οντότητα ιδιοτήτων ερωτήματος

Ένα ερώτημα σε έναν πίνακα μπορεί να ανακτήσει ιδιότητες μερικά μόνο από μια οντότητα. Αυτήν την τεχνική, που ονομάζεται "Προβολή", μειώνει το εύρος ζώνης και να βελτιώσετε τις επιδόσεις του ερωτήματος, ειδικά για μεγάλη οντοτήτων. Χρησιμοποιήστε τον όρο select και μεταβιβάζουν τα ονόματα από τις ιδιότητες που θέλετε να εμφανιστεί επάνω από το πρόγραμμα-πελάτη.

    query = { :filter => "PartitionKey eq 'test-partition-key'",
      :select => ["content"] }
    result, token = azure_table_service.query_entities("testtable", query)

## <a name="delete-an-entity"></a>Διαγραφή οντότητας

Για να διαγράψετε μια οντότητα, χρησιμοποιήστε το **Διαγραφή\_entity()** μέθοδο. Πρέπει να περάσει στο όνομα του πίνακα που περιέχει την οντότητα, η PartitionKey και RowKey της οντότητας.

        azure_table_service.delete_entity("testtable", "test-partition-key", "1")

## <a name="delete-a-table"></a>Διαγραφή ενός πίνακα

Για να διαγράψετε έναν πίνακα, χρησιμοποιήστε το **Διαγραφή\_table()** μέθοδο και Πέρασμα στο όνομα του πίνακα που θέλετε να διαγράψετε.

        azure_table_service.delete_table("testtable")

## <a name="next-steps"></a>Επόμενα βήματα

Για να μάθετε σχετικά με τις πιο σύνθετες εργασίες χώρου αποθήκευσης, ακολουθήστε αυτές τις συνδέσεις:

- [Ιστολόγιο ομάδας Azure χώρου αποθήκευσης](http://blogs.msdn.com/b/windowsazurestorage/)
- Αρχείο φύλαξης [SDK Azure για το κείμενο φωνητικής γραφής](http://github.com/WindowsAzure/azure-sdk-for-ruby) στο GitHub
