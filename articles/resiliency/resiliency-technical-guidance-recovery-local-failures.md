<properties
   pageTitle="Τεχνική καθοδήγηση: αποκατάστασης από Τοπικές αποτυχίες στο Azure | Microsoft Azure"
   description="Άρθρο στην κατανόηση και σχεδίαση είναι ανθεκτικά, ιδιαίτερα διαθέσιμη, ανοχή εφαρμογές, καθώς και σχεδιασμός για αποκατάσταση εστιασμένη σε τοπικές αποτυχίες εντός Azure."
   services=""
   documentationCenter="na"
   authors="adamglick"
   manager="saladki"
   editor=""/>

<tags
   ms.service="resiliency"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="08/18/2016"
   ms.author="aglick"/>

#<a name="azure-resiliency-technical-guidance-recovery-from-local-failures-in-azure"></a>Τεχνική καθοδήγηση Azure ανοχή: αποκατάστασης από Τοπικές αποτυχίες στο Azure

Υπάρχουν δύο κύρια κίνδυνο για διαθεσιμότητα εφαρμογών:

* Την αποτυχία συσκευών, όπως μονάδες και τους διακομιστές
* Εξάντλησης των κρίσιμων πόροι, όπως υπολογισμού συνθήκες φόρτωσης κορύφωσης

Azure παρέχει ένα συνδυασμό διαχείριση πόρων, ελαστικότητας, εξισορρόπηση φόρτου και διαμερισμάτων για να ενεργοποιήσετε την υψηλή διαθεσιμότητα υπό αυτές τις συνθήκες. Ορισμένες από αυτές τις δυνατότητες που εκτελούνται αυτόματα για όλες τις υπηρεσίες του Azure. Ωστόσο, σε ορισμένες περιπτώσεις, ο προγραμματιστής εφαρμογών πρέπει να γίνει πρόσθετη εργασία για να επωφεληθείτε από αυτά.

##<a name="cloud-services"></a>Υπηρεσίες cloud

Azure υπηρεσίες Cloud αποτελείται από συλλογές ενός ή περισσότερων ρόλων web ή εργασίας. Μία ή περισσότερες παρουσίες του ρόλου μπορούν να εκτελούνται ταυτόχρονα. Η ρύθμιση παραμέτρων καθορίζει τον αριθμό των παρουσιών. Ρόλος παρουσίες παρακολουθούνται και διαχείριση κατά ένα στοιχείο που ονομάζεται στον ελεγκτή ύφασμα. Στον ελεγκτή ύφασμα εντοπίζει και αποκρίνεται σε υλικό και λογισμικό αποτυχίες αυτόματα.

Κάθε παρουσία ρόλων εκτελείται στο δικό του εικονική μηχανή (Εικονική) και επικοινωνεί με τον ελεγκτή ύφασμα μέσω ενός εκπροσώπου επισκέπτη. Ο παράγοντας επισκέπτη συλλέγει πόρων και κόμβο μετρήσεις, συμπεριλαμβάνοντας Εικονική χρήση, την κατάσταση, αρχεία καταγραφής, χρήση πόρων, εξαιρέσεις και τις συνθήκες αποτυχία. Στον ελεγκτή ύφασμα ερωτήματα τον παράγοντα επισκέπτης σε χρονικά διαστήματα με δυνατότητα ρύθμισης παραμέτρων και την επανεκκίνηση του η Εικονική, εάν ο παράγοντας επισκέπτης δεν ανταποκρίνεται. Σε περίπτωση αποτυχίας υλικού, του ελεγκτή συσχετισμένη ύφασμα μετακινεί όλες τις εμφανίσεις που επηρεάζεται ρόλο σε έναν νέο κόμβο υλικό και ρυθμίζει τις παραμέτρους του δικτύου για να την κυκλοφορία δρομολόγηση εκεί.

Για να επωφεληθείτε από αυτές τις δυνατότητες, οι προγραμματιστές πρέπει να εξασφαλίσετε ότι όλοι οι ρόλοι υπηρεσίας αποφεύγετε την αποθήκευση κατάσταση σε παρουσίες του ρόλου. Αντί για αυτό, όλα τα δεδομένα μόνιμη θα πρέπει να είναι προσβάσιμα από διαρκή χώρο αποθήκευσης, όπως το χώρο αποθήκευσης Azure ή βάση δεδομένων SQL Azure. Αυτό σας επιτρέπει σε όλους τους ρόλους χειρισμού των αιτήσεων. Σημαίνει επίσης ότι παρουσίες ρόλο να μεταβείτε προς τα κάτω ανά πάσα στιγμή, χωρίς τη δημιουργία ασυνεπειών σε μεταβατικές ή μόνιμη κατάσταση της υπηρεσίας.

Η απαίτηση για την αποθήκευση κατάσταση εξωτερικά τους ρόλους έχει πολλές συνέπειες. Για παράδειγμα, σημαίνει ότι όλες οι σχετικές αλλαγές σε έναν πίνακα αποθήκευσης Azure πρέπει να αλλάξει σε μία συναλλαγή οντότητα ομάδας, εάν είναι δυνατό. Φυσικά, δεν είναι πάντα δυνατή για να κάνετε όλων των αλλαγών σε μία συναλλαγή. Πρέπει να λάβετε ειδική προσοχή για να εξασφαλιστεί ότι αποτυχίες παρουσία ρόλο δεν προκαλούν προβλήματα κατά την τους διακοπή μεγάλη διάρκεια εκτέλεσης λειτουργιών που εκτείνονται σε δύο ή περισσότερες ενημερώσεις για το μόνιμη κατάσταση της υπηρεσίας. Εάν άλλο ρόλο επιχειρεί να επαναλάβει όπως μια λειτουργία, αυτό θα πρέπει να πρόκειται να και να χειριστείτε την περίπτωση όπου η εργασία ολοκληρώθηκε μερικώς.

Για παράδειγμα, εξετάστε το ενδεχόμενο μια υπηρεσία που διαμερίσματα δεδομένων σε πολλούς χώρους αποθήκευσης. Εάν ένα ρόλο εργαζόμενου πάει προς τα κάτω κατά την μετακίνηση μιας shard, η επανεγκατάσταση του shard ίσως δεν ολοκληρωθεί. Ή, ενδέχεται να επαναληφθεί η μετεγκατάσταση από την πρώτη στιγμή από ένα ρόλο διαφορετικό εργαζόμενου, προκαλώντας ενδεχομένως ορφανό δεδομένων ή καταστροφή δεδομένων. Για να αποφύγετε προβλήματα, μεγάλη διάρκεια εκτέλεσης λειτουργιών πρέπει να είναι ένα ή και τα δύο από τα εξής:

 * *Idempotent*: επαναλαμβανόμενη χωρίς ανεπιθύμητα αποτελέσματα. Για να idempotent, μια λειτουργία μεγάλη διάρκεια εκτέλεσης θα πρέπει να έχουν το ίδιο αποτέλεσμα, ανεξάρτητα από το πόσες φορές εκτελείται, ακόμα και όταν το διακόπτεται κατά την εκτέλεση.
 * *Βαθμιαία με δυνατότητα επανεκκίνησης*: μπορείτε να συνεχίσετε από το πιο πρόσφατο σημείο αποτυχίας. Για να σταδιακά με δυνατότητα επανεκκίνησης, μια λειτουργία μεγάλη διάρκεια εκτέλεσης πρέπει να αποτελούνται από μια ακολουθία μικρότερο ατομικής λειτουργιών. Το επίσης θα πρέπει να καταγράψει την πρόοδο του έργου στο διαρκή χώρο αποθήκευσης, ώστε κάθε οι επόμενες κλήση παίρνει όπου διακοπεί η προαπαιτούμενη εργασία.

Τέλος, όλες οι λειτουργίες μεγάλη διάρκεια εκτέλεσης είναι θα πρέπει να είναι δυνατή επανειλημμένα, μέχρι να τους ολοκληρωθεί με επιτυχία. Για παράδειγμα, μια λειτουργία παροχής μπορεί να είναι τοποθετείται σε ένα Azure ουρά και καταργούνται από την ουρά, στη συνέχεια, από ένα ρόλο εργαζόμενου μόνο όταν το με επιτυχία. Συλλογή των απορριμμάτων μπορεί να χρειαστεί να εκκαθάριση των δεδομένων που διακοπεί λειτουργίες Δημιουργία.

###<a name="elasticity"></a>Ελαστικότητα

Ο αρχικός αριθμός των παρουσιών που εκτελούνται για κάθε ρόλο καθορίζεται στη ρύθμιση παραμέτρων κάθε ρόλο. Οι διαχειριστές αρχικά πρέπει να ορίσετε κάθε ρόλο για να εκτελέσετε με δύο ή περισσότερες παρουσίες που βασίζεται σε αναμενόμενα φόρτωση. Αλλά που μπορεί να διευκολύνει την κλιμάκωση παρουσίες ρόλο προς τα επάνω ή προς τα κάτω με χρήση μοτίβα αλλαγή. Μπορείτε να το κάνετε με μη αυτόματο τρόπο στην πύλη του Azure ή μπορείτε να αυτοματοποιήσετε τη διαδικασία με τη χρήση του Windows PowerShell, το API της υπηρεσίας διαχείρισης ή εργαλεία τρίτων κατασκευαστών. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Πώς να autoscale μια εφαρμογή του](../cloud-services/cloud-services-how-to-scale.md).

###<a name="partitioning"></a>Δημιουργία διαμερισμάτων

Στον ελεγκτή Azure ύφασμα χρησιμοποιεί δύο τύπους διαμερίσματα:

* *Ενημέρωση τομέα* χρησιμοποιείται για να αναβαθμίσετε μια υπηρεσία παρουσίες ρόλο σε ομάδες. Azure αναπτύσσει παρουσιών της υπηρεσίας σε πολλούς τομείς ενημερωμένη έκδοση. Για μια ενημέρωση στην ίδια θέση, του ελεγκτή ύφασμα εμφανίζει προς τα κάτω όλων των εμφανίσεων σε μία ενημέρωση τομέα, ενημερώνει τους και, στη συνέχεια, πραγματοποιεί επανεκκίνηση πριν περάσετε στον τομέα επόμενη ενημέρωση. Αυτή η προσέγγιση αποτρέπει δεν είναι διαθέσιμη κατά τη διαδικασία ενημέρωσης ολόκληρη την υπηρεσία.
* *Σφάλμα τομέα* καθορίζει πιθανά σημεία αποτυχία υλικού ή δικτύου. Για κάθε ρόλο που έχει περισσότερες από μία παρουσία, του ελεγκτή ύφασμα εξασφαλίζει ότι οι εμφανίσεις κατανέμονται σε πολλούς τομείς σφαλμάτων, για να αποτρέψετε την διακόψετε υπηρεσίας αποτυχίες απομόνωσης υλικού. Σφάλμα τομείς διέπουν όλα έκθεσης διακομιστή και αποτυχίες σύμπλεγμα.

[Azure συμφωνία σε επίπεδο εξυπηρέτησης (SLA)](https://azure.microsoft.com/support/legal/sla/) εγγυάται ότι όταν δύο ή περισσότερες παρουσίες ρόλο web έχουν αναπτυχθεί σε διαφορετική σφαλμάτων και αναβάθμιση τομείς, που θα έχουν εξωτερικών συνδεσιμότητας τουλάχιστον 99.95 τοις εκατό του χρόνου. Σε αντίθεση με τομείς ενημέρωσης, δεν υπάρχει τρόπος για να ελέγξετε τον αριθμό των σφαλμάτων τομείς. Azure αυτόματα εκχωρούν τομείς σφαλμάτων και κατανέμει παρουσίες ρόλο τους. At τουλάχιστον τα πρώτα δύο παρουσίες του κάθε ρόλο τοποθετούνται σε διαφορετική σφαλμάτων και αναβάθμιση τομέων για να βεβαιωθείτε ότι κάθε ρόλο με τουλάχιστον δύο παρουσίες θα πληροί το SLA. Αντιπροσωπεύεται στο διάγραμμα που ακολουθεί.

![Απλοποιημένη προβολή του απομόνωση τομέα σφαλμάτων](./media/resiliency-technical-guidance-recovery-local-failures/partitioning-1.png)

###<a name="load-balancing"></a>Εξισορρόπηση φόρτου

Διέρχεται όλη την εισερχόμενη κυκλοφορία σε ένα ρόλο web από μια μονάδα εξισορρόπησης φόρτου χωρίς κατάσταση, η οποία κατανέμει αιτήσεις πελάτη μεταξύ των εμφανίσεων ρόλο. Παρουσίες μεμονωμένα ρόλο δεν έχετε δημόσια διευθύνσεις IP και δεν βρίσκονται απευθείας και από το Internet. Ρόλοι Web είναι χωρίς κατάσταση, έτσι ώστε κάθε αίτηση προγράμματος-πελάτη είναι δυνατό να δρομολογηθούν σε οποιαδήποτε παρουσία ρόλο. Ένα συμβάν [StatusCheck](https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleenvironment.statuscheck.aspx) ενεργοποιείται κάθε 15 δευτερόλεπτα. Μπορείτε να το χρησιμοποιήσετε για να υποδείξετε εάν ο ρόλος είναι έτοιμη να λάβει την κυκλοφορία ή, εάν είναι απασχολημένο και θα πρέπει να ληφθούν από την περιστροφή μονάδα εξισορρόπησης φόρτου.

##<a name="virtual-machines"></a>Εικονικές μηχανές

Azure εικονικές μηχανές διαφέρει από πλατφόρμα, όπως μια υπηρεσία (PaaS), τον υπολογισμό ρόλους σε διάφορες διατηρεί τις σχέση με υψηλή διαθεσιμότητα. Σε ορισμένες περιπτώσεις, πρέπει να γίνει πρόσθετη εργασία για να βεβαιωθείτε ότι υψηλής διαθεσιμότητας.

###<a name="disk-durability"></a>Διάρκεια ζωής δίσκου

Σε αντίθεση με τις παρουσίες ρόλο PaaS, δεδομένα που είναι αποθηκευμένα στις μονάδες δίσκων εικονική μηχανή είναι μόνιμη ακόμα και όταν η εικονική μηχανή είναι έχουν μετακινηθεί. Azure εικονικές μηχανές Χρησιμοποιήστε Εικονική δίσκων που υπάρχουν ως αντικείμενα blob στο χώρο αποθήκευσης Azure. Λόγω των χαρακτηριστικών διαθεσιμότητα Azure χώρου αποθήκευσης, τα δεδομένα που είναι αποθηκευμένα στις μονάδες δίσκων μια εικονική μηχανή είναι επίσης διαθέσιμη ιδιαίτερα.

Σημειώστε ότι η μονάδα δίσκου D (σε Windows ΣΠΣ) είναι η εξαίρεση σε αυτόν τον κανόνα. Μονάδα δίσκου D είναι στην πραγματικότητα φυσικής αποθήκευσης στο διακομιστή rack που φιλοξενεί την εικονική Μηχανή και τα δεδομένα θα χαθούν εάν η Εικονική είναι διαγραφή τους. Μονάδα δίσκου D προορίζεται για προσωρινή αποθήκευση μόνο. Στο Linux, Azure "συνήθως" (αλλά όχι πάντα) εκθέτει το προσωρινό στον τοπικό δίσκο ως /dev/sdb μπλοκ συσκευή. Αυτό είναι συχνά ενεργοποιηθεί από τον παράγοντα Linux Azure ως /mnt/resource ή /mnt τα σημεία ενεργοποίησης (ρυθμίζεται μέσω /etc/waagent.conf).

###<a name="partitioning"></a>Δημιουργία διαμερισμάτων

Azure εγγενώς κατανοούν τις βαθμίδες σε μια εφαρμογή PaaS (ρόλου web και ρόλων εργαζόμενου) και, επομένως, να σωστά τις διανείμετε σε τομείς σφαλμάτων και ενημέρωση. Αντίθετα, τα επίπεδα σε μια υποδομή ως μιας εφαρμογής υπηρεσίας (IaaS) πρέπει να οριστεί με μη αυτόματο τρόπο μέσω διαθεσιμότητα σύνολα. Διαθεσιμότητα σύνολα απαιτούνται για ένα SLA στην περιοχή IaaS.

![Διαθεσιμότητα σύνολα για Azure εικονικές μηχανές](./media/resiliency-technical-guidance-recovery-local-failures/partitioning-2.png)

Στο παραπάνω διάγραμμα, η σειρά Internet Information Services (IIS) (η οποία λειτουργεί ως ένα επίπεδο εφαρμογής web) και την κλίμακα SQL (η οποία λειτουργεί ως μια σειρά δεδομένων) έχουν εκχωρηθεί σε διαφορετικές διαθεσιμότητα σύνολα. Αυτό εξασφαλίζει ότι όλες τις εμφανίσεις της κάθε επίπεδο έχει πλεονασμού υλικού με τη διανομή εικονικές μηχανές σε όλους τους τομείς σφαλμάτων και ότι ολόκληρο βαθμίδες δεν έχουν ληφθεί προς τα κάτω κατά τη διάρκεια της ενημέρωσης.

###<a name="load-balancing"></a>Εξισορρόπηση φόρτου

Εάν το ΣΠΣ θα πρέπει να έχετε την κυκλοφορία τους κατανέμεται, πρέπει να μπορείτε να ομαδοποιήσετε του ΣΠΣ σε μια εφαρμογή και φόρτωση υπολοίπου σε ένα συγκεκριμένο τελικό σημείο TCP ή UDP. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [εικονικές μηχανές εξισορρόπηση φόρτου](../virtual-machines/virtual-machines-linux-load-balance.md). Εάν το ΣΠΣ λαμβάνουν εισαγωγή δεδομένων από άλλη προέλευση (για παράδειγμα, ένας μηχανισμός ουράς), δεν απαιτείται μια μονάδα εξισορρόπησης φόρτου. Η μονάδα εξισορρόπησης φόρτου χρησιμοποιεί έναν έλεγχο εύρυθμης λειτουργίας βασικές για να προσδιορίσετε εάν πρέπει να σταλεί κίνηση στον κόμβο. Επίσης, είναι δυνατό να δημιουργήσετε το δικό σας καθετήρες για την υλοποίηση μετρικά συγκεκριμένη εφαρμογή εύρυθμης λειτουργίας που καθορίζουν αν η Εικονική πρέπει να λάβει την κυκλοφορία.

##<a name="storage"></a>Χώρος αποθήκευσης

Azure χώρου αποθήκευσης είναι η υπηρεσία διαρκή δεδομένα γραμμής βάσης για το Azure. Παρέχει blob, πίνακα, ουρά και Εικονική χώρο αποθήκευσης στο δίσκο. Χρησιμοποιεί ένα συνδυασμό αναπαραγωγής και διαχείριση πόρων για την παροχή υψηλή διαθεσιμότητα μέσα σε ένα μεμονωμένο κέντρο δεδομένων. Η διαθεσιμότητα αποθήκευσης Azure SLA εγγυάται ότι τουλάχιστον 99,9 ποσοστό του χρόνου:

* Σωστά μορφοποιημένο αιτήσεις για την προσθήκη, ενημέρωση, διαβάστε και διαγραφή δεδομένων θα γίνει με επιτυχία και σωστά επεξεργασία.
* Λογαριασμοί χώρου αποθήκευσης θα έχουν τη δυνατότητα σύνδεσης με την πύλη στο Internet.

###<a name="replication"></a>Αναπαραγωγή

Azure αποθήκευσης διευκολύνει διάρκεια ζωής δεδομένα διατηρούνται πολλά αντίγραφα όλων των δεδομένων σε διαφορετικές μονάδες σε πλήρως ανεξάρτητες φυσικής αποθήκευσης υποσυστημάτων μέσα στην περιοχή. Αναπαραγωγή συγχρονισμένα δεδομένα και όλα τα αντίγραφα είναι δεσμευμένη πριν από την εγγραφή αναγνωρίζεται. Azure χώρου αποθήκευσης είναι ιδιαίτερα συνεπή, γεγονός που σημαίνει ότι είναι εγγυημένη διαβάζει ώστε να αντικατοπτρίζει το πιο πρόσφατο εγγραφές. Επιπλέον, αντίγραφα των δεδομένων συνεχή σάρωση για να εντοπίσετε και να επιδιορθώσετε σήψη bit, μια συχνά παραβλέπεται απειλή για την ακεραιότητα των αποθηκευμένων δεδομένων.

Υπηρεσίες οφέλη από την αναπαραγωγή χρησιμοποιώντας αποθήκευσης Azure. Ο προγραμματιστής υπηρεσιών δεν χρειάζεται να κάνετε πρόσθετη εργασία για την ανάκτηση από μια τοπική αποτυχία.

###<a name="resource-management"></a>Διαχείριση πόρων

Λογαριασμοί χώρου αποθήκευσης που έχουν δημιουργηθεί μετά την Μαΐου 2014, μπορεί να αυξηθεί έως 500 TB (το προηγούμενο μέγιστο ήταν 200 TB). Εάν απαιτείται επιπλέον χώρο, εφαρμογές πρέπει να είναι σχεδιασμένες για να χρησιμοποιήσετε πολλούς λογαριασμούς χώρου αποθήκευσης.

###<a name="virtual-machine-disks"></a>Εικονική μηχανή δίσκων

Μια εικονική μηχανή δίσκου αποθηκεύονται ως blob σελίδας στο χώρο αποθήκευσης Azure, παρέχοντας την όλες τις ίδιες ιδιότητες διάρκεια ζωής και κλιμάκωση ως χώρος αποθήκευσης αντικειμένων Blob. Αυτήν τη σχεδίαση κάνει τα δεδομένα στο δίσκο μια εικονική μηχανή μόνιμη, ακόμα και εάν αποτύχει διακομιστή στον οποίο εκτελείται η Εικονική και η Εικονική πρέπει να γίνει επανεκκίνηση σε άλλο διακομιστή.

##<a name="database"></a>Βάση δεδομένων

###<a name="sql-database"></a>Βάση δεδομένων SQL

Βάση δεδομένων SQL του Azure παρέχει βάσης δεδομένων ως υπηρεσία. Επιτρέπει σε εφαρμογές να γρήγορα προμήθεια, εισαγάγετε τα δεδομένα στο και ερωτήματος σχεσιακές βάσεις δεδομένων. Παρέχει πολλές από τις οικείες δυνατότητες του SQL Server και λειτουργικότητα, ενώ το βάρος της υλικό, ρύθμιση παραμέτρων, ενημέρωση και ανοχή abstracting.

>[AZURE.NOTE] Βάση δεδομένων SQL του Azure δεν παρέχει τη δυνατότητα-προς-ένα ομοιομορφίας με τον SQL Server. Έχει που προορίζονται για την κάλυψη διαφορετικό σύνολο απαιτήσεις--ένα που έχει μοναδικά κατάλληλοι για τις εφαρμογές του cloud (ελαστικότητας κλίμακα, βάση δεδομένων ως υπηρεσία για να μειώσετε το κόστος συντήρησης, και ούτω καθεξής). Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Επιλέξτε μια επιλογή SQL Server στο cloud: βάση δεδομένων SQL Azure (PaaS) ή του SQL Server σε Azure VM (IaaS)](../sql-database/sql-database-paas-vs-sql-server-iaas.md).

####<a name="replication"></a>Αναπαραγωγή

Βάση δεδομένων SQL του Azure παρέχει ενσωματωμένη υποστηρίζεται σε επίπεδο κόμβου αποτυχία. Όλες οι εγγραφές σε μια βάση δεδομένων αναπαράγονται αυτόματα σε δύο ή περισσότερες κόμβους φόντου μέσω μια τεχνική υποβολή απαρτίας. (Η κύρια και δευτερεύουσα τουλάχιστον μία πρέπει να βεβαιωθείτε ότι έχει συνταχθεί τη δραστηριότητα στο αρχείο καταγραφής συναλλαγών, πριν από τη συναλλαγή θεωρείται επιτυχής και επιστρέφει.) Στην περίπτωση αποτυχίας κόμβου, τη βάση δεδομένων αυτόματα αποτυγχάνει επάνω σε ένα από τα δευτερεύοντα αντίγραφα. Αυτό προκαλεί μια διακοπή μεταβατικές σύνδεσης για εφαρμογές προγράμματος-πελάτη. Για αυτόν το λόγο, όλοι οι πελάτες βάση δεδομένων SQL Azure πρέπει να υλοποιήσετε κάποια μορφή χειρισμού μεταβατικές σύνδεσης. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Επανάληψη υπηρεσίας συγκεκριμένες οδηγίες](../best-practices-retry-service-specific.md).

####<a name="resource-management"></a>Διαχείριση πόρων

Κάθε βάση δεδομένων, όταν δημιουργήσει, έχει ρυθμιστεί με ένα ανώτατο όριο μεγέθους. Το μέγιστο μέγεθος αυτήν τη στιγμή διαθέσιμα είναι 1 TB (μέγεθος όρια ποικίλλουν ανάλογα με το επίπεδο υπηρεσιών, ανατρέξτε στο θέμα [επίπεδα υπηρεσίας και επίπεδα επιδόσεων βάσεις δεδομένων SQL Azure](../sql-database/sql-database-resource-limits.md#service-tiers-and-performance-levels). Όταν μια βάση δεδομένων επισκέψεις το ανώτατο όριο μεγέθους, απορρίπτει πρόσθετες εντολές INSERT ή UPDATE. (Υποβολή ερωτημάτων και τη διαγραφή δεδομένων είναι δυνατή.)

Μέσα σε μια βάση δεδομένων, βάση δεδομένων SQL Azure χρησιμοποιεί ένα ύφασμα για τη διαχείριση πόρων. Ωστόσο, αντί για έναν ελεγκτή ύφασμα, που χρησιμοποιεί μια τοπολογία κλήση για τον εντοπισμό αποτυχίες. Σε κάθε ρεπλίκα σε ένα σύμπλεγμα έχει δύο γειτόνων και είναι υπεύθυνος για τον εντοπισμό όταν πάει προς τα κάτω. Όταν μια ρεπλίκα μεταβαίνει προς τα κάτω, τα γειτονικά έναυσμα έναν παράγοντα αλλαγή των ρυθμίσεων παραμέτρων για να δημιουργήσετε ξανά σε άλλον υπολογιστή. Μηχανισμός περιορισμού παρέχεται ώστε να λογική διακομιστή δεν χρησιμοποιήσετε πάρα πολλούς πόρους σε υπολογιστή ή υπερβαίνουν τα όρια φυσικής του υπολογιστή.

###<a name="elasticity"></a>Ελαστικότητα

Εάν η εφαρμογή απαιτεί περισσότερους χαρακτήρες από το όριο 1 TB βάσης δεδομένων, αυτό πρέπει να υλοποιήσετε ένα προσέγγισης κλίμακα. Κλίμακα ανάληψη με βάση δεδομένων SQL Azure με με μη αυτόματο τρόπο διαμερισμάτων, γνωστές και ως sharding, δεδομένων σε πολλές βάσεις δεδομένων SQL. Αυτή η προσέγγιση κλιμάκωσης δίνει την ευκαιρία να επιτύχετε growth σχεδόν γραμμική κόστος με κλίμακα. Ελαστικά growth ή χωρητικότητα ζήτηση να αναπτύσσεται με προσαύξησης κόστους όπως απαιτείται επειδή βάσεις δεδομένων θα χρεωθεί με βάση το μέσο πραγματικό μέγεθος χρησιμοποιούνται ανά ημέρα, δεν βασίζεται στο μέγιστο δυνατό μέγεθος.

##<a name="sql-server-on-virtual-machines"></a>SQL Server σε εικονικές μηχανές

Κατά την εγκατάσταση του SQL Server (έκδοση 2014 ή νεότερη έκδοση) σε εικονικές μηχανές Windows Azure, μπορείτε να επωφεληθείτε από τις δυνατότητες παραδοσιακή διαθεσιμότητα του SQL Server. Αυτές οι δυνατότητες περιλαμβάνουν ομάδες διαθεσιμότητας AlwaysOn και δημιουργία ειδώλου βάσης δεδομένων. Σημειώστε ότι ΣΠΣ Azure, χώρος αποθήκευσης και δίκτυα έχουν διαφορετικά χαρακτηριστικά λειτουργικές από μια εσωτερική, χωρίς εικονική διαμόρφωση την υποδομή των τμημάτων. Μια επιτυχή υλοποίηση του υψηλή διαθεσιμότητα/αποκατάσταση λύσης (HA DR) SQL Server στο Azure απαιτεί που κατανοήσετε αυτές τις διαφορές και να σχεδιάσετε τη λύση σας ώστε να περιλαμβάνει τους.

###<a name="high-availability-nodes-in-an-availability-set"></a>Οι κόμβοι υψηλής διαθεσιμότητας σε ένα σύνολο διαθεσιμότητα

Όταν εφαρμόζετε μια λύση υψηλής διαθεσιμότητας στο Azure, μπορείτε να χρησιμοποιήσετε τη διαθεσιμότητα ρύθμιση στο Azure για να τοποθετήσετε τους κόμβους υψηλής διαθεσιμότητας σε ξεχωριστή σφαλμάτων τομείς και αναβάθμιση τομείς. Για να είμαστε σαφείς, το σύνολο διαθεσιμότητα είναι μια Azure έννοια. Είναι βέλτιστη πρακτική που θα πρέπει να ακολουθήσετε για να βεβαιωθείτε ότι τις βάσεις δεδομένων είναι στην πραγματικότητα ιδιαίτερα διαθέσιμα, είτε χρησιμοποιείτε ομάδες διαθεσιμότητας AlwaysOn, δημιουργία ειδώλου βάσης δεδομένων ή κάτι άλλο. Εάν δεν μπορείτε να ακολουθήσετε αυτήν τη βέλτιστη πρακτική, ίσως σας στην περιοχή false υπόθεση ότι το σύστημά σας είναι ιδιαίτερα διαθέσιμο. Αλλά στην πραγματικότητα, κόμβους σας μπορεί να όλα αποτύχει ταυτόχρονη επειδή τύχει να τοποθετηθεί στον ίδιο τομέα σφαλμάτων στην περιοχή Azure.

Αυτή η σύσταση δεν είναι ανάλογα με την περίπτωση με αποστολή αρχείων καταγραφής. Ως δυνατότητα αποκατάστασης από καταστροφή, θα πρέπει να βεβαιωθείτε ότι οι διακομιστές εκτελούνται σε ξεχωριστές περιοχές Azure. Από τον ορισμό, αυτές οι περιοχές είναι ξεχωριστό σφαλμάτων τομείς.

Για το Azure Cloud Services ΣΠΣ αναπτυχθεί μέσω της πύλης κλασική να ενσωματωθεί το ίδιο σύνολο διαθεσιμότητα, πρέπει να αναπτύξετε τους στην ίδια υπηρεσία Cloud. ΣΠΣ αναπτυχθεί μέσω Azure διαχείριση πόρων (η τρέχουσα πύλη) δεν έχουν αυτόν τον περιορισμό. Για κλασική πύλη αναπτυχθεί ΣΠΣ σε υπηρεσία Cloud Azure, μόνο κόμβους στην ίδια υπηρεσία Cloud μπορούν να συμμετάσχουν στο ίδιο σύνολο διαθεσιμότητα. Επιπλέον, το ΣΠΣ υπηρεσίες Cloud πρέπει να είναι στο ίδιο δίκτυο εικονικού για να βεβαιωθείτε ότι διατηρούν τους διευθύνσεις IP ακόμα και μετά την υπηρεσία διόρθωσης. Αποφεύγετε έτσι διακοπές update DNS.

###<a name="azure-only-high-availability-solutions"></a>Μόνο Azure: λύσεις υψηλής διαθεσιμότητας

Μπορείτε να έχετε μια λύση υψηλής διαθεσιμότητας για τις βάσεις δεδομένων SQL Server στο Azure χρησιμοποιώντας ομάδες διαθεσιμότητας AlwaysOn ή δημιουργία ειδώλου βάσης δεδομένων.

Το παρακάτω διάγραμμα παρουσιάζει η αρχιτεκτονική της ομάδες διαθεσιμότητας AlwaysOn εκτελείται σε εικονικές μηχανές Windows Azure. Σε αυτό το διάγραμμα έχει ληφθεί από το αναλυτικό άρθρο σε αυτό το θέμα, [Υψηλή διαθεσιμότητα και την αποκατάσταση για τον SQL Server σε εικονικές μηχανές Windows Azure](../virtual-machines/virtual-machines-windows-sql-high-availability-dr.md).

![Ομάδες διαθεσιμότητας AlwaysOn στο Microsoft Azure](./media/resiliency-technical-guidance-recovery-local-failures/high_availability_solutions-1.png)

Μπορείτε αυτόματα να προμήθεια μια ομάδες διαθεσιμότητας AlwaysOn ανάπτυξης για ολοκληρωμένες σε VM Azure χρησιμοποιώντας το πρότυπο AlwaysOn στην πύλη του Azure. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [SQL Server AlwaysOn σας δίνει τη δυνατότητα στη συλλογή πύλη Microsoft Azure](https://blogs.technet.microsoft.com/dataplatforminsider/2014/08/25/sql-server-alwayson-offering-in-microsoft-azure-portal-gallery/).

Το παρακάτω διάγραμμα παρουσιάζει τη χρήση της βάσης δεδομένων αποτελούν πιστή αναπαράσταση σε εικονικές μηχανές Windows Azure. Επίσης λήφθηκε από το θέμα αναλυτικά [Υψηλή διαθεσιμότητα και την αποκατάσταση για τον SQL Server σε εικονικές μηχανές Windows Azure](../virtual-machines/virtual-machines-windows-sql-high-availability-dr.md).

![Βάσης δεδομένων αποτελούν πιστή αναπαράσταση στο Microsoft Azure](./media/resiliency-technical-guidance-recovery-local-failures/high_availability_solutions-2.png)

>[AZURE.NOTE] Και οι δύο αρχιτεκτονικές απαιτούν ελεγκτή τομέα. Ωστόσο, με βάσης δεδομένων αποτελούν πιστή αναπαράσταση, είναι δυνατό να χρησιμοποιήσετε τα πιστοποιητικά διακομιστή για να αποφύγετε την ανάγκη για έναν ελεγκτή τομέα.

##<a name="other-azure-platform-services"></a>Άλλες υπηρεσίες πλατφόρμας Azure

Εφαρμογές που είναι ενσωματωμένες στο Azure επωφεληθείτε από δυνατότητες πλατφόρμα για την ανάκτηση από Τοπικές αποτυχίες. Σε ορισμένες περιπτώσεις, μπορείτε να εκτελέσετε συγκεκριμένες ενέργειες για να αυξήσετε τη διαθεσιμότητα για το συγκεκριμένο σενάριο.

###<a name="service-bus"></a>Υπηρεσία Bus

Να συμβάλει στην αντιμετώπιση σε σχέση με ένα προσωρινό μη διαθεσιμότητα του Azure Service Bus, εξετάστε το ενδεχόμενο δημιουργίας μιας διαρκή ουράς πλευρά του προγράμματος-πελάτη. Αυτό προσωρινά χρησιμοποιεί έναν μηχανισμό εναλλακτική, τοπικού χώρου αποθήκευσης για να αποθηκεύσετε τα μηνύματα που δεν μπορούν να προστεθούν στην ουρά Bus υπηρεσίας. Η εφαρμογή να αποφασίσετε τον τρόπο χειρισμού των προσωρινά αποθηκευμένων μηνυμάτων μετά την επαναφορά της υπηρεσίας. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [βέλτιστες πρακτικές για βελτιώσεις απόδοσης χρησιμοποιώντας Bus υπηρεσίας όπου μεσολαβούν ανταλλαγής μηνυμάτων](../service-bus-messaging/service-bus-performance-improvements.md) και [Υπηρεσία Bus (αποκατάσταση)](./resiliency-technical-guidance-recovery-loss-azure-region.md#other-azure-platform-services).

###<a name="hdinsight"></a>HDInsight

Από προεπιλογή στο χώρο αποθήκευσης αντικειμένων Blob του Azure αποθηκεύονται τα δεδομένα που είναι συσχετισμένη με το Azure HDInsight. Azure αποθήκευσης καθορίζει υψηλής διαθεσιμότητας και διάρκειας ιδιοτήτων για το χώρο αποθήκευσης αντικειμένων Blob. Η επεξεργασία πολλών κόμβου που σχετίζεται με εργασίες Hadoop MapReduce πραγματοποιείται σε μια μεταβατικές διανεμηθεί από αρχείο Hadoop συστήματος (HDFS) που παρέχεται όταν χρειάζεται HDInsight. Αποτελέσματα από μια εργασία MapReduce επίσης από προεπιλογή αποθηκεύονται στο χώρο αποθήκευσης αντικειμένων Blob του Azure, έτσι ώστε η επεξεργασία δεδομένων είναι διαρκή και παραμένει ιδιαίτερα διαθέσιμες μετά το σύμπλεγμα Hadoop καταργείται. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [HDInsight (αποκατάσταση)](./resiliency-technical-guidance-recovery-loss-azure-region.md#other-azure-platform-services).

##<a name="checklists-for-local-failures"></a>Λίστες ελέγχου για τοπικές αποτυχίες

###<a name="cloud-services"></a>Υπηρεσίες cloud

  1. Εξετάστε την ενότητα υπηρεσίες Cloud αυτού του εγγράφου.
  2. Ρύθμιση παραμέτρων τουλάχιστον δύο παρουσίες για κάθε ρόλο.
  3. Διατήρησης κατάστασης στο διαρκή αποθήκευσης, όχι σε παρουσίες ρόλο.
  4. Χειρίζεται σωστά το συμβάν StatusCheck.
  5. Αναδίπλωση σχετικές αλλαγές σε συναλλαγές όταν είναι δυνατό.
  6. Βεβαιωθείτε ότι οι εργασίες ρόλο εργασίας είναι idempotent και με δυνατότητα επανεκκίνησης.
  7. Συνεχίστε για να καλέσετε λειτουργίες μέχρι αυτά ολοκληρωθεί με επιτυχία.
  8. Εξετάστε το ενδεχόμενο στρατηγικές autoscaling.

###<a name="virtual-machines"></a>Εικονικές μηχανές

  1. Εξετάστε την ενότητα εικονικές μηχανές αυτού του εγγράφου.
  2. Μην χρησιμοποιείτε μονάδα δίσκου D για μόνιμη χώρο αποθήκευσης.
  3. Ομαδοποιήστε μηχανές σε ένα επίπεδο υπηρεσιών σε ένα σύνολο διαθεσιμότητα.
  4. Ρύθμιση παραμέτρων εξισορρόπηση φόρτου και προαιρετικά καθετήρες.

###<a name="storage"></a>Χώρος αποθήκευσης

  1. Εξετάστε την ενότητα χώρος αποθήκευσης αυτού του εγγράφου.
  2. Χρησιμοποιήστε πολλούς λογαριασμούς χώρου αποθήκευσης όταν δεδομένων ή το εύρος ζώνης υπερβαίνει τα όρια.

###<a name="sql-database"></a>Βάση δεδομένων SQL

  1. Εξετάστε την ενότητα βάση δεδομένων SQL αυτού του εγγράφου.
  2. Εφαρμόσετε μια πολιτική "Επανάληψη" για να χειριστείτε σφάλματα μεταβατικές.
  3. Χρησιμοποιήστε διαμερισμάτων sharding ως μια στρατηγική κλιμάκωσης.

###<a name="sql-server-on-virtual-machines"></a>SQL Server σε εικονικές μηχανές

  1. Αναθεώρηση του SQL Server σε εικονικές μηχανές ενότητα αυτού του εγγράφου.
  2. Ακολουθήστε τις προηγούμενες συστάσεις για εικονικές μηχανές.
  3. Χρήση του SQL Server δυνατότητες υψηλής διαθεσιμότητας, όπως AlwaysOn.

###<a name="service-bus"></a>Υπηρεσία Bus

  1. Εξετάστε την ενότητα υπηρεσίας Bus αυτού του εγγράφου.
  2. Μπορείτε να δημιουργήσετε μια διαρκή ουρά πλευρά του προγράμματος-πελάτη ως αντίγραφο ασφαλείας.

###<a name="hdinsight"></a>HDInsight

  1. Εξετάστε την ενότητα HDInsight αυτού του εγγράφου.
  2. Δεν υπάρχει διαθεσιμότητα επιπλέον βήματα είναι απαραίτητα για τοπικές αποτυχίες.

##<a name="next-steps"></a>Επόμενα βήματα

Σε αυτό το άρθρο αποτελεί μέρος μιας σειράς εστιασμένη σε [Azure ανοχή τεχνικές οδηγίες](./resiliency-technical-guidance.md). Το επόμενο άρθρο σε αυτήν τη σειρά είναι [αποκατάστασης από διακοπή υπηρεσίας ολόκληρη την περιοχή](./resiliency-technical-guidance-recovery-loss-azure-region.md).
