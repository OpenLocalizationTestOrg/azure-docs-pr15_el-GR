<properties
   pageTitle="Οδηγός σχεδίασης και πρόγραμμα Azure εικονικού δικτύου (VNet) | Microsoft Azure"
   description="Μάθετε πώς να Προγραμματισμός και σχεδίαση εικονικού δικτύων Azure σύμφωνα με τις απαιτήσεις σας απομόνωσης, συνδεσιμότητας και την τοποθεσία."
   services="virtual-network"
   documentationCenter="na"
   authors="jimdial"
   manager="carmonm"
   editor="tysonn" />
<tags
   ms.service="virtual-network"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="02/08/2016"
   ms.author="jdial" />

# <a name="plan-and-design-azure-virtual-networks"></a>Προγραμματισμός και σχεδίαση Azure εικονικών δικτύων

Δημιουργία μιας VNet για να πειραματιστείτε με είναι αρκετά εύκολη, αλλά το πιθανότερο είναι, θα αναπτύξετε πολλές VNets διάρκεια του χρόνου για την υποστήριξη το παραγωγής ανάγκες της εταιρείας σας. Με Προγραμματισμός και σχεδίαση, θα μπορείτε να αναπτύξετε VNets και συνδέστε τους πόρους που χρειάζεστε πιο αποτελεσματικά. Εάν δεν είστε εξοικειωμένοι με VNets, συνιστάται που μπορείτε να [Μάθετε περισσότερα σχετικά με VNets](virtual-networks-overview.md) και [Πώς να αναπτύξετε](virtual-networks-create-vnet-arm-pportal.md) ένα πριν να συνεχίσετε. 

## <a name="plan"></a>Σχεδιασμός

Πολύ καλά Azure συνδρομές, περιοχές και τους πόρους του δικτύου είναι σημαντικό για την επιτυχία. Μπορείτε να χρησιμοποιήσετε τη λίστα των ζητήματα κάτω από την ως σημείο εκκίνησης. Μόλις κατανοήσετε αυτά τα ζητήματα, μπορείτε να ορίσετε τις απαιτήσεις για τη σχεδίαση του δικτύου.

### <a name="considerations"></a>Ζητήματα

Πριν απάντησης τον προγραμματισμό ερωτήσεις παρακάτω, λάβετε υπόψη τα εξής:

- Όλα τα στοιχεία που δημιουργείτε στο Azure αποτελείται από έναν ή περισσότερους πόρους. Μια εικονική μηχανή (Εικονική) είναι ένας πόρος, η διασύνδεση προσαρμογέα δικτύου (NIC) που χρησιμοποιούνται από μια Εικονική είναι ένας πόρος, στη δημόσια διεύθυνση IP που χρησιμοποιούνται από ένα NIC είναι ένας πόρος, το VNet είναι συνδεδεμένο στο NIC για να είναι ένας πόρος.
- Μπορείτε να δημιουργήσετε πόρους μέσα σε μια [περιοχή Azure](https://azure.microsoft.com/regions/#services) και συνδρομών. Και πόρους μπορεί να συνδεθεί μόνο με ένα VNet που υπάρχει στην ίδια περιοχή και βρίσκονται στην εγγραφή. 
- Μπορείτε να συνδεθείτε VNets μεταξύ τους, χρησιμοποιώντας μια Azure [Πύλη VPN](../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md). Μπορείτε επίσης να συνδέσετε VNets σε περιοχές και συνδρομές με αυτόν τον τρόπο.
- Μπορείτε να συνδεθείτε VNets για το δίκτυο εσωτερικής εγκατάστασης, χρησιμοποιώντας μία από τις [Επιλογές συνδεσιμότητας](../vpn-gateway/vpn-gateway-about-vpngateways.md#site-to-site-and-multi-site) διαθέσιμες στο Azure. 
- Διαφορετικούς πόρους μπορεί να είναι ομαδοποιημένα σε [ομάδες πόρων](../azure-resource-manager/resource-group-overview.md#resource-groups), καθιστώντας πιο εύκολη για τη διαχείριση του πόρου ως μονάδα. Μια ομάδα πόρων μπορεί να περιέχει πόρους από πολλές περιοχές, με την προϋπόθεση ότι πόρων συμπεριληφθεί η ίδια συνδρομή.

### <a name="define-requirements"></a>Ορίστε τις απαιτήσεις

Χρησιμοποιήστε τις ερωτήσεις κάτω από την ως σημείο εκκίνησης για τη σχεδίαση της Azure δικτύου.  

1. Τι Azure θέσεις θα χρησιμοποιήσετε για να host VNets;
2. Πρέπει να παρέχουν επικοινωνία μεταξύ Azure αυτές τις θέσεις;
3. Πρέπει να παρέχουν επικοινωνία μεταξύ του VNet(s) Azure και σας datacenter(s) εσωτερικής εγκατάστασης;
4. Πόσες ως ένα ΣΠΣ υπηρεσίας (IaaS), cloud υπηρεσίες υποδομής ρόλων και κάντε εφαρμογές web που χρειάζεστε για τη λύση σας;
5. Χρειάζεται να την απομονώσετε κίνηση που βασίζονται σε ομάδες του ΣΠΣ (δηλαδή προσκηνίου διακομιστές web και διακομιστές βάσης δεδομένων παρασκηνίου);
6. Χρειάζεστε για τον έλεγχο της ροής κυκλοφορίας χρησιμοποιώντας εικονικού συσκευές;
7. Οι χρήστες χρειάζονται διαφορετικά σύνολα δικαιωμάτων σε διαφορετική Azure πόρους;

### <a name="understand-vnet-and-subnet-properties"></a>Κατανόηση των ιδιοτήτων VNet και το δευτερεύον

Πόροι VNet και δευτερευόντων δικτύων σας βοηθούν να ορίζουν ένα όριο ασφαλείας για φόρτους εργασίας που εκτελείται στο Azure. Μια VNet χαρακτηρίζεται από μια συλλογή από τους χώρους διευθύνσεων ορίζεται ως μπλοκ CIDR. 

>[AZURE.NOTE] Οι διαχειριστές δικτύου είναι εξοικειωμένοι με CIDR σημειογραφία. Εάν δεν είστε εξοικειωμένοι με CIDR, [Μάθετε περισσότερα σχετικά με αυτό](http://whatismyipaddress.com/cidr).

VNets περιέχει τις ακόλουθες ιδιότητες.

|Ιδιότητα|Περιγραφή|Περιορισμοί|
|---|---|---|
|**Όνομα**|Όνομα VNet|Συμβολοσειρά έως 80 χαρακτήρες. Μπορεί να περιέχει γράμματα, αριθμούς, χαρακτήρας υπογράμμισης, περιόδους ή παύλες. Πρέπει να ξεκινήσετε με ένα γράμμα ή αριθμό. Πρέπει να τελειώνει με ένα γράμμα, αριθμό ή χαρακτήρας υπογράμμισης. Μπορεί να περιέχει επάνω ή πεζά γράμματα.|  
|**θέση**|Azure θέση (γνωστή και ως περιοχή).|Πρέπει να είναι μία από τις έγκυρες Azure θέσεις.|
|**addressSpace**|Συλλογή προθέματα διευθύνσεων που απαρτίζουν το VNet στο CIDR σημειογραφία.|Πρέπει να είναι ένας πίνακας με έγκυρη μπλοκ διεύθυνσης CIDR, συμπεριλαμβανομένων των δημόσιων περιοχές διευθύνσεων IP.|
|**δευτερεύοντα δίκτυα**|Συλλογή των δευτερευόντων δικτύων που απαρτίζουν το VNet|Δείτε παρακάτω υποδικτύου Ιδιότητες πίνακα.||
|**dhcpOptions**|Αντικείμενο που περιλαμβάνει μια μεμονωμένη απαιτούμενη ιδιότητα με το όνομα **dnsServers**.||
|**dnsServers**|Πίνακας με τους διακομιστές DNS που χρησιμοποιείται από το VNet. Εάν δεν έχει καθοριστεί διακομιστής, χρησιμοποιείται Azure όνομα εσωτερικού ανάλυση.|Πρέπει να είναι ένας πίνακας με έως και 10 διακομιστές DNS, με τη διεύθυνση IP.| 

Ένα υποδίκτυο είναι ένας πόρος θυγατρικό από μια VNet, και σας βοηθά ορίσετε τμήματα των κενών διαστημάτων διεύθυνση μέσα σε ένα μπλοκ CIDR, χρησιμοποιώντας προθέματα διευθύνσεων IP. NIC μπορεί να προστεθεί σε δευτερεύοντα δίκτυα, και συνδεδεμένοι ΣΠΣ, παρέχοντας συνδεσιμότητας για διάφορες φόρτους εργασίας.

Δευτερεύοντα δίκτυα περιέχουν τις ακόλουθες ιδιότητες. 

|Ιδιότητα|Περιγραφή|Περιορισμοί|
|---|---|---|
|**Όνομα**|Όνομα δευτερεύοντος δικτύου|Συμβολοσειρά έως 80 χαρακτήρες. Μπορεί να περιέχει γράμματα, αριθμούς, χαρακτήρας υπογράμμισης, περιόδους ή παύλες. Πρέπει να ξεκινήσετε με ένα γράμμα ή αριθμό. Πρέπει να τελειώνει με ένα γράμμα, αριθμό ή χαρακτήρας υπογράμμισης. Μπορεί να περιέχει επάνω ή πεζά γράμματα.|
|**θέση**|Azure θέση (γνωστή και ως περιοχή).|Πρέπει να είναι μία από τις έγκυρες Azure θέσεις.|
|**addressPrefix**|Πρόθεμα μία διεύθυνση που απαρτίζουν το υποδίκτυο στο CIDR σημειογραφία|Πρέπει να είναι ένα μεμονωμένο μπλοκ CIDR που αποτελεί μέρος ενός από τα VNet διεύθυνση διαστήματα.|
|**networkSecurityGroup**|NSG εφαρμόζονται στο υποδίκτυο|ανατρέξτε στο θέμα [NSGs](resource-groups-networking.md#Network-Security-Group)|
|**routeTable**|Δρομολόγηση πίνακα εφαρμόζεται στο υποδίκτυο|ανατρέξτε στο θέμα [UDR](resource-groups-networking.md#Route-table)|
|**ipConfigurations**|Συλλογή των αντικειμένων ρύθμισης παραμέτρων IP που χρησιμοποιούνται από το NIC συνδεδεμένο με το υποδίκτυο|ανατρέξτε στο θέμα [Ρύθμιση παραμέτρων IP](../resource-groups-networking.md#IP-configurations)|

### <a name="name-resolution"></a>Επίλυση ονόματος

Από προεπιλογή, χρησιμοποιεί την VNet [επίλυση ονομάτων που παρέχονται από Azure.](virtual-networks-name-resolution-for-vms-and-role-instances.md#Azure-provided-name-resolution) Για να επιλύσετε ονόματα εντός του VNet και, στη δημόσια στο Internet. Ωστόσο, εάν η σύνδεση σας VNets σας κέντρα δεδομένων εσωτερικής εγκατάστασης, πρέπει να παρέχετε [το δικό σας διακομιστή DNS](virtual-networks-name-resolution-for-vms-and-role-instances.md#Name-resolution-using-your-own-DNS-server) για την επίλυση ονομάτων μεταξύ δίκτυά σας.  

### <a name="limits"></a>Όρια

Εξετάστε τα όρια κοινωνικής δικτύωσης στο άρθρο [Azure τα όρια](../azure-subscription-service-limits.md#networking-limits) για να εξασφαλιστεί ότι σας σχεδίαση δεν συμφωνούν με τα όρια. Ορισμένα όρια μπορεί να αυξάνεται ανοίγοντας ένα δελτίο υποστήριξης.

### <a name="role-based-access-control-rbac"></a>Έλεγχος πρόσβασης βάσει ρόλων (RBAC)

Μπορείτε να χρησιμοποιήσετε [Azure RBAC](../active-directory/role-based-access-built-in-roles.md) για να ελέγξετε το επίπεδο πρόσβασης διαφορετικούς χρήστες μπορούν να έχουν διαφορετικά πόροι στο Azure. Με αυτόν τον τρόπο που μπορεί να segregate την εργασία που πραγματοποιήθηκε από την ομάδα σας σύμφωνα με τις ανάγκες. 

Όσον αφορά εικονικού δίκτυα έχουν, οι χρήστες στο **Δίκτυο συμβολής** ρόλο έχουν πλήρη έλεγχο πόρους από διαχειριστή πόρων Azure εικονικού δικτύου. Ομοίως, οι χρήστες στο ρόλο **Κλασική συμβολής δικτύου** έχουν πλήρη έλεγχο σε πολλούς πόρους κλασική εικονικού δικτύου.

>[AZURE.NOTE] Μπορείτε επίσης να [δημιουργήσετε το δικό σας ρόλους](../active-directory/role-based-access-control-configure.md) για να διαχωρίσετε τις ανάγκες διαχείρισης σας.

## <a name="design"></a>Σχεδίαση

Όταν μάθετε τις απαντήσεις στις ερωτήσεις στην ενότητα [Σχεδιασμός](#Plan) , ελέγξτε τα ακόλουθα πριν από τον ορισμό του VNets.

### <a name="number-of-subscriptions-and-vnets"></a>Αριθμός συνδρομές και VNets

Θα πρέπει να δημιουργήσετε πολλές VNets στα ακόλουθα σενάρια:

- **ΣΠΣ που πρέπει να τοποθετηθούν σε διαφορετικές θέσεις του Azure**. VNets στο Azure είναι τοπικές ρυθμίσεις. Αυτές δεν είναι δυνατό να εκτείνεται σε θέσεις. Επομένως, πρέπει να VNet τουλάχιστον μία για κάθε Azure θέση που θέλετε να ΣΠΣ κεντρικού υπολογιστή στο.
- **Φόρτους εργασίας που πρέπει να είναι πλήρως απομόνωσης από το ένα το άλλο**. Μπορείτε να δημιουργήσετε ξεχωριστές VNets, που ακόμα και να χρησιμοποιήσετε το ίδιο IP address κενά διαστήματα, για την απομόνωση διαφορετικό φόρτους εργασίας από το ένα το άλλο. 

Έχετε υπόψη ότι τα όρια που βλέπετε παραπάνω είναι ανά περιοχή, ανά συνδρομή. Αυτό σημαίνει ότι μπορείτε να χρησιμοποιήσετε πολλές συνδρομές για να αυξήσετε το όριο των πόρων που μπορείτε να διατηρήσετε στο Azure. Μπορείτε να χρησιμοποιήσετε ένα VPN-τοποθεσίας ή ένα κύκλωμα ExpressRoute, για να συνδεθείτε VNets σε διάφορες συνδρομές.

### <a name="subscription-and-vnet-design-patterns"></a>Συνδρομή και μοτίβα σχεδιασμού VNet

Ο παρακάτω πίνακας δείχνει ορισμένα κοινά μοτίβα σχεδίασης για τη χρήση συνδρομές και VNets.

|Σενάριο|Διάγραμμα|Οι επαγγελματίες τεχνολογιών πληροφορικής|Τα μειονεκτήματα|
|---|---|---|---|
|Μία συνδρομή, δύο VNets ανά εφαρμογή|![Μία συνδρομή](./media/virtual-network-vnet-plan-design-arm/figure1.png)|Μόνο μία συνδρομή για τη διαχείριση.|Μέγιστος αριθμός VNets ανά περιοχή Azure. Χρειάζεστε περισσότερες συνδρομές μετά από αυτό. Διαβάστε το άρθρο [Azure τα όρια](../azure-subscription-service-limits.md#networking-limits) για λεπτομέρειες.|
|Μία συνδρομές ανά εφαρμογή, δύο VNets ανά εφαρμογή|![Μία συνδρομή](./media/virtual-network-vnet-plan-design-arm/figure2.png)|Χρησιμοποιεί μόνο δύο VNets ανά συνδρομή.|Δυσκολότερη για τη Διαχείριση όταν υπάρχουν πάρα πολλές εφαρμογές.|
|Μία εγγραφή ανά μονάδα επιχειρήσεις, δύο VNets ανά εφαρμογή.|![Μία συνδρομή](./media/virtual-network-vnet-plan-design-arm/figure3.png)|Υπόλοιπο μεταξύ του αριθμού των συνδρομών και VNets.|Μέγιστος αριθμός VNets ανά μονάδα επιχειρήσεις (συνδρομή). Διαβάστε το άρθρο [Azure τα όρια](../azure-subscription-service-limits.md#networking-limits) για λεπτομέρειες.|
|Μία εγγραφή ανά μονάδα επιχειρήσεις, δύο VNets ανά ομάδα εφαρμογών.|![Μία συνδρομή](./media/virtual-network-vnet-plan-design-arm/figure4.png)|Υπόλοιπο μεταξύ του αριθμού των συνδρομών και VNets.|Πρέπει να είναι απομονωμένες εφαρμογών χρησιμοποιώντας δευτερεύοντα δίκτυα και NSGs.|


### <a name="number-of-subnets"></a>Αριθμός των δευτερευόντων δικτύων

Θα πρέπει να λάβετε υπόψη πολλά δευτερεύοντα δίκτυα σε μια VNet στα εξής σενάρια:

- **Δεν υπάρχει αρκετός ιδιωτικών διευθύνσεων IP για όλους NIC σε ένα δευτερεύον δίκτυο**. Εάν το χώρο διευθύνσεων υποδικτύου δεν περιέχει αρκετές διευθύνσεις IP για τον αριθμό των NIC στο δευτερεύον, πρέπει να δημιουργήσετε πολλά δευτερεύοντα δίκτυα. Έχετε υπόψη ότι Azure διατηρεί 5 ιδιωτικές διευθύνσεις IP από κάθε υποδίκτυο που δεν μπορούν να χρησιμοποιηθούν: το πρώτο και το τελευταίο διευθύνσεις του χώρου διευθύνσεων (για τη διεύθυνση υποδικτύου, και πολλαπλής) και 3 διευθύνσεις μπορούν να χρησιμοποιηθούν εσωτερικά (για σκοπούς DHCP και το DNS). 
- **Ασφάλεια**. Μπορείτε να χρησιμοποιήσετε δευτερεύοντα δίκτυα για να διαχωρίσετε τις ομάδες των ΣΠΣ μία από την άλλη για φόρτους εργασίας που έχουν δομή πολλαπλών επιπέδων, και να εφαρμόσετε διαφορετικές [ομάδες ασφαλείας δικτύου (NSGs)](virtual-networks-nsg.md#subnets) για αυτά τα δευτερεύοντα δίκτυα.
- **Υβριδική συνδεσιμότητας**. Μπορείτε να χρησιμοποιήσετε πύλες VPN και κυκλώματα ExpressRoute για να [συνδεθείτε](../vpn-gateway/vpn-gateway-about-vpngateways.md#site-to-site-and-multi-site) με το VNets να ένα το άλλο και να σας center(s) δεδομένων εσωτερικής εγκατάστασης. Πύλες VPN και κυκλώματα ExpressRoute απαιτούν μόνος του να δημιουργηθεί ένα δευτερεύον.
- **Εικονική συσκευές**. Μπορείτε να χρησιμοποιήσετε μια εικονική συσκευή, όπως ένα τείχος προστασίας, επιταχυντών WAN ή πύλης VPN σε μια VNet Azure. Όταν κάνετε αυτό, θα πρέπει να την [κίνηση δρομολόγηση](virtual-networks-udr-overview.md) αυτές τις συσκευές και απομόνωση τους στο δικό τους υποδικτύου.

### <a name="subnet-and-nsg-design-patterns"></a>Υποδίκτυο και μοτίβα σχεδιασμού NSG

Ο παρακάτω πίνακας δείχνει ορισμένα κοινά μοτίβα σχεδίασης για τη χρήση δευτερεύοντα δίκτυα.

|Σενάριο|Διάγραμμα|Οι επαγγελματίες τεχνολογιών πληροφορικής|Τα μειονεκτήματα|
|---|---|---|---|
|Μόνο υποδίκτυο, NSGs ανά επίπεδο εφαρμογών, ανά εφαρμογή|![Μόνο υποδίκτυο](./media/virtual-network-vnet-plan-design-arm/figure5.png)|Μόνο ένα υποδίκτυο για τη διαχείριση.|Πολλές NSGs είναι απαραίτητο για την απομόνωση κάθε εφαρμογή.|
|Ένα υποδίκτυο ανά εφαρμογή, NSGs ανά επίπεδο εφαρμογών|![Υποδίκτυο ανά εφαρμογή](./media/virtual-network-vnet-plan-design-arm/figure6.png)|Λιγότερες NSGs για τη διαχείριση.|Πολλά δευτερεύοντα δίκτυα για τη διαχείριση.|
|Ένα υποδίκτυο ανά επίπεδο εφαρμογών, NSGs ανά εφαρμογή.|![Υποδίκτυο ανά επίπεδο](./media/virtual-network-vnet-plan-design-arm/figure7.png)|Υπόλοιπο μεταξύ του αριθμού των δευτερευόντων δικτύων και NSGs.|Μέγιστος αριθμός NSGs ανά συνδρομή. Διαβάστε το άρθρο [Azure τα όρια](../azure-subscription-service-limits.md#networking-limits) για λεπτομέρειες.|
|Ένα υποδίκτυο ανά επίπεδο εφαρμογών, ανά εφαρμογή, NSGs ανά υποδίκτυο|![Υποδίκτυο ανά επίπεδο ανά εφαρμογή](./media/virtual-network-vnet-plan-design-arm/figure8.png)|Πιθανώς μικρότερο αριθμό NSGs.|Πολλά δευτερεύοντα δίκτυα για τη διαχείριση.|

## <a name="sample-design"></a>Δείγμα σχεδίασης

Για την απεικόνιση της εφαρμογής από τις πληροφορίες σε αυτό το άρθρο, εξετάστε το ακόλουθο σενάριο.

Μπορείτε να εργαστείτε σε μια εταιρεία που διαθέτει 2 κέντρα δεδομένων στη Βόρεια Αμερική και κέντρα δεδομένων δύο Europe. Που προσδιορίσατε 6 διαφορετικό πελάτη άμεσα προσβάσιμη από εφαρμογές που διατηρούνται από 2 διαφορετικές επιχειρηματικές μονάδες που θέλετε να μετεγκαταστήσετε στο Azure ως μιας πιλοτικής δοκιμής. Η βασική αρχιτεκτονική για τις εφαρμογές είναι οι εξής:

- App1, App2, App3 και App4 είναι εφαρμογές web που φιλοξενείται σε Linux διακομιστές που εκτελούν Ubuntu. Κάθε εφαρμογή συνδέεται με μια ξεχωριστή εφαρμογή διακομιστή που φιλοξενεί RESTful υπηρεσιών σε διακομιστές Linux. Οι υπηρεσίες RESTful σύνδεση με βάση δεδομένων MySQL παρασκηνίου.
- App5 και App6 είναι εφαρμογές web που φιλοξενείται σε Windows διακομιστές που εκτελούν Windows Server 2012 R2. Κάθε εφαρμογή συνδέεται με μια βάση δεδομένων SQL Server παρασκηνίου.
- Όλες οι εφαρμογές φιλοξενούνται αυτήν τη στιγμή σε ένα από τα κέντρα δεδομένων της εταιρείας στη Βόρεια Αμερική.
- Τα κέντρα δεδομένων εσωτερικής εγκατάστασης χρησιμοποιούν το χώρο διευθύνσεων 10.0.0.0/8.

Πρέπει να σχεδιάσετε μια λύση εικονικού δικτύου που ικανοποιεί τις ακόλουθες απαιτήσεις:

- Κάθε θυγατρική δεν επηρεάζονται από την κατανάλωση άλλες επιχειρηματικές μονάδες πόρων.
- Θα πρέπει να μπορείτε να ελαχιστοποιήσετε την ποσότητα του VNets και δευτερευόντων δικτύων για να διευκολύνετε τη διαχείριση.
- Κάθε θυγατρική θα πρέπει να έχετε ένα μεμονωμένο δοκιμής/ανάπτυξης VNet που χρησιμοποιούνται για όλες τις εφαρμογές.
- Κάθε εφαρμογή φιλοξενείται σε 2 διαφορετικά δεδομένα Azure κέντρα ανά Ήπειρο (Βόρεια Αμερική και Ευρώπη).
- Κάθε εφαρμογή είναι πλήρως απομόνωσης μεταξύ τους.
- Κάθε εφαρμογή είναι δυνατή από τους πελάτες μέσω του Internet μέσω HTTP.
- Κάθε εφαρμογή είναι δυνατή η πρόσβαση από τους χρήστες που είναι συνδεδεμένος με τα κέντρα δεδομένων εσωτερικής εγκατάστασης, χρησιμοποιώντας ένα κρυπτογραφημένο διοχέτευσης.
- Σύνδεση με κέντρα δεδομένων εσωτερικής εγκατάστασης πρέπει να χρησιμοποιήσετε υπάρχουσες συσκευές VPN.
- Ομάδα δικτύου της εταιρείας θα πρέπει να έχετε πλήρη έλεγχο της ρύθμισης παραμέτρων VNet.
- Προγραμματιστές κάθε θυγατρικής μόνο πρέπει να μπορείτε να αναπτύξετε ΣΠΣ σε υπάρχοντα δευτερεύοντα δίκτυα.
- Όλες οι εφαρμογές θα μετεγκατασταθούν ως έχουν να Azure (ανύψωσης και shift).
- Οι βάσεις δεδομένων σε κάθε θέση πρέπει να αναπαραγάγετε σε άλλες θέσεις Azure μία φορά την ημέρα.
- Κάθε εφαρμογή πρέπει να χρησιμοποιήσετε 5 διακομιστές web προσκηνίου, 2 διακομιστές εφαρμογών (όταν είναι απαραίτητο) και 2 διακομιστές βάσης δεδομένων.

### <a name="plan"></a>Σχεδιασμός

Θα πρέπει να μπορείτε να ξεκινήσετε τη σχεδίαση σχεδιασμού, απάντηση σε ερώτηση στην ενότητα [Ορισμός απαιτήσεις](#Define-requirements) , όπως φαίνεται παρακάτω.

1. Τι Azure θέσεις θα χρησιμοποιήσετε για να host VNets;

    2 θέσεις στη Βόρεια Αμερική και 2 θέσεις στην Ευρώπη. Θα πρέπει να μπορείτε να επιλέξετε αυτές με βάση τη φυσική θέση του σας υπάρχοντα κέντρα δεδομένων εσωτερικής εγκατάστασης. Με αυτόν τον τρόπο τη σύνδεσή σας από το φυσικό θέσεις Azure θα έχει μια καλύτερη λανθάνοντος χρόνου.

2. Πρέπει να παρέχουν επικοινωνία μεταξύ Azure αυτές τις θέσεις;

    Ναι. Επειδή οι βάσεις δεδομένων πρέπει να αναπαραχθεί σε όλες τις θέσεις.

3. Πρέπει να παρέχουν επικοινωνία μεταξύ του VNet(s) Azure και σας στην εσωτερική εγκατάσταση center(s) δεδομένων;

    Ναι. Καθώς οι χρήστες συνδεδεμένοι στα κέντρα δεδομένων εσωτερικής εγκατάστασης πρέπει να μπορούν να έχουν πρόσβαση οι εφαρμογές μέσω μιας κρυπτογραφημένης διοχέτευσης.
 
4. Πόσες ΣΠΣ IaaS χρειάζεστε για τη λύση;

    200 IaaS ΣΠΣ. App1, App2 και App3 απαιτούν 5 διακομιστές web κάθε, 2 εφαρμογές διακομιστές κάθε και 2 διακομιστές βάσης δεδομένων κάθε. Αυτό είναι ένα σύνολο 9 ΣΠΣ IaaS ανά εφαρμογή ή 36 ΣΠΣ IaaS. App5 και App6 απαιτούν 5 διακομιστές web και 2 διακομιστές βάσης δεδομένων κάθε. Αυτό είναι ένα σύνολο 7 IaaS ΣΠΣ ανά εφαρμογή ή 14 IaaS ΣΠΣ. Γι ' αυτό, θα χρειαστείτε 50 ΣΠΣ IaaS για όλες τις εφαρμογές σε κάθε περιοχή Azure. Δεδομένου ότι πρέπει να χρησιμοποιήσετε τις περιοχές 4, θα υπάρξει 200 IaaS ΣΠΣ.

    Θα πρέπει επίσης να δώσετε στους διακομιστές DNS σε κάθε VNet ή σας κέντρα δεδομένων εσωτερικής εγκατάστασης για την επίλυση ονομάτων μεταξύ του ΣΠΣ IaaS Azure και το δίκτυο εσωτερικής εγκατάστασης. 

5. Χρειάζεται να την απομονώσετε κίνηση που βασίζονται σε ομάδες του ΣΠΣ (δηλαδή προσκηνίου διακομιστές web και διακομιστές βάσης δεδομένων παρασκηνίου);

    Ναι. Κάθε εφαρμογή πρέπει να είναι πλήρως απομόνωσης μεταξύ τους και κάθε επίπεδο εφαρμογής πρέπει επίσης να απομόνωσης. 

6. Χρειάζεστε για τον έλεγχο της ροής κυκλοφορίας χρησιμοποιώντας εικονικού συσκευές;

    Όχι. Εικονικό συσκευές μπορεί να χρησιμοποιηθεί για την παροχή ελέγχετε περισσότερο τη ροή κυκλοφορίας, συμπεριλαμβανομένων των πιο λεπτομερή δεδομένα επιπέδου καταγραφής. 

7. Οι χρήστες χρειάζονται διαφορετικά σύνολα δικαιωμάτων σε διαφορετική Azure πόρους;

    Ναι. Το κοινωνικής δικτύωσης ομάδα πρέπει πλήρους ελέγχου στη εικονικού ρυθμίσεις κοινωνικής δικτύωσης, ενώ οι προγραμματιστές μόνο πρέπει να μπορείτε να αναπτύξετε ΣΠΣ τους σε προ-υπαρχόντων δευτερεύοντα δίκτυα. 

### <a name="design"></a>Σχεδίαση

Θα πρέπει να ακολουθήσετε τη σχεδίαση που καθορίζει συνδρομές, VNets, δευτερεύοντα δίκτυα και NSGs. Θα αναλύονται NSGs εδώ, αλλά θα πρέπει να μάθετε περισσότερα σχετικά με το [NSGs](virtual-networks-nsg.md) πριν από την ολοκλήρωση της σχεδίασης.

**Αριθμός συνδρομές και VNets**

Για συνδρομές και VNets σχετίζονται τις ακόλουθες απαιτήσεις:

- Κάθε θυγατρική δεν επηρεάζονται από την κατανάλωση άλλες επιχειρηματικές μονάδες πόρων.
- Θα πρέπει να μπορείτε να ελαχιστοποιήσετε την ποσότητα του VNets και δευτερεύοντα δίκτυα.
- Κάθε θυγατρική θα πρέπει να έχετε ένα μεμονωμένο δοκιμής/ανάπτυξης VNet που χρησιμοποιούνται για όλες τις εφαρμογές.
- Κάθε εφαρμογή φιλοξενείται σε 2 διαφορετικά δεδομένα Azure κέντρα ανά Ήπειρο (Βόρεια Αμερική και Ευρώπη).

Που βασίζονται σε αυτές τις απαιτήσεις, χρειάζεστε μια συνδρομή για κάθε θυγατρική. Με αυτόν τον τρόπο κατανάλωση πόρων από μια θυγατρική θα δεν συμπεριλαμβάνεται σε όρια για άλλες επιχειρηματικές μονάδες. Και δεδομένου ότι θέλετε να ελαχιστοποιήσετε τον αριθμό των VNets, θα πρέπει να χρησιμοποιήσετε το μοτίβο **μία συνδρομές ανά μονάδα επιχειρήσεις, δύο VNets ανά ομάδα εφαρμογών** , όπως φαίνεται παρακάτω.

![Μία συνδρομή](./media/virtual-network-vnet-plan-design-arm/figure9.png)

Πρέπει επίσης να καθορίσετε το χώρο διευθύνσεων για κάθε VNet. Επειδή χρειάζεστε κέντρα συνδεσιμότητας μεταξύ των δεδομένων εσωτερικής εγκατάστασης και τις περιοχές Azure, το χώρο διευθύνσεων που χρησιμοποιείται για Azure VNets δεν μπορεί να βρίσκονται σε διένεξη με το δίκτυο εσωτερικής εγκατάστασης και το χώρο διευθύνσεων που χρησιμοποιείται από κάθε VNet δεν πρέπει να βρίσκονται σε διένεξη με άλλες υπάρχουσες VNets. Μπορείτε να χρησιμοποιήσετε τους χώρους διευθύνσεων στον παρακάτω πίνακα για να ικανοποιήσετε αυτές τις απαιτήσεις.  

|**Συνδρομή**|**VNet**|**Περιοχή Azure**|**Χώρος διευθύνσεων**|
|---|---|---|---|
|BU1|ProdBU1US1|Δυτική η.π.α.|172.16.0.0/16|
|BU1|ProdBU1US2|Ανατολικής η.π.α.|172.17.0.0/16|
|BU1|ProdBU1EU1|Βόρεια Ευρώπη|172.18.0.0/16|
|BU1|ProdBU1EU2|Δυτική Ευρώπη|172.19.0.0/16|
|BU1|TestDevBU1|Δυτική η.π.α.|172.20.0.0/16|
|BU2|TestDevBU2|Δυτική η.π.α.|172.21.0.0/16|
|BU2|ProdBU2US1|Δυτική η.π.α.|172.22.0.0/16|
|BU2|ProdBU2US2|Ανατολικής η.π.α.|172.23.0.0/16|
|BU2|ProdBU2EU1|Βόρεια Ευρώπη|172.24.0.0/16|
|BU2|ProdBU2EU2|Δυτική Ευρώπη|172.25.0.0/16|

**Αριθμός δευτερεύοντα δίκτυα και NSGs**

Τις ακόλουθες απαιτήσεις σχετίζονται με δευτερεύοντα δίκτυα και NSGs:

- Θα πρέπει να μπορείτε να ελαχιστοποιήσετε την ποσότητα του VNets και δευτερεύοντα δίκτυα.
- Κάθε εφαρμογή είναι πλήρως απομόνωσης μεταξύ τους.
- Κάθε εφαρμογή είναι δυνατή από τους πελάτες μέσω του Internet μέσω HTTP.
- Κάθε εφαρμογή είναι δυνατή η πρόσβαση από τους χρήστες που είναι συνδεδεμένος με τα κέντρα δεδομένων εσωτερικής εγκατάστασης, χρησιμοποιώντας ένα κρυπτογραφημένο διοχέτευσης.
- Σύνδεση με κέντρα δεδομένων εσωτερικής εγκατάστασης πρέπει να χρησιμοποιήσετε υπάρχουσες συσκευές VPN.
- Οι βάσεις δεδομένων σε κάθε θέση πρέπει να αναπαραγάγετε σε άλλες θέσεις Azure μία φορά την ημέρα.

Που βασίζονται σε αυτές τις απαιτήσεις, θα μπορούσε να χρησιμοποιείτε ένα υποδίκτυο ανά επίπεδο εφαρμογών και χρησιμοποιήστε NSGs για να φιλτράρει την κυκλοφορία ανά εφαρμογή. Με αυτόν τον τρόπο, έχετε μόνο 3 δευτερεύοντα δίκτυα σε κάθε VNet (προσκηνίου επίπεδο εφαρμογών και επίπεδο δεδομένων) και μία NSG ανά εφαρμογή ανά υποδικτύου. Σε αυτήν την περίπτωση, πρέπει να λάβετε υπόψη χρησιμοποιώντας το μοτίβο σχεδίαση **μία υποδικτύου ανά επίπεδο εφαρμογών, NSGs ανά εφαρμογή** . Η παρακάτω εικόνα δείχνει τη χρήση του μοτίβου σχεδίασης που αντιπροσωπεύει το VNet **ProdBU1US1** .

![Ένα υποδίκτυο ανά επίπεδο, μία NSG ανά εφαρμογή ανά επίπεδο](./media/virtual-network-vnet-plan-design-arm/figure11.png)

Ωστόσο, πρέπει επίσης να δημιουργήσετε μια επιπλέον υποδίκτυο για τη συνδεσιμότητα VPN μεταξύ του VNets και σας κέντρα δεδομένων εσωτερικής εγκατάστασης. Και πρέπει να καθορίσετε το χώρο διευθύνσεων για κάθε υποδίκτυο. Η παρακάτω εικόνα δείχνει μια λύση δείγμα για **ProdBU1US1** VNet. Μπορείτε να αναπαραγάγετε αυτό το σενάριο για κάθε VNet. Κάθε χρώμα αντιπροσωπεύει μια διαφορετική εφαρμογή.

![Δείγμα VNet](./media/virtual-network-vnet-plan-design-arm/figure10.png)

**Έλεγχος πρόσβασης**

Που σχετίζονται με τις ακόλουθες απαιτήσεις για πρόσβαση στο στοιχείο ελέγχου:

- Ομάδα δικτύου της εταιρείας θα πρέπει να έχετε πλήρη έλεγχο της ρύθμισης παραμέτρων VNet.
- Προγραμματιστές κάθε θυγατρικής μόνο πρέπει να μπορείτε να αναπτύξετε ΣΠΣ σε υπάρχοντα δευτερεύοντα δίκτυα.

Που βασίζονται σε αυτές τις απαιτήσεις, μπορείτε να προσθέσετε χρήστες από την ομάδα του δικτύου στο ενσωματωμένο ρόλο **Συμβολής δικτύου** σε κάθε συνδρομής; και δημιουργήστε έναν προσαρμοσμένο ρόλο για τους προγραμματιστές εφαρμογών σε κάθε συνδρομής τους δώσετε δικαιώματα για να προσθέσετε ΣΠΣ σε υπάρχοντα δευτερεύοντα δίκτυα.

## <a name="next-steps"></a>Επόμενα βήματα

- [Ανάπτυξη ενός εικονικού δικτύου](virtual-networks-create-vnet-arm-template-click.md) που βασίζεται σε ένα σενάριο.
- Κατανόηση των ΣΠΣ IaaS [εξισορρόπηση φόρτου](../load-balancer/load-balancer-overview.md) και [Διαχείριση δρομολόγηση μέσω πολλές περιοχές Azure](../traffic-manager/traffic-manager-overview.md).
- Μάθετε περισσότερα σχετικά με [NSGs και πώς μπορείτε να σχεδιάσετε και να σχεδιάσετε](virtual-networks-nsg.md) μια λύση NSG.
- Μάθετε περισσότερα σχετικά με τις [σταυρό εσωτερικής εγκατάστασης και επιλογές συνδεσιμότητας VNet](../vpn-gateway/vpn-gateway-about-vpngateways.md#site-to-site-and-multi-site).
