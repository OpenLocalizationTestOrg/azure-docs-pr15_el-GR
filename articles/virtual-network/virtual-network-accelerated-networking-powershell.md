<properties 
   pageTitle="Επιτάχυνση δικτύωση για μια εικονική μηχανή - PowerShell | Microsoft Azure"
   description="Μάθετε πώς μπορείτε να ρυθμίσετε τις παραμέτρους Επιταχυνόμενος δικτύου για ένα Azure εικονική μηχανή με χρήση του PowerShell."
   services="virtual-network"
   documentationCenter="na"
   authors="jimdial"
   manager="carmonm"
   editor=""
   tags="azure-resource-manager"
/>
<tags 
   ms.service="virtual-network"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="09/23/2016"
   ms.author="jdial" />

# <a name="accelerated-networking-for-a-virtual-machine"></a>Ταχύτερη δικτύωση για μια εικονική μηχανή

> [AZURE.SELECTOR]
- [Πύλη του Azure](virtual-network-accelerated-networking-portal.md)
- [PowerShell](virtual-network-accelerated-networking-powershell.md)

Ταχύτερη δικτύωση ενεργοποιεί μία ρίζα εισόδου/εξόδου Virtualization (SR-IOV) σε μια εικονική μηχανή (Εικονική), σε μεγάλο βαθμό τη βελτίωση τις επιδόσεις του δικτύου. Αυτή η διαδρομή υψηλών επιδόσεων παρακάμπτει τον κεντρικό υπολογιστή από η διαδρομή δεδομένων μειώνοντας λανθάνων χρόνος τρεμόπαιγμα και η χρήση της CPU για χρήση με το πιο απαιτητικά φόρτο εργασίας δικτύου στους υποστηριζόμενοι τύποι Εικονική. Σε αυτό το άρθρο εξηγεί τον τρόπο χρήσης του Azure PowerShell για ρύθμιση παραμέτρων επιτάχυνση δικτύωσης στο μοντέλο ανάπτυξης διαχείρισης πόρων Azure. Μπορείτε επίσης να δημιουργήσετε μια Εικονική με επιτάχυνση δικτύου με την πύλη Azure. Για να μάθετε πώς γίνεται αυτό, κάντε κλικ στο πλαίσιο Azure πύλη στο επάνω μέρος αυτού του άρθρου.

Η παρακάτω εικόνα δείχνει επικοινωνίας μεταξύ των δύο εικονικές μηχανές (Εικονική) με και χωρίς επιτάχυνση δικτύου:

![Σύγκριση](./media/virtual-network-accelerated-networking-powershell/image1.png)

Χωρίς επιτάχυνση κοινωνικής δικτύωσης, όλη την κυκλοφορία κοινωνικής δικτύωσης και έξοδος από την εικονική Μηχανή πρέπει να διέλευση του κεντρικού υπολογιστή και το διακόπτη εικονικού. Το εικονικό διακόπτη παρέχει όλα επιβολή πολιτικής, όπως τις ομάδες ασφαλείας δικτύου, λίστες ελέγχου πρόσβασης, απομόνωση και άλλες υπηρεσίες δικτύου εικονικά διαμορφωμένη συστοιχία σε κίνηση του δικτύου. Για περισσότερες πληροφορίες, διαβάστε το άρθρο [Virtualization δικτύου Hyper-V και εικονικού διακόπτη](https://technet.microsoft.com/library/jj945275.aspx) .

Με το Επιταχυνόμενος δίκτυο κίνηση του δικτύου φτάνει στην κάρτα δικτύου (NIC) και στη συνέχεια προωθείται η Εικονική. Όλες οι πολιτικές δικτύου που εφαρμόζει το εικονικό διακόπτη χωρίς επιτάχυνση δικτύωσης μείωση φόρτου και εφαρμόζεται στο υλικό. Εφαρμογή της πολιτικής στο υλικό ενεργοποιεί το NIC για να προς τα εμπρός κίνηση του δικτύου απευθείας με την Εικονική παρακάμψει τον κεντρικό υπολογιστή και το διακόπτη εικονικού, διατηρώντας παράλληλα όλα την πολιτική να εφαρμόζεται στο τον κεντρικό υπολογιστή.

Τα πλεονεκτήματα της επιτάχυνσης δικτύωσης ισχύουν μόνο για την εικονική Μηχανή που είναι ενεργοποιημένο. Για καλύτερα αποτελέσματα, είναι ιδανική για να ενεργοποιήσετε αυτήν τη δυνατότητα σε τουλάχιστον δύο ΣΠΣ συνδεδεμένο με το ίδιο VNet.  Κατά την επικοινωνία μέσω VNets ή σύνδεσης στην εσωτερική εγκατάσταση, αυτή η δυνατότητα έχει μια ελάχιστη επίπτωση Συνολικός λανθάνων χρόνος.

[AZURE.INCLUDE [virtual-network-preview](../../includes/virtual-network-preview.md)]

##<a name="benefits"></a>Πλεονεκτήματα

- **Κάτω λανθάνων χρόνος / υψηλότερη πακέτα ανά δευτερόλεπτο (pps):** Κατάργηση εικονικού μετάβαση από η διαδρομή δεδομένων καταργεί το χρόνο που δαπανούν πακέτα από τον κεντρικό υπολογιστή για επεξεργασία πολιτικής και αυξάνει τον αριθμό των πακέτων που είναι δυνατή η επεξεργασία μέσα η Εικονική.
- **Περιορισμένες τρεμόπαιγμα:** Επεξεργασία εικονικού διακόπτη εξαρτάται από το ποσό της πολιτικής που πρέπει να εφαρμοστεί και το φόρτο εργασίας της CPU που κάνει την επεξεργασία. Μείωση φόρτου της επιβολής πολιτικής για το υλικό καταργεί αυτήν τη μεταβλητότητα, παρέχοντας πακέτα απευθείας με την εικονική Μηχανή, καταργώντας τον κεντρικό υπολογιστή σε Εικονική επικοινωνίας και όλες τις διακοπές λογισμικού και εναλλαγές περιβάλλοντος.
- **Χρήση της CPU μειώθηκε:** Παράκαμψη εικονικού Μετάβαση στο υποδοχής οδηγεί σε λιγότερο χρήση της CPU για την επεξεργασία κίνηση του δικτύου.

## <a name="limitations"></a>Περιορισμοί

Υπάρχουν οι παρακάτω περιορισμοί κατά τη χρήση αυτή η δυνατότητα:
 
- **Δικτύου του περιβάλλοντος εργασίας δημιουργίας:** Ταχύτερη δικτύωση μπορεί να ενεργοποιηθεί μόνο για ένα νέο περιβάλλον δικτύου.  Αυτό δεν μπορεί να ενεργοποιηθεί σε ένα υπάρχον περιβάλλον εργασίας δικτύου.
- **Δημιουργίας Εικονική:** Ένα περιβάλλον εργασίας δικτύου με επιτάχυνσης δικτύωση με δυνατότητα μπορείτε μόνο να το επισυνάψετε μια Εικονική όταν δημιουργείται η Εικονική. Το περιβάλλον εργασίας δικτύου δεν μπορεί να είναι προσαρτημένη σε μια υπάρχουσα Εικονική.
- **Περιοχές:** Που διέθετε τις δυτικές κεντρικής ΜΑΣ και Azure Europe δυτικές περιοχές μόνο. Το σύνολο των περιοχών επεκτείνονται στο μέλλον.
- **Υποστηριζόμενο λειτουργικό σύστημα:** Microsoft Windows Server 2012 R2 και Windows Server 2016 Technical Preview 5. Σύντομα θα προστεθούν υποστήριξη Linux και Windows Server 2012.
- **Εικονική μέγεθος:** Standard_D15_v2 και Standard_DS15_v2 είναι η μόνη Εικονική παρουσία μεγέθη υποστηρίζονται. Για περισσότερες πληροφορίες, ανατρέξτε στο άρθρο [μεγέθη Εικονική των Windows](../virtual-machines/virtual-machines-windows-sizes.md) . Το σύνολο των υποστηριζόμενα μεγέθη παρουσία Εικονική επεκτείνονται στο μέλλον.

Αλλαγές σε αυτούς τους περιορισμούς θα είναι ανακοινώσει μέσω της σελίδας [εικονικού δικτύου Azure ενημερώσεις](https://azure.microsoft.com/updates/accelerated-networking-in-preview) .

## <a name="create-a-windows-vm-with-accelerated-networking"></a>Δημιουργία Windows Εικονική με επιτάχυνσης δικτύωση

1. Ανοίξτε μια γραμμή εντολών του PowerShell και να ολοκληρώσετε τα υπόλοιπα βήματα σε αυτήν την ενότητα μέσα σε μια μεμονωμένη περίοδο λειτουργίας PowerShell. Εάν δεν έχετε ήδη εγκαταστήσει και να ρυθμίσει τις παραμέτρους του PowerShell, ολοκληρώστε τα βήματα του άρθρου [Πώς να εγκαταστήσετε και να ρυθμίσετε τις παραμέτρους του PowerShell Azure](../powershell-install-configure.md) .
2. Για να εγγραφείτε για την προεπισκόπηση, να στείλετε μήνυμα ηλεκτρονικού ταχυδρομείου [Επιτάχυνση συνδρομές δίκτυο](mailto:axnpreview@microsoft.com?subject=Request%20to%20enable%20subscription%20%3csubscription%20id%3e) με το Αναγνωριστικό συνδρομής και προορίζεται χρήση. Μην ολοκληρώσετε τα υπόλοιπα βήματα μέχρι αφού λάβετε ένα μήνυμα ηλεκτρονικού ταχυδρομείου που σας ειδοποιεί ότι έχετε έχουν αποδεχτεί σε προεπισκόπηση.
3. Καταχωρήστε τη δυνατότητα σύνδεσης με τη συνδρομή σας, εισάγοντας τις παρακάτω εντολές:

        Register-AzureRmProviderFeature -FeatureName AllowAcceleratedNetworkingFeature -ProviderNamespace Microsoft.Network
        Register-AzureRmResourceProvider -ProviderNamespace Microsoft.Network

4. Αντικατάσταση *westcentralus* με το όνομα από μια άλλη θέση που υποστηρίζονται από αυτήν τη δυνατότητα που αναφέρονται στην ενότητα [περιορισμοί](#limitations) αυτού του άρθρου (Εάν θέλετε). Πληκτρολογήστε την παρακάτω εντολή για να ορίσετε μια μεταβλητή για τη θέση:

        $locName = "westcentralus"

5. Αντικαταστήστε το *RG1* με ένα όνομα για την ομάδα πόρων που θα περιέχει το νέο περιβάλλον εργασίας δικτύου και εισαγάγετε τις παρακάτω εντολές για τη δημιουργία του:

        $rgName = "RG1"
        New-AzureRmResourceGroup -Name $rgName -Location $locName

6. Αλλαγή *VM1 NIC1* σε τι θέλετε να ονομάσετε το περιβάλλον εργασίας δικτύου και, στη συνέχεια, εισαγάγετε την ακόλουθη εντολή:

        $NICName = "VM1-NIC1"

7. Το περιβάλλον εργασίας δικτύου, πρέπει να είστε συνδεδεμένοι με ένα δευτερεύον μέσα σε ένα υπάρχον Azure εικονικό δίκτυο (VNet) στην ίδια θέση και [συνδρομής](../azure-glossary-cloud-terminology.md#subscription) ως το περιβάλλον εργασίας δικτύου. Μάθετε περισσότερα σχετικά με τις VNets στο άρθρο [Επισκόπηση δικτύου εικονικές](virtual-networks-overview.md) Εάν δεν είστε εξοικειωμένοι με τους. Για να δημιουργήσετε ένα VNet, ολοκληρώστε τα βήματα στο άρθρο [Δημιουργία μιας VNet](virtual-networks-create-vnet-arm-ps.md) . Αλλάξτε τις "τιμές" από την παρακάτω $Variables στο όνομα της VNet και υποδικτύου που θέλετε να συνδέσετε το περιβάλλον εργασίας δικτύου για να.

        $VNetName   = "VNet1"
        $SubnetName = "Subnet1"

    Εάν δεν γνωρίζετε το όνομα ενός υπάρχοντος VNet στη θέση που επιλέξατε στο βήμα 3, εισαγάγετε τις παρακάτω εντολές:
        
        $VirtualNetworks = Get-AzureRmVirtualNetwork
        $VirtualNetworks | Where-Object {$_.Location -eq $locName} | Format-Table Name, Location
        
    Εάν η λίστα που επιστρέφονται είναι κενό, πρέπει να δημιουργήσετε ένα VNet στη θέση. Για να δημιουργήσετε ένα VNet, ολοκληρώστε τα βήματα στο άρθρο [Δημιουργία ένα εικονικό δίκτυο](virtual-networks-create-vnet-arm-ps.md) .

    Για να λάβετε το όνομα των δευτερευόντων δικτύων εντός του VNet, πληκτρολογήστε τις παρακάτω εντολές και να αντικαταστήσετε *Subnet1* παραπάνω με το όνομα ενός δευτερεύοντος δικτύου:
        
        $VNet = Get-AzureRmVirtualNetwork -Name $VNetName -ResourceGroupName $rgName
        $VNet.Subnets | Format-Table Name, AddressPrefix

8. Εισαγάγετε τις παρακάτω εντολές για να ανακτήσετε το VNet και το δευτερεύον και να εκχωρήσετε σε μεταβλητές.

        $VNet = Get-AzureRmVirtualNetwork -Name $VNetName -ResourceGroupName $rgName
        $Subnet = $VNet.Subnets | Where-Object { $_.Name -eq $SubnetName }

9. Προσδιορισμός ενός υπάρχοντος πόρου διεύθυνσης δημόσια IP, το που μπορούν να συσχετιστούν στο περιβάλλον εργασίας του δικτύου, ώστε να μπορείτε να συνδεθείτε με το μέσω του Internet. Εάν δεν θέλετε να έχετε πρόσβαση η Εικονική με το περιβάλλον εργασίας δικτύου μέσω του Internet, μπορείτε να παραλείψετε αυτό το βήμα. Χωρίς μια δημόσια διεύθυνση IP, πρέπει να συνδεθείτε την εικονική Μηχανή από μια άλλη Εικονική συνδεδεμένο με το ίδιο VNet. 

    Αλλαγή *PIP1* στο όνομα ενός υπάρχοντος πόρου διεύθυνσης δημόσια IP, το που υπάρχει στη θέση που θέλετε να δημιουργήσετε το περιβάλλον εργασίας δικτύου στην και που δεν είναι προς το παρόν σχετίζεται με μια άλλη διασύνδεση δικτύου. Εάν είναι απαραίτητο, αλλάξτε $rgName στο όνομα της ομάδας πόρων τη δημόσια πόρων διεύθυνση IP που υπάρχει στο και εισαγάγετε την ακόλουθη εντολή:

        $PIP1 = Get-AzureRmPublicIPAddress -Name "PIP1" -ResourceGroupName $rgName

    Εάν δεν γνωρίζετε το όνομα ενός υπάρχοντος πόρου δημόσια διεύθυνση IP, πληκτρολογήστε τις παρακάτω εντολές:

        $PublicIPAddresses = Get-AzureRmPublicIPAddress
        $PublicIPAddresses | Where-Object { $_.Location -eq $locName } |Format-Table Name, Location, IPAddress, IpConfiguration

    Εάν η στήλη **IPConfiguration** έχει καμία τιμή στο αποτέλεσμα επιστρέφεται, τη δημόσια πόρων διεύθυνση IP δεν έχει συσχετιστεί με ένα υπάρχον περιβάλλον εργασίας δικτύου και μπορεί να χρησιμοποιηθεί. Εάν η λίστα είναι κενό ή δεν υπάρχουν διαθέσιμοι πόροι δημόσια διεύθυνση IP, μπορείτε να δημιουργήσετε ένα χρησιμοποιώντας την εντολή Δημιουργία AzureRmPublicIPAddress.

    >[AZURE.NOTE] Δημόσιες διευθύνσεις IP έχουν nominal χρέωση. Μάθετε περισσότερα σχετικά με τις τιμές διαβάζοντας στη σελίδα [Τιμολόγηση διεύθυνση IP](https://azure.microsoft.com/pricing/details/ip-addresses) .
10. Εάν επιλέξατε να μην προσθήκη πόρου δημόσια διεύθυνση IP για το περιβάλλον εργασίας, κατάργηση *- PublicIPAddress $PIP1* στο τέλος της εντολής που ακολουθεί. Δημιουργήστε το περιβάλλον εργασίας δικτύου με επιτάχυνσης δικτύωση, πληκτρολογώντας την ακόλουθη εντολή:

        $nic = New-AzureRmNetworkInterface -Location $locName -Name $NICName -ResourceGroupName $rgName -Subnet $Subnet -EnableAcceleratedNetworking -PublicIpAddress $PIP1 

11. Εκχωρήστε το περιβάλλον εργασίας δικτύου σε μια Εικονική κατά τη δημιουργία του Εικονική, ακολουθώντας τις οδηγίες στο θέμα τα βήματα 3 και 6 του στο άρθρο [Δημιουργία μια Εικονική](../virtual-machines/virtual-machines-windows-ps-create.md) . Στο βήμα 6-2, αντικαταστήστε *Standard_A1* με ένα από τα μεγέθη Εικονική που αναφέρονται στην ενότητα [περιορισμοί](#limitations) αυτού του άρθρου.

    >[AZURE.NOTE] Εάν έχετε αλλάξει το *όνομα* του $locName, $rgName ή $nic μεταβλητές σε αυτό το άρθρο, θα αποτύχει η δημιουργία ενός άρθρου Εικονική βήμα 6. Ωστόσο, μπορείτε να αλλάξετε τις *τιμές* των μεταβλητών.

12. Όταν δημιουργηθεί η Εικονική, λήψη την [Επιτάχυνση δικτύωσης πρόγραμμα οδήγησης](https://gallery.technet.microsoft.com/Azure-Accelerated-471b5d84), σύνδεση με την εικονική Μηχανή και εκτελέστε το πρόγραμμα εγκατάστασης του προγράμματος οδήγησης μέσα η Εικονική.

13. Κάντε δεξί κλικ στο κουμπί των Windows και κάντε κλικ στην επιλογή **Διαχείριση συσκευών**. Βεβαιωθείτε ότι ο **Προσαρμογέα Ethernet εικονικού συνάρτηση Mellanox ConnectX-3** εμφανίζεται κάτω από την επιλογή **δικτύου** κατά την ανάπτυξη, όπως φαίνεται στην παρακάτω εικόνα:

    ![Διαχείριση συσκευών](./media/virtual-network-accelerated-networking-powershell/image2.png)