<properties 
   pageTitle="Προβολή αρχείων καταγραφής διαγνωστικών για ανάλυση λίμνης δεδομένων Azure | Microsoft Azure" 
   description="Κατανόηση των τον τρόπο εγκατάστασης και πρόσβαση σε αρχεία καταγραφής διαγνωστικών για ανάλυση λίμνης δεδομένων Azure " 
   services="data-lake-analytics" 
   documentationCenter="" 
   authors="Blackmist" 
   manager="jhubbard" 
   editor="cgronlun"/>
 
<tags
   ms.service="data-lake-analytics"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="big-data" 
   ms.date="08/11/2016"
   ms.author="larryfr"/>

# <a name="accessing-diagnostic-logs-for-azure-data-lake-analytics"></a>Πρόσβαση σε αρχεία καταγραφής διαγνωστικών για ανάλυση λίμνης δεδομένων Azure

Μάθετε πώς μπορείτε να ενεργοποιήσετε την καταγραφή διαγνωστικών για το λογαριασμό σας δεδομένων λίμνης ανάλυσης και πώς μπορείτε να προβάλετε τα αρχεία καταγραφής που έχουν συλλεχθεί για το λογαριασμό σας.

Εταιρείες να ενεργοποιήσετε την καταγραφή διαγνωστικών για λογαριασμό Azure δεδομένων λίμνης ανάλυσης για τη συλλογή ίχνη ελέγχου πρόσβασης δεδομένων. Αυτά τα αρχεία καταγραφής παρέχουν πληροφορίες όπως:

* Μια λίστα με τους χρήστες που έχουν πρόσβαση στα δεδομένα.
* Πόσο συχνά γίνεται τα δεδομένα.
* Όγκο δεδομένων είναι αποθηκευμένη στο λογαριασμό.

## <a name="prerequisites"></a>Προαπαιτούμενα στοιχεία

- **Azure μια συνδρομή**. Ανατρέξτε στο θέμα [λήψη Azure δωρεάν δοκιμαστικής έκδοσης](https://azure.microsoft.com/pricing/free-trial/).
- **Ενεργοποίηση της συνδρομής σας Azure** για δημόσια προεπισκόπηση δεδομένων λίμνης ανάλυσης. Ανατρέξτε στο θέμα [οδηγίες](data-lake-analytics-get-started-portal.md#signup).
- **Λογαριασμός azure δεδομένων λίμνης ανάλυσης**. Ακολουθήστε τις οδηγίες στο θέμα [Γρήγορα αποτελέσματα με Azure ανάλυση λίμνης δεδομένων με την πύλη του Azure](data-lake-analytics-get-started-portal.md).

## <a name="enable-logging"></a>Ενεργοποίηση καταγραφής

1. Πραγματοποιήστε είσοδο στον νέο [Azure πύλη](https://portal.azure.com).

2. Ανοίξτε το λογαριασμό σας ανάλυση λίμνης δεδομένων, και από το λογαριασμό blade ανάλυση λίμνης δεδομένων, κάντε κλικ στην επιλογή **Ρυθμίσεις**και, στη συνέχεια, κάντε κλικ στην επιλογή **Ρυθμίσεις διαγνωστικών**.

3. Στο το **διαγνωστικών** blade, κάντε τις ακόλουθες αλλαγές για να ρυθμίσετε τις παραμέτρους καταγραφή διαγνωστικών.

    ![Ενεργοποιήσετε την καταγραφή διαγνωστικών] (./media/data-lake-analytics-diagnostic-logs/enable-diagnostic-logs.png "Ενεργοποίηση αρχείων καταγραφής διαγνωστικών")

    * Ορισμός της **κατάστασής** σε **σε** για να ενεργοποιήσετε την καταγραφή διαγνωστικών.
    * Μπορείτε να επιλέξετε να/διαδικασία αποθήκευσης των δεδομένων σε δύο διαφορετικούς τρόπους.
        * Επιλέξτε **Εξαγωγή σε διανομέα συμβάντων** για ροή δεδομένων καταγραφής με ένα διανομέα συμβάν Azure. Χρησιμοποιήστε αυτήν την επιλογή, εάν έχετε μια διοχέτευση ροής επεξεργασίας για την ανάλυση εισερχόμενες αρχεία καταγραφής σε πραγματικό χρόνο. Εάν ενεργοποιήσετε αυτήν την επιλογή, πρέπει να παρέχετε τις λεπτομέρειες για την ενότητα συμβάντων Azure που θέλετε να χρησιμοποιήσετε.
        * Επιλέξτε **Εξαγωγή λογαριασμό χώρου αποθήκευσης** για την αποθήκευση αρχείων καταγραφής αποθήκευσης Azure λογαριασμό. Χρησιμοποιήστε αυτήν την επιλογή εάν θέλετε να αρχειοθετήσετε τα δεδομένα. Εάν ενεργοποιήσετε αυτήν την επιλογή, πρέπει να δώσετε ένα λογαριασμό αποθήκευσης Azure για να αποθηκεύσετε τα αρχεία καταγραφής για να.
    * Καθορίστε εάν θέλετε να λάβετε αρχεία καταγραφής ελέγχου ή αρχεία καταγραφής από την αίτηση ή και τα δύο.
    * Καθορίστε τον αριθμό των ημερών για την οποία πρέπει να διατηρούνται τα δεδομένα.
    * Κάντε κλικ στην επιλογή **Αποθήκευση**.

Αφού ενεργοποιήσετε διαγνωστικών ρυθμίσεων, μπορείτε να παρακολουθήσετε τα αρχεία καταγραφής στην καρτέλα **Αρχεία καταγραφής διαγνωστικών** .

## <a name="view-logs"></a>Προβολή αρχείων καταγραφής

Υπάρχουν δύο τρόποι για να προβάλετε τα δεδομένα του αρχείου καταγραφής για το λογαριασμό σας ανάλυση λίμνης δεδομένων.

* Από τις ρυθμίσεις λογαριασμού ανάλυσης δεδομένων λίμνης
* Από το λογαριασμό χώρου αποθήκευσης Azure όπου αποθηκεύονται τα δεδομένα

### <a name="using-the-data-lake-analytics-settings-view"></a>Χρήση της προβολής ρυθμίσεις ανάλυσης δεδομένων λίμνης

1. Σας ανάλυσης δεδομένων λίμνης blade **Ρυθμίσεις** λογαριασμού, κάντε κλικ στην επιλογή **Αρχεία καταγραφής διαγνωστικών**.

    ![Καταγραφή διαγνωστικών προβολή] (./media/data-lake-analytics-diagnostic-logs/view-diagnostic-logs.png "Προβολή αρχείων καταγραφής διαγνωστικών") 

2. Στην τα **Αρχεία καταγραφής διαγνωστικών** blade, θα πρέπει να βλέπετε τα αρχεία καταγραφής Κατηγοριοποίηση κατά **Αρχεία καταγραφής ελέγχου** και **Αρχεία καταγραφής από την αίτηση**.
    * Αρχεία καταγραφής από την πρόσκληση σε κάθε αίτηση API που έγιναν στον λογαριασμό ανάλυσης δεδομένων λίμνης καταγραφής.
    * Αρχεία καταγραφής ελέγχου είναι παρόμοια με αίτημα αρχεία καταγραφής, αλλά παρέχουν μια πιο λεπτομερή ανάλυση των τις λειτουργίες που εκτελούνται στον λογαριασμό ανάλυση λίμνης δεδομένων. Για παράδειγμα, μια κλήση API μία αποστολή στα αρχεία καταγραφής αίτηση ενδέχεται να έχει ως αποτέλεσμα πολλαπλές λειτουργίες "Προσάρτηση" στα αρχεία καταγραφής ελέγχου.

3. Κάντε κλικ στη σύνδεση **λήψης** για μια καταχώρηση αρχείου καταγραφής για να κάνετε λήψη των αρχείων καταγραφής.

### <a name="from-the-azure-storage-account-that-contains-log-data"></a>Από το λογαριασμό χώρου αποθήκευσης Azure που περιέχει τα δεδομένα του αρχείου καταγραφής

1. Ανοίξτε το blade λογαριασμό αποθήκευσης Azure που σχετίζεται με δεδομένα λίμνης ανάλυση για να συνδεθείτε και, στη συνέχεια, κάντε κλικ στην επιλογή αντικείμενα blob. Η **υπηρεσία Blob** blade παραθέτει δύο κοντέινερ.

    ![Καταγραφή διαγνωστικών προβολή] (./media/data-lake-analytics-diagnostic-logs/view-diagnostic-logs-storage-account.png "Προβολή αρχείων καταγραφής διαγνωστικών")

    * Το κοντέινερ **ιδέες-αρχεία καταγραφής ελέγχου** περιέχει τα αρχεία καταγραφής ελέγχου.
    * Το κοντέινερ **ιδέες-αρχεία καταγραφής-αιτήσεις** περιέχει τα αρχεία καταγραφής από την αίτηση.

2. Μέσα σε αυτά τα κοντέινερ, τα αρχεία καταγραφής είναι αποθηκευμένα στην περιοχή την ακόλουθη δομή.

        resourceId=/
          SUBSCRIPTIONS/
            <<SUBSCRIPTION_ID>>/
              RESOURCEGROUPS/
                <<RESOURCE_GRP_NAME>>/
                  PROVIDERS/
                    MICROSOFT.DATALAKEANALYTICS/
                      ACCOUNTS/
                        <DATA_LAKE_ANALYTICS_NAME>>/
                          y=####/
                            m=##/
                              d=##/
                                h=##/
                                  m=00/
                                    PT1H.json
    
    > [AZURE.NOTE] Το `##` καταχωρήσεις της διαδρομής περιέχουν το έτος, μήνας, ημέρα και ώρα στην οποία δημιουργήθηκε το αρχείο καταγραφής. Ανάλυση δεδομένων λίμνης δημιουργεί ένα αρχείο κάθε ώρα, επομένως `m=` θα περιέχει πάντοτε την τιμή `00`.

    Ως παράδειγμα, μπορεί να είναι η πλήρης διαδρομή αρχείου καταγραφής ελέγχου:
    
        https://adllogs.blob.core.windows.net/insights-logs-audit/resourceId=/SUBSCRIPTIONS/<sub-id>/RESOURCEGROUPS/myresourcegroup/PROVIDERS/MICROSOFT.DATALAKEANALYTICS/ACCOUNTS/mydatalakeanalytics/y=2016/m=07/d=18/h=04/m=00/PT1H.json

    Ομοίως, μπορεί να είναι η πλήρης διαδρομή σε ένα αρχείο καταγραφής αίτηση:
    
        https://adllogs.blob.core.windows.net/insights-logs-requests/resourceId=/SUBSCRIPTIONS/<sub-id>/RESOURCEGROUPS/myresourcegroup/PROVIDERS/MICROSOFT.DATALAKEANALYTICS/ACCOUNTS/mydatalakeanalytics/y=2016/m=07/d=18/h=14/m=00/PT1H.json

## <a name="log-structure"></a>Δομή αρχείου καταγραφής

Τα αρχεία καταγραφής ελέγχου και αίτηση είναι σε μορφή JSON. Σε αυτήν την ενότητα, εξετάστε τη δομή του JSON για την αίτηση και αρχεία καταγραφής ελέγχου.

### <a name="request-logs"></a>Πρόσκληση σε αρχεία καταγραφής

Ακολουθεί ένα δείγμα καταχώρησης στο αρχείο καταγραφής μορφοποίηση JSON αίτηση. Κάθε blob έχει ένα αντικείμενο ρίζας που ονομάζεται **εγγραφών** που περιέχει έναν πίνακα καταγραφής αντικειμένων.

    {
    "records": 
      [     
        . . . .
        ,
        {
             "time": "2016-07-07T21:02:53.456Z",
             "resourceId": "/SUBSCRIPTIONS/<subscription_id>/RESOURCEGROUPS/<resource_group_name>/PROVIDERS/MICROSOFT.DATALAKEANALYTICS/ACCOUNTS/<data_lake_analytics_account_name>",
             "category": "Requests",
             "operationName": "GetAggregatedJobHistory",
             "resultType": "200",
             "callerIpAddress": "::ffff:1.1.1.1",
             "correlationId": "4a11c709-05f5-417c-a98d-6e81b3e29c58",
             "identity": "1808bd5f-62af-45f4-89d8-03c5e81bac30",
             "properties": {
                 "HttpMethod":"POST",
                 "Path":"/JobAggregatedHistory",
                 "RequestContentLength":122,
                 "ClientRequestId":"3b7adbd9-3519-4f28-a61c-bd89506163b8",
                 "StartTime":"2016-07-07T21:02:52.472Z",
                 "EndTime":"2016-07-07T21:02:53.456Z"
                 }
        }
        ,
        . . . .
      ]
    }

#### <a name="request-log-schema"></a>Αίτηση καταγραφής σχήματος

| Όνομα            | Τύπος   | Περιγραφή                                                                    |
|-----------------|--------|--------------------------------------------------------------------------------|
| ώρα            | Συμβολοσειρά | Η σήμανση χρόνου (σε UTC) του αρχείου καταγραφής                                              |
| resourceId      | Συμβολοσειρά | Τοποθετήστε το Αναγνωριστικό του πόρου που χρειάστηκαν λειτουργίας σε                            |
| κατηγορία        | Συμβολοσειρά | Η κατηγορία καταγραφής. Για παράδειγμα, **αιτήσεις**.                                   |
| operationName   | Συμβολοσειρά | Όνομα της λειτουργίας που έχει συνδεθεί. Για παράδειγμα, GetAggregatedJobHistory.              |
| resultType      | Συμβολοσειρά | Η κατάσταση της λειτουργίας, για παράδειγμα, 200.                                 |
| callerIpAddress | Συμβολοσειρά | Η διεύθυνση IP του προγράμματος-πελάτη που κάνει το αίτημα                                |
| correlationId   | Συμβολοσειρά | Το αναγνωριστικό του αρχείου καταγραφής. Αυτή η τιμή μπορεί να χρησιμοποιηθεί για να ομαδοποιήσετε ένα σύνολο σχετικών εγγραφές |
| ταυτότητα        | Αντικείμενο | Η ταυτότητα που δημιούργησε το αρχείο καταγραφής                                            |
| Ιδιότητες      | JSON   | Ανατρέξτε στην επόμενη ενότητα (αίτηση καταγραφής ιδιότητες σχήματος) για λεπτομέρειες |

#### <a name="request-log-properties-schema"></a>Αίτηση καταγραφής ιδιότητες σχήματος

| Όνομα                 | Τύπος   | Περιγραφή                                               |
|----------------------|--------|-----------------------------------------------------------|
| HttpMethod           | Συμβολοσειρά | Η μέθοδος HTTP χρησιμοποιηθεί για τη λειτουργία. Για παράδειγμα, η ΛΉΨΗ. |
| Διαδρομή                 | Συμβολοσειρά | Η διαδρομή της λειτουργίας έχει πραγματοποιηθεί σε                   |
| RequestContentLength | Int    | Το μήκος του περιεχομένου της αίτησης HTTP                    |
| ClientRequestId      | Συμβολοσειρά | Το αναγνωριστικό που προσδιορίζει με μοναδικό τρόπο αυτήν την αίτηση              |
| Ώρα έναρξης            | Συμβολοσειρά | Την ώρα κατά την οποία ο διακομιστής έλαβε την πρόσκληση         |
| Ώρα λήξης              | Συμβολοσειρά | Την ώρα κατά την οποία ο διακομιστής αποστολή απόκρισης              |

### <a name="audit-logs"></a>Αρχεία καταγραφής ελέγχου

Ακολουθεί ένα δείγμα καταχώρησης στο αρχείο καταγραφής ελέγχου JSON μορφοποίηση. Κάθε blob περιλαμβάνει ένα αντικείμενο ρίζας που ονομάζεται **εγγραφών** που περιέχει έναν πίνακα καταγραφής αντικειμένων

    {
    "records": 
      [     
        . . . .
        ,
        {
             "time": "2016-07-28T19:15:16.245Z",
             "resourceId": "/SUBSCRIPTIONS/<subscription_id>/RESOURCEGROUPS/<resource_group_name>/PROVIDERS/MICROSOFT.DATALAKEANALYTICS/ACCOUNTS/<data_lake_ANALYTICS_account_name>",
             "category": "Audit",
             "operationName": "JobSubmitted",
             "identity": "user@somewhere.com",
             "properties": {
                 "JobId":"D74B928F-5194-4E6C-971F-C27026C290E6",
                 "JobName": "New Job", 
                 "JobRuntimeName": "default",
                 "SubmitTime": "7/28/2016 7:14:57 PM"
                 }
        }
        ,
        . . . .
      ]
    }

#### <a name="audit-log-schema"></a>Σχήμα αρχείου καταγραφής ελέγχου

| Όνομα            | Τύπος   | Περιγραφή                                                                    |
|-----------------|--------|--------------------------------------------------------------------------------|
| ώρα            | Συμβολοσειρά | Η σήμανση χρόνου (σε UTC) του αρχείου καταγραφής                                              |
| resourceId      | Συμβολοσειρά | Τοποθετήστε το Αναγνωριστικό του πόρου που χρειάστηκαν λειτουργίας σε                            |
| κατηγορία        | Συμβολοσειρά | Η κατηγορία καταγραφής. Για παράδειγμα, **ελέγχου**.                                      |
| operationName   | Συμβολοσειρά | Όνομα της λειτουργίας που έχει συνδεθεί. Για παράδειγμα, JobSubmitted.              |
| resultType | Συμβολοσειρά | Μια δευτερεύουσα κατάσταση για την κατάσταση της εργασίας (operationName). |
| resultSignature | Συμβολοσειρά | Πρόσθετες λεπτομέρειες σχετικά με την κατάσταση της εργασίας (operationName). |
| ταυτότητα      | Συμβολοσειρά | Ο χρήστης που ζητήσει η λειτουργία. Για παράδειγμα, susan@contoso.com.                                 |
| Ιδιότητες      | JSON   | Ανατρέξτε στην επόμενη ενότητα (σχήματος ιδιότητες αρχείου καταγραφής ελέγχου) για λεπτομέρειες |

> [AZURE.NOTE] __resultType__ και __resultSignature__ παρέχουν πληροφορίες σχετικά με το αποτέλεσμα μιας λειτουργίας και περιέχει μια τιμή μόνο αν μια εργασία έχει ολοκληρωθεί. Για παράδειγμα, περιέχουν μια τιμή όταν __operationName__ περιέχει μια τιμή __JobStarted__ ή __JobEnded__.

#### <a name="audit-log-properties-schema"></a>Σχήμα ιδιότητες αρχείου καταγραφής ελέγχου

| Όνομα       | Τύπος   | Περιγραφή                              |
|------------|--------|------------------------------------------|
| JobId | Συμβολοσειρά | Το Αναγνωριστικό που έχει αντιστοιχιστεί στο έργο  |
| Όνομα_εργασίας | Συμβολοσειρά | Το όνομα που δόθηκε για το έργο |
| JobRunTime | Συμβολοσειρά | Το περιβάλλον εκτέλεσης που χρησιμοποιείται για την επεξεργασία της εργασίας |
| SubmitTime | Συμβολοσειρά | Η ώρα (UTC) που έχει υποβληθεί η εργασία |
| Ώρα έναρξης | Συμβολοσειρά | Κατά την εκκίνηση της εργασίας εκτελούνται μετά την υποβολή (σε UTC). |
| Ώρα λήξης | Συμβολοσειρά | Ο χρόνος τερματιστεί η εργασία. |
| Παραλληλισμό | Συμβολοσειρά | Ο αριθμός των μονάδων ανάλυσης δεδομένων λίμνης ζητήθηκε για αυτή την εργασία κατά την υποβολή. |

> [AZURE.NOTE] __SubmitTime__, __ώρα έναρξης__, __ώρα λήξης__ και __παραλληλισμό__ παρέχουν πληροφορίες σχετικά με μια λειτουργία και περιέχει μια τιμή μόνο εάν μια λειτουργία έχει ξεκινήσει ή να ολοκληρωθεί. Για παράδειγμα, __SubmitTime__ περιέχει μια τιμή αφού __operationName__ υποδεικνύει __JobSubmitted__.

## <a name="process-the-log-data"></a>Διαδικασία τα δεδομένα του αρχείου καταγραφής

Ανάλυση λίμνης Azure δεδομένων παρέχει ένα δείγμα σχετικά με τον τρόπο για να επεξεργαστείτε και να αναλύσετε τα δεδομένα του αρχείου καταγραφής. Μπορείτε να βρείτε το δείγμα στο [https://github.com/Azure/AzureDataLake/tree/master/Samples/AzureDiagnosticsSample](https://github.com/Azure/AzureDataLake/tree/master/Samples/AzureDiagnosticsSample). 


## <a name="next-steps"></a>Επόμενα βήματα

- [Επισκόπηση της ανάλυσης λίμνης Azure δεδομένων](data-lake-analytics-overview.md)


