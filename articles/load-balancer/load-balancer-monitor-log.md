<properties
   pageTitle="Παρακολουθείτε λειτουργίες, συμβάντων και μετρητών για εξισορρόπηση φόρτου | Microsoft Azure"
   description="Μάθετε πώς μπορείτε να ενεργοποιήσετε την ειδοποίηση συμβάντων και Διερεύνηση καταγραφής κατάστασης εύρυθμης λειτουργίας για μονάδα εξισορρόπησης φόρτου Azure"
   services="load-balancer"
   documentationCenter="na"
   authors="sdwheeler"
   manager="carmonm"
   editor="tysonn"
   tags="azure-resource-manager"
/>
<tags
   ms.service="load-balancer"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="10/24/2016"
   ms.author="sewhee" />

# <a name="log-analytics-for-azure-load-balancer-preview"></a>Αρχείο καταγραφής ανάλυσης για Azure εξισορρόπηση φόρτου (έκδοση Preview)

Μπορείτε να χρησιμοποιήσετε διαφορετικούς τύπους αρχείων καταγραφής στο Azure για τη διαχείριση και αντιμετώπιση προβλημάτων balancers φόρτωση. Ορισμένα από αυτά τα αρχεία καταγραφής είναι δυνατή η πρόσβαση μέσω της πύλης. Όλα τα αρχεία καταγραφής μπορεί να είναι που έχουν εξαχθεί από χώρο αποθήκευσης αντικειμένων blob του Azure και να προβληθούν σε διάφορα εργαλεία, όπως το Excel και PowerBI. Μπορείτε να μάθετε περισσότερα σχετικά με τους διαφορετικούς τύπους αρχείων καταγραφής από την παρακάτω λίστα.

- **Αρχεία καταγραφής ελέγχου:** Μπορείτε να χρησιμοποιήσετε [Αρχεία καταγραφής ελέγχου Azure](../../articles/monitoring-and-diagnostics/insights-debugging-with-events.md) (παλαιότερα γνωστό ως λειτουργικές αρχεία καταγραφής) για να προβάλετε όλες τις εργασίες που υποβάλλεται σε σας εγγραφών στο Azure και την κατάστασή τους. Αρχεία καταγραφής ελέγχου είναι ενεργοποιημένες από προεπιλογή και μπορούν να προβληθούν στην πύλη του Azure.
- **Ειδοποίηση αρχεία καταγραφής συμβάντων:** Μπορείτε να χρησιμοποιήσετε αυτό το αρχείο καταγραφής για να δείτε ποιες ειδοποιήσεων για εξισορρόπηση φόρτου είναι υψωμένο. Η κατάσταση για τη μονάδα εξισορρόπησης φόρτου που συλλέγονται κάθε πέντε λεπτά. Αυτό το αρχείο καταγραφής έχει εγγραφεί μόνο εάν ένα συμβάν ειδοποίησης εξισορρόπησης φόρτου ενεργοποιείται.
- **Αρχεία καταγραφής δοκιμή του εύρυθμης λειτουργίας:** Μπορείτε να χρησιμοποιήσετε αυτό το αρχείο καταγραφής ελέγχου για τη δοκιμή του κατάσταση ελέγχου εύρυθμης λειτουργίας, πόσες εμφανίσεις είναι σε σύνδεση με τη φόρτωση εξισορρόπησης παρασκηνίου και ποσοστό εικονικές μηχανές λαμβάνει κίνηση του δικτύου από τη μονάδα εξισορρόπησης φόρτου. Αυτό το αρχείο καταγραφής έχει συνταχθεί σε αλλαγή συμβάντος κατάστασης δοκιμή του.

>[AZURE.IMPORTANT] Συνδεθείτε ανάλυση λειτουργεί επί του παρόντος μόνο για το Internet αντικριστές balancers φόρτωση. Αρχεία καταγραφής είναι διαθέσιμα μόνο για τους πόρους που έχουν αναπτυχθεί στο μοντέλο ανάπτυξης διαχείρισης πόρων. Δεν μπορείτε να χρησιμοποιήσετε τα αρχεία καταγραφής για τους πόρους στο μοντέλο κλασική ανάπτυξης. Για περισσότερες πληροφορίες σχετικά με τα υποδείγματα ανάπτυξης, ανατρέξτε στο θέμα [Κατανόηση της διαχείρισης πόρων ανάπτυξης και κλασική ανάπτυξης](../../articles/resource-manager-deployment-model.md).

## <a name="enable-logging"></a>Ενεργοποίηση καταγραφής

Καταγραφή ελέγχου ενεργοποιείται αυτόματα για κάθε πόρο για τη διαχείριση πόρων. Πρέπει να ενεργοποιήσετε το συμβάν και εύρυθμης λειτουργίας δοκιμή του καταγραφής για να ξεκινήσετε τη συλλογή των δεδομένων που είναι διαθέσιμα μέσω αυτά τα αρχεία καταγραφής. Χρησιμοποιήστε τα παρακάτω βήματα για να ενεργοποιήσετε την καταγραφή.

Πραγματοποιήστε είσοδο στην [πύλη του Azure](http://portal.azure.com). Εάν δεν έχετε ήδη μια μονάδα εξισορρόπησης φόρτου, [Δημιουργήστε μια μονάδα εξισορρόπησης φόρτου](load-balancer-get-started-internet-arm-ps.md) πριν να συνεχίσετε.

1. Στην πύλη, κάντε κλικ στο κουμπί **Αναζήτηση**.
2. Επιλέξτε **Φόρτωση Balancers**.

    ![πύλη - μονάδα εξισορρόπησης φόρτου](./media/load-balancer-monitor-log/load-balancer-browse.png)

3. Επιλέξτε μια υπάρχουσα εξισορρόπηση φόρτου >> **Όλες τις ρυθμίσεις**.
4. Στη δεξιά πλευρά του παραθύρου διαλόγου κάτω από το όνομα του τη μονάδα εξισορρόπησης φόρτου, κάντε κύλιση προς **Παρακολούθηση**, κάντε κλικ στην επιλογή **Διαγνωστικά**.

    ![πύλη - ρυθμίσεις φόρτωσης εξισορρόπησης](./media/load-balancer-monitor-log/load-balancer-settings.png)

5. Στο παράθυρο **Διαγνωστικά** , στην περιοχή **κατάσταση**, επιλέξτε **στο**.
6. Κάντε κλικ στο **λογαριασμό του χώρου αποθήκευσης**.
7. Στην περιοχή **αρχεία ΚΑΤΑΓΡΑΦΉΣ**, επιλέξτε έναν υπάρχοντα λογαριασμό του χώρου αποθήκευσης ή δημιουργήστε ένα νέο. Χρησιμοποιήστε το ρυθμιστικό για να προσδιορίσετε πόσες ημέρες συμβάν dat θα διατηρηθούν στο τα αρχεία καταγραφής συμβάντων. 8. Κάντε κλικ στην επιλογή **Αποθήκευση**.

    ![Πύλη - αρχεία καταγραφής διαγνωστικών](./media/load-balancer-monitor-log/load-balancer-diagnostics.png)

>[AZURE.INFORMATION] αρχεία καταγραφής ελέγχου δεν απαιτεί λογαριασμό στο νέο χώρο αποθήκευσης. Η χρήση του χώρου αποθήκευσης για το συμβάν και την εύρυθμη λειτουργία δοκιμή του καταγραφής θα χρεωθείτε υπηρεσίας.

## <a name="audit-log"></a>Αρχείο καταγραφής ελέγχου

Το αρχείο καταγραφής ελέγχου δημιουργείται από προεπιλογή. Τα αρχεία καταγραφής διατηρούνται για 90 ημέρες στο χώρο αποθήκευσης του Azure αρχεία καταγραφής συμβάντων. Μάθετε περισσότερα σχετικά με αυτά τα αρχεία καταγραφής στο άρθρο [Προβολή συμβάντων και αρχεία καταγραφής ελέγχου](../../articles/monitoring-and-diagnostics/insights-debugging-with-events.md) .

## <a name="alert-event-log"></a>Ειδοποίηση αρχείο καταγραφής συμβάντων

Αυτό το αρχείο καταγραφής δημιουργείται μόνο εάν έχετε ενεργοποιήσει σε ένα ανά βάση εξισορρόπησης φόρτου. Τα συμβάντα έχουν συνδεθεί σε μορφή JSON και θα αποθηκευτεί στο λογαριασμό χώρου αποθήκευσης που καθορίσατε όταν έχετε ενεργοποιήσει την καταγραφή. Ακολουθεί ένα παράδειγμα του συμβάντος.

    {
    "time": "2016-01-26T10:37:46.6024215Z",
    "systemId": "32077926-b9c4-42fb-94c1-762e528b5b27",
    "category": "LoadBalancerAlertEvent",
    "resourceId": "/SUBSCRIPTIONS/XXXXXXXXXXXXXXXXX-XXXX-XXXX-XXXXXXXXX/RESOURCEGROUPS/RG7/PROVIDERS/MICROSOFT.NETWORK/LOADBALANCERS/WWEBLB",
    "operationName": "LoadBalancerProbeHealthStatus",
    "properties": {
        "eventName": "Resource Limits Hit",
        "eventDescription": "Ports exhausted",
        "eventProperties": {
            "public ip address": "40.117.227.32"
        }
    }

Το αποτέλεσμα του JSON εμφανίζει την ιδιότητα *eventname* , η οποία θα περιγράφει το λόγο για τη μονάδα εξισορρόπησης φόρτου που δημιουργήσατε μια ειδοποίηση. Σε αυτήν την περίπτωση, η ειδοποίηση που δημιουργούνται ήταν λόγω εξάντλησης θύρες TCP που προκαλούνται από την προέλευση IP NAT όρια (SNAT).

## <a name="health-probe-log"></a>Αρχείο καταγραφής δοκιμή του εύρυθμης λειτουργίας

Αυτό το αρχείο καταγραφής δημιουργείται μόνο εάν έχετε ενεργοποιήσει σε ένα ανά φόρτωσης εξισορρόπησης βάση όπως περιγράφεται παραπάνω. Τα δεδομένα αποθηκεύονται σε το λογαριασμό χώρου αποθήκευσης που καθορίσατε όταν έχετε ενεργοποιήσει την καταγραφή. Δημιουργείται ένα κοντέινερ που ονομάζεται 'ιδέες-αρχεία καταγραφής-loadbalancerprobehealthstatus' και έχει συνδεθεί τα εξής δεδομένα:

    {
        "records":
        {
            "time": "2016-01-26T10:37:46.6024215Z",
            "systemId": "32077926-b9c4-42fb-94c1-762e528b5b27",
            "category": "LoadBalancerProbeHealthStatus",
            "resourceId": "/SUBSCRIPTIONS/XXXXXXXXXXXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXX/RESOURCEGROUPS/RG7/PROVIDERS/MICROSOFT.NETWORK/LOADBALANCERS/WWEBLB",
            "operationName": "LoadBalancerProbeHealthStatus",
            "properties": {
                "publicIpAddress": "40.83.190.158",
                "port": "81",
                "totalDipCount": 2,
                "dipDownCount": 1,
                "healthPercentage": 50.000000
            }
        },
        {
            "time": "2016-01-26T10:37:46.6024215Z",
            "systemId": "32077926-b9c4-42fb-94c1-762e528b5b27",
            "category": "LoadBalancerProbeHealthStatus",
            "resourceId": "/SUBSCRIPTIONS/XXXXXXXXXXXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXX/RESOURCEGROUPS/RG7/PROVIDERS/MICROSOFT.NETWORK/LOADBALANCERS/WWEBLB",
            "operationName": "LoadBalancerProbeHealthStatus",
            "properties": {
                "publicIpAddress": "40.83.190.158",
                "port": "81",
                "totalDipCount": 2,
                "dipDownCount": 0,
                "healthPercentage": 100.000000
            }
        }
    }

Εμφανίζει το αποτέλεσμα του JSON στο πεδίο ιδιότητες τις βασικές πληροφορίες για την κατάσταση εύρυθμης λειτουργίας δοκιμή του. Η ιδιότητα *dipDownCount* εμφανίζει τον συνολικό αριθμό των παρουσιών στην το παρασκηνίου που δεν λαμβάνουν κίνηση του δικτύου λόγω αποτυχίας δοκιμή του απαντήσεων.

## <a name="view-and-analyze-the-audit-log"></a>Προβολή και ανάλυση του αρχείου καταγραφής ελέγχου

Μπορείτε να προβάλετε και να αναλύσετε δεδομένα του αρχείου καταγραφής ελέγχου χρησιμοποιώντας οποιαδήποτε από τις παρακάτω μεθόδους:

- **Azure εργαλεία:** Ανακτήστε πληροφορίες από τα αρχεία καταγραφής ελέγχου μέσω του Azure PowerShell, το περιβάλλον γραμμής εντολών Azure (CLI), το REST API Azure ή την πύλη Azure preview. Οδηγίες βήμα προς βήμα για κάθε μέθοδο είναι λεπτομερή στο άρθρο [Λειτουργίες ελέγχου με τη διαχείριση πόρων](../../articles/resource-group-audit.md) .
- **Του power BI:** Εάν δεν έχετε ήδη ένα λογαριασμό του [Power BI](https://powerbi.microsoft.com/pricing) , μπορείτε να το δοκιμάσετε δωρεάν. Χρησιμοποιώντας τα [αρχεία καταγραφής ελέγχου Azure περιεχομένου πακέτου για το Power BI](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs), μπορείτε να αναλύσετε τα δεδομένα σας με τους πίνακες εργαλείων προκαθορισμένο ή μπορείτε να προσαρμόσετε προβολές για να ανταποκρίνονται στις ανάγκες σας.

## <a name="view-and-analyze-the-health-probe-and-event-log"></a>Προβολή και ανάλυση η δοκιμή του εύρυθμης λειτουργίας και το αρχείο καταγραφής συμβάντων

Πρέπει να συνδεθείτε στο λογαριασμό σας χώρου αποθήκευσης και να ανακτήσετε τις εγγραφές του αρχείου JSON για τα αρχεία καταγραφής δοκιμή του συμβάντος και την εύρυθμη λειτουργία. Αφού κάνετε λήψη των αρχείων JSON, μπορείτε να τις μετατρέψετε σε CSV και προβολή στο Excel, PowerBI ή οποιοδήποτε άλλο εργαλείο απεικόνισης δεδομένων.

>[AZURE.TIP] Εάν είστε εξοικειωμένοι με το Visual Studio και βασικές έννοιες της αλλαγής τιμές για τις σταθερές και μεταβλητές σε C#, μπορείτε να χρησιμοποιήσετε τα [Εργαλεία μετατροπέα καταγραφής](https://github.com/Azure-Samples/networking-dotnet-log-converter) διαθέσιμο από Github.

## <a name="additional-resources"></a>Πρόσθετοι πόροι

- Δημοσίευση ιστολογίου [αναπαράσταση του Azure αρχεία καταγραφής ελέγχου με το Power BI](http://blogs.msdn.com/b/powerbi/archive/2015/09/30/monitor-azure-audit-logs-with-power-bi.aspx) .
- [Προβολή και ανάλυση των αρχείων καταγραφής ελέγχου Azure στο Power BI και πολλά άλλα](https://azure.microsoft.com/blog/analyze-azure-audit-logs-in-powerbi-more/) καταχώρηση ιστολογίου.

## <a name="next-steps"></a>Επόμενα βήματα

[Κατανόηση των καθετήρες εξισορρόπησης φόρτου](load-balancer-custom-probe-overview.md)
