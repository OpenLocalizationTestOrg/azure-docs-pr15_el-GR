<properties
   pageTitle="Εξαρτήσεις σε πρότυπα διαχείρισης πόρων | Microsoft Azure"
   description="Περιγράφει τον τρόπο για να ορίσετε έναν πόρο ως εξαρτάται από άλλον πόρο κατά τη διάρκεια της ανάπτυξης για να βεβαιωθείτε ότι πόρους αναπτύσσονται στη σωστή σειρά."
   services="azure-resource-manager"
   documentationCenter="na"
   authors="tfitzmac"
   manager="timlt"
   editor=""/>

<tags
   ms.service="azure-resource-manager"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="09/12/2016"
   ms.author="tomfitz"/>

# <a name="defining-dependencies-in-azure-resource-manager-templates"></a>Ορισμός εξαρτήσεων στα πρότυπα διαχείρισης πόρων Azure

Για ένα συγκεκριμένο πόρο, μπορεί να υπάρχουν άλλοι πόροι που πρέπει να υπάρχει πριν από τον πόρο έχει αναπτυχθεί. Για παράδειγμα, SQL server πρέπει να υπάρχει πριν να επιχειρήσετε να αναπτύξετε μια βάση δεδομένων SQL. Μπορείτε να ορίσετε αυτήν τη σχέση με τη σήμανση ενός πόρου ως εξαρτάται από το άλλο πόρο. Συνήθως, μπορείτε να καθορίσετε μια εξάρτηση με το στοιχείο **dependsOn** , αλλά μπορείτε επίσης να ορίσετε μέσω της συνάρτησης **αναφοράς** . 

Διαχείριση πόρων αξιολογεί τις εξαρτήσεις μεταξύ τους πόρους και αναπτύσσει τους με τους εξαρτώμενα σειρά. Όταν δεν εξαρτάται από μεταξύ τους πόρους, διαχείριση πόρων τους αναπτύσσει παράλληλα.

## <a name="dependson"></a>dependsOn

Εντός του προτύπου, το στοιχείο dependsOn σάς επιτρέπει να ορίσετε έναν πόρο ως ένα εξαρτάται από έναν ή περισσότερους πόρους. Την τιμή που μπορεί να είναι μια λίστα ονομάτων πόρων διαχωρισμένες με κόμματα. 

Το παρακάτω παράδειγμα εμφανίζει ένα σύνολο κλίμακα εικονικό μηχάνημα που εξαρτάται από μια μονάδα εξισορρόπησης φόρτου, εικονικού δικτύου και επανάληψη που δημιουργεί πολλούς λογαριασμούς χώρου αποθήκευσης. Αυτές οι άλλοι πόροι δεν εμφανίζονται στο παρακάτω παράδειγμα, αλλά θα πρέπει να υπάρχει σε κάποιο άλλο σημείο στο πρότυπο.

    {
      "type": "Microsoft.Compute/virtualMachineScaleSets",
      "name": "[variables('namingInfix')]",
      "location": "[variables('location')]",
      "apiVersion": "2016-03-30",
      "tags": {
        "displayName": "VMScaleSet"
      },
      "dependsOn": [
        "storageLoop",
        "[concat('Microsoft.Network/loadBalancers/', variables('loadBalancerName'))]",
        "[concat('Microsoft.Network/virtualNetworks/', variables('virtualNetworkName'))]"
      ],
      ...
    }

Για να ορίσετε μια εξάρτηση ανάμεσα σε έναν πόρο και τους πόρους που έχουν δημιουργηθεί μέσω ενός βρόχου αντίγραφο, ορίστε το στοιχείο dependsOn στο όνομα του βρόχου. Για παράδειγμα, ανατρέξτε στο θέμα [Δημιουργία πολλών παρουσιών των πόρων στη Διαχείριση Azure πόρων](resource-group-create-multiple.md).

Ενώ μπορεί να διατηρείται κεκλιμένο για να χρησιμοποιήσετε dependsOn για να αντιστοιχίσετε σχέσεις μεταξύ τους πόρους σας, είναι σημαντικό να κατανοήσετε γιατί κάνετε αυτό επειδή αυτό μπορεί να επηρεάσει την απόδοση της ανάπτυξής σας. Για παράδειγμα, για να τεκμηριώσετε πώς αυτά συνδέονται μεταξύ τους πόρους, dependsOn δεν είναι η σωστή προσέγγιση. Δεν είναι δυνατό να υποβάλετε ερώτημα τους πόρους που έχουν οριστεί στο στοιχείο dependsOn μετά την ανάπτυξη. Με τη χρήση dependsOn, που ενδέχεται να επηρεάσουν χρόνο ανάπτυξης επειδή δεν ανάπτυξη διαχείριση πόρων σε παράλληλες δύο πόροι που έχουν εξάρτηση. Για να έγγραφο σχέσεις μεταξύ τους πόρους, εναλλακτικά χρησιμοποιήστε [σύνδεση πόρων](resource-group-link-resources.md).

## <a name="child-resources"></a>Θυγατρικό πόροι

Η ιδιότητα τους πόρους σας επιτρέπει να καθορίσετε το παιδί πόρους που σχετίζονται με τον πόρο που έχει οριστεί. Πόροι θυγατρικό μόνο μπορεί να είναι καθορισμένο πέντε επίπεδα. Είναι σημαντικό να λάβετε υπόψη ότι δεν έχει δημιουργηθεί μια μη ρητή εξάρτηση μεταξύ ενός πόρου θυγατρικό και του πόρου γονικό στοιχείο. Εάν χρειάζεστε τον πόρο θυγατρικό μέχρι να αναπτυχθούν μετά τον πόρο γονικό, που πρέπει να δηλώνουν ρητά αυτή η εξάρτηση με την ιδιότητα dependsOn. 

Κάθε πόρο γονικό δέχεται μόνο συγκεκριμένους τύπους πόρων ως θυγατρικό πόρους. Οι τύποι πόρων αποδεκτή καθορίζονται στο [πρότυπο σχήματος](https://github.com/Azure/azure-resource-manager-schemas) του γονικού πόρου. Το όνομα του τύπου πόρου θυγατρικό περιλαμβάνει το όνομα του ο γονικός τύπος πόρου, όπως **Microsoft.Web/sites/config** και **Microsoft.Web/sites/extensions** είναι και τα δύο θυγατρικό πόρους από το **Microsoft.Web/sites**.

Το παρακάτω παράδειγμα εμφανίζει μια SQL server και βάση δεδομένων SQL. Παρατηρήστε ότι έχει οριστεί μια ρητή εξάρτηση μεταξύ της βάσης δεδομένων SQL και SQL server, ακόμα και αν η βάση δεδομένων είναι ένα θυγατρικό του διακομιστή.

    "resources": [
      {
        "name": "[variables('sqlserverName')]",
        "type": "Microsoft.Sql/servers",
        "location": "[resourceGroup().location]",
        "tags": {
          "displayName": "SqlServer"
        },
        "apiVersion": "2014-04-01-preview",
        "properties": {
          "administratorLogin": "[parameters('administratorLogin')]",
          "administratorLoginPassword": "[parameters('administratorLoginPassword')]"
        },
        "resources": [
          {
            "name": "[parameters('databaseName')]",
            "type": "databases",
            "location": "[resourceGroup().location]",
            "tags": {
              "displayName": "Database"
            },
            "apiVersion": "2014-04-01-preview",
            "dependsOn": [
              "[variables('sqlserverName')]"
            ],
            "properties": {
              "edition": "[parameters('edition')]",
              "collation": "[parameters('collation')]",
              "maxSizeBytes": "[parameters('maxSizeBytes')]",
              "requestedServiceObjectiveName": "[parameters('requestedServiceObjectiveName')]"
            }
          }
        ]
      }
    ]


## <a name="reference-function"></a>Αναφορά συνάρτησης

Η [συνάρτηση αναφοράς](resource-group-template-functions.md#reference) επιτρέπει μια παράσταση για τη δημιουργία της τιμής από το όνομα της άλλης JSON και ζεύγη τιμών ή χρόνου εκτέλεσης πόρους. Αναφορά παραστάσεων σιωπηρά δηλώνουν ότι ένας πόρος εξαρτάται από το άλλο. 

    reference('resourceName').propertyPath

Μπορείτε να χρησιμοποιήσετε αυτό το στοιχείο ή το στοιχείο dependsOn για να καθορίσετε εξαρτήσεις, αλλά δεν χρειάζεται να χρησιμοποιήσετε τόσο για τον ίδιο πόρο εξαρτώμενα. Όποτε είναι δυνατό, χρησιμοποιήστε μια μη ρητή αναφορά για να αποφύγετε την προσθήκη κατά λάθος μια εξάρτηση δεν είναι απαραίτητες.

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [συνάρτηση αναφοράς](resource-group-template-functions.md#reference).

## <a name="next-steps"></a>Επόμενα βήματα

- Για να μάθετε περισσότερα σχετικά με τη δημιουργία προτύπων για τη διαχείριση πόρων Azure, ανατρέξτε στο θέμα [πρότυπα σύνταξη από κοινού](resource-group-authoring-templates.md). 
- Για μια λίστα με τις διαθέσιμες συναρτήσεις σε ένα πρότυπο, ανατρέξτε στο θέμα [συναρτήσεις πρότυπο](resource-group-template-functions.md).

