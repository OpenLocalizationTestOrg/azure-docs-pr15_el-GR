<properties
    pageTitle="Επισκόπηση των αρχείων καταγραφής διαγνωστικών Azure | Microsoft Azure"
    description="Μάθετε τι είναι τα αρχεία καταγραφής διαγνωστικών Azure και πώς μπορείτε να τα χρησιμοποιήσετε για να κατανοήσετε γεγονότα μέσα σε έναν πόρο Azure."
    authors="johnkemnetz"
    manager="rboucher"
    editor=""
    services="monitoring-and-diagnostics"
    documentationCenter="monitoring-and-diagnostics"/>

<tags
    ms.service="monitoring-and-diagnostics"
    ms.workload="na"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="10/12/2016"
    ms.author="johnkem; magoedte"/>

# <a name="overview-of-azure-diagnostic-logs"></a>Επισκόπηση των αρχείων καταγραφής διαγνωστικών Azure
**Αρχεία καταγραφής διαγνωστικών Azure** είναι αρχεία καταγραφής από εκπέμπει έναν πόρο που παρέχουν εμπλουτισμένη, συχνές δεδομένα σχετικά με τη λειτουργία αυτού του πόρου. Το περιεχόμενο αυτών των αρχείων καταγραφής διαφέρει ανάλογα με τον τύπο πόρου (για παράδειγμα, αρχεία καταγραφής συστήματος συμβάντων των Windows είναι μια κατηγορία αρχείο καταγραφής διαγνωστικών για ΣΠΣ και αντικειμένων blob, πίνακα, και τα αρχεία καταγραφής ουρά είναι κατηγορίες αρχεία καταγραφής διαγνωστικών για λογαριασμούς του χώρου αποθήκευσης) και διαφέρουν από το [αρχείο καταγραφής δραστηριοτήτων (παλαιότερα γνωστό ως αρχείο καταγραφής ελέγχου ή αρχείο καταγραφής λειτουργίας)](monitoring-overview-activity-logs.md), που παρέχει πληροφορίες για τις εργασίες που έχουν πραγματοποιηθεί σε πόρους στη συνδρομή σας. Δεν όλους τους πόρους υποστηρίζει τον νέο τύπο των αρχείων καταγραφής διαγνωστικών που περιγράφονται εδώ. Στη λίστα των υπηρεσιών που υποστηρίζονται παρακάτω δείχνει ποιοι τύποι πόρων υποστηρίζει νέα αρχεία καταγραφής διαγνωστικών.

![Λογική θέση των αρχείων καταγραφής διαγνωστικών](./media/monitoring-overview-of-diagnostic-logs/logical-placement-chart.png)

## <a name="what-you-can-do-with-diagnostic-logs"></a>Τι μπορείτε να κάνετε με τα αρχεία καταγραφής διαγνωστικών
Ακολουθούν ορισμένες από τις ενέργειες που μπορείτε να κάνετε με αρχεία καταγραφής διαγνωστικών:

- Αποθηκεύστε τις σε ένα **Λογαριασμό του χώρου αποθήκευσης** για επιθεώρηση ελέγχου ή μη αυτόματη. Μπορείτε να καθορίσετε το χρόνο διατήρησης (σε ημέρες) χρησιμοποιώντας τις **Ρυθμίσεις διαγνωστικών**.
- [Ροή να **Διανομείς συμβάντων** ](monitoring-stream-diagnostic-logs-to-event-hubs.md) για κατάποση από μια υπηρεσία άλλου κατασκευαστή ή μια λύση προσαρμοσμένης αναλυτικών στοιχείων όπως PowerBI.
- Ανάλυση τους με [OMS καταγραφής ανάλυσης](../log-analytics/log-analytics-azure-storage-json.md)

## <a name="diagnostic-settings"></a>Ρυθμίσεις διαγνωστικών
Αρχεία καταγραφής διαγνωστικών για τους πόρους μη υπολογισμού ρυθμίζονται χρησιμοποιώντας τις ρυθμίσεις διαγνωστικών. **Διαγνωστικών ρυθμίσεων** για ένα στοιχείο ελέγχου πόρων:

- Όπου αποστέλλονται τα αρχεία καταγραφής διαγνωστικών (λογαριασμού χώρου αποθήκευσης, διανομείς συμβάν ή/και ανάλυση καταγραφής OMS).
- Ποιες κατηγορίες καταγραφής αποστέλλονται.
- Πόσο χρόνο πρέπει να διατηρηθούν κάθε κατηγορία καταγραφής σε λογαριασμό χώρου αποθήκευσης – ένα διατήρηση του μηδέν ημέρες σημαίνει ότι θα τηρούνται αρχεία καταγραφής για πάντα. Διαφορετικά, αυτή η τιμή μπορεί να κυμαίνεται από 1 έως 2147483647. Εάν έχουν οριστεί πολιτικές διατήρησης, αλλά την αποθήκευση αρχείων καταγραφής σε ένα λογαριασμό του χώρου αποθήκευσης είναι απενεργοποιημένη (για παράδειγμα εάν μόνο διανομείς συμβάν ή OMS επιλογές είναι επιλεγμένο το στοιχείο), οι πολιτικές διατήρησης δεν έχουν καμία επίδραση.

Αυτές οι ρυθμίσεις ρυθμίζονται εύκολα μέσω του blade Διαγνωστικά για έναν πόρο στην πύλη του Azure, μέσω του Azure PowerShell και CLI εντολές ή μέσω του [Azure οθόνη REST API](https://msdn.microsoft.com/library/azure/dn931943.aspx).

> [AZURE.WARNING] Αρχεία καταγραφής διαγνωστικών και μετρήσεις για τους πόρους υπολογισμού (για παράδειγμα, ΣΠΣ ή υπηρεσία ύφασμα) Χρησιμοποιήστε [ένα ξεχωριστό μηχανισμό για ρύθμιση παραμέτρων και την επιλογή των εξόδους](../azure-diagnostics.md).

## <a name="how-to-enable-collection-of-diagnostic-logs"></a>Πώς μπορείτε να ενεργοποιήσετε τη συλλογή των αρχείων καταγραφής διαγνωστικών
Συλλογή των αρχείων καταγραφής διαγνωστικών μπορούν να ενεργοποιηθούν ως μέρος της δημιουργίας ενός πόρου ή μετά τη δημιουργία ενός πόρου μέσω του πόρου blade στην πύλη. Μπορείτε επίσης να ενεργοποιήσετε αρχεία καταγραφής διαγνωστικών σε οποιοδήποτε σημείο χρησιμοποιώντας εντολές του PowerShell Azure ή CLI ή τη χρήση του Azure οθόνη REST API.

> [AZURE.TIP] Αυτές οι οδηγίες δεν εφαρμόζονται απευθείας σε κάθε πόρο. Ανατρέξτε στις συνδέσεις σχήματος στο κάτω μέρος αυτής της σελίδας για να κατανοήσετε ειδικά βήματα που ενδέχεται να ισχύουν για συγκεκριμένους τύπους πόρων.

[Σε αυτό το άρθρο σάς δείχνει πώς μπορείτε να χρησιμοποιήσετε ένα πρότυπο πόρων για να ενεργοποιήσετε διαγνωστικών ρυθμίσεις κατά τη δημιουργία ενός πόρου](./monitoring-enable-diagnostic-logs-using-template.md)

### <a name="enable-diagnostic-logs-in-the-portal"></a>Ενεργοποίηση αρχείων καταγραφής διαγνωστικών στην πύλη
Μπορείτε να ενεργοποιήσετε αρχεία καταγραφής διαγνωστικών στην πύλη του Azure όταν δημιουργείτε τύπους πόρων υπολογισμού, ενεργοποιώντας την επέκταση Windows ή Linux Azure διαγνωστικών:

1.  Μεταβείτε στη **Δημιουργία** και επιλέξτε τον πόρο που σας ενδιαφέρει.
2.  Μετά τη ρύθμιση των παραμέτρων τις βασικές ρυθμίσεις και επιλέγοντας ένα μέγεθος, στην την blade **Ρυθμίσεις** , στην περιοχή **Παρακολούθηση**, επιλέξτε **Ενεργοποίηση** και επιλέξτε ένα λογαριασμό χώρο αποθήκευσης στο σημείο όπου θέλετε να αποθηκεύσετε αρχεία καταγραφής διαγνωστικών. Που θα χρεωθείτε κανονική δεδομένων χρεώσεων για το χώρο αποθήκευσης και συναλλαγές όταν στέλνετε Διαγνωστικά σε ένα λογαριασμό του χώρου αποθήκευσης.

    ![Ενεργοποίηση αρχείων καταγραφής διαγνωστικών κατά τη δημιουργία πόρων](./media/monitoring-overview-of-diagnostic-logs/enable-portal-new.png)
3.  Κάντε κλικ στο κουμπί **OK** και να δημιουργήσετε τον πόρο.

Για τους πόρους μη υπολογισμού, μπορείτε να ενεργοποιήσετε αρχεία καταγραφής διαγνωστικών στην πύλη του Azure μετά τη δημιουργία ενός πόρου, κάνοντας τα εξής:

1.  Μεταβείτε στο το blade για τον πόρο και ανοίξτε το blade **Διαγνωστικά** .
2.  Κάντε κλικ **στο** και επιλέξτε ένα λογαριασμό χώρου αποθήκευσης ή/και το συμβάν διανομέα.

    ![Ενεργοποίηση αρχείων καταγραφής διαγνωστικών μετά τη δημιουργία του πόρου](./media/monitoring-overview-of-diagnostic-logs/enable-portal-existing.png)
3.  Στην περιοχή **αρχεία καταγραφής**, επιλέξτε ποιες **Κατηγορίες καταγραφής** που θέλετε να συλλέξετε ή ροή.
4.  Κάντε κλικ στην επιλογή **Αποθήκευση**.

### <a name="enable-diagnostic-logs-via-powershell"></a>Ενεργοποίηση αρχείων καταγραφής διαγνωστικών μέσω του PowerShell
Για να ενεργοποιήσετε αρχεία καταγραφής διαγνωστικών μέσω τα cmdlet του PowerShell Azure, χρησιμοποιήστε τις παρακάτω εντολές.

Για να ενεργοποιήσετε την αποθήκευση των αρχείων καταγραφής διαγνωστικών σε ένα λογαριασμό του χώρου αποθήκευσης, χρησιμοποιήστε αυτή την εντολή:

    Set-AzureRmDiagnosticSetting -ResourceId [your resource id] -StorageAccountId [your storage account id] -Enabled $true

Το Αναγνωριστικό λογαριασμού χώρου αποθήκευσης είναι το αναγνωριστικό πόρου για το λογαριασμό χώρου αποθήκευσης στο οποίο θέλετε να στείλετε τα αρχεία καταγραφής.

Για να ενεργοποιηθεί η ροή των αρχείων καταγραφής διαγνωστικών σε ένα συμβάν διανομέα, χρησιμοποιήστε αυτή την εντολή:

    Set-AzureRmDiagnosticSetting -ResourceId [your resource id] -ServiceBusRuleId [your service bus rule id] -Enabled $true

Το Αναγνωριστικό υπηρεσίας Bus κανόνας είναι μια συμβολοσειρά με αυτήν τη μορφή: `{service bus resource ID}/authorizationrules/{key name}`.

Για να ενεργοποιήσετε την αποστολή αρχείων καταγραφής διαγνωστικών σε χώρο εργασίας του αρχείου καταγραφής ανάλυσης, χρησιμοποιήστε αυτή την εντολή:

    Set-AzureRmDiagnosticSetting -ResourceId [your resource id] -WorkspaceId [log analytics workspace id] -Enabled $true

> [AZURE.NOTE] Η παράμετρος WorkspaceId δεν είναι διαθέσιμες στην έκδοση Οκτωβρίου. Αυτό θα γίνουν διαθέσιμες στην έκδοση Νοεμβρίου.

Μπορείτε να αποκτήσετε το Αναγνωριστικό καταγραφής ανάλυσης χώρου εργασίας στην πύλη του Azure.

Μπορείτε να συνδυάσετε αυτές τις παραμέτρους για να ενεργοποιήσετε πολλές επιλογές εξόδου.

### <a name="enable-diagnostic-logs-via-cli"></a>Ενεργοποίηση αρχείων καταγραφής διαγνωστικών μέσω CLI
Για να ενεργοποιήσετε αρχεία καταγραφής διαγνωστικών μέσω του Azure CLI, χρησιμοποιήστε τις παρακάτω εντολές:

Για να ενεργοποιήσετε την αποθήκευση των αρχείων καταγραφής διαγνωστικών σε ένα λογαριασμό του χώρου αποθήκευσης, χρησιμοποιήστε αυτή την εντολή:

    azure insights diagnostic set --resourceId <resourceId> --storageId <storageAccountId> --enabled true

Το Αναγνωριστικό λογαριασμού χώρου αποθήκευσης είναι το αναγνωριστικό πόρου για το λογαριασμό χώρου αποθήκευσης στο οποίο θέλετε να στείλετε τα αρχεία καταγραφής.

Για να ενεργοποιηθεί η ροή των αρχείων καταγραφής διαγνωστικών σε ένα συμβάν διανομέα, χρησιμοποιήστε αυτή την εντολή:

    azure insights diagnostic set --resourceId <resourceId> --serviceBusRuleId <serviceBusRuleId> --enabled true

Το Αναγνωριστικό υπηρεσίας Bus κανόνας είναι μια συμβολοσειρά με αυτήν τη μορφή: `{service bus resource ID}/authorizationrules/{key name}`.

Για να ενεργοποιήσετε την αποστολή αρχείων καταγραφής διαγνωστικών σε χώρο εργασίας του αρχείου καταγραφής ανάλυσης, χρησιμοποιήστε αυτή την εντολή:

    azure insights diagnostic set --resourceId <resourceId> --workspaceId <workspaceId> --enabled true

> [AZURE.NOTE] Η παράμετρος workspaceId δεν είναι διαθέσιμες στην έκδοση Οκτωβρίου. Αυτό θα γίνουν διαθέσιμες στην έκδοση Νοεμβρίου.

Μπορείτε να αποκτήσετε το Αναγνωριστικό καταγραφής ανάλυσης χώρου εργασίας στην πύλη του Azure.

Μπορείτε να συνδυάσετε αυτές τις παραμέτρους για να ενεργοποιήσετε πολλές επιλογές εξόδου.

### <a name="enable-diagnostic-logs-via-rest-api"></a>Ενεργοποίηση αρχείων καταγραφής διαγνωστικών μέσω REST API
Για να αλλάξετε διαγνωστικών ρυθμίσεις χρησιμοποιώντας το Azure οθόνη REST API, ανατρέξτε στο θέμα [αυτού του εγγράφου](https://msdn.microsoft.com/library/azure/dn931931.aspx).

## <a name="manage-diagnostic-settings-in-the-portal"></a>Διαχείριση ρυθμίσεων διαγνωστικών στην πύλη

Προκειμένου να εξασφαλίσετε ότι όλους τους πόρους σας έχουν ρυθμιστεί σωστά με διαγνωστικών ρυθμίσεων, μπορείτε να μεταβείτε το blade **παρακολούθησης** στην πύλη και να ανοίξετε τα **Αρχεία καταγραφής διαγνωστικών** blade.

![Διαγνωστικών blade αρχείων καταγραφής στην πύλη](./media/monitoring-overview-of-diagnostic-logs/manage-portal-nav.png)

Ίσως χρειαστεί να κάντε κλικ στην επιλογή "Περισσότερες υπηρεσίες" για να βρείτε το blade παρακολούθησης.

Σε αυτό το blade, μπορείτε να προβάλετε και να φιλτράρετε όλους τους πόρους που υποστηρίζει αρχεία καταγραφής διαγνωστικών για να δείτε αν έχει Διαγνωστικά με δυνατότητα και ποιο λογαριασμό χώρου αποθήκευσης, διανομέα συμβάντος, ή/και ανάλυση καταγραφής χώρου εργασίας αυτά τα αρχεία καταγραφής ρέει προς.

![Αποτελέσματα blade αρχεία καταγραφής διαγνωστικών στην πύλη](./media/monitoring-overview-of-diagnostic-logs/manage-portal-blade.png)

Κάνοντας κλικ σε έναν πόρο θα εμφανίζονται όλα τα αρχεία καταγραφής που έχουν αποθηκευτεί στο λογαριασμό χώρου αποθήκευσης και παρέχει την επιλογή για να απενεργοποιήσετε ή να τροποποιήσετε τις ρυθμίσεις διαγνωστικών. Κάντε κλικ στο εικονίδιο λήψης για να κάνετε λήψη αρχείων καταγραφής για μια συγκεκριμένη χρονική περίοδο.

![Διαγνωστικών έναν πόρο blade αρχείων καταγραφής](./media/monitoring-overview-of-diagnostic-logs/manage-portal-logs.png)

> [AZURE.NOTE] Αρχεία καταγραφής διαγνωστικών μόνο θα εμφανίζονται σε αυτήν την προβολή και θα είναι διαθέσιμο για λήψη, εάν έχετε ρυθμίσει τις παραμέτρους διαγνωστικών ρυθμίσεων για να αποθηκεύσετε σε ένα λογαριασμό του χώρου αποθήκευσης.

Κάνοντας κλικ στη σύνδεση για τις **Ρυθμίσεις διαγνωστικών** θα εμφανιστεί το blade διαγνωστικών ρυθμίσεων, όπου μπορείτε να ενεργοποιήσετε, να απενεργοποιήσετε ή να τροποποιήσετε τις ρυθμίσεις σας διαγνωστικών για τον επιλεγμένο πόρο.

## <a name="supported-services-and-schema-for-diagnostic-logs"></a>Υποστηριζόμενες υπηρεσίες και διάταξη για τα αρχεία καταγραφής διαγνωστικών
Το σχήμα για αρχεία καταγραφής διαγνωστικών διαφέρει ανάλογα με την κατηγορία πόρων και καταγραφής. Ακολουθούν τις υποστηριζόμενες υπηρεσίες και τους σχήματος.

| Υπηρεσία                       | Σχήμα και έγγραφα                                                                                                   |
|-------------------------------|-----------------------------------------------------------------------------------------------------------------|
|    Λογισμικό εξισορρόπηση φόρτου     |    [Αρχείο καταγραφής ανάλυσης για Azure εξισορρόπηση φόρτου (έκδοση Preview)](../load-balancer/load-balancer-monitor-log.md)             |
|    Ομάδες ασφαλείας δικτύου    |    [Ανάλυση καταγραφής για τις ομάδες ασφαλείας δικτύου (NSGs)](../virtual-network/virtual-network-nsg-manage-log.md)     |
|    Εφαρμογή πυλών       |    [Καταγραφή διαγνωστικών πύλη εφαρμογής](../application-gateway/application-gateway-diagnostics.md)     |
|    Πλήκτρο θάλαμο                  |    [Καταγραφή Azure θάλαμο κλειδιού](../key-vault/key-vault-logging.md)                                                 |
|    Azure αναζήτησης               |    [Ενεργοποίηση και χρήση της αναζήτησης κίνηση ανάλυσης](../search/search-traffic-analytics.md)                         |
|    Χώρος αποθήκευσης δεδομένων λίμνης            |    [Πρόσβαση σε αρχεία καταγραφής διαγνωστικών για το χώρο αποθήκευσης λίμνης δεδομένων Azure](../data-lake-store/data-lake-store-diagnostic-logs.md) |
|    Ανάλυση δεδομένων λίμνης        |    [Πρόσβαση σε αρχεία καταγραφής διαγνωστικών για ανάλυση λίμνης δεδομένων Azure](../data-lake-analytics/data-lake-analytics-diagnostic-logs.md) |
|    Λογική εφαρμογών                 |    Δεν υπάρχει διαθέσιμη σχήμα.                                                                                         |
|    Azure δέσμης                |    [Καταγραφή διαγνωστικών Azure δέσμης](../batch/batch-diagnostics.md)                                              |
|    Αυτοματοποίηση Azure           |    [Αρχείο καταγραφής ανάλυσης για την αυτοματοποίηση Azure](../automation/automation-manage-send-joblogs-log-analytics.md)          |
|    Ο διανομέας συμβάντος                  |    Δεν υπάρχει διαθέσιμη σχήμα.                                                                                         |
|    Υπηρεσία Bus                |    Δεν υπάρχει διαθέσιμη σχήμα.                                                                                         |
|    Ροή ανάλυσης           |    Δεν υπάρχει διαθέσιμη σχήμα.                                                                                         |

## <a name="supported-log-categories-per-resource-type"></a>Υποστηρίζονται κατηγορίες καταγραφής ανά τύπο πόρου

|Τύπος πόρου|Κατηγορία|Εμφανιζόμενο όνομα κατηγορίας|
|---|---|---|
|Microsoft.Automation/automationAccounts|JobLogs|Αρχεία καταγραφής από την εργασία|
|Microsoft.Automation/automationAccounts|JobStreams|Ροές εργασίας|
|Microsoft.Batch/batchAccounts|ServiceLog|Αρχεία καταγραφής από την υπηρεσία|
|Microsoft.DataLakeAnalytics/accounts|Ελέγχου|Αρχεία καταγραφής ελέγχου|
|Microsoft.DataLakeAnalytics/accounts|Προσκλήσεις|Πρόσκληση σε αρχεία καταγραφής|
|Microsoft.DataLakeStore/accounts|Ελέγχου|Αρχεία καταγραφής ελέγχου|
|Microsoft.DataLakeStore/accounts|Προσκλήσεις|Πρόσκληση σε αρχεία καταγραφής|
|Microsoft.EventHub/namespaces|ArchiveLogs|Αρχειοθέτηση αρχείων καταγραφής|
|Microsoft.EventHub/namespaces|OperationalLogs|Λειτουργικές αρχείων καταγραφής|
|Microsoft.KeyVault/vaults|AuditEvent|Αρχεία καταγραφής ελέγχου|
|Microsoft.Logic/workflows|WorkflowRuntime|Συμβάντα διαγνωστικών χρόνου εκτέλεσης ροής εργασίας|
|Microsoft.Network/networksecuritygroups|NetworkSecurityGroupEvent|Ομάδα ασφαλείας δικτύου συμβάντος|
|Microsoft.Network/networksecuritygroups|NetworkSecurityGroupRuleCounter|Ομάδα ασφαλείας δικτύου μετρητή κανόνα|
|Microsoft.Network/networksecuritygroups|NetworkSecurityGroupFlowEvent|Ομάδα ασφαλείας δικτύου κανόνα ροής συμβάντος|
|Microsoft.Network/loadBalancers|LoadBalancerAlertEvent|Φόρτωση εξισορρόπησης ειδοποίησης συμβάντων|
|Microsoft.Network/loadBalancers|LoadBalancerProbeHealthStatus|Κατάσταση εύρυθμης λειτουργίας της δοκιμή του εξισορρόπησης φόρτου|
|Microsoft.Network/applicationGateways|ApplicationGatewayAccessLog|Αρχείο καταγραφής πρόσβασης πύλης εφαρμογής|
|Microsoft.Network/applicationGateways|ApplicationGatewayPerformanceLog|Αρχείο καταγραφής επιδόσεων πύλης εφαρμογής|
|Microsoft.Network/applicationGateways|ApplicationGatewayFirewallLog|Αρχείο καταγραφής τείχους προστασίας πύλης εφαρμογής|
|Microsoft.Search/searchServices|OperationLogs|Αρχεία καταγραφής λειτουργίας|
|Microsoft.ServerManagement/nodes|RequestLogs|Πρόσκληση σε αρχεία καταγραφής|
|Microsoft.ServiceBus/namespaces|OperationalLogs|Λειτουργικές αρχείων καταγραφής|
|Microsoft.StreamAnalytics/streamingjobs|Εκτέλεση|Εκτέλεση|
|Microsoft.StreamAnalytics/streamingjobs|Σύνταξη από κοινού|Σύνταξη από κοινού|

## <a name="next-steps"></a>Επόμενα βήματα
- [Ροή αρχεία καταγραφής διαγνωστικών με **διανομείς συμβάντος**](monitoring-stream-diagnostic-logs-to-event-hubs.md)
- [Αλλαγή διαγνωστικών ρυθμίσεις χρησιμοποιώντας το Azure οθόνη REST API](https://msdn.microsoft.com/library/azure/dn931931.aspx)
- [Ανάλυση των αρχείων καταγραφής με OMS καταγραφής ανάλυσης](../log-analytics/log-analytics-azure-storage-json.md)
