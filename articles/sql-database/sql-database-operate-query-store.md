<properties
   pageTitle="Λειτουργικό χώρου αποθήκευσης ερωτήματος στη βάση δεδομένων SQL Azure"
   description="Μάθετε πώς να χρησιμοποιείτε το χώρο αποθήκευσης του ερωτήματος σε βάση δεδομένων SQL Azure"
   keywords=""
   services="sql-database"
   documentationCenter=""
   authors="CarlRabeler"
   manager="jhubbard"
   editor=""/>

<tags
   ms.service="sql-database"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="sqldb-performance"
   ms.workload="data-management"
   ms.date="08/16/2016"
   ms.author="carlrab"/>

# <a name="operating-the-query-store-in-azure-sql-database"></a>Λειτουργικό το χώρο αποθήκευσης του ερωτήματος σε βάση δεδομένων SQL Azure 

Χώρος αποθήκευσης ερωτήματος στο Azure είναι μια δυνατότητα πλήρως διαχειριζόμενων βάσης δεδομένων που συνεχώς συλλέγει και παρουσιάζει λεπτομερείς πληροφορίες ιστορικού σχετικά με όλα τα ερωτήματα. Μπορείτε να θεωρήσετε σχετικά με το χώρο αποθήκευσης ερωτήματος ως παρόμοια με την καταγραφή δεδομένων πτήσεων του αεροπλάνο που σημαντικά απλοποιεί την αντιμετώπιση προβλημάτων και τα δύο για το σύννεφο επιδόσεις ερωτημάτων και εσωτερικής πελάτες. Σε αυτό το άρθρο εξηγεί συγκεκριμένες πτυχές της λειτουργίας ερωτήματος Store στο Azure. Χρησιμοποιώντας αυτά τα δεδομένα που έχουν προ-συλλεχθεί ερωτήματος, μπορείτε γρήγορα διάγνωση και επίλυση προβλημάτων επιδόσεων και, επομένως, αφιερώνετε περισσότερο χρόνο, εστιάζοντας στα επιχείρησή τους. 

Ερώτημα χώρου αποθήκευσης είναι [καθολικά διαθέσιμη](https://azure.microsoft.com/updates/general-availability-azure-sql-database-query-store/) σε βάση δεδομένων SQL Azure από Νοεμβρίου 2015. Χώρος αποθήκευσης ερωτήματος είναι το ίδρυμα για ανάλυση απόδοσης και της ρύθμισης δυνατότητες, όπως [Σύμβουλος βάσης δεδομένων SQL και επιδόσεων πίνακα εργαλείων](https://azure.microsoft.com/updates/sqldatabaseadvisorga/). Κατά τη στιγμή της δημοσίευσης σε αυτό το άρθρο, Store ερώτημα εκτελείται σε περισσότερες από 200.000 βάσεων δεδομένων χρήστη στο Azure, τη συλλογή πληροφοριών που σχετίζονται με το ερώτημα για πολλούς μήνες, χωρίς διακοπή.

> [AZURE.IMPORTANT] Η Microsoft είναι σε διαδικασία Ενεργοποίηση αποθήκευσης ερωτήματος για όλες βάσεις δεδομένων Azure SQL (υπάρχοντα και νέα). 

## <a name="optimal-query-store-configuration"></a>Ρύθμιση παραμέτρων βέλτιστη χώρου αποθήκευσης ερωτήματος

Αυτή η ενότητα περιγράφει βέλτιστη ρύθμιση παραμέτρων προεπιλογών που έχουν σχεδιαστεί για να εξασφαλίσετε αξιόπιστη λειτουργία του χώρου αποθήκευσης ερωτήματος και εξαρτώμενα δυνατότητες, όπως [Σύμβουλος βάσης δεδομένων SQL και επιδόσεων πίνακα εργαλείων](https://azure.microsoft.com/updates/sqldatabaseadvisorga/). Προεπιλεγμένη ρύθμιση παραμέτρων είναι βελτιστοποιημένη για τη συλλογή συνεχή δεδομένα, που είναι ελάχιστους χρόνος που αναλώθηκε σε κατάσταση ΑΠΕΝΕΡΓΟΠΟΊΗΣΗΣ/READ_ONLY.

| Ρύθμιση παραμέτρων | Περιγραφή | Προεπιλεγμένη | Σχόλιο |
| ------------- | ----------- | ------- | ------- |
| MAX_STORAGE_SIZE_MB | Καθορίζει το όριο για το χώρο δεδομένων που μπορεί να διαρκέσει Store ερωτήματος μέσα σε βάση δεδομένων πελατών από το ω | 100 | Επιβάλλονται για νέες βάσεις δεδομένων |
| INTERVAL_LENGTH_MINUTES | Καθορίζει το μέγεθος του παραθύρου ώρα κατά τις οποίες είναι ενοποιούνται στατιστικά στοιχεία που έχουν συλλεχθεί χρόνου εκτέλεσης για τα προγράμματα του ερωτήματος και να διατηρηθεί. Κάθε πρόγραμμα ενεργό ερώτημα έχει τουλάχιστον μία γραμμή για ένα χρονικό διάστημα που έχουν οριστεί με αυτήν τη ρύθμιση παραμέτρων | 60   | Επιβάλλονται για νέες βάσεις δεδομένων |
| STALE_QUERY_THRESHOLD_DAYS | Πολιτική εκκαθάριση βάσει χρόνου που ελέγχει η περίοδος διατήρησης στατιστικών μόνιμων χρόνου εκτέλεσης και Ανενεργά ερωτήματα | 30 | Επιβάλλονται για νέες βάσεις δεδομένων και των βάσεων δεδομένων με το προηγούμενο προεπιλεγμένη (367) |
| SIZE_BASED_CLEANUP_MODE | Καθορίζει εάν Εκκαθάριση αυτόματης δεδομένων θα πραγματοποιείται όταν το μέγεθος του χώρου αποθήκευσης ερωτήματος δεδομένων πλησιάζει το όριο | ΑΥΤΌΜΑΤΗ | Επιβάλλονται για όλες τις βάσεις δεδομένων |
| QUERY_CAPTURE_MODE | Καθορίζει εάν παρακολουθούνται όλα τα ερωτήματα ή μόνο ένα υποσύνολο των ερωτημάτων | ΑΥΤΌΜΑΤΗ | Επιβάλλονται για όλες τις βάσεις δεδομένων |
| FLUSH_INTERVAL_SECONDS | Καθορίζει το μέγιστο περίοδο κατά την οποία καταγράφονται χρόνου εκτέλεσης στατιστικά στοιχεία διατηρούνται στη μνήμη, πριν από την καταγραφή στο δίσκο | 900 | Επιβάλλονται για νέες βάσεις δεδομένων |
||||||

> [AZURE.IMPORTANT] Αυτές τις προεπιλογές εφαρμόζονται αυτόματα με το τελικό στάδιο του Ενεργοποίηση αποθήκευσης ερωτήματος σε όλες τις βάσεις δεδομένων Azure SQL (δείτε προηγείται σημαντική σημείωση). Μετά από αυτήν την ένδειξη προς τα επάνω, βάση δεδομένων SQL Azure δεν θα αλλαγή τιμές παραμέτρων που έχουν οριστεί από τους πελάτες, εκτός εάν αυτές επηρεάσουν αρνητικά αξιόπιστη λειτουργίες του χώρου αποθήκευσης ερωτήματος ή κύρια φόρτο εργασίας.

Εάν θέλετε να παραμείνει με τις προσαρμοσμένες ρυθμίσεις σας, χρησιμοποιήστε [ΤΡΟΠΟΠΟΊΗΣΗ βάσης ΔΕΔΟΜΈΝΩΝ με τις επιλογές αποθήκευσης ερωτήματος](https://msdn.microsoft.com/library/bb522682.aspx) για να επιστρέψετε ρύθμισης παραμέτρων στην προηγούμενη κατάσταση. Ανατρέξτε στο θέμα [Βέλτιστες πρακτικές με το χώρο αποθήκευσης ερωτήματος](https://msdn.microsoft.com/library/mt604821.aspx) για να μάθετε πώς αρχή επιλέξατε βέλτιστη ρύθμιση παραμέτρων.

## <a name="next-steps"></a>Επόμενα βήματα

[Πληροφορίες για επιδόσεων βάσης δεδομένων SQL](sql-database-performance.md)

## <a name="additional-resources"></a>Πρόσθετοι πόροι

Για περισσότερες πληροφορίες ανατρέξτε στο θέμα στα ακόλουθα άρθρα:

- [Μια καταγραφή δεδομένα πτήσεων για τη βάση δεδομένων](https://azure.microsoft.com/blog/query-store-a-flight-data-recorder-for-your-database) 

- [Παρακολούθηση των επιδόσεων με τη χρήση του χώρου αποθήκευσης ερωτήματος](https://msdn.microsoft.com/library/dn817826.aspx)

- [Σενάρια χρήσης χώρου αποθήκευσης ερωτήματος](https://msdn.microsoft.com/library/mt614796.aspx)

- [Παρακολούθηση των επιδόσεων με τη χρήση του χώρου αποθήκευσης ερωτήματος](https://msdn.microsoft.com/library/dn817826.aspx) 
