<properties 
   pageTitle="Σχεδίαση λύσεων Cloud για αποκατάσταση χρησιμοποιώντας παν-αναπαραγωγή βάσης δεδομένων SQL | Microsoft Azure"
   description="Μάθετε πώς μπορείτε να σχεδιάσετε τη λύση σας cloud για αποκατάσταση, επιλέγοντας το μοτίβο δεξιά ανακατεύθυνσης."
   services="sql-database"
   documentationCenter="" 
   authors="anosov1960" 
   manager="jhubbard" 
   editor="monicar"/>

<tags
   ms.service="sql-database"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA" 
   ms.date="07/16/2016"
   ms.author="sashan"/>

# <a name="disaster-recovery-strategies-for-applications-using-sql-database-elastic-pool"></a>Στρατηγικές αποκατάστασης από καταστροφή για εφαρμογές που χρησιμοποιούν ελαστικότητας χώρου συγκέντρωσης βάσης δεδομένων SQL 

Διάρκεια των ετών που θα σας έχουν μάθατε ότι οι υπηρεσίες cloud δεν είναι ασφαλή και καταστροφική περιστατικά να και θα συμβεί. Βάση δεδομένων SQL παρέχει έναν αριθμό δυνατοτήτων για την παροχή η συνεχής λειτουργία της εφαρμογής σας όταν προκύπτουν αυτά τα συμβάντα. [Ελαστικά σύνολα](sql-database-elastic-pool.md) και μεμονωμένη βάσεις δεδομένων υποστηρίζουν το ίδιο είδος δυνατοτήτων αποκατάστασης από καταστροφή. Σε αυτό το άρθρο περιγράφει διάφορες στρατηγικές DR για ελαστικές συνόλων που αξιοποιήσετε αυτές τις δυνατότητες συνέχειας επαγγελματικής βάσης δεδομένων SQL.

Για τους σκοπούς της σε αυτό το άρθρο θα χρησιμοποιήσουμε το κανονικό μοτίβο εφαρμογή ISV ΑΔΑ:

<i>Μια σύγχρονη cloud βάσει web εφαρμογής διατάξεις μία βάση δεδομένων SQL για κάθε τελικού χρήστη. Οι ISV έχει πολλοί πελάτες και επομένως χρησιμοποιεί πολλές βάσεις δεδομένων, γνωστό ως βάσεις δεδομένων του μισθωτή. Επειδή οι βάσεις δεδομένων του μισθωτή συνήθως έχουν μοτίβα απρόσμενα δραστηριότητας, οι ISV χρησιμοποιεί ένα χώρο συγκέντρωσης ελαστικότητας για να κάνετε τη βάση δεδομένων κόστους πολύ προβλέψιμα πάνω από το εκτεταμένο χρονικά διαστήματα. Ο χώρος συγκέντρωσης ελαστικότητας απλοποιεί επίσης τη διαχείριση επιδόσεων όταν φθάσει τη δραστηριότητα χρήστη. Εκτός από τις βάσεις δεδομένων του μισθωτή η εφαρμογή χρησιμοποιεί επίσης πολλές βάσεις δεδομένων για τη Διαχείριση προφίλ χρηστών, ασφαλείας, συλλογή μοτίβα χρήσης κ.λπ. Διαθεσιμότητα τα μεμονωμένα μισθωτές δεν επηρεάζει τη διαθεσιμότητα της εφαρμογής ως σύνολο. Ωστόσο, τη διαθεσιμότητα και την απόδοση της διαχείρισης βάσεων δεδομένων είναι κρίσιμες για τη λειτουργία της εφαρμογής και αν είστε συνδεδεμένοι τις βάσεις δεδομένων διαχείρισης ολόκληρη την εφαρμογή είναι χωρίς σύνδεση.</i>  

Στο υπόλοιπο του χαρτιού αναλύονται τα DR στρατηγικές που καλύπτεται από μια ποικιλία σεναρίων από τις εφαρμογές διάκριση πεζών-κεφαλαίων εκκίνησης κόστος σε αυτές με τις απαιτήσεις αυστηρές διαθεσιμότητα.  

## <a name="scenario-1-cost-sensitive-startup"></a>Σενάριο 1. Κόστος εκκίνησης διάκριση πεζών-κεφαλαίων

<i>Είμαι μιας επιχείρησης εκκίνησης και είμαι πολύ κόστους διάκριση πεζών-κεφαλαίων.  Θέλω να απλοποιήσετε ανάπτυξης και διαχείρισης της εφαρμογής και είμαι πρόθυμοι να έχετε ένα περιορισμένο SLA για κάθε πελάτη. Αλλά θέλω να βεβαιωθείτε ότι η εφαρμογή όπως το συνολικό ποτέ είναι χωρίς σύνδεση.</i>

Για να ικανοποιήσετε την απαίτηση απλότητας, πρέπει να αναπτύξετε όλες τις βάσεις δεδομένων μισθωτή σε ένα χώρο συγκέντρωσης ελαστικότητας στην περιοχή Azure της επιλογής σας και να αναπτύξετε οι βάσεις δεδομένων διαχείρισης ως αυτόνομη αναπαραχθούν παν βάσεις δεδομένων. Για την αποκατάσταση της μισθωτές, χρησιμοποιήστε παν-επαναφορά, η οποία εμφανίζεται χωρίς πρόσθετο κόστος. Για να διασφαλίσετε τη διαθεσιμότητα των Διαχείριση βάσεων δεδομένων, θα πρέπει να αναπαραχθούν παν σε άλλη περιοχή (βήμα 1). Το κόστος σε εξέλιξη της ρύθμισης παραμέτρων αποκατάστασης από καταστροφή σε αυτό το σενάριο είναι ίσο με το συνολικό κόστος της οι δευτερεύοντα βάσεις δεδομένων. Αυτή η ρύθμιση παραμέτρων απεικονίζεται στο επόμενο διάγραμμα.

![Σχήμα 1](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-1.png)

Σε περίπτωση μια μη διαθεσιμότητα στην κύρια περιοχή, τα βήματα ανάκτησης για να μεταφέρετε την εφαρμογή σας online απεικονίζονται από το επόμενο διάγραμμα.

- Αμέσως ανακατεύθυνσης τη Διαχείριση βάσεων δεδομένων (2) στην περιοχή DR. 
- Αλλαγή τη συμβολοσειρά σύνδεσης της εφαρμογής ώστε να οδηγούν στην περιοχή DR. Στην περιοχή DR θα δημιουργηθούν όλους τους νέους λογαριασμούς και βάσεις δεδομένων του μισθωτή. Τους υπάρχοντες πελάτες θα δείτε τα δεδομένα που είναι προσωρινά μη διαθέσιμος.
- Δημιουργήστε το χώρο συγκέντρωσης ελαστικότητας με την ίδια ρύθμιση παραμέτρων με το αρχικό χώρο συγκέντρωσης (3). 
- Χρήση παν-επαναφοράς για τη δημιουργία αντιγράφων του μισθωτή βάσεων δεδομένων (4). Μπορείτε να εξετάστε το ενδεχόμενο να Ενεργοποίηση τα μεμονωμένα επαναφέρει από τις συνδέσεις του τελικού χρήστη ή να χρησιμοποιήσετε ορισμένα άλλα εφαρμογή συνδυασμού συγκεκριμένα προτεραιότητα.

Σε αυτό το σημείο την εφαρμογή σας είναι πάλι σε σύνδεση στην περιοχή DR, αλλά ορισμένες πελάτες θα είναι η εμπειρία καθυστέρηση κατά την πρόσβαση στα δεδομένα τους.

![Εικόνα 2](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-2.png)

Εάν το μη διαθεσιμότητα ήταν προσωρινά, είναι πιθανό ότι η κύρια περιοχή θα ανακτηθούν από Azure πριν από όλα τα επαναφέρει έχουν ολοκληρωθεί στη περιοχή DR. Σε αυτήν την περίπτωση, πρέπει να μπορείτε να οργανώσετε μετακινώντας την εφαρμογή της περιοχής στην κύρια. Η διαδικασία θα διαρκέσει τα βήματα που περιγράφονται στην επόμενη διάγραμμα.
 
- Ακύρωση όλων των αιτήσεων εξαιρετική παν-επαναφοράς.   
- Οι βάσεις δεδομένων διαχείρισης στην κύρια περιοχή (5) ανακατεύθυνσης. Σημείωση: Μετά την αποκατάσταση της περιοχής παλιά βασικών έχουν γίνεται αυτόματα secondaries. Τώρα αυτές θα μεταβείτε ξανά τους ρόλους. 
- Αλλαγή τη συμβολοσειρά σύνδεσης της εφαρμογής ώστε να οδηγεί στην κύρια περιοχή. Τώρα όλα τα νέα λογαριασμών και μισθωτή βάσεις δεδομένων θα δημιουργηθεί στην κύρια περιοχή. Ορισμένες υπάρχοντες πελάτες θα δείτε τα δεδομένα που είναι προσωρινά μη διαθέσιμος.   
- Ορίστε όλες τις βάσεις δεδομένων στο χώρο συγκέντρωσης DR μόνο για ανάγνωση για να βεβαιωθείτε ότι δεν είναι δυνατό να τροποποιηθούν στην περιοχή DR (6). 
- Για κάθε βάση δεδομένων στο χώρο συγκέντρωσης DR που έχει αλλάξει από την ανάκτηση, μετονομάστε ή διαγράψτε τις αντίστοιχες βάσεις δεδομένων στο χώρο συγκέντρωσης πρωτεύοντος (7). 
- Αντιγράψτε τις ενημερωμένες βάσεις δεδομένων από το χώρο συγκέντρωσης DR στο χώρο συγκέντρωσης πρωτεύοντος (8). 
- Διαγράψτε το χώρο συγκέντρωσης DR (9)

Σε αυτό το σημείο την εφαρμογή σας θα online στην κύρια περιοχή με όλα μισθωτή βάσεις δεδομένων είναι διαθέσιμος στο χώρο συγκέντρωσης πρωτεύοντος.

![Εικόνα 3](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-3.png)

Το πλήκτρο **επωφεληθείτε** από αυτήν τη στρατηγική είναι χαμηλή βρίσκεται σε εξέλιξη κόστος για πλεονασμού σειρά δεδομένων. Δημιουργία αντιγράφων ασφαλείας λαμβάνονται αυτόματα από την υπηρεσία βάσης δεδομένων SQL με χωρίς αναδιατύπωση εφαρμογής και χωρίς πρόσθετο κόστος.  Το κόστος είναι που προκύπτει μόνο όταν γίνεται επαναφορά των ελαστικότητας βάσεων δεδομένων. Το **συσχετισμό** είναι ότι την πλήρη ανάκτηση όλων των βάσεων δεδομένων μισθωτή θα χρειαστεί αρκετό χρόνο. Αυτό θα εξαρτώνται από το συνολικό αριθμό επαναφέρει θα πραγματοποιείτε στην περιοχή DR και συνολικό μέγεθος των βάσεων δεδομένων του μισθωτή. Ακόμα και αν ιεράρχηση των μισθωτές ορισμένες επαναφέρει επάνω από άλλα άτομα, θα ανταγωνιστικών με όλα τα άλλα επαναφέρει που έχουν ξεκινήσει στην ίδια περιοχή, όπως η υπηρεσία θα arbitrate και επιτάχυνσης για να ελαχιστοποιήσετε την συνολική επίδραση στις βάσεις δεδομένων τους υπάρχοντες πελάτες. Επιπλέον, την ανάκτηση των βάσεων δεδομένων μισθωτή δεν μπορεί να ξεκινήσει μέχρι να δημιουργηθεί το νέο σύνολο ελαστικότητας στην περιοχή DR.

## <a name="scenario-2-mature-application-with-tiered-service"></a>Σενάριο 2. Ώριμη εφαρμογής με την υπηρεσία ομότιμου 

<i>Είμαι μια εφαρμογή ώριμη ΑΔΑ με προσφορές ομότιμου υπηρεσίας και διαφορετικές SLA για τους πελάτες σας δοκιμαστικής έκδοσης και για την πληρωμή πελάτες. Για τη δοκιμαστική πελάτες, να έχετε για να μειώσετε το κόστος όσο είναι δυνατό. Δοκιμαστική πελάτες μπορεί να διαρκέσει χρόνου εκτός λειτουργίας, αλλά θέλω να μειώσετε την πιθανότητα. Για πελάτες που πληρώνουν, οποιαδήποτε χρόνου εκτός λειτουργίας είναι κινδύνου πτήσεων. Έτσι θέλω να βεβαιωθείτε ότι αυτό πληρωμής πελάτες είναι πάντα μπορούν να έχουν πρόσβαση στα δεδομένα τους.</i> 

Για να υποστηρίζει αυτό το σενάριο, θα πρέπει να διαχωρίσετε τη δοκιμαστική μισθωτές από επί πληρωμή μισθωτές με την τοποθέτησή τους σε ξεχωριστή ελαστικότητας χώρους συγκέντρωσης. Η δοκιμαστική πελάτες να έχουν κάτω eDTU ανά μισθωτή και κάτω SLA με περισσότερο χρόνο αποκατάστασης. Οι πελάτες που πληρώνουν θα ήταν σε ένα χώρο συγκέντρωσης με υψηλότερη eDTU ανά μισθωτή και μια υψηλότερη SLA. Για να εξασφαλίσετε την χαμηλότερη χρόνου ανάκτησης, βάσεις δεδομένων των πελατών πληρωμής μισθωτή πρέπει να αναπαραχθούν παν. Αυτή η ρύθμιση παραμέτρων απεικονίζεται στο επόμενο διάγραμμα. 

![Εικόνα 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-4.png)

Όπως στο πρώτο σενάριο, θα είναι αρκετά ενεργό οι βάσεις δεδομένων διαχείρισης, ώστε να μπορείτε να χρησιμοποιήσετε μια βάση δεδομένων από αναπαραγωγή παν μεμονωμένη για αυτό (1). Αυτό θα διασφαλίσει την προβλέψιμα απόδοση για νέες συνδρομές πελατών, ενημερώσεις προφίλ και τις άλλες λειτουργίες διαχείρισης. Στην περιοχή όπου βρίσκονται τα βασικά χρώματα από τη Διαχείριση βάσεις δεδομένων θα είναι η κύρια περιοχή και της περιοχής όπου βρίσκονται τα secondaries της οι βάσεις δεδομένων διαχείρισης θα είναι η περιοχή DR.

Βάσεις δεδομένων μισθωτή των πληρωμών πελατών θα έχουν ενεργές βάσεις δεδομένων στο χώρο συγκέντρωσης "επί πληρωμή" παρασχεθεί στην κύρια περιοχή. Θα πρέπει να προμηθεύσουν ένα δευτερεύοντα χώρο συγκέντρωσης με το ίδιο όνομα στην περιοχή DR. Κάθε μισθωτή θα αναπαραχθούν παν στο χώρο συγκέντρωσης δευτερεύοντα (2). Αυτό θα ενεργοποιήσει μια γρήγορη ανάκτηση όλων των βάσεων δεδομένων μισθωτή χρήση ανακατεύθυνσης. 

Εάν παρουσιαστεί ένα μη διαθεσιμότητα στην κύρια περιοχή, τα βήματα ανάκτησης για να μεταφέρετε την εφαρμογή σας online απεικονίζονται στο επόμενο διάγραμμα:

![Εικόνα 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-5.png)

- Αμέσως ανακατευθύνει οι βάσεις δεδομένων διαχείρισης στην περιοχή DR (3).
- Αλλάξτε την εφαρμογή συμβολοσειρά σύνδεσης για να τοποθετήστε το δείκτη στην περιοχή DR. Τώρα όλα τα νέα λογαριασμών και μισθωτή βάσεις δεδομένων θα δημιουργηθεί στην περιοχή DR. Τους υπάρχοντες πελάτες δοκιμαστική θα δείτε τα δεδομένα που είναι προσωρινά μη διαθέσιμος.
- Ανακατεύθυνση βάσεις δεδομένων του μισθωτή επί πληρωμή στο χώρο συγκέντρωσης στην περιοχή DR για να επαναφέρετε αμέσως τη διαθεσιμότητά τους (4). Εφόσον η ανακατεύθυνση είναι μια αλλαγή επιπέδου γρήγορης μετα-δεδομένων που μπορεί να λάβετε υπόψη βελτιστοποίηση ενός όπου τα μεμονωμένα ανακατευθύνσεις ενεργοποιούνται ζήτηση από τις συνδέσεις του τελικού χρήστη. 
- Εάν το μέγεθος eDTU δευτερεύοντα χώρου συγκέντρωσης ήταν χαμηλότερη από την κύρια επειδή τα δευτερεύοντα βάσεις δεδομένων απαιτείται μόνο την ικανότητα να επεξεργάζονται τα αρχεία καταγραφής αλλαγή όσο βρίσκονταν secondaries, θα πρέπει να αυξήσετε αμέσως η δυναμικότητα χώρου συγκέντρωσης τώρα για να χωρέσει το πλήρες φόρτο εργασίας όλες μισθωτές (5). 
- Δημιουργήστε το νέο σύνολο ελαστικότητας με το ίδιο όνομα και την ίδια ρύθμιση παραμέτρων της περιοχής DR για βάσεις δεδομένων των πελατών δοκιμαστικής έκδοσης (6). 
- Μετά τη δημιουργία χώρου συγκέντρωσης τους πελάτες δοκιμαστικής έκδοσης, χρησιμοποιήστε παν-Επαναφορά για να επαναφέρετε τις βάσεις δεδομένων μεμονωμένα μισθωτή δοκιμαστικής έκδοσης στο νέο χώρο συγκέντρωσης (7). Μπορείτε να εξετάστε το ενδεχόμενο να Ενεργοποίηση τα μεμονωμένα επαναφέρει από τις συνδέσεις του τελικού χρήστη ή να χρησιμοποιήσετε ορισμένα άλλα εφαρμογή συνδυασμού συγκεκριμένα προτεραιότητα.

Σε αυτό το σημείο εφαρμογή σας είναι πάλι σε σύνδεση στην περιοχή DR. Όλοι οι πελάτες που πληρωμής έχει πρόσβαση στα δεδομένα τους ενώ η δοκιμαστική πελάτες θα είναι η εμπειρία καθυστέρηση κατά την πρόσβαση στα δεδομένα τους.

Κατά την ανάκτηση στην κύρια περιοχή με Azure *μετά* την επαναφορά της εφαρμογής στην περιοχή DR μπορείτε να συνεχίσετε να εκτελέσετε την εφαρμογή σε αυτήν την περιοχή ή μπορείτε να αποφασίσετε να αποτύχει της περιοχής στην κύρια. Εάν η κύρια περιοχή είναι τα ανακτημένα *πριν από την* ανακατεύθυνση ολοκληρωθεί η διαδικασία, πρέπει να εξετάσετε άλλως πίσω αμέσως. Η αποκατάσταση μετά από θα ακολουθήσετε τα βήματα απεικονίζονται στο επόμενο διάγραμμα: 
 
![Εικόνα 6](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-6.png)

- Ακύρωση όλων των αιτήσεων εξαιρετική παν-επαναφοράς.   
- Βάσεις δεδομένων ανακατεύθυνσης τη Διαχείριση (8). Μετά την αποκατάσταση της περιοχής των κύριων παλιά είχατε γίνεται αυτόματα τη δευτερεύουσα. Τώρα είναι η κύρια ξανά.  
- Ανακατεύθυνση επί πληρωμή μισθωτή βάσεις δεδομένων (9). Ομοίως, μετά την αποκατάσταση της περιοχής παλιά βασικών γίνεται αυτόματα το secondaries. Τώρα θα γίνουν ξανά τα βασικά χρώματα. 
- Ορίστε τις επαναφέρει δοκιμαστική βάσεις δεδομένων που έχουν αλλάξει στην περιοχή DR σε μόνο για ανάγνωση (10).
- Για κάθε βάση δεδομένων στο χώρο συγκέντρωσης δοκιμαστική πελάτες DR που αλλάξει από την ανάκτηση, μετονομασία ή διαγραφή της αντίστοιχης βάσης δεδομένων στο χώρο συγκέντρωσης πρωτεύοντος δοκιμαστική πελάτες (11). 
- Αντιγράψτε τις ενημερωμένες βάσεις δεδομένων από το χώρο συγκέντρωσης DR στο χώρο συγκέντρωσης πρωτεύοντος (12). 
- Διαγράψτε το χώρο συγκέντρωσης DR (13) 

> [AZURE.NOTE] Η λειτουργία ανακατεύθυνσης είναι ασύγχρονης. Για να ελαχιστοποιήσετε τον χρόνο αποκατάστασης, είναι σημαντικό να εκτέλεση εντολής ανακατεύθυνσης των βάσεων δεδομένων του μισθωτή σε δέσμες με τουλάχιστον 20 βάσεις δεδομένων. 

Το πλήκτρο **επωφεληθείτε** από αυτήν τη στρατηγική είναι ότι παρέχει την υψηλότερη SLA για τους πελάτες πληρωμής. Εγγυάται επίσης ότι το νέο δοκιμές είναι αποκλεισμένα μόλις δημιουργηθεί η δοκιμαστική χώρου συγκέντρωσης DR. Το **συσχετισμό** είναι ότι αυτή η διαμόρφωση θα αυξήσει το συνολικό κόστος των βάσεων δεδομένων μισθωτή από το κόστος του χώρου συγκέντρωσης δευτερεύοντα DR για τους πελάτες σας επί πληρωμή. Επιπλέον, εάν ο δευτερεύων χώρος συγκέντρωσης έχει διαφορετικό μέγεθος, το πελάτες που πληρώνουν θα είναι η εμπειρία κάτω απόδοσης μετά την ανακατεύθυνση μέχρι να ολοκληρωθεί η αναβάθμιση του χώρου συγκέντρωσης στην περιοχή DR. 

## <a name="scenario-3-geographically-distributed-application-with-tiered-service"></a>Σενάριο 3. Γεωγραφικά κατανεμημένης εφαρμογής με την υπηρεσία ομότιμου

<i>Έχω μια ώριμη εφαρμογή ΑΔΑ με προσφορές ομότιμου υπηρεσίας. Θέλω να προσφέρετε μια πολύ αυστηρές SLA σε μου επί πληρωμή τους πελάτες και να ελαχιστοποιήσετε τον κίνδυνο επίδραση όταν υπάρχουν διακοπές επειδή ακόμα σύντομη διακοπές μπορεί να προκαλέσει μη ικανοποίησης των πελατών. Είναι σημαντικό ότι οι πελάτες που πληρώνουν πάντα πρόσβαση στα δεδομένα τους. Η δοκιμές είναι δωρεάν και δεν προσφέρεται ένα SLA κατά τη διάρκεια της δοκιμαστικής περιόδου.</i> 

Για να υποστηρίζει αυτό το σενάριο, θα πρέπει να έχετε τρεις ξεχωριστές ελαστικότητας χώρους συγκέντρωσης. Θα πρέπει να είναι παροχή της υπηρεσίας δύο σύνολα μέγεθος ίσο με υψηλή eDTUs ανά βάση δεδομένων σε δύο διαφορετικές περιοχές να περιέχει βάσεις δεδομένων μισθωτή τους πελάτες επί πληρωμή. Το τρίτο χώρο συγκέντρωσης που περιέχει τη δοκιμαστική μισθωτές να έχουν ένα κάτω eDTUs ανά βάση δεδομένων και να παρασχεθεί σε ένα από τα δύο περιοχής.

Για να εξασφαλίσετε τη χαμηλότερη αποκατάστασης διάρκεια ΡΕΥΜΑΤΟΣ μισθωτή των πληρωμών πελατών βάσεις δεδομένων πρέπει να αναπαραχθούν παν με 50% των πρωτεύοντος βάσεων δεδομένων σε κάθε μία από τις δύο περιοχές. Ομοίως, κάθε περιοχής να έχουν 50% των δευτερεύοντα βάσεων δεδομένων. Με αυτόν τον τρόπο εάν μια περιοχή είναι χωρίς σύνδεση μόνο 50% των βάσεων δεδομένων των πελατών επί πληρωμή μπορεί να αντιμετωπίσουν προβλήματα και θα πρέπει να ανακατεύθυνσης. Οι άλλες βάσεις δεδομένων θα παραμένουν ανέπαφες. Αυτή η ρύθμιση παραμέτρων απεικονίζεται στο ακόλουθο διάγραμμα:

![Εικόνα 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-7.png)

Αυτά τα σενάρια, την προηγούμενη οι βάσεις δεδομένων διαχείρισης θα είναι αρκετά ενεργό έτσι θα πρέπει να ρυθμίσετε τους ως βάσεις δεδομένων αναπαραχθούν παν μεμονωμένη (1). Αυτό θα διασφαλίσει την απόδοση προβλέψιμα τις νέες συνδρομές πελατών, ενημερώσεις προφίλ και τις άλλες λειτουργίες διαχείρισης. Περιοχή A θα είναι η κύρια περιοχή για τη Διαχείριση βάσεις δεδομένων και στην περιοχή B θα χρησιμοποιηθεί για την ανάκτηση της οι βάσεις δεδομένων διαχείρισης.

Βάσεις δεδομένων μισθωτή των πληρωμών πελατών θα είναι επίσης αναπαραχθούν παν αλλά με βασικά χρώματα και διαίρεση secondaries ανάμεσα σε μια περιοχή και περιοχή B (2). Με αυτόν τον τρόπο τις βάσεις δεδομένων κύριο μισθωτή επηρεάζεται από τη μη διαθεσιμότητα να ανακατεύθυνσης στην περιοχή άλλες και γίνονται διαθέσιμες. Το άλλο μισό από τις βάσεις δεδομένων του μισθωτή θα δεν επηρεάζεται καθόλου. 

Το επόμενο διάγραμμα παρουσιάζει τα βήματα ανάκτησης για να ακολουθήσετε εάν μια μη διαθεσιμότητα εμφανίζεται στην περιοχή α.

![Εικόνα 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-8.png)

- Αποτύχει ακριβώς επάνω από τις βάσεις δεδομένων διαχείρισης περιοχή B (3).
- Αλλάξτε την εφαρμογή συμβολοσειρά σύνδεσης στην οποία θα οδηγεί η βάσεις δεδομένων διαχείρισης στην περιοχή Διαχείριση βάσεις δεδομένων για να βεβαιωθείτε ότι η νέους λογαριασμούς και τις βάσεις δεδομένων του μισθωτή θα δημιουργηθεί στην περιοχή B και τις υπάρχουσες βάσεις δεδομένων του μισθωτή θα βρίσκονται εκεί καθώς και τροποποίηση B.. Τους υπάρχοντες πελάτες δοκιμαστική θα δείτε τα δεδομένα που είναι προσωρινά μη διαθέσιμος.
- Ανακατεύθυνση βάσεις δεδομένων του μισθωτή επί πληρωμή στο χώρο συγκέντρωσης 2 στην περιοχή B για να επαναφέρετε αμέσως τη διαθεσιμότητά τους (4). Εφόσον η ανακατεύθυνση είναι μια αλλαγή επιπέδου γρήγορης μετα-δεδομένων που μπορεί να λάβετε υπόψη βελτιστοποίηση ενός όπου τα μεμονωμένα ανακατευθύνσεις ενεργοποιούνται ζήτηση από τις συνδέσεις του τελικού χρήστη. 
- Δεδομένου ότι τώρα χώρο συγκέντρωσης 2 περιέχει μόνο πρωτεύοντα βάσεις δεδομένων, θα αυξήσετε το συνολικό φόρτο εργασίας στο χώρο συγκέντρωσης, ώστε να αμέσως, θα πρέπει να αυξήσετε το μέγεθός του eDTU (5). 
- Δημιουργήστε το νέο σύνολο ελαστικότητας με το ίδιο όνομα και την ίδια ρύθμιση παραμέτρων της περιοχής B για βάσεις δεδομένων των πελατών δοκιμαστικής έκδοσης (6). 
- Αφού δημιουργηθεί το χώρο συγκέντρωσης Χρησιμοποιήστε παν-Επαναφορά για να επαναφέρετε τη βάση δεδομένων του μισθωτή δοκιμαστικής έκδοσης μεμονωμένα στο χώρο συγκέντρωσης (7). Μπορείτε να εξετάστε το ενδεχόμενο να Ενεργοποίηση τα μεμονωμένα επαναφέρει από τις συνδέσεις του τελικού χρήστη ή να χρησιμοποιήσετε ορισμένα άλλα εφαρμογή συνδυασμού συγκεκριμένα προτεραιότητα.


> [AZURE.NOTE] Η λειτουργία ανακατεύθυνσης είναι ασύγχρονης. Για να ελαχιστοποιήσετε τον χρόνο αποκατάστασης, είναι σημαντικό να εκτέλεση εντολής ανακατεύθυνσης των βάσεων δεδομένων του μισθωτή σε δέσμες με τουλάχιστον 20 βάσεις δεδομένων. 

Σε αυτό το σημείο είναι πάλι την εφαρμογή σας στην περιοχή B. Όλοι οι πελάτες που πληρωμής έχει πρόσβαση στα δεδομένα τους ενώ η δοκιμαστική πελάτες θα είναι η εμπειρία καθυστέρηση κατά την πρόσβαση στα δεδομένα τους.

Κατά την ανάκτηση περιοχή A πρέπει να αποφασίσετε εάν θέλετε να χρησιμοποιήσετε περιοχή B για χρήση δοκιμαστικής έκδοσης πελάτες ή αποκατάσταση μετά από με τη χρήση του χώρου συγκέντρωσης δοκιμαστική πελάτες στην περιοχή α. Μία κριτήρια μπορεί να είναι το % των βάσεων δεδομένων μισθωτή δοκιμαστικής έκδοσης τροποποιηθεί από την ανάκτηση. Ανεξάρτητα από αυτήν την απόφαση θα πρέπει να εξισορροπήσετε εκ νέου το επί πληρωμή μισθωτές ανάμεσα σε δύο σύνολα. το επόμενο διάγραμμα παρουσιάζει τη διαδικασία, όταν δεν τις βάσεις δεδομένων του μισθωτή δοκιμαστικής έκδοσης Επιστροφή στην περιοχή α.  
 
![Εικόνα 6](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-9.png)

- Ακύρωση όλες τις αιτήσεις εκκρεμούν παν-επαναφορά δοκιμαστικής έκδοσης χώρου συγκέντρωσης DR.   
- Ανακατεύθυνση η βάση δεδομένων διαχείρισης (8). Μετά την αποκατάσταση της περιοχής, η παλιά κύρια είχατε γίνεται αυτόματα τη δευτερεύουσα. Τώρα είναι η κύρια ξανά.  
- Επιλέξτε ποιες επί πληρωμή μισθωτή βάσεις δεδομένων θα αποτύχει επιστρέψτε στο χώρο συγκέντρωσης 1 και προετοιμασία ανακατεύθυνσης για να τους secondaries (9). Μετά την αποκατάσταση της περιοχής όλες τις βάσεις δεδομένων στο χώρο συγκέντρωσης 1 γίνεται αυτόματα secondaries. Τώρα 50% από αυτές θα μετατραπεί σε βασικά χρώματα ξανά. 
- Μειώστε το μέγεθος του χώρου συγκέντρωσης 2 για το αρχικό eDTU (10).
- Ορισμός όλων επαναφορά δοκιμαστική βάσεις δεδομένων στην περιοχή B μόνο για ανάγνωση (11).
- Για κάθε βάση δεδομένων στο σύνολο DR δοκιμαστικής έκδοσης που έχει αλλάξει από την ανάκτηση Μετονομασία ή διαγραφή της αντίστοιχης βάσης δεδομένων στο χώρο συγκέντρωσης δοκιμαστική πρωτεύοντος (12). 
- Αντιγράψτε τις ενημερωμένες βάσεις δεδομένων από το χώρο συγκέντρωσης DR στο χώρο συγκέντρωσης πρωτεύοντος (13). 
- Διαγράψτε το χώρο συγκέντρωσης DR (14) 

Τα βασικά **πλεονεκτήματα** της στρατηγικής αυτό είναι οι εξής:

- Υποστηρίζει την πιο αυστηρές SLA για πελάτες που πληρώνουν επειδή εξασφαλίζει ότι ένα μη διαθεσιμότητα δεν είναι δυνατό να επηρεάσουν περισσότερα από 50% από τις βάσεις δεδομένων του μισθωτή. 
- Εγγυάται ότι το νέο δοκιμές είναι αποκλεισμένα μόλις το ίχνος χώρου συγκέντρωσης DR δημιουργείται κατά τη διάρκεια της ανάκτησης. 
- Επιτρέπει πιο αποτελεσματική χρήση των δυνατοτήτων χώρου συγκέντρωσης κατά 50% δευτερεύοντα βάσεων δεδομένων στο χώρο συγκέντρωσης 1 και το χώρο συγκέντρωσης 2 είναι εγγυημένη λιγότερο ενεργό, στη συνέχεια, το πρωτεύον βάσεις δεδομένων.

Το κύριο **τα ανταλλάγματα** είναι οι εξής:

- Οι λειτουργίες CRUD σε σχέση με τη Διαχείριση βάσεις δεδομένων θα έχει κάτω λανθάνων χρόνος για τους τελικούς χρήστες συνδεδεμένοι σε περιοχή A από για τους τελικούς χρήστες συνδεδεμένο με περιοχή B που θα εκτελεστεί σε σχέση με την κύρια της οι βάσεις δεδομένων διαχείρισης.
- Απαιτεί πιο σύνθετη σχεδίαση της βάσης δεδομένων διαχείρισης. Για παράδειγμα, κάθε εγγραφή μισθωτή, θα πρέπει να έχει μια ετικέτα θέση που πρέπει να αλλάξει κατά τη διάρκεια της ανακατεύθυνσης και επιστροφή σε αυτόν.  
- Οι πελάτες που πληρώνουν ενδέχεται να αντιμετωπίσετε κάτω επιδόσεων από ότι συνήθως μέχρι να ολοκληρωθεί η αναβάθμιση του χώρου συγκέντρωσης σε περιοχή B. 

## <a name="summary"></a>Σύνοψη

Σε αυτό το άρθρο εστιάζει στην τις στρατηγικές αποκατάστασης από καταστροφή για το επίπεδο βάσης δεδομένων που χρησιμοποιούνται από μια εφαρμογή πολλών μισθωτών ΑΔΑ ISV. Η στρατηγική που επιλέγετε πρέπει να είναι ανάλογα με τις ανάγκες της εφαρμογής, όπως το μοντέλο επιχειρήσεις, το SLA που θέλετε να προσφέρετε στους πελάτες σας, προϋπολογισμού περιορισμού κ.λπ... Κάθε περιγράφεται στρατηγικής περιγράφει τα πλεονεκτήματα και συσχετισμό, ώστε να μπορεί να κάνετε μια ενήμεροι απόφασης. Επίσης, σας συγκεκριμένη εφαρμογή πιθανώς θα περιλαμβάνει άλλα στοιχεία του Azure. Επομένως, πρέπει να Εξετάστε τους καθοδήγηση συνέχειας επιχειρήσεις και να οργανώσετε την ανάκτηση το επίπεδο βάσης δεδομένων με αυτά. Για να μάθετε περισσότερα σχετικά με τη διαχείριση αποκατάστασης από εφαρμογές βάσεων δεδομένων στο Azure, ανατρέξτε [λύσεων cloud σχεδίαση για αποκατάσταση](./sql-database-designing-cloud-solutions-for-disaster-recovery.md) .  


## <a name="next-steps"></a>Επόμενα βήματα

- Για να μάθετε σχετικά με τη βάση δεδομένων SQL Azure αυτόματης δημιουργίας αντιγράφων ασφαλείας, ανατρέξτε στο θέμα [βάση δεδομένων SQL αυτόματης δημιουργίας αντιγράφων ασφαλείας](sql-database-automated-backups.md)
- Για μια επισκόπηση επιχειρηματικές συνέχειας και σενάρια, ανατρέξτε στο θέμα [Επισκόπηση επιχειρηματικές συνέχειας](sql-database-business-continuity.md)
- Για να μάθετε πώς να χρησιμοποιείτε την αυτόματη δημιουργία αντιγράφων ασφαλείας για την ανάκτηση, ανατρέξτε στο θέμα [Επαναφορά βάσης δεδομένων από τα αντίγραφα ασφαλείας που ξεκινούν από την υπηρεσία](sql-database-recovery-using-backups.md)
- Για να μάθετε σχετικά με τις επιλογές αποκατάστασης του ταχύτερος, ανατρέξτε στο θέμα [Ενεργό-παν-αναπαραγωγής](sql-database-geo-replication-overview.md)  
- Για να μάθετε πώς να χρησιμοποιείτε την αυτόματη δημιουργία αντιγράφων ασφαλείας για την αρχειοθέτηση, ανατρέξτε στο θέμα [Αντιγραφή βάσης δεδομένων](sql-database-copy.md)
