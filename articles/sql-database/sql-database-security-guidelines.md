<properties
   pageTitle="Οδηγίες ασφαλείας βάσης δεδομένων Azure SQL και τους περιορισμούς | Microsoft Azure"
   description="Μάθετε σχετικά με τη βάση δεδομένων SQL Microsoft Azure γενικές οδηγίες και περιορισμούς που σχετίζονται με ασφάλεια."
   services="sql-database"
   documentationCenter=""
   authors="BYHAM"
   manager="jhubbard"
   editor=""
   tags=""/>

<tags
   ms.service="sql-database"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="data-management"
   ms.date="10/18/2016"
   ms.author="rickbyh"/>

# <a name="azure-sql-database-security-guidelines-and-limitations"></a>Azure οδηγίες ασφαλείας βάσης δεδομένων SQL και περιορισμοί

Αυτό το θέμα περιγράφει τη βάση δεδομένων SQL Microsoft Azure γενικές οδηγίες και περιορισμούς που σχετίζονται με ασφάλεια. Κατά τη διαχείριση της ασφάλειας του τις βάσεις δεδομένων SQL Azure, λάβετε υπόψη τα εξής σημεία.

## <a name="access-to-the-virtual-master-database"></a>Πρόσβαση σε εικονικές κύρια βάση δεδομένων

Συνήθως, μόνο οι διαχειριστές χρειάζονται πρόσβαση στην κύρια βάση δεδομένων. Τακτική πρόσβαση στη βάση δεδομένων κάθε χρήστη πρέπει να είναι έως χρήστες που δεν είναι διαχειριστής περιεχόμενα βάσης δεδομένων που δημιουργούνται σε κάθε βάση δεδομένων. Όταν χρησιμοποιείτε χρήστες περιεχόμενα βάσεων δεδομένων, δεν χρειάζεται να δημιουργήσετε συνδέσεις στην κύρια βάση δεδομένων. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Που περιέχονται χρήστες βάσεων δεδομένων - πραγματοποίηση η βάση δεδομένων Portable](https://msdn.microsoft.com/library/ff929188.aspx).


## <a name="firewall"></a>Τείχος προστασίας

Το τείχος προστασίας SQL Server, η οποία έχει εύρος για ολόκληρο το διακομιστή SQL Azure ρυθμίζεται συνήθως μέσω της πύλης και θα πρέπει να δέχεται μόνο οι διευθύνσεις IP που χρησιμοποιούνται από τους διαχειριστές. Για να δημιουργήσετε έναν κανόνα εμβέλεια βάση δεδομένων τείχος προστασίας που ανοίγει τα απαραίτητα περιοχή διευθύνσεων IP για κάθε βάση δεδομένων, σύνδεση με βάση δεδομένων χρήστη και, στη συνέχεια, χρησιμοποιήστε το [sp_set_database_firewall_rule](https://msdn.microsoft.com/library/dn270010.aspx) πρόταση Transact-SQL.

Η βάση δεδομένων SQL Azure υπηρεσία διατίθεται μόνο μέσω TCP θύρα 1433. Για να αποκτήσετε πρόσβαση σε μια βάση δεδομένων SQL από τον υπολογιστή σας, βεβαιωθείτε ότι του τείχους προστασίας του προγράμματος-πελάτη υπολογιστή επιτρέπει εξερχόμενες επικοινωνίας TCP στη θύρα TCP 1433. Εάν δεν είναι απαραίτητο για άλλες εφαρμογές, αποκλεισμός εισερχόμενες συνδέσεις στη θύρα TCP 1433. 

Ως μέρος της διαδικασίας σύνδεσης, οι συνδέσεις από Azure εικονικές μηχανές ανακατευθύνονται σε μια διαφορετική διεύθυνση IP και τη θύρα, μοναδικό για κάθε ρόλο εργασίας. Ο αριθμός θύρας είναι στην περιοχή από 11000 σε 11999. Για περισσότερες πληροφορίες σχετικά με τις θύρες TCP, ανατρέξτε στο θέμα [θύρες πέρα από 1433 για διαίρεσης 4,5 ADO.NET και V12 βάσης δεδομένων SQL](sql-database-develop-direct-route-ports-adonet-v12.md).


## <a name="authentication"></a>Έλεγχος ταυτότητας

Χρήση ελέγχου ταυτότητας Active Directory (ενσωματωμένο σύστημα ασφαλείας) όποτε είναι δυνατό. Για πληροφορίες σχετικά με τη ρύθμιση παραμέτρων ελέγχου ταυτότητας AD, ανατρέξτε στο θέμα [σύνδεση με βάση δεδομένων με χρησιμοποιώντας Azure Active Directory έλεγχος ταυτότητας του SQL](sql-database-aad-authentication.md)και [επιλέγοντας μια λειτουργία ελέγχου ταυτότητας](https://msdn.microsoft.com/library/ms144284.aspx) σε ηλεκτρονικά βιβλία του SQL Server. 

Χρησιμοποιήστε χρήστες περιεχόμενα βάσης δεδομένων για να βελτιώσετε την κλιμάκωση. Για περισσότερες πληροφορίες, δείτε [Που περιέχονται χρήστες βάσεων δεδομένων - πραγματοποίηση η βάση δεδομένων Portable](https://msdn.microsoft.com/library/ff929188.aspx), [CREATE USER (Transact-SQL)](https://technet.microsoft.com/library/ms173463.aspx)και [Που περιέχονται βάσεις δεδομένων](https://technet.microsoft.com/library/ff929071.aspx).

Το μηχανισμό βάσεων δεδομένων κλείνει συνδέσεων που παραμείνει αδρανής για περισσότερο από 30 λεπτά. Η σύνδεση πρέπει να συνδεθείτε ξανά πριν να μπορεί να χρησιμοποιηθεί.

Συνεχώς ενεργές συνδέσεις με βάση δεδομένων SQL απαιτούν reauthorization (που έχει εκτελεστεί από το μηχανισμό βάσεων δεδομένων) τουλάχιστον κάθε 10 ώρες. Το μηχανισμό βάσεων δεδομένων επιχειρεί reauthorization χρησιμοποιώντας τον κωδικό πρόσβασης που έχουν υποβληθεί αρχικά και εισαγωγή από το χρήστη δεν είναι απαραίτητο. Για λόγους απόδοσης, όταν είναι η επαναφορά του κωδικού πρόσβασης στη βάση δεδομένων SQL, η σύνδεση δεν είναι να επαναλαμβάνεται ο έλεγχος ταυτότητας, ακόμα και αν είναι επαναφορά της σύνδεσης λόγω συγκέντρωση συνδέσεων. Αυτό είναι διαφορετικό από τη συμπεριφορά του SQL Server εσωτερικής εγκατάστασης. Εάν ο κωδικός πρόσβασης έχει αλλάξει μετά τη σύνδεση αρχικά έχει εγκριθεί, πρέπει να τελειώνει τη σύνδεση και μια νέα σύνδεση γίνεται με χρήση του νέου κωδικού πρόσβασης. Ένας χρήστης με δικαίωμα ΤΕΡΜΑΤΙΣΜΟΎ ΣΎΝΔΕΣΗΣ βάσης ΔΕΔΟΜΈΝΩΝ μπορεί να Τερματισμός ρητά μια σύνδεση με βάση δεδομένων SQL, χρησιμοποιώντας την εντολή [ΤΕΡΜΑΤΙΣΜΟΎ](https://msdn.microsoft.com/library/ms173730.aspx) .

## <a name="logins-and-users"></a>Συνδέσεις και τους χρήστες

Κατά τη Διαχείριση συνδέσεων και τους χρήστες στη βάση δεδομένων SQL, υπάρχουν περιορισμοί.


- Θα πρέπει να είστε συνδεδεμένοι με την **κύρια** βάση δεδομένων κατά την εκτέλεση του ``CREATE/ALTER/DROP DATABASE`` δηλώσεις. -Οι χρήστες της βάσης δεδομένων στην κύρια βάση δεδομένων αντιστοιχεί στο επίπεδο διακομιστή κεφαλαίου login δεν μπορούν να τροποποιηθεί ή καταργηθεί. 
- Τα Αγγλικά η.π.α. είναι η προεπιλεγμένη γλώσσα του κεφαλαίου login επιπέδου διακομιστή.
- Μόνο οι διαχειριστές (login κεφαλαίου επιπέδου διακομιστή ή διαχειριστής Azure AD) και τα μέλη του ρόλου **dbmanager** βάση δεδομένων στην **κύρια** βάση δεδομένων έχει δικαίωμα να εκτελέσει το ``CREATE DATABASE`` και ``DROP DATABASE`` δηλώσεις.
- Θα πρέπει να είστε συνδεδεμένοι με την κύρια βάση δεδομένων κατά την εκτέλεση του ``CREATE/ALTER/DROP LOGIN`` δηλώσεις. Ωστόσο χρησιμοποιώντας συνδέσεις αποτρέπεται. Χρησιμοποιήστε τους χρήστες που περιέχονται βάσης δεδομένων.
- Για να συνδεθείτε με μια βάση δεδομένων του χρήστη, πρέπει να παρέχετε το όνομα της βάσης δεδομένων στη συμβολοσειρά σύνδεσης.
- Μόνο login κεφαλαίου επιπέδου διακομιστή και τα μέλη του ρόλου **loginmanager** βάσης δεδομένων στην **κύρια** βάση δεδομένων έχει δικαίωμα να εκτελέσει το ``CREATE LOGIN``, ``ALTER LOGIN``, και ``DROP LOGIN`` δηλώσεις.
- Κατά την εκτέλεση του ``CREATE/ALTER/DROP LOGIN`` και ``CREATE/ALTER/DROP DATABASE`` καταστάσεις σε μια εφαρμογή του ADO.NET, χρησιμοποιώντας εντολές με παραμέτρους δεν επιτρέπεται. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [εντολές και τις παραμέτρους](https://msdn.microsoft.com/library/ms254953.aspx).
- Κατά την εκτέλεση του ``CREATE/ALTER/DROP DATABASE`` και ``CREATE/ALTER/DROP LOGIN`` προτάσεις, κάθε μία από αυτές τις προτάσεις πρέπει να είναι η μόνη πρόταση σε μια δέσμη Transact-SQL. Διαφορετικά, παρουσιάζεται σφάλμα. Για παράδειγμα, το παρακάτω Transact-SQL ελέγχει αν υπάρχει στη βάση δεδομένων. Εάν υπάρχει, μια ``DROP DATABASE`` δήλωση ονομάζεται για να καταργήσετε τη βάση δεδομένων. Επειδή το ``DROP DATABASE`` δήλωση δεν είναι το μόνο πρόταση στη δέσμη, εκτελεί την ακόλουθη πρόταση Transact-SQL προκαλεί σφάλμα.

```
IF EXISTS (SELECT [name]
           FROM   [sys].[databases]
           WHERE  [name] = N'database_name')
     DROP DATABASE [database_name];
GO
```

- Κατά την εκτέλεση του ``CREATE USER`` δήλωση με το ``FOR/FROM LOGIN`` επιλογής, θα πρέπει να είναι η μόνη πρόταση σε μια δέσμη Transact-SQL.
- Κατά την εκτέλεση του ``ALTER USER`` δήλωση με το ``WITH LOGIN`` επιλογής, θα πρέπει να είναι η μόνη πρόταση σε μια δέσμη Transact-SQL.
- Για να ``CREATE/ALTER/DROP`` χρήστη απαιτεί το ``ALTER ANY USER`` δικαιωμάτων από τη βάση δεδομένων.
- Όταν ο κάτοχος του ρόλου βάσης δεδομένων προσπαθεί να προσθέσετε ή να καταργήσετε μια άλλη βάση δεδομένων χρήστη σε ή από αυτόν το ρόλο βάσης δεδομένων, ενδέχεται να εμφανιστεί το ακόλουθο σφάλμα: **χρήστη ή ρόλο 'Όνομα' δεν υπάρχει σε αυτήν τη βάση δεδομένων.** Αυτό το σφάλμα παρουσιάζεται, επειδή ο χρήστης δεν είναι ορατές στον κάτοχο του. Για να επιλύσετε αυτό το ζήτημα, εκχωρούν τον κάτοχο του ρόλου του ``VIEW DEFINITION`` δικαιωμάτων στον χρήστη. 

Για περισσότερες πληροφορίες σχετικά με συνδέσεις και χρήστες, ανατρέξτε στο θέμα [Διαχείριση βάσεων δεδομένων και συνδέσεις σε βάση δεδομένων SQL Azure](sql-database-manage-logins.md).


## <a name="see-also"></a>Δείτε επίσης

[Τείχος προστασίας βάσης δεδομένων Azure SQL](sql-database-firewall-configure.md)

[Πώς μπορείτε να: ρύθμιση παραμέτρων τείχους προστασίας (βάση δεδομένων SQL Azure)](sql-database-configure-firewall-settings.md)

[Διαχείριση βάσεων δεδομένων και συνδέσεις σε βάση δεδομένων SQL Azure](sql-database-manage-logins.md)

[Κέντρο ασφάλειας για το μηχανισμό βάσεων δεδομένων SQL Server και βάση δεδομένων SQL Azure](https://msdn.microsoft.com/library/bb510589)
