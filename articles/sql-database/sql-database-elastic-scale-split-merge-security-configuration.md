<properties 
    pageTitle="Ρύθμιση παραμέτρων ασφαλείας διαιρεμένης συγχώνευσης | Microsoft Azure" 
    description="Ρύθμιση του x409 πιστοποιητικά κρυπτογράφησης" 
    metaKeywords="Elastic Database certificates security" 
    services="sql-database" 
    documentationCenter="" 
    manager="jhubbard" 
    authors="torsteng"/>

<tags 
    ms.service="sql-database" 
    ms.workload="sql-database" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="05/27/2016" 
    ms.author="torsteng" />


# <a name="split-merge-security-configuration"></a>Ρύθμιση παραμέτρων ασφαλείας διαιρεμένης συγχώνευσης  

Για να χρησιμοποιήσετε την υπηρεσία συγχώνευση/διαίρεση, πρέπει να ρυθμίσετε σωστά ασφαλείας. Η υπηρεσία είναι μέρος της δυνατότητας ελαστικότητας κλίμακα της βάσης δεδομένων SQL Microsoft Azure. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [ελαστικότητας διαίρεση κλίμακα και συγχώνευση το πρόγραμμα εκμάθησης υπηρεσίας](sql-database-elastic-scale-configure-deploy-split-and-merge.md).

## <a name="configuring-certificates"></a>Ρύθμιση παραμέτρων πιστοποιητικών

Τα πιστοποιητικά έχουν ρυθμιστεί με δύο τρόπους. 

1. [Για να ρυθμίσετε τις παραμέτρους του πιστοποιητικού SSL](#To-Configure-the-SSL#Certificate)
2. [Για να ρυθμίσετε τις παραμέτρους πιστοποιητικά προγράμματος-πελάτη](#To-Configure-Client-Certificates) 

## <a name="to-obtain-certificates"></a>Για να αποκτήσετε πιστοποιητικών

Τα πιστοποιητικά μπορεί να ληφθεί από δημόσια τις αρχές έκδοσης πιστοποιητικών (CA) ή από την [Υπηρεσία των Windows πιστοποιητικού](http://msdn.microsoft.com/library/windows/desktop/aa376539.aspx). Αυτές είναι οι μέθοδοι προτιμώμενη για να αποκτήσετε πιστοποιητικά.

Εάν δεν είναι διαθέσιμες αυτές τις επιλογές, μπορείτε να δημιουργήσετε **τα πιστοποιητικά αυτο-υπογεγραμμένο**.
 
## <a name="tools-to-generate-certificates"></a>Εργαλεία για τη δημιουργία πιστοποιητικών

* [MakeCert.exe](http://msdn.microsoft.com/library/bfsktky3.aspx)
* [pvk2pfx.exe](http://msdn.microsoft.com/library/windows/hardware/ff550672.aspx)

### <a name="to-run-the-tools"></a>Για να εκτελέσετε τα εργαλεία

* Από έναν προγραμματιστή εντολών για οπτική στούντιο, ανατρέξτε στο θέμα [Visual Studio γραμμή εντολών](http://msdn.microsoft.com/library/ms229859.aspx) 

    Εάν εγκαταστήσετε, μεταβείτε στο:

        %ProgramFiles(x86)%\Windows Kits\x.y\bin\x86 

* Λήψη του WDK από [Windows 8.1: κάντε λήψη του Κιτ και εργαλεία](http://msdn.microsoft.com/windows/hardware/gg454513#drivers)

## <a name="to-configure-the-ssl-certificate"></a>Για να ρυθμίσετε τις παραμέτρους του πιστοποιητικού SSL
Ένα πιστοποιητικό SSL είναι απαραίτητη για την κρυπτογράφηση επικοινωνίας και τον έλεγχο ταυτότητας διακομιστή. Επιλέξτε το πιο που εφαρμόζονται από τα παρακάτω τρία σενάρια και εκτέλεση όλα τα βήματα:

### <a name="create-a-new-self-signed-certificate"></a>Δημιουργία ενός νέου πιστοποιητικού αυτόματης υπογραφής

1.    [Δημιουργία πιστοποιητικού αυτόματης υπογραφής](#Create-a-Self-Signed-Certificate)
2.    [Δημιουργία αρχείου PFX για το πιστοποιητικό SSL Self-Signed](#Create-PFX-file-for-Self-Signed-SSL-Certificate)
3.    [Αποστείλετε το πιστοποιητικό SSL να υπηρεσία στο Cloud](#Upload-SSL-Certificate-to-Cloud-Service)
4.    [Ενημέρωση πιστοποιητικού SSL στο αρχείο ρύθμισης παραμέτρων υπηρεσίας](#Update-SSL-Certificate-in-Service-Configuration-File)
5.    [Αρχή έκδοσης πιστοποιητικών SSL εισαγωγής](#Import-SSL-Certification-Authority)

### <a name="to-use-an-existing-certificate-from-the-certificate-store"></a>Για να χρησιμοποιήσετε ένα υπάρχον πιστοποιητικό από το χώρο αποθήκευσης πιστοποιητικών
1. [Εξαγάγετε το πιστοποιητικό SSL από χώρο αποθήκευσης πιστοποιητικών](#Export-SSL-Certificate-From-Certificate-Store)
2. [Αποστείλετε το πιστοποιητικό SSL να υπηρεσία στο Cloud](#Upload-SSL-Certificate-to-Cloud-Service)
3. [Ενημέρωση πιστοποιητικού SSL στο αρχείο ρύθμισης παραμέτρων υπηρεσίας](#Update-SSL-Certificate-in-Service-Configuration-File)

### <a name="to-use-an-existing-certificate-in-a-pfx-file"></a>Για να χρησιμοποιήσετε ένα υπάρχον πιστοποιητικό σε ένα αρχείο PFX

1. [Αποστείλετε το πιστοποιητικό SSL να υπηρεσία στο Cloud](#Upload-SSL-Certificate-to-Cloud-Service)
2. [Ενημέρωση πιστοποιητικού SSL στο αρχείο ρύθμισης παραμέτρων υπηρεσίας](#Update-SSL-Certificate-in-Service-Configuration-File)

## <a name="to-configure-client-certificates"></a>Για να ρυθμίσετε τις παραμέτρους πιστοποιητικά προγράμματος-πελάτη
Πιστοποιητικά προγράμματος-πελάτη είναι απαραίτητη, για να ελέγχουν την ταυτότητα αιτήσεις για την υπηρεσία. Επιλέξτε το πιο που εφαρμόζονται από τα παρακάτω τρία σενάρια και εκτέλεση όλα τα βήματα:

### <a name="turn-off-client-certificates"></a>Απενεργοποιήστε την επιλογή πιστοποιητικά προγράμματος-πελάτη
1.    [Απενεργοποιήστε την επιλογή έλεγχο ταυτότητας βάσει πιστοποιητικού προγράμματος-πελάτη](#Turn-Off-Client-Certificate-Based-Authentication)

### <a name="issue-new-self-signed-client-certificates"></a>Το θέμα Δημιουργία αυτο-υπογεγραμμένο πιστοποιητικά προγράμματος-πελάτη
1.    [Δημιουργήστε μια αρχή έκδοσης πιστοποιητικών αυτόματης υπογραφής](#Create-a-Self-Signed-Certification-Authority)
2.    [Αποστολή CA πιστοποιητικό για την υπηρεσία στο Cloud](#Upload-CA-Certificate-to-Cloud-Service)
3.    [Ενημέρωση πιστοποιητικού CA στο αρχείο ρύθμισης παραμέτρων υπηρεσίας](#Update-CA-Certificate-in-Service-Configuration-File)
4.    [Έκδοση προγράμματος-πελάτη πιστοποιητικών](#Issue-Client-Certificates)
5.    [Δημιουργία αρχείων PFX για πιστοποιητικά προγράμματος-πελάτη](#Create-PFX-files-for-Client-Certificates)
6.    [Εισαγωγή πιστοποιητικού προγράμματος-πελάτη](#Import-Client-Certificate)
7.    [Αντιγραφή Thumbprints πιστοποιητικό προγράμματος-πελάτη](#Copy-Client-Certificate-Thumbprints)
8.    [Ρύθμιση παραμέτρων επιτρεπόμενων προγράμματα-πελάτες στο αρχείο ρύθμισης παραμέτρων της υπηρεσίας](#Configure-Allowed-Clients-in-the-Service-Configuration-File)

### <a name="use-existing-client-certificates"></a>Χρήση υπάρχουσας πιστοποιητικά προγράμματος-πελάτη
1.    [Εύρεση CA δημόσιο κλειδί](#Find-CA-Public Key)
2.    [Αποστολή CA πιστοποιητικό για την υπηρεσία στο Cloud](#Upload-CA-certificate-to-cloud-service)
3.    [Ενημέρωση πιστοποιητικού CA στο αρχείο ρύθμισης παραμέτρων υπηρεσίας](#Update-CA-Certificate-in-Service-Configuration-File)
4.    [Αντιγραφή Thumbprints πιστοποιητικό προγράμματος-πελάτη](#Copy-Client-Certificate-Thumbprints)
5.    [Ρύθμιση παραμέτρων επιτρεπόμενων προγράμματα-πελάτες στο αρχείο ρύθμισης παραμέτρων της υπηρεσίας](#Configure-Allowed-Clients-in-the-Service-Configuration File)
6.    [Ρύθμιση παραμέτρων του προγράμματος-πελάτη έλεγχος ανάκλησης πιστοποιητικού](#Configure-Client-Certificate-Revocation-Check)

## <a name="allowed-ip-addresses"></a>Επιτρεπόμενων διευθύνσεων IP

Πρόσβαση σε τα τελικά σημεία υπηρεσίας μπορεί να περιοριστεί σε συγκεκριμένες περιοχές διευθύνσεων IP.

## <a name="to-configure-encryption-for-the-store"></a>Για να ρυθμίσετε τις παραμέτρους κρυπτογράφησης για το χώρο αποθήκευσης

Απαιτείται ένα πιστοποιητικό για να κρυπτογραφήσετε τα διαπιστευτήρια που είναι αποθηκευμένα στο χώρο αποθήκευσης μετα-δεδομένων. Επιλέξτε το πιο που εφαρμόζονται από τα παρακάτω τρία σενάρια και εκτέλεση όλα τα βήματα:

### <a name="use-a-new-self-signed-certificate"></a>Χρήση νέου πιστοποιητικού αυτόματης υπογραφής

1.     [Δημιουργία πιστοποιητικού αυτόματης υπογραφής](#Create-a-Self-Signed-Certificate)
2.     [Δημιουργία αρχείου PFX για Self-Signed πιστοποιητικού κρυπτογράφησης](#Create-PFX-file-for-Self-Signed-Encryption-Certificate)
3.     [Αποστολή πιστοποιητικού κρυπτογράφησης στο Cloud υπηρεσίας](#Upload-Encryption-Certificate-to-Cloud-Service)
4.     [Ενημέρωση του πιστοποιητικού κρυπτογράφησης του αρχείου ρύθμισης παραμέτρων υπηρεσίας](#Update-Encryption-Certificate-in-Service-Configuration-File)

### <a name="use-an-existing-certificate-from-the-certificate-store"></a>Χρησιμοποιήστε ένα υπάρχον πιστοποιητικό από το χώρο αποθήκευσης πιστοποιητικού

1.     [Εξαγωγή πιστοποιητικού κρυπτογράφησης από το χώρο αποθήκευσης πιστοποιητικών](#Export-Encryption-Certificate-From-Certificate-Store)
2.     [Αποστολή πιστοποιητικού κρυπτογράφησης στο Cloud υπηρεσίας](#Upload-Encryption-Certificate-to-Cloud-Service)
3.     [Ενημέρωση του πιστοποιητικού κρυπτογράφησης του αρχείου ρύθμισης παραμέτρων υπηρεσίας](#Update-Encryption-Certificate-in-Service-Configuration-File)

### <a name="use-an-existing-certificate-in-a-pfx-file"></a>Χρησιμοποιήστε ένα υπάρχον πιστοποιητικό σε ένα αρχείο PFX

1.     [Αποστολή πιστοποιητικού κρυπτογράφησης στο Cloud υπηρεσίας](#Upload-Encryption-Certificate-to-Cloud-Service)
2.     [Ενημέρωση του πιστοποιητικού κρυπτογράφησης του αρχείου ρύθμισης παραμέτρων υπηρεσίας](#Update-Encryption-Certificate-in-Service-Configuration-File)

## <a name="the-default-configuration"></a>Η προεπιλεγμένη ρύθμιση παραμέτρων

Η προεπιλεγμένη ρύθμιση παραμέτρων αποτρέπει την πρόσβαση στο τελικό σημείο HTTP. Αυτή είναι η προτεινόμενη ρύθμιση, επειδή οι αιτήσεις για αυτά τα τελικά σημεία μπορούν να ευαίσθητες πληροφορίες, όπως τα διαπιστευτήρια βάσης δεδομένων.
Η προεπιλεγμένη ρύθμιση επιτρέπει όλη την πρόσβαση στο τελικό σημείο HTTPS. Αυτή η ρύθμιση μπορεί να είναι περιορισμένο περαιτέρω.

### <a name="changing-the-configuration"></a>Αλλαγή της ρύθμισης παραμέτρων

Η ομάδα τους κανόνες ελέγχου πρόσβασης που ισχύουν για και τελικού σημείου έχουν ρυθμιστεί στο το **<EndpointAcls>** ενότητας στο **αρχείο ρύθμισης παραμέτρων υπηρεσίας**.

    <EndpointAcls>
      <EndpointAcl role="SplitMergeWeb" endPoint="HttpIn" accessControl="DenyAll" />
      <EndpointAcl role="SplitMergeWeb" endPoint="HttpsIn" accessControl="AllowAll" />
    </EndpointAcls>

Οι κανόνες σε μια ομάδα στοιχείων ελέγχου πρόσβασης έχουν ρυθμιστεί οι παράμετροι σε μια <AccessControl name=""> ενότητας από το αρχείο ρύθμισης παραμέτρων υπηρεσίας. 

Η μορφή εξηγείται στις λίστες ελέγχου πρόσβασης δικτύου τεκμηρίωση.
Για παράδειγμα, για να επιτρέψετε μόνο διευθύνσεις IP στην περιοχή 100.100.0.0 να 100.100.255.255 για να αποκτήσετε πρόσβαση στο τελικό σημείο HTTPS, τους κανόνες θα είναι κάπως έτσι:

    <AccessControl name="Retricted">
      <Rule action="permit" description="Some" order="1" remoteSubnet="100.100.0.0/16"/>
      <Rule action="deny" description="None" order="2" remoteSubnet="0.0.0.0/0" />
    </AccessControl>
    <EndpointAcls>
    <EndpointAcl role="SplitMergeWeb" endPoint="HttpsIn" accessControl="Restricted" />

## <a name="denial-of-service-prevention"></a>Άρνηση αποτροπής υπηρεσίας

Υπάρχουν δύο διαφορετικούς μηχανισμούς που υποστηρίζονται για να εντοπίσετε και να αποτρέψετε την άρνηση υπηρεσίας:

*    Περιορισμός του αριθμού ταυτόχρονες αιτήσεις ανά απομακρυσμένου κεντρικού υπολογιστή (απενεργοποιημένη από προεπιλογή)
*    Περιορισμός επιτόκιο πρόσβασης ανά απομακρυσμένου κεντρικού υπολογιστή (σε από προεπιλογή)

Είναι τα εξής με βάση τις δυνατότητες περαιτέρω τεκμηριώνονται σε δυναμικό IP ασφάλεια στις υπηρεσίες IIS. Όταν αλλάξετε αυτήν τη ρύθμιση παραμέτρων πρέπει να έχετε υπόψη τα ακόλουθα στοιχεία:

* Η συμπεριφορά της διακομιστές μεσολάβησης και συσκευές μετάφρασης διευθύνσεων δικτύου επάνω από τις πληροφορίες απομακρυσμένου κεντρικού υπολογιστή
* Κάθε αίτηση για κάθε πόρο στο ρόλο web θεωρείται (π.χ. κατά τη φόρτωση δεσμών ενεργειών, εικόνες, κλπ)

## <a name="restricting-number-of-concurrent-accesses"></a>Περιορισμός του αριθμού ταυτόχρονες αποκτά πρόσβαση σε

Οι ρυθμίσεις που ρυθμίσετε αυτή η συμπεριφορά είναι:

    <Setting name="DynamicIpRestrictionDenyByConcurrentRequests" value="false" />
    <Setting name="DynamicIpRestrictionMaxConcurrentRequests" value="20" />

Αλλαγή DynamicIpRestrictionDenyByConcurrentRequests στην τιμή true για να ενεργοποιήσετε αυτήν την προστασία.

## <a name="restricting-rate-of-access"></a>Περιορισμός επιτόκιο της access

Οι ρυθμίσεις που ρυθμίσετε αυτή η συμπεριφορά είναι:

    <Setting name="DynamicIpRestrictionDenyByRequestRate" value="true" />
    <Setting name="DynamicIpRestrictionMaxRequests" value="100" />
    <Setting name="DynamicIpRestrictionRequestIntervalInMilliseconds" value="2000" />

## <a name="configuring-the-response-to-a-denied-request"></a>Ρύθμιση παραμέτρων την απάντηση σε ένα αίτημα δεν επιτρέπεται η

Η παρακάτω ρύθμιση ρυθμίζει την απάντηση σε ένα αίτημα δεν επιτρέπεται η:

    <Setting name="DynamicIpRestrictionDenyAction" value="AbortRequest" />
Ανατρέξτε στην τεκμηρίωση για την ασφάλεια δυναμικής IP στις υπηρεσίες IIS για άλλες υποστηριζόμενες τιμές.

## <a name="operations-for-configuring-service-certificates"></a>Λειτουργίες για τη ρύθμιση παραμέτρων υπηρεσιών πιστοποιητικών
Αυτό το θέμα είναι μόνο για αναφορά. Ακολουθήστε τα βήματα ρύθμισης παραμέτρων που περιγράφονται σε:

* Ρύθμιση παραμέτρων του πιστοποιητικού SSL
* Ρύθμιση παραμέτρων πιστοποιητικά προγράμματος-πελάτη

## <a name="create-a-self-signed-certificate"></a>Δημιουργία πιστοποιητικού αυτόματης υπογραφής
Εκτέλεση:

    makecert ^
      -n "CN=myservice.cloudapp.net" ^
      -e MM/DD/YYYY ^
      -r -cy end -sky exchange -eku "1.3.6.1.5.5.7.3.1" ^
      -a sha1 -len 2048 ^
      -sv MySSL.pvk MySSL.cer

Για να προσαρμόσετε:

*    -n με τη διεύθυνση URL της υπηρεσίας. Χαρακτήρες μπαλαντέρ ("CN = * .cloudapp .net") και υποστηρίζονται εναλλακτικές ονόματα ("CN=myservice1.cloudapp.net, CN=myservice2.cloudapp.net").
*    -e με την ημερομηνία λήξης πιστοποιητικού Δημιουργήστε έναν ισχυρό κωδικό πρόσβασης και το καθορίσετε όταν σας ζητηθεί.

## <a name="create-pfx-file-for-self-signed-ssl-certificate"></a>Δημιουργία αρχείου PFX για αυτο-υπογεγραμμένο πιστοποιητικό SSL

Εκτέλεση:

        pvk2pfx -pvk MySSL.pvk -spc MySSL.cer

Πληκτρολογήστε τον κωδικό πρόσβασης και, στη συνέχεια, εξαγωγή πιστοποιητικού με αυτές τις επιλογές:
* Ναι, εξαγωγή του ιδιωτικού κλειδιού
* Εξαγωγή όλων των σύνθετων ιδιοτήτων

## <a name="export-ssl-certificate-from-certificate-store"></a>Εξαγάγετε το πιστοποιητικό SSL από χώρο αποθήκευσης πιστοποιητικών

* Εύρεση πιστοποιητικού
* Κάντε κλικ στην επιλογή Ενέργειες -> όλα εργασίες -> Εξαγωγή...
* Εξαγωγή πιστοποιητικού σε μια. Αρχείο PFX με αυτές τις επιλογές:
    * Ναι, εξαγωγή του ιδιωτικού κλειδιού
    * Εάν είναι δυνατόν συμπεριλάβετε όλα τα πιστοποιητικά στη διαδρομή πιστοποίησης * εξαγωγή όλες οι πρόσθετες ιδιότητες

## <a name="upload-ssl-certificate-to-cloud-service"></a>Αποστείλετε το πιστοποιητικό SSL σε υπηρεσία cloud

Αποστολή πιστοποιητικού με την υπάρχουσα ή που δημιουργούνται. Αρχείο PFX με το ζεύγος κλειδιών SSL:

* Πληκτρολογήστε τον κωδικό πρόσβασης προστασία τις πληροφορίες του ιδιωτικού κλειδιού

## <a name="update-ssl-certificate-in-service-configuration-file"></a>Ενημέρωση πιστοποιητικού SSL στο αρχείο ρύθμισης παραμέτρων υπηρεσίας

Ενημερώστε την τιμή αποτύπωση η παρακάτω ρύθμιση στο αρχείο ρύθμισης παραμέτρων της υπηρεσίας με την αποτύπωση του πιστοποιητικού που έχουν αποσταλεί με την υπηρεσία cloud:

    <Certificate name="SSL" thumbprint="" thumbprintAlgorithm="sha1" />

## <a name="import-ssl-certification-authority"></a>Αρχή έκδοσης πιστοποιητικών SSL εισαγωγής

Ακολουθήστε αυτά τα βήματα σε όλες τις λογαριασμού/υπολογιστή που θα επικοινωνήσει με την υπηρεσία:

* Κάντε διπλό κλικ το. Προαιρετικό αρχείο στην Εξερεύνηση των Windows
* Στο παράθυρο διαλόγου πιστοποιητικό, κάντε κλικ στην επιλογή Εγκατάσταση πιστοποιητικού...
* Εισαγωγή πιστοποιητικού στο χώρο αποθήκευσης αξιόπιστες αρχές έκδοσης πιστοποιητικών ρίζας

## <a name="turn-off-client-certificate-based-authentication"></a>Απενεργοποιήστε την επιλογή έλεγχο ταυτότητας βάσει πιστοποιητικού προγράμματος-πελάτη

Υποστηρίζεται μόνο προγράμματος-πελάτη πιστοποιητικό ελέγχου ταυτότητας που βασίζεται και απενεργοποίηση του επιτρέπει για δημόσια πρόσβαση για τα τελικά σημεία υπηρεσίας, εκτός και εάν υπάρχουν άλλοι μηχανισμοί είναι στη θέση (π.χ. Microsoft Azure εικονικού το δίκτυο).

FALSE (ψευδής) στο αρχείο ρύθμισης παραμέτρων της υπηρεσίας για να απενεργοποιήσετε τη δυνατότητα να αλλάξετε αυτές τις ρυθμίσεις:

    <Setting name="SetupWebAppForClientCertificates" value="false" />
    <Setting name="SetupWebserverForClientCertificates" value="false" />

Στη συνέχεια, αντιγράψτε την αποτύπωση ίδιο με το πιστοποιητικό SSL στη ρύθμιση πιστοποιητικό CA:

    <Certificate name="CA" thumbprint="" thumbprintAlgorithm="sha1" />

## <a name="create-a-self-signed-certification-authority"></a>Δημιουργήστε μια αρχή έκδοσης πιστοποιητικών αυτόματης υπογραφής
Εκτελέστε τα ακόλουθα βήματα για να δημιουργήσετε ένα αυτο-υπογεγραμμένο πιστοποιητικό για να λειτουργήσει ως μια αρχή έκδοσης πιστοποιητικών:

    makecert ^
    -n "CN=MyCA" ^
    -e MM/DD/YYYY ^
     -r -cy authority -h 1 ^
     -a sha1 -len 2048 ^
      -sr localmachine -ss my ^
      MyCA.cer

Για να το προσαρμόσετε

*    -e με την ημερομηνία λήξης έκδοσης πιστοποιητικών


## <a name="find-ca-public-key"></a>Εύρεση CA δημόσιο κλειδί

Όλα τα πιστοποιητικά προγράμματος-πελάτη πρέπει να έχουν εκδοθεί από μια αρχή έκδοσης πιστοποιητικών θεωρείται αξιόπιστο από την υπηρεσία. Βρείτε το δημόσιο κλειδί στην αρχή έκδοσης πιστοποιητικών που εξέδωσε το πρόγραμμα-πελάτη πιστοποιητικά που πρόκειται να χρησιμοποιηθεί για τον έλεγχο ταυτότητας για να αποστείλετε την υπηρεσία cloud.

Εάν το αρχείο με το δημόσιο κλειδί δεν είναι διαθέσιμη, εξαγάγετε από το χώρο αποθήκευσης πιστοποιητικών:

* Εύρεση πιστοποιητικού
    * Αναζήτηση για ένα πιστοποιητικό προγράμματος-πελάτη που έχει εκδοθεί από την ίδια αρχή έκδοσης πιστοποιητικών
* Κάντε διπλό κλικ στο πιστοποιητικό.
* Επιλέξτε την καρτέλα διαδρομή πιστοποίησης στο παράθυρο διαλόγου πιστοποιητικό.
* Κάντε διπλό κλικ στην εγγραφή CA στη διαδρομή.
* Λήψη σημειώσεων από τις ιδιότητες του πιστοποιητικού.
* Κλείστε το παράθυρο διαλόγου **πιστοποιητικό** .
* Εύρεση πιστοποιητικού
    * Αναζήτηση για την αρχή έκδοσης Πιστοποιητικών που αναφέρεται παραπάνω.
* Κάντε κλικ στην επιλογή Ενέργειες -> όλα εργασίες -> Εξαγωγή...
* Εξαγωγή πιστοποιητικού σε μια. Προαιρετικό με αυτές τις επιλογές:
    * **Όχι, εξαγωγή το ιδιωτικό κλειδί**
    * Συμπεριλάβετε όλα τα πιστοποιητικά στη διαδρομή πιστοποίησης εάν είναι δυνατό.
    * Εξαγωγή όλων των σύνθετων ιδιοτήτων.

## <a name="upload-ca-certificate-to-cloud-service"></a>Αποστείλετε το πιστοποιητικό CA σε υπηρεσία cloud

Αποστολή πιστοποιητικού με την υπάρχουσα ή που δημιουργούνται. Προαιρετικό αρχείο με το δημόσιο κλειδί αρχή έκδοσης Πιστοποιητικών.

## <a name="update-ca-certificate-in-service-configuration-file"></a>Πιστοποιητικό CA ενημέρωσης στο αρχείο ρύθμισης παραμέτρων υπηρεσίας

Ενημερώστε την τιμή αποτύπωση η παρακάτω ρύθμιση στο αρχείο ρύθμισης παραμέτρων της υπηρεσίας με την αποτύπωση του πιστοποιητικού που έχουν αποσταλεί με την υπηρεσία cloud:

    <Certificate name="CA" thumbprint="" thumbprintAlgorithm="sha1" />

Ενημερώστε την τιμή της παρακάτω ρύθμισης με την ίδια αποτύπωση:

    <Setting name="AdditionalTrustedRootCertificationAuthorities" value="" />

## <a name="issue-client-certificates"></a>Έκδοση πιστοποιητικών προγράμματος-πελάτη

Κάθε άτομο που έχουν το δικαίωμα πρόσβασης στην υπηρεσία θα πρέπει να έχετε προγράμματος-πελάτη πιστοποιητικό για his/hers αποκλειστική χρήση και πρέπει να επιλέξετε his/hers κάτοχος ισχυρό κωδικό πρόσβασης για να προστατεύσετε το ιδιωτικό κλειδί. 

Ακολουθήστε τα παρακάτω βήματα πρέπει να εκτελεστούν στον ίδιο υπολογιστή όπου το αυτο-υπογεγραμμένο πιστοποιητικό CA ήταν που δημιουργούνται και αποθηκεύονται:

    makecert ^
      -n "CN=My ID" ^
      -e MM/DD/YYYY ^
      -cy end -sky exchange -eku "1.3.6.1.5.5.7.3.2" ^
      -a sha1 -len 2048 ^
      -in "MyCA" -ir localmachine -is my ^
      -sv MyID.pvk MyID.cer

Προσαρμογή:

* -n με Αναγνωριστικό για στον υπολογιστή-πελάτη που θα υποβληθούν σε έλεγχο ταυτότητας με αυτό το πιστοποιητικό
* -e με την ημερομηνία λήξης του πιστοποιητικού
* MyID.pvk και MyID.cer με μοναδικά ονόματα αρχείων για αυτό το πιστοποιητικό προγράμματος-πελάτη

Αυτή η εντολή θα γίνεται ερώτηση για έναν κωδικό πρόσβασης για να δημιουργηθούν και, στη συνέχεια, χρησιμοποιείται μόνο μία φορά. Χρησιμοποιήστε έναν ισχυρό κωδικό πρόσβασης.

## <a name="create-pfx-files-for-client-certificates"></a>Δημιουργία αρχείων PFX για το πρόγραμμα-πελάτη πιστοποιητικών

Για κάθε πιστοποιητικό προγράμματος-πελάτη που έχει δημιουργηθεί, εκτελέστε:

    pvk2pfx -pvk MyID.pvk -spc MyID.cer

Προσαρμογή:

    MyID.pvk and MyID.cer with the filename for the client certificate

Πληκτρολογήστε τον κωδικό πρόσβασης και, στη συνέχεια, εξαγωγή πιστοποιητικού με αυτές τις επιλογές:

* Ναι, εξαγωγή του ιδιωτικού κλειδιού
* Εξαγωγή όλων των σύνθετων ιδιοτήτων
* Το άτομο στο οποίο γίνεται εκδίδεται αυτό το πιστοποιητικό πρέπει να επιλέξετε τον κωδικό πρόσβασης εξαγωγής

## <a name="import-client-certificate"></a>Εισαγωγή πιστοποιητικού προγράμματος-πελάτη

Κάθε άτομο για τους οποίους έχει εκδοθεί ένα πιστοποιητικό προγράμματος-πελάτη θα πρέπει να εισαγάγετε το ζεύγος κλειδιών στο τις μηχανές διενέργεια θα χρησιμοποιήσετε για να επικοινωνήσετε με την υπηρεσία:

* Κάντε διπλό κλικ το. Αρχείο PFX στην Εξερεύνηση των Windows
* Εισαγωγή σε το προσωπικό χώρο αποθήκευσης πιστοποιητικών με τουλάχιστον αυτήν την επιλογή:
    * Συμπερίληψη όλων των σύνθετων ιδιοτήτων επιλεγμένο

## <a name="copy-client-certificate-thumbprints"></a>Αντιγραφή thumbprints πιστοποιητικό προγράμματος-πελάτη
Κάθε άτομο για τους οποίους έχει εκδοθεί ένα πιστοποιητικό προγράμματος-πελάτη πρέπει να ακολουθήσετε αυτά τα βήματα για να λάβετε την αποτύπωση της his/hers πιστοποιητικό το οποίο θα προστεθεί στο αρχείο παραμέτρων υπηρεσίας:
* Εκτέλεση certmgr.exe
* Επιλέξτε την καρτέλα προσωπικό
* Κάντε διπλό κλικ το πιστοποιητικό προγράμματος-πελάτη μπορούν να χρησιμοποιηθούν για έλεγχο ταυτότητας
* Στο παράθυρο διαλόγου πιστοποιητικό που ανοίγει, επιλέξτε την καρτέλα λεπτομερειών
* Βεβαιωθείτε ότι η εμφάνιση εμφανίζει όλους
* Επιλέξτε το πεδίο που ονομάζεται αποτύπωση στη λίστα
* Αντιγράψτε την τιμή από την αποτύπωση **Διαγραφή μη ορατές χαρακτήρες Unicode μπροστά από το πρώτο ψηφίο** διαγραφή όλα τα κενά διαστήματα

## <a name="configure-allowed-clients-in-the-service-configuration-file"></a>Ρύθμιση παραμέτρων επιτρεπόμενων προγράμματα-πελάτες στο αρχείο ρύθμισης παραμέτρων της υπηρεσίας

Ενημερώστε την τιμή του η παρακάτω ρύθμιση στο αρχείο ρύθμισης παραμέτρων της υπηρεσίας με μια λίστα με τα thumbprints από τα πιστοποιητικά προγράμματος-πελάτη επιτρέπεται η πρόσβαση στην υπηρεσία διαχωρισμένες με κόμματα:

    <Setting name="AllowedClientCertificateThumbprints" value="" />

## <a name="configure-client-certificate-revocation-check"></a>Ρύθμιση παραμέτρων του προγράμματος-πελάτη έλεγχος ανάκλησης πιστοποιητικού

Η προεπιλεγμένη ρύθμιση δεν επικοινωνήστε με την αρχή έκδοσης πιστοποιητικών για την κατάσταση ανάκλησης πιστοποιητικού προγράμματος-πελάτη. Για να ενεργοποιήσετε τους ελέγχους, εάν η αρχή έκδοσης πιστοποιητικών που εξέδωσε το πρόγραμμα-πελάτη πιστοποιητικά υποστηρίζει οι έλεγχοι, αλλάξτε την παρακάτω ρύθμιση με μία από τις τιμές που προσδιορίζονται στην απαρίθμηση X509RevocationMode:

    <Setting name="ClientCertificateRevocationCheck" value="NoCheck" />

## <a name="create-pfx-file-for-self-signed-encryption-certificates"></a>Δημιουργία αρχείου PFX για πιστοποιητικά αυτο-υπογεγραμμένο κρυπτογράφησης

Για ένα πιστοποιητικό κρυπτογράφησης, εκτελέστε:

    pvk2pfx -pvk MyID.pvk -spc MyID.cer

Προσαρμογή:

    MyID.pvk and MyID.cer with the filename for the encryption certificate

Πληκτρολογήστε τον κωδικό πρόσβασης και, στη συνέχεια, εξαγωγή πιστοποιητικού με αυτές τις επιλογές:
*    Ναι, εξαγωγή του ιδιωτικού κλειδιού
*    Εξαγωγή όλων των σύνθετων ιδιοτήτων
*    Κατά την αποστολή το πιστοποιητικό για την υπηρεσία cloud, θα χρειαστείτε τον κωδικό πρόσβασης.

## <a name="export-encryption-certificate-from-certificate-store"></a>Εξαγωγή πιστοποιητικού κρυπτογράφησης από το χώρο αποθήκευσης πιστοποιητικών

*    Εύρεση πιστοποιητικού
*    Κάντε κλικ στην επιλογή Ενέργειες -> όλα εργασίες -> Εξαγωγή...
*    Εξαγωγή πιστοποιητικού σε μια. Αρχείο PFX με αυτές τις επιλογές: 
  *    Ναι, εξαγωγή του ιδιωτικού κλειδιού
  *    Συμπεριλάβετε όλα τα πιστοποιητικά στη διαδρομή πιστοποίησης, εάν είναι δυνατό 
*    Εξαγωγή όλων των σύνθετων ιδιοτήτων

## <a name="upload-encryption-certificate-to-cloud-service"></a>Αποστολή πιστοποιητικού κρυπτογράφησης υπηρεσία στο cloud

Αποστολή πιστοποιητικού με την υπάρχουσα ή που δημιουργούνται. Αρχείο PFX με το ζεύγος των κλειδιών κρυπτογράφησης:

* Πληκτρολογήστε τον κωδικό πρόσβασης προστασία τις πληροφορίες του ιδιωτικού κλειδιού

## <a name="update-encryption-certificate-in-service-configuration-file"></a>Ενημέρωση του πιστοποιητικού κρυπτογράφησης του αρχείου ρύθμισης παραμέτρων υπηρεσίας

Ενημερώστε την αποτύπωση τιμή από τις παρακάτω ρυθμίσεις στο αρχείο ρύθμισης παραμέτρων της υπηρεσίας με την αποτύπωση του πιστοποιητικού που έχουν αποσταλεί με την υπηρεσία cloud:

    <Certificate name="DataEncryptionPrimary" thumbprint="" thumbprintAlgorithm="sha1" />

## <a name="common-certificate-operations"></a>Κοινές λειτουργίες πιστοποιητικού

* Ρύθμιση παραμέτρων του πιστοποιητικού SSL
* Ρύθμιση παραμέτρων πιστοποιητικά προγράμματος-πελάτη

## <a name="find-certificate"></a>Εύρεση πιστοποιητικού

Ακολουθήστε τα παρακάτω βήματα:

1. Εκτελέστε το mmc.exe.
2. Αρχείο -> Προσθήκη/Κατάργηση συμπληρωματικού...
3. Επιλέξτε **πιστοποιητικά**.
4. Κάντε κλικ στην επιλογή **Προσθήκη**.
5. Επιλέξτε τη θέση αποθήκευσης πιστοποιητικού.
6. Κάντε κλικ στο κουμπί **Τέλος**.
7. Κάντε κλικ στο **κουμπί OK**.
8. Ανάπτυξη **πιστοποιητικά**.
9. Αναπτύξτε τον κόμβο του χώρου αποθήκευσης πιστοποιητικού.
10. Αναπτύξτε τον κόμβο θυγατρικό πιστοποιητικού.
11. Επιλέξτε ένα πιστοποιητικό στη λίστα.

## <a name="export-certificate"></a>Εξαγωγή πιστοποιητικού
Στον **"Οδηγό εξαγωγής πιστοποιητικού"**:

1. Κάντε κλικ στο κουμπί **Επόμενο**.
2. Επιλέξτε **Ναι**, στη συνέχεια, **Εξαγωγή του ιδιωτικού κλειδιού**.
3. Κάντε κλικ στο κουμπί **Επόμενο**.
4. Επιλέξτε το επιθυμητό αποτέλεσμα μορφή αρχείου.
5. Ελέγξτε τις επιλογές που θέλετε.
6. Ελέγξτε **τον κωδικό πρόσβασης**.
7. Πληκτρολογήστε έναν ισχυρό κωδικό πρόσβασης και επιβεβαιώστε τον.
8. Κάντε κλικ στο κουμπί **Επόμενο**.
9. Πληκτρολογήστε ή αναζητήστε ένα όνομα αρχείου πού μπορείτε να αποθηκεύσετε το πιστοποιητικό (χρησιμοποιήστε μια. PFX επέκταση).
10. Κάντε κλικ στο κουμπί **Επόμενο**.
11. Κάντε κλικ στο κουμπί **Τέλος**.
12. Κάντε κλικ στο **κουμπί OK**.

## <a name="import-certificate"></a>Εισαγωγή πιστοποιητικού

Στον Οδηγό εισαγωγής πιστοποιητικού:

1. Επιλέξτε τη θέση αποθήκευσης.

    * Επιλέξτε **Του τρέχοντος χρήστη** εάν μόνο διεργασίες που εκτελούνται από τον τρέχοντα χρήστη θα έχουν πρόσβαση στην υπηρεσία
    * Επιλέξτε **Τοπικό υπολογιστή** , εάν άλλες διεργασίες σε αυτόν τον υπολογιστή θα έχουν πρόσβαση στην υπηρεσία
2. Κάντε κλικ στο κουμπί **Επόμενο**.
3. Εάν η εισαγωγή από αρχείο, επιβεβαιώστε τη διαδρομή του αρχείου.
4. Εάν εισαγάγετε ένα. Αρχείο PFX:
    1.     Πληκτρολογήστε τον κωδικό πρόσβασης προστασία το ιδιωτικό κλειδί
    2.     Ορισμός επιλογών εισαγωγής
5.     Επιλέξτε πιστοποιητικά "Θέση" στο παρακάτω χώρο αποθήκευσης
6.     Κάντε κλικ στο κουμπί **Αναζήτηση**.
7.     Επιλέξτε το χώρο αποθήκευσης που θέλετε.
8.     Κάντε κλικ στο κουμπί **Τέλος**.
       
    * Εάν έχει επιλέξει το χώρο αποθήκευσης αξιόπιστη αρχή έκδοσης πιστοποιητικών ρίζας, κάντε κλικ στο κουμπί **Ναι**.
9.     Κάντε κλικ στο **κουμπί OK** σε όλα τα παράθυρα διαλόγου.

## <a name="upload-certificate"></a>Αποστολή πιστοποιητικού

Στην [πύλη του Azure](https://portal.azure.com/)

1. Επιλέξτε **τις υπηρεσίες Cloud**.
2. Επιλέξτε την υπηρεσία cloud.
3. Στην επάνω γραμμή μενού, κάντε κλικ στην επιλογή **πιστοποιητικά**.
4. Στην κάτω γραμμή, κάντε κλικ στην επιλογή **Αποστολή**.
5. Επιλέξτε το αρχείο πιστοποιητικού.
6. Εάν πρόκειται για μια. PFX αρχείου, πληκτρολογήστε τον κωδικό πρόσβασης για το ιδιωτικό κλειδί.
7. Μόλις ολοκληρωθεί, αντιγράψτε την αποτύπωση πιστοποιητικού από τη νέα εγγραφή στη λίστα.

## <a name="other-security-considerations"></a>Άλλα ζητήματα ασφαλείας
 
Τις ρυθμίσεις SSL που περιγράφονται σε αυτό το έγγραφο να κρυπτογραφήσετε επικοινωνία μεταξύ της υπηρεσίας και τα προγράμματα-πελάτες όταν χρησιμοποιείται το τελικό σημείο HTTPS. Αυτό είναι σημαντικό από διαπιστευτήρια για την πρόσβαση στη βάση δεδομένων και άλλα δυνητικά ευαίσθητες πληροφορίες που περιέχονται στην επικοινωνία. Ωστόσο, σημειώστε ότι η υπηρεσία εξακολουθεί να εμφανίζεται εσωτερικής κατάστασης, συμπεριλαμβανομένων των διαπιστευτηρίων, το εσωτερικό πίνακες στη βάση δεδομένων Microsoft Azure SQL που έχετε δώσει για το χώρο αποθήκευσης μετα-δεδομένων στη συνδρομή σας στο Microsoft Azure. Αυτήν τη βάση δεδομένων έχει οριστεί ως μέρος του η παρακάτω ρύθμιση στο αρχείο παραμέτρων υπηρεσίας (. Αρχείο CSCFG): 

    <Setting name="ElasticScaleMetadata" value="Server=…" />

Διαπιστευτήρια που είναι αποθηκευμένα σε αυτήν τη βάση δεδομένων είναι κρυπτογραφημένα. Ωστόσο, ως βέλτιστη πρακτική, βεβαιωθείτε ότι διατηρούνται ενημερωμένα web και εργαζόμενου τους ρόλους των σας αναπτύξεις υπηρεσίας και ασφαλή καθώς και τα δύο έχουν πρόσβαση στη βάση δεδομένων μετα-δεδομένων και το πιστοποιητικό που χρησιμοποιείται για την κρυπτογράφηση και αποκρυπτογράφηση των αποθηκευμένων διαπιστευτηρίων. 

[AZURE.INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]
