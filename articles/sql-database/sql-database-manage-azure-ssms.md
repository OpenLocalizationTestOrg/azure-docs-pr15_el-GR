<properties 
    pageTitle="Διαχείριση βάσης δεδομένων SQL με SSMS | Microsoft Azure" 
    description="Μάθετε πώς να χρησιμοποιείτε το SQL Server Management Studio για να διαχειριστείτε τους διακομιστές βάσης δεδομένων SQL και των βάσεων δεδομένων." 
    services="sql-database" 
    documentationCenter=".net" 
    authors="stevestein" 
    manager="jhubbard" 
    editor="tysonn"/>

<tags 
    ms.service="sql-database" 
    ms.workload="data-management" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="09/29/2016" 
    ms.author="sstein"/>


# <a name="managing-azure-sql-database-using-sql-server-management-studio"></a>Διαχείριση βάσης δεδομένων SQL Azure με SQL Server Management Studio 


> [AZURE.SELECTOR]
- [Πύλη του Azure](sql-database-manage-portal.md)
- [SSMS](sql-database-manage-azure-ssms.md)
- [PowerShell](sql-database-manage-powershell.md)

Μπορείτε να χρησιμοποιήσετε το SQL Server Management Studio (SSMS) για να διαχειριστείτε τους διακομιστές βάσης δεδομένων SQL Azure και των βάσεων δεδομένων. Αυτό το θέμα σάς καθοδηγεί σε κοινές εργασίες με SSMS. Θα πρέπει να έχετε ήδη ένα διακομιστή και τη βάση δεδομένων που δημιουργήθηκε σε βάση δεδομένων SQL Azure, πριν να ξεκινήσετε. Ανατρέξτε στο θέμα [Δημιουργία του πρώτου βάση δεδομένων SQL Azure](sql-database-get-started.md) και [σύνδεση και ερωτήματος με χρήση SSMS](sql-database-connect-query-ssms.md) για περισσότερες πληροφορίες.

Συνιστάται να χρησιμοποιείτε την πιο πρόσφατη έκδοση του SSMS όποτε εργάζεστε με βάση δεδομένων SQL Azure. 

> [AZURE.IMPORTANT] Χρησιμοποιείτε πάντα την πιο πρόσφατη έκδοση του SSMS, επειδή το συνεχή είναι βελτιωμένη ώστε να λειτουργεί με τις πιο πρόσφατες ενημερώσεις Azure και βάση δεδομένων SQL. Για να λάβετε την πιο πρόσφατη έκδοση, ανατρέξτε στο θέμα [Λήψη SQL Server Management Studio](https://msdn.microsoft.com/library/mt238290.aspx).



## <a name="create-and-manage-azure-sql-databases"></a>Δημιουργία και διαχείριση βάσεων δεδομένων Azure SQL

Ενώ είστε συνδεδεμένοι με την **κύρια** βάση δεδομένων, μπορείτε να δημιουργήσετε βάσεις δεδομένων στο διακομιστή και να τροποποιήσετε ή να απορρίψετε τις υπάρχουσες βάσεις δεδομένων. Ακολουθήστε τα παρακάτω βήματα περιγράφουν πώς μπορείτε να εκτελέσετε πολλές κοινές εργασίες διαχείρισης βάσης δεδομένων μέσω Management Studio. Για να πραγματοποιήσετε αυτές τις εργασίες, βεβαιωθείτε ότι είστε συνδεδεμένοι με την **κύρια** βάση δεδομένων με τη σύνδεση κεφαλαίου επιπέδου διακομιστή που δημιουργήσατε κατά τη ρύθμιση του διακομιστή σας.

Για να ανοίξετε ένα παράθυρο του ερωτήματος στο Management Studio, ανοίξτε το φάκελο βάσεις δεδομένων, αναπτύξτε το φάκελο **Βάσεων δεδομένων συστήματος** , κάντε δεξί κλικ στην **κύρια**και, στη συνέχεια, κάντε κλικ στην επιλογή **Νέο ερώτημα**.

-   Χρησιμοποιήστε την πρόταση **ΔΗΜΙΟΥΡΓΊΑ βάσης ΔΕΔΟΜΈΝΩΝ** για να δημιουργήσετε μια βάση δεδομένων. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [ΔΗΜΙΟΥΡΓΊΑ βάσης ΔΕΔΟΜΈΝΩΝ (βάση δεδομένων SQL)](https://msdn.microsoft.com/library/dn268335.aspx). Η ακόλουθη πρόταση δημιουργεί μια βάση δεδομένων με το όνομα **myTestDB** και καθορίζει ότι είναι Standard S0 Edition βάσης δεδομένων με ένα προεπιλεγμένο μέγιστο μέγεθος των 250 GB.

        CREATE DATABASE myTestDB
        (EDITION='Standard',
         SERVICE_OBJECTIVE='S0');

Κάντε κλικ στο κουμπί **Εκτέλεση** για να εκτελέσετε το ερώτημα.

-   Χρησιμοποιήστε την πρόταση **ΤΡΟΠΟΠΟΊΗΣΗ βάσης ΔΕΔΟΜΈΝΩΝ** για να τροποποιήσετε μια υπάρχουσα βάση δεδομένων, για παράδειγμα, εάν θέλετε να αλλάξετε το όνομα και την έκδοση της βάσης δεδομένων. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [ΤΡΟΠΟΠΟΊΗΣΗ βάσης ΔΕΔΟΜΈΝΩΝ (βάση δεδομένων SQL)](https://msdn.microsoft.com/library/ms174269.aspx). Η ακόλουθη πρόταση τροποποιεί τη βάση δεδομένων που δημιουργήσατε στο προηγούμενο βήμα για να αλλάξετε edition σε τυπική S1.

        ALTER DATABASE myTestDB
        MODIFY
        (SERVICE_OBJECTIVE='S1');

-   Χρησιμοποιήστε **Τη βάση ΔΕΔΟΜΈΝΩΝ ΑΠΌΘΕΣΗ** πρόταση για να διαγράψετε μια υπάρχουσα βάση δεδομένων. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [ΑΠΌΡΡΙΨΗ βάσης ΔΕΔΟΜΈΝΩΝ (βάση δεδομένων SQL)](https://msdn.microsoft.com/library/ms178613.aspx). Η ακόλουθη πρόταση διαγράφει την **myTestDB** , αλλά δεν αποθέστε το τώρα επειδή θα μπορείτε να το χρησιμοποιήσετε για να δημιουργήσετε συνδέσεις στο επόμενο βήμα.

        DROP DATABASE myTestBase;

-   Η προβολή **sys.databases** που μπορείτε να χρησιμοποιήσετε για να προβάλετε λεπτομέρειες σχετικά με όλες τις βάσεις δεδομένων έχει την κύρια βάση δεδομένων. Για να προβάλετε όλες τις υπάρχουσες βάσεις δεδομένων, εκτελέστε την ακόλουθη δήλωση:

        SELECT * FROM sys.databases;

-   Σε βάση δεδομένων SQL, τη δήλωση **ΧΡΉΣΗΣ** δεν υποστηρίζεται για την εναλλαγή μεταξύ των βάσεων δεδομένων. Αντί για αυτό, πρέπει να δημιουργήσετε μια σύνδεση απευθείας με τη βάση δεδομένων προορισμού.

>[AZURE.NOTE] Πολλές από τις προτάσεις Transact-SQL που Δημιουργία ή τροποποίηση μιας βάσης δεδομένων πρέπει να εκτελεστούν εντός δέσμης τις δικές τους και δεν μπορεί να είναι ομαδοποιημένα με άλλες προτάσεις Transact-SQL. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα τις πληροφορίες του συγκεκριμένου πρόταση.

## <a name="create-and-manage-logins"></a>Δημιουργία και διαχείριση συνδέσεων

Η **κύρια** βάση δεδομένων περιέχει συνδέσεις και ποιες συνδέσεις έχετε δικαιώματα για να δημιουργήσετε βάσεις δεδομένων ή άλλες συνδέσεις. Διαχείριση συνδέσεων με σύνδεση με την **κύρια** βάση δεδομένων με login κεφαλαίου επιπέδου διακομιστή που δημιουργήσατε κατά τη ρύθμιση του διακομιστή σας. Μπορείτε να χρησιμοποιήσετε τις προτάσεις **ΔΗΜΙΟΥΡΓΊΑ ΣΎΝΔΕΣΗΣ**, **ΤΡΟΠΟΠΟΊΗΣΗ ΣΎΝΔΕΣΗΣ**ή **ΑΠΌΡΡΙΨΗ ΣΎΝΔΕΣΗΣ** για την εκτέλεση ερωτημάτων σε σχέση με την κύρια βάση δεδομένων που διαχειρίζεται συνδέσεις σε ολόκληρο το διακομιστή. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Διαχείριση βάσεων δεδομένων και συνδέσεις σε βάση δεδομένων SQL](http://msdn.microsoft.com/library/azure/ee336235.aspx). 


-   Χρησιμοποιήστε την πρόταση **ΔΗΜΙΟΥΡΓΊΑ ΣΎΝΔΕΣΗΣ** για να δημιουργήσετε μια σύνδεση επιπέδου διακομιστή. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [ΔΗΜΙΟΥΡΓΊΑ ΣΎΝΔΕΣΗΣ (βάση δεδομένων SQL)](https://msdn.microsoft.com/library/ms189751.aspx). Η ακόλουθη πρόταση δημιουργεί μια σύνδεση που ονομάζεται **login1**. Αντικατάσταση **κωδικού πρόσβασης1** με τον κωδικό πρόσβασης της επιλογής σας.

        CREATE LOGIN login1 WITH password='password1';

-   Χρησιμοποιήστε την πρόταση **CREATE USER** για να εκχωρήσετε δικαιώματα σε επίπεδο βάσης δεδομένων. Πρέπει να δημιουργηθούν όλες τις συνδέσεις στην **κύρια** βάση δεδομένων. Για μια σύνδεση για να συνδεθείτε με μια διαφορετική βάση δεδομένων, πρέπει να εκχωρήσετε το δικαιωμάτων επιπέδου βάσης δεδομένων χρησιμοποιώντας την πρόταση **CREATE USER** στη συγκεκριμένη βάση δεδομένων. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [ΔΗΜΙΟΥΡΓΊΑ ΧΡΉΣΤΗ (βάση δεδομένων SQL)](https://msdn.microsoft.com/library/ms173463.aspx). 

-   Για να εκχωρήσετε δικαιώματα login1 σε μια βάση δεδομένων που ονομάζεται **myTestDB**, ολοκληρώστε τα ακόλουθα βήματα:

 1.  Για να ανανεώσετε Explorer αντικειμένου για να προβάλετε τη βάση δεδομένων **myTestDB** που έχετε δημιουργήσει, κάντε δεξιό κλικ στο όνομα του διακομιστή στο αντικείμενο Explorer και, στη συνέχεια, κάντε κλικ στην επιλογή **Ανανέωση**.  

     Εάν έχετε κλείσει το τη σύνδεση, μπορείτε να συνδεθείτε ξανά, επιλέγοντας **Σύνδεση Explorer αντικειμένου** στο μενού αρχείο.

 2. Κάντε δεξί κλικ **myTestDB** βάσης δεδομένων και επιλέξτε **Νέο ερώτημα**.

    3.  Εκτελέστε την ακόλουθη δήλωση στη βάση myTestDB για να δημιουργήσετε ένα χρήστη βάσης δεδομένων με το όνομα **login1User** που αντιστοιχεί του επιπέδου διακομιστή login **login1**.

            CREATE USER login1User FROM LOGIN login1;

-   Χρησιμοποιήστε το **sp\_addrolemember** αποθηκευμένη διαδικασία για να εκχωρήσετε το λογαριασμό χρήστη του κατάλληλου επιπέδου δικαιωμάτων στη βάση δεδομένων. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [sp_addrolemember (Transact-SQL)](http://msdn.microsoft.com/library/ms187750.aspx). Η ακόλουθη πρόταση παρέχει **login1User** δικαιώματα μόνο για ανάγνωση στη βάση δεδομένων με την προσθήκη **login1User** για να το **db\_datareader** ρόλο.

        exec sp_addrolemember 'db_datareader', 'login1User';    

-   Χρησιμοποιήστε την πρόταση **ΤΡΟΠΟΠΟΙΉΣΟΥΝ ΣΎΝΔΕΣΗΣ** για να τροποποιήσετε μια υπάρχουσα σύνδεση, για παράδειγμα, εάν θέλετε να αλλάξετε τον κωδικό πρόσβασης για τη σύνδεση. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [ΑΛΛΑΓΉ ΣΎΝΔΕΣΗΣ (βάση δεδομένων SQL)](https://msdn.microsoft.com/library/ms189828.aspx). Η πρόταση **ΤΡΟΠΟΠΟΙΉΣΟΥΝ ΣΎΝΔΕΣΗΣ** πρέπει να εκτελείται σε σχέση με την **κύρια** βάση δεδομένων. Επιστρέψτε στο παράθυρο ερωτήματος που είναι συνδεδεμένα σε αυτήν τη βάση δεδομένων. Η ακόλουθη πρόταση τροποποιεί login **login1** για να επαναφέρετε τον κωδικό πρόσβασης. Αντικαταστήστε **Νέος κωδικός πρόσβασης** με τον κωδικό πρόσβασης των επιλογών και των **Παλιός κωδικός πρόσβασης** με τον τρέχοντα κωδικό πρόσβασης για σύνδεση.

        ALTER LOGIN login1
        WITH PASSWORD = 'newPassword'
        OLD_PASSWORD = 'oldPassword';

-   Χρησιμοποιήστε **LOGIN ΑΠΌΘΕΣΗ** πρόταση για να διαγράψετε μια υπάρχουσα σύνδεση. Διαγραφή μιας σύνδεσης στο επίπεδο του διακομιστή διαγράφει επίσης όλοι οι λογαριασμοί χρηστών σχετιζόμενης βάσης δεδομένων. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [ΑΠΌΡΡΙΨΗ βάσης ΔΕΔΟΜΈΝΩΝ (βάση δεδομένων SQL)](https://msdn.microsoft.com/library/ms178613.aspx). Η πρόταση **ΑΠΌΘΕΣΗ ΣΎΝΔΕΣΗΣ** πρέπει να εκτελείται σε σχέση με την **κύρια** βάση δεδομένων. Η πρόταση διαγράφει **login1** login.

        DROP LOGIN login1;

-   Η κύρια βάση δεδομένων έχει το **sys.sql\_συνδέσεις** προβολή που μπορείτε να χρησιμοποιήσετε για να δείτε συνδέσεις. Για να δείτε όλες τις υπάρχουσες συνδέσεις, εκτελέστε την ακόλουθη δήλωση:

        SELECT * FROM sys.sql_logins;

## <a name="monitor-sql-database-using-dynamic-management-views"></a>Παρακολούθηση της βάσης δεδομένων SQL με χρήση δυναμικών προβολών διαχείρισης

Βάση δεδομένων SQL υποστηρίζει πολλές προβολές δυναμική διαχείριση που μπορείτε να χρησιμοποιήσετε για την παρακολούθηση της μια μεμονωμένη βάση δεδομένων. Ακολουθούν μερικά παραδείγματα τον τύπο δεδομένων οθόνη που μπορείτε να ανακτήσετε μέσω αυτές τις προβολές. Για πλήρεις λεπτομέρειες και περισσότερα παραδείγματα χρήσης, ανατρέξτε στο θέμα [Παρακολούθηση της βάσης δεδομένων SQL χρήση δυναμικών προβολών διαχείρισης](https://msdn.microsoft.com/library/azure/ff394114.aspx).

-   Υποβολή ερωτημάτων σε μια προβολή δυναμική διαχείριση απαιτεί δικαιώματα **ΚΑΤΆΣΤΑΣΗ ΠΡΟΒΟΛΉΣ βάσης ΔΕΔΟΜΈΝΩΝ** . Για να εκχωρήσετε το δικαίωμα **ΠΡΟΒΟΛΉΣ ΚΑΤΆΣΤΑΣΗ βάσης ΔΕΔΟΜΈΝΩΝ** σε μια συγκεκριμένη βάση δεδομένων χρήστη, συνδεθείτε με τη βάση δεδομένων και εκτελέστε την ακόλουθη δήλωση σε σχέση με τη βάση δεδομένων:

        GRANT VIEW DATABASE STATE TO login1User;

-   Υπολογισμός με μέγεθος βάσης δεδομένων του **sys.dm\_db\_διαμερίσματα\_στατιστικές** προβολή. Το **sys.dm\_db\_διαμερίσματα\_στατιστικές** προβολή επιστρέφει πληροφορίες σελίδας και μέτρηση γραμμών για κάθε διαμερίσματα της βάσης δεδομένων, το οποίο μπορείτε να χρησιμοποιήσετε για να υπολογίσετε το μέγεθος της βάσης δεδομένων. Το παρακάτω ερώτημα επιστρέφει το μέγεθος της βάσης δεδομένων σας σε megabyte:

        SELECT SUM(reserved_page_count)*8.0/1024
        FROM sys.dm_db_partition_stats;   

-   Χρησιμοποιήστε το **sys.dm\_εκτέλεσης\_συνδέσεις** και **sys.dm\_εκτέλεσης\_περίοδοι λειτουργίας** προβολές για να ανακτήσετε πληροφορίες σχετικά με τις τρέχουσες χρήστη συνδέσεις και εσωτερικές εργασίες που σχετίζονται με τη βάση δεδομένων. Το παρακάτω ερώτημα επιστρέφει πληροφορίες για την τρέχουσα σύνδεση:

        SELECT
            e.connection_id,
            s.session_id,
            s.login_name,
            s.last_request_end_time,
            s.cpu_time
        FROM
            sys.dm_exec_sessions s
            INNER JOIN sys.dm_exec_connections e
              ON s.session_id = e.session_id;

-   Χρησιμοποιήστε το **sys.dm\_εκτέλεσης\_ερωτήματος\_στατιστικές** προβολή για να ανακτήσετε στατιστικά στοιχεία επιδόσεων συγκεντρωτικών αποτελεσμάτων για προγράμματα του ερωτήματος στο cache. Το παρακάτω ερώτημα επιστρέφει πληροφορίες σχετικά με τα πιο δημοφιλή ερωτήματα πέντε κατάταξης με μέσος χρόνος CPU.

        SELECT TOP 5 query_stats.query_hash AS "Query Hash",
            SUM(query_stats.total_worker_time), SUM(query_stats.execution_count) AS "Avg CPU Time",
            MIN(query_stats.statement_text) AS "Statement Text"
        FROM
            (SELECT QS.*,
            SUBSTRING(ST.text, (QS.statement_start_offset/2) + 1,
            ((CASE statement_end_offset
                WHEN -1 THEN DATALENGTH(ST.text)
                ELSE QS.statement_end_offset END
                    - QS.statement_start_offset)/2) + 1) AS statement_text
             FROM sys.dm_exec_query_stats AS QS
             CROSS APPLY sys.dm_exec_sql_text(QS.sql_handle) as ST) as query_stats
        GROUP BY query_stats.query_hash
        ORDER BY 2 DESC;
 
 
