<properties
    pageTitle="Azure βάσης δεδομένων SQL και επιδόσεων για μία μόνο βάσεις δεδομένων | Microsoft Azure"
    description="Σε αυτό το άρθρο μπορούν να σας βοηθήσουν να καθορίσετε ποια επίπεδο υπηρεσιών για να επιλέξετε για την εφαρμογή σας. Συνιστά επίσης τρόποι για την εφαρμογή σας για να αξιοποιήσετε στο έπακρο βάση δεδομένων SQL Azure με ακρίβεια."
    services="sql-database"
    documentationCenter="na"
    authors="CarlRabeler"
    manager="jhubbard"
    editor="" />


<tags
    ms.service="sql-database"
    ms.devlang="na"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="data-management"
    ms.date="09/13/2016"
    ms.author="carlrab" />

# <a name="azure-sql-database-and-performance-for-single-databases"></a>Azure βάσης δεδομένων SQL και επιδόσεων για μία μόνο βάσεις δεδομένων

Βάση δεδομένων SQL του Azure προσφέρει τρεις [επίπεδα υπηρεσίας](sql-database-service-tiers.md): Basic, τυπική και Premium. Κάθε επίπεδο υπηρεσιών απομονώνει αυστηρά τους πόρους που να χρησιμοποιήσετε τη βάση δεδομένων SQL και εγγυάται προβλέψιμα επιδόσεων για το συγκεκριμένο επίπεδο υπηρεσίας. Σε αυτό το άρθρο, προσφέρουμε καθοδήγηση που μπορεί να σας βοηθήσει να επιλέξετε το επίπεδο υπηρεσιών για την εφαρμογή σας. Αναλύονται επίσης τρόπους που μπορείτε να με ακρίβεια την εφαρμογή σας για να αξιοποιήσετε στο έπακρο βάση δεδομένων SQL Azure.

>[AZURE.NOTE] Σε αυτό το άρθρο εστιάζει στην απόδοση καθοδήγηση για μία μόνο τις βάσεις δεδομένων σε βάση δεδομένων SQL Azure. Για οδηγίες επιδόσεων που σχετίζονται με χώρους συγκέντρωσης ελαστικότητας βάσης δεδομένων, ανατρέξτε [τιμής και απόδοσης ζητήματα για χώρους συγκέντρωσης ελαστικότητας βάσης δεδομένων](sql-database-elastic-pool-guidance.md). Σημείωση, όμως, ότι μπορείτε να πολλές από τις συστάσεις ρύθμισης σε αυτό το άρθρο ισχύουν για βάσεις δεδομένων σε ένα σύνολο ελαστικότητας βάσης δεδομένων και λήψη παρόμοια πλεονεκτήματα επιδόσεων.

Αυτά είναι τα τρία επίπεδα υπηρεσίας βάση δεδομένων SQL Azure που μπορείτε να επιλέξετε από (επιδόσεων μετράται σε βάση δεδομένων μετάδοσης μονάδες ή [DTUs](sql-database-what-is-a-dtu.md):

- **Βασική**. Η βασική υπηρεσία επίπεδο προσφορές καλές επιδόσεις προβλεψιμότητα για κάθε βάση δεδομένων, ώρα σε ώρα. Σε μια βάση δεδομένων βασικές, επαρκείς πόρους υποστήριξης καλές επιδόσεις σε μια μικρή βάση δεδομένων που δεν έχει πολλές ταυτόχρονες αιτήσεις.
- **Τυπική**. Το επίπεδο τυπική υπηρεσιών προσφέρει προβλεψιμότητα βελτιωμένες επιδόσεις και εμφανίζει τη γραμμή για βάσεις δεδομένων που έχουν πολλές ταυτόχρονες αιτήσεις, όπως εφαρμογές ομάδας εργασίας και web. Όταν επιλέγετε μια βάση δεδομένων επίπεδο τυπική υπηρεσίας, μπορείτε να αλλάξετε το μέγεθος εφαρμογής της βάσης δεδομένων που βασίζονται σε προβλέψιμα επιδόσεις, minute επάνω από τα λεπτά.
- **Premium**. Το επίπεδο υπηρεσιών Premium παρέχει προβλέψιμα επιδόσεις, δεύτερη επάνω από τα δευτερόλεπτα, για κάθε βάση δεδομένων Premium. Όταν επιλέγετε το επίπεδο υπηρεσιών Premium, μπορείτε να αλλάξετε το μέγεθος εφαρμογής της βάσης δεδομένων με βάση το φορτίο κορύφωσης για αυτήν τη βάση δεδομένων. Το πρόγραμμα καταργεί περιπτώσεις σε ποια επιδόσεων διακύμανση μπορεί να προκαλέσει μικρές ερωτημάτων για να διαρκέσει περισσότερο από το αναμενόμενο στις λειτουργίες διάκριση αδράνειας. Αυτό το μοντέλο μπορεί να απλοποιήσει σημαντικά τους κύκλους επικύρωσης ανάπτυξης και προϊόντος για τις εφαρμογές που πρέπει να κάνετε ισχυρό προτάσεις σχετικά με κορύφωσης αναγκών πόρων, τη διακύμανση επιδόσεων ή λανθάνων χρόνος ερωτήματος.

Σε κάθε επίπεδο υπηρεσιών, ορίστε το επίπεδο επιδόσεων, ώστε να έχετε την ευελιξία να πληρώσετε μόνο η δυναμικότητα που χρειάζεστε. Μπορείτε να [ρυθμίσετε τη δυναμικότητα](sql-database-scale-up.md), προς τα επάνω ή προς τα κάτω, ως αλλαγές φόρτο εργασίας. Για παράδειγμα, αν το φόρτο εργασίας βάσης δεδομένων είναι υψηλή κατά την περίοδο αγορών επιστροφή στο σχολείο, μπορείτε να αυξήσετε το επίπεδο επιδόσεων για τη βάση δεδομένων για μια ρύθμιση ώρας, Ιουλίου έως Σεπτεμβρίου. Μπορείτε να μειώσετε το πότε λήγει η εποχή σας κορύφωσης. Μπορείτε να ελαχιστοποιήσετε τι πληρώνετε με βελτιστοποίηση το περιβάλλον cloud για να την εποχικότητα της επιχείρησής σας. Αυτό το μοντέλο λειτουργεί επίσης καλά για λογισμικό κύκλους την έκδοση προϊόντος. Μια ομάδα δοκιμής μπορεί να εκχωρήσει χωρητικότητα ενώ το δοκιμή εκτελείται και, στη συνέχεια, αφήστε αυτήν τη δυνατότητα όταν τελειώσουν δοκιμές. Σε ένα μοντέλο αίτηση χωρητικότητα, πληρώνετε για χωρητικότητα που χρειάζεστε, και να αποφύγετε ξοδεύετε σε αποκλειστική πόροι που μπορείτε να χρησιμοποιήσετε σπάνια.

## <a name="why-service-tiers"></a>Γιατί υπηρεσίας βαθμίδες;

Παρόλο που μπορεί να διαφέρουν κάθε φόρτο εργασίας βάσης δεδομένων, είναι ο σκοπός της επίπεδα υπηρεσίας για την παροχή προβλεψιμότητα επιδόσεων σε διάφορα επίπεδα επιδόσεων. Οι πελάτες με τις απαιτήσεις πόρων ευρείας κλίμακας βάσης δεδομένων να εργαστείτε σε ένα περιβάλλον πιο αποκλειστικό υπολογιστών.

### <a name="common-service-tier-use-cases"></a>Κοινές επίπεδο υπηρεσιών περιπτώσεις χρήσης

#### <a name="basic"></a>Βασική

- **Ξεκινάτε μόνο με βάση δεδομένων SQL Azure**. Εφαρμογές που βρίσκονται σε ανάπτυξη συχνά δεν χρειάζεται επίπεδα υψηλών επιδόσεων. Βασική βάσεις δεδομένων είναι ένα ιδανικό περιβάλλον για την ανάπτυξη της βάσης δεδομένων, σε ένα σημείο χαμηλή τιμή.
- **Έχετε μια βάση δεδομένων με ένα μεμονωμένο χρήστη**. Εφαρμογές που συνήθως συσχετίσετε ένα μεμονωμένο χρήστη με μια βάση δεδομένων δεν έχουν υψηλή απαιτήσεις ταυτόχρονης εκτέλεσης και επιδόσεων. Αυτές οι εφαρμογές είναι υποψήφια για το επίπεδο βασικές υπηρεσιών.

#### <a name="standard"></a>Τυπική

- **Η βάση δεδομένων έχει πολλές ταυτόχρονες αιτήσεις**. Εφαρμογές που υπηρεσίας περισσότερα από ένα χρήστη τη φορά συνήθως πρέπει υψηλότερα επίπεδα απόδοσης. Για παράδειγμα, τοποθεσίες Web που λαμβάνει μέτρια κίνηση ή τμημάτων εφαρμογών που απαιτεί περισσότερους πόρους είναι καλή επιλογή για το επίπεδο τυπική υπηρεσιών.

#### <a name="premium"></a>Premium

Οι περισσότερες περιπτώσεις χρήσης επίπεδο υπηρεσίας Premium έχουν ένα ή περισσότερα από τα παρακάτω χαρακτηριστικά:

- Η **Φόρτωση υψηλή κορύφωσης**. Μια εφαρμογή που απαιτεί πολύ CPU, μνήμης ή εισόδου/εξόδου (είσοδος/έξοδος) για να ολοκληρώσετε τις εργασίες του απαιτεί ένα επίπεδο αποκλειστικό υψηλής απόδοσης. Για παράδειγμα, μια λειτουργία βάσης δεδομένων, γνωστό για την εκμετάλλευση πολλές CPU πυρήνων για μεγάλο χρονικό διάστημα είναι υποψήφια για το επίπεδο υπηρεσιών Premium.
- **Πολλές ταυτόχρονες αιτήσεις**. Ορισμένες εφαρμογές βάσεων δεδομένων πολλές ταυτόχρονες αιτήσεις εξυπηρέτησης, για παράδειγμα, όταν σερβίρισμα μια τοποθεσία Web που έχει μια μεγάλη κίνηση ένταση. Βασική και των τυπικών επίπεδα υπηρεσίας περιορισμός του αριθμού των ταυτόχρονες αιτήσεις ανά βάση δεδομένων. Εφαρμογές που απαιτούν περισσότερες συνδέσεις θα πρέπει να επιλέξετε μια κατάλληλη δέσμευσης μέγεθος για το χειρισμό ο μέγιστος αριθμός των αιτήσεων απαιτείται.
- **Χαμηλή λανθάνοντος χρόνου**. Ορισμένες εφαρμογές πρέπει να εξασφαλίσετε μια απάντηση από τη βάση δεδομένων σε ελάχιστο χρόνο. Εάν μια συγκεκριμένη αποθηκευμένη διαδικασία ονομάζεται ως μέρος μιας ευρύτερης λειτουργίας πελατών, ενδέχεται να έχετε απαίτηση πρέπει να έχετε μια επιστροφή από αυτήν την κλήση σε λιγότερα από 20 χιλιοστά του δευτερολέπτου, 99 ποσοστό του χρόνου. Αυτός ο τύπος εφαρμογής οφέλη από τη σειρά υπηρεσίας Premium, για να βεβαιωθείτε ότι είναι διαθέσιμο το απαιτούμενο υπολογιστική ισχύ.

Το επίπεδο υπηρεσίας που χρειάζεστε για τη βάση δεδομένων SQL εξαρτάται από τις απαιτήσεις φόρτωσης κορύφωσης για κάθε διάσταση πόρων. Ορισμένες εφαρμογές χρησιμοποιούν ένα ποσό trivial ενός μεμονωμένου πόρου, αλλά έχετε σημαντικές απαιτήσεις για άλλους πόρους.

## <a name="service-tier-capabilities-and-limits"></a>Υπηρεσία επίπεδο δυνατότητες και περιορισμοί
Κάθε επίπεδο εξυπηρέτησης επίπεδο και επιδόσεων είναι συσχετισμένη με διαφορετικό ορίων και χαρακτηριστικά επιδόσεων. Αυτός ο πίνακας περιγράφει αυτά τα χαρακτηριστικά για μία βάση δεδομένων.

[AZURE.INCLUDE [SQL DB service tiers table](../../includes/sql-database-service-tiers-table.md)]

Οι επόμενες ενότητες παρέχουν περισσότερες πληροφορίες σχετικά με την προβολή που σχετίζονται με αυτά τα όρια χρήσης.

### <a name="maximum-in-memory-oltp-storage"></a>Χώρος αποθήκευσης μέγιστο Συναλλαγής στη μνήμη

Μπορείτε να χρησιμοποιήσετε την προβολή **sys.dm_db_resource_stats** για την παρακολούθηση της σας χρήση χώρου αποθήκευσης Azure στη μνήμη. Για περισσότερες πληροφορίες σχετικά με την εποπτεία, ανατρέξτε στο θέμα [Συναλλαγής στη μνήμη οθόνη χώρου αποθήκευσης](sql-database-in-memory-oltp-monitoring.md).

>[AZURE.NOTE] Προς το παρόν, Azure στη μνήμη ηλεκτρονική συναλλαγή processing (Συναλλαγής) προεπισκόπηση υποστηρίζεται μόνο για μία μόνο βάσεις δεδομένων. Δεν μπορείτε να το χρησιμοποιήσετε σε βάσεις δεδομένων σε χώρους συγκέντρωσης ελαστικότητας βάσης δεδομένων.

### <a name="maximum-concurrent-requests"></a>Μέγιστο ταυτόχρονες αιτήσεις

Για να δείτε τον αριθμό των ταυτόχρονες αιτήσεις, εκτελέστε αυτό το ερώτημα Transact-SQL σε βάση δεδομένων SQL:

    SELECT COUNT(*) AS [Concurrent_Requests]
    FROM sys.dm_exec_requests R

Για να αναλύσετε το φόρτο εργασίας από μια βάση δεδομένων SQL Server εσωτερικής εγκατάστασης, τροποποιήστε αυτό το ερώτημα για να φιλτράρετε με βάση τη συγκεκριμένη βάση δεδομένων που θέλετε να αναλύσετε. Για παράδειγμα, εάν έχετε μια βάση δεδομένων εσωτερικής εγκατάστασης με το όνομα βάση_δεδομένων, αυτό το ερώτημα Transact-SQL επιστρέφει το πλήθος των ταυτόχρονες αιτήσεις αυτής της βάσης δεδομένων:

    SELECT COUNT(*) AS [Concurrent_Requests]
    FROM sys.dm_exec_requests R
    INNER JOIN sys.databases D ON D.database_id = R.database_id
    AND D.name = 'MyDatabase'

Αυτό είναι απλώς ένα στιγμιότυπο σε ένα μόνο σημείο στο χρόνο. Για να κατανοήσετε καλύτερα τις φόρτο εργασίας και τις ταυτόχρονες αίτηση απαιτήσεις, θα χρειαστεί να συλλέξετε πολλά δείγματα μέσα στο χρόνο.

### <a name="maximum-concurrent-logins"></a>Μέγιστο ταυτόχρονες συνδέσεις

Μπορείτε να αναλύσετε τα μοτίβα σας χρήστη και εφαρμογή για να λάβετε μια ιδέα για τη συχνότητα συνδέσεων. Μπορείτε επίσης να εκτελέσετε φορτία ρεαλιστικό σε περιβάλλον δοκιμής για να βεβαιωθείτε ότι δεν πάτημα αυτό ή άλλα όρια αναλύονται σε αυτό το άρθρο. Δεν υπάρχει ένα μεμονωμένο ερώτημα ή προβολή δυναμική διαχείριση (DMV) που μπορεί να εμφανίσει ταυτόχρονες καταμετρά login ή ιστορικού.

Εάν πολλά προγράμματα-πελάτες να χρησιμοποιήσετε την ίδια συμβολοσειρά σύνδεσης, η υπηρεσία πραγματοποιεί έλεγχο ταυτότητας κάθε σύνδεση. Εάν 10 χρήστες ταυτόχρονα, συνδεθείτε με μια βάση δεδομένων χρησιμοποιώντας το ίδιο όνομα χρήστη και τον κωδικό πρόσβασης, θα ήταν 10 ταυτόχρονες συνδέσεις. Αυτό το όριο ισχύει μόνο για τη διάρκεια της σύνδεσης και τον έλεγχο ταυτότητας. Εάν η ίδια 10 χρήστες να συνδεθείτε στη βάση δεδομένων διαδοχικά, τον αριθμό των ταυτόχρονες συνδέσεις ποτέ θα είναι μεγαλύτερη από 1.

>[AZURE.NOTE] Προς το παρόν, αυτό το όριο δεν εφαρμόζεται σε βάσεις δεδομένων με χώρους συγκέντρωσης ελαστικότητας βάσης δεδομένων.

### <a name="maximum-sessions"></a>Μέγιστος αριθμός περιόδων λειτουργίας

Για να δείτε τον αριθμό της τρέχουσας ενεργές περιόδους λειτουργίας, εκτελέστε αυτό το ερώτημα Transact-SQL στη βάση δεδομένων SQL:

    SELECT COUNT(*) AS [Sessions]
    FROM sys.dm_exec_connections

Εάν την ανάλυση ένα φόρτο εργασίας SQL Server εσωτερικής εγκατάστασης, τροποποιήστε το ερώτημα για εστίαση σε μια συγκεκριμένη βάση δεδομένων. Αυτό το ερώτημα σάς βοηθά να καθορίσετε τις ανάγκες πιθανές περίοδο λειτουργίας για τη βάση δεδομένων, εάν σκέφτεστε μετακινώντας το σε βάση δεδομένων SQL Azure.

    SELECT COUNT(*)  AS [Sessions]
    FROM sys.dm_exec_connections C
    INNER JOIN sys.dm_exec_sessions S ON (S.session_id = C.session_id)
    INNER JOIN sys.databases D ON (D.database_id = S.database_id)
    WHERE D.name = 'MyDatabase'

Και πάλι, αυτά τα ερωτήματα επιστρέφουν μια καταμέτρηση σε δεδομένη χρονική στιγμή. Εάν συλλέγετε πολλές δείγματα μέσα στο χρόνο, θα έχετε την καλύτερη κατανόηση των την περίοδο λειτουργίας σας χρήση.

Για την ανάλυση της βάσης δεδομένων SQL, μπορείτε να λάβετε ιστορικού στατιστικά στοιχεία για περιόδους λειτουργίας. Ερώτημα **sys.resource_stats**και χρησιμοποιήστε τη στήλη **active_session_count** . Ανατρέξτε στην επόμενη ενότητα για περισσότερες πληροφορίες σχετικά με τη χρήση αυτής της προβολής.

## <a name="monitor-resource-use"></a>Παρακολούθηση της χρήσης πόρων
Δύο προβολές μπορεί να σας βοηθήσει να παρακολουθείτε χρήσης πόρων για μια βάση δεδομένων SQL σε σχέση με το επίπεδο υπηρεσιών:

- [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx)
- [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx)

### <a name="sysdmdbresourcestats"></a>sys.dm_db_resource_stats
Μπορείτε να χρησιμοποιήσετε την προβολή [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) σε κάθε βάση δεδομένων SQL. Η προβολή **sys.dm_db_resource_stats** εμφανίζει πρόσφατα δεδομένα χρήσης πόρων σε σχέση με το επίπεδο υπηρεσιών. Μέσος όρος ποσοστών για CPU, δεδομένα εισόδου/εξόδου, εγγραφών στο αρχείο καταγραφής και μνήμης καταγράφονται κάθε 15 δευτερόλεπτα και διατηρούνται για 1 ώρα.

Επειδή αυτή η προβολή παρέχει ένα πιο λεπτομερές ανατρέξτε στο θέμα Χρήση πόρων, χρησιμοποιήστε **sys.dm_db_resource_stats** πρώτης για την τρέχουσα κατάσταση κάθε ανάλυση ή αντιμετώπισης προβλημάτων. Για παράδειγμα, αυτό το ερώτημα δείχνει τη χρήση μέση και μέγιστη πόρων για την τρέχουσα βάση δεδομένων επάνω από την τελευταία ώρα:

    SELECT  
        AVG(avg_cpu_percent) AS 'Average CPU use in percent',
        MAX(avg_cpu_percent) AS 'Maximum CPU use in percent',
        AVG(avg_data_io_percent) AS 'Average data I/O in percent',
        MAX(avg_data_io_percent) AS 'Maximum data I/O in percent',
        AVG(avg_log_write_percent) AS 'Average log write use in percent',
        MAX(avg_log_write_percent) AS 'Maximum log write use in percent',
        AVG(avg_memory_usage_percent) AS 'Average memory use in percent',
        MAX(avg_memory_usage_percent) AS 'Maximum memory use in percent'
    FROM sys.dm_db_resource_stats;  

Για άλλα ερωτήματα, ανατρέξτε στο θέμα τα παραδείγματα σε [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx).

### <a name="sysresourcestats"></a>sys.resource_stats

Η προβολή [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) στην **κύρια** βάση δεδομένων έχει πρόσθετες πληροφορίες που μπορεί να σας βοηθήσει να παρακολουθήσετε τις επιδόσεις της βάσης δεδομένων SQL για το επίπεδο τη συγκεκριμένη υπηρεσία επίπεδο και επιδόσεων. Τα δεδομένα που έχουν συλλεχθεί κάθε 5 λεπτά και διατηρούνται για 35 ημέρες περίπου. Αυτή η προβολή είναι χρήσιμη για μια μακροπρόθεσμες ιστορικού ανάλυση των τον τρόπο τη βάση δεδομένων SQL που χρησιμοποιεί τους πόρους.

Το παρακάτω γράφημα εμφανίζει τα CPU χρήσης πόρων για μια βάση δεδομένων Premium με το επίπεδο απόδοσης P2 για κάθε ώρα σε μια εβδομάδα. Αυτό το γράφημα ξεκινά Δευτέρα, εμφανίζει 5 ημερών εργασίας και, στη συνέχεια, εμφανίζει ένα Σαββατοκύριακο, όταν συμβαίνει πολύ λιγότερο σχετικά με την εφαρμογή.

![Χρήση πόρων βάσης δεδομένων SQL](./media/sql-database-performance-guidance/sql_db_resource_utilization.png)

Από τα δεδομένα, αυτή η βάση δεδομένων έχει αυτήν τη στιγμή φορτίο CPU κορύφωσης λίγο περισσότερο από 50 τοις εκατό της χρήσης της CPU σε σχέση με το επίπεδο απόδοσης P2 (midday την τρίτη). Εάν CPU είναι ο συντελεστής δεσπόζουσας στο προφίλ πόρων της εφαρμογής, στη συνέχεια, μπορεί να αποφασίσετε ότι P2 είναι το επίπεδο απόδοσης δεξιά για να εξασφαλίσετε ότι το φόρτο εργασίας επαρκές πάντα. Εάν θεωρείτε ότι μια εφαρμογή για να αυξηθεί με την πάροδο του χρόνου, είναι καλή ιδέα να έχετε ένα buffer επιπλέον πόρων, έτσι ώστε η εφαρμογή δεν επίτευξη ποτέ το όριο απόδοσης επιπέδου. Αν αυξήσετε το επίπεδο επιδόσεων, μπορείτε να αποφύγετε πελατών-ορατά σφάλματα που μπορεί να προκύψει όταν μια βάση δεδομένων δεν διαθέτει αρκετό power για επεξεργασία αιτήσεων αποτελεσματικά, ιδίως στα περιβάλλοντα διάκριση αδράνειας. Ένα παράδειγμα είναι μια βάση δεδομένων που υποστηρίζει μια εφαρμογή η οποία χρώματα ιστοσελίδες με βάση τα αποτελέσματα των κλήσεων βάσης δεδομένων.

Σημειώστε ότι άλλοι τύποι εφαρμογής μπορεί να ερμηνεύσει διαφορετικά στο ίδιο γράφημα. Για παράδειγμα, εάν μια εφαρμογή προσπαθεί να επεξεργάζονται δεδομένα μισθοδοσίας κάθε ημέρα και έχει το ίδιο γράφημα, αυτό το είδος του μοντέλου "μαζική εργασία" μπορεί να κάνει κανονικά σε επίπεδο επιδόσεων P1. Το επίπεδο απόδοσης P1 έχει 100 DTUs σε σύγκριση με το 200 DTUs στο επίπεδο επιδόσεων P2. Το επίπεδο απόδοσης P1 παρέχει μισή τις επιδόσεις του επιπέδου επιδόσεων P2. Επομένως, 50 τοις εκατό της χρήσης της CPU στο P2 ισούται με χρήση CPU 100 τοις εκατό σε P1. Εάν η εφαρμογή δεν διαθέτει χρονικών ορίων, αυτό μπορεί να έχει σημασία εάν μια εργασία διαρκεί 2 ώρες ή 2,5 ώρες για να ολοκληρώσετε, αν λαμβάνει γίνει σήμερα. Εφαρμογή σε αυτή την κατηγορία πιθανώς να χρησιμοποιήσετε ένα επίπεδο επιδόσεων P1. Μπορείτε να επωφεληθείτε από το γεγονός ότι υπάρχουν χρονικά διαστήματα κατά τη διάρκεια της ημέρας όταν χρήσης πόρων είναι χαμηλότερη, ώστε να οποιαδήποτε "μεγάλο κορύφωσης" μπορεί να γίνει υπερχείλιση σε ένα από τα μήκους αργότερα στην ημέρα. Το επίπεδο απόδοσης P1 μπορεί να είναι καλή για τον συγκεκριμένο τύπο της εφαρμογής (και αποθήκευση χρήματα), με την προϋπόθεση ότι οι εργασίες μπορεί να ολοκληρωθεί σε χρόνο κάθε ημέρα.

Azure εκθέτει βάση δεδομένων SQL που καταναλώθηκε πληροφορίες πόρων για κάθε ενεργή βάση δεδομένων στην προβολή **sys.resource_stats** από την **κύρια** βάση δεδομένων σε κάθε διακομιστή. Τα δεδομένα στον πίνακα συναθροίζεται για 5 λεπτά. Με τα επίπεδα υπηρεσίας Basic, τυπική και Premium, τα δεδομένα μπορεί να διαρκέσει περισσότερο από 5 λεπτά για να εμφανίζονται στον πίνακα, ώστε να είναι πιο χρήσιμη για ιστορικού ανάλυσης και όχι κοντά-πραγματικού χρόνου ανάλυση αυτών των δεδομένων. Ερώτημα στην προβολή **sys.resource_stats** για να δείτε το πρόσφατα ιστορικό μιας βάσης δεδομένων και για να επιβεβαιώνετε αν η δέσμευση που επιλέξατε παραδίδονται οι επιδόσεις που θέλετε, όταν χρειάζεται.

>[AZURE.NOTE] Θα πρέπει να είστε συνδεδεμένοι με την **κύρια** βάση δεδομένων του λογική διακομιστή βάσης δεδομένων SQL ερώτημα **sys.resource_stats** στα παρακάτω παραδείγματα.

Αυτό το παράδειγμα δείχνει τον τρόπο εκτίθεται τα δεδομένα σε αυτήν την προβολή:

    SELECT TOP 10 *
    FROM sys.resource_stats
    WHERE database_name = 'resource1'
    ORDER BY start_time DESC

![Η προβολή καταλόγου sys.resource_stats](./media/sql-database-performance-guidance/sys_resource_stats.png)

Το επόμενο παράδειγμα δείχνει διαφορετικούς τρόπους που μπορείτε να χρησιμοποιήσετε την προβολή καταλόγου **sys.resource_stats** για πληροφορίες σχετικά με τον τρόπο τη βάση δεδομένων SQL που χρησιμοποιεί τους πόρους:

1. Για να δείτε την προηγούμενη εβδομάδα πόρων για το userdb1 βάσης δεδομένων, μπορείτε να εκτελέσετε αυτό το ερώτημα:

        SELECT *
        FROM sys.resource_stats
        WHERE database_name = 'userdb1' AND
              start_time > DATEADD(day, -7, GETDATE())
        ORDER BY start_time DESC;

2. Για να υπολογιστεί πόσο καλά του φόρτου εργασίας σας προσαρμόζει το επίπεδο επιδόσεων, πρέπει να κάνετε Διερεύνηση σε κάθε πτυχή της τα μετρικά πόρων: CPU, διαβάζει, εγγραφών, αριθμός των εργαζομένων και στον αριθμό των περιόδων λειτουργίας. Ακολουθεί ένα αναθεωρημένο ερώτημα με **sys.resource_stats** για την αναφορά τη μέση και μέγιστη τιμές αυτές τις μετρήσεις πόρων:

        SELECT
            avg(avg_cpu_percent) AS 'Average CPU use in percent',
            max(avg_cpu_percent) AS 'Maximum CPU use in percent',
            avg(avg_data_io_percent) AS 'Average physical data I/O use in percent',
            max(avg_data_io_percent) AS 'Maximum physical data I/O use in percent',
            avg(avg_log_write_percent) AS 'Average log write use in percent',
            max(avg_log_write_percent) AS 'Maximum log write use in percent',
            avg(max_session_percent) AS 'Average % of sessions',
            max(max_session_percent) AS 'Maximum % of sessions',
            avg(max_worker_percent) AS 'Average % of workers',
            max(max_worker_percent) AS 'Maximum % of workers'
        FROM sys.resource_stats
        WHERE database_name = 'userdb1' AND start_time > DATEADD(day, -7, GETDATE());

3. Με αυτές τις πληροφορίες σχετικά με τις τιμές μέση και μέγιστη κάθε μέτρησης πόρων, μπορείτε να υπολογίσετε πόσο καλά του φόρτου εργασίας σχετίζεται με το επίπεδο απόδοσης που επιλέξατε. Συνήθως, μέσες τιμές από **sys.resource_stats** σας δώσει μια καλή γραμμή βάσης για χρήση σε σχέση με το μέγεθος του προορισμού. Θα πρέπει να σας στικ πρωτεύοντος μέτρησης. Για παράδειγμα, μπορεί να χρησιμοποιείτε το επίπεδο τυπική υπηρεσιών με το επίπεδο επιδόσεων S2. Ο μέσος όρος χρησιμοποιήσετε ποσοστά για χρήση της CPU και εισόδου/εξόδου διαβάζει και εγγραφές βρίσκονται κάτω από 40 τοις εκατό, ο μέσος όρος των εργαζομένων είναι κάτω από 50 και ο μέσος όρος των περιόδων λειτουργίας είναι κάτω από 200. Το φόρτο εργασίας ενδέχεται να χωρά στο επίπεδο επιδόσεων S1. Είναι εύκολο να δείτε αν η βάση δεδομένων χωρά στην τα όρια εργαζόμενου και την περίοδο λειτουργίας. Για να δείτε εάν μια βάση δεδομένων σχετίζεται με χαμηλότερο επίπεδο επιδόσεων όσον αφορά CPU, διαβάζει και εγγραφές, διαιρέστε τον αριθμό DTU στο κάτω επίπεδο απόδοσης κατά τον αριθμό DTU το τρέχον επίπεδο επιδόσεων και, στη συνέχεια, πρέπει να πολλαπλασιάσετε το αποτέλεσμα επί 100:

    * *S1 DTU / S2 DTU* 100 = 20 / 50* 100 = 40 **

    Το αποτέλεσμα είναι η διαφορά σχετική επιδόσεων μεταξύ των δύο επιδόσεων επιπέδων σε ποσοστό. Εάν σας χρήση πόρων δεν υπερβαίνει αυτό το ποσό, τον φόρτο εργασίας ενδέχεται να χωρούν στο χαμηλότερο επίπεδο επιδόσεων. Ωστόσο, πρέπει να δείτε όλες τις περιοχές τιμών χρήση πόρων και προσδιορίσετε, κατά ποσοστό, πόσο συχνά το φόρτο εργασίας βάσης δεδομένων θα χωράει στο χαμηλότερο επίπεδο επιδόσεων. Το παρακάτω ερώτημα εξάγει το ποσοστό προσαρμογής ανά διάσταση πόρων, με βάση το όριο των 40 τοις εκατό που θα σας υπολογισμού σε αυτό το παράδειγμα:

        SELECT
            (COUNT(database_name) - SUM(CASE WHEN avg_cpu_percent >= 40 THEN 1 ELSE 0 END) * 1.0) / COUNT(database_name) AS 'CPU Fit Percent'
            ,(COUNT(database_name) - SUM(CASE WHEN avg_log_write_percent >= 40 THEN 1 ELSE 0 END) * 1.0) / COUNT(database_name) AS 'Log Write Fit Percent'
            ,(COUNT(database_name) - SUM(CASE WHEN avg_data_io_percent >= 40 THEN 1 ELSE 0 END) * 1.0) / COUNT(database_name) AS 'Physical Data IO Fit Percent'
        FROM sys.resource_stats
        WHERE database_name = 'userdb1' AND start_time > DATEADD(day, -7, GETDATE());

    Που βασίζονται σε βάση δεδομένων της υπηρεσίας επιπέδου στόχος σας (ΓΆ), μπορείτε να αποφασίσετε αν το φόρτο εργασίας σχετίζεται με το κάτω επίπεδο απόδοσης. Εάν το φόρτο εργασίας βάσης δεδομένων ΓΆ είναι 99,9 τοις εκατό και το προηγούμενο ερώτημα επιστρέφει τιμές μεγαλύτερες από τοις εκατό 99,9 για όλες τις διαστάσεις τρεις πόρων, του φόρτου εργασίας σας πιθανότατα χωρούν στο χαμηλότερο επίπεδο επιδόσεων.

    Εξετάζοντας το ποσοστό προσαρμογής επίσης παρέχει πληροφορίες για εάν έχετε για να μετακινηθείτε στο επόμενο ανώτερο επίπεδο επιδόσεων ώστε να πληρούνται οι ΓΆ σας. Για παράδειγμα, userdb1 εμφανίζει τα ακόλουθα χρησιμοποιούν CPU για την προηγούμενη εβδομάδα:

  	| Μέσος όρος τοις εκατό CPU | Μέγιστο ποσοστό της CPU |
  	|---|---|
  	| 24,5 | 100,00 |

    Είναι η μέση CPU σχετικά με το ένα τέταρτο του ορίου των το επίπεδο επιδόσεων, το οποίο θα μπορούσε να ενσωματωθεί καλά το επίπεδο απόδοσης της βάσης δεδομένων. Ωστόσο, τη μέγιστη τιμή δείχνει ότι η βάση δεδομένων φτάσει το όριο του επιπέδου επιδόσεων. Χρειάζεστε για να μετακινηθείτε στο επόμενο ανώτερο επίπεδο επιδόσεων; Πρέπει να δείτε τον τρόπο πολλές φορές σας φτάνει φόρτο εργασίας 100 τοις εκατό και, στη συνέχεια, συγκρίνετε με το φόρτο εργασίας βάσης δεδομένων ΓΆ.

        SELECT
        (COUNT(database_name) - SUM(CASE WHEN avg_cpu_percent >= 100 THEN 1 ELSE 0 END) * 1.0) / COUNT(database_name) AS 'CPU fit percent'
        ,(COUNT(database_name) - SUM(CASE WHEN avg_log_write_percent >= 100 THEN 1 ELSE 0 END) * 1.0) / COUNT(database_name) AS 'Log write fit percent’
        ,(COUNT(database_name) - SUM(CASE WHEN avg_data_io_percent >= 100 THEN 1 ELSE 0 END) * 1.0) / COUNT(database_name) AS 'Physical data I/O fit percent'
        FROM sys.resource_stats
        WHERE database_name = 'userdb1' AND start_time > DATEADD(day, -7, GETDATE());

    Εάν αυτό το ερώτημα επιστρέφει μια τιμή μικρότερη από το 99,9 τοις εκατό για οποιαδήποτε από τις διαστάσεις τρεις πόρων, εξετάστε το ενδεχόμενο να είτε Μετακίνηση στο επόμενο ανώτερο επίπεδο επιδόσεων ή χρησιμοποιήστε εφαρμογή ρύθμισης τεχνικές για να μειώσετε το φόρτο τη βάση δεδομένων SQL.

4. Αυτή η άσκηση επίσης θεωρεί ότι σας αύξηση πρόβλεψη φόρτο εργασίας στο μέλλον.

## <a name="tune-your-application"></a>Ρύθμιση της εφαρμογής σας

Στον SQL Server παραδοσιακή εσωτερικής εγκατάστασης, η διαδικασία αρχικό χωρητικότητας συχνά διαχωρίζονται από τη διαδικασία της εκτέλεσης μιας εφαρμογής σε παραγωγής. Υλικό και προϊόντος άδειες χρήσης έχουν αγοραστεί πρώτα και ρύθμιση επιδόσεων γίνεται αργότερα. Όταν χρησιμοποιείτε τη βάση δεδομένων SQL Azure, είναι καλή ιδέα να interweave της διαδικασίας εκτέλεση μιας εφαρμογής και της ρύθμισης του. Με το μοντέλο πληρωμής για χωρητικότητα ζήτηση, μπορεί να ακρίβεια την εφαρμογή σας για να χρησιμοποιήσετε το ελάχιστο τους πόρους που απαιτούνται τώρα, αντί να overprovisioning στο υλικό που βασίζονται σε εκτιμήσεων των σχεδίων μελλοντικής ανάπτυξης για μια εφαρμογή, τα οποία συχνά είναι λάθος. Ορισμένοι πελάτες μπορεί να επιλέξετε να μην με ακρίβεια μια εφαρμογή και επιλέξτε αντί για αυτό να overprovision πόροι υλικού. Αυτή η προσέγγιση μπορεί να είναι μια καλή ιδέα, εάν δεν θέλετε να αλλάξετε μια εφαρμογή του κλειδιού κατά τη διάρκεια μιας περιόδου απασχολημένος. Ωστόσο, μια εφαρμογή της ρύθμισης να ελαχιστοποιήσετε απαιτήσεων πόρου και κάτω μηνιαία χρεώσεις όταν χρησιμοποιείτε τα επίπεδα υπηρεσίας σε βάση δεδομένων SQL Azure.

### <a name="application-characteristics"></a>Εφαρμογή χαρακτηριστικών

Παρόλο που η βάση δεδομένων SQL Azure επίπεδα υπηρεσίας έχουν σχεδιαστεί για να βελτιώσετε την απόδοση σταθερότητα και προβλεψιμότητα για μια εφαρμογή, ορισμένες βέλτιστες πρακτικές μπορούν να σας βοηθήσει να ρύθμιση της εφαρμογής σας για καλύτερη να επωφεληθείτε από τους πόρους με επίπεδο επιδόσεων. Παρόλο που πολλές εφαρμογές έχουν σημαντικά κέρδη στην απόδοση απλώς, μεταβαίνοντας σε υψηλότερο επίπεδο επιδόσεων ή επίπεδο υπηρεσιών, ορισμένες εφαρμογές χρειάζεται επιπλέον ρύθμιση για να επωφεληθείτε από υψηλότερο επίπεδο της υπηρεσίας. Για μεγαλύτερη απόδοση, εξετάστε το ενδεχόμενο να πρόσθετα εφαρμογής της ρύθμισης για τις εφαρμογές που έχουν τα παρακάτω χαρακτηριστικά:

- **Εφαρμογές που έχουν αργές επιδόσεις λόγω συμπεριφορά "chatty"**. Chatty εφαρμογές κάνουν λειτουργιών πρόσβασης πλεονάζουσα δεδομένων που διάκριση πεζών-κεφαλαίων λανθάνων χρόνος δικτύου. Ίσως χρειαστεί να τροποποιήσετε αυτά τα είδη των εφαρμογών για να μειώσετε τον αριθμό των λειτουργιών πρόσβασης σε δεδομένα στη βάση δεδομένων SQL. Για παράδειγμα, ενδέχεται να μπορείτε να βελτιώσετε επιδόσεις των εφαρμογών χρησιμοποιώντας τεχνικές όπως δέσμης για ερωτήματα ad-hoc ή η μετακίνηση τα ερωτήματα σε αποθηκευμένες διαδικασίες. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [μαζική ερωτημάτων](#batch-queries).
- **Βάσεις δεδομένων με μια εντατική φόρτο εργασίας που δεν υποστηρίζονται από μια ολόκληρη μία μηχανή**. Βάσεις δεδομένων που πρέπει να υπερβαίνει τους πόρους στο υψηλότερο επίπεδο επιδόσεων Premium μπορεί να επωφεληθούν από κλίμακας ανάληψη το φόρτο εργασίας. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [sharding σταυρό-βάσης δεδομένων](#cross-database-sharding) και τη [Δημιουργία διαμερισμάτων λειτουργικές](#functional-partitioning).
- **Εφαρμογές που έχουν δευτερεύουσα προαιρετική ερωτήματα**. Εφαρμογές, ιδίως εκείνα το επίπεδο πρόσβασης δεδομένων, που έχουν απενεργοποιήσει ακατάλληλα ερωτήματα μπορεί να δεν δικαιούνται υψηλότερο επίπεδο επιδόσεων. Αυτό περιλαμβάνει τα ερωτήματα που δεν διαθέτουν μια πρόταση WHERE, περιέχει ευρετήρια που λείπουν ή είναι παλιό στατιστικά στοιχεία. Αυτές οι εφαρμογές επωφεληθούν από τεχνικές ρύθμιση επιδόσεων τυπική ερώτημα. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [δεν υπάρχει ευρετήρια](#missing-indexes) και [ερωτήματος της ρύθμισης και συμβουλές](#query-tuning-and-hinting).
- **Εφαρμογές που έχουν δευτερεύουσα προαιρετική δεδομένα πρόσβασης σχεδίασης**. Οι εφαρμογές που έχουν εγγενή πρόσβαση ταυτόχρονης εκτέλεσης προβλήματα με τα δεδομένα, κατόπιν για παράδειγμα, δεν μπορεί να επωφεληθούν από υψηλότερο επίπεδο επιδόσεων. Εξετάστε το ενδεχόμενο μείωσης μεταβάσεις με τη βάση δεδομένων SQL Azure με σε cache δεδομένα από την πλευρά του προγράμματος-πελάτη με την υπηρεσία προσωρινή αποθήκευση Azure ή κάποια άλλη τεχνολογία σε cache. Ανατρέξτε στο θέμα [σε cache επίπεδο εφαρμογής](#application-tier-caching).

## <a name="tuning-techniques"></a>Τεχνικές ρύθμισης
Σε αυτήν την ενότητα, εξετάσουμε τεχνικές που μπορείτε να χρησιμοποιήσετε για τη ρύθμιση της βάσης δεδομένων SQL Azure για να αποκτήσετε την καλύτερη απόδοση για την εφαρμογή σας και να εκτελέσετε στο κατώτερο επίπεδο πιθανών επιδόσεων. Ορισμένες από αυτές τις τεχνικές ταιριάζει παραδοσιακή SQL Server βέλτιστες πρακτικές της ρύθμισης, αλλά κάποιες άλλες είναι συγκεκριμένη βάση δεδομένων SQL Azure. Σε ορισμένες περιπτώσεις, μπορείτε να εξετάσετε το αναλωμένες πόρους για μια βάση δεδομένων για να βρείτε περιοχών για περαιτέρω με ακρίβεια και επέκταση παραδοσιακή SQL Server τεχνικές για να εργαστείτε σε βάση δεδομένων SQL Azure.

### <a name="azure-portal-tools"></a>Εργαλεία Azure πύλης
Θα βρείτε δύο εργαλεία στην πύλη του Azure που μπορεί να σας βοηθήσει να αναλύσετε και διόρθωση προβλημάτων απόδοσης με τη βάση δεδομένων SQL:

- [Πληροφορίες για απόδοσης ερωτήματος](sql-database-query-performance.md)
- [Σύμβουλος βάσης δεδομένων SQL](sql-database-advisor.md)

Πύλη του Azure περιλαμβάνει περισσότερες πληροφορίες σχετικά με και τα δύο από αυτά τα εργαλεία και πώς μπορείτε να τις χρησιμοποιήσετε. Για την αποτελεσματική διάγνωση και διόρθωση προβλημάτων, συνιστάται να δοκιμάσετε πρώτα τα εργαλεία στην πύλη του Azure. Συνιστάται να χρησιμοποιήσετε το εγχειρίδιο της ρύθμισης προσεγγίσεις που αναλύονται στη συνέχεια, για τα ευρετήρια και ρύθμιση ερωτήματος, σε ειδικές περιπτώσεις που λείπουν.

### <a name="missing-indexes"></a>Τα ευρετήρια που λείπουν
Ένα κοινό θέμα στην απόδοση της βάσης δεδομένων Συναλλαγής σχετίζεται με τη σχεδίαση φυσικής βάσης δεδομένων. Συχνά, οι διατάξεις βάσης δεδομένων έχει σχεδιαστεί και αποσταλεί χωρίς έλεγχο σε κλίμακα (είτε στο φόρτωσης ή όγκου δεδομένων). Δυστυχώς, οι επιδόσεις προγράμματος του ερωτήματος μπορεί να είναι αποδεκτή σε μικρές κλίμακα αλλά υποβαθμίζονται ουσιαστικά στην περιοχή όγκους δεδομένων παραγωγής επιπέδου. Τα πιο συνηθισμένα προέλευσης αυτού του ζητήματος είναι η έλλειψη κατάλληλων ευρετηρίων για να ικανοποιήσετε φίλτρα ή άλλους περιορισμούς σε ένα ερώτημα. Συχνά, που λείπουν δηλώσεων ευρετήρια ως πίνακα σάρωση όταν θα μπορούσε να αρκεί ένα ευρετήριο αναζήτησης.

Σε αυτό το παράδειγμα, το επιλεγμένο ερώτημα πρόγραμμα χρησιμοποιεί μια σάρωση όταν θα αρκεί μια αναζήτηση:

    DROP TABLE dbo.missingindex;
    CREATE TABLE dbo.missingindex (col1 INT IDENTITY PRIMARY KEY, col2 INT);
    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO dbo.missingindex(col2) VALUES (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION;
    GO
    SELECT m1.col1
    FROM dbo.missingindex m1 INNER JOIN dbo.missingindex m2 ON(m1.col1=m2.col1)
    WHERE m1.col2 = 4;

![Ένα πρόγραμμα ερωτήματος με ευρετήρια που λείπουν](./media/sql-database-performance-guidance/query_plan_missing_indexes.png)

Βάση δεδομένων SQL του Azure σάς βοηθούν να Εύρεση και επιδιόρθωση κοινές λείπει το ευρετήριο συνθήκες. DMVs που δημιουργούνται σε βάση δεδομένων SQL Azure δείτε συλλογές ερώτημα στο οποίο ευρετηρίου θα μειώσει σημαντικά το εκτιμώμενο κόστος για να εκτελέσετε ένα ερώτημα. Κατά την εκτέλεση του ερωτήματος, βάση δεδομένων SQL παρακολουθεί πόσο συχνά εκτελείται κάθε πρόγραμμα του ερωτήματος και παρακολουθεί την εκτιμώμενη διάκενο μεταξύ του σχεδίου εκτέλεση ερωτήματος και imagined αυτό όπου υπήρχε αυτού του ευρετηρίου. Μπορείτε να χρησιμοποιήσετε αυτές τις DMVs να προβλέψει γρήγορα ποιες αλλαγές σχεδίασης φυσικής βάσης δεδομένων μπορεί να βελτιώσουμε το συνολικό κόστος φόρτο εργασίας για μια βάση δεδομένων και το πραγματικό φόρτο εργασίας.

Μπορείτε να χρησιμοποιήσετε αυτό το ερώτημα προς αξιολόγηση πιθανά ευρετήρια που λείπουν:

    SELECT CONVERT (varchar, getdate(), 126) AS runtime,
        mig.index_group_handle, mid.index_handle,
        CONVERT (decimal (28,1), migs.avg_total_user_cost * migs.avg_user_impact *
                (migs.user_seeks + migs.user_scans)) AS improvement_measure,
        'CREATE INDEX missing_index_' + CONVERT (varchar, mig.index_group_handle) + '_' +
                  CONVERT (varchar, mid.index_handle) + ' ON ' + mid.statement + '
                  (' + ISNULL (mid.equality_columns,'')
                  + CASE WHEN mid.equality_columns IS NOT NULL
                              AND mid.inequality_columns IS NOT NULL
                         THEN ',' ELSE '' END + ISNULL (mid.inequality_columns, '')
                  + ')'
                  + ISNULL (' INCLUDE (' + mid.included_columns + ')', '') AS create_index_statement,
        migs.*,
        mid.database_id,
        mid.[object_id]
    FROM sys.dm_db_missing_index_groups AS mig
    INNER JOIN sys.dm_db_missing_index_group_stats AS migs
        ON migs.group_handle = mig.index_group_handle
    INNER JOIN sys.dm_db_missing_index_details AS mid
        ON mig.index_handle = mid.index_handle
    ORDER BY migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans) DESC

Σε αυτό το παράδειγμα, το ερώτημα οδήγησε σε αυτή την πρόταση:

    CREATE INDEX missing_index_5006_5005 ON [dbo].[missingindex] ([col2])  

Αφού δημιουργηθεί, που ίδια πρόταση SELECT συλλογές ένα διαφορετικό πρόγραμμα, το οποίο χρησιμοποιεί μια seek αντί για μια σάρωση και, στη συνέχεια, εκτελεί πιο αποτελεσματικά το πρόγραμμα:

![Ένα πρόγραμμα ερώτημα με διορθωμένη ευρετήρια](./media/sql-database-performance-guidance/query_plan_corrected_indexes.png)

Το βασικές πληροφορίες για είναι ότι η δυναμικότητα εισόδου/εξόδου ενός συστήματος αγαθό κοινόχρηστο, είναι πιο περιορισμένη από έναν υπολογιστή αποκλειστικό διακομιστή. Υπάρχει μια premium στον Ελαχιστοποίηση περιττές εισόδου/εξόδου για να αξιοποιήσετε στο μέγιστο του συστήματος στο το DTU κάθε επίπεδο επιδόσεων από τη βάση δεδομένων SQL Azure επίπεδα υπηρεσίας. Κατάλληλη φυσικής σχεδίασης βάσης δεδομένων επιλογές μπορεί να βελτιώσει σημαντικά την αδράνεια για μεμονωμένες ερωτήματα, τη βελτίωση της ταχύτητας μετάδοσης των ταυτόχρονες αιτήσεις χειρισμού ανά μονάδα κλίμακα, και να ελαχιστοποιήσετε το κόστος που απαιτούνται για να ικανοποιήσετε το ερώτημα. Για περισσότερες πληροφορίες σχετικά με το ευρετήριο που λείπουν DMVs, ανατρέξτε στο θέμα [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).

### <a name="query-tuning-and-hinting"></a>Ρύθμιση ερωτήματος και υποδείξεις
Η βελτιστοποίηση ερωτήματος σε βάση δεδομένων SQL Azure είναι παρόμοια με την παραδοσιακή βελτιστοποίηση ερωτήματος SQL Server. Οι περισσότερες από τις βέλτιστες πρακτικές για ερωτήματα της ρύθμισης και την κατανόηση του λογικής Περιορισμοί μοντέλου για το ερώτημα βελτιστοποίηση ισχύουν επίσης για βάση δεδομένων SQL Azure. Εάν έχετε με ακρίβεια ερωτημάτων σε βάση δεδομένων SQL Azure, μπορεί να λάβετε το πρόσθετο πλεονέκτημα της μείωσης απαιτήσεις συγκεντρωτικών πόρων. Η εφαρμογή σας ίσως να εκτελέσετε σε χαμηλότερο κόστος από ένα untuned ισοδύναμο, επειδή μπορεί να εκτελέσει στο κάτω επίπεδο επιδόσεων.

Ένα παράδειγμα που είναι κοινά στον SQL Server και που ισχύει επίσης για βάση δεδομένων SQL Azure είναι πώς η βελτιστοποίηση ερωτήματος "sniffs" παράμετροι. Κατά τη μεταγλώττιση, η βελτιστοποίηση ερωτήματος υπολογίζει την τρέχουσα τιμή της παραμέτρου για να προσδιορίσετε εάν αυτό μπορεί να δημιουργήσει μια καλύτερη σχέδιο ερωτήματος. Παρόλο που αυτή η στρατηγική συχνά μπορεί να οδηγήσει σε ένα σχέδιο ερωτήματος που είναι σημαντικά ταχύτερο από ένα πρόγραμμα μεταγλωττιστεί χωρίς τιμές γνωστά παραμέτρων, προς το παρόν λειτουργεί imperfectly και τα δύο στο SQL Server και σε βάση δεδομένων SQL Azure. Μερικές φορές η παράμετρος δεν είναι sniffed, και μερικές φορές η παράμετρος είναι sniffed αλλά το σχέδιο που έχει δημιουργηθεί είναι δευτερεύουσα προαιρετική για το πλήρες σύνολο των τιμών παραμέτρου σε ένα φόρτο εργασίας. Microsoft περιλαμβάνει υποδείξεις ερωτήματος (οδηγιών) ώστε να μπορείτε να καθορίσετε περισσότερες σκοπίμως πρόθεσης και να παρακάμψετε την προεπιλεγμένη συμπεριφορά της παραμέτρου ανίχνευσης. Συχνά, εάν χρησιμοποιείτε υποδείξεις, μπορείτε να διορθώσετε περιπτώσεις στις οποίες η προεπιλεγμένη συμπεριφορά SQL Server ή βάση δεδομένων SQL Azure είναι ελλιπείς για ένα συγκεκριμένο πελάτη φόρτο εργασίας.

Το επόμενο παράδειγμα παρουσιάζει πώς ο επεξεργαστής ερωτήματος μπορεί να δημιουργήσει ένα σχέδιο που είναι δευτερεύουσα προαιρετική τόσο για καλύτερες επιδόσεις και απαιτήσεις πόρων. Αυτό το παράδειγμα εμφανίζει επίσης ότι εάν χρησιμοποιείτε μια υπόδειξη ερώτημα, μπορείτε να μειώσετε την εκτέλεση του ερωτήματος χρόνος και ο πόρος απαιτήσεις για τη βάση δεδομένων SQL:

    DROP TABLE psptest1;
    CREATE TABLE psptest1(col1 int primary key identity, col2 int, col3 binary(200));

    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO psptest1(col2) values (1);
        INSERT INTO psptest1(col2) values (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION
    CREATE INDEX i1 on psptest1(col2);
    GO

    CREATE PROCEDURE psp1 (@param1 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1
        WHERE col2 = @param1
        ORDER BY col2;
    END
    GO

    CREATE PROCEDURE psp2 (@param2 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1 WHERE col2 = @param2
        ORDER BY col2
        OPTION (OPTIMIZE FOR (@param2 UNKNOWN))
    END
    GO

    CREATE TABLE t1 (col1 int primary key, col2 int, col3 binary(200));
    GO

Ο κωδικός ρύθμισης δημιουργεί έναν πίνακα που έχει κλίση κατανομή δεδομένων. Το πρόγραμμα βέλτιστη ερωτήματος διαφέρει ανάλογα με ποια παράμετρος είναι επιλεγμένο. Δυστυχώς, το πρόγραμμα σε cache συμπεριφορά δεν πάντα να μεταγλωττίσετε ξανά το ερώτημα με βάση την πιο κοινή τιμή παραμέτρου. Επομένως, είναι δυνατό για μια δευτερεύουσα προαιρετική σχεδίου για να στο cache και να χρησιμοποιηθεί για πολλές τιμές, ακόμα και όταν ένα διαφορετικό πρόγραμμα μπορεί να είναι καλύτερη επιλογή πρόγραμμα κατά μέσο όρο. Στη συνέχεια, το πρόγραμμα ερωτήματος δημιουργεί δύο αποθηκευμένες διαδικασίες που είναι πανομοιότυπες, με τη διαφορά ότι ένας έχει μια υπόδειξη ειδικό ερώτημα.

**Το παράδειγμα, μέρος 1**

    -- Prime Procedure Cache with scan plan
    EXEC psp1 @param1=1;
    TRUNCATE TABLE t1;

    -- Iterate multiple times to show the performance difference
    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp1 @param1=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

**Το παράδειγμα, μέρος 2**

(Συνιστάται να περιμένετε τουλάχιστον 10 λεπτά πριν να ξεκινήσετε το παράδειγμα, μέρος 2, ώστε να διαφέρουν τα αποτελέσματα των δεδομένων που προκύπτει τηλεμετρίας.)

    EXEC psp2 @param2=1;
    TRUNCATE TABLE t1;

    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp2 @param2=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

Κάθε τμήμα αυτού του παραδείγματος προσπαθεί να εκτελέσετε μια δήλωση insert με παραμέτρους 1.000 φορές (για να δημιουργήσετε μια επαρκής φόρτωση για να χρησιμοποιήσετε ως ένα σύνολο δεδομένων δοκιμής). Κατά την εκτέλεση αποθηκευμένων διαδικασιών, το πρόγραμμα επεξεργασίας ερωτημάτων εξετάζει την τιμή της παραμέτρου που μεταβιβάζεται στη διαδικασία κατά την πρώτη μεταγλώττιση (παραμέτρου "ανίχνευσης"). Ο επεξεργαστής αποθηκεύει προσωρινά το πρόγραμμα που προκύπτει και χρησιμοποιεί για μελλοντική κλήσεων, ακόμα και εάν η τιμή της παραμέτρου είναι διαφορετικό. Το πρόγραμμα βέλτιστη δεν μπορεί να χρησιμοποιηθεί σε όλες τις περιπτώσεις. Μερικές φορές πρέπει να Οδηγός η βελτιστοποίηση για να επιλέξετε ένα σχέδιο που είναι καλύτερη για μέσος όρος πεζών και κεφαλαίων γραμμάτων αντί για τη συγκεκριμένη περίπτωση από όταν έχει πρώτα μεταγλωττιστεί το ερώτημα. Σε αυτό το παράδειγμα, το αρχικό σχέδιο δημιουργεί ένα σχέδιο "Σάρωση" που διαβάζει όλες τις γραμμές για να βρείτε κάθε τιμή που ταιριάζει με την παράμετρο:

![Υποβολή ερωτήματος της ρύθμισης, χρησιμοποιώντας ένα πρόγραμμα σάρωσης](./media/sql-database-performance-guidance/query_tuning_1.png)

Επειδή θα σας να εκτελεστεί η διαδικασία, χρησιμοποιώντας την τιμή 1, το πρόγραμμα που προκύπτει ήταν βέλτιστη για την τιμή 1, αλλά δεν ήταν δευτερεύουσα προαιρετική για όλες τις άλλες τιμές στον πίνακα. Το αποτέλεσμα πιθανότατα δεν είναι αυτό που θα θέλετε εάν επρόκειτο να επιλέξτε κάθε πρόγραμμα τυχαία, επειδή το πρόγραμμα εκτελεί πιο αργά και χρησιμοποιεί περισσότερους πόρους.

Εάν εκτελείτε τη δοκιμή με `SET STATISTICS IO` οριστεί σε `ON`, πραγματοποιείται η εργασία λογική σάρωση σε αυτό το παράδειγμα στο παρασκήνιο. Μπορείτε να δείτε ότι υπάρχουν 1,148 διαβάζει που πραγματοποιήθηκε από το πρόγραμμα (το οποίο είναι αποτελεσματική, εάν είναι η μέση πεζών και κεφαλαίων γραμμάτων για να επιστρέψετε μόνο μία γραμμή):

![Ερώτημα, χρησιμοποιώντας μια λογική σάρωση της ρύθμισης](./media/sql-database-performance-guidance/query_tuning_2.png)

Το δεύτερο τμήμα της το παράδειγμα χρησιμοποιεί μια υπόδειξη ερώτημα για να υποδείξετε η βελτιστοποίηση για να χρησιμοποιήσετε μια συγκεκριμένη τιμή κατά τη διαδικασία μεταγλώττισης. Σε αυτήν την περίπτωση, το επιβάλλει τον επεξεργαστή ερωτήματος για να αγνοήσετε την τιμή που μεταβιβάζεται ως την παράμετρο, και αντί για αυτό να προσαρμοστούν `UNKNOWN`. Αυτό αναφέρεται σε μια τιμή που έχει τη μέση συχνότητα στον πίνακα (συνάρτηση skew παραβλέποντας). Το πρόγραμμα που προκύπτει είναι ένα πρόγραμμα που βασίζεται σε αναζήτηση που είναι γρηγορότερο και χρησιμοποιεί λιγότερους πόρους, κατά μέσο όρο, από το πρόγραμμα σε αυτό το παράδειγμα μέρος 1:

![Ρύθμιση ερωτήματος, χρησιμοποιώντας μια υπόδειξη ερωτήματος](./media/sql-database-performance-guidance/query_tuning_3.png)

Μπορείτε να δείτε το αποτέλεσμα του πίνακα **sys.resource_stats** (υπάρχει μια καθυστέρηση από τη στιγμή που μπορείτε να εκτελέσετε τον έλεγχο και όταν τα δεδομένα συμπληρώνει τον πίνακα). Για αυτό το παράδειγμα, μέρος 1 εκτελεστεί κατά τη διάρκεια του χρονικού διαστήματος 22:25:00 και μέρος 2 εκτελεστεί στις 22:35:00. Σημειώστε ότι η παλαιότερη χρονικού διαστήματος χρησιμοποιείται περισσότερους πόρους σε αυτό το παράθυρο ώρα από τη νεότερη έκδοση (λόγω βελτιώσεις απόδοσης πρόγραμμα).

    SELECT TOP 1000 *
    FROM sys.resource_stats
    WHERE database_name = 'resource1'
    ORDER BY start_time DESC

![Ρύθμιση παράδειγμα αποτελεσμάτων ερωτήματος](./media/sql-database-performance-guidance/query_tuning_4.png)

>[AZURE.NOTE] Παρόλο που η ένταση σε αυτό το παράδειγμα είναι σκόπιμα μικρό, το αποτέλεσμα της δευτερεύουσα προαιρετική παραμέτρους μπορεί να είναι ουσιαστικά, ειδικά σε μεγαλύτερες βάσεις δεδομένων. Η διαφορά, σε ακραίες περιπτώσεις, μπορεί να είναι μεταξύ δευτερόλεπτα για γρήγορη υποθέσεις και ώρες για αργή περιπτώσεις.

Μπορείτε να εξετάσετε **sys.resource_stats** για να προσδιορίσετε αν ο πόρος για μια δοκιμαστική χρησιμοποιεί πόρους περισσότερα ή λιγότερα από μια άλλη δοκιμής. Όταν συγκρίνετε δεδομένα, διαχωρίστε το χρονισμό των δοκιμών ώστε να μην είναι στο ίδιο παράθυρο 5 λεπτών στην προβολή **sys.resource_stats** . Ο στόχος της άσκησης είναι για να ελαχιστοποιήσετε το συνολικό ποσό των τους πόρους που χρησιμοποιούνται και όχι για να ελαχιστοποιήσετε τους πόρους κορύφωσης. Γενικά, βελτιστοποιώντας ένα τμήμα κώδικα για λανθάνων χρόνος μειώνει επίσης κατανάλωση πόρων. Βεβαιωθείτε ότι απαιτούνται οι αλλαγές που κάνετε σε μια εφαρμογή και ότι οι αλλαγές δεν επηρεάζουν αρνητικά την εμπειρία του πελάτη για κάποιον που μπορεί να χρησιμοποιείτε υποδείξεις ερωτήματος στην εφαρμογή.

Εάν ένα φόρτο εργασίας έχει ένα σύνολο επαναλαμβανόμενων ερωτημάτων, συχνά έχει νόημα να καταγράψετε και να επικυρώσει τα βελτιστοποίησης από τις επιλογές προγράμματος, επειδή το μονάδες τη μονάδα μέγεθος ελάχιστη πόρων που απαιτείται για τη φιλοξενία της βάσης δεδομένων. Μετά από την επαλήθευση, μερικές φορές reexamine τα προγράμματα για να βεβαιωθείτε ότι δεν έχετε υποβαθμισμένο. Μπορείτε να μάθετε περισσότερα σχετικά με τις [υποδείξεις ερωτήματος (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).

### <a name="cross-database-sharding"></a>Sharding σταυρό-βάσης δεδομένων
Επειδή η βάση δεδομένων SQL Azure εκτελείται σε αγαθό υλικό, τα όρια χωρητικότητα για μία βάση δεδομένων είναι χαμηλότερη από για την εγκατάσταση του SQL Server παραδοσιακή εσωτερικής εγκατάστασης. Ορισμένοι πελάτες Χρησιμοποιήστε sharding τεχνικές για να διαδώσετε λειτουργίες της βάσης δεδομένων σε πολλές βάσεις δεδομένων όταν οι λειτουργίες δεν χωρά εντός των ορίων των μία βάση δεδομένων σε βάση δεδομένων SQL Azure. Οι περισσότεροι πελάτες που χρησιμοποιούν τεχνικές sharding στη βάση δεδομένων SQL Azure Διαιρέστε τα δεδομένα τους σε μία διάσταση σε πολλές βάσεις δεδομένων. Για αυτήν την προσέγγιση, πρέπει να κατανοήσετε ότι οι εφαρμογές Συναλλαγής εκτελούν συχνά συναλλαγές που εφαρμόζονται σε μία μόνο γραμμή ή σε μια μικρή ομάδα γραμμών του σχήματος.

>[AZURE.NOTE] Βάση δεδομένων SQL παρέχει τώρα μια βιβλιοθήκη για να σας βοηθήσει με sharding. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Επισκόπηση βιβλιοθήκη ελαστικότητας βάσης δεδομένων υπολογιστή-πελάτη](sql-database-elastic-database-client-library.md).

Για παράδειγμα, εάν μια βάση δεδομένων έχει όνομα πελάτη, σειρά και λεπτομέρειες παραγγελίας (όπως το παράδειγμα παραδοσιακή βάσης δεδομένων Northwind που διατίθεται με τον SQL Server), που θα μπορούσε να διαιρέστε αυτών των δεδομένων σε πολλές βάσεις δεδομένων, ομαδοποιώντας έναν πελάτη με τη σχετική σειρά και πληροφορίες λεπτομερειών παραγγελίας. Μπορείτε να είστε βέβαιοι ότι ο πελάτης δεδομένων παραμένει σε μία βάση δεδομένων. Η εφαρμογή θα διαιρέσετε διαφορετικούς πελάτες σε βάσεις δεδομένων, αποτελεσματική που η φόρτωση σε πολλές βάσεις δεδομένων. Με sharding, πελάτες όχι μόνο να αποφύγετε το όριο μεγέθους μέγιστο βάσης δεδομένων, αλλά βάση δεδομένων SQL Azure που επίσης μπορεί να επεξεργαστεί φόρτους εργασίας που είναι πολύ μεγαλύτερο από τα όρια των επιπέδων διαφορετικών επιδόσεων, με την προϋπόθεση ότι κάθε μεμονωμένη βάση δεδομένων σχετίζεται με το DTU.

Παρόλο που η βάση δεδομένων sharding δεν μειωθεί η δυναμικότητα συγκεντρωτικών πόρων για μια λύση, είναι ιδιαίτερα αποτελεσματική στην υποστήριξη πολύ μεγάλες λύσεις που εκτείνονται στις πολλές βάσεις δεδομένων. Να εκτελέσετε κάθε βάση δεδομένων με διαφορετικό επίπεδο επιδόσεων για την υποστήριξη πολύ μεγάλες, "αποτελεσματικές" βάσεις δεδομένων με τις απαιτήσεις υψηλής πόρων.

### <a name="functional-partitioning"></a>Λειτουργική διαμερισμάτων
Χρήστες του SQL Server Συνδυάστε συχνά πολλές συναρτήσεις σε μία βάση δεδομένων. Για παράδειγμα, εάν μια εφαρμογή έχει λογική για τη Διαχείριση αποθεμάτων για ένα χώρο αποθήκευσης, αυτής της βάσης δεδομένων μπορεί να έχουν λογικής που σχετίζεται με την απογραφή, παρακολούθηση παραγγελίες αγοράς, αποθηκευμένων διαδικασιών και προβολές με ευρετήριο ή επελεύσεως που Διαχείριση αναφορών τέλος του μήνα. Αυτή η τεχνική διευκολύνει να διαχειριστείτε τη βάση δεδομένων για εργασίες όπως η δημιουργία αντιγράφων ασφαλείας, αλλά μπορείτε να αλλάξετε το μέγεθος του υλικού για το χειρισμό η φόρτωση κορύφωσης σε όλες τις συναρτήσεις μιας εφαρμογής του απαιτεί επίσης.

Εάν χρησιμοποιείτε μια αρχιτεκτονική κλιμάκωσης σε βάση δεδομένων SQL Azure, είναι καλή ιδέα να διαιρέσετε διαφορετικές συναρτήσεις μιας εφαρμογής σε διαφορετικές βάσεις δεδομένων. Με αυτήν την τεχνική, κάθε εφαρμογή κλίμακες ανεξάρτητα. Όπως μια εφαρμογή γίνεται πιο απασχολημένος (και αυξάνεται η φόρτωση στη βάση δεδομένων), ο διαχειριστής να επιλέξετε επίπεδα ανεξάρτητη επιδόσεων για κάθε συνάρτηση στην εφαρμογή. Στο όριο, με αυτήν την αρχιτεκτονική, μια εφαρμογή μπορεί να είναι μεγαλύτερο από έναν υπολογιστή μόνο αγαθό μπορεί να χειριστεί επειδή η φόρτωση εκτείνεται σε πολλούς υπολογιστές.

### <a name="batch-queries"></a>Μαζική ερωτημάτων
Για τις εφαρμογές που έχουν πρόσβαση σε δεδομένα με τη χρήση μεγάλου όγκου, συχνά, ad hoc υποβολή ερωτημάτων, ένα σημαντικό χρονικό διάστημα απόκρισης είναι αναλώσατε δικτύου επικοινωνία μεταξύ το επίπεδο εφαρμογής και το επίπεδο βάσης δεδομένων SQL Azure. Ακόμα και όταν τόσο η εφαρμογή και η βάση δεδομένων SQL Azure είναι στο ίδιο κέντρο δεδομένων, η αδράνεια δικτύου μεταξύ των δύο μπορεί να είναι μεγέθυνση με μεγάλο αριθμό δεδομένων λειτουργίες της access. Για να μειώσετε το δίκτυο round trips για τις λειτουργίες πρόσβασης δεδομένων, μπορείτε να χρησιμοποιήσετε την επιλογή για μαζική είτε το ad hoc ερωτημάτων ή για να μεταγλωττίσετε τους ως αποθηκευμένες διαδικασίες. Εάν μαζική το ad hoc ερωτημάτων, μπορείτε να στείλετε πολλών ερωτημάτων ως ένα μεγάλο δέσμη σε ένα μεμονωμένο ταξίδι με βάση δεδομένων SQL Azure. Εάν μεταγλωττίσετε ad hoc ερωτημάτων σε μια αποθηκευμένη διαδικασία, θα μπορούσατε να επιτύχετε το ίδιο αποτέλεσμα σαν μαζική τους. Χρησιμοποιώντας μια αποθηκευμένη διαδικασία σάς δίνει επίσης το όφελος αύξησης τις πιθανότητες σε cache του προγράμματος του ερωτήματος σε βάση δεδομένων SQL Azure, ώστε να μπορείτε να χρησιμοποιήσετε ξανά την αποθηκευμένη διαδικασία.

Ορισμένες εφαρμογές είναι στενής εγγραφής. Ορισμένες φορές μπορείτε να μειώσετε το συνολικό φορτίο εισόδου/εξόδου σε μια βάση δεδομένων, εξετάζοντας τον τρόπο για μαζική εγγραφές μαζί. Συχνά, αυτή είναι τόσο απλή όσο η χρησιμοποιώντας ρητή συναλλαγές αντί για αυτόματη ολοκλήρωση συναλλαγών σε αποθηκευμένες διαδικασίες και ad hoc δέσμες. Για την αξιολόγηση της διάφορες τεχνικές που μπορείτε να χρησιμοποιήσετε, ανατρέξτε στο θέμα [Batching τεχνικές για εφαρμογές βάσης δεδομένων SQL Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx). Πειραματιστείτε με τη δική σας φόρτο εργασίας για να βρείτε το σωστό μοντέλο για δέσμης. Φροντίστε να κατανοήσετε ότι ένα μοντέλο μπορεί να έχει ελαφρώς διαφορετικές συναλλαγών συνέπειας εγγυήσεις. Μπορείτε να βρείτε το σωστό φόρτο εργασίας που ελαχιστοποιεί χρήσης πόρων απαιτεί μπορείτε να βρείτε το σωστό συνδυασμό συνέπειας και επιδόσεων τα ανταλλάγματα.

### <a name="application-tier-caching"></a>Προσωρινή αποθήκευση επίπεδο εφαρμογής
Ορισμένες εφαρμογές βάσης δεδομένων να ανάγνωση χοντρό φόρτους εργασίας. Αποθήκευση σε cache επίπεδα μπορεί να μειωθεί η φόρτωση στη βάση δεδομένων και πιθανώς ενδέχεται να μειώσετε το επίπεδο επιδόσεων που απαιτείται για την υποστήριξη μιας βάσης δεδομένων με τη χρήση της βάσης δεδομένων SQL Azure. Με το [Azure Redis Cache](https://azure.microsoft.com/services/cache/), εάν έχετε ένα φόρτο εργασίας χοντρό ανάγνωση, μπορείτε να διαβάσετε τα δεδομένα μόνο μία φορά (ή ενδεχομένως μία φορά σε κάθε επίπεδο εφαρμογής υπολογιστή, ανάλογα με το πώς έχει ρυθμιστεί), και, στη συνέχεια, να αποθηκεύσετε αυτά τα δεδομένα εκτός της βάσης δεδομένων SQL. Αυτός είναι ένας τρόπος για να μειώσετε φόρτωσης βάσης δεδομένων (CPU και ανάγνωση εισόδου/εξόδου), αλλά υπάρχει ένα εφέ σε συναλλαγών συνέπεια, επειδή τα δεδομένα που διαβάζονται από το cache ενδέχεται να μην είναι συγχρονισμένο με τα δεδομένα στη βάση δεδομένων. Παρόλο που σε πολλές εφαρμογές ορισμένες επίπεδο ασυνέπεια είναι αποδεκτή, που δεν ισχύει για όλους τους φόρτους εργασίας. Θα πρέπει να κατανοήσετε τις απαιτήσεις της εφαρμογής πλήρως πριν να εφαρμόσετε μια στρατηγική επίπεδο εφαρμογής σε cache.

## <a name="next-steps"></a>Επόμενα βήματα

- Για περισσότερες πληροφορίες σχετικά με τα επίπεδα υπηρεσίας, ανατρέξτε στο θέμα [Επιλογές βάσης δεδομένων SQL και επιδόσεων](sql-database-service-tiers.md)
- Για περισσότερες πληροφορίες σχετικά με τα σύνολα ελαστικότητας βάσης δεδομένων, ανατρέξτε στο θέμα [Τι είναι ένα χώρο συγκέντρωσης Azure ελαστικότητας βάσης δεδομένων;](sql-database-elastic-pool.md)
- Για πληροφορίες σχετικά με τις επιδόσεις και χώρους συγκέντρωσης ελαστικότητας βάσης δεδομένων, ανατρέξτε στο θέμα [πότε πρέπει να λάβετε υπόψη ένα χώρο συγκέντρωσης ελαστικότητας βάσης δεδομένων](sql-database-elastic-pool-guidance.md)
