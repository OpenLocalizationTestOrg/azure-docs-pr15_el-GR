<properties
    pageTitle="Ενεργό παν αναπαραγωγής για βάση δεδομένων SQL Azure"
    description="Ενεργό παν-αναπαραγωγής σάς επιτρέπει να ρυθμίσετε 4 αντίγραφα της βάσης δεδομένων σας σε οποιαδήποτε από το Azure κέντρα δεδομένων."
    services="sql-database"
    documentationCenter="na"
    authors="stevestein"
    manager="jhubbard"
    editor="monicar" />


<tags
    ms.service="sql-database"
    ms.devlang="na"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="NA"
    ms.date="09/26/2016"
    ms.author="sstein" />

# <a name="overview-sql-database-active-geo-replication"></a>Επισκόπηση: SQL αναπαραγωγή βάσης δεδομένων Active παν-

Ενεργό παν-αναπαραγωγής σάς επιτρέπει να ρυθμίσετε τις παραμέτρους έως και τέσσερα αναγνώσιμο δευτερεύοντα βάσεις δεδομένων στις ίδιες ή σε διαφορετικές δεδομένων κέντρου θέσεις (περιοχές). Δευτερεύουσα βάσεις δεδομένων είναι διαθέσιμες για την υποβολή ερωτημάτων και για ανακατεύθυνση στην περίπτωση μιας μη διαθεσιμότητα του κέντρου δεδομένων ή αδυναμία για να συνδεθείτε με την κύρια βάση δεδομένων.

>[AZURE.NOTE] Ενεργό παν αναπαραγωγής (αναγνώσιμα secondaries) είναι τώρα διαθέσιμο για όλες τις βάσεις δεδομένων σε όλα τα επίπεδα εξυπηρέτησης. Στο 2017 Απριλίου, ο μη αναγνώσιμο δευτερεύων τύπος θα είναι απόσυρση και υπάρχουσες βάσεις δεδομένων δεν είναι αναγνώσιμο θα αναβαθμιστούν αυτόματα σε ευανάγνωστη secondaries.

 Μπορείτε να ρυθμίσετε τις παραμέτρους ενεργό παν αναπαραγωγής χρησιμοποιώντας την [πύλη του Azure](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), ή το [REST API - Δημιουργία ή ενημέρωση βάσης δεδομένων](https://msdn.microsoft.com/library/azure/mt163685.aspx).

> [AZURE.SELECTOR]
- [Ρύθμιση παραμέτρων: Πύλη Azure](sql-database-geo-replication-portal.md)
- [Ρύθμιση παραμέτρων: PowerShell](sql-database-geo-replication-powershell.md)
- [Ρύθμιση παραμέτρων: T-SQL](sql-database-geo-replication-transact-sql.md)

Εάν, για κάποιο λόγο αποτυγχάνει την κύρια βάση δεδομένων ή απλώς πρέπει να πραγματοποιηθεί χωρίς σύνδεση, μπορείτε να κάνετε *ανακατεύθυνση* σε οποιαδήποτε από τις δευτερεύουσες βάσεις δεδομένων. Όταν είναι ενεργοποιημένη η ανακατεύθυνση σε μία από τις δευτερεύουσες βάσεις δεδομένων, όλες οι άλλες secondaries συνδέονται αυτόματα με τη νέα κύρια.

Μπορείτε να κάνετε ανακατεύθυνση σε δευτερεύον χρησιμοποιώντας την [πύλη του Azure](sql-database-geo-replication-failover-portal.md), [PowerShell](sql-database-geo-replication-failover-powershell.md), [Transact-SQL](sql-database-geo-replication-failover-transact-sql.md), το [REST API - προγραμματισμένη ανακατεύθυνσης](https://msdn.microsoft.com/ibrary/azure/mt575007.aspx)ή [REST API - μη προγραμματισμένη ανακατεύθυνσης](https://msdn.microsoft.com/library/azure/mt582027.aspx).


> [AZURE.SELECTOR]
- [Ανακατεύθυνση: Πύλη Azure](sql-database-geo-replication-failover-portal.md)
- [Ανακατεύθυνση: PowerShell](sql-database-geo-replication-failover-powershell.md)
- [Ανακατεύθυνση: T-SQL](sql-database-geo-replication-failover-transact-sql.md)

Μετά την ανακατεύθυνση, βεβαιωθείτε ότι έχουν ρυθμιστεί οι απαιτήσεις ελέγχου ταυτότητας για το διακομιστή και βάσης δεδομένων στην νέα κύρια. Για λεπτομέρειες, ανατρέξτε στο θέμα [ασφαλείας βάσης δεδομένων SQL μετά την αποκατάσταση](sql-database-geo-replication-security-config.md).


Η δυνατότητα Active παν-αναπαραγωγής υλοποιεί μηχανισμό για την παροχή πλεονασμού βάσης δεδομένων μέσα στην ίδια περιοχή Microsoft Azure ή σε διαφορετικές περιοχές (παν-πλεονασμού). Ενεργό παν-αναπαραγωγής αναπαράγει ασύγχρονα δεσμευμένη συναλλαγές από μια βάση δεδομένων σε έως και τέσσερα αντίγραφα της βάσης δεδομένων σε διαφορετικούς διακομιστές, χρησιμοποιώντας Διαβάστε δεσμευμένη στιγμιότυπο απομόνωσης (RCSI) για απομόνωση. Κατά τη ρύθμιση παραμέτρων ενεργού παν-αναπαραγωγής, δημιουργείται μια δευτερεύουσα βάση δεδομένων στον καθορισμένο διακομιστή. Η αρχική βάση δεδομένων γίνεται την κύρια βάση δεδομένων. Την κύρια βάση δεδομένων αναπαράγει ασύγχρονα ολοκληρωμένων συναλλαγών σε κάθε μία από τις δευτερεύουσες βάσεις δεδομένων. Μόνο οι πλήρεις κινήσεις γίνεται αναπαραγωγή. Ενώ σε οποιοδήποτε συγκεκριμένο σημείο, δευτερεύοντα βάσης δεδομένων μπορεί να είναι λίγο πίσω από την κύρια βάση δεδομένων, τα δεδομένα του δευτερεύοντος εγγυάται για να μην χρειάζεται ποτέ μερική συναλλαγές. Μπορείτε να βρείτε τα συγκεκριμένα δεδομένα RPO στην [Επισκόπηση των αδιάκοπη παροχή υπηρεσιών](sql-database-business-continuity.md).

Ένα από τα βασικά οφέλη του ενεργού παν-αναπαραγωγής είναι ότι παρέχει μια λύση αποκατάστασης από καταστροφή επίπεδο βάσης δεδομένων με το χρόνο χαμηλής αποκατάστασης. Όταν τοποθετείτε το δευτερεύον βάσης δεδομένων σε ένα διακομιστή σε διαφορετική περιοχή, μπορείτε να προσθέσετε μέγιστο ανθεκτικότητα στην εφαρμογή σας. Περιοχή σταυρό πλεονασμού επιτρέπει σε εφαρμογές για την ανάκτηση από μια οριστική απώλεια ένα κέντρο δεδομένων ολόκληρο ή τμήματα ενός κέντρου δεδομένων που προκαλούνται από θεομηνίες, καταστροφική human σφάλματα ή κακόβουλες πράξεις. Η παρακάτω εικόνα δείχνει ένα παράδειγμα του ενεργού παν-αναπαραγωγής έχουν ρυθμιστεί με έναν πρωτεύοντα στην περιοχή Βόρεια κεντρική ΜΑΣ και δευτερεύουσας στην περιοχή Νότια κεντρικής ΜΑΣ.

![Σχέση παν αναπαραγωγής](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

Ένα άλλο βασικό πλεονέκτημα είναι ότι οι δευτερεύοντα βάσεις δεδομένων είναι δυνατή η ανάγνωση και μπορεί να χρησιμοποιηθεί για μείωση φόρτου φόρτους εργασίας μόνο για ανάγνωση, όπως αναφοράς εργασίες. Εάν σκοπεύετε να χρησιμοποιήσετε τη δευτερεύουσα βάση δεδομένων για την εξισορρόπηση φόρτου, μπορείτε να το δημιουργήσετε στην ίδια περιοχή ως κύρια. Δημιουργία μιας δευτερεύουσας στην ίδια περιοχή, δεν αυξάνει ανθεκτικότητα της εφαρμογής για να καταστροφική αποτυχίες.  

Άλλα σενάρια όπου μπορεί να χρησιμοποιηθεί ενεργό παν-αναπαραγωγής περιλαμβάνουν τα εξής:

- **Μετεγκατάσταση βάσης δεδομένων**: μπορείτε να χρησιμοποιήσετε ενεργό παν-αναπαραγωγής για μετεγκατάσταση βάσης δεδομένων από ένα διακομιστή σε κάποιο άλλο online με ελάχιστο χρόνο εκτός λειτουργίας.
- **Εφαρμογή αναβαθμίσεις**: μπορείτε να δημιουργήσετε μια επιπλέον δευτερεύον ως αντίγραφο πίσω πρόβλημα κατά τη διάρκεια της εφαρμογής αναβαθμίσεις του στοιχείου.

Για να επιτύχετε αδιάκοπη πραγματικό, προσθήκη πλεονασμού βάσης δεδομένων μεταξύ κέντρα δεδομένων είναι μόνο μέρος της λύσης. Ανάκτηση μιας εφαρμογής (υπηρεσία) για να ολοκληρωμένες μετά την ανάκτηση όλων των στοιχείων που αποτελούν την υπηρεσία και εξαρτώμενες υπηρεσίες απαιτεί καταστροφική αστοχία. Παραδείγματα από αυτά τα στοιχεία περιλαμβάνουν το λογισμικό προγράμματος-πελάτη (για παράδειγμα, ένα πρόγραμμα περιήγησης με ένα προσαρμοσμένο JavaScript), περιβάλλοντα χρήστη web, χώρος αποθήκευσης και DNS. Είναι σημαντικό ότι όλα τα στοιχεία είναι είναι ανθεκτικά στις το ίδιο αποτυχίες και γίνονται διαθέσιμες εντός του στόχου χρόνου αποκατάστασης (RTO) της εφαρμογής σας. Επομένως, πρέπει να προσδιορίσετε όλες τις εξαρτώμενες υπηρεσίες και να κατανοήσετε τις εγγυήσεις και τις δυνατότητες που παρέχουν. Στη συνέχεια, πρέπει να ακολουθήσετε επαρκής βήματα για να βεβαιωθείτε ότι το συναρτήσεις υπηρεσίας κατά τη διάρκεια του εφεδρικού των υπηρεσιών από την οποία εξαρτάται. Για περισσότερες πληροφορίες σχετικά με τη σχεδίαση λύσεων για αποκατάσταση, ανατρέξτε στο θέμα [Σχεδίαση λύσεων Cloud για καταστροφή αποκατάστασης χρησιμοποιώντας ενεργό παν-αναπαραγωγή](sql-database-designing-cloud-solutions-for-disaster-recovery.md).

## <a name="active-geo-replication-capabilities"></a>Ενεργό δυνατότητες παν αναπαραγωγής
Η δυνατότητα Active παν-αναπαραγωγής παρέχει τις ακόλουθες βασικές δυνατότητες:

- **Η αυτόματη αναπαραγωγή ασύγχρονης**: μπορείτε να δημιουργήσετε μόνο ένα δευτερεύον βάσης δεδομένων, προσθέτοντας μια υπάρχουσα βάση δεδομένων. Το δευτερεύον μπορούν να δημιουργηθούν μόνο σε διαφορετικό διακομιστή βάσης δεδομένων SQL Azure. Μετά τη δημιουργία, τη βάση δεδομένων δευτερεύοντα συμπληρώνεται με τα δεδομένα που αντιγράψατε από την κύρια βάση δεδομένων. Αυτή η διαδικασία είναι γνωστό ως καλλιέργεια. Μετά τη δευτερεύουσα βάση δεδομένων έχει δημιουργηθεί και τοποθετούνται, ενημερώσεις για την κύρια βάση δεδομένων ασύγχρονα αναπαράγονται στη βάση δεδομένων του δευτερεύοντα αυτόματα. Ασύγχρονη αναπαραγωγής σημαίνει ότι συναλλαγές δεσμευμένου κύρια βάση δεδομένων πριν από την αναπαραγωγή στη δευτερεύουσα βάση δεδομένων. 

- **Πολλά δευτερεύοντα βάσεις δεδομένων**: δύο ή περισσότερες δευτερεύουσες βάσεις δεδομένων αυξήσετε πλεονασμού και το επίπεδο προστασίας για την κύρια βάση δεδομένων και την εφαρμογή. Εάν υπάρχουν πολλά δευτερεύοντα βάσεις δεδομένων, η εφαρμογή παραμένει προστατευμένο ακόμα και εάν ένα από τα δευτερεύοντα βάσεις δεδομένων αποτυγχάνει. Εάν υπάρχει μόνο μία δευτερεύουσα βάση δεδομένων και αποτύχει, η εφαρμογή εκτίθεται σε μεγαλύτερο κίνδυνο μέχρι να δημιουργηθεί μια νέα δευτερεύουσα βάση δεδομένων.

- **Αναγνώσιμο δευτερεύοντα βάσεις δεδομένων**: μια εφαρμογή να αποκτήσετε πρόσβαση σε μια βάση δεδομένων δευτερεύοντα για λειτουργίες μόνο για ανάγνωση, χρησιμοποιώντας το ίδιο ή σε διαφορετικό ασφάλεια χρησιμοποιείται για να αποκτήσετε πρόσβαση στην κύρια βάση δεδομένων. Τα δευτερεύοντα βάσεις δεδομένων λειτουργούν στη λειτουργία απομόνωσης στιγμιότυπο για να βεβαιωθείτε ότι η αναπαραγωγή από τις ενημερώσεις της κύριας (αρχείο καταγραφής αναπαραγωγής) δεν καθυστερεί από ερωτήματα που εκτελείται στο τη δευτερεύουσα.

>[AZURE.NOTE] Η αναπαραγωγή του αρχείου καταγραφής καθυστερεί δευτερεύοντα βάση δεδομένων, εάν υπάρχουν ενημερωμένες εκδόσεις σχήματος που λαμβάνει από την κύρια που απαιτούν κλείδωμα σχήματος σε δευτερεύοντα βάσης δεδομένων.

- **Ενεργό παν αναπαραγωγής των βάσεων δεδομένων ελαστικότητας χώρου συγκέντρωσης**: ενεργή παν-αναπαραγωγής μπορούν να ρυθμιστούν για κάθε βάση δεδομένων σε οποιονδήποτε χώρο συγκέντρωσης ελαστικότητας βάσης δεδομένων. Δευτερεύουσα βάσης δεδομένων μπορεί να είναι σε ένα άλλο σύνολο ελαστικότητας βάσης δεδομένων. Κανονική βάσεις δεδομένων, το δευτερεύον μπορεί να είναι ένα χώρο συγκέντρωσης και το αντίθετο ελαστικότητας βάσης δεδομένων με την προϋπόθεση ότι τα επίπεδα υπηρεσίας είναι τα ίδια. 

- **Επίπεδο επιδόσεων με δυνατότητα ρύθμισης παραμέτρων της βάσης δεδομένων δευτερεύοντα**: δευτερεύοντα βάσης δεδομένων μπορεί να δημιουργηθεί με χαμηλότερο επίπεδο επιδόσεων από την κύρια. Κύριες και δευτερεύουσες βάσεις δεδομένων πρέπει να έχουν το ίδιο επίπεδο υπηρεσιών. Αυτή η επιλογή δεν συνιστάται για εφαρμογές με υψηλή βάσης δεδομένων εγγραφή δραστηριότητας επειδή το απόκρισης αυξημένη αναπαραγωγής αυξάνει τον κίνδυνο απώλειας δεδομένων ουσιαστικά μετά ανακατεύθυνσης. Επιπλέον, μετά την ανακατεύθυνση της εφαρμογής επιδόσεις επηρεάζονται μέχρι η νέα κύρια έχει αναβαθμιστεί σε υψηλότερο επίπεδο επιδόσεων. Το γράφημα καταγραφής εισόδου/ΕΞΌΔΟΥ ποσοστό στην πύλη του Azure παρέχει ένας καλός τρόπος για να εκτιμήσετε το επίπεδο ελάχιστους επιδόσεων στο δευτερεύον που απαιτείται για να διατηρήσει η φόρτωση αναπαραγωγής. Για παράδειγμα, εάν την κύρια βάση δεδομένων είναι P6 (1000 DTU) και το αρχείο καταγραφής εισόδου/ΕΞΌΔΟΥ τοις εκατό είναι 50% στο δευτερεύον πρέπει να είναι τουλάχιστον P4 (500 DTU). Μπορείτε επίσης να ανακτήσετε τα δεδομένα εισόδου/ΕΞΌΔΟΥ καταγραφής χρησιμοποιώντας [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) ή [sys.dm_db_resource_stats]( https://msdn.microsoft.com/library/dn800981.aspx) προβολές βάσης δεδομένων.  Για περισσότερες πληροφορίες σχετικά με τις επιδόσεις της βάσης δεδομένων SQL, ανατρέξτε στο θέμα [Επιλογές βάσης δεδομένων SQL και επιδόσεων](sql-database-service-tiers.md). 

- **Ανακατεύθυνση ελέγχεται από το χρήστη και αποκατάσταση μετά από**: δευτερεύοντα βάσης δεδομένων μπορεί ρητά να αλλάξει στον πρωτεύοντα ρόλο οποιαδήποτε στιγμή από την εφαρμογή ή το χρήστη. Κατά τη διάρκεια μιας πραγματικό μη διαθεσιμότητα στην επιλογή "μη προγραμματισμένη" πρέπει να χρησιμοποιείται, που Προβιβάστε αμέσως δευτερεύον να είναι η κύρια. Όταν η κύρια αποτυχίας ανακτά και είναι διαθέσιμη ξανά, το σύστημα επισημαίνει τα ανακτημένα κύρια ως δευτερεύον αυτόματα και να την ενημερωμένη με τη νέα κύρια. Λόγω της ασύγχρονης φύσης της αναπαραγωγής, ένα μικρό όγκο δεδομένων ενδέχεται να χαθούν κατά τη διάρκεια μη προγραμματισμένη ανακατευθύνσεις εάν αποτύχει μια κύρια πριν από την αναπαράγει τις πιο πρόσφατες αλλαγές στο δευτερεύον. Όταν αποτύχει η πρωτεύοντος με πολλές secondaries μέσω, το σύστημα ρυθμίζει τις παραμέτρους των σχέσεων αναπαραγωγής αυτόματα και συνδέσεων το υπόλοιπο secondaries των κύριων που μόλις Προβιβασμένες χωρίς να απαιτείται παρέμβαση του χρήστη. Αφού μετριάζεται τη μη διαθεσιμότητα που προκάλεσαν την ανακατεύθυνση, μπορεί να είναι επιθυμητό για να επιστρέψει την εφαρμογή στην κύρια περιοχή. Για να το κάνετε αυτό, θα πρέπει να είναι δυνατή η εντολή ανακατεύθυνσης με την επιλογή "Προγραμματισμένη". 

- **Διατήρηση διαπιστευτήρια και κανόνες τείχους προστασίας σε συγχρονισμό**: συνιστάται η χρήση [βάσης δεδομένων κανόνες τείχους προστασίας](sql-database-firewall-configure.md) για αναπαραχθούν παν βάσεις δεδομένων επομένως αυτούς τους κανόνες μπορούν να αναπαραχθούν με τη βάση δεδομένων για να βεβαιωθείτε ότι όλες οι δευτερεύουσες βάσεις δεδομένων έχουν τους ίδιους κανόνες τείχους προστασίας ως την κύρια. Αυτή η προσέγγιση μειώνει την ανάγκη για τους πελάτες σας για να ρυθμίσετε με μη αυτόματο τρόπο και να διατηρούν κανόνες τείχους προστασίας για τους διακομιστές που φιλοξενούν τόσο τις βάσεις δεδομένων κύριας και δευτερεύουσας. Ομοίως, χρησιμοποιώντας [που περιέχονται χρήστες βάσεων δεδομένων](sql-database-manage-logins.md) για πρόσβαση σε δεδομένα εξασφαλίζει κύριων και δευτερευουσών βάσεις δεδομένων έχουν πάντα στον ίδιο χρήστη διαπιστευτήρια αυτό κατά τη διάρκεια της ανακατεύθυνσης, υπάρχει χωρίς διακοπές λόγω διαφορές με συνδέσεις και τους κωδικούς πρόσβασης. Με την προσθήκη του [Azure Active Directory](../active-directory/active-directory-whatis.md), πελάτες μπορούν να διαχειριστούν πρόσβασης χρήστη σε βάσεις δεδομένων της κύριας και δευτερεύουσας και καταργώντας την ανάγκη για τη Διαχείριση διαπιστευτηρίων σε βάσεις δεδομένων συνολικά.

## <a name="upgrading-or-downgrading-a-primary-database"></a>Αναβάθμιση ή η υποβάθμιση μια κύρια βάση δεδομένων
Μπορείτε να κάνετε αναβάθμιση ή να υποβιβάσετε μια κύρια βάση δεδομένων σε ένα επίπεδο διαφορετικό επιδόσεων (μέσα στο ίδιο επίπεδο υπηρεσίας) χωρίς να αποσυνδεθείτε βάσεων δεδομένων δευτερεύοντα. Κατά την αναβάθμιση, συνιστάται να που αναβαθμίσετε πρώτα τη δευτερεύουσα βάση δεδομένων και, στη συνέχεια, αναβάθμιση των κύριων. Όταν υποβάθμιση, αντιστροφή της σειράς: υποβιβάσετε των κύριων πρώτα και, στη συνέχεια, να υποβιβάσετε τη δευτερεύουσα. 

Δευτερεύουσα βάσης δεδομένων πρέπει να είναι στο ίδιο επίπεδο υπηρεσίας ως κύρια, ώστε να μετεγκατάσταση την κύρια βάση δεδομένων σε μια σειρά διαφορετική υπηρεσία απαιτεί να τερματίσει τη σύνδεση παν αναπαραγωγής και μετονομάστε τη δευτερεύουσα βάση δεδομένων, είτε απλώς αποθέστε το. Στη συνέχεια, μετεγκατάσταση των κύριων για το νέο επίπεδο υπηρεσιών και ρυθμίσει ξανά τις παραμέτρους παν αναπαραγωγής. Το νέο δευτερεύον θα δημιουργηθεί αυτόματα με το ίδιο επίπεδο επιδόσεων ως κύρια από προεπιλογή.

## <a name="preventing-the-loss-of-critical-data"></a>Αποτροπή της απώλειας κρίσιμων δεδομένων
Λόγω υψηλό λανθάνοντα χρόνο ευρύτερο δικτύων, λόγω των συνεχών αντίγραφο χρησιμοποιεί ένα μηχανισμό ασύγχρονης αναπαραγωγής. Ασύγχρονη αναπαραγωγής κάνει το ορισμένες απώλεια δεδομένων αναπόφευκτο εάν προκύψει σφάλμα. Ωστόσο, ορισμένες εφαρμογές ενδέχεται να απαιτούν χωρίς απώλεια δεδομένων. Για να προστατεύσετε αυτές τις κρίσιμες ενημερώσεις, προγραμματιστή της εφαρμογής να καλέσετε τη διαδικασία συστήματος [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) αμέσως μετά την οριστικοποίηση των συναλλαγή. Κλήση **sp_wait_for_database_copy_sync** μπλοκ συνομιλίας μέχρι να γίνει αναπαραγωγή της τελευταίας δεσμευμένη συναλλαγής στη δευτερεύουσα βάση δεδομένων. Η διαδικασία θα περιμένετε έως ότου όλες οι συναλλαγές σε ουρά έχουν έχουν αναγνωρίζεται από το δευτερεύον βάσης δεδομένων. **sp_wait_for_database_copy_sync** λειτουργία περιλαμβάνει έναν συγκεκριμένο συνεχής Αντιγραφή σύνδεσης. Οποιοσδήποτε χρήστης με τα δικαιώματα σύνδεσης με την κύρια βάση δεδομένων να καλέσετε αυτήν τη διαδικασία.

>[AZURE.NOTE] Την καθυστέρηση που προκαλούνται από μια κλήση διαδικασίας **sp_wait_for_database_copy_sync** μπορεί να είναι σημαντική. Την καθυστέρηση εξαρτάται από το μέγεθος του μήκους καταγραφής συναλλαγών τη χρονική στιγμή και αυτή η κλήση δεν επιστρέφει μέχρι να αναπαράγεται ολόκληρο το αρχείο καταγραφής. Αποφύγετε την κλήση αυτήν τη διαδικασία, εκτός εάν είναι απολύτως απαραίτητο.

## <a name="programmatically-managing-active-geo-replication"></a>Διαχείριση μέσω προγραμματισμού ενεργό παν-αναπαραγωγής

Όπως περιγράφεται παραπάνω, ενεργό παν-αναπαραγωγής μπορείτε επίσης να διαχειριστείτε μέσω προγραμματισμού με χρήση του PowerShell Azure και το REST API. Στους πίνακες που ακολουθούν περιγράφουν το σύνολο των διαθέσιμων εντολών.

- **Azure API διαχείρισης πόρων και της ασφάλειας βάσει ρόλων**: ενεργή παν-αναπαραγωγή περιλαμβάνει ένα σύνολο [API διαχείρισης πόρων Azure]( https://msdn.microsoft.com/library/azure/mt163571.aspx) για τη διαχείριση, συμπεριλαμβανομένων των [cmdlet του PowerShell που βασίζονται στο Azure διαχείριση πόρων](sql-database-geo-replication-powershell.md). Αυτά τα API απαιτούν τη χρήση των ομάδων πόρων και υποστήριξη της ασφάλειας βάσει ρόλων (RBAC). Για περισσότερες πληροφορίες σχετικά με τον τρόπο για την υλοποίηση της access ρόλους ανατρέξτε στο θέμα [Έλεγχος πρόσβασης Azure Role-Based](../active-directory/role-based-access-control-configure.md).

>[AZURE.NOTE] Πολλές νέες δυνατότητες του ενεργού παν-αναπαραγωγής υποστηρίζονται μόνο με [Τη διαχείριση πόρων Azure](../azure-resource-manager/resource-group-overview.md) με βάση [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) και [cmdlet του PowerShell βάσης δεδομένων SQL Azure](https://msdn.microsoft.com/library/azure/mt574084.aspx). (Κλασική) REST API] (https://msdn.microsoft.com/library/azure/dn505719.aspx) και [(κλασική) cmdlet για βάση δεδομένων SQL Azure](https://msdn.microsoft.com/library/azure/dn546723.aspx) που υποστηρίζονται για συμβατότητα με προηγούμενες εκδόσεις, ώστε να χρησιμοποιώντας τα API διαχείρισης πόρων Azure βάσει συνιστάται. 


### <a name="transact-sql"></a>Transact-SQL

|Εντολή|Περιγραφή|
|-------|-----------|
|[ΤΡΟΠΟΠΟΊΗΣΗ βάσης ΔΕΔΟΜΈΝΩΝ (βάση δεδομένων SQL Azure)](https://msdn.microsoft.com/library/mt574871.aspx)|Χρησιμοποιήστε το όρισμα Προσθήκη ΔΕΥΤΕΡΕΎΟΝΤΑ ΔΙΑΚΟΜΙΣΤΉ Ενεργοποιηση για να δημιουργήσετε μια δευτερεύουσα βάση δεδομένων για μια υπάρχουσα βάση δεδομένων και έναρξη αναπαραγωγή δεδομένων|
|[ΤΡΟΠΟΠΟΊΗΣΗ βάσης ΔΕΔΟΜΈΝΩΝ (βάση δεδομένων SQL Azure)](https://msdn.microsoft.com/library/mt574871.aspx)|Χρήση ΑΝΑΚΑΤΕΎΘΥΝΣΗΣ ή FORCE_FAILOVER_ALLOW_DATA_LOSS για να κάνετε εναλλαγή δευτερεύοντα βάσης δεδομένων να είναι πρωτεύον για να ξεκινήσετε ανακατεύθυνσης
|[ΤΡΟΠΟΠΟΊΗΣΗ βάσης ΔΕΔΟΜΈΝΩΝ (βάση δεδομένων SQL Azure)](https://msdn.microsoft.com/library/mt574871.aspx)|Χρησιμοποιήστε ΚΑΤΆΡΓΗΣΗ ΔΕΥΤΕΡΕΎΟΝΤΑ ΔΙΑΚΟΜΙΣΤΉ Ενεργοποιηση για να τερματίσετε μια αναπαραγωγή δεδομένων μεταξύ μια βάση δεδομένων SQL και το καθορισμένο δευτερεύοντα βάσης δεδομένων.|
|[sys.geo_replication_links (βάση δεδομένων SQL Azure)](https://msdn.microsoft.com/library/mt575501.aspx)|Επιστρέφει πληροφορίες σχετικά με όλες τις υπάρχουσες συνδέσεις αναπαραγωγής για κάθε βάση δεδομένων στο διακομιστή βάσης δεδομένων SQL Azure λογική.|
|[sys.dm_geo_replication_link_status (βάση δεδομένων SQL Azure)](https://msdn.microsoft.com/library/mt575504.aspx)|Λαμβάνει την τελευταία φορά αναπαραγωγής, τελευταία αναπαραγωγής απόκρισης και άλλες πληροφορίες σχετικά με τη σύνδεση αναπαραγωγής για μια δεδομένη βάση δεδομένων SQL.|
|[sys.dm_operation_status (βάση δεδομένων SQL Azure)](https://msdn.microsoft.com/library/dn270022.aspx)|Εμφανίζει την κατάσταση για όλες τις εργασίες βάσης δεδομένων συμπεριλαμβανομένης της κατάστασης των συνδέσεων αναπαραγωγής.|
|[sp_wait_for_database_copy_sync (βάση δεδομένων SQL Azure)](https://msdn.microsoft.com/library/dn467644.aspx)|έχει ως αποτέλεσμα η εφαρμογή να περιμένετε έως ότου όλες οι συναλλαγές δεσμευμένη είναι αναπαραχθούν και αναγνωρίζεται από την ενεργή δευτερεύοντα βάση δεδομένων.|
||||

### <a name="powershell"></a>PowerShell

|Cmdlet|Περιγραφή|
|------|-----------|
|[Get-AzureRmSqlDatabase](https://msdn.microsoft.com/en-us/library/azure/mt603648.aspx)|Λαμβάνει μία ή περισσότερες βάσεις δεδομένων.|
|[Νέα AzureRmSqlDatabaseSecondary](https://msdn.microsoft.com/library/mt603689.aspx)|Δημιουργεί μια δευτερεύουσα βάση δεδομένων για μια υπάρχουσα βάση δεδομένων και ξεκινά η αναπαραγωγή δεδομένων.|
|[Ορισμός AzureRmSqlDatabaseSecondary](https://msdn.microsoft.com/en-us/library/mt619393.aspx)|Πραγματοποιεί μετακίνηση μιας δευτερεύουσας βάσης δεδομένων να είναι πρωτεύον για να ξεκινήσετε ανακατεύθυνσης.|
|[Κατάργηση AzureRmSqlDatabaseSecondary](https://msdn.microsoft.com/en-us/library/mt603457.aspx)|Τερματίζει την αναπαραγωγή δεδομένων μεταξύ μια βάση δεδομένων SQL και το καθορισμένο δευτερεύοντα βάσης δεδομένων.|
|[Get-AzureRmSqlDatabaseReplicationLink](https://msdn.microsoft.com/library/mt619330.aspx)|Λαμβάνει τις συνδέσεις παν-αναπαραγωγής ανάμεσα σε μια βάση δεδομένων SQL Azure και μια ομάδα πόρων ή SQL Server.|
||||

### <a name="rest-api"></a>REST API

|API|Περιγραφή|
|---|-----------|
|[Δημιουργία ή ενημέρωση βάσης δεδομένων (createMode = επαναφορά)](https://msdn.microsoft.com/library/azure/mt163685.aspx)|Δημιουργεί, ενημερώνει ή επαναφέρει ένα πρωτεύον ή δευτερεύον βάσης δεδομένων.|
|[Λήψη, δημιουργία ή ενημέρωση κατάσταση της βάσης δεδομένων](https://msdn.microsoft.com/library/azure/mt643934.aspx)|Επιστρέφει την κατάσταση κατά τη διάρκεια μια λειτουργία δημιουργίας.|
|[Ορισμός δευτερεύοντα βάσης δεδομένων ως κύρια (προγραμματισμένες ανακατεύθυνσης)](https://msdn.microsoft.com/ibrary/azure/mt575007.aspx)|Προβιβασμός δευτερεύουσας βάσης δεδομένων σε μια συνεργασία παν αναπαραγωγής για να γίνει η νέα κύρια βάση δεδομένων.|
|[Ορισμός δευτερεύοντα βάσης δεδομένων ως κύρια (μη προγραμματισμένη ανακατεύθυνσης)](https://msdn.microsoft.com/library/azure/mt582027.aspx)|Για να επιβάλετε ανακατεύθυνσης στη δευτερεύουσα βάση δεδομένων και ορίστε τη δευτερεύουσα ως κύρια.|
|[Λάβετε συνδέσεις αναπαραγωγής](https://msdn.microsoft.com/library/azure/mt600929.aspx)|Λαμβάνει όλες τις συνδέσεις αναπαραγωγής για μια δεδομένη βάση δεδομένων SQL σε μια συνεργασία παν αναπαραγωγής. Ανακτά τις πληροφορίες που εμφανίζονται στην προβολή στον κατάλογο sys.geo_replication_links.|
|[Λήψη σύνδεσης αναπαραγωγής](https://msdn.microsoft.com/library/azure/mt600778.aspx)|Λαμβάνει μια σύνδεση συγκεκριμένες αναπαραγωγής για μια δεδομένη βάση δεδομένων SQL σε μια συνεργασία παν αναπαραγωγής. Ανακτά τις πληροφορίες που εμφανίζονται στην προβολή στον κατάλογο sys.geo_replication_links.|
||||



## <a name="next-steps"></a>Επόμενα βήματα

- Για μια επισκόπηση επιχειρηματικές συνέχειας και σενάρια, ανατρέξτε στο θέμα [Επισκόπηση επιχειρηματικές συνέχειας](sql-database-business-continuity.md)
- Για να μάθετε σχετικά με τη βάση δεδομένων SQL Azure αυτόματης δημιουργίας αντιγράφων ασφαλείας, ανατρέξτε στο θέμα [βάση δεδομένων SQL αυτόματης δημιουργίας αντιγράφων ασφαλείας](sql-database-automated-backups.md).
- Για να μάθετε πώς να χρησιμοποιείτε την αυτόματη δημιουργία αντιγράφων ασφαλείας για την ανάκτηση, ανατρέξτε στο θέμα [Επαναφορά βάσης δεδομένων από τα αντίγραφα ασφαλείας που ξεκινούν από την υπηρεσία](sql-database-recovery-using-backups.md).
- Για να μάθετε πώς να χρησιμοποιείτε την αυτόματη δημιουργία αντιγράφων ασφαλείας για την αρχειοθέτηση, ανατρέξτε στο θέμα [Αντιγραφή βάσης δεδομένων](sql-database-copy.md).
- Για να μάθετε σχετικά με τις απαιτήσεις ελέγχου ταυτότητας για μια νέα κύρια διακομιστής και βάση δεδομένων, ανατρέξτε στο θέμα [ασφαλείας βάσης δεδομένων SQL μετά την αποκατάσταση](sql-database-geo-replication-security-config.md).
