<properties 
   pageTitle="Δημιουργία αυτο-υπογεγραμμένο πιστοποιητικών για εικονικού δικτύου σημείου σε τοποθεσία σταυρό εσωτερική συνδέσεις με τη χρήση makecert | Microsoft Azure"
   description="Σε αυτό το άρθρο περιέχει βήματα για να χρησιμοποιήσετε makecert για τη δημιουργία αυτο-υπογεγραμμένο πιστοποιητικών στα Windows 10."
   services="vpn-gateway"
   documentationCenter="na"
   authors="cherylmc"
   manager="carmonm"
   editor=""
   tags="azure-resource-manager"/>
<tags 
   ms.service="vpn-gateway"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="08/22/2016"
   ms.author="cherylmc" />

# <a name="working-with-self-signed-certificates-for-point-to-site-connections"></a>Εργασία με αυτο-υπογεγραμμένο πιστοποιητικών για τις συνδέσεις του σημείου σε τοποθεσία

Σε αυτό το άρθρο σάς βοηθά να δημιουργήσετε ένα πιστοποιητικό αυτόματης υπογραφής με χρήση **makecert**και, στη συνέχεια, δημιουργία πιστοποιητικά προγράμματος-πελάτη από αυτά. Τα βήματα έχουν εγγραφεί για makecert στα Windows 10. Για να δημιουργήσετε τα πιστοποιητικά που είναι συμβατό με τις συνδέσεις P2S επικυρωθεί MakeCert. 

Για τις συνδέσεις P2S, την προτιμώμενη μέθοδο για πιστοποιητικά είναι να χρησιμοποιήσετε πιστοποιητικό λύσης της εταιρείας σας, και βεβαιωθείτε ότι για την έκδοση του προγράμματος-πελάτη πιστοποιητικών με την συνηθισμένη μορφή τιμή όνομα 'name@yourdomain.com', και όχι τη μορφή 'NetBIOS τομέα\όνομα_χρήστη'.

Εάν δεν έχετε μια λύση για μεγάλες επιχειρήσεις, ένα αυτο-υπογεγραμμένο πιστοποιητικό είναι απαραίτητο για να επιτρέψετε σε προγράμματα-πελάτες P2S για να συνδεθείτε με ένα εικονικό δίκτυο. Συνεχίζουμε να γνωρίζει ότι έχει καταργηθεί makecert, αλλά εξακολουθούν να είναι μια έγκυρη μέθοδο για τη δημιουργία αυτο-υπογεγραμμένο πιστοποιητικά που είναι συμβατά με P2S συνδέσεις. Προσπαθούμε σε μια άλλη λύση για τη δημιουργία αυτο-υπογεγραμμένο πιστοποιητικά, αλλά αυτήν τη στιγμή, makecert είναι η προτιμώμενη μέθοδος.

## <a name="create-a-self-signed-certificate"></a>Δημιουργία πιστοποιητικού αυτόματης υπογραφής

MakeCert είναι ένας τρόπος για τη δημιουργία αυτο-υπογεγραμμένο πιστοποιητικό. Ακολουθήστε τα παρακάτω βήματα θα σας καθοδηγήσουν δημιουργώντας ένα πιστοποιητικό αυτόματης υπογραφής με χρήση makecert. Αυτά τα βήματα δεν αφορούν ειδικά το μοντέλο ανάπτυξης. Είναι έγκυρη για διαχείριση πόρων και κλασική.

### <a name="to-create-a-self-signed-certificate"></a>Για να δημιουργήσετε ένα πιστοποιητικό αυτόματης υπογραφής

1. Από έναν υπολογιστή που εκτελεί Windows 10, κάντε λήψη και εγκατάσταση του [Windows κιτ ανάπτυξης λογισμικού (SDK) για Windows 10](https://dev.windows.com/en-us/downloads/windows-10-sdk).

2. Μετά την εγκατάσταση, μπορείτε να βρείτε το βοηθητικό πρόγραμμα makecert.exe στην περιοχή αυτή η διαδρομή: C:\Program Files (x86) \Windows Kits\10\bin\<αρχιτεκτονική >. 
        
    Παράδειγμα:`C:\Program Files (x86)\Windows Kits\10\bin\x64`

3. Στη συνέχεια, δημιουργήστε και να εγκαταστήσετε ένα πιστοποιητικό στο χώρο αποθήκευσης προσωπικών πιστοποιητικών στον υπολογιστή σας. Το παρακάτω παράδειγμα δημιουργεί μια αντίστοιχη αρχείο *.cer* που μπορείτε να αποστείλετε στο Azure κατά τη ρύθμιση παραμέτρων P2S. Εκτελέστε την ακόλουθη εντολή, ως διαχειριστής. Αντικατάσταση *ARMP2SRootCert* και *ARMP2SRootCert.cer* με το όνομα που θέλετε να χρησιμοποιήσετε για το πιστοποιητικό.<br><br>Το πιστοποιητικό που βρίσκονται σε πιστοποιητικών - τρέχουσα User\Personal\Certificates.

        makecert -sky exchange -r -n "CN=ARMP2SRootCert" -pe -a sha1 -len 2048 -ss My "ARMP2SRootCert.cer"


###  <a name="rootpublickey"></a>Για να αποκτήσετε το δημόσιο κλειδί

Ως μέρος της ρύθμισης παραμέτρων της πύλης VPN για τις συνδέσεις του σημείου σε τοποθεσία, το δημόσιο κλειδί για το πιστοποιητικό ρίζας αποστέλλεται στο Azure.

1. Για να αποκτήσετε ένα αρχείο .cer από το πιστοποιητικό, ανοίξτε **certmgr.msc**. Κάντε δεξί κλικ το αυτο-υπογεγραμμένο πιστοποιητικό, κάντε κλικ στην επιλογή **όλες τις εργασίες**και, στη συνέχεια, κάντε κλικ στην επιλογή **Εξαγωγή**. Έτσι ανοίγει το **Πιστοποιητικό του "Οδηγού εξαγωγής"**.

2. Στον οδηγό, κάντε κλικ στο κουμπί **Επόμενο**, επιλέξτε **Όχι, εξαγωγή το ιδιωτικό κλειδί**και, στη συνέχεια, κάντε κλικ στο κουμπί **Επόμενο**.

3. Στη σελίδα **Μορφή αρχείου εξαγωγής** , επιλέξτε **βάσης 64 κωδικοποιημένο X.509 (. Προαιρετικό).** Στη συνέχεια, κάντε κλικ στο κουμπί **Επόμενο**. 

4. Στην του **αρχείου προς εξαγωγή**, **μεταβείτε** στη θέση στην οποία θέλετε να εξαγάγετε το πιστοποιητικό. Για το **όνομα του αρχείου**, ονομάστε το αρχείο πιστοποιητικού. Στη συνέχεια, κάντε κλικ στο κουμπί **Επόμενο**.

5. Κάντε κλικ στο κουμπί **Τέλος** για να εξαγάγετε το πιστοποιητικό.

 
### <a name="export-the-self-signed-certificate-optional"></a>Εξαγάγετε το πιστοποιητικό αυτόματης υπογραφής (προαιρετικά)

Ενδέχεται να θέλετε να εξαγάγετε το πιστοποιητικό αυτόματης υπογραφής και να αποθηκεύσετε με ασφάλεια. Εάν χρειάζεται να είναι, μπορείτε να αργότερα το εγκαταστήσετε σε άλλον υπολογιστή και δημιουργία περισσότερων πιστοποιητικά προγράμματος-πελάτη ή να εξαγάγετε ένα άλλο αρχείο .cer. Οποιονδήποτε υπολογιστή με εγκατεστημένο ένα πιστοποιητικό προγράμματος-πελάτη και που έχει ρυθμιστεί με το πρώτο γράμμα κάθε λέξης υπολογιστή-πελάτη VPN ρυθμίσεις να συνδεθείτε με το δίκτυό σας εικονικού μέσω P2S. Για αυτόν το λόγο που θέλετε να βεβαιωθείτε ότι τα πιστοποιητικά προγράμματος-πελάτη που δημιουργούνται και εγκατασταθεί μόνο όταν είναι απαραίτητο και ότι το πιστοποιητικό αυτόματης υπογραφής αποθηκεύεται με ασφάλεια.

Για να εξαγάγετε το πιστοποιητικό αυτόματης υπογραφής ως ένα .pfx, επιλέξτε το πιστοποιητικό ρίζας και χρησιμοποιήστε τα ίδια βήματα όπως περιγράφεται στο [Εξαγωγή πιστοποιητικού προγράμματος-πελάτη](#clientkey) για να εξαγάγετε.

## <a name="create-and-install-client-certificates"></a>Δημιουργία και εγκατάσταση του προγράμματος-πελάτη πιστοποιητικών

Δεν μπορείτε να εγκαταστήσετε το πιστοποιητικό αυτόματης υπογραφής απευθείας στον υπολογιστή του προγράμματος-πελάτη. Πρέπει να δημιουργήσετε ένα πιστοποιητικό προγράμματος-πελάτη από το πιστοποιητικό αυτόματης υπογραφής. Μπορείτε, στη συνέχεια, εξαγωγή και εγκαταστήστε το πιστοποιητικό προγράμματος-πελάτη στον υπολογιστή-πελάτη. Ακολουθήστε τα παρακάτω βήματα δεν αφορούν ειδικά το μοντέλο ανάπτυξης. Είναι έγκυρη για διαχείριση πόρων και κλασική.

### <a name="part-1---generate-a-client-certificate-from-a-self-signed-certificate"></a>Μέρος 1 - Δημιουργήστε ένα πιστοποιητικό προγράμματος-πελάτη από ένα πιστοποιητικό αυτόματης υπογραφής

Ακολουθήστε τα παρακάτω βήματα θα σας καθοδηγήσουν ένας τρόπος για να δημιουργήσετε ένα πιστοποιητικό προγράμματος-πελάτη από ένα αυτο-υπογεγραμμένο πιστοποιητικό. Ενδέχεται να μπορείτε να δημιουργήσετε πολλά πιστοποιητικά προγράμματος-πελάτη από το ίδιο πιστοποιητικό. Κάθε πιστοποιητικό προγράμματος-πελάτη, στη συνέχεια, δυνατή η εξαγωγή και εγκατεστημένο στον υπολογιστή-πελάτη. 

1. Στον ίδιο υπολογιστή που χρησιμοποιήσατε για να δημιουργήσετε το πιστοποιητικό αυτόματης υπογραφής, ανοίξτε μια γραμμή εντολών ως διαχειριστής.

2. Σε αυτό το παράδειγμα, "ARMP2SRootCert" αναφέρεται το αυτο-υπογεγραμμένο πιστοποιητικό που δημιουργήσατε. 
    - Αλλάξτε το όνομα του ριζικού αυτο-υπογεγραμμένο που δημιουργούν το πιστοποιητικό προγράμματος-πελάτη από *"ARMP2SRootCert"* . 
    - Αλλάξτε το όνομα που θέλετε να δημιουργήσετε ένα πιστοποιητικό προγράμματος-πελάτη για να *ClientCertificateName* . 


    Τροποποίηση και να εκτελέσετε το δείγμα για να δημιουργήσετε ένα πιστοποιητικό προγράμματος-πελάτη. Εάν εκτελείτε το παρακάτω παράδειγμα χωρίς να το τροποποιήσετε, το αποτέλεσμα είναι ένα πιστοποιητικό προγράμματος-πελάτη με το όνομα ClientCertificateName στο χώρο αποθήκευσης προσωπικών πιστοποιητικών που δημιουργήθηκε από πιστοποιητικού ρίζας ARMP2SRootCert.

        makecert.exe -n "CN=ClientCertificateName" -pe -sky exchange -m 96 -ss My -in "ARMP2SRootCert" -is my -a sha1

4. Όλα τα πιστοποιητικά που είναι αποθηκευμένα σε 'Πιστοποιητικών - τρέχουσα User\Personal\Certificates' Αποθήκευση στον υπολογιστή σας. Μπορείτε να δημιουργήσετε όπως πολλά πιστοποιητικά προγράμματος-πελάτη ανάλογα με τις ανάγκες που βασίζονται σε αυτήν τη διαδικασία.

### <a name="clientkey"></a>Μέρος 2 - εξαγωγή πιστοποιητικού προγράμματος-πελάτη

1. Για να εξαγάγετε ένα πιστοποιητικό προγράμματος-πελάτη, ανοίξτε **certmgr.msc**. Κάντε δεξί κλικ στο πιστοποιητικό προγράμματος-πελάτη που θέλετε να εξαγάγετε, κάντε κλικ στην επιλογή **όλες τις εργασίες**και, στη συνέχεια, κάντε κλικ στην επιλογή **Εξαγωγή**. Έτσι ανοίγει το **Πιστοποιητικό του "Οδηγού εξαγωγής"**.

2. Στον οδηγό, κάντε κλικ στο κουμπί **Επόμενο**, στη συνέχεια, επιλέξτε **Ναι, εξαγωγή του ιδιωτικού κλειδιού**και, στη συνέχεια, κάντε κλικ στο κουμπί **Επόμενο**.

3. Στη σελίδα **Μορφή αρχείου εξαγωγής** , μπορείτε να αφήσετε τις προεπιλογές επιλεγμένο. Στη συνέχεια, κάντε κλικ στο κουμπί **Επόμενο**. 
 
4. Στη σελίδα για την **ασφάλεια** , πρέπει να προστατεύσετε το ιδιωτικό κλειδί. Εάν επιλέξετε να χρησιμοποιήσετε έναν κωδικό πρόσβασης, βεβαιωθείτε ότι η εγγραφή ή να θυμηθείτε τον κωδικό πρόσβασης που έχετε ορίσει για αυτό το πιστοποιητικό. Στη συνέχεια, κάντε κλικ στο κουμπί **Επόμενο**.

5. Στην του **αρχείου προς εξαγωγή**, **μεταβείτε** στη θέση στην οποία θέλετε να εξαγάγετε το πιστοποιητικό. Για το **όνομα του αρχείου**, ονομάστε το αρχείο πιστοποιητικού. Στη συνέχεια, κάντε κλικ στο κουμπί **Επόμενο**.

6. Κάντε κλικ στο κουμπί **Τέλος** για να εξαγάγετε το πιστοποιητικό.  

### <a name="part-3---install-a-client-certificate"></a>Τμήμα 3 - εγκατάσταση πιστοποιητικού προγράμματος-πελάτη

Κάθε υπολογιστή-πελάτη που θέλετε να συνδεθείτε με το δίκτυό σας εικονικού χρησιμοποιώντας μια σύνδεση σημείου σε τοποθεσία πρέπει να έχετε εγκαταστήσει ένα πιστοποιητικό προγράμματος-πελάτη. Αυτό το πιστοποιητικό είναι εκτός από το απαιτούμενο πακέτο ρύθμισης παραμέτρων VPN. Ακολουθήστε τα παρακάτω βήματα θα σας καθοδηγήσουν κατά την εγκατάσταση του πιστοποιητικού προγράμματος-πελάτη με μη αυτόματο τρόπο.

1. Εντοπίστε και αντιγράψτε το αρχείο *.pfx* στον υπολογιστή-πελάτη. Στον υπολογιστή-πελάτη, κάντε διπλό κλικ το αρχείο *.pfx* για την εγκατάσταση. Αποχώρηση από τη **Θέση αποθήκευσης** ως **Τρέχοντα χρήστη**και, στη συνέχεια, κάντε κλικ στο κουμπί **Επόμενο**.

2. Στο **αρχείο** για εισαγωγή σελίδας και να μην γίνουν αλλαγές. Κάντε κλικ στο κουμπί **Επόμενο**.

3. Στη σελίδα **προστασία ιδιωτικού κλειδιού** , εισαγάγετε τον κωδικό πρόσβασης για το πιστοποιητικό εάν χρησιμοποιείται ένα, ή βεβαιωθείτε ότι το κεφάλαιο ασφαλείας που την εγκατάσταση του πιστοποιητικού είναι σωστή, κάντε κλικ στο κουμπί **Επόμενο**.

4. Στη σελίδα **Χώρος αποθήκευσης πιστοποιητικού** , αφήστε την προεπιλεγμένη θέση και, στη συνέχεια, κάντε κλικ στο κουμπί **Επόμενο**.

5. Κάντε κλικ στο κουμπί **Τέλος**. Στην **Προειδοποίηση ασφαλείας** για την εγκατάσταση του πιστοποιητικού, κάντε κλικ στο κουμπί **Ναι**. Το πιστοποιητικό πλέον εισαχθεί με επιτυχία.

## <a name="next-steps"></a>Επόμενα βήματα

Συνεχίστε με τη ρύθμιση παραμέτρων σημείου σε τοποθεσία. 

- Για **Τη διαχείριση πόρων** ανάπτυξης μοντέλο βήματα, ανατρέξτε [Ρύθμιση παραμέτρων μια σύνδεση σημείου σε τοποθεσία με μια VNet χρήση του PowerShell](vpn-gateway-howto-point-to-site-rm-ps.md). 
- Για **κλασική** βήματα μοντέλο ανάπτυξης, ανατρέξτε στο θέμα [Ρύθμιση παραμέτρων ενός σημείου σε τοποθεσία σύνδεση VPN με ένα VNet με την πύλη κλασική](vpn-gateway-point-to-site-create.md).