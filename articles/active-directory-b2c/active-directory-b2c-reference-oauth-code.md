<properties
    pageTitle="B2C καταλόγου Azure Active Directory | Microsoft Azure"
    description="Δημιουργία εφαρμογών web, χρησιμοποιώντας την εφαρμογή Azure Active Directory του πρωτοκόλλου ελέγχου ταυτότητας OpenID σύνδεση."
    services="active-directory-b2c"
    documentationCenter=""
    authors="dstrockis"
    manager="mbaldwin"
    editor=""/>

<tags
    ms.service="active-directory-b2c"
    ms.workload="identity"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="07/22/2016"
    ms.author="dastrock"/>

# <a name="azure-active-directory-b2c-oauth-20-authorization-code-flow"></a>Azure Active Directory B2C: Διακριτικό 2.0 εξουσιοδότησης κώδικα ροής

Η εκχώρηση 2.0 διακριτικό εξουσιοδότησης κώδικα μπορεί να χρησιμοποιηθεί σε εφαρμογές που έχουν εγκατασταθεί σε μια συσκευή για να αποκτήσετε πρόσβαση σε προστατευμένο πόρους, όπως web APIs. Χρησιμοποιώντας την εφαρμογή B2C Azure Active Directory (Azure AD) 2.0 διακριτικό, μπορείτε να προσθέσετε ταυτότητα εγγραφής, είσοδος και άλλων εργασιών διαχείρισης για τις εφαρμογές σας φορητούς και επιτραπέζιους. Αυτός ο οδηγός είναι ανεξάρτητο γλώσσα. Περιγράφει πώς μπορείτε να στέλνετε και να λαμβάνετε μηνύματα HTTP χωρίς να χρησιμοποιήσετε οποιαδήποτε μας βιβλιοθηκών Άνοιγμα προέλευσης.

<!-- TODO: Need link to libraries -->

Ροής κώδικα της εξουσιοδότησης 2.0 διακριτικό περιγράφεται στην [ενότητα 4.1 της προδιαγραφής διακριτικό 2.0](http://tools.ietf.org/html/rfc6749). Μπορείτε να το χρησιμοποιήσετε για να εκτελέσετε τον έλεγχο ταυτότητας και εξουσιοδότησης στο το μεγαλύτερο μέρος των τύπους εφαρμογής, συμπεριλαμβανομένων των [εφαρμογών web](active-directory-b2c-apps.md#web-apps) και [εγγενώς εγκαταστήσετε εφαρμογές](active-directory-b2c-apps.md#mobile-and-native-apps). Επιτρέπει σε εφαρμογές να αποκτήσετε με ασφάλεια **access_tokens**, που μπορεί να χρησιμοποιηθεί για πρόσβαση σε πόρους που προστατεύονται από ένα [διακομιστή εξουσιοδότησης](active-directory-b2c-reference-protocols.md#the-basics).

Αυτός ο οδηγός θα εστίαση σε ένα συγκεκριμένο τύπος το διακριτικό 2.0 εξουσιοδότησης κώδικα ροής--**δημόσια προγράμματα-πελάτες**. Πρόγραμμα-πελάτη και δημόσια είναι οποιαδήποτε εφαρμογή του προγράμματος-πελάτη που δεν είναι αξιόπιστο σε ασφαλή διατηρείται η ακεραιότητα ενός μυστικού κωδικού πρόσβασης. Περιλαμβάνονται και οι εφαρμογές για κινητές συσκευές, εφαρμογές υπολογιστή και αρκετά όγκο οποιαδήποτε εφαρμογή που εκτελείται σε μια συσκευή και πρέπει να λάβετε access_tokens. Εάν θέλετε να προσθέσετε διαχείρισης των ταυτοτήτων σε μια εφαρμογή web χρησιμοποιώντας Azure AD B2C, πρέπει να χρησιμοποιήσετε [OpenID σύνδεση](active-directory-b2c-reference-oidc.md) και όχι διακριτικό 2.0.

Azure AD B2C επεκτείνει την τυπική ρέει διακριτικό 2.0 για να κάνετε περισσότερα από απλή ελέγχου ταυτότητας και εξουσιοδότησης. Αυτό παρουσιάζει την [**παράμετρο πολιτικής**](active-directory-b2c-reference-policies.md), που σας επιτρέπει να χρησιμοποιήσετε διακριτικό 2.0 για να προσθέσετε εμπειρίες χρήστη για την εφαρμογή σας, όπως είναι οι εγγραφής, είσοδος και διαχείριση προφίλ. Εδώ θα σας δείξουμε πώς να χρησιμοποιείτε το διακριτικό 2.0 και τις πολιτικές για την υλοποίηση της κάθε μία από αυτές τις εμπειρίες σε εγγενή τις εφαρμογές σας. Επίσης, θα σας δείξουμε πώς μπορείτε να λάβετε access_tokens για πρόσβαση στο web APIs.

Ο παρακάτω αιτήσεις HTTP παράδειγμα θα χρησιμοποιήσει μας δείγμα καταλόγου B2C, **fabrikamb2c.onmicrosoft.com**, καθώς και το δείγμα εφαρμογής και τις πολιτικές. Είστε δωρεάν για να δοκιμάσετε τις αιτήσεις ανάληψη στον εαυτό σας χρησιμοποιώντας αυτές τις τιμές ή μπορείτε να τα αντικαταστήσετε με το δικό σας.
Μάθετε πώς μπορείτε να [αρχίσετε τη δική σας B2C καταλόγου, εφαρμογή, πολιτικές](#use-your-own-b2c-directory).

## <a name="1-get-an-authorization-code"></a>1. λάβετε έναν κωδικό εξουσιοδότησης
Ροής κώδικα της εξουσιοδότησης αρχίζει με το πρόγραμμα-πελάτη που κατευθύνει το χρήστη να το `/authorize` τελικού σημείου. Είναι το διαδραστικό τμήμα της ροής της, όπου ο χρήστης θα διαρκέσει στην πραγματικότητα ενέργεια. Σε αυτήν την αίτηση, ο υπολογιστής-πελάτης υποδεικνύει τα δικαιώματα που απαιτούνται για να αποκτήσετε από το χρήστη στο το `scope` παράμετρο και την πολιτική για την εκτέλεση στο το `p` παραμέτρου. Τρία παραδείγματα παρέχονται παρακάτω (με αλλαγές γραμμών για αναγνωσιμότητα), κάθε μία με μια διαφορετική πολιτική.

#### <a name="use-a-sign-in-policy"></a>Χρησιμοποιήστε μια πολιτική εισόδου

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_in
```

#### <a name="use-a-sign-up-policy"></a>Χρησιμοποιήστε μια πολιτική εγγραφής

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_up
```

#### <a name="use-an-edit-profile-policy"></a>Χρησιμοποιήστε μια πολιτική Επεξεργασία προφίλ

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_edit_profile
```

| Παράμετρος | Απαιτείται; | Περιγραφή |
| ----------------------- | ------------------------------- | ----------------------- |
| client_id | Απαιτείται | Το Αναγνωριστικό εφαρμογής που έχουν εκχωρηθεί στην [πύλη του Azure](https://portal.azure.com) για την εφαρμογή σας. |
| response_type | Απαιτείται | Τον τύπο απόκρισης, που πρέπει να περιλαμβάνει `code` για τη ροή κώδικα εξουσιοδότησης. |
| redirect_uri | Απαιτείται | Το redirect_uri της εφαρμογής, όπου μπορούν να αποστολής και λήψης από την εφαρμογή του ελέγχου ταυτότητας των απαντήσεων. Αυτό πρέπει να ταιριάζει ακριβώς με ένα από τα redirect_uris που καταχωρήσατε στην πύλη, με τη διαφορά ότι αυτό πρέπει να κωδικοποιηθεί ως διεύθυνση URL. |
| πεδίο εφαρμογής | Απαιτείται | Μια λίστα διαχωρισμένες με εύρους. Η τιμή μία εύρος δηλώνει να Azure AD και τα δύο από τα δικαιώματα που ζητήθηκαν. Χρησιμοποιώντας το Αναγνωριστικό υπολογιστή-πελάτη, όπως το εύρος υποδεικνύει ότι την εφαρμογή σας χρειάζεται μιας **αποκτήσετε πρόσβαση διακριτικό** που μπορούν να χρησιμοποιηθούν σε σχέση με τη δική σας υπηρεσία ή το web API, που αντιπροσωπεύονται από το ίδιο αναγνωριστικό υπολογιστή-πελάτη.  Το `offline_access` εύρος υποδεικνύει ότι της εφαρμογής σας θα χρειαστείτε μια **refresh_token** για μεγάλης διάρκειας πρόσβασης σε πόρους.  Μπορείτε επίσης να χρησιμοποιήσετε το `openid` εμβέλειας για να ζητήσετε μια **id_token** από το Azure AD B2C. |
| response_mode | Συνιστάται | Η μέθοδος που πρέπει να χρησιμοποιούνται για να στείλετε την προκύπτουσα authorization_code Επιστροφή στην εφαρμογή σας. Μπορεί να είναι ένα 'ερώτημα', 'form_post' ή 'τμήμα'.
| κατάσταση | Συνιστάται | Μια τιμή που περιλαμβάνονται στην αίτηση που θα επιστραφεί επίσης στην διακριτικού απάντηση. Μπορεί να είναι μια συμβολοσειρά οποιοδήποτε περιεχόμενο που θέλετε. Μια μοναδική τιμή που δημιούργησε τυχαία χρησιμοποιείται συνήθως για την αποτροπή επιθέσεις πλαστογράφησης διατοποθεσιακή αίτηση. Η κατάσταση χρησιμοποιείται επίσης για την κωδικοποίηση πληροφοριών σχετικά με την κατάσταση του χρήστη στην εφαρμογή πριν από την αίτηση ελέγχου ταυτότητας προέκυψε, όπως τη σελίδα που είχαν στην ή την πολιτική που εκτελείται. |
| p | Απαιτείται | Η πολιτική που θα εκτελεστεί. Είναι το όνομα μιας πολιτικής που έχει δημιουργηθεί στον κατάλογό σας B2C. Η τιμή όνομα πολιτικής θα πρέπει να ξεκινούν με "b2c\_1\_". Μάθετε περισσότερα σχετικά με τις πολιτικές στο [πλαίσιο επεκτάσιμη πολιτικής](active-directory-b2c-reference-policies.md). |
| γραμμή εντολών | Προαιρετικό | Ο τύπος του αλληλεπίδραση με το χρήστη που είναι απαραίτητη. Η μόνη έγκυρη τιμή αυτήν τη στιγμή είναι "σύνδεση", η οποία επιβάλλει στο χρήστη για να εισαγάγετε τα διαπιστευτήριά τους σε αυτό το αίτημα. Καθολικής σύνδεσης δεν θα ισχύσουν. |

Σε αυτό το σημείο, ο χρήστης θα σας ζητηθεί για να ολοκληρώσετε την πολιτική ροής εργασίας. Ίσως χρειαστεί να το χρήστη πληκτρολογώντας το όνομα χρήστη και τον κωδικό πρόσβασης, είσοδο με ένα κοινωνικό ταυτότητα, εγγράφεται για τον κατάλογο ή οποιονδήποτε άλλο αριθμό βήματα, ανάλογα με τον τρόπο ορισμού της πολιτικής.

Αφού ο χρήστης ολοκληρώσει την πολιτική, Azure AD θα επιστρέψει μια απάντηση σε εφαρμογή στο του καθορισμένου `redirect_uri`, χρησιμοποιώντας τη μέθοδο που καθορίζεται στο το `response_mode` παραμέτρου. Η απόκριση θα είναι ακριβώς το ίδιο για κάθε μία από τις παραπάνω περιπτώσεις, ανεξάρτητα από την πολιτική που εκτελέστηκε.

Επιτυχής απόκριση που χρησιμοποιεί `response_mode=query` μοιάζει με:

```
GET urn:ietf:wg:oauth:2.0:oob?
code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...        // the authorization_code, truncated
&state=arbitrary_data_you_can_receive_in_the_response                // the value provided in the request
```

| Παράμετρος | Περιγραφή |
| ----------------------- | ------------------------------- |
| κωδικός | Το authorization_code που ζητήθηκε από την εφαρμογή. Η εφαρμογή μπορεί να χρησιμοποιήσει τον κωδικό εξουσιοδότησης για να ζητήσετε μια access_token για έναν πόρο προορισμού. Authorization_codes είναι πολύ μικρό χρόνο ζωής. Συνήθως, λήγουν μετά περίπου 10 λεπτά. |
| κατάσταση | Δείτε την πλήρη περιγραφή στον προηγούμενο πίνακα. Εάν μια παράμετρος κατάσταση περιλαμβάνει την αίτηση, την ίδια τιμή θα πρέπει να εμφανίζεται στην απάντηση. Η εφαρμογή θα πρέπει να βεβαιωθείτε ότι τις τιμές κατάσταση της αίτησης και της απόκρισης είναι πανομοιότυπες. |

Απαντήσεις σφάλματος μπορεί να αποσταλούν επίσης για το `redirect_uri` , έτσι ώστε η εφαρμογή να τους χειριστεί σωστά:

```
GET urn:ietf:wg:oauth:2.0:oob?
error=access_denied
&error_description=The+user+has+cancelled+entering+self-asserted+information
&state=arbitrary_data_you_can_receive_in_the_response
```

| Παράμετρος | Περιγραφή |
| ----------------------- | ------------------------------- |
| Σφάλμα | Μια συμβολοσειρά κωδικό σφάλματος που μπορεί να χρησιμοποιηθεί για την ταξινόμηση των τύπων του σφάλματα που προκύπτουν και μπορεί να χρησιμοποιηθεί προκειμένου να αντιμετωπίζεται σφάλματα. |
| error_description | Ένα συγκεκριμένο μήνυμα λάθους που μπορεί να σας βοηθήσει προγραμματιστή, για να προσδιορίσετε την αιτία ριζικό κατάλογο της ένα σφάλμα ελέγχου ταυτότητας. |
| κατάσταση | Δείτε την πλήρη περιγραφή στον πρώτο πίνακα σε αυτήν την ενότητα. Εάν μια παράμετρος κατάσταση περιλαμβάνει την αίτηση, την ίδια τιμή θα πρέπει να εμφανίζεται στην απάντηση. Η εφαρμογή θα πρέπει να βεβαιωθείτε ότι τις τιμές κατάσταση της αίτησης και της απόκρισης είναι πανομοιότυπες. |


## <a name="2-get-a-token"></a>2. λήψη ενός διακριτικού
Τώρα που έχετε αποκτήσει ένα authorization_code, που μπορούν να αποκτήσουν το `code` έναν κωδικό στον επιθυμητό πόρο με την αποστολή ενός `POST` αίτηση για να το `/token` τελικού σημείου. Στο Azure AD B2C, ο πόρος μόνο που μπορείτε να ζητήσετε ενός διακριτικού για είναι το API του web υποστήριξης της εφαρμογής. Η σύμβαση που χρησιμοποιείται για την αίτηση ενός διακριτικού στον εαυτό σας είναι να χρησιμοποιήσετε την εφαρμογή υπολογιστή-πελάτη Αναγνωριστικό ως το εύρος:

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob

```

| Παράμετρος | Απαιτείται; | Περιγραφή |
| ----------------------- | ------------------------------- | --------------------- |
| p | Απαιτείται | Η πολιτική που χρησιμοποιήθηκε για να αποκτήσετε τον κωδικό εξουσιοδότησης. Δεν μπορείτε να χρησιμοποιήσετε μια διαφορετική πολιτική σε αυτήν την αίτηση. Σημειώστε ότι προσθέτετε αυτή η παράμετρος στη *συμβολοσειρά ερωτήματος*, όχι στο σώμα ΔΗΜΟΣΊΕΥΣΗ. |
| client_id | Απαιτείται | Το Αναγνωριστικό εφαρμογής που έχουν εκχωρηθεί στην [πύλη του Azure](https://portal.azure.com) για την εφαρμογή σας. |
| grant_type | Απαιτείται | Τον τύπο του εκχώρηση, που πρέπει να είναι `authorization_code` για τη ροή κώδικα εξουσιοδότησης. |
| πεδίο εφαρμογής | Reccommended | Μια λίστα διαχωρισμένες με εύρους. Η τιμή μία εύρος δηλώνει να Azure AD και τα δύο από τα δικαιώματα που ζητήθηκαν. Χρησιμοποιώντας το Αναγνωριστικό υπολογιστή-πελάτη, όπως το εύρος υποδεικνύει ότι την εφαρμογή σας χρειάζεται μιας **αποκτήσετε πρόσβαση διακριτικό** που μπορούν να χρησιμοποιηθούν σε σχέση με τη δική σας υπηρεσία ή το web API, που αντιπροσωπεύονται από το ίδιο αναγνωριστικό υπολογιστή-πελάτη.  Το `offline_access` εύρος υποδεικνύει ότι της εφαρμογής σας θα χρειαστείτε μια **refresh_token** για μεγάλης διάρκειας πρόσβασης σε πόρους.  Μπορείτε επίσης να χρησιμοποιήσετε το `openid` εμβέλειας για να ζητήσετε μια **id_token** από το Azure AD B2C. |
| κωδικός | Απαιτείται | Το authorization_code που αποκτήθηκε στο το πρώτο πόδι της ροής της. |
| redirect_uri | Απαιτείται | Το redirect_uri της εφαρμογής όπου έχετε λάβει το authorization_code. |

Επιτυχής διακριτικού απόκριση θα μοιάζει κάπως:

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| Παράμετρος | Περιγραφή |
| ----------------------- | ------------------------------- |
| not_before | Η ώρα κατά την οποία το διακριτικό θεωρείται έγκυρη χρονική σήμανση στιγμή. |
| token_type | Την τιμή διακριτικού τύπου. Ο μόνος τύπος που υποστηρίζει το Azure AD είναι φορέα. |
| access_token | Το υπογεγραμμένο διακριτικό διακριτικού JSON Web (JWT) που έχετε ζητήσει. |
| πεδίο εφαρμογής | Τα πεδία που το διακριτικό δεν είναι έγκυροι για την, που μπορούν να χρησιμοποιηθούν για προσωρινή αποθήκευση διακριτικά για μελλοντική χρήση. |
| expires_in | Το χρονικό διάστημα που το διακριτικό δεν είναι έγκυρη (σε δευτερόλεπτα). |
| refresh_token | Μια refresh_token OAuth 2.0. Η εφαρμογή να χρησιμοποιήσετε αυτό το διακριτικό να αποκτήσετε πρόσθετες διακριτικά αφού λήξει η τρέχουσα διακριτικού. Refresh_tokens χρόνο διάρκειας ζωής και μπορούν να χρησιμοποιηθούν για να διατηρήσετε την πρόσβαση σε πόρους για εκτεταμένη χρονική περίοδο. Για περισσότερες λεπτομέρειες, ανατρέξτε στην [αναφορά διακριτικού B2C](active-directory-b2c-reference-tokens.md). |

Θα μοιάζει η απαντήσεις σφάλματος:

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| Παράμετρος | Περιγραφή |
| ----------------------- | ------------------------------- |
| Σφάλμα | Μια συμβολοσειρά κωδικό σφάλματος που μπορεί να χρησιμοποιηθεί για την ταξινόμηση των τύπων του σφάλματα που προκύπτουν και μπορεί να χρησιμοποιηθεί προκειμένου να αντιμετωπίζεται σφάλματα. |
| error_description | Ένα συγκεκριμένο μήνυμα λάθους που μπορεί να σας βοηθήσει προγραμματιστή, για να προσδιορίσετε την αιτία ριζικό κατάλογο της ένα σφάλμα ελέγχου ταυτότητας. |

## <a name="3-use-the-token"></a>3. Χρησιμοποιήστε το διακριτικό
Τώρα που έχετε με επιτυχία αποκτήσατε μια `access_token`, μπορείτε να χρησιμοποιήσετε το διακριτικό σε προσκλήσεις για να σας παρασκηνίου web APIs, συμπεριλαμβάνοντας με το `Authorization` κεφαλίδας:

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="4-refresh-the-token"></a>4. το διακριτικό ανανέωση
Πρόσβαση και αναγνωριστικό διακριτικά είναι μικρό χρόνο ζωής. Πρέπει να ανανεώσετε τους μετά τη λήξη τους για να συνεχίσετε τη δυνατότητα πρόσβασης σε πόρους. Μπορείτε να το κάνετε υποβάλλοντας μια άλλη `POST` αίτηση για να το `/token` τελικού σημείου. Παροχή αυτήν τη στιγμή το `refresh_token` αντί για το `code`:

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob
```

| Παράμετρος | Απαιτείται; | Περιγραφή |
| ----------------------- | ------------------------------- | -------- |
| p | Απαιτείται | Η πολιτική που χρησιμοποιήθηκε για να αποκτήσετε το αρχικό refresh_token. Δεν μπορείτε να χρησιμοποιήσετε μια διαφορετική πολιτική σε αυτήν την αίτηση. Σημειώστε ότι προσθέτετε αυτή η παράμετρος στη *συμβολοσειρά ερωτήματος*, όχι στο σώμα ΔΗΜΟΣΊΕΥΣΗ. |
| client_id | Συνιστάται | Το Αναγνωριστικό εφαρμογής που έχουν εκχωρηθεί στην [πύλη του Azure](https://portal.azure.com) για την εφαρμογή σας. |
| grant_type | Απαιτείται | Τον τύπο του εκχώρηση, που πρέπει να είναι `refresh_token` για αυτό πόδι της ροής της εξουσιοδότησης κώδικα. |
| πεδίο εφαρμογής | Συνιστάται | Μια λίστα διαχωρισμένες με εύρους. Η τιμή μία εύρος δηλώνει να Azure AD και τα δύο από τα δικαιώματα που ζητήθηκαν. Χρησιμοποιώντας το Αναγνωριστικό υπολογιστή-πελάτη, όπως το εύρος υποδεικνύει ότι την εφαρμογή σας χρειάζεται μιας **αποκτήσετε πρόσβαση διακριτικό** που μπορούν να χρησιμοποιηθούν σε σχέση με τη δική σας υπηρεσία ή το web API, που αντιπροσωπεύονται από το ίδιο αναγνωριστικό υπολογιστή-πελάτη.  Το `offline_access` εύρος υποδεικνύει ότι της εφαρμογής σας θα χρειαστείτε μια **refresh_token** για μεγάλης διάρκειας πρόσβασης σε πόρους.  Μπορείτε επίσης να χρησιμοποιήσετε το `openid` εμβέλειας για να ζητήσετε μια **id_token** από το Azure AD B2C. |
| redirect_uri | Προαιρετικό | Το redirect_uri της εφαρμογής όπου έχετε λάβει το authorization_code. |
| refresh_token | Απαιτείται | Το αρχικό refresh_token που αποκτήθηκε στο το δεύτερο πόδι της ροής της. |

Επιτυχής διακριτικού απόκριση θα μοιάζει κάπως:

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| Παράμετρος | Περιγραφή |
| ----------------------- | ------------------------------- |
| not_before | Η ώρα κατά την οποία το διακριτικό θεωρείται έγκυρη χρονική σήμανση στιγμή. |
| token_type | Την τιμή διακριτικού τύπου. Ο μόνος τύπος που υποστηρίζει το Azure AD είναι φορέα. |
| access_token | Το υπογεγραμμένο διακριτικό διακριτικού JSON Web (JWT) που έχετε ζητήσει. |
| πεδίο εφαρμογής | Τα πεδία που το διακριτικό δεν είναι έγκυροι για την, που μπορούν να χρησιμοποιηθούν για προσωρινή αποθήκευση διακριτικά για μελλοντική χρήση. |
| expires_in | Το χρονικό διάστημα που το διακριτικό δεν είναι έγκυρη (σε δευτερόλεπτα). |
| refresh_token | Μια refresh_token OAuth 2.0. Η εφαρμογή να χρησιμοποιήσετε αυτό το διακριτικό να αποκτήσετε πρόσθετες διακριτικά αφού λήξει η τρέχουσα διακριτικού. Refresh_tokens χρόνο διάρκειας ζωής και μπορούν να χρησιμοποιηθούν για να διατηρήσετε την πρόσβαση σε πόρους για εκτεταμένη χρονική περίοδο. Για περισσότερες λεπτομέρειες, ανατρέξτε στην [αναφορά διακριτικού B2C](active-directory-b2c-reference-tokens.md). |

Θα μοιάζει η απαντήσεις σφάλματος:

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| Παράμετρος | Περιγραφή |
| ----------------------- | ------------------------------- |
| Σφάλμα | Μια συμβολοσειρά κωδικό σφάλματος που μπορεί να χρησιμοποιηθεί για την ταξινόμηση των τύπων σφάλματα που προκύπτουν και μπορεί να χρησιμοποιηθεί προκειμένου να αντιμετωπίζεται σφάλματα. |
| error_description | Ένα συγκεκριμένο μήνυμα σφάλματος που μπορεί να σας βοηθήσει ο προγραμματιστής προσδιορίζουν τη ρίζα του ένα σφάλμα ελέγχου ταυτότητας. |

## <a name="use-your-own-b2c-directory"></a>Χρησιμοποιήστε το δικό σας κατάλογο B2C

Εάν θέλετε να δοκιμάσετε αυτές τις αιτήσεις για τον εαυτό σας, πρέπει πρώτα να εκτελέσετε αυτά τα τρία βήματα και, στη συνέχεια, αντικαταστήστε τις τιμές παράδειγμα παραπάνω με το δικό σας:

- [Δημιουργήστε έναν κατάλογο B2C](active-directory-b2c-get-started.md) και χρησιμοποιήστε το όνομα του καταλόγου σας στις αιτήσεις.
- [Δημιουργία μιας εφαρμογής](active-directory-b2c-app-registration.md) για να αποκτήσετε ένα Αναγνωριστικό εφαρμογής και μια redirect_uri. Θέλετε να συμπεριλάβετε ένα **εγγενές πρόγραμμα-πελάτη** στην εφαρμογή σας.
- [Δημιουργία πολιτικών σας](active-directory-b2c-reference-policies.md) για να αποκτήσετε το ονόματα πολιτικής.
