<properties
    pageTitle="Αντιμετώπιση προβλημάτων autoscale με σύνολα κλίμακα εικονική μηχανή | Microsoft Azure"
    description="Αντιμετώπιση προβλημάτων autoscale με εικονική μηχανή κλίμακα σύνολα. Κατανόηση τυπικές Παρουσιάστηκαν προβλήματα και πώς μπορείτε να τις επιλύσετε."
    services="virtual-machine-scale-sets"
    documentationCenter=""
    authors="gbowerman"
    manager="timlt"
    editor=""
    tags="azure-resource-manager"/>

<tags
    ms.service="virtual-machine-scale-sets"
    ms.workload="na"
    ms.tgt_pltfrm="windows"
    ms.devlang="na"
    ms.topic="article"
    ms.date="10/28/2016"
    ms.author="guybo"/>

# <a name="troubleshooting-autoscale-with-virtual-machine-scale-sets"></a>Αντιμετώπιση προβλημάτων autoscale με σύνολα κλίμακα εικονική μηχανή

**Πρόβλημα** – που έχετε δημιουργήσει μια υποδομή autoscaling στο Azure διαχείριση πόρων χρησιμοποιώντας σύνολα κλίμακα Εικονική – για παράδειγμα, την ανάπτυξη ενός προτύπου ως εξής: https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-bottle-autoscale – έχετε κλίμακα κανόνων που ορίζονται από το και λειτουργεί Εξαιρετικός, με τη διαφορά ότι ανεξάρτητα από τον όγκο φορτίου οι σε του ΣΠΣ, αυτό δεν θα autoscale.

## <a name="troubleshooting-steps"></a>Βήματα αντιμετώπισης προβλημάτων

Ορισμένα πράγματα που πρέπει να λάβετε υπόψη σας περιλαμβάνουν τα εξής:

- Πόσες πυρήνων κάθε Εικονική διαθέτει και φορτώνονται κάθε πυρήνα;
 Το πρότυπο γρήγορη έναρξη Azure παράδειγμα παραπάνω έχει μια δέσμη ενεργειών do_work.php, η οποία φορτώνει έναν μεμονωμένο πυρήνα. Εάν χρησιμοποιείτε μια Εικονική μεγαλύτερο από ένα μεμονωμένο πυρήνα Εικονική μέγεθος όπως Standard_A1 ή D1, στη συνέχεια, θα πρέπει να εκτελέσετε αυτό φόρτωσης πολλές φορές. Επιλέξτε πόσες cores σας ΣΠΣ ανατρέχοντας [μεγέθη για Windows εικονικές μηχανές στο Azure](../virtual-machines/virtual-machines-windows-sizes.md)

- Πόσες ΣΠΣ στο Εικονική κλίμακα σύνολο που πάνε εργασίας σε κάθε μία;

    Μια κλίμακα ανάληψη συμβάν μόνο θα πραγματοποιείται όταν ο μέσος όρος CPU σε **όλα** τα ΣΠΣ σε ένα σύνολο κλίμακα υπερβαίνει το όριο, σταδιακά το εσωτερικό ορίζεται στο τους κανόνες autoscale.

- Χάσετε τυχόν συμβάντων κλίμακα;

    Ελέγξτε τον έλεγχο αρχεία καταγραφής στην πύλη του Azure για συμβάντα κλίμακα. Μήπως υπήρχε μια κλίμακα προς τα επάνω και μια κλίμακα προς τα κάτω που χάθηκε. Μπορείτε να φιλτράρετε κατά "Κλίμακα"...

    ![Αρχεία καταγραφής ελέγχου][audit]

- Είναι αρκετά διαφορετικά σας κλίμακα και κλίμακας ανάληψης όρια;

    Ας υποθέσουμε ότι μπορείτε να ορίσετε έναν κανόνα για να κλιμακωθεί ανάληψη όταν average CPU είναι μεγαλύτερο από 50% πάνω από 5 λεπτά και, για κλιμάκωση στην όταν average CPU είναι μικρότερη από 50%. Αυτό θα προκαλέσει κάποιο πρόβλημα "flapping" όταν η χρήση της CPU είναι κοντά σε αυτό το όριο, με κλίμακα ενέργειες συνεχώς αύξηση και μείωση του μεγέθους του συνόλου. Αυτόν το λόγο, η υπηρεσία autoscale προσπαθεί να αποτρέψετε "πάνω", που μπορεί να δήλωσης ως δεν κλίμακας. Επομένως, βεβαιωθείτε ότι το όρια κλιμάκωσης και κλίμακας στο είναι αρκετά διαφορετικά για να επιτρέψετε σε ορισμένες κενό διάστημα ανάμεσά κλίμακας.

- Γράφετε το δικό σας πρότυπο JSON;

    Είναι εύκολο να κάνετε λάθη, επομένως, ξεκινήστε με ένα πρότυπο όπως το ένα επάνω από το οποίο είναι αποδείξει ότι λειτουργεί και κάντε μικρές αλλαγές βηματική. 

- Να με μη αυτόματο τρόπο κλίμακα ή σμίκρυνση;

    Δοκιμάστε επανάληψη ανάπτυξης ο πόρος Ορισμός κλίμακα Εικονική με μια διαφορετική "χωρητικότητα" ρύθμιση για να αλλάξετε τον αριθμό των ΣΠΣ με μη αυτόματο τρόπο. Ένα παράδειγμα προτύπου για να το κάνετε αυτό είναι εδώ: https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing – ίσως χρειαστεί να επεξεργαστείτε το πρότυπο για να βεβαιωθείτε ότι έχει το ίδιο μέγεθος υπολογιστή που χρησιμοποιεί το σύνολο σας κλίμακα. Εάν με επιτυχία, μπορείτε να αλλάξετε τον αριθμό των ΣΠΣ με μη αυτόματο τρόπο, στη συνέχεια, θα γνωρίζετε το πρόβλημα είναι απομόνωσης autoscale.

- Ελέγξτε το Microsoft.Compute/virtualMachineScaleSet, και Microsoft.Insights πόρους στην [Εξερεύνηση των πόρων Azure](https://resources.azure.com/)

    Αυτό είναι ένα απαραίτητο εργαλείο αντιμετώπισης προβλημάτων που σας δείχνει την κατάσταση των πόρων σας για τη διαχείριση πόρων Azure. Κάντε κλικ στη συνδρομή σας και δείτε την ομάδα των πόρων αντιμετώπιση προβλημάτων. Κάτω από την υπηρεσία παροχής του πόρου υπολογισμού κοιτάξετε το σύνολο κλίμακα Εικονική που δημιουργήσατε και επιλέξτε την προβολή παρουσία, η οποία που εμφανίζει την κατάσταση μιας ανάπτυξης. Δείτε επίσης την προβολή παρουσία του ΣΠΣ στο σύνολο κλίμακα Εικονική. Στη συνέχεια, μεταβείτε σε την υπηρεσία παροχής του πόρου Microsoft.Insights και έλεγχος των κανόνων autoscale εμφανίζονται καλά.

- Είναι η επέκταση διαγνωστικών εργασία και εκπομπής δεδομένα επιδόσεων;

    __Ενημέρωσης:__ Azure autoscale είναι βελτιωμένη για να χρησιμοποιήσετε μια διοχέτευση μετρικά κεντρικό υπολογιστή με βάση που δεν είναι πλέον απαιτεί μια επέκταση Διαγνωστικά να έχει εγκατασταθεί. Αυτό σημαίνει ότι το επόμενο μερικές παραγράφους δεν ισχύει πλέον Εάν δημιουργείτε μια εφαρμογή autoscaling χρησιμοποιώντας τη νέα διαδικασία. Παραδείγματα Azure πρότυπα τα οποία έχουν μετατραπεί για να χρησιμοποιήσετε τη διαδικασία κεντρικού υπολογιστή: https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-bottle-autoscale, https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-lapstack-autoscale. 

    Χρήση μετρικά κεντρικό υπολογιστή με βάση για autoscale είναι καλύτερη για τους ακόλουθους λόγους:

    - Λιγότερες μεταβαλλόμενα τμήματα ως χωρίς επεκτάσεις Διαγνωστικά πρέπει να εγκατασταθούν.
    - Πιο απλά πρότυπα. Μόλις προσθέσετε κανόνες autoscale ιδέες σε ένα υπάρχον πρότυπο σύνολο κλίμακα.
    - Πιο αξιόπιστη αναφοράς και πιο γρήγορη εκκίνηση της νέας ΣΠΣ.

    Το μόνο λόγοι για τους οποίους ίσως θέλετε να συνεχίσετε να χρησιμοποιείτε την επέκταση διαγνωστικών θα ήταν Εάν χρειάζεστε μνήμης Διαγνωστικά αναφοράς/κλίμακας. Μετρικά κεντρικό υπολογιστή με βάση δεν αναφορά μνήμης.

    Αυτό υπόψη, ακολουθήστε μόνο τα υπόλοιπα σε αυτό το άρθρο εάν χρησιμοποιείτε ακόμα διαγνωστικών επεκτάσεις για το autoscaling.

    Autoscale στη Διαχείριση πόρων Azure μπορεί να λειτουργήσει (αλλά δεν έχει πλέον να) με μια Εικονική κλήση της επέκτασης την επέκταση Διαγνωστικά. Το εκπέμπει δεδομένων επιδόσεων σε ένα λογαριασμό χώρου αποθήκευσης που μπορείτε να ορίσετε με το πρότυπο. Αυτά τα δεδομένα συναθροίζεται, στη συνέχεια, από την υπηρεσία Azure οθόνη.

    Εάν η υπηρεσία ιδέες δεν μπορεί να διαβάσει δεδομένα από το ΣΠΣ, θα έπρεπε να στείλετε ένα μήνυμα ηλεκτρονικού ταχυδρομείου – για παράδειγμα, εάν έχουν του ΣΠΣ προς τα κάτω, επομένως, ελέγξτε το ηλεκτρονικό ταχυδρομείο (αυτήν που καθορίσατε κατά τη δημιουργία του λογαριασμού Azure).

    Μπορείτε επίσης να μεταβείτε και να δείτε τα δεδομένα στον εαυτό σας. Εξετάστε το λογαριασμό χώρου αποθήκευσης Azure χρησιμοποιώντας την Εξερεύνηση ένα σύννεφο. Για παράδειγμα, χρησιμοποιώντας την [Εξερεύνηση Cloud Visual Studio](https://visualstudiogallery.msdn.microsoft.com/aaef6e67-4d99-40bc-aacf-662237db85a2), συνδεθείτε και επιλέξτε τη συνδρομή Azure που χρησιμοποιείτε και το όνομα λογαριασμού του χώρου αποθήκευσης Διαγνωστικά αναφέρεται στον ορισμό επέκταση Διαγνωστικά στο πρότυπό σας ανάπτυξης...

    ![Εξερεύνηση cloud][explorer]

    Εδώ θα δείτε μια ομάδα όπου αποθηκεύονται τα δεδομένα από κάθε Εικονική πίνακες. Λήψη Linux και τη μέτρηση CPU ως παράδειγμα, δείτε τις πιο πρόσφατες γραμμών. Εξερεύνηση του Visual Studio cloud υποστηρίζει μια γλώσσα ερωτημάτων, ώστε να μπορείτε να εκτελέσετε ένα ερώτημα, όπως "χρονικής σήμανσης gt datetime'2016-02-02T21:20:00Z'" για να βεβαιωθείτε ότι λαμβάνετε τα πιο πρόσφατα συμβάντα (προϋποθέτουν ώρας είναι σε UTC). Αλλάζει τα δεδομένα που βλέπετε στο αντιστοιχούν σε τους κανόνες κλίμακα ρύθμιση του; Στο παρακάτω παράδειγμα, η CPU για υπολογιστή 20 αποτελέσματα αύξηση στο 100% πάνω από την τελευταία 5 λεπτά...

    ![Χώρος αποθήκευσης πινάκων][tables]

    Εάν τα δεδομένα δεν είναι εκεί, στη συνέχεια, αυτό σημαίνει είναι το πρόβλημα με την επέκταση διαγνωστικών εκτελείται στο του ΣΠΣ. Εάν τα δεδομένα είναι εκεί, αυτό σημαίνει υπάρχει κάποιο πρόβλημα με τους κανόνες σας κλίμακα ή με την υπηρεσία ιδέες. Ελέγξτε την [κατάσταση Azure](https://azure.microsoft.com/status/).

    Αφού έχετε έχουν αυτά τα βήματα, εάν εξακολουθείτε να αντιμετωπίζετε προβλήματα autoscale που θα μπορούσε να δοκιμάστε τα φόρουμ στο [MSDN](https://social.msdn.microsoft.com/forums/azure/home?category=windowsazureplatform%2Cazuremarketplace%2Cwindowsazureplatformctp)ή σε [στοίβα υπερχείλιση](http://stackoverflow.com/questions/tagged/azure)ή συνδεθείτε σε κλήση υποστήριξης. Να είστε έτοιμοι να κάνετε κοινή χρήση του προτύπου και μια προβολή των δεδομένων επιδόσεων.

[audit]: ./media/virtual-machine-scale-sets-troubleshoot/image3.png
[explorer]: ./media/virtual-machine-scale-sets-troubleshoot/image1.png
[tables]: ./media/virtual-machine-scale-sets-troubleshoot/image4.png
