<properties
    pageTitle="Αντιμετώπιση προβλημάτων τελικά σημεία Azure CDN επιστρέφει 404 κατάστασης | Microsoft Azure"
    description="Αντιμετώπιση προβλημάτων 404 κώδικες απάντηση με Azure CDN τελικά σημεία."
    services="cdn"
    documentationCenter=""
    authors="camsoper"
    manager="erikre"
    editor=""/>

<tags
    ms.service="cdn"
    ms.workload="tbd"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="07/28/2016"
    ms.author="casoper"/>
    
# <a name="troubleshooting-cdn-endpoints-returning-404-statuses"></a>Αντιμετώπιση προβλημάτων CDN τα τελικά σημεία επιστρέφοντας 404 καταστάσεις

Σε αυτό το άρθρο σάς βοηθά να αντιμετωπίσετε τα προβλήματα με [τα τελικά σημεία CDN](cdn-create-new-endpoint.md) επιστρέφοντας 404 σφάλματα.

Εάν χρειάζεστε περισσότερη βοήθεια σε οποιοδήποτε σημείο σε αυτό το άρθρο, μπορείτε να επικοινωνήσετε με το Azure ειδικούς [το Azure MSDN](https://azure.microsoft.com/support/forums/)και τα φόρουμ υπερχείλισης στοίβας. Εναλλακτικά, μπορείτε επίσης να υποβάλετε ένα περιστατικό Azure υποστήριξης. Μεταβείτε στην [τοποθεσία υποστήριξης Azure](https://azure.microsoft.com/support/options/) και κάντε κλικ στην εντολή **Λήψη υποστήριξης**.

## <a name="symptom"></a>Σύμπτωμα

Έχετε δημιουργήσει ένα προφίλ CDN και ένα τελικό σημείο, αλλά το περιεχόμενό σας φαίνεται να μην είναι διαθέσιμα σε το CDN.  Οι χρήστες που προσπαθούν να έχετε πρόσβαση στο περιεχόμενο μέσω της διεύθυνσης URL CDN λαμβάνουν κωδικών κατάστασης HTTP 404. 

## <a name="cause"></a>Αιτία

Υπάρχουν αρκετές πιθανές αιτίες, όπως:

- Το αρχείο προέλευσης δεν είναι ορατό για το CDN
- Το τελικό σημείο έχει ρυθμιστεί σωστά, προκαλεί το CDN για να κάνετε αναζήτηση σε λάθος θέση
- Ο κεντρικός υπολογιστής απορρίπτει την κεφαλίδα κεντρικού υπολογιστή από το CDN
- Το τελικό σημείο δεν είχαν χρόνο για να μεταδοθούν σε ολόκληρο το CDN

## <a name="troubleshooting-steps"></a>Βήματα αντιμετώπισης προβλημάτων

> [AZURE.IMPORTANT] Αφού δημιουργήσετε ένα τελικό σημείο CDN, αυτό δεν θα αμέσως είναι διαθέσιμη για χρήση, όπως ο χρόνος για την καταχώρηση για μεταδοθούν έως το CDN.  Για τα προφίλ <b>CDN Azure από Akamai</b> , η μετάδοση ολοκληρώνεται συνήθως μέσα σε ένα λεπτό.  Για τα προφίλ <b>CDN Azure από Verizon</b> , η μετάδοση συνήθως θα ολοκληρωθεί εντός 90 λεπτά, αλλά σε ορισμένες περιπτώσεις μπορεί να διαρκέσει περισσότερο.  Εάν μπορείτε να ολοκληρώσετε τα βήματα σε αυτό το έγγραφο και εξακολουθείτε να λαμβάνετε απαντήσεις 404, εξετάστε το ενδεχόμενο αναμονή μερικές ώρες για να ελέγξετε ξανά πριν να ανοίξετε ένα δελτίο υποστήριξης.

### <a name="check-the-origin-file"></a>Ελέγξτε το αρχείο προέλευσης

Πρώτα, θα πρέπει να επαληθευτεί το συγκεκριμένο αρχείο θέλουμε στο cache είναι διαθέσιμη στο μας origin και είναι δυνατή η πρόσβαση στο κοινό.  Ο πιο γρήγορος τρόπος για να το κάνετε είναι να ανοίξετε ένα πρόγραμμα περιήγησης σε έναν σε ιδιωτική ή μια περίοδο λειτουργίας Incognito και να μεταβείτε απευθείας στο αρχείο.  Απλώς πληκτρολογήστε ή επικολλήστε τη διεύθυνση URL στο πλαίσιο διεύθυνση και δείτε εάν που έχει ως αποτέλεσμα το αρχείο που περιμένατε.  Για αυτό το παράδειγμα, θα χρησιμοποιήσετε ένα αρχείο που έχετε σε λογαριασμό του Azure χώρου αποθήκευσης, πρόσβαση σε `https://cdndocdemo.blob.core.windows.net/publicblob/lorem.txt`.  Όπως μπορείτε να δείτε, με επιτυχία μεταβιβάζει τον έλεγχο.

![Επιτυχίας!](./media/cdn-troubleshoot-endpoint/cdn-origin-file.png)

> [AZURE.WARNING] Ενώ αυτή είναι ο πιο γρήγορος και ευκολότερος τρόπος για να επαληθεύσετε το αρχείο σας είναι διαθέσιμο στο κοινό, ορισμένες ρυθμίσεις παραμέτρων δικτύου στην εταιρεία σας μπορεί να σας δώσει την εντύπωση ότι το αρχείο είναι διαθέσιμη στο κοινό όταν είναι, στην πραγματικότητα, ορατό μόνο σε χρήστες του δικτύου σας (ακόμα και αν φιλοξενείται στο Azure).  Εάν έχετε ένα εξωτερικό πρόγραμμα περιήγησης από την οποία μπορείτε να δοκιμάσετε, όπως μια κινητή συσκευή που δεν είναι συνδεδεμένος στο δίκτυο της εταιρείας σας ή μια εικονική μηχανή στο Azure, που θα ήταν καλύτερη.

### <a name="check-the-origin-settings"></a>Ελέγξτε τις ρυθμίσεις προέλευσης

Τώρα που θα σας επαληθεύσετε το αρχείο είναι διαθέσιμη στο κοινό στο internet, θα σας θα πρέπει να επαληθεύσετε τις ρυθμίσεις origin μας.  Στην [Πύλη του Azure](https://portal.azure.com), μεταβείτε στο προφίλ σας CDN και κάντε κλικ στην επιλογή το τελικό σημείο που αντιμετωπίζετε προβλήματα.  Στο το blade **τελικού σημείου** που προκύπτει, επιλέξτε την προέλευση.  

![Τελικό σημείο blade με origin επισημασμένο](./media/cdn-troubleshoot-endpoint/cdn-endpoint.png)

Εμφανίζεται το blade **Origin** . 

![Origin blade](./media/cdn-troubleshoot-endpoint/cdn-origin-settings.png)

#### <a name="origin-type-and-hostname"></a>Τύπος προέλευσης και όνομα κεντρικού υπολογιστή

Επαληθεύστε τον **τύπο προέλευσης** είναι σωστή, και το **όνομα κεντρικού υπολογιστή προέλευσης**.  Στο παράδειγμα, `https://cdndocdemo.blob.core.windows.net/publicblob/lorem.txt`, είναι το όνομα κεντρικού υπολογιστή τμήμα της διεύθυνσης URL `cdndocdemo.blob.core.windows.net`.  Όπως μπορείτε να δείτε στο στιγμιότυπο οθόνης, αυτή είναι σωστή.  Για το χώρο αποθήκευσης Azure Web App και προελεύσεις υπηρεσία Cloud, το πεδίο **όνομα κεντρικού υπολογιστή Origin** είναι μια αναπτυσσόμενη λίστα, ώστε να σας δεν χρειάζεται να ανησυχείτε για ορθογραφικός έλεγχος σωστά.  Ωστόσο, εάν χρησιμοποιείτε μια προσαρμοσμένη origin, είναι *απολύτως κρίσιμες* το όνομα κεντρικού υπολογιστή είναι σωστή!

#### <a name="http-and-https-ports"></a>Θύρες HTTP και HTTPS

Κάτι άλλο που πρέπει να ελέγξτε εδώ είναι σας **HTTP** και **HTTPS θύρες**.  Στις περισσότερες περιπτώσεις, 80 και 443 είναι σωστά και θα χρειαστείτε χωρίς αλλαγές.  Ωστόσο, εάν ο διακομιστής προέλευσης ακρόαση σε διαφορετική θύρα, που θα πρέπει να αντιστοιχεί εδώ.  Εάν δεν είστε βέβαιοι, εξετάστε απλώς τη διεύθυνση URL για το αρχείο προέλευσης.  Οι προδιαγραφές HTTP και HTTPS Καθορίστε θύρες 80 και 443 ως προεπιλογές. Μου διεύθυνση URL, `https://cdndocdemo.blob.core.windows.net/publicblob/lorem.txt`, μια θύρα δεν έχει καθοριστεί, ώστε να την προεπιλογή 443 λαμβάνεται και τις ρυθμίσεις είναι σωστές.  

Ωστόσο, υπάρχει η ένδειξη τη διεύθυνση URL για το αρχείο προέλευσης που θα ελεγχθεί προηγουμένως είναι `http://www.contoso.com:8080/file.txt`.  Σημείωση το `:8080` στο τέλος του τμήματος όνομα κεντρικού υπολογιστή.  Αυτό υποδεικνύει στο πρόγραμμα περιήγησης για να χρησιμοποιήσετε θύρα `8080` για να συνδεθείτε με το διακομιστή web στο `www.contoso.com`, επομένως θα πρέπει να εισαγάγετε 8080 στο πεδίο **θύρα HTTP** .  Είναι σημαντικό να λάβετε υπόψη ότι αυτές οι ρυθμίσεις θύρας επηρεάζουν μόνο ποια θύρα χρησιμοποιεί το τελικό σημείο για να ανακτήσετε πληροφορίες από την προέλευση.

> [AZURE.NOTE] Τα τελικά σημεία **CDN Azure από Akamai** να μην επιτρέπεται το πλήρες εύρος θύρας TCP για προελεύσεις.  Για μια λίστα των θυρών προέλευσης που δεν επιτρέπονται, ανατρέξτε στο θέμα [CDN Azure από Akamai επιτρεπόμενων Origin θύρες](https://msdn.microsoft.com/library/mt757337.aspx).  
  
### <a name="check-the-endpoint-settings"></a>Ελέγξτε τις ρυθμίσεις του τελικού σημείου

Επιστρέψτε στην blade το **τελικό σημείο** , κάντε κλικ στο κουμπί **Ρύθμιση παραμέτρων** .

![Τελικό σημείο blade με επισημασμένο το κουμπί ρύθμιση παραμέτρων](./media/cdn-troubleshoot-endpoint/cdn-endpoint-configure-button.png)

Εμφανίζεται το τελικό σημείο blade **Ρύθμιση παραμέτρων** .

![Ρύθμιση παραμέτρων blade](./media/cdn-troubleshoot-endpoint/cdn-configure.png)

#### <a name="protocols"></a>Τα πρωτόκολλα

Για **τα πρωτόκολλα**, βεβαιωθείτε ότι είναι επιλεγμένο το πρωτόκολλο που χρησιμοποιείται από τα προγράμματα-πελάτες.  Το ίδιο πρωτόκολλο που χρησιμοποιείται από το πρόγραμμα-πελάτης θα είναι αυτή που χρησιμοποιείται για να αποκτήσετε πρόσβαση την προέλευση, οπότε είναι σημαντικό να έχετε τις θύρες origin έχει ρυθμιστεί σωστά στην προηγούμενη ενότητα.  Το τελικό σημείο ακρόασης μόνο για τις προεπιλεγμένες HTTP και HTTPS θύρες (80 και 443), ανεξάρτητα από τις θύρες προέλευσης.

Ας επιστρέψτε στο παράδειγμά μας υποθετική με `http://www.contoso.com:8080/file.txt`.  Όπως θα θυμάστε, Contoso που καθορίζονται `8080` ως τους HTTP θύρα, αλλά επίσης έστω αυτά που καθορίζονται `44300` ως τους θύρα HTTPS.  Εάν έχουν δημιουργήσει ένα τελικό σημείο με το όνομα `contoso`, θα ήταν τους hostname τελικού σημείου CDN `contoso.azureedge.net`.  Μια αίτηση για `http://contoso.azureedge.net/file.txt` είναι μια αίτηση HTTP, ώστε το τελικό σημείο χρησιμοποιούσατε HTTP στη θύρα 8080 για να την ανακτήσετε από την προέλευση.  Μια ασφαλής αίτηση μέσω HTTPS, `https://contoso.azureedge.net/file.txt`, θα έχει ως αποτέλεσμα το τελικό σημείο για να χρησιμοποιήσετε HTTPS στη θύρα 44300 όταν retriving το αρχείο από την προέλευση.

#### <a name="origin-host-header"></a>Κεφαλίδα origin κεντρικού υπολογιστή

Στην **κεφαλίδα του κεντρικού υπολογιστή Origin** είναι η τιμή κεφαλίδας κεντρικού υπολογιστή αποστέλλονται την προέλευση με κάθε αίτηση.  Στις περισσότερες περιπτώσεις, πρέπει να είναι ίδια με **Origin hostname** θα σας έχει επαληθευτεί νωρίτερα.  Εσφαλμένη τιμή σε αυτό το πεδίο δεν θα προκαλέσει γενικά 404 καταστάσεις, αλλά ενδέχεται να προκαλέσει άλλες καταστάσεις 4xx, ανάλογα με το τι αναμένει την προέλευση.

#### <a name="origin-path"></a>Διαδρομή προέλευσης

Τέλος, θα πρέπει να επαληθευτεί μας **διαδρομή Origin**.  Από προεπιλογή είναι κενό.  Θα πρέπει να μπορείτε να χρησιμοποιήσετε μόνο αυτό το πεδίο, εάν θέλετε να περιορίσετε την εμβέλεια των πόρων που φιλοξενείται στο προέλευσης που θέλετε να κάνετε διαθέσιμη σε το CDN.  

Για παράδειγμα, στο τελικό σημείο μου, να θέλατε όλους τους πόρους στο λογαριασμό μου χώρου αποθήκευσης για να είναι διαθέσιμο, ώστε να παραμείνει **διαδρομή Origin** κενό.  Αυτό σημαίνει ότι μια αίτηση για `https://cdndocdemo.azureedge.net/publicblob/lorem.txt` έχει ως αποτέλεσμα μια σύνδεση από το τελικό σημείο για να `cdndocdemo.core.windows.net` που ζητά `/publicblob/lorem.txt`.  Παρομοίως, μια αίτηση για `https://cdndocdemo.azureedge.net/donotcache/status.png` έχει ως αποτέλεσμα την αίτηση τελικού σημείου `/donotcache/status.png` από την προέλευση.

Αλλά τι γίνεται εάν δεν θέλω να χρησιμοποιήσετε το CDN για κάθε διαδρομή καταγωγής μου;  Πείτε ι αποφασίσατε μόνο για να εμφανίσετε το `publicblob` διαδρομή.  Εάν πληκτρολογώ */publicblob* στο πεδίο μου **Origin διαδρομή** , που θα προκαλέσει το τελικό σημείο για να εισαγάγετε */publicblob* πριν από κάθε αίτηση που δημιουργείται την προέλευση.  Αυτό σημαίνει ότι η αίτηση για `https://cdndocdemo.azureedge.net/publicblob/lorem.txt` τώρα θα διαρκέσει στην πραγματικότητα το αίτηση τμήμα της διεύθυνσης URL, `/publicblob/lorem.txt`, και προσάρτηση `/publicblob` μέχρι την αρχή. Το αποτέλεσμα είναι μια αίτηση για `/publicblob/publicblob/lorem.txt` από την προέλευση.  Εάν δεν λυθεί αυτήν τη διαδρομή σε ένα αρχείο πραγματική, την προέλευση θα επιστρέψει μια κατάσταση 404.  Τη σωστή διεύθυνση URL για την ανάκτηση lorem.txt σε αυτό το παράδειγμα θα είναι στην πραγματικότητα `https://cdndocdemo.azureedge.net/lorem.txt`.  Σημειώστε ότι δεν περιλαμβάνονται η διαδρομή */publicblob* καθόλου, επειδή το αίτημα τμήμα της διεύθυνσης URL είναι `/lorem.txt` και προσθέτει το τελικό σημείο `/publicblob`, με αποτέλεσμα στο `/publicblob/lorem.txt` που την αίτηση διαβιβάζεται την προέλευση.
