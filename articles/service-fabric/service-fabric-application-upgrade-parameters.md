
<properties
   pageTitle="Αναβάθμιση εφαρμογής: αναβάθμιση παράμετροι | Microsoft Azure"
   description="Περιγράφει τις παραμέτρους που σχετίζονται με την αναβάθμιση μιας εφαρμογής υπηρεσίας ύφασμα, συμπεριλαμβανομένων των έλεγχοι εύρυθμης λειτουργίας για να εκτελέσετε και τις πολιτικές για να αναιρέσετε αυτόματα την αναβάθμιση."
   services="service-fabric"
   documentationCenter=".net"
   authors="mani-ramaswamy"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="09/14/2016"
   ms.author="subramar"/>



# <a name="application-upgrade-parameters"></a>Οι παράμετροι της αναβάθμισης εφαρμογής

Σε αυτό το άρθρο περιγράφει τις διάφορες παραμέτρους που ισχύουν κατά την αναβάθμιση μιας εφαρμογής ύφασμα υπηρεσίας Azure. Οι παράμετροι περιλαμβάνουν το όνομα και την έκδοση της εφαρμογής. Είναι knobs που ελέγχουν την λήξη περιόδων και έλεγχοι εύρυθμης λειτουργίας που εφαρμόζονται κατά την αναβάθμιση και καθορίζουν τις πολιτικές που θα πρέπει να εφαρμοστεί όταν αποτύχει η αναβάθμιση.


<br>

| Παράμετρος | Περιγραφή |
| --- | --- |
| ApplicationName | Όνομα της εφαρμογής που αναβαθμίζεται. Παραδείγματα: ύφασμα: / VisualObjects, ύφασμα: / ClusterMonitor  |
| TargetApplicationTypeVersion | Πληκτρολογήστε την έκδοση της εφαρμογής που τους στόχους αναβάθμισης. |
| FailureAction | Η ενέργεια που λαμβάνονται από ύφασμα υπηρεσίας όταν αποτύχει η αναβάθμιση. Η εφαρμογή μπορεί να επανέλθει στην έκδοση πριν από την ενημέρωση (επαναφορά), ή πρέπει να διακοπεί η αναβάθμιση στο τον τρέχοντα τομέα αναβάθμισης. Στην τελευταία περίπτωση, η λειτουργία αναβάθμισης επίσης αλλάζει σε μη αυτόματος. Επιτρεπόμενη τιμή είναι επαναφοράς και μη αυτόματα. |
| HealthCheckWaitDurationSec | Το χρόνο αναμονής (σε δευτερόλεπτα), αφού η αναβάθμιση ολοκληρώθηκε τον τομέα αναβάθμισης πριν από την υπηρεσία ύφασμα υπολογίζει την εύρυθμη λειτουργία της εφαρμογής. Η διάρκεια μπορεί να θεωρηθεί επίσης ως το χρονικό διάστημα που πρέπει να εκτελείται μια εφαρμογή πριν μπορούν να θεωρηθούν σε καλή κατάσταση. Εάν ο έλεγχος εύρυθμης λειτουργίας ένα, τη διαδικασία αναβάθμισης συνεχίζει με την επόμενη αναβάθμισης τομέα.  Εάν ο έλεγχος εύρυθμης λειτουργίας αποτύχει, υπηρεσία ύφασμα περιμένει ένα χρονικό διάστημα (η UpgradeHealthCheckInterval) πριν από την επανάληψη ο έλεγχος εύρυθμης λειτουργίας ξανά, μέχρι να φτάσει το HealthCheckRetryTimeout. Η προεπιλεγμένη και συνιστώμενη τιμή είναι 0 δευτερόλεπτα. |
| HealthCheckRetryTimeoutSec | Η διάρκεια (σε δευτερόλεπτα) που ύφασμα υπηρεσία εξακολουθεί να εκτελέσετε αξιολόγηση εύρυθμης λειτουργίας πριν από την δήλωση την αναβάθμιση, καθώς απέτυχε. Η προεπιλογή είναι 600 δευτερόλεπτα. Η διάρκεια ξεκινά μόλις φτάσει HealthCheckWaitDuration. Μέσα σε αυτό το HealthCheckRetryTimeout, ύφασμα υπηρεσίας ενδέχεται να εκτελούν πολλές έλεγχοι εύρυθμης λειτουργίας της την εύρυθμη λειτουργία της εφαρμογής. Η προεπιλεγμένη τιμή είναι 10 λεπτά και θα πρέπει να προσαρμοστούν σωστά για την εφαρμογή σας. |
| HealthCheckStableDurationSec | Η διάρκεια (σε δευτερόλεπτα) για να επαληθεύσετε ότι η εφαρμογή είναι σταθερό πριν τη μετακίνηση στον επόμενο αναβάθμισης τομέα ή την ολοκλήρωση της αναβάθμισης. Η διάρκεια αναμονής χρησιμοποιείται για να αποτρέψετε αλλαγές δεν εντοπίζεται της εύρυθμης λειτουργίας δεξιά μετά την εκτέλεση του ελέγχου εύρυθμης λειτουργίας. Η προεπιλεγμένη τιμή είναι 120 δευτερόλεπτα και θα πρέπει να προσαρμοστεί σωστά για την εφαρμογή σας. |
| UpgradeDomainTimeoutSec | Μέγιστο χρόνο (σε δευτερόλεπτα) για την αναβάθμιση σε ένα μεμονωμένο αναβάθμισης τομέα. Εάν φτάσει αυτό λήξης χρονικού ορίου, η αναβάθμιση σταματά και συνεχίζει με βάση τη ρύθμιση για UpgradeFailureAction. Η προεπιλεγμένη τιμή είναι ποτέ (απεριόριστη) και θα πρέπει να προσαρμοστούν σωστά για την εφαρμογή σας. |
| UpgradeTimeout | Χρονικό όριο (σε δευτερόλεπτα) που ισχύει για ολόκληρη την αναβάθμιση. Εάν αυτό λήξης χρονικού ορίου φτάσει, ενεργοποιείται η αναβάθμιση διακοπές και UpgradeFailureAction. Η προεπιλεγμένη τιμή είναι ποτέ (απεριόριστη) και θα πρέπει να προσαρμοστούν σωστά για την εφαρμογή σας. |
| UpgradeHealthCheckInterval | Η συχνότητα ότι είναι ενεργοποιημένη η κατάσταση εύρυθμης λειτουργίας. Αυτή η παράμετρος έχει οριστεί στην ενότητα ClusterManager του _συμπλέγματος_ _δήλωσης_και δεν έχει καθοριστεί ως μέρος του το cmdlet αναβάθμισης. Η προεπιλεγμένη τιμή είναι 60 δευτερόλεπτα.  |






<br>
## <a name="service-health-evaluation-during-application-upgrade"></a>Αξιολόγηση εύρυθμης λειτουργίας υπηρεσίας κατά την αναβάθμιση εφαρμογής

<br>
Τα κριτήρια αξιολόγησης εύρυθμης λειτουργίας είναι προαιρετικό. Εάν δεν καθορίζονται τα κριτήρια αξιολόγησης εύρυθμης λειτουργίας όταν ξεκινά μια αναβάθμιση, υπηρεσία ύφασμα χρησιμοποιεί τις πολιτικές εύρυθμης λειτουργίας εφαρμογής που καθορίζεται στο το ApplicationManifest.xml από την παρουσία της εφαρμογής.


<br>

| Παράμετρος | Περιγραφή |
| --- | --- |
| ConsiderWarningAsError | Η προεπιλεγμένη τιμή είναι False. Αντιμετωπίστε τα συμβάντα προειδοποίησης εύρυθμης λειτουργίας για την εφαρμογή ως σφάλματα κατά την αποτίμηση της εύρυθμης λειτουργίας της εφαρμογής κατά την αναβάθμιση. Από προεπιλογή, υπηρεσία ύφασμα δεν έχει ως αποτέλεσμα προειδοποίηση συμβάντα εύρυθμης λειτουργίας να είναι σφάλματα (σφάλματα), ώστε να συνεχίσετε την αναβάθμιση ακόμα και αν υπάρχουν συμβάντα προειδοποίησης.   |
| MaxPercentUnhealthyDeployedApplications | Προεπιλεγμένοι και προτεινόμενη τιμή είναι 0. Καθορίστε τον μέγιστο αριθμό ανάπτυξη εφαρμογών (ανατρέξτε στην [ενότητα εύρυθμη λειτουργία](service-fabric-health-introduction.md)) που μπορεί να είναι κατεστραμμένη πριν από την εφαρμογή θεωρείται κατεστραμμένες και αποτύχει η αναβάθμιση. Η παράμετρος αυτή καθορίζει την εύρυθμη λειτουργία της εφαρμογής στον κόμβο και σας βοηθά να εντοπίσει ζητήματα κατά την αναβάθμιση. Συνήθως, τα αντίγραφα της εφαρμογής λάβετε εξισορρόπηση φόρτου σε άλλον κόμβο, που επιτρέπει την εφαρμογή για να εμφανίζονται σε καλή κατάσταση, επιτρέποντας την αναβάθμιση για να συνεχίσετε. Καθορίζοντας μια αντικειμενική εύρυθμης λειτουργίας MaxPercentUnhealthyDeployedApplications, υπηρεσία ύφασμα μπορεί να εντοπίσει ένα πρόβλημα με το πακέτο εφαρμογών γρήγορα και αγροτικά προϊόντα αποτυχίας γρήγορα την αναβάθμιση. |
| MaxPercentUnhealthyServices | Προεπιλεγμένοι και προτεινόμενη τιμή είναι 0. Καθορίστε τον μέγιστο αριθμό των υπηρεσιών στην παρουσία της εφαρμογής που μπορεί να είναι κατεστραμμένη πριν από την εφαρμογή θεωρείται κατεστραμμένες και αποτύχει η αναβάθμιση. |
| MaxPercentUnhealthyPartitionsPerService | Προεπιλεγμένοι και προτεινόμενη τιμή είναι 0. Καθορίστε τον μέγιστο αριθμό των διαμερισμάτων σε μια υπηρεσία που μπορεί να είναι κατεστραμμένη πριν από την υπηρεσία θεωρείται κατεστραμμένες. |
| MaxPercentUnhealthyReplicasPerPartition | Προεπιλεγμένοι και προτεινόμενη τιμή είναι 0. Καθορίστε τον μέγιστο αριθμό αντίγραφα στο διαμερισμάτων που μπορεί να είναι κατεστραμμένη πριν από τα διαμερίσματα θεωρείται κατεστραμμένες. |
| UpgradeReplicaSetCheckTimeout | **Χωρίς κατάσταση υπηρεσίας**--μέσα σε έναν μεμονωμένο αναβάθμισης τομέα, υπηρεσία ύφασμα προσπαθεί να βεβαιωθείτε ότι είναι διαθέσιμα πρόσθετες εμφανίσεις αυτής της υπηρεσίας. Εάν το πλήθος παρουσία προορισμού είναι περισσότερες από μία, υπηρεσία ύφασμα χρειάζεται να περιμένει για περισσότερες από μία παρουσία να είναι διαθέσιμη, έως και μια τιμή λήξης χρονικού ορίου μέγιστο. Σε αυτό το χρονικό όριο καθορίζεται, χρησιμοποιώντας την ιδιότητα UpgradeReplicaSetCheckTimeout. Εάν λήξει το χρονικό όριο, υπηρεσία ύφασμα συνεχίζεται με την αναβάθμιση, ανεξάρτητα από τον αριθμό των παρουσιών της υπηρεσίας. Εάν το πλήθος παρουσία προορισμού είναι ένα, υπηρεσία ύφασμα να μην περιμένετε και εξελίσσεται αμέσως με την αναβάθμιση. **Κατάσταση υπηρεσίας**--μέσα σε έναν μεμονωμένο αναβάθμισης τομέα, ύφασμα υπηρεσία προσπαθεί να βεβαιωθείτε ότι το σύνολο ρεπλίκα διαθέτει απαρτίας. Υπηρεσία ύφασμα περιμένει απαρτίας να είναι διαθέσιμη, έως και μια τιμή λήξης χρονικού ορίου μέγιστο (που καθορίζεται από την ιδιότητα UpgradeReplicaSetCheckTimeout). Εάν λήξει το χρονικό όριο, υπηρεσία ύφασμα συνεχίζεται με την αναβάθμιση, ανεξάρτητα από το απαρτίας. Αυτή η ρύθμιση είναι ποτέ ως σύνολο (άπειρο) όταν σάρωση προς τα εμπρός και 900 δευτερόλεπτα κατά την κατάργηση της εγκατάστασης. |
| ForceRestart | Εάν ενημερώσετε μια ρύθμιση παραμέτρων ή πακέτου δεδομένων χωρίς να ενημερώνετε τον κωδικό υπηρεσίας, η υπηρεσία γίνει επανεκκίνηση του μόνο εάν η ιδιότητα ForceRestart έχει οριστεί στην τιμή true. Όταν ολοκληρωθεί η ενημέρωση, υπηρεσία ύφασμα ειδοποιεί την υπηρεσία ότι υπάρχει ένα νέο ρύθμισης παραμέτρων πακέτο ή πακέτο δεδομένων. Η υπηρεσία είναι υπεύθυνος για να εφαρμόσετε τις αλλαγές. Εάν είναι απαραίτητο, μπορεί να γίνει επανεκκίνηση της υπηρεσίας ίδια. |



<br>
<br>
Μπορείτε να καθορίσετε τα κριτήρια MaxPercentUnhealthyServices, MaxPercentUnhealthyPartitionsPerService και MaxPercentUnhealthyReplicasPerPartition ανά τύπο υπηρεσίας για μια παρουσία της εφαρμογής. Ορισμός αυτές οι παράμετροι ανά υπηρεσία επιτρέπει για μια εφαρμογή για να περιέχουν διάφορες υπηρεσίες τύπους με τις πολιτικές διαφορετικό αξιολόγησης. Για παράδειγμα, ένας τύπος υπηρεσίας χωρίς κατάσταση πύλης μπορεί να έχει ένα MaxPercentUnhealthyPartitionsPerService που είναι διαφορετικό από έναν τύπο υπηρεσίας κατάστασης μηχανισμός για μια συγκεκριμένη εφαρμογή παρουσία.

## <a name="next-steps"></a>Επόμενα βήματα

[Αναβάθμιση σας εφαρμογή χρησιμοποιώντας Visual Studio](service-fabric-application-upgrade-tutorial.md) σάς καθοδηγεί σε μια εφαρμογή αναβάθμιση χρήση του Visual Studio.

[Αναβάθμιση του Powershell χρήση εφαρμογής](service-fabric-application-upgrade-tutorial-powershell.md) σάς καθοδηγεί σε μια αναβάθμιση εφαρμογών με χρήση του PowerShell.

Κάνει σας αναβαθμίσεις εφαρμογή συμβατά μαθαίνοντας πώς μπορείτε να χρησιμοποιήσετε [Δεδομένα σειριοποίησης](service-fabric-application-upgrade-data-serialization.md).

Μάθετε πώς μπορείτε να χρησιμοποιήσετε λειτουργίες για προχωρημένους κατά την αναβάθμιση της εφαρμογής σας με αναφορά σε [Θέματα για προχωρημένους](service-fabric-application-upgrade-advanced.md).

Διορθώστε συνήθη προβλήματα στην εφαρμογή αναβαθμίσεις με αναφορά σε τα βήματα στο θέμα [Αντιμετώπιση προβλημάτων εφαρμογής αναβαθμίσεις του στοιχείου](service-fabric-application-upgrade-troubleshooting.md).
 
