<properties
   pageTitle="Κλιμάκωση ένα σύμπλεγμα υπηρεσίας ύφασμα ή σμίκρυνση | Microsoft Azure"
   description="Κλίμακα σε ένα σύμπλεγμα υπηρεσίας ύφασμα ή σμίκρυνση ώστε να ταιριάζει με ζήτηση, ορίζοντας Αυτόματη κλίμακα κανόνων για κάθε σύνολο κόμβου τύπου/Εικονική κλίμακα. Προσθήκη ή κατάργηση κόμβους σε ένα σύμπλεγμα ύφασμα υπηρεσίας"
   services="service-fabric"
   documentationCenter=".net"
   authors="ChackDan"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="09/09/2016"
   ms.author="chackdan"/>


# <a name="scale-a-service-fabric-cluster-in-or-out-using-auto-scale-rules"></a>Κλιμάκωση ένα σύμπλεγμα υπηρεσίας ύφασμα ή σμίκρυνση με τη χρήση κανόνων αυτόματης κλίμακας

Τα σύνολα κλίμακα εικονική μηχανή είναι ένας πόρος Azure υπολογισμού που μπορείτε να χρησιμοποιήσετε για να αναπτύξετε και να διαχειριστείτε μια συλλογή από εικονικές μηχανές ως σύνολο. Κάθε τύπος κόμβου που έχει οριστεί σε ένα σύμπλεγμα ύφασμα υπηρεσίας έχει οριστεί ως ένα ξεχωριστό σύνολο κλίμακα Εικονική. Κάθε τύπος κόμβου μπορεί να έχει, στη συνέχεια, ή ανάληψη ανεξάρτητα από αυτό, έχουν διαφορετικά σύνολα θύρες ανοιχτό και μπορούν να έχουν διαφορετική χωρητικότητα μετρήσεις. Διαβάστε περισσότερα σχετικά με αυτό το έγγραφο [nodetypes ύφασμα υπηρεσίας](service-fabric-cluster-nodetypes.md) . Εφόσον υφάσματος υπηρεσίας τύποι κόμβο του συμπλέγματος πραγματοποιούνται της κλίμακας Εικονική ορίζει στο υπόβαθρο, πρέπει να ορίσετε κανόνες αυτόματης κλίμακας για κάθε σύνολο κόμβου τύπου/Εικονική κλίμακα.

>[AZURE.NOTE] Τη συνδρομή σας πρέπει να έχετε αρκετό πυρήνων για να προσθέσετε το νέο ΣΠΣ που απαρτίζουν αυτό το σύμπλεγμα. Δεν υπάρχει καμία επικύρωση μοντέλο αυτήν τη στιγμή, ώστε να λάβετε μια ώρα αποτυχία ανάπτυξης, εάν οποιοδήποτε από τα όρια μεγέθους είναι πατήσετε.

## <a name="choose-the-node-typevm-scale-set-to-scale"></a>Επιλέξτε την κλίμακα τύπος/Εικονική κόμβο ρύθμιση για να κλιμακωθεί

Προς το παρόν, δεν είναι δυνατή η για να καθορίσετε τους κανόνες αυτόματης κλίμακας για Εικονική σύνολα κλίμακα με την πύλη, οπότε ας χρήση του PowerShell Azure (1.0 +) για να εμφανίζονται οι τύποι κόμβου και, στη συνέχεια, προσθήκη κανόνων αυτόματης κλίμακας σε αυτά.

Για να λάβετε τη λίστα των σύνολο κλίμακα Εικονική που απαρτίζουν το σύμπλεγμά σας, εκτελέστε τα ακόλουθα cmdlet:

```powershell
Get-AzureRmResource -ResourceGroupName <RGname> -ResourceType Microsoft.Compute/VirtualMachineScaleSets

Get-AzureRmVmss -ResourceGroupName <RGname> -VMScaleSetName <VM Scale Set name>
```

## <a name="set-auto-scale-rules-for-the-node-typevm-scale-set"></a>Ορισμός κανόνων αυτόματης κλίμακας για το σύνολο κλίμακα τύπος/Εικονική κόμβου

Εάν το σύμπλεγμά σας έχει πολλούς τύπους κόμβου, στη συνέχεια, επαναλάβετε για κάθε κλίμακα τύποι/Εικονική κόμβο ορίζει ότι θέλετε να περιορίσετε το μέγεθος (ή σμίκρυνση). Λάβετε υπόψη τον αριθμό των κόμβους ότι πρέπει να έχετε πριν να ρυθμίσετε Αυτόματη κλίμακα. Το ελάχιστο αριθμό κόμβους που πρέπει να έχετε για τον τύπο κύριο κόμβο κινείται από το επίπεδο αξιοπιστίας που έχετε επιλέξει. Διαβάστε περισσότερα σχετικά με τα [επίπεδα αξιοπιστίας](service-fabric-cluster-capacity.md).

>[AZURE.NOTE]  Κλίμακας προς τα κάτω τον κύριο κόμβο πληκτρολογήστε σε τιμή μικρότερη από το ελάχιστο αριθμό δημιουργίας του συμπλέγματος ασταθής ή να την προς τα κάτω. Αυτό θα μπορούσε να έχει ως αποτέλεσμα την απώλεια δεδομένων για τις εφαρμογές σας και για τις υπηρεσίες του συστήματος.

Προς το παρόν δεν κινείται τη δυνατότητα αυτόματης κλιμάκωσης από τα φορτία που τις εφαρμογές σας μπορεί να είναι αναφοράς σε ύφασμα υπηρεσίας. Επομένως, αυτήν τη στιγμή της αυτόματης κλίμακας που λαμβάνετε καθαρά κινείται με τις επιδόσεις μετρητές που είναι που εκπέμπει καθεμία από την εικονική Μηχανή κλίμακα σύνολο παρουσιών.  

Ακολουθήστε αυτές τις οδηγίες [για να ρυθμίσετε Αυτόματη κλίμακα για κάθε σύνολο κλίμακα Εικονική](../virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview.md).

>[AZURE.NOTE] Σε μια κλίμακα προς τα κάτω το σενάριο, εκτός εάν τον τύπο κόμβου σας έχει ένα επίπεδο διάρκεια ζωής Gold ή Ασημί πρέπει να καλέσετε το [cmdlet κατάργηση ServiceFabricNodeState](https://msdn.microsoft.com/library/azure/mt125993.aspx) με το όνομα κατάλληλο κόμβο.

## <a name="manually-add-vms-to-a-node-typevm-scale-set"></a>Μη αυτόματη προσθήκη ΣΠΣ σε ένα σύνολο κλίμακα τύπος/Εικονική κόμβου

Ακολουθήστε τις οδηγίες/δείγμα στη [συλλογή προτύπων γρήγορης εκκίνησης](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) για να αλλάξετε τον αριθμό των ΣΠΣ σε κάθε Nodetype. 

>[AZURE.NOTE] Προσθήκη του ΣΠΣ διαρκεί, έτσι δεν αναμένετε τις προσθήκες να είναι στιγμιαία. Επομένως, Σχεδιασμός για να προσθέσετε χωρητικότητα σωστά σε χρόνο, για να επιτρέψετε για περισσότερους από 10 λεπτά πριν από την ικανότητα Εικονική είναι διαθέσιμη για τα αντίγραφα / υπηρεσίας παρουσίες να τοποθετηθεί.

## <a name="manually-remove-vms-from-the-primary-node-typevm-scale-set"></a>Μη αυτόματη κατάργηση ΣΠΣ από το κύριο κόμβο τύπος/Εικονική κλίμακα σύνολο

>[AZURE.NOTE] Εκτελέστε τις υπηρεσίες συστήματος ύφασμα υπηρεσίας στον τύπο κύριο κόμβο του συμπλέγματος. Έτσι ποτέ θα πρέπει να τερματίσετε τη λειτουργία ή την κλίμακα μετρά τον αριθμό των παρουσιών σε κόμβο τους τύπους μικρότερο του τι την αξιοπιστία σειρά αξίζει. Ανατρέξτε [στις](service-fabric-cluster-capacity.md)λεπτομέρειες σε βαθμίδες αξιοπιστία εδώ. 

Πρέπει να εκτελέσετε τα παρακάτω βήματα μία Εικονική παρουσία κάθε φορά. Αυτό σας επιτρέπει για τις υπηρεσίες του συστήματος (και με κατάσταση των υπηρεσιών σας) για να τερματιστεί ομαλά για την παρουσία Εικονική καταργείτε και νέα αντίγραφα που δημιουργήθηκε σε άλλους κόμβους.

1. Εκτελέστε [Απενεργοποίηση ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) με πρόθεση 'RemoveNode' για να απενεργοποιήσετε τον κόμβο πρόκειται να καταργήσετε (η υψηλότερη παρουσία σε αυτόν τον τύπο κόμβου).

2. Εκτελέστε το [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) για να βεβαιωθείτε ότι ο κόμβος έχει στην πραγματικότητα μεταπηδά απενεργοποιημένη. Εάν όχι, περιμένετε έως ότου ο κόμβος είναι απενεργοποιημένη. Δεν είναι δυνατό να hurry αυτό το βήμα.

2. Ακολουθήστε τις οδηγίες/δείγμα στη [συλλογή προτύπων γρήγορης εκκίνησης](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) για να αλλάξετε τον αριθμό των ΣΠΣ από μία στο συγκεκριμένο Nodetype. Η παρουσία καταργηθεί είναι η υψηλότερη παρουσία Εικονική. 

3. Επαναλάβετε τα βήματα 1 έως 3 σύμφωνα με τις ανάγκες, αλλά ποτέ κλιμάκωση μετρά τον αριθμό των παρουσιών στους τύπους κύριο κόμβο λιγότερο από τι αξίζει το επίπεδο αξιοπιστίας. Ανατρέξτε [στις](service-fabric-cluster-capacity.md)λεπτομέρειες σε βαθμίδες αξιοπιστία εδώ. 

## <a name="manually-remove-vms-from-the-non-primary-node-typevm-scale-set"></a>Με μη αυτόματο τρόπο κατάργηση ΣΠΣ από το σύνολο κλίμακα τύπος/Εικονική μη πρωτεύοντος κόμβου

>[AZURE.NOTE] Για μια υπηρεσία κατάστασης, χρειάζεστε έναν ορισμένο αριθμό κόμβους για να διατηρείτε πάντα προς τα επάνω στο διαθεσιμότητα και να διατηρούν κατάσταση της υπηρεσίας σας. Στο πολύ ελάχιστη, χρειάζεστε τον αριθμό των κόμβους ίσο με το πλήθος σύνολο ρεπλίκα προορισμού της διαμερίσματα υπηρεσίας. 

Χρειάζεστε το execute τα παρακάτω βήματα μία Εικονική παρουσία κάθε φορά. Αυτό σας επιτρέπει για τις υπηρεσίες του συστήματος (και με κατάσταση των υπηρεσιών σας) για να τερματιστεί ομαλά στην παρουσία Εικονική καταργείτε και άλλο πού δημιουργηθεί νέα αντίγραφα.

1. Εκτελέστε [Απενεργοποίηση ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) με πρόθεση 'RemoveNode' για να απενεργοποιήσετε τον κόμβο πρόκειται να καταργήσετε (η υψηλότερη παρουσία σε αυτόν τον τύπο κόμβου).

2. Εκτελέστε το [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) για να βεβαιωθείτε ότι ο κόμβος έχει στην πραγματικότητα μεταπηδά απενεργοποιημένη. Εάν δεν περιμένετε έως ότου ο κόμβος είναι απενεργοποιημένη. Δεν είναι δυνατό να hurry αυτό το βήμα.

2. Ακολουθήστε τις οδηγίες/δείγμα στη [συλλογή προτύπων γρήγορης εκκίνησης](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) για να αλλάξετε τον αριθμό των ΣΠΣ από μία στο συγκεκριμένο Nodetype. Τώρα θα καταργηθούν την υψηλότερη παρουσία Εικονική. 

3. Επαναλάβετε τα βήματα 1 έως 3 σύμφωνα με τις ανάγκες, αλλά ποτέ κλιμάκωση προς τα κάτω τον αριθμό των εμφανίσεων στους τύπους κύριο κόμβο λιγότερο από τι αξίζει το επίπεδο αξιοπιστίας. Ανατρέξτε [στις](service-fabric-cluster-capacity.md)λεπτομέρειες στην αξιοπιστία βαθμίδες εδώ.

## <a name="behaviors-you-may-observe-in-service-fabric-explorer"></a>Συμπεριφορές μπορεί να παρατηρήσετε στην Εξερεύνηση ύφασμα υπηρεσίας

Όταν γίνεται κλιμάκωση του ένα σύμπλεγμα την Εξερεύνηση ύφασμα υπηρεσία θα αντανακλούν τον αριθμό των κόμβους (κλίμακα Εικονική οριστεί παρουσίες) που αποτελούν μέρος του συμπλέγματος.  Ωστόσο, όταν γίνεται κλιμάκωση ένα σύμπλεγμα προς τα κάτω, θα δείτε την παρουσία καταργηθεί κόμβο/Εικονική εμφανίζεται σε κατάσταση εύρυθμης λειτουργίας, εκτός εάν καλέσετε [cmd κατάργηση ServiceFabricNodeState](https://msdn.microsoft.com/library/mt125993.aspx) με το όνομα κατάλληλο κόμβο.   

Ακολουθεί η επεξήγηση για αυτήν τη συμπεριφορά.

Οι κόμβοι που εμφανίζεται στην Εξερεύνηση ύφασμα υπηρεσίας είναι μια αντανάκλαση την υπηρεσία ύφασμα υπηρεσιών συστήματος (FM συγκεκριμένα) γνωρίζει σχετικά με τον αριθμό των κόμβους του συμπλέγματος είχατε/περιλαμβάνει. Κατά την κλίμακα της κλίμακας Εικονική ρύθμιση προς τα κάτω, την εικονική Μηχανή έχει διαγραφεί αλλά υπηρεσία συστήματος FM εξακολουθεί να θεωρεί ότι ότι ο κόμβος (που έχει αντιστοιχιστεί σε η Εικονική που έχει διαγραφεί) θα επιστρέψει. Επομένως, υπηρεσία ύφασμα Explorer συνεχίζει να εμφανίζει αυτόν τον κόμβο (αν και την κατάσταση εύρυθμης λειτουργίας μπορεί να είναι τιμές σφάλματος ή άγνωστη).

Για να βεβαιωθείτε ότι ένας κόμβος καταργείται όταν μια Εικονική έχει καταργηθεί, έχετε δύο επιλογές:

1) Επιλέξτε ένα επίπεδο διάρκεια ζωής Gold ή Ασημί (διαθέσιμες σύντομα) για τους τύπους κόμβου στο σύμπλεγμά σας, που σας δίνει την ενοποίηση υποδομής. Που θα, στη συνέχεια, αφαιρεί αυτόματα τους κόμβους από μας κατάστασης υπηρεσιών (FM) συστήματος όταν γίνεται κλιμάκωση προς τα κάτω.
Ανατρέξτε [στις](service-fabric-cluster-capacity.md) λεπτομέρειες σχετικά με τα επίπεδα διάρκεια ζωής εδώ

2) Αφού την παρουσία Εικονική κλιμάκωσης προς τα κάτω, θα πρέπει να καλέσετε το [cmdlet κατάργηση ServiceFabricNodeState](https://msdn.microsoft.com/library/mt125993.aspx).

>[AZURE.NOTE] Υπηρεσία ύφασμα συμπλεγμάτων απαιτούν έναν ορισμένο αριθμό κόμβοι να είναι προς τα επάνω όλα την ώρα για να διατηρήσετε διαθεσιμότητα και να διατηρούν κατάσταση - αναφέρονται ως "Διατήρηση απαρτίας." Επομένως, δεν είναι συνήθως ασφαλές να τερματίσετε όλους τους υπολογιστές στο σύμπλεγμα, εκτός και εάν έχετε εκτελέσει πρώτα ένα [πλήρες αντίγραφο ασφαλείας της την κατάσταση](service-fabric-reliable-services-backup-restore.md).

## <a name="next-steps"></a>Επόμενα βήματα
Διαβάστε τα εξής για να μάθετε επίσης σχετικά με το σχεδιασμό χωρητικότητα σύμπλεγμα, την αναβάθμιση σε ένα σύμπλεγμα και διαμερισμάτων υπηρεσίες:

- [Σχεδιασμός δυνατοτήτων του συμπλέγματος](service-fabric-cluster-capacity.md)
- [Αναβαθμίσεις συμπλέγματος](service-fabric-cluster-upgrade.md)
- [Διαμερίσματα με κατάσταση υπηρεσίες για μέγιστη κλίμακα](service-fabric-concepts-partitioning.md)

<!--Image references-->
[BrowseServiceFabricClusterResource]: ./media/service-fabric-cluster-scale-up-down/BrowseServiceFabricClusterResource.png
[ClusterResources]: ./media/service-fabric-cluster-scale-up-down/ClusterResources.png
