<properties
   pageTitle="Παρακολούθηση εύρυθμης λειτουργίας υπηρεσίας ύφασμα | Microsoft Azure"
   description="Μια εισαγωγή σχετικά με την εύρυθμη λειτουργία Azure Service ύφασμα παρακολούθηση μοντέλο, η οποία παρέχει παρακολούθηση των το σύμπλεγμα και τις εφαρμογές και υπηρεσίες."
   services="service-fabric"
   documentationCenter=".net"
   authors="oanapl"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="09/28/2016"
   ms.author="oanapl"/>

# <a name="introduction-to-service-fabric-health-monitoring"></a>Εισαγωγή στην υπηρεσία ύφασμα παρακολούθηση εύρυθμης λειτουργίας
Azure Service ύφασμα παρουσιάζει ένα μοντέλο εύρυθμης λειτουργίας που παρέχει αξιολόγησης εμπλουτισμένου ευέλικτη και επεκτάσιμη εύρυθμης λειτουργίας και δημιουργία αναφορών. Το μοντέλο επιτρέπει την παρακολούθηση της κατάστασης του συμπλέγματος και τις υπηρεσίες που εκτελούνται σε αυτό κοντά-πραγματικό χρόνο. Μπορείτε εύκολα να λήψη πληροφοριών εύρυθμης λειτουργίας και να διορθώσετε πιθανά ζητήματα πριν από την επικάλυψη και προκαλέσει μαζικών διακοπές. Τυπικές του μοντέλου, υπηρεσίες αποστολή αναφορές με βάση τις τοπικές προβολές και ότι οι πληροφορίες συναθροίζεται για την παροχή του συνολικού σύμπλεγμα επιπέδου προβολής.

Υπηρεσία ύφασμα στοιχεία χρησιμοποιήσετε αυτό το μοντέλο εμπλουτισμένου εύρυθμης λειτουργίας για την αναφορά τρέχουσα κατάστασή τους. Μπορείτε να χρησιμοποιήσετε τον ίδιο μηχανισμό για αναφορά εύρυθμης λειτουργίας από τις εφαρμογές σας. Εάν αφιερώσει στην αναφορά εύρυθμης λειτουργίας υψηλής ποιότητας που καταγράφει τις προσαρμοσμένες συνθήκες, μπορείτε να εντοπίσετε και να διορθώσετε προβλήματα για την εφαρμογή σας εκτελείται πολύ πιο εύκολα.

> [AZURE.NOTE] Θα σας αποτελέσματα του υποσυστήματος εύρυθμης λειτουργίας για τη διεύθυνση ανάγκη για αναβαθμίσεις εποπτευόμενη. Υπηρεσία ύφασμα παρέχει εποπτευόμενη εφαρμογής και σύμπλεγμα αναβαθμίσεις που εξασφαλίστε πλήρους διαθεσιμότητα, δεν υπάρχει χρόνος εκτός λειτουργίας και ελάχιστες χωρίς παρέμβαση του χρήστη. Για να επιτύχετε αυτούς τους στόχους, την αναβάθμιση έλεγχοι εύρυθμης λειτουργίας που βασίζεται σε ρύθμιση των παραμέτρων πολιτικών αναβάθμισης και σας επιτρέπει να συνεχίσει μόνο όταν εύρυθμης λειτουργίας τηρεί τις επιθυμητές όρια μια αναβάθμιση. Διαφορετικά, η αναβάθμιση είναι αυτόματη επαναφορά ή σε παύση για να δώσετε στους διαχειριστές ευκαιρία για να διορθώσετε τα προβλήματα. Για να μάθετε περισσότερα σχετικά με την εφαρμογή αναβαθμίσεις, ανατρέξτε [σε αυτό το άρθρο](service-fabric-application-upgrade.md).

## <a name="health-store"></a>Χώρος αποθήκευσης εύρυθμης λειτουργίας
Ο χώρος αποθήκευσης εύρυθμης λειτουργίας διατηρεί εύρυθμης λειτουργίας πληροφορίες σχετικά με την οντοτήτων στο σύμπλεγμα για εύκολη ανάκτηση και αξιολόγησης. Εφαρμόζεται με μια υπηρεσία ύφασμα διατηρηθεί κατάστασης υπηρεσίας για να βεβαιωθείτε ότι υψηλή διαθεσιμότητα και κλιμάκωση. Ο χώρος αποθήκευσης εύρυθμης λειτουργίας είναι μέρος του **ύφασμα: / σύστημα** εφαρμογής, και είναι διαθέσιμες όταν το σύμπλεγμα είναι προς τα επάνω και εκτελείται.

## <a name="health-entities-and-hierarchy"></a>Οντοτήτων εύρυθμης λειτουργίας και της ιεραρχίας
Το οντοτήτων εύρυθμης λειτουργίας είναι οργανωμένα σε λογική ιεραρχία που καταγράφει τις αλληλεπιδράσεις και εξαρτήσεις ανάμεσα στις διαφορετικές οντοτήτων. Οντοτήτων και ιεραρχία δημιουργούνται αυτόματα από το χώρο αποθήκευσης εύρυθμης λειτουργίας που βασίζονται σε αναφορές που λάβατε από την υπηρεσία ύφασμα στοιχεία.

Το οντοτήτων εύρυθμης λειτουργίας αντικριστά των οντοτήτων ύφασμα υπηρεσίας. (Για παράδειγμα, **οντότητα εφαρμογής εύρυθμης λειτουργίας** αντιστοιχεί σε μια παρουσία της εφαρμογής αναπτυχθεί στο σύμπλεγμα, ενώ **εύρυθμης λειτουργίας κόμβου οντότητα** ταιριάζει με έναν κόμβο συμπλέγματος υπηρεσίας ύφασμα.) Ιεραρχία εύρυθμης λειτουργίας καταγράφει τις αλληλεπιδράσεις των οντοτήτων συστήματος και είναι η βάση για την αξιολόγηση εύρυθμη λειτουργία για προχωρημένους. Μπορείτε να μάθετε σχετικά με τις βασικές έννοιες ύφασμα υπηρεσίας στην [υπηρεσία ύφασμα Τεχνική επισκόπηση](service-fabric-technical-overview.md). Για περισσότερες πληροφορίες σχετικά με εφαρμογή, ανατρέξτε στο θέμα [μοντέλο εφαρμογών υπηρεσίας ύφασμα](service-fabric-application-model.md).

Οντοτήτων εύρυθμης λειτουργίας και ιεραρχία να επιτρέπεται το σύμπλεγμα και οι εφαρμογές να είναι αποτελεσματική αναφερθεί, διορθώνεται και παρακολούθηση. Το μοντέλο εύρυθμης λειτουργίας παρέχει μια ακριβής, *λεπτομερούς* αναπαράσταση της υγείας των κυλιόμενο πολλά τμήματα του συμπλέγματος.

![Εύρυθμη λειτουργία οντοτήτων.][1]
Το οντοτήτων εύρυθμης λειτουργίας, οργανωμένες σε μια ιεραρχία που βασίζονται σε σχέσεις γονικού-θυγατρικού στοιχείου.

[1]: ./media/service-fabric-health-introduction/servicefabric-health-hierarchy.png

Το οντοτήτων εύρυθμης λειτουργίας είναι οι εξής:

- **Σύμπλεγμα**. Αντιπροσωπεύει την εύρυθμη λειτουργία υπηρεσίας ύφασμα συμπλέγματος. Αναφορές εύρυθμης λειτουργίας συμπλέγματος περιγράφουν συνθήκες που επηρεάζουν ολόκληρο το σύμπλεγμα και δεν είναι δυνατό να περιοριστεί μία ή περισσότερες κατεστραμμένες θυγατρικά στοιχεία. Παραδείγματα του εγκεφάλου του συμπλέγματος διαίρεση λόγω ζητημάτων δικτύου διαμερισμάτων ή επικοινωνίας.

- **Κόμβο**. Αντιπροσωπεύει την εύρυθμη λειτουργία της έναν κόμβο ύφασμα υπηρεσίας. Αναφορές εύρυθμης λειτουργίας κόμβου περιγράφουν συνθήκες που επηρεάσει τη λειτουργικότητα κόμβο. Συνήθως επηρεάζουν όλα τα ανεπτυγμένος οντοτήτων που εκτελούνται σε αυτόν. Παραδείγματα όταν έναν κόμβο είναι εκτός των χώρο δίσκο (ή μια άλλη ιδιότητα ολόκληρο τον υπολογιστή, όπως μνήμη, συνδέσεις) και όταν ένας κόμβος είναι προς τα κάτω. Η οντότητα κόμβο προσδιορίζεται από το όνομα του κόμβου (συμβολοσειρά).

- **Εφαρμογή**. Αντιπροσωπεύει την κατάσταση της παρουσίας εφαρμογής εκτελείται στο σύμπλεγμα. Αναφορές εύρυθμης λειτουργίας εφαρμογής περιγράφουν συνθήκες που επηρεάζουν την συνολική εύρυθμη λειτουργία της εφαρμογής. Αυτές δεν είναι δυνατό να περιοριστεί μεμονωμένα θυγατρικά στοιχεία (υπηρεσίες ή ανάπτυξη εφαρμογών). Παραδείγματα περιλαμβάνουν την αλληλεπίδραση για ολοκληρωμένες μεταξύ των διαφόρων υπηρεσιών στην εφαρμογή. Η εφαρμογή οντότητα προσδιορίζεται από το όνομα της εφαρμογής (URI).

- **Υπηρεσία**. Αντιπροσωπεύει την εύρυθμη λειτουργία της υπηρεσίας εκτελείται στο σύμπλεγμα. Αναφορές εύρυθμης λειτουργίας υπηρεσίας περιγράφουν συνθήκες που επηρεάζουν την συνολική εύρυθμη λειτουργία της υπηρεσίας και αυτές δεν είναι δυνατό να περιοριστεί ένα διαμερίσματα ή μια ρεπλίκα. Παραδείγματα είναι μια ρύθμιση παραμέτρων της υπηρεσίας (όπως θύρα ή κοινή χρήση εξωτερικού αρχείου) που προκαλεί προβλήματα για όλα τα διαμερίσματα. Η υπηρεσία οντότητα προσδιορίζεται από το όνομα της υπηρεσίας (URI).

- **Διαμερίσματα**. Αντιπροσωπεύει την εύρυθμη λειτουργία της ένα διαμερίσματα υπηρεσίας. Αναφορές εύρυθμης λειτουργίας partition περιγράφουν συνθήκες που επηρεάζουν το σύνολο ολόκληρο αντιγράφου. Παραδείγματα όταν ο αριθμός των αντίγραφα είναι κάτω από το πλήθος προορισμού και όταν είναι ένα διαμερίσματα απώλεια απαρτίας. Η οντότητα partition προσδιορίζεται από τα διαμερίσματα Αναγνωριστικό (GUID).

- **Ρεπλίκα**. Αντιπροσωπεύει την εύρυθμη λειτουργία της κατάστασης υπηρεσίας ρεπλίκα ή μια παρουσία χωρίς κατάσταση υπηρεσίας. Η μικρότερη μονάδα που watchdogs και τα στοιχεία του συστήματος να αναφέρετε στην για μια εφαρμογή. Για τις υπηρεσίες με κατάσταση, παραδείγματα είναι μια κύρια ρεπλίκα αναφοράς όταν αυτό δεν είναι δυνατό να αναπαραγάγετε λειτουργίες για secondaries και όταν η αναπαραγωγή δεν είναι προχωρήσετε κατά την αναμενόμενη ρυθμό. Επίσης, μια παρουσία χωρίς κατάσταση μπορούν να αναφέρουν όταν δεν επαρκεί πόρους ή έχει προβλήματα συνδεσιμότητας. Η οντότητα ρεπλίκα προσδιορίζεται από τα διαμερίσματα Αναγνωριστικό (GUID) και το Αναγνωριστικό ρεπλίκα ή παρουσία (πλήρης).

- **DeployedApplication**. Αντιπροσωπεύει την εύρυθμη λειτουργία των μια *εφαρμογή εκτελείται σε έναν κόμβο*. Αναφορές εύρυθμης λειτουργίας εφαρμογής περιγράφουν συνθήκες που αφορούν την εφαρμογή στον κόμβο στον οποίο δεν είναι δυνατό να περιοριστεί πακέτα υπηρεσιών αναπτυχθεί στον ίδιο κόμβο. Παραδείγματα όταν δεν είναι δυνατή η λήψη του πακέτου εφαρμογών σε αυτόν τον κόμβο και όταν υπάρχει ένα ζήτημα ρύθμιση αρχές ασφαλείας εφαρμογής στον κόμβο. Ανάπτυξη εφαρμογής προσδιορίζεται από το όνομα της εφαρμογής (URI) και όνομα κόμβου (συμβολοσειρά).

- **DeployedServicePackage**. Αντιπροσωπεύει την εύρυθμη λειτουργία υπηρεσίας συσκευασίας λειτουργεί σε έναν κόμβο του συμπλέγματος. Περιγράφει ειδικά για ένα πακέτο υπηρεσίας συνθήκες που δεν επηρεάζουν τα πακέτα υπηρεσιών στον ίδιο κόμβο για την ίδια εφαρμογή. Παραδείγματα ένα πακέτο κώδικα στο το πακέτο υπηρεσιών που δεν μπορεί να ξεκινήσει και ένα πακέτο ρύθμισης παραμέτρων που δεν είναι δυνατή η ανάγνωση. Το πακέτο ανεπτυγμένος υπηρεσίας προσδιορίζεται από το όνομα της εφαρμογής (URI), το όνομα κόμβου (συμβολοσειρά) και όνομα δήλωσης υπηρεσίας (συμβολοσειρά).

Το επίπεδο λεπτομερειών του μοντέλου εύρυθμης λειτουργίας διευκολύνει την εντοπισμός και διόρθωση ζητημάτων. Για παράδειγμα, εάν μια υπηρεσία δεν αποκρίνεται, είναι εφικτό να αναφέρει ότι είναι κατεστραμμένη την παρουσία της εφαρμογής. Δημιουργία αναφοράς στο ότι επίπεδο δεν είναι ιδανική, ωστόσο, επειδή το ζήτημα δεν μπορεί να επηρεάζει όλες τις υπηρεσίες μέσα σε αυτήν την εφαρμογή. Η αναφορά πρέπει να εφαρμόζεται κατεστραμμένες υπηρεσία ή για μια συγκεκριμένη θυγατρικό διαμερίσματα, εάν σημείων περισσότερες πληροφορίες σε αυτήν διαμερίσματα. Τα δεδομένα αυτόματα επιφανειών μέσω της ιεραρχίας και μια κατεστραμμένη partition γίνεται ορατό σε επίπεδα υπηρεσία και εφαρμογής. Αυτό συνάθροισης σάς βοηθά να εντοπίσετε και να επιλύσετε τη ρίζα του ζητήματος πιο γρήγορα.

Ιεραρχία εύρυθμης λειτουργίας είναι αποτελούνται από σχέσεις γονικού-θυγατρικού στοιχείου. Ένα σύμπλεγμα αποτελείται από τους κόμβους και εφαρμογές. Εφαρμογές έχουν υπηρεσιών και αναπτύξει εφαρμογές. Ανάπτυξη εφαρμογών έχουν αναπτυχθεί πακέτα υπηρεσιών. Υπηρεσίες έχουν τα διαμερίσματα και κάθε διαμερίσματα έχει ένα ή περισσότερα αντίγραφα. Υπάρχει μια ειδική σχέση μεταξύ τους κόμβους και ανεπτυγμένος οντοτήτων. Εάν ένας κόμβος είναι κατεστραμμένη όπως αναφέρονται από το στοιχείο του συστήματος αρχή έκδοσης πιστοποιητικών (υπηρεσία Διαχείριση ανακατεύθυνσης), επηρεάζει την ανάπτυξη εφαρμογών υπηρεσίας πακέτων και αντίγραφα αναπτυχθεί σε αυτό.

Ιεραρχία εύρυθμης λειτουργίας αντιπροσωπεύει την πιο πρόσφατη κατάσταση του συστήματος με βάση τις πιο πρόσφατες αναφορές εύρυθμης λειτουργίας, που είναι πληροφορίες σχεδόν σε πραγματικό χρόνο.
Εσωτερικές και εξωτερικές watchdogs μπορεί να έκθεση σχετικά με την ίδια οντοτήτων που βασίζονται σε συγκεκριμένη εφαρμογή λογικής ή προσαρμοσμένο εποπτευόμενη συνθήκες. Αναφορές χρήστη συνυπάρχουν με τις αναφορές του συστήματος.

Σκοπεύετε να αφιερώσει στο πώς μπορείτε να αναφέρετε και να απαντούν σε εύρυθμης λειτουργίας κατά το σχεδιασμό της μια υπηρεσία cloud μεγάλο, για να διευκολύνετε την υπηρεσία για τον εντοπισμό σφαλμάτων, παρακολούθηση και λειτουργία.

## <a name="health-states"></a>Κράτη μέλη εύρυθμης λειτουργίας
Υπηρεσία ύφασμα χρησιμοποιεί τρεις καταστάσεις εύρυθμης λειτουργίας για να περιγράψετε εάν μια οντότητα είναι σε καλή κατάσταση ή όχι: OK, προειδοποιήσεις και σφάλματα. Οποιαδήποτε αναφορά εστάλη στο χώρο αποθήκευσης εύρυθμης λειτουργίας πρέπει να καθορίσετε μία από αυτές τις καταστάσεις. Το αποτέλεσμα της αξιολόγησης εύρυθμης λειτουργίας είναι μία από αυτές τις καταστάσεις.

Οι πιθανές [καταστάσεις εύρυθμης λειτουργίας](https://msdn.microsoft.com/library/azure/system.fabric.health.healthstate) είναι:

- **OK**. Η οντότητα είναι σε καλή κατάσταση. Υπάρχουν γνωστά θέματα αναφέρεται σε ή στα θυγατρικά στοιχεία (όταν υπάρχει).

- **Προειδοποίηση**. Η οντότητα αντιμετωπίζει ορισμένα ζητήματα, αλλά δεν είναι ακόμη κατεστραμμένες (για παράδειγμα, υπάρχουν καθυστερήσεις, αλλά δεν προκαλούν προβλήματα λειτουργική ακόμη). Σε ορισμένες περιπτώσεις, η συνθήκη προειδοποίηση μπορεί να διορθώσετε το πρόβλημα ίδια χωρίς την παρέμβαση ειδική και είναι χρήσιμο να παρέχουν ορατότητα σε τι συμβαίνει. Σε άλλες περιπτώσεις, η συνθήκη προειδοποίηση ενδέχεται να υποβαθμιστεί σε άσχημες πρόβλημα χωρίς την παρέμβαση του χρήστη.

- **Σφάλμα**. Η οντότητα είναι κατεστραμμένη. Θα πρέπει να γίνει ενέργεια για να διορθώσετε την κατάσταση της οντότητας, επειδή δεν μπορεί να λειτουργήσει σωστά.

- **Άγνωστη**. Η οντότητα δεν υπάρχει στο χώρο αποθήκευσης εύρυθμης λειτουργίας. Αυτό το αποτέλεσμα μπορεί να ληφθεί από την κατανεμημένη ερωτήματα που συγχώνευση αποτελέσματα από πολλά στοιχεία. Για παράδειγμα, λάβετε κόμβο λίστα ερωτήματος Μετάβαση στη **FailoverManager** και **HealthManager**, λήψη εφαρμογής λίστα ερωτήματος μεταβαίνει στη **ClusterManager** και **HealthManager**. Αυτά τα ερωτήματα συγχώνευση αποτελέσματα από πολλά στοιχεία του συστήματος. Εάν ένα άλλο στοιχείο του συστήματος επιστρέφει μια οντότητα που δεν έχει φτάσει ή έχει έχει διαγραφεί από το χώρο αποθήκευσης εύρυθμης λειτουργίας, το αποτέλεσμα της συγχώνευσης έχει άγνωστη κατάσταση εύρυθμης λειτουργίας.

## <a name="health-policies"></a>Πολιτικές εύρυθμης λειτουργίας
Ο χώρος αποθήκευσης εύρυθμης λειτουργίας ισχύει πολιτικές εύρυθμης λειτουργίας για να προσδιορίσετε εάν μια οντότητα είναι σε καλή κατάσταση με βάση τις αναφορές και στα θυγατρικά στοιχεία.

> [AZURE.NOTE] Πολιτικές εύρυθμης λειτουργίας μπορεί να καθοριστεί σε τη δήλωση σύμπλεγμα (για το σύμπλεγμα και κόμβο αξιολόγησης εύρυθμης λειτουργίας) ή τη δήλωση εφαρμογής (για εφαρμογή αξιολόγησης και οποιοδήποτε από τα θυγατρικά στοιχεία). Αιτήσεις αξιολόγησης εύρυθμης λειτουργίας μπορεί να περάσει επίσης στις πολιτικές αξιολόγησης προσαρμοσμένο εύρυθμης λειτουργίας, που χρησιμοποιείται μόνο για το συγκεκριμένο αξιολόγησης.

Από προεπιλογή, υπηρεσία ύφασμα ισχύει αυστηροί κανόνες (όλα όσα πρέπει να είναι σε καλή κατάσταση) για τη σχέση γονικού-θυγατρικού ιεραρχικά. Εάν ακόμα και ένα από τα θυγατρικά στοιχεία έχει μια κατεστραμμένη συμβάντος, το γονικό στοιχείο θεωρείται κατεστραμμένες.

### <a name="cluster-health-policy"></a>Πολιτική εύρυθμης λειτουργίας συμπλέγματος
Η [πολιτική εύρυθμης λειτουργίας συμπλέγματος](https://msdn.microsoft.com/library/azure/system.fabric.health.clusterhealthpolicy.aspx) χρησιμοποιείται για την αξιολόγηση της κατάστασης εύρυθμης λειτουργίας σύμπλεγμα και των μελών εύρυθμης λειτουργίας κόμβο. Η πολιτική μπορεί να οριστεί στο δηλωτικό σύμπλεγμα. Εάν δεν υπάρχει, χρησιμοποιείται η προεπιλεγμένη πολιτική (μηδενικών ανεκτή αποτυχίες).
Η πολιτική εύρυθμης λειτουργίας συμπλέγματος περιέχει:

- [ConsiderWarningAsError](https://msdn.microsoft.com/library/azure/system.fabric.health.clusterhealthpolicy.considerwarningaserror.aspx). Καθορίζει εάν να χειριστείτε εύρυθμης λειτουργίας προειδοποίηση αναφορών ως σφάλματα κατά την αξιολόγηση της υγείας. Προεπιλεγμένη: false.

- [MaxPercentUnhealthyApplications](https://msdn.microsoft.com/library/azure/system.fabric.health.clusterhealthpolicy.maxpercentunhealthyapplications.aspx). Καθορίζει το μέγιστο ποσοστό ανεκτό από τις εφαρμογές που μπορεί να είναι κατεστραμμένη πριν το σύμπλεγμα θεωρείται κατά λάθος.

- [MaxPercentUnhealthyNodes](https://msdn.microsoft.com/library/azure/system.fabric.health.clusterhealthpolicy.maxpercentunhealthynodes.aspx). Καθορίζει το μέγιστο ποσοστό ανεκτή κόμβους που μπορεί να είναι κατεστραμμένη πριν το σύμπλεγμα θεωρείται κατά λάθος. Στο μεγάλο συμπλεγμάτων, ορισμένοι κόμβοι είναι πάντα προς τα κάτω ή προς τα έξω για επισκευές, ώστε το ποσοστό αυτό θα πρέπει να είναι διαμορφωμένη για να αποδεχτεί τις που.

- [ApplicationTypeHealthPolicyMap](https://msdn.microsoft.com/library/azure/system.fabric.health.clusterhealthpolicy.applicationtypehealthpolicymap.aspx). Ο χάρτης πολιτική εφαρμογής τύπος εύρυθμης λειτουργίας μπορεί να χρησιμοποιηθεί κατά την αξιολόγηση της υγείας συμπλέγματος για να περιγράψετε τύπους ειδική εφαρμογών. Από προεπιλογή, και όλες τις εφαρμογές έχουν τεθεί σε ένα χώρο συγκέντρωσης που υπολογίζεται με MaxPercentUnhealthyApplications. Εάν ορισμένοι τύποι εφαρμογή θα πρέπει να αντιμετωπίζονται διαφορετικά, μπορούν να ληφθούν από το καθολικό χώρο συγκέντρωσης. Αντί για αυτό, αξιολογούνται σε σχέση με τα ποσοστά που σχετίζεται με το όνομα του τύπου εφαρμογής στο χάρτη. Για παράδειγμα, σε ένα σύμπλεγμα υπάρχουν χιλιάδες εφαρμογές από διαφορετικούς τύπους και μερικά παρουσιών της εφαρμογής ελέγχου ενός τύπου ειδική εφαρμογή. Οι εφαρμογές ελέγχου πρέπει ποτέ να είναι κατά λάθος. Μπορείτε να καθορίσετε καθολικού MaxPercentUnhealthyApplications 20% ανοχή ορισμένες αποτυχίες, αλλά ο τύπος της εφαρμογής "ControlApplicationType" ορίστε την MaxPercentUnhealthyApplications σε 0. Με αυτόν τον τρόπο, εάν ορισμένες από τις πολλές εφαρμογές είναι κατεστραμμένη, αλλά κάτω από το καθολικό κατεστραμμένες ποσοστό, το σύμπλεγμα θα να αξιολογηθεί σε προειδοποίηση. Μια προειδοποίηση εύρυθμης λειτουργίας δεν επηρεάζει σύμπλεγμα αναβάθμιση ή άλλες παρακολούθησης που ενεργοποιείται κάνοντας κατάσταση εύρυθμης λειτουργίας σφαλμάτων. Αλλά θα το έκανε σύμπλεγμα κατεστραμμένες, που ενεργοποιεί επαναφορά ή διακόπτει προσωρινά την αναβάθμιση σύμπλεγμα, ανάλογα με τη ρύθμιση παραμέτρων αναβάθμισης εφαρμογής ακόμη ένα στοιχείο ελέγχου κατά λάθος.
Για τους τύπους εφαρμογών που ορίζονται στο χάρτη, όλες τις εμφανίσεις της εφαρμογής λαμβάνονται από το καθολικό χώρο συγκέντρωσης εφαρμογών. Αξιολογούνται με βάση τον συνολικό αριθμό των αιτήσεων ο τύπος της εφαρμογής, χρησιμοποιώντας τη συγκεκριμένη MaxPercentUnhealthyApplications από την αντιστοίχιση. Όλα τα υπόλοιπα των εφαρμογών του παραμένουν στο χώρο συγκέντρωσης καθολικού και αξιολογούνται με MaxPercentUnhealthyApplications.

Το παράδειγμα που ακολουθεί είναι ένα απόσπασμα από ένα σύμπλεγμα δηλωτικό. Για να καθορίσετε καταχωρήσεις στο χάρτη τύπο εφαρμογής, πρόθεμα το όνομα της παραμέτρου με το "ApplicationTypeMaxPercentUnhealthyApplications-", ακολουθούμενο από το όνομα του τύπου εφαρμογής.

```xml
<FabricSettings>
  <Section Name="HealthManager/ClusterHealthPolicy">
    <Parameter Name="ConsiderWarningAsError" Value="False" />
    <Parameter Name="MaxPercentUnhealthyApplications" Value="20" />
    <Parameter Name="MaxPercentUnhealthyNodes" Value="20" />
    <Parameter Name="ApplicationTypeMaxPercentUnhealthyApplications-ControlApplicationType" Value="0" />
  </Section>
</FabricSettings>
```

### <a name="application-health-policy"></a>Εφαρμογή πολιτικής εύρυθμης λειτουργίας
Η [πολιτική εύρυθμης λειτουργίας εφαρμογής](https://msdn.microsoft.com/library/azure/system.fabric.health.applicationhealthpolicy.aspx) περιγράφει πώς έχει γίνει την αξιολόγηση των συμβάντων και συνάθροισης θυγατρικών μέλη για τις εφαρμογές και τα θυγατρικά στοιχεία. Αυτό μπορεί να οριστεί στην εφαρμογή δηλωτικό, **ApplicationManifest.xml**, στο πακέτο εφαρμογών. Εάν έχουν καθοριστεί χωρίς πολιτικές, υπηρεσία ύφασμα προϋποθέτει ότι η οντότητα είναι κατεστραμμένη εάν έχει μια αναφορά εύρυθμης λειτουργίας ή θυγατρικό στο την κατάσταση εύρυθμης λειτουργίας προειδοποίηση ή σφάλμα.
Οι πολιτικές με δυνατότητα ρύθμισης παραμέτρων είναι:

- [ConsiderWarningAsError](https://msdn.microsoft.com/library/azure/system.fabric.health.applicationhealthpolicy.considerwarningaserror.aspx). Καθορίζει εάν να χειριστείτε εύρυθμης λειτουργίας προειδοποίηση αναφορών ως σφάλματα κατά την αξιολόγηση της υγείας. Προεπιλεγμένη: false.

- [MaxPercentUnhealthyDeployedApplications](https://msdn.microsoft.com/library/azure/system.fabric.health.applicationhealthpolicy.maxpercentunhealthydeployedapplications.aspx). Καθορίζει το μέγιστο ποσοστό ανεκτή ανάπτυξη εφαρμογών που μπορεί να είναι κατεστραμμένη πριν από την εφαρμογή θεωρείται κατά λάθος. Αυτό το ποσοστό υπολογίζεται διαιρώντας τον αριθμό των κατεστραμμένες ανάπτυξη εφαρμογών επάνω από τον αριθμό των κόμβους που τις εφαρμογές έχουν αναπτυχθεί στο σύμπλεγμα αυτήν τη στιγμή. Ο υπολογισμός Στρογγυλοποιεί προς τα επάνω ανοχή μία αποτυχία σε μικρούς αριθμούς κόμβους. Προεπιλεγμένη ποσοστό: μηδέν.

- [DefaultServiceTypeHealthPolicy](https://msdn.microsoft.com/library/azure/system.fabric.health.applicationhealthpolicy.defaultservicetypehealthpolicy.aspx). Καθορίζει την προεπιλεγμένη υπηρεσία τύπου εύρυθμης λειτουργίας πολιτική, η οποία αντικαθιστά την προεπιλεγμένη πολιτική εύρυθμης λειτουργίας για όλους τους τύπους υπηρεσίας στην εφαρμογή.

- [ServiceTypeHealthPolicyMap](https://msdn.microsoft.com/library/azure/system.fabric.health.applicationhealthpolicy.servicetypehealthpolicymap.aspx). Παρέχει ένα χάρτη των πολιτικών εύρυθμης λειτουργίας υπηρεσίας ανά τύπο υπηρεσίας. Οι πολιτικές αυτές αντικαταστήστε τις πολιτικές εύρυθμης λειτουργίας προεπιλεγμένη υπηρεσία τύπου για κάθε τύπο συγκεκριμένης υπηρεσίας. Για παράδειγμα, εάν μια εφαρμογή έχει έναν τύπο υπηρεσίας χωρίς κατάσταση πύλης και έναν τύπο υπηρεσίας κατάστασης μηχανισμός, μπορείτε να ρυθμίσετε τις πολιτικές εύρυθμης λειτουργίας για την αξιολόγησή τους διαφορετικά. Όταν καθορίζετε πολιτικής ανά τύπο υπηρεσίας, μπορείτε να αποκτήσετε πιο λεπτομερές έλεγχο της εύρυθμης λειτουργίας της υπηρεσίας.

### <a name="service-type-health-policy"></a>Πολιτική εύρυθμης λειτουργίας υπηρεσίας τύπου
Η [πολιτική εύρυθμης λειτουργίας υπηρεσίας τύπου](https://msdn.microsoft.com/library/azure/system.fabric.health.servicetypehealthpolicy.aspx) καθορίζει τον τρόπο για να αξιολογήσετε και να συγκεντρώσετε τις υπηρεσίες και τα θυγατρικά στοιχεία των υπηρεσιών. Η πολιτική περιέχει:

- [MaxPercentUnhealthyPartitionsPerService](https://msdn.microsoft.com/library/azure/system.fabric.health.servicetypehealthpolicy.maxpercentunhealthypartitionsperservice.aspx). Καθορίζει το μέγιστο ποσοστό ανεκτή κατεστραμμένες διαμερίσματα πριν από μια υπηρεσία θεωρείται κατεστραμμένες. Προεπιλεγμένη ποσοστό: μηδέν.

- [MaxPercentUnhealthyReplicasPerPartition](https://msdn.microsoft.com/library/azure/system.fabric.health.servicetypehealthpolicy.maxpercentunhealthyreplicasperpartition.aspx). Καθορίζει το μέγιστο ποσοστό ανεκτή κατεστραμμένες αντίγραφα πριν από ένα διαμερίσματα θεωρείται κατεστραμμένες. Προεπιλεγμένη ποσοστό: μηδέν.

- [MaxPercentUnhealthyServices](https://msdn.microsoft.com/library/azure/system.fabric.health.servicetypehealthpolicy.maxpercentunhealthyservices.aspx). Καθορίζει το μέγιστο ποσοστό ανεκτή κατεστραμμένες υπηρεσιών πριν από την εφαρμογή θεωρείται κατεστραμμένες. Προεπιλεγμένη ποσοστό: μηδέν.

Το παράδειγμα που ακολουθεί είναι ένα απόσπασμα από δήλωση εφαρμογής:

```xml
    <Policies>
        <HealthPolicy ConsiderWarningAsError="true" MaxPercentUnhealthyDeployedApplications="20">
            <DefaultServiceTypeHealthPolicy
                   MaxPercentUnhealthyServices="0"
                   MaxPercentUnhealthyPartitionsPerService="10"
                   MaxPercentUnhealthyReplicasPerPartition="0"/>
            <ServiceTypeHealthPolicy ServiceTypeName="FrontEndServiceType"
                   MaxPercentUnhealthyServices="0"
                   MaxPercentUnhealthyPartitionsPerService="20"
                   MaxPercentUnhealthyReplicasPerPartition="0"/>
            <ServiceTypeHealthPolicy ServiceTypeName="BackEndServiceType"
                   MaxPercentUnhealthyServices="20"
                   MaxPercentUnhealthyPartitionsPerService="0"
                   MaxPercentUnhealthyReplicasPerPartition="0">
            </ServiceTypeHealthPolicy>
        </HealthPolicy>
    </Policies>
```

## <a name="health-evaluation"></a>Αξιολόγηση εύρυθμης λειτουργίας
Χρήστες και αυτοματοποιημένη υπηρεσίες να αξιολογήσετε εύρυθμης λειτουργίας για οποιαδήποτε οντότητα οποιαδήποτε στιγμή. Για να υπολογιστεί μια οντότητα εύρυθμης λειτουργίας, τις συγκεντρώσεις store εύρυθμης λειτουργίας όλα εύρυθμης λειτουργίας αναφορών στην οντότητα και αξιολογεί όλα τα θυγατρικά στοιχεία (όταν υπάρχει). Ο αλγόριθμος συνάθροιση εύρυθμης λειτουργίας χρησιμοποιεί πολιτικές εύρυθμης λειτουργίας που καθορίζουν πώς να αξιολογήσετε αναφορών εύρυθμης λειτουργίας και πώς να συγκεντρώσετε Πολιτείες εύρυθμη λειτουργία των θυγατρικών (όταν υπάρχει).

### <a name="health-report-aggregation"></a>Συνάθροιση αναφορών εύρυθμης λειτουργίας
Μία οντότητα μπορεί να έχει πολλές αναφορές εύρυθμης λειτουργίας αποσταλεί από διαφορετική ανταποκριτών (στοιχεία του συστήματος ή watchdogs) σε διαφορετικές ιδιότητες. Της συνάθροισης χρησιμοποιεί τις πολιτικές συσχετισμένη εύρυθμης λειτουργίας, ιδίως το μέλος ConsiderWarningAsError της εφαρμογής ή σύμπλεγμα πολιτική εύρυθμης λειτουργίας. ConsiderWarningAsError καθορίζει τον τρόπο για να αξιολογήσετε τις προειδοποιήσεις.

Την κατάσταση εύρυθμης λειτουργίας συγκεντρωτική ενεργοποιείται από τις *χειρότερες* αναφορές εύρυθμης λειτουργίας στην οντότητα. Εάν υπάρχει αναφορά εύρυθμης λειτουργίας τουλάχιστον ένα σφάλμα, την κατάσταση εύρυθμης λειτουργίας συγκεντρωτική είναι ένα σφάλμα.

![Συνάθροιση αναφορών εύρυθμης λειτουργίας με αναφορά σφάλματος.][2]

Μια οντότητα εύρυθμης λειτουργίας που έχει μία ή περισσότερες αναφορές εύρυθμης λειτουργίας σφαλμάτων αξιολογείται ως σφάλμα. Το ίδιο ισχύει για μια αναφορά εύρυθμης λειτουργίας που έχει λήξει, ανεξάρτητα από την κατάσταση εύρυθμης λειτουργίας.

[2]: ./media/service-fabric-health-introduction/servicefabric-health-report-eval-error.png

Εάν υπάρχουν αναφορές σφάλματος και μία ή περισσότερες προειδοποιήσεις, την κατάσταση εύρυθμης λειτουργίας συγκεντρωτική είναι προειδοποίηση ή σφάλμα, ανάλογα με τη σημαία ConsiderWarningAsError πολιτικής.

![Συνάθροιση αναφορά εύρυθμης λειτουργίας με προειδοποίηση έκθεση και ConsiderWarningAsError false.][3]

Συνάθροιση αναφορά εύρυθμης λειτουργίας με προειδοποίηση έκθεση και ConsiderWarningAsError την τιμή false (προεπιλογή).

[3]: ./media/service-fabric-health-introduction/servicefabric-health-report-eval-warning.png

### <a name="child-health-aggregation"></a>Συνάθροισης θυγατρικών εύρυθμης λειτουργίας
Την κατάσταση εύρυθμης λειτουργίας συγκεντρωτική μια οντότητα απεικονίζει τα μέλη εύρυθμη λειτουργία των θυγατρικών (όταν υπάρχει). Ο αλγόριθμος για συνάθροιση Πολιτείες εύρυθμη λειτουργία των θυγατρικών χρησιμοποιεί το ισχύει εύρυθμης λειτουργίας πολιτικές με βάση τον τύπο οντότητα.

![Συνάθροιση εύρυθμη λειτουργία των θυγατρικών οντοτήτων.][4]

Συνάθροισης θυγατρικών που βασίζονται σε πολιτικές εύρυθμης λειτουργίας.

[4]: ./media/service-fabric-health-introduction/servicefabric-health-hierarchy-eval.png

Αφού το χώρο αποθήκευσης εύρυθμης λειτουργίας περιλαμβάνει αξιολόγηση όλους τους θυγατρικούς κόμβους, συγκεντρώνει κατάστασή τους εύρυθμης λειτουργίας με βάση το μέγιστο ποσοστό ρυθμισμένες κατεστραμμένη θυγατρικά στοιχεία. Αυτό το ποσοστό λαμβάνεται από την πολιτική με βάση τον τύπο οντότητα και τα θυγατρικά.

- Εάν όλα τα θυγατρικά στοιχεία έχουν OK καταστάσεις, την κατάσταση εύρυθμης λειτουργίας θυγατρικό συναθροιστεί είναι OK.

- Εάν τα παιδιά έχετε OK και μέλη προειδοποίηση, προειδοποίηση την κατάσταση εύρυθμης λειτουργίας θυγατρικό συναθροιστεί.

- Εάν υπάρχουν θυγατρικά στοιχεία με σφάλματος δηλώνει ότι δεν τηρεί τον μέγιστο επιτρεπόμενο ποσοστό κατεστραμμένες παιδιών, την κατάσταση εύρυθμης λειτουργίας συγκεντρωτική είναι ένα σφάλμα.

- Εάν τα θυγατρικά στοιχεία με μέλη σφάλματος ακολουθούν το επιτρεπόμενο μέγιστο ποσοστό κατεστραμμένες θυγατρικά στοιχεία, την κατάσταση εύρυθμης λειτουργίας συγκεντρωτική προειδοποίηση.

## <a name="health-reporting"></a>Δημιουργία αναφορών εύρυθμης λειτουργίας
Στοιχεία του συστήματος, εφαρμογές ύφασμα συστήματος και watchdogs εσωτερικού/εξωτερικού μπορούν να αναφέρουν σε σχέση με την υπηρεσία ύφασμα οντοτήτων. Οι ανταποκριτές βεβαιωθείτε *τοπικό* προσδιορισμούς της υγείας των εποπτευόμενη οντοτήτων, με βάση τις συνθήκες που τους παρακολούθησης. Δεν χρειάζεται να κοιτάξετε οποιαδήποτε καθολική κατάσταση ή συγκέντρωση δεδομένων. Η επιθυμητή συμπεριφορά είναι να έχετε ανταποκριτών απλό και δεν σύνθετες οργανισμών που πρέπει να κοιτάξετε πολλά πράγματα που πρέπει να υπολογίσει τις πληροφορίες για την αποστολή.

Για να στείλετε την εύρυθμη λειτουργία των δεδομένων στο χώρο αποθήκευσης εύρυθμης λειτουργίας, μια αναφορά πρέπει να αναγνώριση η οντότητα που επηρεάζεται και να δημιουργήσετε μια αναφορά εύρυθμης λειτουργίας. Αναφορά μπορείτε να στείλετε μέσω του API με τη χρήση [FabricClient.HealthClient.ReportHealth](https://msdn.microsoft.com/library/azure/system.fabric.fabricclient.healthclient_members.aspx), μέσω του PowerShell ή υπόλοιπο.

### <a name="health-reports"></a>Αναφορές εύρυθμης λειτουργίας
Οι [αναφορές εύρυθμης λειτουργίας](https://msdn.microsoft.com/library/azure/system.fabric.health.healthreport.aspx) για κάθε οντότητας του συμπλέγματος περιλαμβάνει τις ακόλουθες πληροφορίες:

- **Αναγνωριστικού προέλευσης**. Μια συμβολοσειρά που προσδιορίζει με μοναδικό τρόπο η αναφορά του συμβάντος εύρυθμης λειτουργίας.

- **Αναγνωριστικό οντότητας**. Προσδιορίζει το οντότητα όπου έχει εφαρμοστεί η αναφορά. Διαφέρει ανάλογα με την [οντότητα, πληκτρολογήστε](service-fabric-health-introduction.md#health-entities-and-hierarchy):

  - Σύμπλεγμα. Κανένα.

  - Κόμβος. Όνομα κόμβου (συμβολοσειρά).

  - Εφαρμογή. Όνομα εφαρμογής (URI). Αντιπροσωπεύει το όνομα της παρουσίας εφαρμογής αναπτυχθεί στο σύμπλεγμα.

  - Υπηρεσία. Όνομα υπηρεσίας (URI). Αντιπροσωπεύει το όνομα της παρουσίας υπηρεσίας αναπτυχθεί στο σύμπλεγμα.

  - Διαμερίσματα. Αναγνωριστικό (GUID). Αντιπροσωπεύει το μοναδικό αναγνωριστικό διαμερίσματα.

  - Ρεπλίκα. Το Αναγνωριστικό ρεπλίκα της κατάστασης υπηρεσίας ή το Αναγνωριστικό εμφάνισης χωρίς κατάσταση υπηρεσίας (INT64).

  - DeployedApplication. Το όνομα της εφαρμογής (URI) και όνομα κόμβου (συμβολοσειρά).

  - DeployedServicePackage. Το όνομα της εφαρμογής (URI), το όνομα κόμβου (συμβολοσειρά) και υπηρεσία δήλωσης ονόματος (συμβολοσειρά).

- **Ιδιότητα**. Μια *συμβολοσειρά* (όχι μια σταθερή απαρίθμηση) που σας επιτρέπει την αναφορά για να κατηγοριοποιήσετε το συμβάν εύρυθμης λειτουργίας για μια συγκεκριμένη ιδιότητα της οντότητας. Για παράδειγμα, μια αναφορά να αναφέρετε την εύρυθμη λειτουργία της ιδιότητας Node01 "Αποθήκευση" και αναφορά B να αναφέρετε την εύρυθμη λειτουργία της ιδιότητας Node01 "σύνδεση". Στο χώρο αποθήκευσης εύρυθμης λειτουργίας, αυτές τις αναφορές, υπολογίζονται ως ξεχωριστή εύρυθμης λειτουργίας συμβάντων για την οντότητα Node01.

- **Περιγραφή**. Μια συμβολοσειρά που επιτρέπει σε μια αναφορά για να παρέχουν λεπτομερείς πληροφορίες σχετικά με το συμβάν εύρυθμης λειτουργίας. ** **Αναγνωριστικού προέλευσης**, και **HealthState** **πλήρως θα πρέπει να περιγράψετε την αναφορά. Η περιγραφή προσθέτει αναγνώσιμο πληροφορίες σχετικά με την αναφορά. Το κείμενο διευκολύνει τους διαχειριστές και χρήστες για να κατανοήσετε την αναφορά εύρυθμης λειτουργίας.

- **HealthState**. Μια [απαρίθμηση](service-fabric-health-introduction.md#health-states) που περιγράφει την κατάσταση εύρυθμης λειτουργίας της αναφοράς. Οι αποδεκτές τιμές είναι OK, προειδοποίηση και σφαλμάτων.

- **Το TimeToLive**. Ένα χρονικό διάστημα που υποδεικνύει το χρονικό διάστημα την αναφορά εύρυθμης λειτουργίας είναι έγκυρη. Διαθέτοντας **RemoveWhenExpired**, σας επιτρέπει να μάθετε πώς μπορείτε να αξιολογήσετε συμβάντα έχει λήξει το χώρο αποθήκευσης εύρυθμης λειτουργίας. Από προεπιλογή, η τιμή είναι άπειρο και η αναφορά είναι έγκυρη για πάντα.

- **RemoveWhenExpired**. Μια τιμή Boolean. Εάν οριστεί στην τιμή true, η αναφορά έχει λήξει εύρυθμης λειτουργίας καταργούνται αυτόματα από το χώρο αποθήκευσης εύρυθμης λειτουργίας και την αναφορά δεν επηρεάζουν αξιολόγησης εύρυθμης λειτουργίας οντότητα. Χρησιμοποιείται όταν η έκθεση είναι έγκυρες για ένα καθορισμένο χρονικό διάστημα μόνο, και η αναφορά δεν χρειάζεται να ρητά εκκαθαρίσετε. Χρησιμοποιείται επίσης για να διαγράψετε αναφορές από το χώρο αποθήκευσης εύρυθμης λειτουργίας (για παράδειγμα, μια φύλαξης έχει αλλάξει και διακόπτει την αποστολή αναφορών με προηγούμενη προέλευσης και την ιδιότητα). Το να στείλετε μια αναφορά με μια σύντομη το TimeToLive μαζί με RemoveWhenExpired για να καταργήσετε οποιαδήποτε προηγούμενη κατάσταση από το χώρο αποθήκευσης εύρυθμης λειτουργίας προς τα επάνω. Εάν έχει οριστεί η τιμή FALSE (ψευδής), η αναφορά έχει λήξει αντιμετωπίζεται ως σφάλμα την αξιολόγηση της υγείας. Η τιμή false σήματα στο χώρο αποθήκευσης εύρυθμης λειτουργίας ότι το αρχείο προέλευσης πρέπει να αναφέρετε περιοδικά σε αυτήν την ιδιότητα. Εάν όχι, στη συνέχεια, πρέπει να υπάρχει κάποιο πρόβλημα με το φύλαξης. Εύρυθμη λειτουργία του φύλαξης καταγράφεται, εξετάζοντας το συμβάν ως σφάλμα.

- **Αριθμός_ακολουθίας**. Ένα θετικό ακέραιο αριθμό που πρέπει να αυξανόμενη, που αντιπροσωπεύει τη σειρά των αναφορών. Χρησιμοποιείται από το χώρο αποθήκευσης εύρυθμης λειτουργίας για τον εντοπισμό μη ενημερωμένες αναφορές που λαμβάνονται καθυστερημένη λόγω καθυστερήσεων του δικτύου ή άλλα προβλήματα. Μια αναφορά έχει απορριφθεί, εάν ο αριθμός ακολουθίας είναι μικρότερη ή ίση με τα πιο πρόσφατα εφαρμοστεί αριθμό για την ίδια οντότητα προέλευσης και την ιδιότητα. Εάν δεν έχει καθοριστεί, τον αριθμό ακολουθίας δημιουργείται αυτόματα. Είναι απαραίτητο να τοποθετήσετε τον αριθμό ακολουθίας μόνο όταν αναφοράς στην κατάσταση μεταβάσεις. Σε αυτήν την περίπτωση, το αρχείο προέλευσης πρέπει να θυμάστε τις αναφορές που θέλετε να σταλεί και να διατηρήσετε τις πληροφορίες για την ανάκτηση στην ανακατεύθυνσης.

Αυτά τα τέσσερα τμήματα πληροφοριών--αναγνωριστικού προέλευσης, αναγνωριστικό οντότητα, ιδιότητα και HealthState--απαιτούνται για κάθε αναφορά εύρυθμης λειτουργίας. Αναγνωριστικού προέλευσης συμβολοσειρά δεν επιτρέπεται για να ξεκινήσετε με το πρόθεμα "**σύστημα.**", που είναι δεσμευμένο για το σύστημα αναφορών. Για την ίδια οντότητα, υπάρχει μόνο μία αναφορά για την ίδια προέλευση και την ιδιότητα. Πολλές αναφορές για το ίδιο προέλευσης και την ιδιότητα παράκαμψη μεταξύ τους, είτε στην πλευρά προγράμματος-πελάτη εύρυθμης λειτουργίας (εάν ομαδοποιούνται) ή σχετικά με την κατάσταση αποθήκευση πλευρά. Αντικατάσταση βασίζεται σε αριθμούς ακολουθίας. νεότερη αναφορές (με μεγαλύτεροι αριθμοί ακολουθίας) Αντικατάσταση παλαιότερων αναφορών.

### <a name="health-events"></a>Συμβάντα εύρυθμης λειτουργίας
Εσωτερικά, το χώρο αποθήκευσης εύρυθμης λειτουργίας διατηρεί [εύρυθμης λειτουργίας συμβάντων](https://msdn.microsoft.com/library/azure/system.fabric.health.healthevent.aspx), που περιέχει όλες τις πληροφορίες από τις αναφορές και πρόσθετα μετα-δεδομένα. Τα μετα-δεδομένα περιλαμβάνει το χρόνο που δόθηκε την αναφορά στο πρόγραμμα-πελάτη εύρυθμης λειτουργίας και την ώρα της τροποποίησης στην πλευρά του διακομιστή. Τα συμβάντα εύρυθμης λειτουργίας επιστρέφονται με [εύρυθμης λειτουργίας ερωτημάτων](service-fabric-view-entities-aggregated-health.md#health-queries).

Τα μετα-δεδομένα προστέθηκε περιέχει:

- **SourceUtcTimestamp**. Την ώρα της αναφοράς δόθηκε στον υπολογιστή-πελάτη εύρυθμης λειτουργίας (Συντονισμένη παγκόσμια ώρα).

- **LastModifiedUtcTimestamp**. Η ώρα τελευταίας τροποποίησης της αναφοράς στο διακομιστή (Συντονισμένη παγκόσμια ώρα).

- **IsExpired**. Μια σημαία για να υποδείξετε αν η αναφορά έχει λήξει όταν το ερώτημα εκτελέστηκε από το χώρο αποθήκευσης εύρυθμης λειτουργίας. Ένα συμβάν μπορεί να έχει λήξει, μόνο αν RemoveWhenExpired είναι ψευδής. Διαφορετικά, το συμβάν δεν επιστρέφεται από ερώτημα και έχει καταργηθεί από το χώρο αποθήκευσης.

- **LastOkTransitionAt**, **LastWarningTransitionAt**, **LastErrorTransitionAt**. Την τελευταία φορά για μεταβάσεις OK/προειδοποιητικό μήνυμα σφάλματος. Αυτά τα πεδία σας δώσει το ιστορικό της υγείας μεταβάσεις κατάστασης για το συμβάν.

Τα πεδία μετάβασης κατάσταση μπορεί να χρησιμοποιηθεί για ειδοποιήσεις αποδοτικότερα ή πληροφορίες συμβάντων "Ιστορικό" εύρυθμη λειτουργία. Που παρέχουν σενάρια όπως:

- Ειδοποίηση όταν μια ιδιότητα έχει προειδοποίηση/σφάλματος για περισσότερα από X λεπτά. Έλεγχος της κατάστασης για μια χρονική περίοδο αποφεύγεται ειδοποιήσεις σε προσωρινό συνθήκες. Για παράδειγμα, μια ειδοποίηση, εάν έχει προειδοποίηση την κατάσταση εύρυθμης λειτουργίας για περισσότερο από πέντε λεπτά μπορεί να μεταφραστεί σε (HealthState == προειδοποίηση και τώρα - LastWarningTransitionTime > 5 λεπτά).

- Ειδοποίηση μόνο σε συνθήκες που έχουν αλλάξει τις τελευταίες X λεπτά. Εάν μια αναφορά ήταν ήδη στο σφάλμα πριν από το καθορισμένο χρονικό διάστημα, μπορεί να αγνοηθεί επειδή έχει ήδη ειδοποιήσει προηγουμένως.

- Εάν μια ιδιότητα εναλλαγή μεταξύ προειδοποίηση και σφάλματος, προσδιορίστε πόσο χρόνο ότι έχουν περάσει κατεστραμμένες (δηλαδή, not OK). Για παράδειγμα, μια ειδοποίηση, εάν η ιδιότητα δεν βρίσκεται σε καλή κατάσταση για περισσότερο από πέντε λεπτά μπορεί να μεταφραστεί σε (HealthState! = Ok και τώρα - LastOkTransitionTime > 5 λεπτά).

## <a name="example-report-and-evaluate-application-health"></a>Παράδειγμα: Αναφορά και την αξιολόγησή εύρυθμης λειτουργίας της εφαρμογής
Το ακόλουθο παράδειγμα αποστέλλει μια έκθεση εύρυθμης λειτουργίας μέσω του PowerShell για την εφαρμογή **ύφασμα: / WordCount** από την προέλευση **MyWatchdog**. Η αναφορά εύρυθμης λειτουργίας περιέχει πληροφορίες σχετικά με την ιδιότητα εύρυθμης λειτουργίας "Διαθεσιμότητα" σε κατάσταση εύρυθμης λειτουργίας σφάλματος, με το άπειρο TimeToLive. Στη συνέχεια, ερωτήματα την εύρυθμη λειτουργία της εφαρμογής, ποια επιστρέφει συναθροιστεί σφάλματα κατάσταση εύρυθμης λειτουργίας και τα συμβάντα αναφερόμενου εύρυθμης λειτουργίας στη λίστα των συμβάντων εύρυθμης λειτουργίας.

```powershell
PS C:\> Send-ServiceFabricApplicationHealthReport –ApplicationName fabric:/WordCount –SourceId "MyWatchdog" –HealthProperty "Availability" –HealthState Error

PS C:\> Get-ServiceFabricApplicationHealth fabric:/WordCount


ApplicationName                 : fabric:/WordCount
AggregatedHealthState           : Error
UnhealthyEvaluations            :
                                  Error event: SourceId='MyWatchdog', Property='Availability'.

ServiceHealthStates             :
                                  ServiceName           : fabric:/WordCount/WordCountService
                                  AggregatedHealthState : Error

                                  ServiceName           : fabric:/WordCount/WordCountWebService
                                  AggregatedHealthState : Ok

DeployedApplicationHealthStates :
                                  ApplicationName       : fabric:/WordCount
                                  NodeName              : _Node_0
                                  AggregatedHealthState : Ok

                                  ApplicationName       : fabric:/WordCount
                                  NodeName              : _Node_2
                                  AggregatedHealthState : Ok

                                  ApplicationName       : fabric:/WordCount
                                  NodeName              : _Node_3
                                  AggregatedHealthState : Ok

                                  ApplicationName       : fabric:/WordCount
                                  NodeName              : _Node_4
                                  AggregatedHealthState : Ok

                                  ApplicationName       : fabric:/WordCount
                                  NodeName              : _Node_1
                                  AggregatedHealthState : Ok

HealthEvents                    :
                                  SourceId              : System.CM
                                  Property              : State
                                  HealthState           : Ok
                                  SequenceNumber        : 360
                                  SentAt                : 3/22/2016 7:56:53 PM
                                  ReceivedAt            : 3/22/2016 7:56:53 PM
                                  TTL                   : Infinite
                                  Description           : Application has been created.
                                  RemoveWhenExpired     : False
                                  IsExpired             : False
                                  Transitions           : Error->Ok = 3/22/2016 7:56:53 PM, LastWarning = 1/1/0001 12:00:00 AM

                                  SourceId              : MyWatchdog
                                  Property              : Availability
                                  HealthState           : Error
                                  SequenceNumber        : 131032204762818013
                                  SentAt                : 3/23/2016 3:27:56 PM
                                  ReceivedAt            : 3/23/2016 3:27:56 PM
                                  TTL                   : Infinite
                                  Description           :
                                  RemoveWhenExpired     : False
                                  IsExpired             : False
                                  Transitions           : Ok->Error = 3/23/2016 3:27:56 PM, LastWarning = 1/1/0001 12:00:00 AM
```

## <a name="health-model-usage"></a>Χρήση μοντέλου εύρυθμης λειτουργίας
Το μοντέλο εύρυθμης λειτουργίας επιτρέπει τις υπηρεσίες cloud και της υποκείμενης πλατφόρμας ύφασμα υπηρεσίας για να κλιμακωθεί, επειδή η παρακολούθηση και την εύρυθμη λειτουργία προσδιορισμούς κατανέμονται σε διαφορετική οθονών μέσα στο σύμπλεγμα.
Άλλα συστήματα έχουν μόνο, κεντρική υπηρεσίας στο επίπεδο συμπλέγματος που αναλύει όλες τις *πιθανώς* χρήσιμες πληροφορίες που εκπέμπει υπηρεσίες. Αυτή η προσέγγιση εμποδίζει τους κλιμάκωση. Επίσης δεν σας επιτρέπει να συλλέξετε πολύ συγκεκριμένες πληροφορίες που βοηθά στον προσδιορισμό προβλημάτων και πιθανά ζητήματα ως κοντά τη ρίζα όσο το δυνατόν πιο.

Το μοντέλο εύρυθμης λειτουργίας χρησιμοποιείται σε μεγάλο βαθμό για την παρακολούθηση και διάγνωση, για την αξιολόγηση σύμπλεγμα και εφαρμογή εύρυθμης λειτουργίας και για αναβαθμίσεις εποπτευόμενη. Άλλες υπηρεσίες Χρησιμοποιήστε δεδομένων εύρυθμης λειτουργίας για να εκτελέσετε αυτόματη επισκευές, να δημιουργήσετε σύμπλεγμα ιστορικού εύρυθμης λειτουργίας και εκδίδει προειδοποιήσεις σε συγκεκριμένες συνθήκες.

## <a name="next-steps"></a>Επόμενα βήματα
[Προβολή αναφορών εύρυθμης λειτουργίας υπηρεσίας ύφασμα](service-fabric-view-entities-aggregated-health.md)

[Να χρησιμοποιήσετε τις αναφορές εύρυθμης λειτουργίας συστήματος για την αντιμετώπιση προβλημάτων](service-fabric-understand-and-troubleshoot-with-system-health-reports.md)

[Πώς μπορείτε να αναφέρετε και έλεγχος εύρυθμης λειτουργίας υπηρεσίας](service-fabric-diagnostics-how-to-report-and-check-service-health.md)

[Προσθήκη προσαρμοσμένων αναφορών εύρυθμης λειτουργίας υπηρεσίας ύφασμα](service-fabric-report-health.md)

[Παρακολούθηση και διάγνωση υπηρεσίες τοπικά](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md)

[Αναβάθμιση εφαρμογής υπηρεσίας ύφασμα](service-fabric-application-upgrade.md)
