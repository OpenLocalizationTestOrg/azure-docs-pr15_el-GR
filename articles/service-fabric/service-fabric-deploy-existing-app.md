<properties
   pageTitle="Ανάπτυξη ένα υπάρχον εκτελέσιμο αρχείο Azure Service ύφασμα | Microsoft Azure"
   description="Αναλυτικές οδηγίες σχετικά με τον τρόπο για να συσκευάσετε μια υπάρχουσα εφαρμογή ως επισκέπτης εκτελέσιμο, ώστε να μπορεί να αναπτυχθεί σε ένα σύμπλεγμα ύφασμα υπηρεσίας"
   services="service-fabric"
   documentationCenter=".net"
   authors="msfussell"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="na"
   ms.date="10/22/2016"
   ms.author="msfussell;mikhegn"/>

# <a name="deploy-a-guest-executable-to-service-fabric"></a>Ανάπτυξη εκτελέσιμο επισκέπτης ύφασμα υπηρεσίας

Μπορείτε να εκτελέσετε οποιονδήποτε τύπο της εφαρμογής, όπως node.js, Java ή εγγενείς εφαρμογές σε ύφασμα υπηρεσίας Azure. Υπηρεσία ύφασμα αναφέρεται σε αυτούς τους τύπους των εφαρμογών του ως επισκέπτης εκτελέσιμων αρχείων.
Εκτελέσιμα επισκέπτη αντιμετωπίζονται από ύφασμα υπηρεσίας όπως χωρίς κατάσταση υπηρεσίες. Ως αποτέλεσμα, τοποθετούνται σε κόμβους σε ένα σύμπλεγμα, με βάση τη διαθεσιμότητα και άλλες μετρήσεις. Σε αυτό το άρθρο περιγράφει τον τρόπο για να συσκευάσετε και να αναπτύξετε το εκτελέσιμο επισκέπτης σύμπλεγμα ύφασμα υπηρεσίας, χρησιμοποιώντας το Visual Studio ή ένα βοηθητικό πρόγραμμα γραμμής.

Σε αυτό το άρθρο, καλύπτονται τα θέματα τα βήματα για να συσκευάσετε εκτελέσιμο επισκέπτης και αναπτύσσετε σε ύφασμα υπηρεσίας.  

## <a name="benefits-of-running-a-guest-executable-in-service-fabric"></a>Πλεονεκτήματα της εκτέλεσης επισκέπτης εκτελέσιμο σε ύφασμα υπηρεσίας

Υπάρχουν πολλά πλεονεκτήματα που παρέχονται με την εκτέλεση επισκέπτης εκτελέσιμο σε ένα σύμπλεγμα ύφασμα υπηρεσίας:

- Υψηλή διαθεσιμότητα. Εφαρμογές που εκτελούνται σε ύφασμα υπηρεσίας διατίθενται ιδιαίτερα. Υπηρεσία ύφασμα εξασφαλίζει ότι εκτελούνται παρουσίες μιας εφαρμογής.
- Παρακολούθηση εύρυθμης λειτουργίας. Παρακολούθηση εύρυθμης λειτουργίας υπηρεσίας ύφασμα εντοπίζει εάν μια εφαρμογή εκτελείται και παρέχει πληροφορίες διαγνωστικών, εάν υπάρχει ένα σφάλμα.   
- Διαχείριση κύκλου ζωής της εφαρμογής. Εκτός από την παροχή αναβαθμίσεις δεν υπάρχει χρόνος εκτός λειτουργίας, ύφασμα υπηρεσία παρέχει αυτόματη επαναφορά στην προηγούμενη έκδοση, εάν υπάρχει ένα συμβάν εσφαλμένες εύρυθμης λειτουργίας που αναφέρθηκε κατά την αναβάθμιση.    
- Πυκνότητα. Μπορείτε να εκτελέσετε πολλές εφαρμογές σε ένα σύμπλεγμα, που περιορίζει την ανάγκη για κάθε εφαρμογή για να εκτελέσετε στο δικό του υλικού.


## <a name="overview-of-application-and-service-manifest-files"></a>Επισκόπηση των εφαρμογών και υπηρεσιών δήλωσης αρχείων

Ως μέρος του για την ανάπτυξη εκτελέσιμο επισκέπτης, είναι χρήσιμο να κατανοήσετε στη συσκευασία ύφασμα υπηρεσίας και μοντέλο ανάπτυξης ως περιγράφεται [μοντέλο εφαρμογών](service-fabric-application-model.md). Το μοντέλο συσκευασία ύφασμα υπηρεσία που βασίζεται σε δύο αρχεία XML: το δηλώσεων εφαρμογών και υπηρεσιών. Ο ορισμός σχήματος για τα αρχεία ApplicationManifest.xml και ServiceManifest.xml εγκαθίσταται με το SDK ύφασμα υπηρεσίας σε *C:\Program Files\Microsoft SDKs\Service Fabric\schemas\ServiceFabricServiceModel.xsd*.

* **Εφαρμογή δήλωσης** Η δήλωση εφαρμογής χρησιμοποιείται για να περιγράψετε την εφαρμογή. Παραθέτει τις υπηρεσίες που σύνταξή του και άλλες παράμετροι που χρησιμοποιούνται για να ορίσετε πώς θα πρέπει να αναπτυχθούν τη μία ή περισσότερες υπηρεσίες, όπως ο αριθμός των παρουσιών.

  Στην υπηρεσία υφάσματος μια εφαρμογή είναι μια μονάδα ανάπτυξης και αναβάθμιση. Μια εφαρμογή μπορεί να αναβαθμιστεί ως ενιαία όπου πραγματοποιείται πιθανές αποτυχίες και ενδεχόμενες επαναφορές. Υπηρεσία ύφασμα εγγυάται ότι η διεργασία αναβάθμισης είτε είναι επιτυχής, ή, εάν αποτύχει η αναβάθμιση, δεν φεύγει από την εφαρμογή άγνωστο/ασταθής.

* **Υπηρεσία δήλωσης** Το δηλωτικό υπηρεσίας περιγράφει τα στοιχεία μιας υπηρεσίας. Περιλαμβάνει δεδομένα, όπως το όνομα και τον τύπο της υπηρεσίας, και κώδικα, ρύθμιση παραμέτρων και δεδομένων. Το δηλωτικό υπηρεσίας περιλαμβάνει επίσης ορισμένες πρόσθετες παράμετροι που μπορούν να χρησιμοποιηθούν για τη ρύθμιση παραμέτρων της υπηρεσίας όταν είναι αναπτυγμένο.


## <a name="application-package-file-structure"></a>Δομή αρχείου πακέτου εφαρμογής
Για να αναπτύξετε μια εφαρμογή σε ύφασμα υπηρεσίας, η εφαρμογή πρέπει να ακολουθήστε μια δομή προκαθορισμένες καταλόγου. Το παρακάτω παράδειγμα αυτήν τη δομή.

```
|-- ApplicationPackageRoot
  	|-- GuestService1Pkg
        |-- Code
            |-- existingapp.exe
        |-- Config
            |-- Settings.xml
        |-- Data
        |-- ServiceManifest.xml
  	|-- ApplicationManifest.xml
```

Το ApplicationPackageRoot περιέχει το αρχείο ApplicationManifest.xml που καθορίζει την εφαρμογή. Χρησιμοποιείται έναν δευτερεύοντα κατάλογο για κάθε υπηρεσία που περιλαμβάνονται στην εφαρμογή, ώστε να περιέχει όλα τα αντικείμενα που απαιτεί την υπηρεσία--το ServiceManifest.xml και συνήθως, οι εξής τρεις κατάλογοι:

- *Κωδικός*. Αυτός ο κατάλογος περιλαμβάνει την υπηρεσία κώδικα.
- *Ρύθμιση παραμέτρων*. Αυτόν τον κατάλογο περιέχει ένα αρχείο Settings.xml (και άλλα αρχεία, εάν είναι απαραίτητο) ότι η υπηρεσία πρόσβαση κατά το χρόνο εκτέλεσης για να ανακτήσετε συγκεκριμένες ρυθμίσεις.
- Τα *δεδομένα*. Αυτή είναι μια επιπλέον καταλόγου για την αποθήκευση επιπλέον τοπικών δεδομένων που μπορεί να χρειαστεί της υπηρεσίας. Σημείωση: Τα δεδομένα πρέπει να χρησιμοποιείται για την αποθήκευση μόνο προσωρινές δεδομένων. Υπηρεσία ύφασμα δεν αντιγραφή/αντιγραφή αλλαγές στον κατάλογο δεδομένων εάν η υπηρεσία πρέπει να έχουν μετακινηθεί--για παράδειγμα, κατά την ανακατεύθυνση.

Σημείωση: Δεν χρειάζεται να δημιουργήσετε το `config` και `data` σε καταλόγους Εάν δεν χρειάζεστε τους.

## <a name="packaging-an-existing-executable"></a>Συσκευασία ένα υπάρχον εκτελέσιμο αρχείο

Όταν συσκευασία ένα εκτελέσιμο αρχείο επισκέπτη, μπορείτε να επιλέξετε είτε να χρησιμοποιήσετε ένα πρότυπο έργου Visual Studio ή να [δημιουργήσετε με μη αυτόματο τρόπο το πακέτο εφαρμογών](#manually). Χρήση του Visual Studio, τη δομή του πακέτου εφαρμογής και δήλωσης αρχεία δημιουργούνται από τον "Οδηγό νέου έργου" για εσάς.

>[AZURE.NOTE] Ο ευκολότερος τρόπος για να συσκευάσετε ένα υπάρχον εκτελέσιμο σε μια υπηρεσία Windows είναι να χρησιμοποιήσετε το Visual Studio.

## <a name="using-visual-studio-to-package-an-existing-executable"></a>Χρήση του Visual Studio για να συσκευάσετε ένα υπάρχον εκτελέσιμο αρχείο

Visual Studio παρέχει ένα πρότυπο υπηρεσίας ύφασμα υπηρεσίας για να σας βοηθήσει να αναπτύξετε εκτελέσιμο επισκέπτης σύμπλεγμα ύφασμα υπηρεσίας.

Ακολουθήσετε τα παρακάτω βήματα για να ολοκληρώσετε τη δημοσίευση:

1. Επιλέξτε Αρχείο -> νέο έργο και δημιουργία μιας εφαρμογής υπηρεσίας ύφασμα.
2. Επιλέξτε το εκτελέσιμο αρχείο επισκέπτη ως το πρότυπο υπηρεσία.
3. Κάντε κλικ στο κουμπί Αναζήτηση για να επιλέξετε το φάκελο με το εκτελέσιμο αρχείο και συμπληρώστε τα υπόλοιπα από τις παραμέτρους για να δημιουργήσετε την υπηρεσία.
    - *Συμπεριφορά πακέτου κώδικα* μπορεί να ρυθμιστεί για να αντιγράψετε όλο το περιεχόμενο του φακέλου σας στο έργο Visual Studio, πράγμα που είναι χρήσιμο εάν δεν αλλάζει το εκτελέσιμο αρχείο. Εάν θεωρείτε ότι το εκτελέσιμο αρχείο για να αλλάξετε και θέλετε τη δυνατότητα να σηκώστε δυναμικά νέες εκδόσεις, μπορείτε να επιλέξετε να δημιουργήσετε σύνδεση στο φάκελο. Σημειώστε ότι μπορείτε να χρησιμοποιήσετε συνδεδεμένων φακέλους κατά τη δημιουργία του έργου εφαρμογή στο Visual Studio. Αυτό παρέχει συνδέσεις προς τη θέση προέλευσης από μέσα στο έργο, επιτρέποντας την για να ενημερώσετε το εκτελέσιμο επισκέπτη στον προορισμό προέλευσης, με αυτές τις ενημερώσεις γίνονται τμήμα του πακέτου εφαρμογών στη δόμηση.
    - *Πρόγραμμα* - επιλέξτε το εκτελέσιμο αρχείο που θα πρέπει να εκτελεστούν για να ξεκινήσετε την υπηρεσία.
    - *Ορίσματα* - Καθορίστε τα ορίσματα που θα πρέπει να διαβιβαστεί για το εκτελέσιμο αρχείο. Μπορεί να είναι μια λίστα των παραμέτρων με ορίσματα.
    - *WorkingFolder* - καθορίζει τον κατάλογο εργασίας για τη διαδικασία που πρόκειται να ξεκινά. Μπορείτε να καθορίσετε τρεις τιμές:
        - `CodeBase`Καθορίζει ότι ο κατάλογος εργασίας πρόκειται να οριστούν στον κατάλογο κώδικα στο πακέτο εφαρμογής (`Code` καταλόγου στη δομή του αρχείου φαίνεται πριν από).
        - `CodePackage`Καθορίζει ότι ο κατάλογος εργασίας πρόκειται να οριστούν στον ριζικό κατάλογο του πακέτου εφαρμογής (`GuestService1Pkg` στη δομή του αρχείου φαίνεται πριν από).
        - `Work`Καθορίζει ότι τα αρχεία τοποθετούνται σε έναν δευτερεύοντα κατάλογο που ονομάζεται εργασία
4. Δώστε ένα όνομα της υπηρεσίας και κάντε κλικ στο κουμπί OK.
5. Εάν η υπηρεσία σας χρειάζεται ένα τελικό σημείο για την επικοινωνία, τώρα μπορείτε να προσθέσετε το πρωτόκολλο, θύρας και τον τύπο με το αρχείο ServiceManifest.xml. e.g. `<Endpoint Name="NodeAppTypeEndpoint" Protocol="http" Port="3000" UriScheme="http" PathSuffix="myapp/" Type="Input" />`.
6. Τώρα, μπορείτε να χρησιμοποιήσετε το πακέτο και να δημοσιεύσετε ενέργεια σε σχέση με το τοπικό σύμπλεγμα κατά τον εντοπισμό σφαλμάτων της λύσης στο Visual Studio. Όταν είστε έτοιμοι για να δημοσιεύσετε την εφαρμογή απομακρυσμένης σύμπλεγμα ή μεταβίβασης ελέγχου της λύσης στο στοιχείο ελέγχου πηγαίου.
7. Μετάβαση στο τέλος αυτού του άρθρου για να δείτε πώς μπορείτε να προβάλετε που επισκέπτη υπηρεσία εκτελέσιμο αρχείο εκτελείται στην Εξερεύνηση ύφασμα υπηρεσίας.

<a id="manually"></a>
## <a name="manually-packaging-and-deploying-an-existing-executable"></a>Συσκευασία με μη αυτόματο τρόπο και την ανάπτυξη ένα υπάρχον εκτελέσιμο αρχείο
Η διαδικασία συσκευασία με μη αυτόματο τρόπο μια εκτελέσιμη επισκέπτη βασίζεται σε τα παρακάτω βήματα:

1. Δημιουργία δομής του πακέτου καταλόγου.
2. Προσθέστε τα αρχεία κώδικα και τη ρύθμιση παραμέτρων της εφαρμογής.
3. Επεξεργαστείτε το αρχείο δήλωσης υπηρεσίας.
4. Επεξεργαστείτε το αρχείο δηλώσεων εφαρμογής.

<!--
>[AZURE.NOTE] We do provide a packaging tool that allows you to create the ApplicationPackage automatically. The tool is currently in preview. You can download it from [here](http://aka.ms/servicefabricpacktool).
-->

### <a name="create-the-package-directory-structure"></a>Δημιουργία δομής του πακέτου καταλόγου
Μπορείτε να ξεκινήσετε με τη δημιουργία της δομής καταλόγου, όπως περιγράφεται παραπάνω.

### <a name="add-the-applications-code-and-configuration-files"></a>Προσθήκη αρχείων κώδικα και τη ρύθμιση παραμέτρων της εφαρμογής
Αφού δημιουργήσετε τη δομή του καταλόγου, μπορείτε να προσθέσετε κώδικα της εφαρμογής και αρχεία ρύθμισης παραμέτρων στην περιοχή τους καταλόγους κώδικα και ρύθμισης παραμέτρων. Μπορείτε επίσης να δημιουργήσετε πρόσθετες καταλόγων ή υποκατάλογοι στην περιοχή καταλόγους του κώδικα ή ρύθμισης παραμέτρων.

Ύφασμα υπηρεσίας κάνει ένα xcopy του περιεχομένου από το ριζικό κατάλογο της εφαρμογής, ώστε να μην υπάρχει δεν υπάρχει προκαθορισμένη δομή για χρήση εκτός από τη δημιουργία δύο επάνω σε καταλόγους, κώδικα και ρυθμίσεις. (Μπορείτε να επιλέξετε διαφορετικά ονόματα εάν θέλετε. Περισσότερες λεπτομέρειες είναι στην επόμενη ενότητα.)

>[AZURE.NOTE] Βεβαιωθείτε ότι έχετε συμπεριλάβει όλα τα αρχεία/εξαρτήσεις που χρειάζεται η εφαρμογή. Υπηρεσία ύφασμα αντιγράφει το περιεχόμενο του πακέτου εφαρμογής σε όλους τους κόμβους του συμπλέγματος όπου η εφαρμογή υπηρεσιών πρόκειται να αναπτυχθούν. Το πακέτο πρέπει να περιέχουν όλες τον κώδικα που χρειάζεται η εφαρμογή για την εκτέλεση. Αυτό δεν συνιστάται εάν υποθέσουμε ότι οι εξαρτήσεις είναι ήδη εγκατεστημένο.

### <a name="edit-the-service-manifest-file"></a>Επεξεργαστείτε το αρχείο δήλωσης υπηρεσίας
Το επόμενο βήμα είναι να επεξεργαστείτε το αρχείο δηλώσεων υπηρεσίας για να συμπεριλάβετε τις παρακάτω πληροφορίες:

- Το όνομα του τύπου υπηρεσίας. Αυτό είναι ένα Αναγνωριστικό που χρησιμοποιεί ύφασμα Service για τον προσδιορισμό μιας υπηρεσίας.
- Η εντολή να χρησιμοποιήσετε για την εκκίνηση της εφαρμογής (ExeHost).
- Οποιαδήποτε δέσμη ενεργειών που πρέπει να εκτελεστούν για να ορίσετε επάνω/ρύθμιση παραμέτρων της εφαρμογής (SetupEntrypoint).

Ακολουθεί ένα παράδειγμα ενός `ServiceManifest.xml` αρχείο:

```xml
<?xml version="1.0" encoding="utf-8"?>
<ServiceManifest xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Name="NodeApp" Version="1.0.0.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">
   <ServiceTypes>
      <StatelessServiceType ServiceTypeName="NodeApp" UseImplicitHost="true"/>
   </ServiceTypes>
   <CodePackage Name="code" Version="1.0.0.0">
      <SetupEntryPoint>
         <ExeHost>
             <Program>scripts\launchConfig.cmd</Program>
         </ExeHost>
      </SetupEntryPoint>
      <EntryPoint>
         <ExeHost>
            <Program>node.exe</Program>
            <Arguments>bin/www</Arguments>
            <WorkingFolder>CodePackage</WorkingFolder>
         </ExeHost>
      </EntryPoint>
   </CodePackage>
   <Resources>
      <Endpoints>
         <Endpoint Name="NodeAppTypeEndpoint" Protocol="http" Port="3000" Type="Input" />
      </Endpoints>
   </Resources>
</ServiceManifest>
```

Ας δούμε τα διάφορα τμήματα του αρχείου που πρέπει να ενημερώσετε:

#### <a name="updating-the-servicetypes"></a>Ενημέρωση του ServiceTypes

```xml
<ServiceTypes>
  <StatelessServiceType ServiceTypeName="NodeApp" UseImplicitHost="true" />
</ServiceTypes>
```

- Μπορείτε να επιλέξετε οποιοδήποτε όνομα που θέλετε για `ServiceTypeName`. Χρησιμοποιείται η τιμή στο το `ApplicationManifest.xml` αρχείου για τον προσδιορισμό της υπηρεσίας.
- Πρέπει να καθορίσετε `UseImplicitHost="true"`. Αυτό το χαρακτηριστικό ενημερώνει ύφασμα υπηρεσία ότι η υπηρεσία βασίζεται σε μια αυτόνομη εφαρμογή, ώστε όλες τις ανάγκες ύφασμα υπηρεσίας για να κάνετε είναι να εκκινήσετε ως διεργασία και παρακολουθεί την εύρυθμη λειτουργία.

#### <a name="updating-the-codepackage"></a>Ενημέρωση του CodePackage
Το στοιχείο CodePackage Καθορίζει τη θέση (και έκδοση) του κώδικα της υπηρεσίας.

```xml
<CodePackage Name="Code" Version="1.0.0.0">
```

Το `Name` στοιχείο χρησιμοποιείται για να καθορίσετε το όνομα του καταλόγου στο πακέτο εφαρμογών που περιέχει την υπηρεσία κώδικα. `CodePackage`διαθέτει επίσης το `version` χαρακτηριστικό. Αυτό μπορεί να χρησιμοποιηθεί για να καθορίσετε την έκδοση του κώδικα--και μπορεί να χρησιμοποιηθεί επίσης ενδεχομένως να αναβαθμίσετε την υπηρεσία κώδικα με τη χρήση υποδομής διαχείρισης κύκλου ζωής της υπηρεσίας ύφασμα εφαρμογών.
#### <a name="optional-updating-the-setupentrypoint"></a>Προαιρετικό: Ενημέρωση του SetupEntrypoint

```xml
<SetupEntryPoint>
   <ExeHost>
       <Program>scripts\launchConfig.cmd</Program>
   </ExeHost>
</SetupEntryPoint>
```
Το στοιχείο SetupEntrypoint χρησιμοποιείται για να καθορίσετε οποιαδήποτε εκτελέσιμο αρχείο ή ένα αρχείο δέσμης που θα εκτελείται πριν από την υπηρεσία κώδικα εκκινείται. Αυτό το βήμα είναι προαιρετικό, ώστε να μην χρειάζεται να συμπεριληφθεί εάν υπάρχει δεν απαιτείται η προετοιμασία/εγκατάσταση. Το SetupEntryPoint εκτελείται κάθε φορά που γίνεται επανεκκίνηση της υπηρεσίας.

Υπάρχει μόνο μία SetupEntrypoint, ώστε οι δέσμες ενεργειών εγκατάστασης/ρύθμιση παραμέτρων πρέπει να είναι ομαδοποιημένα σε ένα αρχείο δέσμης μόνο εάν το πρόγραμμα εγκατάστασης της εφαρμογής/config απαιτεί πολλές δέσμες ενεργειών. Το SetupEntrypoint μπορεί να εκτελέσει οποιονδήποτε τύπο αρχείου--εκτελέσιμο αρχεία, αρχεία δέσμης και cmdlet του PowerShell. Για περισσότερες λεπτομέρειες, ανατρέξτε στο θέμα [Ρύθμιση παραμέτρων SetupEntryPoint](service-fabric-application-runas-security.md).

Στο προηγούμενο παράδειγμα, το SetupEntrypoint εκτελείται ένα αρχείο δέσμης που ονομάζεται `LaunchConfig.cmd` που βρίσκεται στην το `scripts` δευτερεύοντα κατάλογο του καταλόγου κώδικα (αν υποθέσουμε ότι το στοιχείο WorkingFolder έχει οριστεί σε βάση κώδικα).

#### <a name="updating-the-entrypoint"></a>Ενημέρωση του Entrypoint

```xml
<EntryPoint>
  <ExeHost>
    <Program>node.exe</Program>
    <Arguments>bin/www</Arguments>
    <WorkingFolder>CodeBase</WorkingFolder>
  </ExeHost>
</EntryPoint>
```

Το `Entrypoint` στοιχείο στο αρχείο δήλωσης υπηρεσίας χρησιμοποιείται για να καθορίσετε πώς να ξεκινήσετε την υπηρεσία. Το `ExeHost` στοιχείο Καθορίζει το εκτελέσιμο αρχείο (και ορίσματα) που πρέπει να χρησιμοποιηθεί για την εκκίνηση της υπηρεσίας.

- `Program`Καθορίζει το όνομα του το εκτελέσιμο αρχείο που θα πρέπει να εκτελεστούν για να ξεκινήσετε την υπηρεσία.
- `Arguments`Καθορίζει τα ορίσματα που θα πρέπει να διαβιβαστεί για το εκτελέσιμο αρχείο. Μπορεί να είναι μια λίστα των παραμέτρων με ορίσματα.
- `WorkingFolder`Καθορίζει τον κατάλογο εργασίας για τη διαδικασία που πρόκειται να ξεκινά. Μπορείτε να καθορίσετε τρεις τιμές:
    - `CodeBase`Καθορίζει ότι ο κατάλογος εργασίας πρόκειται να οριστούν στον κατάλογο κώδικα στο πακέτο εφαρμογής (`Code` καταλόγου στη δομή της προηγούμενης αρχείου).
    - `CodePackage`Καθορίζει ότι ο κατάλογος εργασίας πρόκειται να οριστούν στον ριζικό κατάλογο του πακέτου εφαρμογής (`GuestService1Pkg` στη δομή της προηγούμενης αρχείου).
  - `Work`Καθορίζει ότι τα αρχεία τοποθετούνται σε έναν δευτερεύοντα κατάλογο που ονομάζεται εργασία

Το WorkingFolder είναι χρήσιμη για να ορίσετε τον σωστό κατάλογο εργασίας, έτσι ώστε οι σχετικές διαδρομές μπορούν να χρησιμοποιηθούν από την εφαρμογή ή προετοιμασία δεσμών ενεργειών.

#### <a name="updating-the-endpoints-and-registering-with-naming-service-for-communication"></a>Ενημέρωση τα τελικά σημεία και την εγγραφή με την ονομασία υπηρεσία για την επικοινωνία

```xml
<Endpoints>
   <Endpoint Name="NodeAppTypeEndpoint" Protocol="http" Port="3000" Type="Input" />
</Endpoints>

```
Στο προηγούμενο παράδειγμα το `Endpoint` στοιχείο καθορίζει τα τελικά σημεία που η εφαρμογή μπορούν να κάνουν ακρόαση σε. Σε αυτό το παράδειγμα, η εφαρμογή Node.js παρακολουθεί http στη θύρα 3000.

Επιπλέον, μπορείτε να υποβάλετε ύφασμα υπηρεσίας για να δημοσιεύσετε αυτό το τελικό σημείο για την υπηρεσία ονομάτων, ώστε να μπορούν να εντοπίζουν τη διεύθυνση τελικού σημείου σε αυτήν την υπηρεσία άλλες υπηρεσίες. Αυτό σας επιτρέπει να μπορούν να επικοινωνούν μεταξύ των υπηρεσιών που είναι εκτελέσιμα επισκέπτη.
Η διεύθυνση τελικού σημείου δημοσιευμένη είναι μέρος της φόρμας `UriScheme://IPAddressOrFQDN:Port/PathSuffix`. `UriScheme`και `PathSuffix` είναι προαιρετικό χαρακτηριστικά. `IPAddressOrFQDN`είναι η διεύθυνση IP ή το πλήρως προσδιορισμένο όνομα τομέα του κόμβου τοποθετείται σε αυτό το εκτελέσιμο αρχείο και να υπολογίζεται για εσάς.

Στο παρακάτω παράδειγμα όταν έχει αναπτυχθεί της υπηρεσίας, στην Εξερεύνηση ύφασμα υπηρεσίας βλέπετε ένα παρόμοιο με το τελικό σημείο `http://10.1.4.92:3000/myapp/` δημοσιευτεί για την παρουσία της υπηρεσίας ή εάν αυτό είναι ένα τοπικό υπολογιστή, μπορείτε να δείτε `http://localhost:3000/myapp/`. 

```xml
<Endpoints>
   <Endpoint Name="NodeAppTypeEndpoint" Protocol="http" Port="3000"  UriScheme="http" PathSuffix="myapp/" Type="Input" />
</Endpoints>
```
Μπορείτε να χρησιμοποιήσετε αυτές τις διευθύνσεις με τη [αντίστροφης μεσολάβησης](service-fabric-reverseproxy.md) για την επικοινωνία μεταξύ των υπηρεσιών.

### <a name="edit-the-application-manifest-file"></a>Επεξεργαστείτε το αρχείο δηλώσεων εφαρμογής

Αφού έχετε ρυθμίσει τις παραμέτρους του `Servicemanifest.xml` αρχείου, πρέπει να κάνετε ορισμένες αλλαγές για να το `ApplicationManifest.xml` αρχείο για να βεβαιωθείτε ότι το όνομα και τη σωστή υπηρεσία τύπου που χρησιμοποιούνται.

```xml
<?xml version="1.0" encoding="utf-8"?>
<ApplicationManifest xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ApplicationTypeName="NodeAppType" ApplicationTypeVersion="1.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">
   <ServiceManifestImport>
      <ServiceManifestRef ServiceManifestName="NodeApp" ServiceManifestVersion="1.0.0.0" />
   </ServiceManifestImport>
</ApplicationManifest>
```

#### <a name="servicemanifestimport"></a>ServiceManifestImport

Στο το `ServiceManifestImport` στοιχείο, μπορείτε να καθορίσετε μία ή περισσότερες υπηρεσίες που θέλετε να συμπεριλάβετε στην εφαρμογή. Υπηρεσίες αναφέρονται με `ServiceManifestName`, που καθορίζει το όνομα του καταλόγου όπου το `ServiceManifest.xml` βρίσκεται το αρχείο.

```xml
<ServiceManifestImport>
  <ServiceManifestRef ServiceManifestName="NodeApp" ServiceManifestVersion="1.0.0.0" />
</ServiceManifestImport>
```

## <a name="set-up-logging"></a>Ρύθμιση καταγραφής
Για τα εκτελέσιμα επισκέπτη, είναι χρήσιμο να έχετε τη δυνατότητα για να δείτε τα αρχεία καταγραφής από την κονσόλα για να μάθετε εάν οι δέσμες ενεργειών εφαρμογής και τη ρύθμιση παραμέτρων εμφανίσουν τυχόν σφάλματα.
Ανακατεύθυνση κονσόλας μπορούν να διαμορφωθούν στο το `ServiceManifest.xml` αρχείο χρησιμοποιώντας το `ConsoleRedirection` στοιχείο.

```xml
<EntryPoint>
  <ExeHost>
    <Program>node.exe</Program>
    <Arguments>bin/www</Arguments>
    <WorkingFolder>CodeBase</WorkingFolder>
    <ConsoleRedirection FileRetentionCount="5" FileMaxSizeInKb="2048"/>
  </ExeHost>
</EntryPoint>
```

* `ConsoleRedirection`μπορεί να χρησιμοποιηθεί για να ανακατευθύνετε εξόδου της κονσόλας (stdout και stderr) σε έναν κατάλογο εργασίας, ώστε να μπορούν επίσης να χρησιμοποιηθούν για να επαληθεύσετε ότι δεν υπάρχουν σφάλματα στη διάρκεια της εγκατάστασης ή εκτέλεσης της εφαρμογής στο σύμπλεγμα ύφασμα υπηρεσίας.

    * `FileRetentionCount`Καθορίζει τον αριθμό των αρχείων που είναι αποθηκευμένα στο τον κατάλογο εργασίας. Η τιμή του 5, για παράδειγμα, σημαίνει ότι τα αρχεία καταγραφής για την προηγούμενη πέντε εκτελέσεις αποθηκεύονται στον κατάλογο εργασίας.
    * `FileMaxSizeInKb`Καθορίζει το μέγιστο μέγεθος των αρχείων καταγραφής.

Αρχεία καταγραφής αποθηκεύονται σε ένα από τα σε καταλόγους εργασίας της υπηρεσίας. Για να καθορίσετε πού βρίσκονται τα αρχεία, πρέπει να χρησιμοποιήσετε την Εξερεύνηση ύφασμα υπηρεσίας για να προσδιορίσετε ποια κόμβου που λειτουργεί με την υπηρεσία και ποια κατάλογο εργασίας που χρησιμοποιείται. Αυτή η διαδικασία καλύπτεται παρακάτω σε αυτό το άρθρο.

## <a name="deployment"></a>Ανάπτυξη
Το τελευταίο βήμα είναι να αναπτύξετε την εφαρμογή σας. Η ακόλουθη δέσμη ενεργειών PowerShell δείχνει πώς μπορείτε να αναπτύξετε την εφαρμογή σας στο σύμπλεγμα τοπικής ανάπτυξης και να ξεκινήσετε μια νέα υπηρεσία ύφασμα υπηρεσίας.

```PowerShell

Connect-ServiceFabricCluster localhost:19000

Write-Host 'Copying application package...'
Copy-ServiceFabricApplicationPackage -ApplicationPackagePath 'C:\Dev\MultipleApplications' -ImageStoreConnectionString 'file:C:\SfDevCluster\Data\ImageStoreShare' -ApplicationPackagePathInImageStore 'nodeapp'

Write-Host 'Registering application type...'
Register-ServiceFabricApplicationType -ApplicationPathInImageStore 'nodeapp'

New-ServiceFabricApplication -ApplicationName 'fabric:/nodeapp' -ApplicationTypeName 'NodeAppType' -ApplicationTypeVersion 1.0

New-ServiceFabricService -ApplicationName 'fabric:/nodeapp' -ServiceName 'fabric:/nodeapp/nodeappservice' -ServiceTypeName 'NodeApp' -Stateless -PartitionSchemeSingleton -InstanceCount 1

```
Μια υπηρεσία ύφασμα υπηρεσίας μπορεί να αναπτυχθεί σε διάφορα "Ρυθμίσεις". Για παράδειγμα, μπορεί να αναπτυχθεί ως μία ή πολλές παρουσίες ή μπορεί να αναπτυχθεί έτσι ότι υπάρχει μία παρουσία της υπηρεσίας σε κάθε κόμβο του συμπλέγματος ύφασμα υπηρεσίας.

Το `InstanceCount` παράμετρος της το `New-ServiceFabricService` cmdlet χρησιμοποιείται για να καθορίσετε πόσες εμφανίσεις της υπηρεσίας θα πρέπει να γίνει εκκίνηση στο σύμπλεγμα ύφασμα υπηρεσίας. Μπορείτε να ορίσετε το `InstanceCount` τιμή, ανάλογα με τον τύπο της εφαρμογής που αναπτύσσετε. Τα δύο πιο συνηθισμένα σενάρια είναι:

* `InstanceCount = "1"`. Σε αυτήν την περίπτωση, μόνο μία παρουσία της υπηρεσίας έχει αναπτυχθεί στο σύμπλεγμα. Χρονοδιάγραμμα της υπηρεσίας ύφασμα καθορίζει ποιες κόμβου της υπηρεσίας πρόκειται να αναπτυχθούν στο.

* `InstanceCount ="-1"`. Σε αυτήν την περίπτωση, μία παρουσία της υπηρεσίας έχει αναπτυχθεί σε κάθε κόμβο του συμπλέγματος ύφασμα υπηρεσίας. Το αποτέλεσμα αντιμετωπίζει μία (και μόνο μία) παρουσία της υπηρεσίας για κάθε κόμβο του συμπλέγματος.

Αυτή είναι μια χρήσιμη ρύθμιση παραμέτρων για τις εφαρμογές του προσκηνίου (για παράδειγμα, ένα τελικό σημείο REST) επειδή εφαρμογές προγράμματος-πελάτη πρέπει να "σύνδεση" σε οποιονδήποτε από τους κόμβους του συμπλέγματος για να χρησιμοποιήσετε το τελικό σημείο. Αυτή η ρύθμιση παραμέτρων μπορεί επίσης να χρησιμοποιηθεί όταν, για παράδειγμα, όλους τους κόμβους του συμπλέγματος ύφασμα υπηρεσίας συνδέονται με μια μονάδα εξισορρόπησης φόρτου, ώστε να μπορούν να διανεμηθούν κίνησης προγράμματος-πελάτη κατά μήκος της υπηρεσίας που εκτελείται σε όλους τους κόμβους του συμπλέγματος.

## <a name="check-your-running-application"></a>Επιλέξτε την εφαρμογή που εκτελείται

Στην Εξερεύνηση ύφασμα υπηρεσίας, προσδιορίστε τον κόμβο όπου εκτελείται η υπηρεσία. Σε αυτό το παράδειγμα, εκτελείται στον Node1:

![Κόμβος όπου εκτελείται η υπηρεσία](./media/service-fabric-deploy-existing-app/nodeappinsfx.png)

Εάν μεταβείτε στον κόμβο και αναζητήστε την εφαρμογή, μπορείτε να δείτε τις κόμβο βασικές πληροφορίες, όπως τη θέση του στο δίσκο.

![Θέση στο δίσκο](./media/service-fabric-deploy-existing-app/locationondisk2.png)

Εάν πραγματοποιήσετε αναζήτηση στον κατάλογο, χρησιμοποιώντας την Εξερεύνηση Server, μπορείτε να βρείτε τον κατάλογο εργασίας και ένα φάκελο αρχείο καταγραφής της υπηρεσίας όπως φαίνεται στο παρακάτω εικόνα.

![Θέση του αρχείου καταγραφής](./media/service-fabric-deploy-existing-app/loglocation.png)


## <a name="next-steps"></a>Επόμενα βήματα
Σε αυτό το άρθρο μάθατε πώς να συσκευάσετε μια εκτελέσιμη επισκέπτη και αναπτύσσετε σε ύφασμα υπηρεσίας. Ως επόμενο βήμα, μπορείτε να ανατρέξετε επιπλέον περιεχόμενο για αυτό το θέμα.

- [Δείγμα για συσκευασία και ανάπτυξη επισκέπτης εκτελέσιμο στην GitHub](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started/tree/master/GuestExe/SimpleApplication), μαζί με μια σύνδεση προς το προέκδοση του εργαλείου συσκευασία
- [Ανάπτυξη πολλών εκτελέσιμα επισκέπτη](service-fabric-deploy-multiple-apps.md)
- [Δημιουργία του πρώτου εφαρμογής ύφασμα υπηρεσίας με χρήση Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md)
