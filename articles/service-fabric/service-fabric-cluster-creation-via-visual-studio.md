<properties
   pageTitle="Ρύθμιση ένα σύμπλεγμα υπηρεσίας ύφασμα χρήση του Visual Studio | Microsoft Azure"
   description="Περιγράφει πώς μπορείτε να ρυθμίσετε ένα σύμπλεγμα υπηρεσίας υφάσματος με τη χρήση προτύπου για τη διαχείριση πόρων Azure δημιουργήθηκε από ένα έργο ομάδα πόρων Azure στο Visual Studio"
   services="service-fabric"
   documentationCenter=".net"
   authors="karolz-ms"
   manager="adegeo"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotNet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="10/06/2016"
   ms.author="karolz@microsoft.com"/>

# <a name="set-up-a-service-fabric-cluster-by-using-visual-studio"></a>Ρύθμιση του ένα σύμπλεγμα υπηρεσίας υφάσματος με χρήση του Visual Studio
Σε αυτό το άρθρο περιγράφει πώς μπορείτε να ρυθμίσετε ένα σύμπλεγμα Azure Service υφάσματος με χρήση του Visual Studio και ένα πρότυπο από διαχειριστή πόρων Azure. Θα χρησιμοποιήσουμε ένα έργο Visual Studio Azure πόρου ομάδας για να δημιουργήσετε το πρότυπο. Μετά τη δημιουργία του προτύπου, μπορούν να αναπτυχθούν απευθείας στο Azure από το Visual Studio. Μπορεί επίσης να χρησιμοποιηθεί από μια δέσμη ενεργειών ή ως μέρος της εγκατάστασης συνεχής ενοποίησης (CI).

## <a name="create-a-service-fabric-cluster-template-by-using-an-azure-resource-group-project"></a>Δημιουργία προτύπου σύμπλεγμα ύφασμα υπηρεσία χρησιμοποιώντας ένα έργο ομάδα Azure πόρων
Για να ξεκινήσετε, ανοίξτε το Visual Studio και δημιουργήστε ένα έργο ομάδα Azure πόρων (είναι διαθέσιμη στο φάκελο **Cloud** ):

![Παράθυρο διαλόγου νέου έργου με επιλεγμένο το έργο Azure ομάδα πόρων][1]

Μπορείτε να δημιουργήσετε μια νέα λύση Visual Studio για αυτό το έργο ή να προσθέσετε σε μια υπάρχουσα λύση.

>[AZURE.NOTE] Εάν δεν βλέπετε το έργο ομάδα πόρων Azure κάτω από τον κόμβο Cloud, δεν έχετε το SDK Azure εγκατεστημένο. Εκκίνηση προγράμματος εγκατάστασης πλατφόρμας Web ([Εγκατάσταση τώρα](http://www.microsoft.com/web/downloads/platform.aspx) εάν έχετε ήδη), και, στη συνέχεια, αναζητήστε "Azure SDK για .NET" και εγκαταστήστε την έκδοση που είναι συμβατή με την έκδοση του Visual Studio.

Αφού πατήσετε το κουμπί ΟΚ, Visual Studio θα σας ζητήσει να επιλέξετε το πρότυπο διαχείρισης πόρων που θέλετε να δημιουργήσετε:

![Επιλέξτε το πρότυπο Azure παράθυρο διαλόγου με το επιλεγμένο πρότυπο σύμπλεγμα ύφασμα υπηρεσίας][2]

Επιλέξτε το πρότυπο σύμπλεγμα ύφασμα υπηρεσίας και πατήστε το κουμπί OK ξανά. Τώρα έχει δημιουργηθεί το έργο και το πρότυπο διαχείρισης πόρων.

## <a name="prepare-the-template-for-deployment"></a>Προετοιμασία του προτύπου για ανάπτυξη
Πριν από το πρότυπο έχει αναπτυχθεί για να δημιουργήσετε το σύμπλεγμα, πρέπει να δώσετε τιμές για τις παραμέτρους απαιτείται το πρότυπο. Αυτές οι τιμές παραμέτρων διαβάζονται από το `ServiceFabricCluster.parameters.json` αρχείο, το οποίο βρίσκεται σε το `Templates` φάκελο του έργου ομάδα πόρων. Ανοίξτε το αρχείο και δώστε τις ακόλουθες τιμές:

|Όνομα παραμέτρου           |Περιγραφή|
|-----------------------  |--------------------------|
|adminUserName            |Το όνομα του λογαριασμού του διαχειριστή για μηχανές ύφασμα υπηρεσίας (κόμβοι).|
|certificateThumbprint    |Την αποτύπωση του πιστοποιητικού που διασφαλίζει το σύμπλεγμα.|
|sourceVaultResourceId    |Το *Αναγνωριστικό πόρου* του κλειδιού θάλαμο όπου είναι αποθηκευμένο το πιστοποιητικό που διασφαλίζει το σύμπλεγμα.|
|certificateUrlValue      |Η διεύθυνση URL του πιστοποιητικού ασφαλείας συμπλέγματος.|

Το πρότυπο διαχείρισης πόρων του Visual Studio υπηρεσίας ύφασμα δημιουργεί ένα σύμπλεγμα ασφαλούς που προστατεύεται από ένα πιστοποιητικό. Αυτό το πιστοποιητικό προσδιορίζεται από τις τελευταίες τρεις πρότυπο παραμέτρους (`certificateThumbprint`, `sourceVaultValue`, και `certificateUrlValue`), και πρέπει να βρίσκονται σε μια **Azure κλειδί θάλαμο**. Για περισσότερες πληροφορίες σχετικά με τον τρόπο για να δημιουργήσετε το πιστοποιητικό ασφαλείας συμπλέγματος, δείτε το άρθρο [ύφασμα υπηρεσιών συμπλέγματος σενάρια ασφαλείας](service-fabric-cluster-security.md#x509-certificates-and-service-fabric) .

## <a name="optional-change-the-cluster-name"></a>Προαιρετικά: Αλλάξτε το όνομα του συμπλέγματος
Κάθε σύμπλεγμα ύφασμα υπηρεσίας έχει ένα όνομα. Όταν ένα σύμπλεγμα ύφασμα δημιουργείται στο Azure, το όνομα συμπλέγματος Καθορίζει (μαζί με την περιοχή Azure) στο όνομα του συστήματος ονομάτων τομέα (DNS) για το σύμπλεγμα. Για παράδειγμα, εάν ονομάσετε το σύμπλεγμά σας `myBigCluster`, και την τοποθεσία (Azure περιοχή) της ομάδας πόρων που θα φιλοξενήσει νέο σύμπλεγμα είναι Ανατολικής η.π.α., θα είναι το όνομα DNS του συμπλέγματος `myBigCluster.eastus.cloudapp.azure.com`.

Από προεπιλογή το όνομα του συμπλέγματος είναι δημιουργείται αυτόματα και να γίνει μοναδικό, επισυνάπτοντας τυχαία κατάληξη σε ένα πρόθεμα "σύμπλεγμα". Αυτό διευκολύνει πολύ για να χρησιμοποιήσετε το πρότυπο ως μέρος ενός συστήματος **συνεχούς ενοποίησης** (CI). Εάν θέλετε να χρησιμοποιήσετε ένα συγκεκριμένο όνομα για το σύμπλεγμά σας, ένα που έχει νόημα για εσάς, ορίστε την τιμή από το `clusterName` μεταβλητής στο αρχείο προτύπου για τη διαχείριση πόρων (`ServiceFabricCluster.json`) στο όνομα της επιλογής σας. Είναι η πρώτη μεταβλητή που ορίζονται από το σε αυτό το αρχείο.

## <a name="optional-add-public-application-ports"></a>Προαιρετικά: Προσθέστε θύρες δημόσια εφαρμογής
Μπορείτε επίσης να αλλάξετε τις θύρες δημόσια εφαρμογής για το σύμπλεγμα πριν το αναπτύξετε. Από προεπιλογή, το πρότυπο ανοίγει τις δύο μόνο δημόσια θύρες TCP (80 και 8081). Εάν χρειάζεστε περισσότερα για τις εφαρμογές σας, τροποποιήστε τον ορισμό Azure εξισορρόπηση φόρτου στο πρότυπο. Τον ορισμό είναι αποθηκευμένο στο αρχείο του κύριου προτύπου (`ServiceFabricCluster.json`). Ανοίξτε το αρχείο και αναζητήστε το `loadBalancedAppPort`. Κάθε θύρα είναι συσχετισμένη με τρία αντικείμενα:

1. Μια μεταβλητή πρότυπο που ορίζει την τιμή θύρας TCP για τη θύρα:

    ```json
    "loadBalancedAppPort1": "80"
    ```

2. Μια *Δοκιμή του* που ορίζει τη συχνότητα και για πόσο χρονικό διάστημα το Azure φορτίο εξισορρόπησης προσπαθεί να χρησιμοποιήσει ενός συγκεκριμένου κόμβου ύφασμα υπηρεσία πριν από την αποτυχία επάνω σε μια άλλη. Τα καθετήρες είναι μέρος του πόρου εξισορρόπηση φόρτου. Ακολουθεί ο ορισμός δοκιμή του για την πρώτη προεπιλεγμένη θύρα εφαρμογής:

    ```json
    {
        "name": "AppPortProbe1",
        "properties": {
            "intervalInSeconds": 5,
            "numberOfProbes": 2,
            "port": "[variables('loadBalancedAppPort1')]",
            "protocol": "Tcp"
        }
    }
    ```

3. Έναν *κανόνα εξισορρόπησης φόρτου* που συνδέει μαζί στη θύρα και τη δοκιμή του, που επιτρέπει σε ένα σύνολο κόμβοι συμπλέγματος ύφασμα υπηρεσίας εξισορρόπησης φόρτου:

    ```json
    {
        "name": "AppPortLBRule1",
        "properties": {
            "backendAddressPool": {
                "id": "[variables('lbPoolID0')]"
            },
            "backendPort": "[variables('loadBalancedAppPort1')]",
            "enableFloatingIP": false,
            "frontendIPConfiguration": {
                "id": "[variables('lbIPConfig0')]"
            },
            "frontendPort": "[variables('loadBalancedAppPort1')]",
            "idleTimeoutInMinutes": 5,
            "probe": {
                "id": "[concat(variables('lbID0'),'/probes/AppPortProbe1')]"
            },
            "protocol": "Tcp"
        }
    }
    ```
Εάν οι εφαρμογές που σκοπεύετε να αναπτύξετε το σύμπλεγμα χρειάζεστε περισσότερες θύρες, μπορείτε να τα προσθέσετε από τη δημιουργία επιπλέον δοκιμή του και εξισορρόπησης φόρτου ορισμών κανόνων. Για περισσότερες πληροφορίες σχετικά με τον τρόπο εργασίας με πρόγραμμα εξισορρόπησης φόρτου Azure πρότυπα για τη διαχείριση πόρων, ανατρέξτε στο θέμα [Γρήγορα αποτελέσματα με τη δημιουργία μιας εσωτερικής εξισορρόπηση φόρτου χρησιμοποιώντας ένα πρότυπο](../load-balancer/load-balancer-get-started-ilb-arm-template.md).

## <a name="deploy-the-template-by-using-visual-studio"></a>Ανάπτυξη του προτύπου με χρήση του Visual Studio
Αφού έχετε αποθηκεύσει όλες τις τιμές απαιτούμενη παράμετρος στο το`ServiceFabricCluster.param.dev.json` αρχείου, είστε έτοιμοι να αναπτύξετε το πρότυπο και δημιουργήστε το σύμπλεγμά σας ύφασμα υπηρεσίας. Κάντε δεξί κλικ στο έργο ομάδα πόρων στην Εξερεύνηση λύσεων Visual Studio και επιλέξτε **ανάπτυξη | Νέα ανάπτυξης...**. Εάν είναι απαραίτητο, Visual Studio θα εμφανίσει το πλαίσιο διαλόγου **ανάπτυξη σε ομάδα πόρων** , που σας ζητά να ελέγχουν την ταυτότητα Azure:

![Ανάπτυξη στο παράθυρο διαλόγου "ομάδα πόρων"][3]

Το παράθυρο διαλόγου σάς επιτρέπει να επιλέξετε μια υπάρχουσα ομάδα πόρου από διαχειριστή πόρων για το σύμπλεγμα και σας δίνει τη δυνατότητα να δημιουργήσετε ένα νέο. Κανονικά έχει νόημα να χρησιμοποιήσετε μια ομάδα ξεχωριστή πόρων για ένα σύμπλεγμα ύφασμα υπηρεσίας.

Αφού πατήσετε το κουμπί "ανάπτυξη", Visual Studio θα σας ζητηθεί να επιβεβαιώσετε τις τιμές παραμέτρων προτύπου. Πατήστε το κουμπί **Αποθήκευση** . Μία παράμετρος δεν έχει μια τιμή μόνιμων: ο κωδικός πρόσβασης λογαριασμού διαχείρισης για το σύμπλεγμα. Πρέπει να καταχωρήσετε μια τιμή κωδικού πρόσβασης όταν Visual Studio σάς ζητά ένα.

>[AZURE.NOTE] Ξεκινώντας με Azure SDK 2.9, Visual Studio υποστηρίζει τους κωδικούς πρόσβασης ανάγνωσης από **Θάλαμο κλειδί Azure** κατά την ανάπτυξη. Στο παράθυρο διαλόγου παράμετροι πρότυπο παρατηρήσετε ότι το `adminPassword` παραμέτρου πλαίσιο κειμένου περιέχει ένα μικρό εικονίδιο "αριθμός-κλειδί" στη δεξιά πλευρά. Αυτό το εικονίδιο σάς επιτρέπει να επιλέξετε μια υπάρχουσα μυστικό κλειδιού θάλαμο ως τον κωδικό πρόσβασης διαχείρισης για το σύμπλεγμα. Απλώς βεβαιωθείτε στο πρώτο Ενεργοποίηση διαχείρισης πόρων Azure access για ανάπτυξη προτύπου στις πολιτικές πρόσβασης για προχωρημένους του κλειδιού θάλαμο. 

Μπορείτε να παρακολουθήσετε την πρόοδο της διαδικασίας ανάπτυξης στο παράθυρο εξόδου του Visual Studio. Μόλις ολοκληρωθεί η ανάπτυξη του προτύπου, το νέο σύμπλεγμά σας είναι έτοιμη για χρήση!

>[AZURE.NOTE] Εάν PowerShell ποτέ που χρησιμοποιήθηκε για τη διαχείριση του Azure από τον υπολογιστή που χρησιμοποιείτε τώρα, πρέπει να κάνετε μια μικρή απαραίτητες εργασίες ρουτίνας.
>1. Ενεργοποίηση δέσμες ενεργειών PowerShell, εκτελώντας το [`Set-ExecutionPolicy`](https://technet.microsoft.com/library/hh849812.aspx) εντολή. Για ανάπτυξη μηχανές, "δεν έχουν περιορισμούς" πολιτικής είναι συνήθως αποδεκτή.
>2. Αποφασίστε αν θα επιτρέπεται η συλλογή διαγνωστικών δεδομένων από τις εντολές του Azure PowerShell και εκτελέστε [`Enable-AzureRmDataCollection`](https://msdn.microsoft.com/library/mt619303.aspx) ή [`Disable-AzureRmDataCollection`](https://msdn.microsoft.com/library/mt619236.aspx) ανάλογα με τις απαιτήσεις. Αυτό θα αποφύγετε περιττές οδηγίες κατά την ανάπτυξη προτύπου.

Εάν υπάρχουν σφάλματα, μεταβείτε στην [πύλη του Azure](https://portal.azure.com/) και ανοίξτε την ομάδα πόρων που θα αναπτυχθούν στο. Κάντε κλικ στην επιλογή **όλες οι ρυθμίσεις**και, στη συνέχεια, κάντε κλικ στην εντολή **αναπτύξεις** το blade ρυθμίσεις. Μια ανάπτυξη αποτυχίας ομάδα πόρων αφήνει λεπτομερείς πληροφορίες διαγνωστικών εκεί.

>[AZURE.NOTE] Υπηρεσία ύφασμα συμπλεγμάτων απαιτούν έναν ορισμένο αριθμό κόμβοι να είναι προς τα επάνω για να διατηρήσετε διαθεσιμότητα και να διατηρούν κατάσταση - αναφέρονται ως "Διατήρηση απαρτίας." Επομένως, δεν είναι ασφαλείς για να τερματίσετε όλα τα μηχανήματα στο σύμπλεγμα εκτός και εάν έχετε εκτελέσει πρώτα ένα [πλήρες αντίγραφο ασφαλείας της την κατάσταση](service-fabric-reliable-services-backup-restore.md).

## <a name="next-steps"></a>Επόμενα βήματα
- [Μάθετε περισσότερα σχετικά με τη ρύθμιση του συμπλέγματος υπηρεσίας υφάσματος με την πύλη Azure](service-fabric-cluster-creation-via-portal.md)
- [Μάθετε πώς μπορείτε να διαχειριστείτε και ανάπτυξη εφαρμογών υπηρεσίας ύφασμα χρησιμοποιώντας το Visual Studio](service-fabric-manage-application-in-visual-studio.md)

<!--Image references-->
[1]: ./media/service-fabric-cluster-creation-via-visual-studio/azure-resource-group-project-creation.png
[2]: ./media/service-fabric-cluster-creation-via-visual-studio/selecting-azure-template.png
[3]: ./media/service-fabric-cluster-creation-via-visual-studio/deploy-to-azure.png
