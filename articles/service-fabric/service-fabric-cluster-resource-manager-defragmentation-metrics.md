<properties
   pageTitle="Ανασυγκρότησης μετρικών σε ύφασμα Azure Service | Microsoft Azure"
   description="Μια επισκόπηση της χρήσης ανασυγκρότησης ή συσκευασίας ως στρατηγικής για μετρήσεις σε ύφασμα υπηρεσίας"
   services="service-fabric"
   documentationCenter=".net"
   authors="masnider"
   manager="timlt"
   editor=""/>

<tags
   ms.service="Service-Fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="08/19/2016"
   ms.author="masnider"/>

# <a name="defragmentation-of-metrics-and-load-in-service-fabric"></a>Ανασυγκρότηση των μετρήσεων και φόρτωση σε ύφασμα υπηρεσίας
Διαχείριση πόρων της υπηρεσίας ύφασμα σύμπλεγμα κυρίως αφορά την εξισορρόπηση όσον αφορά τη διανομή η φόρτωση-βεβαιωθείτε ότι όλες οι κόμβοι του συμπλέγματος έχουν χρησιμοποιηθεί εξίσου. Αυτό είναι συνήθως η διάταξη ασφαλέστερη και smartest όσον αφορά τους υπόλοιπους αποτυχίες εφόσον διασφαλίζει ότι κάθε βλάβη δεδομένο δεν απομάκρυνση από το ορισμένες μεγάλο ποσοστό από μια δεδομένη φόρτο εργασίας. Διαχείριση πόρων της υπηρεσίας ύφασμα σύμπλεγμα υποστηρίζει καθώς και μια διαφορετική στρατηγική που είναι ανασυγκρότησης. Ανασυγκρότησης γενικά σημαίνει ότι αντί να προσπαθείτε να διανείμετε τη χρήση μιας μέτρησης κατά μήκος του συμπλέγματος, θα πρέπει να στην πραγματικότητα Προσπαθούμε να ενοποιήσετε το. Αυτή είναι μια fortunate Αντιστροφή της στρατηγικής κανονική – αντί για τη βελτιστοποίηση του συμπλέγματος με βάση την ελαχιστοποίηση την τυπική απόκλιση μετρικό φόρτωσης για ένα συγκεκριμένο μετρικό μέσος όρος, θα σας Έναρξη βελτιστοποίηση για αυξήσεων απόκλιση. Όμως, γιατί μπορεί να θελήσετε αυτή η στρατηγική;

Επίσης, εάν έχετε Άνοιγμα η φόρτωση ομοιόμορφα μεταξύ τους κόμβους του συμπλέγματος, στη συνέχεια, που έχετε καταναλίσκονται σε νωπή κάποιες από τους πόρους που έχουν οι κόμβοι για την προσφορά. Κανονικά δεν είναι ένα πρόβλημα, αλλά μερικές φορές ορισμένες φόρτους εργασίας δημιουργήσετε υπηρεσιών που είναι εξαιρετικά μεγάλο και κατανάλωση το τεράστιες μεγαλύτερο μέρος ενός κόμβου-Καλώς 75% έως 95% των πόρων ενός κόμβου μπορεί να οδηγήσει αποκλειστικό σε παρουσία υπηρεσίας καθολικής ή αντιγράφου. Δεν είναι ένα πρόβλημα, η διαχείριση πόρων συμπλέγματος θα εντοπίσει κατά το χρόνο δημιουργίας υπηρεσίας που πρέπει να αναδιοργάνωση του συμπλέγματος για να κάνετε χώρο για αυτό μεγάλο φόρτο εργασίας και να ορίσετε σχετικά με τη δημιουργία του συμβεί, αλλά στο μεταξύ που φόρτο εργασίας πρέπει να περιμένουν για να προγραμματιστούν στο σύμπλεγμα.

Δεδομένου ότι ο προγραμματισμός της νέας φόρτους εργασίας είναι συνήθως τουλάχιστον λίγο λανθάνων χρόνος διάκριση πεζών-κεφαλαίων, εάν δεν κάνουμε κάτι διαφορετικό τρόπο μπορούμε μερικές φορές πλήγμα δεξιά από αυτές τις SLA εάν υπάρχει πολλές υπηρεσίες και κατάσταση για να μετακινήσετε, ειδικά εάν φόρτους εργασίας του συμπλέγματος είναι συνήθως μεγάλα (και συνεπώς διαρκεί περισσότερο χρόνο για να μετακινηθείτε στο σύμπλεγμα). Στην πραγματικότητα, όταν θα σας υπολογίζεται δημιουργίας χρόνων προσομοιώσεις που βασίζονται σε δεδομένα πραγματικού σύμπλεγμα, θα σας είδατε που εάν έχουν αρκετά μεγάλος, τις υπηρεσίες και το σύμπλεγμα έχει αρκετά χρησιμοποιούμενη ότι θα επιβραδυνθούν τη δημιουργία αυτών των υπηρεσιών μεγάλο προς τα κάτω και ότι μπορούμε θα μπορούσε να το βελτιώσουμε αυτό, εισάγοντας την πολιτική μετρικών ανασυγκρότησης.

Όπως αρχείο πρόσβαση ή τη δημιουργία μπορεί να λάβετε επιβραδύνθηκε εάν σκληρό δίσκο του υπολογιστή έχει αντίγραφο του αρχείου και θα μπορούσε να είναι sped, ανασυγκροτώντας στη μονάδα δίσκου, ώστε να υπήρχαν μεγαλύτερο συνεχή μπλοκ, μπορείτε να ρυθμίσετε μετρικά ανασυγκρότησης να έχουν τη διαχείριση πόρων συμπλέγματος για εκ των προτέρων να συμπυκνώσετε η φόρτωση των υπηρεσιών σε λιγότερες κόμβους, έτσι ώστε να είναι (σχεδόν) πάντοτε χώρο για τις υπηρεσίες ακόμη και μεγάλες , ώστε να μπορούν να δημιουργηθούν γρήγορα. Οι περισσότεροι χρήστες δεν θα χρειαστείτε αυτό, επειδή υπηρεσίες συνήθως πρέπει να είναι μικρό και έτσι δεν είναι δύσκολη χώρο για τους, αλλά εάν έχετε μεγάλη υπηρεσίες και τις χρειάζεται δημιουργήσατε γρήγορα (και είστε πρόθυμοι να αποδεχτείτε των άλλων ισορροπιών όπως αυξημένη impactfulness αποτυχιών και ορισμένους πόρους που αριστερά unutilized κατά την αναμονή φόρτους εργασίας να προγραμματιστούν), στη συνέχεια, η στρατηγική ανασυγκρότησης είναι για εσάς.

Στο παρακάτω διάγραμμα παρέχει μια οπτική αναπαράσταση των δύο διαφορετικές συμπλεγμάτων, μία που είναι κατακερματισμένος και μία που δεν είναι. Στην περίπτωση που ισορροπημένες, εξετάστε το ενδεχόμενο να τις κινήσεις που θα ήταν απαραίτητες σημείο ένα από τα αντικείμενα μεγαλύτερη υπηρεσίας, εάν έχουν ένα νέο που θα δημιουργηθεί, σε σύγκριση με το ανασυγκροτημένη σύμπλεγμα, όπου αυτό θα μπορούσε να αμέσως τοποθετηθεί σε κόμβους 4 και 5.

![Σύγκριση εξισορρόπηση και ανασυγκροτηθεί συμπλεγμάτων][Image1]

## <a name="defragmentation-pros-and-cons"></a>Ανασυγκρότησης πλεονεκτήματα και μειονεκτήματα
Επομένως, τι είναι αυτά τα άλλα εννοιολογική ισορροπιών; Συνιστάται να επαρκείς μετρήσεων σας φόρτους εργασίας πριν από την ενεργοποίηση της μετρικά ανασυγκρότησης. Ακολουθεί μια γρήγορη πίνακα πράγματα που πρέπει να σκεφτείτε:

| Οι επαγγελματίες τεχνολογιών πληροφορικής ανασυγκρότησης  | Τα μειονεκτήματα ανασυγκρότησης |
|----------------------|----------------------|
|Επιτρέπει ταχύτερη δημιουργία μεγάλο υπηρεσιών | Φόρτωση των σε λιγότερες κόμβους, αυξάνοντας ασυμφωνίας
|Ενεργοποιεί τη χαμηλότερη κίνηση δεδομένων κατά τη δημιουργία    | Αποτυχίες μπορεί να επηρεάσουν περισσότερες υπηρεσίες και να προκαλέσει περισσότερες churn
|Επιτρέπει εμπλουτισμένου περιγραφή των απαιτήσεων και ανάκτηση του διαστήματος | Πιο σύνθετες συνολική ρύθμιση παραμέτρων της διαχείρισης πόρων

Να μπορείτε να συνδυάσετε ανασυγκροτημένη και την κανονική μετρικά στο ίδιο σύμπλεγμα και τη διαχείριση πόρων θα κάνει συνιστάται για να βεβαιωθείτε ότι λαμβάνετε μια διάταξη που ενοποιεί όσο το μεγαλύτερο μέρος των μετρικών ανασυγκρότησης, καθώς αυτό μπορεί να ενώ προσπαθείτε να ανοίξετε τα υπόλοιπα. Θα λάβετε ακριβώς τα αποτελέσματα θα εξαρτώνται από τον αριθμό των εξισορρόπηση μετρικά σε σύγκριση με τον αριθμό των μετρικά ανασυγκρότησης και τους βάρους, τρέχουσα φορτία, κ.λπ.

## <a name="configuring-defragmentation-metrics"></a>Ρύθμιση παραμέτρων μετρικά ανασυγκρότησης
Τη ρύθμιση των παραμέτρων μετρικά ανασυγκρότησης είναι καθολικός απόφαση στο σύμπλεγμα και μπορείτε να επιλέξετε μεμονωμένα μετρικά για ανασυγκρότησης:

ClusterManifest.xml:

```xml
<Section Name="DefragmentationMetrics">
    <Parameter Name="Disk" Value="true" />
    <Parameter Name="CPU" Value="false" />
</Section>
```

## <a name="next-steps"></a>Επόμενα βήματα
- Η διαχείριση πόρων συμπλέγματος περιλαμβάνει πολλές επιλογές για την περιγραφή του συμπλέγματος. Για να μάθετε περισσότερα σχετικά με τους ανάληψη ελέγχου σε αυτό το άρθρο στην [Περιγραφή ένα σύμπλεγμα ύφασμα υπηρεσίας](service-fabric-cluster-resource-manager-cluster-description.md)
- Μετρικά είναι Τρόπος διαχείρισης των της διαχείρισης πόρων συμπλέγματος την υπηρεσία ύφασμα κατανάλωση και χωρητικότητας στο σύμπλεγμα. Για να μάθετε περισσότερα σχετικά με τους και πώς μπορείτε να ρυθμίσετε τις παραμέτρους τους ανάληψη ελέγχου [σε αυτό το άρθρο](service-fabric-cluster-resource-manager-metrics.md)

[Image1]:./media/service-fabric-cluster-resource-manager-defragmentation-metrics/balancing-defrag-compared.png
