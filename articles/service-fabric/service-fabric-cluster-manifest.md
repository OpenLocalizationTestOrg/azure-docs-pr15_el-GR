<properties
   pageTitle="Ρύθμιση των παραμέτρων του συμπλέγματος μεμονωμένη | Microsoft Azure"
   description="Σε αυτό το άρθρο περιγράφει πώς μπορείτε να ρυθμίσετε τις παραμέτρους του μεμονωμένου ή ιδιωτικό ύφασμα υπηρεσιών συμπλέγματος."
   services="service-fabric"
   documentationCenter=".net"
   authors="dsk-2015"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="10/07/2016"
   ms.author="dkshir"/>


# <a name="configuration-settings-for-standalone-windows-cluster"></a>Ρύθμιση παραμέτρων για μεμονωμένη Windows συμπλέγματος

Σε αυτό το άρθρο περιγράφει τον τρόπο για να ρυθμίσετε ένα σύμπλεγμα υπηρεσίας ύφασμα αυτόνομο χρησιμοποιώντας το αρχείο _**ClusterConfig.JSON**_ . Μπορείτε να χρησιμοποιήσετε αυτό το αρχείο για να καθορίσετε πληροφορίες όπως τους κόμβους ύφασμα υπηρεσίας και τις διευθύνσεις IP, διαφορετικούς τύπους κόμβοι στο σύμπλεγμα, τις ρυθμίσεις ασφαλείας, καθώς και η τοπολογία του δικτύου όσον αφορά τομείς σφαλμάτων/αναβάθμιση, για το σύμπλεγμά σας μεμονωμένη.

Όταν κάνετε [λήψη του πακέτου ύφασμα υπηρεσίας μεμονωμένη](service-fabric-cluster-creation-for-windows-server.md#downloadpackage), μερικά δείγματα του αρχείου ClusterConfig.JSON γίνεται λήψη στον υπολογιστή σας την εργασία. Τα δείγματα αντιμετωπίζετε *DevCluster* στα ονόματά τους θα σας βοηθήσει να δημιουργήσετε ένα σύμπλεγμα με όλους τους κόμβους τρεις στον ίδιο υπολογιστή, όπως λογική κόμβους. Από τα εξής, τουλάχιστον έναν κόμβο πρέπει να επισημανθούν ως ένα κύριο κόμβο. Αυτό το σύμπλεγμα είναι χρήσιμη για ένα περιβάλλον ανάπτυξης ή ελέγχου και δεν υποστηρίζεται ως ένα σύμπλεγμα παραγωγής. Τα δείγματα αντιμετωπίζετε *MultiMachine* στα ονόματά τους, θα σας βοηθήσει να δημιουργήσετε ένα σύμπλεγμα ποιότητα παραγωγής, με κάθε κόμβο σε νέο υπολογιστή. Ο αριθμός των κύριους κόμβους για αυτές τις σύμπλεγμα θα βασίζεται στο [επίπεδο αξιοπιστίας](#reliability).

1. *ClusterConfig.Unsecure.DevCluster.JSON* και *ClusterConfig.Unsecure.MultiMachine.JSON* δείχνουν πώς μπορείτε να δημιουργήσετε ένα μη ασφαλές σύμπλεγμα δοκιμής ή παραγωγής αντίστοιχα. 
    
2. *ClusterConfig.Windows.DevCluster.JSON* και *ClusterConfig.Windows.MultiMachine.JSON* δείχνουν τον τρόπο για να δημιουργήσετε δοκιμής ή παραγωγής σύμπλεγμα, ασφαλές με [ασφάλεια των Windows](service-fabric-windows-cluster-windows-security.md).

3. *ClusterConfig.X509.DevCluster.JSON* και *ClusterConfig.X509.MultiMachine.JSON* δείχνουν πώς μπορείτε να δημιουργήσετε δοκιμής ή παραγωγής σύμπλεγμα, ασφαλές χρησιμοποιώντας [X509 με βάση το πιστοποιητικό ασφαλείας](service-fabric-windows-cluster-x509-security.md). 


Τώρα λοιπόν θα εξετάσουμε στις διάφορες ενότητες ενός αρχείου _**ClusterConfig.JSON**_ ως κάτω από.

## <a name="general-cluster-configurations"></a>Οι ρυθμίσεις παραμέτρων γενικών συμπλέγματος
Αυτό καλύπτει τα γενικά σύμπλεγμα συγκεκριμένες ρυθμίσεις παραμέτρων, όπως φαίνεται στην παρακάτω τμήμα JSON.

    "name": "SampleCluster",
    "clusterConfigurationVersion": "1.0.0",
    "apiVersion": "2015-01-01-alpha",

Μπορείτε να δώσετε οποιοδήποτε φιλικό όνομα για το σύμπλεγμά σας υπηρεσία ύφασμα αναθέτοντας σε αυτήν τη μεταβλητή **όνομα** . Το **clusterConfigurationVersion** είναι ο αριθμός έκδοσης του συμπλέγματος; θα πρέπει να αυξήσετε το κάθε φορά που αναβαθμίζετε το σύμπλεγμά σας ύφασμα υπηρεσίας. Ωστόσο, θα πρέπει να αφήνετε το **apiVersion** στην προεπιλεγμένη τιμή.


<a id="clusternodes"></a>
## <a name="nodes-on-the-cluster"></a>Οι κόμβοι στο σύμπλεγμα
Μπορείτε να ρυθμίσετε τους κόμβους στην το σύμπλεγμά σας ύφασμα υπηρεσία, χρησιμοποιώντας την ενότητα **κόμβους** , όπως φαίνεται στο ακόλουθο τμήματος κώδικα.

    "nodes": [{
        "nodeName": "vm0",
        "iPAddress": "localhost",
        "nodeTypeRef": "NodeType0",
        "faultDomain": "fd:/dc1/r0",
        "upgradeDomain": "UD0"
    }, {
        "nodeName": "vm1",
        "iPAddress": "localhost",
        "nodeTypeRef": "NodeType1",
        "faultDomain": "fd:/dc1/r1",
        "upgradeDomain": "UD1"
    }, {
        "nodeName": "vm2",
        "iPAddress": "localhost",
        "nodeTypeRef": "NodeType2",
        "faultDomain": "fd:/dc1/r2",
        "upgradeDomain": "UD2"
    }],

Ένα σύμπλεγμα ύφασμα υπηρεσίας πρέπει να περιέχει τουλάχιστον 3 κόμβους. Μπορείτε να προσθέσετε περισσότερους κόμβους σε αυτήν την ενότητα σύμφωνα με τις ρυθμίσεις σας. Ο παρακάτω πίνακας εξηγεί τις ρυθμίσεις παραμέτρων για κάθε κόμβο.

|**Ρύθμιση παραμέτρων κόμβου**|**Περιγραφή**|
|-----------------------|--------------------------|
|nodeName|Μπορείτε να δώσετε οποιοδήποτε φιλικό όνομα για τον κόμβο.|
|διεύθυνση IP|Μάθετε τη διεύθυνση IP του κόμβο σας ανοίγοντας ένα παράθυρο εντολών και πληκτρολογώντας `ipconfig`. Σημειώστε τη διεύθυνση IPV4 και να την εκχωρήσετε στη μεταβλητή **διεύθυνση IP** .|
|nodeTypeRef|Κάθε κόμβο μπορούν να αντιστοιχιστούν έναν τύπο διαφορετικό κόμβο. Οι [τύποι κόμβου](#nodetypes) ορίζονται στην επόμενη ενότητα.|
|faultDomain|Σφάλμα τομείς επιτρέπουν στους διαχειριστές συμπλέγματος για να καθορίσετε τους κόμβους φυσικής που μπορεί να αποτύχει την ίδια στιγμή λόγω των εξαρτήσεων κοινόχρηστο φυσικής.|
|upgradeDomain|Αναβάθμιση τομείς περιγράφουν σύνολα κόμβοι που έχουν τερματιστεί για αναβαθμίσεις ύφασμα υπηρεσίας στο σχετικά με την ίδια στιγμή. Μπορείτε να επιλέξετε ποια κόμβους για να αντιστοιχίσετε σε ποια αναβάθμισης τομείς, όπως αυτές δεν περιορίζονται από οποιαδήποτε φυσική απαιτήσεις.| 


## <a name="cluster-properties"></a>Ιδιότητες συμπλέγματος

Στην ενότητα **Ιδιότητες** σε το ClusterConfig.JSON χρησιμοποιείται για τη ρύθμιση παραμέτρων του συμπλέγματος ως εξής.

<a id="reliability"></a>
### <a name="reliability"></a>Αξιοπιστία 
Στην ενότητα **reliabilityLevel** καθορίζει τον αριθμό των αντιγράφων των υπηρεσιών συστήματος που μπορεί να εκτελεστεί σε τους κύριους κόμβους του συμπλέγματος. Αυξάνει την αξιοπιστία των αυτές τις υπηρεσίες και επομένως το σύμπλεγμα. Μπορείτε να ρυθμίσετε αυτή η μεταβλητή να είτε *χάλκινα*, *Ασημί*, *χρυσό* ή *Platinum* για 3, 5, 7 ή 9 αντίγραφα από αυτές τις υπηρεσίες αντίστοιχα. Δείτε ένα παράδειγμα παρακάτω.

    "reliabilityLevel": "Bronze",
    
Σημειώστε ότι επειδή ένα κύριο κόμβο εκτελείται ένα αντίγραφο των υπηρεσιών συστήματος, θα χρειαστεί τουλάχιστον 3 κύριους κόμβους για *χάλκινα*5 για *Ασημί*, 7 για *χρυσό* και 9 για *Platinum* αξιοπιστία επίπεδα.


### <a name="diagnostics"></a>Εργαλεία διαγνωστικών
Στην ενότητα **diagnosticsStore** σάς επιτρέπει να ρυθμίσετε τις παραμέτρους για να ενεργοποιήσετε την εργαλεία διαγνωστικών και αντιμετώπισης προβλημάτων κόμβο ή σύμπλεγμα αποτυχίες, όπως φαίνεται στην το παρακάτω τμήμα κώδικα. 

    "diagnosticsStore": {
        "metadata":  "Please replace the diagnostics store with an actual file share accessible from all cluster machines.",
        "dataDeletionAgeInDays": "7",
        "storeType": "FileShare",
        "IsEncrypted": "false",
        "connectionstring": "c:\\ProgramData\\SF\\DiagnosticsStore"
    }

Τα **μετα-δεδομένα** είναι μια περιγραφή για το σύμπλεγμα Διαγνωστικά και μπορεί να οριστεί σύμφωνα με τις ρυθμίσεις σας. Αυτές τις μεταβλητές Βοήθειας στη συλλογή ETW αρχεία καταγραφής ανίχνευσης, ενδείξεις σφαλμάτων, καθώς και μετρητές επιδόσεων. Διαβάστε [Tracelog](https://msdn.microsoft.com/library/windows/hardware/ff552994.aspx) και [ETW ανίχνευσης](https://msdn.microsoft.com/library/ms751538.aspx) για περισσότερες πληροφορίες σχετικά με αρχεία καταγραφής ανίχνευσης ETW. Όλα τα αρχεία καταγραφής όπως [παρουσιάσει σφάλμα ενδείξεις](https://blogs.technet.microsoft.com/askperf/2008/01/08/understanding-crash-dump-files/) και [μετρητές επιδόσεων](https://msdn.microsoft.com/library/windows/desktop/aa373083.aspx) μπορεί να κατευθύνεται στο φάκελο **συμβολοσειρά σύνδεσης** από τον υπολογιστή σας. Μπορείτε επίσης να χρησιμοποιήσετε *AzureStorage* για την αποθήκευση Διαγνωστικά. Δείτε παρακάτω για ένα τμήμα δείγματος.

    "diagnosticsStore": {
        "metadata":  "Please replace the diagnostics store with an actual file share accessible from all cluster machines.",
        "dataDeletionAgeInDays": "7",
        "storeType": "AzureStorage",
        "IsEncrypted": "false",
        "connectionstring": "xstore:DefaultEndpointsProtocol=https;AccountName=[AzureAccountName];AccountKey=[AzureAccountKey]"
    }

### <a name="security"></a>Ασφάλεια 
Στην ενότητα **ασφάλεια** είναι απαραίτητο για ένα σύμπλεγμα ύφασμα υπηρεσίας ασφαλούς μεμονωμένη. Το παρακάτω τμήμα κώδικα εμφανίζει ένα τμήμα αυτής της ενότητας.

    "security": {
        "metadata": "This cluster is secured using X509 certificates.",
        "ClusterCredentialType": "X509",
        "ServerCredentialType": "X509",
        . . .
    }

Τα **μετα-δεδομένα** είναι μια περιγραφή για το σύμπλεγμά σας ασφαλή και μπορεί να οριστεί σύμφωνα με τις ρυθμίσεις σας. Η **ClusterCredentialType** και **ServerCredentialType** καθορίζουν τον τύπο ασφαλείας που εφαρμόζει το σύμπλεγμα και οι κόμβοι. Αυτές μπορεί να οριστεί είτε *X509* για ένα χρεόγραφο με βάση το πιστοποιητικό ή *τα Windows* για ένα χρεόγραφο βάσει Azure Active Directory. Τα υπόλοιπα στην ενότητα **ασφάλεια** θα είναι με βάση τον τύπο της ασφάλειας. Διαβάστε [βάσει πιστοποιητικών ασφαλείας σε ένα σύμπλεγμα μεμονωμένη](service-fabric-windows-cluster-x509-security.md) ή [ασφαλείας των Windows σε ένα σύμπλεγμα μεμονωμένη](service-fabric-windows-cluster-windows-security.md) για πληροφορίες σχετικά με το πώς να συμπληρώσετε τα υπόλοιπα στην ενότητα **ασφάλεια** .


<a id="nodetypes"></a>
### <a name="node-types"></a>Τύποι κόμβου
Στην ενότητα **nodeTypes** περιγράφει τον τύπο από τους κόμβους που έχει το σύμπλεγμά σας. Τύπος τουλάχιστον μία κόμβου πρέπει να καθοριστεί για ένα σύμπλεγμα, όπως φαίνεται στην παρακάτω το απόκομμα. 

    "nodeTypes": [{
        "name": "NodeType0",
        "clientConnectionEndpointPort": "19000",
        "clusterConnectionEndpointPort": "19001",
        "leaseDriverEndpointPort": "19002"
        "serviceConnectionEndpointPort": "19003",
        "httpGatewayEndpointPort": "19080",
        "applicationPorts": {
            "startPort": "20575",
            "endPort": "20605"
        },
        "ephemeralPorts": {
            "startPort": "20606",
            "endPort": "20861"
        },
        "isPrimary": true
    }]

Το **όνομα** είναι το φιλικό όνομα για αυτόν τον τύπο συγκεκριμένο κόμβο. Για να δημιουργήσετε έναν κόμβο αυτού του τύπου κόμβου, να αντιστοιχίσετε το φιλικό όνομα για τη μεταβλητή **nodeTypeRef** για αυτόν τον κόμβο, ως που αναφέρονται [παραπάνω](#clusternodes). Για κάθε τύπο κόμβου, ορίστε τα τελικά σημεία σύνδεσης που θα χρησιμοποιηθεί. Μπορείτε να επιλέξετε οποιονδήποτε αριθμό θύρας για αυτά τα τελικά σημεία σύνδεσης, με την προϋπόθεση ότι να έρχονται σε διένεξη με οποιαδήποτε άλλα τελικά σημεία σε αυτό το σύμπλεγμα. Σε ένα σύμπλεγμα πολλών κόμβο, θα υπάρχουν ένα ή περισσότερα κύριους κόμβους (δηλαδή **isPrimary** έχει οριστεί στην *τιμή true*), ανάλογα με το [**reliabilityLevel**](#reliability). Διαβάστε [θέματα σχεδιασμού χωρητικότητα σύμπλεγμα ύφασμα υπηρεσίας](service-fabric-cluster-capacity.md) για πληροφορίες σχετικά με τιμές **nodeTypes** και **reliabilityLevel** , καθώς και για να μάθετε ποια είναι τα κύρια και τους τύπους μη πρωτεύοντος κόμβο. 

#### <a name="endpoints-used-to-configure-the-node-types"></a>Τελικά σημεία που χρησιμοποιούνται για τη ρύθμιση παραμέτρων των τύπων κόμβου

- *clientConnectionEndpointPort* είναι η θύρα που χρησιμοποιείται από το πρόγραμμα-πελάτη για να συνδεθείτε με το σύμπλεγμα, κατά τη χρήση του προγράμματος-πελάτη APIs. 
- *clusterConnectionEndpointPort* είναι η θύρα με την οποία οι κόμβοι επικοινωνούν μεταξύ τους.
- *leaseDriverEndpointPort* είναι η θύρα που χρησιμοποιείται από το πρόγραμμα οδήγησης εκμίσθωση σύμπλεγμα για να μάθετε εάν οι κόμβοι είναι ακόμη ενεργή. 
- *serviceConnectionEndpointPort* είναι η θύρα που χρησιμοποιούνται από τις εφαρμογές και υπηρεσίες αναπτυχθεί σε έναν κόμβο, για να επικοινωνήσετε με το πρόγραμμα-πελάτη ύφασμα υπηρεσιών σε αυτόν τον συγκεκριμένο κόμβο.
- *httpGatewayEndpointPort* είναι η θύρα που χρησιμοποιούνται από την Εξερεύνηση ύφασμα υπηρεσίας για να συνδεθείτε με το σύμπλεγμα.
- *ephemeralPorts* είναι οι [δυναμικές θύρες που χρησιμοποιούνται από το λειτουργικό σύστημα](https://support.microsoft.com/kb/929851). Υπηρεσία ύφασμα θα χρησιμοποιήσει ένα τμήμα από αυτές τις ως εφαρμογή θύρες και το υπόλοιπο θα είναι διαθέσιμη για το λειτουργικό σύστημα. Αυτό θα επίσης Αντιστοιχίστε αυτήν την περιοχή την υπάρχουσα περιοχή που είναι παρόντες σε το λειτουργικό σύστημα, ώστε να για όλες τις χρήσεις, μπορείτε να χρησιμοποιήσετε τις περιοχές που σε τα δείγματα αρχείων JSON. Πρέπει να βεβαιωθείτε ότι η διαφορά ανάμεσα στην αρχή και τις θύρες λήξης είναι τουλάχιστον 255. 
- *applicationPorts* είναι οι θύρες που θα χρησιμοποιηθεί από τις εφαρμογές υπηρεσίας ύφασμα. Αυτά πρέπει να είναι ένα υποσύνολο του *ephemeralPorts*, ώστε να καλύπτει την απαίτηση τελικού σημείου με τις εφαρμογές σας. Υπηρεσία ύφασμα θα χρησιμοποιήσει αυτές τις κάθε φορά που νέες θύρες απαιτούνται, καθώς και να χειριστείτε ανοίγοντας το τείχος προστασίας για αυτές τις θύρες. 
- *reverseProxyEndpointPort* είναι προαιρετικό αντίστροφης μεσολάβησης τελικού σημείου. Για περισσότερες λεπτομέρειες, ανατρέξτε στο θέμα [Διακομιστή μεσολάβησης υπηρεσίας ύφασμα αντιστρέψετε](service-fabric-reverseproxy.md) . 


### <a name="other-settings"></a>Άλλες ρυθμίσεις
Στην ενότητα **fabricSettings** σάς επιτρέπει να ορίσετε το ριζικό κατάλογο καταλόγων για την υπηρεσία ύφασμα δεδομένων και αρχεία καταγραφής. Μπορείτε να προσαρμόσετε αυτά μόνο κατά τη δημιουργία αρχικό σύμπλεγμα. Δείτε παρακάτω για ένα τμήμα δείγματος αυτής της ενότητας.

    "fabricSettings": [{
        "name": "Setup",
        "parameters": [{
            "name": "FabricDataRoot",
            "value": "C:\\ProgramData\\SF"
        }, {
            "name": "FabricLogRoot",
            "value": "C:\\ProgramData\\SF\\Log"
    }]

Συνιστάται η χρησιμοποιώντας μια μονάδα δίσκου μη OS ως FabricDataRoot και FabricLogRoot όπως παρέχει περισσότερες αξιοπιστία σε σχέση με το λειτουργικό σύστημα παρουσιάζει σφάλμα. Σημειώστε ότι αν μπορείτε να προσαρμόσετε μόνο το ριζικό κατάλογο δεδομένων, στη συνέχεια, τον ριζικό κατάλογο του αρχείου καταγραφής θα τοποθετηθεί ένα επίπεδο κάτω από το ριζικό κατάλογο δεδομένων.


## <a name="next-steps"></a>Επόμενα βήματα

Μόλις ολοκληρωθεί ClusterConfig.JSON αρχείου έχει ρυθμιστεί σύμφωνα με τις ρυθμίσεις σας αυτόνομο σύμπλεγμα, μπορείτε να αναπτύξετε το σύμπλεγμά σας, ακολουθώντας το άρθρο [Δημιουργήστε ένα σύμπλεγμα Azure Service ύφασμα εσωτερικής εγκατάστασης είτε στο cloud](service-fabric-cluster-creation-for-windows-server.md) και, στη συνέχεια, προχωρήστε στην [απεικόνιση το σύμπλεγμά σας με την υπηρεσία ύφασμα Εξερεύνηση](service-fabric-visualizing-your-cluster.md).


