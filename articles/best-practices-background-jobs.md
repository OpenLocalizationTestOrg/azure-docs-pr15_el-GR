<properties
   pageTitle="Καθοδήγηση εργασίες στο παρασκήνιο | Microsoft Azure"
   description="Οδηγίες για τη φόντο εργασιών που εκτέλεση ανεξάρτητα από το περιβάλλον εργασίας χρήστη."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="christb"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="07/21/2016"
   ms.author="masashin"/>

# <a name="background-jobs-guidance"></a>Καθοδήγηση εργασίες φόντου

[AZURE.INCLUDE [pnp-header](../includes/guidance-pnp-header-include.md)]

## <a name="overview"></a>Επισκόπηση

Πολλούς τύπους εφαρμογών απαιτούν φόντου εργασίες που εκτελούνται ανεξάρτητα από το περιβάλλον εργασίας χρήστη (UI). Παραδείγματα μαζικές εργασίες, τις εργασίες εντατική επεξεργασία και μεγάλη διάρκεια εκτέλεσης διεργασίες όπως ροές εργασίας. Εργασίες φόντου μπορεί να εκτελεστεί χωρίς να απαιτείται παρέμβαση του χρήστη--η εφαρμογή μπορεί να ξεκινήσει η εργασία και, στη συνέχεια, συνεχίστε να επεξεργαστεί αλληλεπιδραστικών αιτήσεις από χρήστες. Αυτό μπορεί να βοηθήσει για να ελαχιστοποιήσετε το φορτίο σχετικά με την εφαρμογή περιβάλλοντος εργασίας Χρήστη, που μπορεί να βελτιώσει διαθεσιμότητα και να μειώσετε τους χρόνους αλληλεπιδραστικών απόκρισης.

Για παράδειγμα, εάν μια εφαρμογή απαιτείται για τη δημιουργία μικρογραφίες των εικόνων που έχουν αποσταλεί από τους χρήστες, αυτό μπορεί να κάντε το εξής ως εργασία παρασκηνίου και αποθηκεύστε τη μικρογραφία σε χώρου αποθήκευσης, όταν ολοκληρώνεται--χωρίς ο χρήστης να χρειάζεται να περιμένουν για τη διαδικασία για να είναι δυνατόν να ολοκληρωθεί. Με τον ίδιο τρόπο, ένας χρήστης τοποθετήσει παραγγελία μπορεί να ξεκινήσει μια ροή εργασίας φόντο που επεξεργάζεται τη σειρά, ενώ το περιβάλλον εργασίας Χρήστη επιτρέπει στο χρήστη να συνεχίσετε την περιήγηση στην εφαρμογή web. Όταν ολοκληρωθεί η εργασία στο παρασκήνιο, το μπορεί να ενημερώσετε τα δεδομένα αποθηκευμένα παραγγελίες και να στείλετε ένα μήνυμα ηλεκτρονικού ταχυδρομείου στο χρήστη που επιβεβαιώνει τη σειρά.

Όταν λάβετε υπόψη εάν για να υλοποιήσετε μια εργασία, όπως μια εργασία στο παρασκήνιο, το κύριο κριτήρια είναι εάν η εργασία είναι δυνατό να εκτελεστεί χωρίς την παρέμβαση του χρήστη και χωρίς το περιβάλλον εργασίας Χρήστη να χρειάζεται να περιμένουν για να είναι δυνατόν να ολοκληρωθεί η εργασία. Εργασίες που απαιτούν χρήστη ή το περιβάλλον εργασίας Χρήστη να περιμένετε ενώ είναι συμπληρωμένα ενδέχεται να μην είναι κατάλληλο ως εργασίες φόντου.

## <a name="types-of-background-jobs"></a>Τύπους εργασιών φόντο

Εργασίες φόντο συνήθως περιλαμβάνουν μία ή περισσότερες από τους ακόλουθους τύπους εργασιών:

- Υπολογιστική εργασίες, όπως μαθηματικές πράξεις ή δομικά μοντέλο ανάλυσης.
- Να/O-εντατική εργασίες, όπως η εκτέλεση μια σειρά από χώρο αποθήκευσης συναλλαγές ή η δημιουργία ευρετηρίου των αρχείων.
- Μαζικές εργασίες, όπως η διάρκεια της νύχτας δεδομένων ενημερώσεις ή προγραμματισμένη επεξεργασία.
- Μεγάλη διάρκεια εκτέλεσης ροές εργασίας, όπως η πραγματοποίηση εντολών ή παροχής υπηρεσιών και συστήματα.
- Επεξεργασία ευαίσθητα δεδομένα όπου η εργασία είναι παραδοθεί σε μια πιο ασφαλή θέση για επεξεργασία. Για παράδειγμα, ίσως δεν θέλετε να επεξεργάζονται ευαίσθητα δεδομένα μέσα σε μια εφαρμογή web. Αντί για αυτό, μπορείτε να χρησιμοποιήσετε ένα μοτίβο όπως [πύλης](http://msdn.microsoft.com/library/dn589793.aspx) για να μεταφέρετε τα δεδομένα σε μια διαδικασία απομόνωσης φόντου που έχει πρόσβαση σε προστατευμένο χώρο αποθήκευσης.

## <a name="triggers"></a>Εναυσμάτων

Εργασίες φόντου μπορεί να αρχίσει με πολλούς διαφορετικούς τρόπους. Εμπίπτουν σε μία από τις εξής κατηγορίες:

- [**Εναύσματα βάσει συμβάντων**](#event-driven-triggers). Απάντηση σε ένα συμβάν, συνήθως μια ενέργεια που λαμβάνονται από ένα χρήστη ή ένα βήμα σε μια ροή εργασίας ξεκινήσει η εργασία.
- [**Εναύσματα βάσει χρονοδιαγράμματος**](#schedule-driven-triggers). Η εργασία καλείται σε ένα χρονοδιάγραμμα με βάση ένα χρονοδιακόπτη. Αυτό μπορεί να είναι ένα επαναλαμβανόμενο χρονοδιάγραμμα ή μια κλήση μη επαναλαμβανόμενες που έχει καθοριστεί για αργότερα.

### <a name="event-driven-triggers"></a>Εναύσματα βάσει συμβάντων

Κλήση βάσει συμβάντων χρησιμοποιεί ένα έναυσμα για να ξεκινήσει η εργασία στο παρασκήνιο. Παραδείγματα χρήσης εναύσματα βάσει συμβάντων περιλαμβάνουν τα εξής:

- Το περιβάλλον εργασίας Χρήστη ή μια άλλη εργασία τοποθετεί ένα μήνυμα σε μια ουρά. Το μήνυμα περιέχει δεδομένα σχετικά με μια ενέργεια που πραγματοποιήθηκε, όπως ο χρήστης τοποθετώντας μια σειρά. Η εργασία στο παρασκήνιο ακρόασης για αυτήν την ουρά και εντοπίζει την άφιξη ενός νέου μηνύματος. Διαβάζει το μήνυμα και χρησιμοποιεί τα δεδομένα σε αυτήν την είσοδο για την εργασία στο παρασκήνιο.
- Το περιβάλλον εργασίας Χρήστη ή μια άλλη εργασία αποθηκεύει ή ενημερώνεται μια τιμή στο χώρο αποθήκευσης. Η εργασία στο παρασκήνιο παρακολουθεί το χώρο αποθήκευσης και εντοπίσει αλλαγές. Διαβάζει τα δεδομένα και χρησιμοποιεί ως το εισόδου για την εργασία στο παρασκήνιο.
- Το περιβάλλον εργασίας Χρήστη ή μια άλλη εργασία να κάνετε μια αίτηση σε ένα τελικό σημείο, όπως ένα URI HTTPS ή API που εκτίθεται ως υπηρεσία web. Περάσει για τα δεδομένα που απαιτείται για την ολοκλήρωση της εργασίας φόντο ως μέρος της αίτησης. Το τελικό σημείο ή μια υπηρεσία web ανοίγει την εργασία φόντου, η οποία χρησιμοποιεί τα δεδομένα ως είσοδο.

Τυπικές εργασίες που είναι κατάλληλες για κλήση βάσει συμβάντων παραδείγματα επεξεργασία εικόνας, ροές εργασίας, την αποστολή πληροφοριών σε υπηρεσίες απομακρυσμένης και αποστολή μηνυμάτων ηλεκτρονικού ταχυδρομείου προμήθεια νέων χρηστών σε multitenant εφαρμογές.

### <a name="schedule-driven-triggers"></a>Χρονοδιάγραμμα βάσει εναυσμάτων

Προγραμματισμός μέσω κλήσης χρησιμοποιεί χρονόμετρο για να ξεκινήσει η εργασία στο παρασκήνιο. Παραδείγματα χρήσης εναύσματα βάσει χρονοδιάγραμμα περιλαμβάνουν τα εξής:

- Χρονόμετρο που εκτελεί τοπικά μέσα από την εφαρμογή ή ως τμήμα του λειτουργικού συστήματος της εφαρμογής καλεί μια εργασία στο παρασκήνιο σε τακτική βάση.
- Χρονόμετρο που εκτελείται σε άλλη εφαρμογή ή μια υπηρεσία χρονομέτρησης όπως Azure χρονοδιάγραμμα, στέλνει μια πρόσκληση σε ένα API ή μια υπηρεσία web σε τακτική βάση. Το API ή μια υπηρεσία web ανοίγει την εργασία στο παρασκήνιο.
- Μια ξεχωριστή διεργασία ή εφαρμογή ξεκινά μια χρονομέτρου που προκαλεί την εργασία στο παρασκήνιο για να είναι δυνατή μόνο μία φορά μετά από μια συγκεκριμένη χρονική καθυστέρηση ή σε μια συγκεκριμένη χρονική στιγμή.

Τυπικές παραδείγματα εργασιών που είναι κατάλληλες για κλήση μέσω χρονοδιάγραμμα περιλαμβάνουν διαδικασίες επεξεργασίας δέσμης (όπως Ενημέρωση λιστών που σχετίζονται με προϊόντα για τους χρήστες με βάση τη συμπεριφορά πρόσφατες τους), εργασίες ρουτίνας επεξεργασίας δεδομένων (όπως ενημέρωση ευρετηρίων ή δημιουργία αθροιστικό αποτελέσματα), ανάλυση δεδομένων για καθημερινές εκθέσεις, εκκαθάριση διατήρησης δεδομένων και ελέγχους συνέπειας δεδομένων.

Εάν χρησιμοποιείτε μια εργασία βάσει χρονοδιάγραμμα που πρέπει να εκτελέσετε ως μια μεμονωμένη παρουσία, λάβετε υπόψη τα εξής:

- Εάν έχει κλιμακωθεί παρουσίας του υπολογισμού που εκτελείται το χρονοδιάγραμμα (όπως μια εικονική μηχανή χρησιμοποιώντας προγραμματισμένων εργασιών των Windows), θα έχετε πολλές παρουσίες των το χρονοδιάγραμμα εκτελείται. Αυτά θα μπορούσε να ξεκινήσετε πολλών παρουσιών της εργασίας.
- Εάν οι εργασίες που εκτελούνται για περισσότερο από την περίοδο μεταξύ χρονοδιάγραμμα συμβάντων, το χρονοδιάγραμμα μπορεί να ξεκινήσει μια άλλη παρουσία της εργασίας ενώ εκτελείται ακόμη στην προηγούμενη διαφάνεια.

## <a name="returning-results"></a>Επιστρέφει αποτελέσματα

Εργασίες φόντου ασύγχρονη εκτέλεση σε μια ξεχωριστή διεργασία ή ακόμα και σε διαφορετική θέση, από το περιβάλλον εργασίας Χρήστη ή τη διαδικασία που ενεργοποιείται η εργασία στο παρασκήνιο. Ιδανικά, εργασίες παρασκηνίου είναι λειτουργίες "fire και ξεχάσετε" και την πρόοδό τους εκτέλεσης δεν έχει καμία επίδραση στο περιβάλλον εργασίας Χρήστη του ή η διεργασία κλήσης. Αυτό σημαίνει ότι η διεργασία κλήσης δεν αναμονή για την ολοκλήρωση των εργασιών. Γι ' αυτό, αυτό δεν μπορεί να εντοπίσει αυτόματα όταν λήξει η εργασία.

Εάν χρειάζεστε μια εργασία στο παρασκήνιο για να επικοινωνήσετε με την εργασία κλήσης για να υποδείξετε πρόοδο ή την ολοκλήρωση, πρέπει να υλοποιήσετε ένα μηχανισμό για αυτό. Ορισμένα παραδείγματα είναι οι εξής:

- Γράψτε μια τιμή δείκτης κατάστασης με το χώρο αποθήκευσης που είναι προσβάσιμο για το περιβάλλον εργασίας Χρήστη ή καλούντος εργασία, το οποίο μπορούν να παρακολουθούν ή επιλέξτε αυτήν την τιμή όταν απαιτείται. Άλλα δεδομένα που πρέπει να επιστρέφει την εργασία στο παρασκήνιο για να τον καλούντα μπορούν να τεθούν σε τον ίδιο χώρο αποθήκευσης.
- Δημιουργήστε μια ουρά απάντηση που παρακολουθεί το περιβάλλον εργασίας Χρήστη ή τον καλούντα. Η εργασία στο παρασκήνιο να στείλετε μηνύματα στην ουρά που δηλώνουν την κατάσταση και ολοκλήρωση. Δεδομένα που πρέπει να επιστρέφει την εργασία στο παρασκήνιο για να τον καλούντα μπορούν να τεθούν σε τα μηνύματα. Εάν χρησιμοποιείτε Azure Service Bus, μπορείτε να χρησιμοποιήσετε τις ιδιότητες **τη** και **CorrelationId** για την υλοποίηση αυτήν τη δυνατότητα. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [συσχέτισης σε υπηρεσία Bus όπου μεσολαβούν ανταλλαγή μηνυμάτων](http://www.cloudcasts.net/devguide/Default.aspx?id=13029).
- Έκθεση ένα API ή τελικό σημείο από την εργασία φόντου που το περιβάλλον εργασίας Χρήστη ή καλούντος να αποκτήσετε πρόσβαση για τη λήψη πληροφοριών κατάστασης. Δεδομένα που πρέπει να επιστρέφει την εργασία στο παρασκήνιο για να τον καλούντα μπορεί να συμπεριληφθεί στην απάντηση.
- Έχετε την εργασία στο παρασκήνιο επιστροφή κλήσης στο περιβάλλον εργασίας Χρήστη ή καλούντος μέσω API για να υποδείξετε την κατάσταση σε προκαθορισμένο σημεία ή μετά την ολοκλήρωση. Αυτό μπορεί να μέσω συμβάντα που προκύπτουν τοπικά ή μέσω ενός μηχανισμού δημοσίευση και εγγραφής. Δεδομένα που πρέπει να επιστρέφει την εργασία στο παρασκήνιο για να τον καλούντα μπορούν να συμπεριληφθούν στο φορτίο αίτηση ή ένα συμβάν.

## <a name="hosting-environment"></a>Περιβάλλον φιλοξενίας

Μπορείτε να φιλοξενήσετε εργασίες στο παρασκήνιο, χρησιμοποιώντας μια περιοχή διαφορετική Azure πλατφόρμας:

- [**Azure Web Apps και WebJobs**](#azure-web-apps-and-webjobs). Μπορείτε να χρησιμοποιήσετε WebJobs την εκτέλεση προσαρμοσμένων εργασιών που βασίζεται σε μια περιοχή διαφορετικούς τύπους δέσμες ενεργειών ή εκτελέσιμο προγράμματα στο περιβάλλον του μια εφαρμογή web.
- [**Υπηρεσίες Cloud azure web και εργαζόμενου ρόλους**](#azure-cloud-services-web-and-worker-roles). Μπορείτε να συντάξετε κώδικα μέσα σε ένα ρόλο που εκτελείται ως μια εργασία στο παρασκήνιο.
- [**Azure εικονικές μηχανές**](#azure-virtual-machines). Εάν έχετε μια υπηρεσία των Windows ή θέλετε να χρησιμοποιήσετε το Χρονοδιάγραμμα εργασιών των Windows, είναι κοινά για τη φιλοξενία σας εργασίες στο παρασκήνιο μέσα σε μια αποκλειστική εικονική μηχανή.
- [**Azure δέσμης**](./batch/batch-technical-overview.md). Πρόκειται για μια υπηρεσία πλατφόρμα που προγραμματίζει την εργασία στενής υπολογισμού για να εκτελέσετε σε μια διαχειριζόμενη συλλογή εικονικές μηχανές και να αυτόματα κλίμακα τον υπολογισμό πόρους για να ανταποκρίνονται στις ανάγκες των εργασιών σας.

Οι παρακάτω ενότητες περιγράφουν κάθε μία από αυτές τις επιλογές με περισσότερες λεπτομέρειες και περιλαμβάνει θέματα που πρέπει να σας βοηθήσει να επιλέξετε την κατάλληλη επιλογή.

## <a name="azure-web-apps-and-webjobs"></a>Azure Web Apps και WebJobs

Μπορείτε να χρησιμοποιήσετε Azure WebJobs την εκτέλεση προσαρμοσμένων εργασιών ως εργασίες στο παρασκήνιο μέσα σε μια εφαρμογή Web της Azure. WebJobs εκτελείται στο περιβάλλον της εφαρμογής web ως συνεχής διαδικασία. WebJobs εκτελούνται επίσης ως απόκριση σε ένα συμβάν ενεργοποίησης από το χρονοδιάγραμμα Azure ή εξωτερικοί παράγοντες, όπως οι αλλαγές στο χώρο αποθήκευσης αντικειμένων blob και ουρές μηνυμάτων. Εργασίες να είναι αποτελέσματα διακοπεί ζήτηση και τερματισμός ομαλά. Εάν αποτύχει μια συνεχώς εκτελείται WebJob, γίνεται αυτόματα επανεκκίνηση. Ενέργειες "Επανάληψη" και το σφάλμα είναι δυνατό να ρυθμιστούν.

Όταν ρυθμίζετε τις παραμέτρους μιας WebJob:

- Εάν θέλετε η εργασία να απαντούν σε ένα έναυσμα βάσει συμβάντων, θα πρέπει να την ορίσετε ως **εκτελείται συνεχώς**. Η δέσμη ενεργειών ή το πρόγραμμα αποθηκεύεται στο φάκελο που ονομάζεται τοποθεσία/wwwroot/app_data/εργασίες/συνεχόμενη.
- Εάν θέλετε η εργασία να απαντήσετε σε ένα έναυσμα βάσει χρονοδιάγραμμα, θα πρέπει να την ορίσετε ως **εκτελείται σε ένα χρονοδιάγραμμα**. Η δέσμη ενεργειών ή το πρόγραμμα αποθηκεύεται στο φάκελο που ονομάζεται τοποθεσία/wwwroot/app_data/εργασίες/ενεργοποίησε.
- Εάν επιλέξετε την επιλογή **εκτελείται σε ζήτηση** όταν ρυθμίζετε τις παραμέτρους μιας εργασίας, αυτό θα εκτελέσει τον ίδιο κωδικό με την επιλογή **εκτελείται σε ένα χρονοδιάγραμμα** κατά την εκκίνηση.

Εκτελέστε το Azure WebJobs εντός του φίλτρου της εφαρμογής web. Αυτό σημαίνει ότι μπορούν να έχουν πρόσβαση μεταβλητές περιβάλλοντος και να κάνετε κοινή χρήση πληροφοριών, όπως συμβολοσειρές σύνδεσης, με την εφαρμογή web. Η εργασία έχει πρόσβαση σε το μοναδικό αναγνωριστικό του υπολογιστή που εκτελεί την εργασία. Συμβολοσειρά σύνδεσης με το όνομα **AzureWebJobsStorage** παρέχει πρόσβαση σε ουρές Azure χώρο αποθήκευσης αντικειμένων blob και πίνακες για τα δεδομένα των εφαρμογών και πρόσβαση σε υπηρεσία Bus για την ανταλλαγή μηνυμάτων και επικοινωνίας. Η συμβολοσειρά σύνδεσης με το όνομα **AzureWebJobsDashboard** παρέχει πρόσβαση στα αρχεία καταγραφής ενέργεια εργασίας.

Azure WebJobs έχουν τα εξής χαρακτηριστικά:

- **Ασφάλεια**: WebJobs και προστατεύονται από τα διαπιστευτήρια ανάπτυξη της εφαρμογής web.
- **Υποστηριζόμενοι τύποι αρχείων**: μπορείτε να ορίσετε WebJobs χρησιμοποιώντας δέσμες ενεργειών εντολών. (Cmd.), αρχεία δέσμης (.bat), δεσμών ενεργειών του PowerShell (.ps1), πάρτι δεσμών ενεργειών κελύφους (.sh), οι δέσμες ενεργειών PHP (.php), δεσμών ενεργειών Python (.py), κώδικα JavaScript (.js) και εκτελέσιμο προγράμματα (.exe, .jar και άλλα).
- **Ανάπτυξη**: μπορείτε να αναπτύξετε τις δέσμες ενεργειών και εκτελέσιμα αρχεία χρησιμοποιώντας την πύλη Azure, χρησιμοποιώντας [WebJobsVs](https://visualstudiogallery.msdn.microsoft.com/f4824551-2660-4afa-aba1-1fcc1673c3d0) στο πρόσθετο για το Visual Studio ή το [Visual Studio 2013 Update 4](http://www.visualstudio.com/news/vs2013-update4-rc-vs) (μπορείτε να δημιουργήσετε και να αναπτύξετε με αυτήν την επιλογή), χρησιμοποιώντας το [Azure WebJobs SDK](./app-service-web/websites-dotnet-webjobs-sdk-get-started.md)ή με την αντιγραφή τους απευθείας στο τις ακόλουθες θέσεις:
  - Για την ενεργοποίηση εκτέλεσης: τοποθεσία/wwwroot/app_data/εργασίες/ενεργοποίησε / {εργασία όνομα}
  - Συνεχής εκτέλεση: τοποθεσία/wwwroot/app_data/εργασίες/συνεχής / {εργασία όνομα}
- **Καταγραφή**: Console.Out εκλαμβάνεται (σήμανση) ως ΠΛΗΡΟΦΟΡΊΕΣ. Console.Error αντιμετωπίζεται ως σφάλμα. Μπορείτε να αποκτήσετε πρόσβαση σε πληροφορίες παρακολούθησης και τα Διαγνωστικά χρησιμοποιώντας την πύλη του Azure. Μπορείτε να κάνετε λήψη αρχείων καταγραφής απευθείας από την τοποθεσία. Αποθηκεύονται στις ακόλουθες θέσεις:
  - Για την ενεργοποίηση εκτέλεσης: Vfs/δεδομένων/εργασίες/ενεργοποίησε/όνομα_εργασίας
  - Συνεχής εκτέλεση: Vfs/δεδομένων/εργασίες/συνεχής/όνομα_εργασίας
- **Ρύθμιση παραμέτρων**: μπορείτε να ρυθμίσετε τις παραμέτρους WebJobs, χρησιμοποιώντας την πύλη, REST API και PowerShell. Μπορείτε να χρησιμοποιήσετε ένα αρχείο ρύθμισης παραμέτρων με το όνομα settings.job στον ίδιο ριζικό κατάλογο ως εργασία δέσμης ενεργειών για να παρέχετε πληροφορίες ρύθμισης παραμέτρων για μια εργασία. Για παράδειγμα:
  - {"stopping_wait_time": 60}
  - {"is_singleton": true}

### <a name="considerations"></a>Ζητήματα

- Από προεπιλογή, WebJobs κλίμακα με την εφαρμογή web. Ωστόσο, μπορείτε να ρυθμίσετε εργασίες να εκτελούνται σε μία μόνο παρουσία, ορίζοντας την ιδιότητα ρύθμισης παραμέτρων **is_singleton** στην **τιμή true**. Μία παρουσία WebJobs είναι χρήσιμες για τις εργασίες που δεν θέλετε για κλιμάκωση ή εκτέλεση ως ταυτόχρονη πολλών παρουσιών, όπως ξεκινήσετε, ανάλυση δεδομένων και παρόμοιες εργασίες.
- Για να ελαχιστοποιήσετε την επίδραση των εργασιών για την απόδοση της εφαρμογής web, εξετάστε το ενδεχόμενο δημιουργίας εντατική μια κενή παρουσία Azure Web App σε ένα νέο πρόγραμμα εφαρμογής υπηρεσίας κεντρικού υπολογιστή WebJobs που μπορεί να είναι μεγάλο εκτελείται ή πόρο.

### <a name="more-information"></a>Περισσότερες πληροφορίες

- [Azure WebJobs προτεινόμενα πόρους](./app-service-web/websites-webjobs-resources.md) παραθέτει τα πολλά χρήσιμους πόρους, λήψεις και δείγματα για WebJobs.

## <a name="azure-cloud-services-web-and-worker-roles"></a>Azure υπηρεσίες Cloud web και εργαζόμενου ρόλων

Μπορείτε να εκτελέσετε εργασίες στο παρασκήνιο μέσα σε ένα ρόλο web ή σε ένα ξεχωριστό εργαζόμενου ρόλο. Όταν θέλετε να αποφασίσετε αν θέλετε να χρησιμοποιήσετε ένα ρόλο εργαζόμενου, εξετάστε το ενδεχόμενο να κλιμάκωση και απαιτήσεις ελαστικότητας, διάρκεια ζωής εργασίας, αφήστε cadence, ασφαλείας, ανοχή σφαλμάτων, διένεξης, πολυπλοκότητα και η λογική αρχιτεκτονική. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Τον υπολογισμό μοτίβο ενοποίηση πόρων](http://msdn.microsoft.com/library/dn589778.aspx).

Υπάρχουν πολλοί τρόποι για να υλοποιήσετε φόντο εργασίες μέσα σε ένα ρόλο υπηρεσίες Cloud:

- Δημιουργήστε μια εφαρμογή της κλάσης **RoleEntryPoint** στο ρόλο και χρησιμοποιήστε τις μεθόδους για να εκτελέσετε εργασίες στο παρασκήνιο. Οι εργασίες που εκτελούνται στο περιβάλλον της WaIISHost.exe. Μπορούν να χρησιμοποιήσουν τη μέθοδο **GetSetting** της κλάσης **CloudConfigurationManager** για τη φόρτωση ρυθμίσεων παραμέτρων. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [κύκλου ζωής (υπηρεσίες Cloud)](#lifecycle-cloud-services).
- Χρησιμοποιήστε τις εργασίες εκκίνησης για να εκτελέσετε εργασίες στο παρασκήνιο, κατά την εκκίνηση της εφαρμογής. Για να επιβάλετε τις εργασίες να συνεχίσει να εκτελείται στο παρασκήνιο, ορίστε την ιδιότητα **Τύπος εργασίας** **φόντο** (Εάν το κάνετε αυτό, η διαδικασία εκκίνησης εφαρμογών θα διακοπή και περιμένετε για την εργασία για να ολοκληρώσετε). Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Εκτέλεση εργασιών εκκίνησης στο Azure](./cloud-services/cloud-services-startup-tasks.md).
- Χρήση του SDK WebJobs για την υλοποίηση φόντο εργασίες όπως WebJobs που έχουν ξεκινήσει ως εργασία εκκίνησης. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Γρήγορα αποτελέσματα με το SDK WebJobs Azure](./app-service-web/websites-dotnet-webjobs-sdk-get-started.md).
- Χρησιμοποιήστε μια εργασία εκκίνησης για να εγκαταστήσετε μια υπηρεσία των Windows που εκτελείται από μία ή περισσότερες εργασίες στο παρασκήνιο. Πρέπει να μπορείτε να ορίσετε την ιδιότητα **Τύπος εργασίας** **φόντο** , έτσι ώστε η υπηρεσία εκτελείται στο παρασκήνιο. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Εκτέλεση εργασιών εκκίνησης στο Azure](./cloud-services/cloud-services-startup-tasks.md).

### <a name="running-background-tasks-in-the-web-role"></a>Εκτέλεση εργασιών φόντου στο ρόλο web

Το βασικό πλεονέκτημα των εργασιών φόντου που εκτελούνται στο ρόλο web είναι την αποθήκευση σε φιλοξενίας κόστους, επειδή δεν υπάρχει καμία απαίτηση για την ανάπτυξη πρόσθετων ρόλων.

### <a name="running-background-tasks-in-a-worker-role"></a>Εκτέλεση εργασιών φόντου σε ένα ρόλο εργαζόμενου

Εκτέλεση εργασιών φόντο σε ένα ρόλο εργασίας έχει αρκετά πλεονεκτήματα:

- Σας επιτρέπει να διαχειριστείτε κλιμάκωση ξεχωριστά για κάθε τύπο του ρόλου. Για παράδειγμα, ίσως χρειαστεί περισσότερες παρουσίες του ρόλου web για την υποστήριξη ο τρέχων φόρτος, αλλά λιγότερες παρουσίες του ρόλου εργασίας που εκτελεί εργασίες στο παρασκήνιο. Από την κλίμακα του φόντου παρουσίες υπολογισμού εργασίας ξεχωριστά από τους ρόλους περιβάλλοντος εργασίας Χρήστη, μπορείτε να μειώσετε φιλοξενίας κόστος, διατηρώντας παράλληλα αποδεκτές επιδόσεις.
- Το άφθονους το επιβάρυνσης επεξεργασίας για εργασίες στο παρασκήνιο από το ρόλο του web. Το ρόλο web που παρέχει το περιβάλλον εργασίας Χρήστη μπορεί να παραμείνει αποκρίνεται και μπορεί να σημαίνει λιγότερες παρουσίες απαιτούνται για την υποστήριξη μια δεδομένη ένταση των αιτήσεων από τους χρήστες.
- Σας επιτρέπει να υλοποιήσετε διαχωρισμό των ανησυχίες. Κάθε τύπος ρόλου να υλοποιήσετε ένα συγκεκριμένο σύνολο σαφώς καθορισμένα και σχετικές εργασίες. Έτσι, σχεδίαση και τη διατήρηση του κώδικα πιο εύκολη επειδή υπάρχει λιγότερη αλληλεξάρτηση κώδικας και οι λειτουργίες μεταξύ κάθε ρόλο.
- Μπορεί να σας βοηθήσει να απομονώσετε διεργασιών διάκριση πεζών-κεφαλαίων και δεδομένων. Για παράδειγμα, ρόλους web που υλοποιεί το περιβάλλον εργασίας Χρήστη δεν χρειάζεται να έχουν πρόσβαση σε δεδομένα τα οποία γίνεται και ελέγχονται από ένα ρόλο εργασίας. Αυτό μπορεί να είναι χρήσιμη σε ενίσχυση ασφάλεια, ειδικά όταν χρησιμοποιείτε ένα μοτίβο όπως το [Μοτίβο πύλης](http://msdn.microsoft.com/library/dn589793.aspx).  

### <a name="considerations"></a>Ζητήματα

Λάβετε υπόψη τα εξής σημεία κατά την επιλογή του τρόπου και θέσης για την ανάπτυξη εργασίες στο παρασκήνιο, όταν χρησιμοποιείτε τις υπηρεσίες Cloud web και εργαζόμενου ρόλους:

- Φιλοξενία εργασιών φόντου σε έναν υπάρχοντα ρόλο web να αποθηκεύσετε το κόστος των ένα ρόλο ξεχωριστή εργασίας μόνο για αυτές τις εργασίες που εκτελούνται. Ωστόσο, είναι πιθανό να επηρεάσει την απόδοση και τη διαθεσιμότητα της εφαρμογής, εάν υπάρχει διένεξη για επεξεργασία και άλλους πόρους. Χρησιμοποιώντας ένα ρόλο ξεχωριστή εργαζόμενου προστατεύει το ρόλο του web από την επίδραση των εργασιών μεγάλη διάρκεια εκτέλεσης ή πόρους φόντο.
- Εάν φιλοξενείτε εργασίες στο παρασκήνιο, χρησιμοποιώντας την κλάση **RoleEntryPoint** , μπορείτε εύκολα να μετακινήσετε αυτό σε έναν άλλο ρόλο. Για παράδειγμα, εάν δημιουργείτε την κλάση σε ένα ρόλο web και αργότερα αποφασίσετε ότι χρειάζεστε για να εκτελέσετε τις εργασίες σε ένα ρόλο εργασίας, μπορείτε να μετακινήσετε την εφαρμογή εκπαιδευτικών **RoleEntryPoint** σε το ρόλο εργασίας.
- Εργασίες εκκίνησης έχουν σχεδιαστεί για να εκτελέσετε ένα πρόγραμμα ή μια δέσμη ενεργειών. Για την ανάπτυξη μιας εργασίας φόντου ως εκτελέσιμο πρόγραμμα μπορεί να είναι πιο δύσκολη, ειδικά εάν απαιτεί επίσης ανάπτυξη του εξαρτημένες συγκροτήσεις. Ίσως είναι ευκολότερο να αναπτύξετε και να χρησιμοποιήσετε μια δέσμη ενεργειών για να ορίσετε μια εργασία στο παρασκήνιο όταν χρησιμοποιείτε εργασίες εκκίνησης.
- Εξαιρέσεις που προκαλούν μια εργασία στο παρασκήνιο αποτυχία έχουν διαφορετικές επιπτώσεις, ανάλογα με τον τρόπο που φιλοξενούνται:
  - Εάν χρησιμοποιείτε την προσέγγιση κλάση **RoleEntryPoint** , αποτυχίας εργασίας θα προκαλέσει το ρόλο για να ξεκινήσετε ξανά, έτσι ώστε να ξεκινά αυτόματα πάλι την εργασία. Αυτό μπορεί να επηρεάσει τη διαθεσιμότητα της εφαρμογής. Για να αποτρέψετε αυτό το πρόβλημα, βεβαιωθείτε ότι περιλαμβάνετε ισχυρό εξαίρεση χειρισμός μέσα σε τάξη **RoleEntryPoint** και όλες τις εργασίες παρασκηνίου. Χρήση κωδικού για να ξεκινήσετε ξανά τις εργασίες που αποτύχει όταν αυτό είναι κατάλληλο και δημιουργήστε την εξαίρεση για να επανεκκινήσετε το ρόλο μόνο εάν δεν μπορείτε ομαλά να ανακτήσετε από την αποτυχία στον κωδικό σας.
  - Εάν χρησιμοποιείτε εργασίες εκκίνησης, είστε υπεύθυνοι για τη διαχείριση της εκτέλεσης της εργασίας και ο έλεγχος εάν αποτύχει.
- Διαχείριση και παρακολούθηση εργασιών εκκίνησης είναι δυσκολότερη από τη χρήση της προσέγγισης κλάσης **RoleEntryPoint** . Ωστόσο, το SDK WebJobs Azure περιλαμβάνει έναν πίνακα εργαλείων για να διευκολύνετε τη Διαχείριση WebJobs που πραγματοποιείτε εργασίες εκκίνησης.

### <a name="more-information"></a>Περισσότερες πληροφορίες

- [Τον υπολογισμό μοτίβο ενοποίηση πόρων](http://msdn.microsoft.com/library/dn589778.aspx)
- [Γρήγορα αποτελέσματα με το SDK WebJobs Azure](./app-service-web/websites-dotnet-webjobs-sdk-get-started.md)

## <a name="azure-virtual-machines"></a>Azure εικονικές μηχανές

Εργασίες στο παρασκήνιο μπορεί να εφαρμοστεί με τον τρόπο που αποτρέπει τις αναπτύσσεται σε εφαρμογές Web Azure ή υπηρεσίες Cloud ή αυτές τις επιλογές ενδέχεται να μην είναι εύκολη. Τυπικά παραδείγματα είναι οι υπηρεσίες Windows, και βοηθητικά προγράμματα τρίτων και εκτελέσιμο προγράμματα. Ένα άλλο παράδειγμα μπορεί να είναι προγράμματα που έχουν γραφτεί για ένα περιβάλλον εκτέλεσης που είναι διαφορετική από τη φιλοξενία της εφαρμογής. Για παράδειγμα, ίσως είναι ένα πρόγραμμα Unix ή Linux που θέλετε για την εκτέλεση από μια εφαρμογή Windows ή .NET. Μπορείτε να επιλέξετε από μια ποικιλία λειτουργικά συστήματα για μια εικονική μηχανή Azure και να εκτελέσετε την υπηρεσία ή το εκτελέσιμο αρχείο σε αυτόν τον υπολογιστή εικονική.

Για να σας βοηθήσει να επιλέξετε πότε να χρησιμοποιήσετε εικονικές μηχανές, ανατρέξτε στο θέμα [υπηρεσίες εφαρμογή Azure, τις υπηρεσίες Cloud και εικονικές μηχανές σύγκρισης](./app-service-web/choose-web-site-cloud-service-vm.md). Για πληροφορίες σχετικά με τις επιλογές για εικονικές μηχανές, ανατρέξτε στο θέμα [εικονική μηχανή και υπηρεσία Cloud μεγέθη για Azure](http://msdn.microsoft.com/library/azure/dn197896.aspx). Για περισσότερες πληροφορίες σχετικά με τα λειτουργικά συστήματα και προ-δομημένες εικόνες που είναι διαθέσιμες για εικονικές μηχανές, ανατρέξτε στο θέμα [Εικονικές μηχανές Azure Marketplace](https://azure.microsoft.com/gallery/virtual-machines/).

Για να ξεκινήσετε την εργασία φόντο σε έναν ξεχωριστό εικονικό υπολογιστή, έχετε μια περιοχή επιλογές:

- Μπορείτε να εκτελέσετε την εργασία στο απαιτήσεων απευθείας από την εφαρμογή σας με την αποστολή πρόσκλησης σε ένα τελικό σημείο που εκθέτει την εργασία. Αυτό μεταφέρει σε όλα τα δεδομένα που απαιτεί την εργασία. Αυτό το τελικό σημείο ενεργοποιεί την εργασία.
- Μπορείτε να ρυθμίσετε τις παραμέτρους της εργασίας για να εκτελεστεί σε ένα χρονοδιάγραμμα, χρησιμοποιώντας ένα χρονοδιάγραμμα ή χρονομέτρου που είναι διαθέσιμη στο επιλεγμένο λειτουργικό σύστημα. Για παράδειγμα, στα Windows, μπορείτε να χρησιμοποιήσετε Χρονοδιάγραμμα εργασιών των Windows για να εκτελέσετε τις δέσμες ενεργειών και τις εργασίες. Εναλλακτικά, εάν έχετε εγκαταστήσει στον υπολογιστή εικονικές τον SQL Server, μπορείτε να χρησιμοποιήσετε τον παράγοντα SQL Server για την εκτέλεση δεσμών ενεργειών και εργασίες.
- Μπορείτε να χρησιμοποιήσετε το χρονοδιάγραμμα Azure για να ξεκινήσετε την εργασία με την προσθήκη ενός μηνύματος σε μια ουρά που παρακολουθεί την εργασία ή στέλνοντας μια αίτηση για ένα API που εκθέτει την εργασία.

Ανατρέξτε στην προηγούμενη ενότητα [εναυσμάτων](#triggers) για περισσότερες πληροφορίες σχετικά με το πώς μπορείτε να ξεκινήσετε εργασίες στο παρασκήνιο.  

### <a name="considerations"></a>Ζητήματα

Όταν θέλετε να αποφασίσετε αν θέλετε να αναπτύξετε το φόντο εργασίες σε μια εικονική μηχανή Azure, λάβετε υπόψη τα εξής σημεία:

- Φιλοξενίας εργασίες φόντου σε ένα ξεχωριστό Azure εικονική μηχανή παρέχει ευελιξία και σας επιτρέπουν να ακριβή έλεγχο προετοιμασίας, εκτέλεσης, τον προγραμματισμό και εκχώρηση πόρων. Ωστόσο, θα αυξήσει κόστος χρόνου εκτέλεσης εάν μια εικονική μηχανή πρέπει να αναπτυχθούν μόνο για να εκτελέσετε εργασίες στο παρασκήνιο.
- Δεν υπάρχει καμία εγκατάσταση για να παρακολουθείτε τις εργασίες στην πύλη του Azure και δεν υπάρχει δυνατότητα αυτοματοποιημένη επανεκκίνηση για τις εργασίες αποτυχίας--Παρόλο που μπορείτε να παρακολουθείτε την κατάσταση βασικές η εικονική μηχανή και να διαχειρίζεστε, χρησιμοποιώντας τα [Cmdlet διαχείρισης υπηρεσιών Azure](http://msdn.microsoft.com/library/azure/dn495240.aspx). Ωστόσο, υπάρχουν χωρίς εγκαταστάσεις για να ελέγξετε τις διεργασίες και νήματα στον κόμβο υπολογισμού. Συνήθως, χρησιμοποιώντας μια εικονική μηχανή θα απαιτούν επιπλέον προσπάθειας για την υλοποίηση μηχανισμό που συλλέγει δεδομένα από οργάνων στην εργασία και από το λειτουργικό σύστημα του υπολογιστή εικονική. Μια λύση που μπορεί να είναι κατάλληλες είναι να χρησιμοποιήσετε το [Πακέτο διαχείρισης κέντρου συστήματος για το Azure](http://technet.microsoft.com/library/gg276383.aspx).
- Μπορείτε να δημιουργήσετε παρακολούθησης καθετήρες που εκτίθενται μέσω HTTP τελικά σημεία. Ο κωδικός για αυτές τις καθετήρες θα μπορούσε να εκτελέσετε έλεγχοι εύρυθμης λειτουργίας, συλλέγει πληροφορίες λειτουργίας και στατιστικά στοιχεία--ή συρραφή πληροφοριών σφάλματος και να τα επαναφέρετε μια εφαρμογή διαχείρισης. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Μοτίβο παρακολούθηση εύρυθμης λειτουργίας τελικού σημείου](http://msdn.microsoft.com/library/dn589789.aspx).

### <a name="more-information"></a>Περισσότερες πληροφορίες

- [Εικονικές μηχανές](https://azure.microsoft.com/services/virtual-machines/) στο Azure
- [Συνήθεις Ερωτήσεις Azure εικονικές μηχανές](virtual-machines/virtual-machines-linux-classic-faq.md)

## <a name="design-considerations"></a>Θέματα σχεδίασης

Υπάρχουν πολλές θεμελιώδεις παράγοντες που πρέπει να λάβετε υπόψη κατά τη σχεδίαση εργασίες στο παρασκήνιο. Οι παρακάτω ενότητες περιγράφουν διαμερισμάτων, διενέξεις και συντονισμό.

## <a name="partitioning"></a>Δημιουργία διαμερισμάτων

Εάν αποφασίσετε να συμπεριλάβετε εργασίες στο παρασκήνιο μέσα σε μια υπάρχουσα περίοδο λειτουργίας υπολογισμού (όπως μια εφαρμογή web, ρόλου web, υπάρχοντα ρόλο εργαζόμενου ή εικονική μηχανή), πρέπει να εξετάσετε τον τρόπο αυτό θα επηρεάσει τα χαρακτηριστικά ποιότητα της παρουσίας του υπολογισμού και το φόντο η εργασία. Τους παρακάτω παράγοντες θα σας βοηθήσουν να αποφασίσετε εάν θα τοποθετήσει τις εργασίες με την υπάρχουσα παρουσία υπολογισμού ή να διαχωρίσετε τα σε μια παρουσία ξεχωριστή υπολογισμού:

- **Διαθεσιμότητα**: εργασίες στο παρασκήνιο ίσως να μην χρειάζεται να έχουν το ίδιο επίπεδο διαθεσιμότητας με άλλα τμήματα της εφαρμογής, ιδίως το περιβάλλον εργασίας Χρήστη και άλλα τμήματα που αφορούν απευθείας στο παρέμβαση του χρήστη. Εργασίες στο παρασκήνιο μπορεί να είναι πιο ανοχή σφαλμάτων λανθάνοντος χρόνου, αποτυχίες επαναλήφθηκαν σύνδεσης, και τους παράγοντες που επηρεάζουν διαθεσιμότητα επειδή οι λειτουργίες μπορούν να τοποθετηθούν σε ουρά. Ωστόσο, πρέπει να υπάρχει αρκετή χωρητικότητα ώστε να μην το αντίγραφο ασφαλείας των αιτήσεων που θα μπορούσε να αποκλείσετε ουρές και επηρεάζουν την εφαρμογή ως σύνολο.
- **Κλιμάκωση**: φόντο εργασίες είναι πιθανό να έχουν διαφορετική κλιμάκωση απαίτηση από το περιβάλλον εργασίας Χρήστη και τη διαδραστική τμήματα της εφαρμογής. Μπορεί να χρειαστεί να πληροί κορυφών ζήτηση, ενώ μπορεί να συμπληρώνονται φόντου εκκρεμείς εργασίες κατά τη διάρκεια της διαθεσιμότητας λιγότερο από σε μικρότερο κλίμακας περιβάλλον εργασίας Χρήστη του αριθμού των εμφανίσεων υπολογισμού.
- **Υποστηρίζεται**: Αποτυχία μιας παρουσίας υπολογισμού που μόλις φιλοξενεί εργασίες στο παρασκήνιο ίσως να μην επηρεάσουν υποστεί την εφαρμογή, όπως το συνολικό εάν οι αιτήσεις για αυτές τις εργασίες μπορούν να στην ουρά ή αναβληθεί μέχρι η εργασία είναι διαθέσιμη ξανά. Εάν η παρουσία υπολογισμού ή/και εργασίες μπορεί να γίνει επανεκκίνηση μέσα σε ένα κατάλληλο χρονικό διάστημα, μπορεί να δεν επηρεάζονται οι χρήστες της εφαρμογής.
- **Ασφάλεια**: εργασίες στο παρασκήνιο μπορεί να έχει τις απαιτήσεις ασφαλείας διαφορετικό ή περιορισμούς σε σχέση με το περιβάλλον εργασίας Χρήστη ή άλλα τμήματα της εφαρμογής. Χρησιμοποιώντας μια παρουσία ξεχωριστή υπολογισμού, μπορείτε να καθορίσετε ένα περιβάλλον διαφορετικό ασφαλείας για τις εργασίες. Μπορείτε επίσης να χρησιμοποιήσετε μοτίβα όπως πύλης για την απομόνωση τις παρουσίες υπολογισμού φόντου από το περιβάλλον εργασίας Χρήστη για να μεγιστοποιήσετε ασφάλειας και διαχωρισμού.
- **Απόδοση**: μπορείτε να επιλέξετε τον τύπο της παρουσίας υπολογισμού για εργασίες φόντο σε συγκεκριμένα match απαιτήσεις για τις επιδόσεις των εργασιών. Αυτό μπορεί να σημαίνει χρήση λιγότερο ακριβό επιλογής υπολογισμού εάν οι εργασίες δεν απαιτούν τις ίδιες δυνατότητες επεξεργασίας ως το περιβάλλον εργασίας Χρήστη ή μια μεγαλύτερη παρουσία εάν χρειάζονται πρόσθετη χωρητικότητα και πόρους.
- **Διαχειρισιμότητα**: εργασίες στο παρασκήνιο μπορεί να έχει ένα διαφορετικό ρυθμό ανάπτυξης και από τον κώδικα της εφαρμογής κύριο ή το περιβάλλον εργασίας Χρήστη. Για την ανάπτυξη τους σε ένα ξεχωριστό υπολογισμού παρουσία μπορεί να απλοποιήσει ενημερώσεις και διαχείρισης εκδόσεων.
- **Κόστος**: Προσθήκη τον υπολογισμό παρουσίες να εκτελέσει φόντου εργασίες αυξάνεται φιλοξενίας κόστους. Θα πρέπει να εξετάσετε προσεκτικά το συσχετισμό μεταξύ πρόσθετη χωρητικότητα και αυτές τις επιπλέον κόστους.

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [επικεφαλής εκλογής](http://msdn.microsoft.com/library/dn568104.aspx) και [Κάθε μοτίβα καταναλωτών](http://msdn.microsoft.com/library/dn568101.aspx).

## <a name="conflicts"></a>Διενέξεις

Εάν έχετε πολλές παρουσίες μιας εργασίας φόντου, είναι πιθανό ότι θα άσκησης ανταγωνισμού για πρόσβαση σε πόρους και υπηρεσίες, όπως βάσεις δεδομένων και χώρου αποθήκευσης. Ταυτόχρονη πρόσβαση σε αυτό μπορεί να οδηγήσει σε διένεξη πόρων, τα οποία ενδέχεται να προκαλέσουν διενέξεις σε διαθεσιμότητα των υπηρεσιών και την ακεραιότητα των δεδομένων στο χώρο αποθήκευσης. Μπορείτε να επιλύσετε διένεξης πόρων, χρησιμοποιώντας μια απαισιόδοξες locking προσέγγιση. Αυτό αποτρέπει την κάθε παρουσίες μιας εργασίας από ταυτόχρονα πρόσβαση σε μια υπηρεσία ή να καταστρέψει δεδομένα.

Μια άλλη προσέγγιση για την επίλυση διενέξεων είναι να ορίσετε εργασίες στο παρασκήνιο ως singleton, ώστε να υπάρχει μόνο μία ποτέ παρουσία εκτελείται. Ωστόσο, καταργεί την αξιοπιστία και επιδόσεις πλεονεκτήματα που μπορούν να παρέχουν μια ρύθμιση παραμέτρων παρουσίας πολλαπλάσιο. Αυτό ισχύει ιδίως εάν το περιβάλλον εργασίας Χρήστη να παρέχετε επαρκή εργασίας για να διατηρήσετε απασχολημένος περισσότερες από μία εργασία στο παρασκήνιο.

Είναι απαραίτητο για να βεβαιωθείτε ότι η εργασία στο παρασκήνιο αυτόματα να κάνετε επανεκκίνηση και ότι έχει επαρκή ικανότητα αντιμετώπισης των κορυφών ζήτηση. Μπορείτε να επιτύχετε αυτό εκχωρώντας μια παρουσία υπολογισμού με επαρκείς πόρους, με την εφαρμογή μηχανισμό ουράς που μπορεί να αποθηκεύσει αιτήσεις για εκτέλεση αργότερα, όταν ζήτηση μειώνει ή χρησιμοποιώντας ένα συνδυασμό από αυτές τις τεχνικές.

## <a name="coordination"></a>Συντονισμό

Οι εργασίες φόντου μπορεί να είναι σύνθετη και ενδέχεται να απαιτείται η πολλές μεμονωμένες εργασίες να εκτελεί να παράγει ένα αποτέλεσμα ή να πληροί όλες τις απαιτήσεις. Είναι συνηθισμένο σε αυτά τα σενάρια για να διαιρέσετε την εργασία σε μικρότερο discreet βημάτων ή δευτερεύουσες εργασίες που μπορεί να εκτελεστεί από τους καταναλωτές πολλών. Multistep εργασίες μπορεί να είναι πιο αποτελεσματική και πιο ευέλικτη επειδή μεμονωμένα βήματα μπορεί να είναι με δυνατότητα επανάληψης χρήσης σε πολλά έργα. Είναι επίσης εύκολη η προσθήκη, κατάργηση ή τροποποίηση της σειράς των βημάτων.

Συντονισμό πολλές εργασίες και τα βήματα μπορεί να δύσκολη, αλλά υπάρχουν τρία κοινά μοτίβα που μπορείτε να χρησιμοποιήσετε για να καθοδηγήσετε την εφαρμογή μιας λύσης:

- **Decomposing μια εργασία σε πολλά βήματα με δυνατότητα επανάληψης χρήσης**. Μια εφαρμογή μπορεί να σας ζητηθεί να εκτελέσετε διάφορες εργασίες διαφορετικές πολυπλοκότητα στις πληροφορίες που επεξεργάζεται. Μπορεί να είναι μια απλή, αλλά μη ευέλικτος προσέγγιση για την εφαρμογή αυτής της εφαρμογής για να εκτελέσετε αυτήν τη διαδικασία ως μονολιθικό λειτουργική μονάδα. Ωστόσο, αυτή η προσέγγιση είναι πιθανό να μειώσετε τις ευκαιρίες για επανασχεδιασμός προγράμματος του κώδικα, βελτιστοποιώντας τον ή εκ νέου χρήσης εάν απαιτούνται τμήματα της ίδιας επεξεργασίας σε κάποιο άλλο σημείο μέσα από την εφαρμογή. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [δίαυλοι και φίλτρα μοτίβο](http://msdn.microsoft.com/library/dn568100.aspx).
- **Διαχείριση εκτέλεσης των βημάτων για μια εργασία**. Μια εφαρμογή μπορεί να εκτελέσετε εργασίες που αποτελούν ορισμένα βήματα (ορισμένες από τις οποίες μπορεί να ενεργοποιήσει τις υπηρεσίες απομακρυσμένης ή πρόσβασης σε απομακρυσμένους πόρους). Τα μεμονωμένα βήματα μπορεί να είναι ανεξάρτητα μεταξύ τους, αλλά αυτές είναι orchestrated από τη λογική εφαρμογής που υλοποιεί την εργασία. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Μοτίβο επόπτη παράγοντας χρονοδιαγράμματος](http://msdn.microsoft.com/library/dn589780.aspx).
- **Διαχείριση ανάκτησης για εργασία τα βήματα που αποτύχει**. Ίσως χρειαστεί μια εφαρμογή για να αναιρέσετε την εργασία που εκτελείται από μια σειρά από βήματα (το οποίο ορίζουν από κοινού μια συνεπή τελικά πράξη) Εάν ένα ή περισσότερα από τα βήματα αποτύχει. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Παράγωγων μοτίβο συναλλαγή](http://msdn.microsoft.com/library/dn589804.aspx).

## <a name="lifecycle-cloud-services"></a>Κύκλος ζωής (υπηρεσίες Cloud)

 Εάν αποφασίσετε να εφαρμόσετε τις εργασίες φόντο για τις υπηρεσίες Cloud εφαρμογές που χρησιμοποιούν το web και εργαζόμενου ρόλους, χρησιμοποιώντας την κλάση **RoleEntryPoint** , είναι σημαντικό να κατανοήσετε τον κύκλο ζωής των αυτήν την κλάση προκειμένου να χρησιμοποιηθεί σωστά.

Ρόλοι Web και εργαζόμενου μεταβείτε σε ένα σύνολο διακριτές φάσεις κατά την εκκίνηση, να εκτελέσετε και να διακόψετε. Η κλάση **RoleEntryPoint** εκθέτει μια σειρά από συμβάντα που δηλώνουν όταν παρουσιάζονται αυτά τα στάδια. Χρησιμοποιήστε αυτές τις προετοιμασία, εκτέλεση, και διακοπή εργασιών σας προσαρμοσμένο φόντο. Τον πλήρη κύκλο είναι:

- Azure φορτώνει συγκρότησης ρόλο και αναζητά την κλάση που προέρχεται από **RoleEntryPoint**.
- Εάν βρεθούν αυτήν την κλάση, κλήσεις **RoleEntryPoint.OnStart()**. Μπορείτε να παρακάμψετε αυτήν τη μέθοδο για την προετοιμασία των εργασιών σας φόντο.
- Μετά την ολοκλήρωση της μεθόδου **OnStart** , Azure κλήσεις **Application_Start()** στο καθολικό αρχείο της εφαρμογής εάν αυτό είναι παρουσίαση (για παράδειγμα, Global.asax σε ένα ρόλο web εκτελεί ASP.NET).
- Azure κλήσεις **RoleEntryPoint.Run()** σε ένα νέο νήμα πρώτου πλάνου που εκτελεί την παράλληλα με **OnStart()**. Μπορείτε να παρακάμψετε αυτήν τη μέθοδο για να ξεκινήσετε τις εργασίες σας φόντο.
- Όταν λήξει η μέθοδος εκτέλεση, Azure κλήσεις πρώτα **Application_End()** στο καθολικό αρχείο της εφαρμογής εάν αυτή είναι παρουσίαση και, στη συνέχεια, καλεί **RoleEntryPoint.OnStop()**. Μπορείτε να παρακάμψετε τη μέθοδο **OnStop** για να διακόψετε τις εργασίες σας φόντο, εκκαθάριση πόρους, αποσύρετε αντικειμένων και Κλείσιμο συνδέσεων που ενδέχεται να έχετε χρησιμοποιήσει τις εργασίες.
- Η διεργασία κεντρικού υπολογιστή ρόλο Azure εργασίας έχει διακοπεί. Σε αυτό το σημείο, το ρόλο θα τοποθέτησή και θα γίνει επανεκκίνηση.

Για περισσότερες λεπτομέρειες και ένα παράδειγμα χρησιμοποιώντας τις μεθόδους της κλάσης **RoleEntryPoint** , ανατρέξτε στο θέμα [Τον υπολογισμό μοτίβο ενοποίηση πόρων](http://msdn.microsoft.com/library/dn589778.aspx).

## <a name="considerations"></a>Ζητήματα

Λάβετε υπόψη τα εξής σημεία κατά το σχεδιασμό πώς θα μπορείτε να εκτελέσετε εργασίες στο παρασκήνιο στο web ή εργαζόμενου ρόλου:

- Προεπιλεγμένη **Εκτέλεση** μέθοδο υλοποίηση στην τάξη **RoleEntryPoint** περιέχει μια κλήση σε **Thread.Sleep(Timeout.Infinite)** που διατηρεί το ρόλο ενεργών απεριόριστο χρονικό διάστημα. Εάν μπορείτε να παρακάμψετε τη μέθοδο **Εκτέλεση** (που είναι συνήθως είναι απαραίτητο να εκτελεί εργασίες στο παρασκήνιο), που δεν πρέπει να επιτρέπουν τον κωδικό για έξοδο από τη μέθοδο εκτός αν θέλετε να Κάδος Ανακύκλωσης την παρουσία του ρόλου.
- Μια τυπική υλοποίηση της μεθόδου **Εκτέλεση** περιλαμβάνει κώδικα για να ξεκινήσετε κάθε μία από τις εργασίες παρασκηνίου και μια δομή βρόχος η οποία ελέγχει περιοδικά την κατάσταση του όλες τις εργασίες παρασκηνίου. Να κάνετε επανεκκίνηση οποιαδήποτε την αποτυχία ή την παρακολούθηση για τα διακριτικά ακύρωσης που δηλώνουν ότι οι εργασίες έχουν ολοκληρωθεί.
- Εάν μια εργασία στο παρασκήνιο δημιουργεί μια ανεπίλυτη εξαίρεση, αυτήν την εργασία πρέπει να είναι τοποθέτησή επιτρέποντας άλλες εργασίες φόντου στο ρόλο να συνεχίσει να εκτελείται. Ωστόσο, εάν η εξαίρεση προκαλείται από καταστροφή αντικειμένων εκτός της εργασίας, όπως το κοινόχρηστο χώρο αποθήκευσης, θα πρέπει να διαχειρίζεται την εξαίρεση τάξη σας **RoleEntryPoint** , όλες οι εργασίες πρέπει να ακυρωθεί και θα πρέπει να επιτρέπεται η **Εκτέλεση** μέθοδος για να τερματίσετε. Azure θα, στη συνέχεια, επανεκκινήστε το ρόλο.
- Χρησιμοποιήστε τη μέθοδο **OnStop** σε παύση ή τερματισμός εργασίες στο παρασκήνιο και εκκαθάριση πόρους. Αυτό μπορεί να περιλαμβάνει διακοπή μεγάλη διάρκεια εκτέλεσης ή multistep εργασίες. Είναι απαραίτητο να σκεφτείτε πώς αυτό μπορεί να γίνει για να αποφύγετε ασυνέπειες δεδομένων. Εάν μια παρουσία ρόλο σταματήσει για οποιονδήποτε λόγο εκτός από έναν τερματισμό προετοιμασία από το χρήστη, πρέπει να ολοκληρωθεί ο κώδικας που εκτελείται στη μέθοδο **OnStop** μετά από πέντε λεπτά πριν να επιβάλλετε τερματιστεί. Βεβαιωθείτε ότι ο κώδικας μπορεί να ολοκληρωθεί σε αυτό το χρονικό διάστημα ή μπορεί να αποδεχτεί τις δεν εκτελείται ολοκλήρωσης.  
- Το Azure εξισορρόπηση φόρτου ξεκινά που κατευθύνει κίνηση για να την παρουσία ρόλο όταν η μέθοδος **RoleEntryPoint.OnStart** επιστρέφει την τιμή **true**. Επομένως, εξετάστε το ενδεχόμενο με όλες τις κώδικα προετοιμασίας στη μέθοδο **OnStart** ώστε να τις εμφανίσεις ρόλο που δεν με επιτυχία η προετοιμασία δεν θα λαμβάνετε οποιαδήποτε κυκλοφορία.
- Μπορείτε να χρησιμοποιήσετε εργασίες εκκίνησης εκτός από τις μεθόδους της κλάσης **RoleEntryPoint** . Θα πρέπει να χρησιμοποιείτε εργασίες εκκίνησης για την προετοιμασία τις ρυθμίσεις που χρειάζεστε για να αλλάξετε σε το Azure εξισορρόπηση φόρτου, επειδή αυτές τις εργασίες θα εκτελεστεί πριν από το ρόλο λαμβάνει τις αιτήσεις. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Εκτέλεση εργασιών εκκίνησης στο Azure](./cloud-services/cloud-services-startup-tasks.md).
- Εάν υπάρχει ένα σφάλμα σε μια εργασία εκκίνησης, αυτό μπορεί να επιβάλετε το ρόλο συνεχώς επανεκκίνηση. Αυτό μπορεί να εμποδίσει που εκτελεί μια εικονική ανταλλαγή διεύθυνση IP (VIP) σε προηγουμένως σταδιακή έκδοση επειδή το κάνετε εναλλαγή απαιτεί αποκλειστική πρόσβαση στο ρόλο. Αυτό δεν είναι δυνατή η λήψη ενώ γίνεται η επανεκκίνηση του ρόλου. Για να επιλύσετε αυτό το θέμα:
    -  Προσθέστε τον ακόλουθο κώδικα στην αρχή από τις μεθόδους **OnStart** και να **εκτελέσετε** στο ρόλο σας:

    ```C#
    var freeze = CloudConfigurationManager.GetSetting("Freeze");
    if (freeze != null)
    {
        if (Boolean.Parse(freeze))
        {
            Thread.Sleep(System.Threading.Timeout.Infinite);
        }
    }
    ```

   - Προσθέστε τον ορισμό της ρύθμισης **Σταθεροποίηση** ως μια τιμή Boolean στο ServiceDefinition.csdef και ServiceConfiguration. *.cscfg αρχείων για το ρόλο και ορίστε την σε* *False* *. Εάν ο ρόλος τίθεται σε μια λειτουργία επαναλαμβανόμενους επανεκκίνηση, μπορείτε να αλλάξετε τη ρύθμιση για να * *true** για να σταθεροποιήσετε εκτέλεσης ρόλο και να μπορεί να γίνει αντιμετάθεση με μια προηγούμενη έκδοση.

## <a name="resiliency-considerations"></a>Υποστηρίζεται ζητήματα

Εργασίες στο παρασκήνιο πρέπει να είναι ανθεκτικά προκειμένου να παρέχουν υπηρεσίες αξιόπιστη την εφαρμογή. Όταν είστε σχεδιασμού και σχεδίαση εργασίες στο παρασκήνιο, λάβετε υπόψη τα εξής σημεία:

- Εργασίες στο παρασκήνιο πρέπει να μπορούν να χειρίζονται ομαλά επανεκκίνηση του ρόλου ή της υπηρεσίας χωρίς να καταστρέψει δεδομένα ή εισαγωγή ασυνέπεια στην εφαρμογή. Για τις εργασίες μεγάλη διάρκεια εκτέλεσης ή multistep, εξετάστε το ενδεχόμενο χρήσης _ελέγχου που δείχνει_ με την αποθήκευση της κατάστασης των εργασιών στο χώρο αποθήκευσης μόνιμη ή ως μηνύματα σε μια ουρά Εάν αυτή είναι κατάλληλα. Για παράδειγμα, μπορείτε να διατηρούνται οι πληροφορίες κατάστασης σε ένα μήνυμα σε μια ουρά και να ενημερώσετε βαθμιαία αυτές οι πληροφορίες κατάστασης με την πρόοδο της εργασίας, ώστε να είναι δυνατή η επεξεργασία της εργασίας από την τελευταία γνωστό καλό σημείο ελέγχου--αντί να κάνετε επανεκκίνηση από την αρχή. Όταν χρησιμοποιείτε το Azure Service Bus ουρές, μπορείτε να χρησιμοποιήσετε περίοδοι λειτουργίας μηνυμάτων για την ενεργοποίηση του ίδιου σεναρίου. Περίοδοι λειτουργίας σάς επιτρέπουν να αποθηκεύσετε και να ανακτήσετε την κατάσταση επεξεργασίας εφαρμογών χρησιμοποιώντας τις μεθόδους [SetState](http://msdn.microsoft.com/library/microsoft.servicebus.messaging.messagesession.setstate.aspx) και [GetState](http://msdn.microsoft.com/library/microsoft.servicebus.messaging.messagesession.getstate.aspx) . Για περισσότερες πληροφορίες σχετικά με τη σχεδίαση αξιόπιστη multistep διαδικασίες και ροές εργασιών, ανατρέξτε στο θέμα [Μοτίβο επόπτη παράγοντας χρονοδιαγράμματος](http://msdn.microsoft.com/library/dn589780.aspx).
- Όταν χρησιμοποιείτε web ή εργαζόμενου ρόλους για τη φιλοξενία πολλές εργασίες στο παρασκήνιο, σχεδιάστε την παράκαμψη της μεθόδου **Εκτέλεση** για να παρακολουθείτε για αποτυχίας ή καθυστερεί εργασίες και κάντε επανεκκίνηση του τους. Όταν δεν είναι πρακτικό και χρησιμοποιείτε ένα ρόλο εργαζόμενου, επιβάλετε το ρόλο εργασίας για να ξεκινήσετε ξανά από την έξοδο από τη μέθοδο **Εκτέλεση** .
- Όταν χρησιμοποιείτε ουρές για να επικοινωνήσετε με εργασίες στο παρασκήνιο, τις ουρές μπορεί να λειτουργήσει ως ένα buffer για την αποθήκευση προσκλήσεις που αποστέλλονται στις εργασίες ενώ η εφαρμογή βρίσκεται στην περιοχή υψηλότερα από συνήθη φόρτωση. Αυτό σας επιτρέπει τις εργασίες για να ενημερωθείτε με το περιβάλλον εργασίας Χρήστη κατά τη διάρκεια λιγότερο απασχολημένος περιόδων. Σημαίνει επίσης ότι η Ανακύκλωσης του ρόλου δεν θα εμποδίσει το περιβάλλον εργασίας Χρήστη. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [μοτίβου βασίζεται σε ουρά ισοστάθμιση φόρτωση](http://msdn.microsoft.com/library/dn589783.aspx). Εάν ορισμένες εργασίες είναι σημαντικότερο από άλλα άτομα, εξετάστε την εφαρμογή το [Μοτίβο ουρά προτεραιότητας](http://msdn.microsoft.com/library/dn589794.aspx) για να βεβαιωθείτε ότι αυτές τις εργασίες που εκτελούνται πριν από την λιγότερο σημαντικά από αυτές.
- Εργασίες στο παρασκήνιο που έχουν ξεκινήσει με μηνύματα ή μηνύματα διαδικασία πρέπει να είναι σχεδιασμένη να χειρίζεται τις ασυνέπειες, όπως μηνύματα παραδίδονται εκτός σειράς, τα μηνύματα που επανειλημμένα προκαλούν σφάλμα (συχνά αναφέρονται ως _μηνυμάτων αλλοίωσης_) και τα μηνύματα που θα παραδίδονται περισσότερες από μία φορές. Λάβετε υπόψη τα εξής:
  - Τα μηνύματα που πρέπει να υποβάλλονται σε επεξεργασία με μια συγκεκριμένη σειρά, όπως αυτές που αλλάζουν τα δεδομένα με βάση την υπάρχουσα τιμή δεδομένων (για παράδειγμα, προσθέτοντας μια τιμή σε μια υπάρχουσα τιμή), δεν μπορεί να παραδίδεται στο στην αρχική σειρά με την οποία έχουν σταλεί. Εναλλακτικά, μπορεί να είναι χειρισμού από διαφορετικές παρουσίες μιας εργασίας φόντο με διαφορετική σειρά λόγω διαφορετικές φορτία σε κάθε παρουσία. Τα μηνύματα που πρέπει να υποβληθούν σε επεξεργασία με μια συγκεκριμένη σειρά πρέπει να περιλαμβάνει έναν αριθμό ακολουθίας, κλειδί ή ορισμένες άλλες ένδειξη με εργασίες στο παρασκήνιο να χρησιμοποιήσετε για να διασφαλίσετε ότι γίνεται με τη σωστή σειρά. Εάν χρησιμοποιείτε Azure Service Bus, μπορείτε να χρησιμοποιήσετε περίοδοι λειτουργίας μηνυμάτων για να εξασφαλίσετε τη σειρά των παράδοσης. Ωστόσο, είναι συνήθως πιο αποτελεσματικό, όπου είναι δυνατό, για να σχεδιάσετε τη διαδικασία, ώστε η σειρά μηνύματος δεν είναι σημαντική.
  - Συνήθως, μια εργασία στο παρασκήνιο θα peek μηνύματα στην ουρά, που αποκρύπτει προσωρινά από άλλες καταναλωτές μήνυμα. Στη συνέχεια, διαγράφει τα μηνύματα αφού αυτές έχουν υποστεί επεξεργασία με επιτυχία. Εάν μια εργασία στο παρασκήνιο αποτυγχάνει κατά την επεξεργασία ενός μηνύματος, αυτό το μήνυμα θα εμφανιστεί ξανά στην ουρά αφού λήξει το χρονικό όριο σύνοψη. Αυτό θα γίνεται επεξεργασία από μια άλλη παρουσία της εργασίας ή κατά την επόμενη περίοδο επεξεργασία αυτής της περιόδου λειτουργίας. Εάν το μήνυμα με συνέπεια προκαλεί σφάλμα στο του καταναλωτή, το αποκλείει την εργασία στην ουρά και τελικά την ίδια την εφαρμογή όταν γεμίσει ουρά. Επομένως, είναι σημαντική για τον εντοπισμό και την κατάργηση μηνυμάτων αλλοίωσης από την ουρά. Εάν χρησιμοποιείτε Azure Service Bus, μηνύματα που προκαλούν σφάλμα μπορούν να μετακινούνται αυτόματα ή με μη αυτόματο τρόπο σε ένα σχετικό γράμμα νεκρού ουρά.
  - Ουρές είναι εγγυημένη στο _τουλάχιστον μία φορά_ μηχανισμούς παράδοσης, αλλά ενδέχεται να μπορούν να παρέχουν περισσότερες από μία φορές το ίδιο μήνυμα. Επιπλέον, εάν μια εργασία στο παρασκήνιο αποτύχει μετά την επεξεργασία ενός μηνύματος αλλά πριν να το διαγράψετε από την ουρά, το μήνυμα θα είναι διαθέσιμο για επεξεργασία ξανά. Εργασίες στο παρασκήνιο πρέπει να είναι idempotent, γεγονός που σημαίνει ότι επεξεργασίας περισσότερες από μία φορές το ίδιο μήνυμα δεν προκαλεί σφάλμα ή ασυνέπεια στα δεδομένα της εφαρμογής. Ορισμένες λειτουργίες είναι ομαλά idempotent, όπως τη ρύθμιση μια αποθηκευμένη τιμή σε μια συγκεκριμένη νέα τιμή. Ωστόσο, πράξεις όπως η προσθήκη μιας τιμής σε μια υπάρχουσα αποθηκευμένη τιμή χωρίς να ελέγξετε ότι την αποθηκευμένη τιμή εξακολουθεί να είναι ίδια με όταν το μήνυμα στάλθηκε αρχικά θα προκαλέσει ασυνέπειες. Azure ουρές Bus υπηρεσίας μπορεί να ρυθμιστεί για την αυτόματη κατάργηση διπλότυπων μηνύματα.
  - Ορισμένα συστήματα ανταλλαγής μηνυμάτων, όπως Azure αποθήκευσης ουρές και και Bus υπηρεσίας Azure, υποστηρίζει μια ιδιότητα count de-queue που υποδεικνύει τον αριθμό των φορών που έχει γίνει η ανάγνωση ενός μηνύματος από την ουρά. Αυτό μπορεί να είναι χρήσιμη σε χειρισμός επαναλαμβανόμενους και αλλοίωσης μηνύματα. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Ασύγχρονης κύριο βήμα ανταλλαγής μηνυμάτων](http://msdn.microsoft.com/library/dn589781.aspx) και [Μοτίβα Idempotency](http://blog.jonathanoliver.com/2010/04/idempotency-patterns/).

## <a name="scaling-and-performance-considerations"></a>Ζητήματα κλίμακας και επιδόσεων

Εργασίες στο παρασκήνιο πρέπει να προσφέρει επαρκείς επιδόσεις για να βεβαιωθείτε ότι δεν αποκλείει την εφαρμογή, ούτε προκαλέσει ασυνέπειες λόγω Καθυστερημένο λειτουργίας, όταν το σύστημα είναι φόρτος. Συνήθως, επιδόσεων είναι βελτιωμένη, αλλάζοντας την κλίμακα των εμφανίσεων υπολογισμού που φιλοξενεί τις εργασίες παρασκηνίου. Όταν είστε σχεδιασμού και σχεδίαση εργασίες στο παρασκήνιο, εξετάστε τα εξής σημεία γύρω από κλιμάκωση και επιδόσεων:

- Azure υποστηρίζει autoscaling (κλίμακας ανάληψη και κλίμακας ξανά) που βασίζονται σε τρέχουσα ζήτηση και φόρτωση--ή σε μια προκαθορισμένη χρονοδιάγραμμα, εφαρμογές Web, τις υπηρεσίες Cloud web και τους ρόλους εργαζόμενου και εικονικές μηχανές φιλοξενούνται αναπτύξεις. Χρησιμοποιήστε αυτήν τη δυνατότητα για να βεβαιωθείτε ότι η εφαρμογή το συνολικό διαθέτει αρκετό τις δυνατότητες των επιδόσεων κατά την ελαχιστοποίηση του κόστους χρόνου εκτέλεσης.
- Όπου φόντου εργασίες έχουν μια δυνατότητα διαφορετικών επιδόσεων από τα άλλα τμήματα του μιας εφαρμογής των υπηρεσιών Cloud (για παράδειγμα, το περιβάλλον εργασίας Χρήστη ή τα στοιχεία όπως το επίπεδο πρόσβασης δεδομένων), φιλοξενεί τις εργασίες παρασκηνίου μαζί σε ένα ρόλο ξεχωριστή εργαζόμενου επιτρέπει το περιβάλλον εργασίας Χρήστη και φόντο ρόλους εργασίας για να κλιμακωθεί ανεξάρτητα για να διαχειριστείτε τη φόρτωση. Εάν πολλές εργασίες στο παρασκήνιο έχετε επιδόσεων σημαντικά διαφορετικές δυνατότητες μεταξύ τους, μπορείτε να τη διαίρεση τους σε ξεχωριστή εργαζόμενου ρόλους και κλίμακας κάθε τύπο ρόλο ανεξάρτητα. Ωστόσο, σημειώστε ότι αυτό μπορεί να αυξήσει χρόνου εκτέλεσης κόστους σε σύγκριση με το συνδυασμό όλες τις εργασίες σε λιγότερους ρόλους.
- Απλώς κλίμακας τους ρόλους ενδέχεται να μην είναι αρκετό για να αποτρέψετε την απώλεια της απόδοσης φόρτος. Ίσως χρειαστεί επίσης να κλιμακωθεί ουρές χώρου αποθήκευσης και άλλοι πόροι για να αποτρέψετε ένα μοναδικό σημείο η συνολική επεξεργασίας αλυσίδας από το πώς να γίνετε συμφόρηση. Επίσης, εξετάστε το ενδεχόμενο άλλους περιορισμούς, όπως τη μέγιστη μετάδοση του χώρου αποθήκευσης και άλλες υπηρεσίες που βασίζονται στην εφαρμογή και τις εργασίες παρασκηνίου σε.
- Εργασίες στο παρασκήνιο πρέπει να είναι σχεδιασμένες για κλιμάκωση. Για παράδειγμα, πρέπει να μπορούν να εντοπίσει δυναμικά τον αριθμό των ουρές χώρου αποθήκευσης χρησιμοποιηθεί προκειμένου να κάνουν ακρόαση σε ή να στείλει μηνύματα στην κατάλληλη ουρά.
- Από προεπιλογή, κλίμακα WebJobs με τους συσχετισμένη παρουσία Azure Web Apps. Ωστόσο, εάν θέλετε ένα WebJob ώστε να εκτελείται ως μόνο μία παρουσία, μπορείτε να δημιουργήσετε ένα αρχείο Settings.job που περιέχει τα δεδομένα JSON **{"is_singleton": true}**. Με αυτόν τον τρόπο Azure για να εκτελέσετε μόνο μία παρουσία του WebJob του, ακόμα και αν υπάρχουν πολλές παρουσίες του συσχετισμένη web app. Αυτό μπορεί να είναι μια τεχνική χρήσιμη για προγραμματισμένες εργασίες που πρέπει να εκτελέσετε το ως μόνο μία παρουσία.

## <a name="related-patterns"></a>Σχετικές μοτίβα

- [Κύριο βήμα ασύγχρονης ανταλλαγής μηνυμάτων](http://msdn.microsoft.com/library/dn589781.aspx)
- [Καθοδήγηση Autoscaling](http://msdn.microsoft.com/library/dn589774.aspx)
- [Παράγωγων μοτίβο συναλλαγής](http://msdn.microsoft.com/library/dn589804.aspx)
- [Ανταγωνιστικών καταναλωτές μοτίβου](http://msdn.microsoft.com/library/dn568101.aspx)
- [Τον υπολογισμό διαμερισμάτων καθοδήγηση](http://msdn.microsoft.com/library/dn589773.aspx)
- [Τον υπολογισμό μοτίβο ενοποίηση πόρων](http://msdn.microsoft.com/library/dn589778.aspx)
- [Μοτίβο πύλης](http://msdn.microsoft.com/library/dn589793.aspx)
- [Οδηγός Election μοτίβου](http://msdn.microsoft.com/library/dn568104.aspx)
- [Δίαυλοι και φίλτρα μοτίβο](http://msdn.microsoft.com/library/dn568100.aspx)
- [Προτεραιότητα ουρά μοτίβου](http://msdn.microsoft.com/library/dn589794.aspx)
- [Φόρτωση βάσει ουρά ισοστάθμιση μοτίβου](http://msdn.microsoft.com/library/dn589783.aspx)
- [Χρονοδιάγραμμα παράγοντας επόπτη μοτίβο](http://msdn.microsoft.com/library/dn589780.aspx)

## <a name="more-information"></a>Περισσότερες πληροφορίες

- [Κλιμάκωση Azure εφαρμογών με τους ρόλους εργαζόμενου](http://msdn.microsoft.com/library/hh534484.aspx#sec8)
- [Εκτέλεση εργασίες στο παρασκήνιο](http://msdn.microsoft.com/library/ff803365.aspx)
- [Κύκλος ζωής εκκίνησης Azure ρόλων](http://blog.syntaxc4.net/post/2011/04/13/windows-azure-role-startup-life-cycle.aspx) (καταχώρηση ιστολογίου)
- [Κύκλος ζωής ρόλο υπηρεσίες Azure Cloud](http://channel9.msdn.com/Series/Windows-Azure-Cloud-Services-Tutorials/Windows-Azure-Cloud-Services-Role-Lifecycle) (βίντεο)
- [Γρήγορα αποτελέσματα με το Azure SDK WebJobs](./app-service-web/websites-dotnet-webjobs-sdk-get-started.md)
- [Azure ουρές και και υπηρεσία Bus - σύγκριση και υπενθύμισης και χρωματικές](./service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted.md)
- [Πώς μπορείτε να ενεργοποιήσετε Διαγνωστικά σε μια υπηρεσία στο Cloud](./cloud-services/cloud-services-dotnet-diagnostics.md)
