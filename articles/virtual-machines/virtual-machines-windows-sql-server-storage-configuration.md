<properties
    pageTitle="Ρύθμιση παραμέτρων χώρου αποθήκευσης για SQL Server ΣΠΣ | Microsoft Azure"
    description="Αυτό το θέμα περιγράφει τον τρόπο Azure ρυθμίζει τις παραμέτρους του χώρου αποθήκευσης για SQL Server ΣΠΣ κατά την προμήθεια (μοντέλο ανάπτυξης για τη διαχείριση πόρων). Επίσης, εξηγεί πώς μπορείτε να ρυθμίσετε το χώρο αποθήκευσης για τις υπάρχουσες ΣΠΣ SQL Server."
    services="virtual-machines-windows"
    documentationCenter="na"
    authors="ninarn"
    manager="jhubbard"    
    tags="azure-resource-manager"/>
<tags
    ms.service="virtual-machines-windows"
    ms.devlang="na"
    ms.topic="article"
    ms.tgt_pltfrm="vm-windows-sql-server"
    ms.workload="infrastructure-services"
    ms.date="08/04/2016"
    ms.author="ninarn" />

# <a name="storage-configuration-for-sql-server-vms"></a>Ρύθμιση παραμέτρων του χώρου αποθήκευσης για SQL Server ΣΠΣ

Όταν ρυθμίζετε τις παραμέτρους μιας εικόνας εικονική μηχανή SQL Server στο Azure, την πύλη σάς βοηθά να αυτοματοποιήσετε της ρύθμισης παραμέτρων του χώρου αποθήκευσης. Αυτό περιλαμβάνει επισύναψη χώρου αποθήκευσης για το Εικονική βελτίωση της προσβασιμότητας με τον SQL Server που χώρου αποθήκευσης και ρυθμίσετε τις παραμέτρους του για να βελτιστοποιήσετε για τις απαιτήσεις για την απόδοση ειδικά.

Αυτό το θέμα εξηγεί πώς Azure ρυθμίζει τις παραμέτρους του χώρου αποθήκευσης για το ΣΠΣ SQL Server τόσο κατά την προμήθεια του όσο και για υπάρχοντα ΣΠΣ. Αυτή η ρύθμιση παραμέτρων είναι με βάση τις [επιδόσεις βέλτιστες πρακτικές](virtual-machines-windows-sql-performance.md) για ΣΠΣ Azure που εκτελεί τον SQL Server.

[AZURE.INCLUDE [learn-about-deployment-models](../../includes/learn-about-deployment-models-rm-include.md)]μοντέλο κλασική ανάπτυξης.

## <a name="prerequisites"></a>Προαπαιτούμενα στοιχεία
Για να χρησιμοποιήσετε τις ρυθμίσεις παραμέτρων αυτόματης αποθήκευσης, την εικονική μηχανή σας απαιτεί τα εξής χαρακτηριστικά:

- Προμήθεια με μια [εικόνα της συλλογής SQL Server](virtual-machines-windows-sql-server-iaas-overview.md#option-1-deploy-a-sql-vm-per-minute-licensing).
- Χρησιμοποιεί το [μοντέλο ανάπτυξης διαχείρισης πόρων](../resource-manager-deployment-model.md).
- Χρησιμοποιεί [χώρο αποθήκευσης Premium](../storage/storage-premium-storage.md).

## <a name="new-vms"></a>Νέα ΣΠΣ
Οι παρακάτω ενότητες περιγράφουν τον τρόπο διαμόρφωσης του χώρου αποθήκευσης για το νέο εικονικές μηχανές SQL Server.

### <a name="azure-portal"></a>Πύλη του Azure
Κατά την προμήθεια Εικονική μηχανή Azure χρησιμοποιώντας μια εικόνα της συλλογής SQL Server, μπορείτε να επιλέξετε να ρυθμίσει αυτόματα το χώρο αποθήκευσης για το νέο Εικονική. Καθορίστε το μέγεθος του χώρου αποθήκευσης, όρια απόδοσης και τον τύπο φόρτο εργασίας. Το παρακάτω στιγμιότυπο οθόνης εμφανίζει το χώρο αποθήκευσης blade ρύθμισης παραμέτρων που χρησιμοποιείται κατά τη διάρκεια Εικονική SQL προμήθειας.

![Παράμετροι χώρου αποθήκευσης του SQL Server Εικονική κατά την προμήθεια του](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-configuration-provisioning.png)

Azure με βάση τις επιλογές σας, εκτελεί τις ακόλουθες εργασίες ρύθμισης παραμέτρων χώρου αποθήκευσης μετά τη δημιουργία του Εικονική:

- Δημιουργεί και επισυνάπτει premium χώρος αποθήκευσης δεδομένων δίσκων η εικονική μηχανή.
- Ρυθμίζει τις παραμέτρους των δίσκων δεδομένων να έχει πρόσβαση στο SQL Server.
- Ρυθμίζει τις παραμέτρους των δίσκων δεδομένων σε ένα χώρο συγκέντρωσης χώρου αποθήκευσης με βάση το καθορισμένο μέγεθος και επιδόσεις (IOP Προέλευσης και μετάδοσης) τις απαιτήσεις.
- Συσχετίζει το χώρο συγκέντρωσης χώρου αποθήκευσης με μια νέα μονάδα δίσκου στον υπολογιστή εικονική.
- Βελτιστοποιεί αυτήν τη νέα μονάδα δίσκου με βάση τον τύπο καθορισμένο φόρτο εργασίας σας (αποθήκευσης δεδομένων, συναλλαγών επεξεργασίας ή γενικά).

Για περισσότερες λεπτομέρειες σχετικά με τον τρόπο Azure ρυθμίζει τις παραμέτρους χώρου αποθήκευσης, ανατρέξτε στην [ενότητα Ρύθμιση παραμέτρων χώρου αποθήκευσης](#storage-configuration). Για μια πλήρη αναλυτικές οδηγίες σχετικά με τον τρόπο για να δημιουργήσετε μια Εικονική SQL Server στην πύλη του Azure, ανατρέξτε στο θέμα [το πρόγραμμα εκμάθησης παροχής](virtual-machines-windows-portal-sql-server-provision.md).

### <a name="resource-manage-templates"></a>Πρότυπα διαχείριση πόρων
Εάν χρησιμοποιείτε τα παρακάτω πρότυπα για τη διαχείριση πόρων, δύο δίσκων δεδομένων premium επισυνάπτονται από προεπιλογή, με τη ρύθμιση παραμέτρων χωρίς χώρο αποθήκευσης στο χώρο συγκέντρωσης. Ωστόσο, μπορείτε να προσαρμόσετε αυτά τα πρότυπα για να αλλάξετε τον αριθμό των δίσκων δεδομένων premium που είναι συνημμένα σε η εικονική μηχανή.

- [Δημιουργία Εικονική με αυτόματη δημιουργία αντιγράφων ασφαλείας](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-sql-full-autobackup)
- [Δημιουργία Εικονική με αυτόματη διόρθωση](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-sql-full-autopatching)
- [Δημιουργία Εικονική με ενσωμάτωση του AKV](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-sql-full-keyvault)

## <a name="existing-vms"></a>Υπάρχουσα ΣΠΣ
Για υπάρχοντα ΣΠΣ SQL Server, μπορείτε να τροποποιήσετε ορισμένες ρυθμίσεις αποθήκευσης στην πύλη του Azure. Επιλέξτε Εικονική σας, μεταβείτε στην περιοχή ρυθμίσεις και, στη συνέχεια, επιλέξτε ρύθμιση παραμέτρων του SQL Server. Η ρύθμιση παραμέτρων του SQL Server blade εμφανίζει την τρέχουσα χρήση χώρου αποθήκευσης της Εικονική σας. Όλες οι μονάδες δίσκου που υπάρχουν σε Εικονική σας εμφανίζονται σε αυτό το γράφημα. Για κάθε μονάδα δίσκου, το χώρο αποθήκευσης εμφανίζει με τέσσερις ενότητες:

- Δεδομένα SQL
- Αρχείο καταγραφής SQL
- Άλλο (χώρος αποθήκευσης-SQL)
- Διαθέσιμο

![Ρύθμιση παραμέτρων του χώρου αποθήκευσης για υπάρχοντα SQL Server Εικονική](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-configuration-existing.png)

Για να ρυθμίσετε τις παραμέτρους του χώρου αποθήκευσης για να προσθέσετε μια νέα μονάδα δίσκου ή επέκταση μια υπάρχουσα μονάδα δίσκου, κάντε κλικ στη σύνδεση επεξεργασία επάνω από το γράφημα.

Οι επιλογές ρύθμισης παραμέτρων που βλέπετε ποικίλλει ανάλογα με το εάν έχετε χρησιμοποιήσει αυτήν τη δυνατότητα πριν από. Όταν χρησιμοποιείτε για πρώτη φορά, μπορείτε να καθορίσετε τις απαιτήσεις σας χώρου αποθήκευσης για μια νέα μονάδα δίσκου. Εάν είχατε χρησιμοποιήσει προηγουμένως αυτήν τη δυνατότητα για να δημιουργήσετε μια μονάδα δίσκου, μπορείτε να επιλέξετε για να επεκτείνετε το χώρο αποθήκευσης της μονάδας δίσκου.

### <a name="use-for-the-first-time"></a>Χρήση για πρώτη φορά
Εάν είναι η πρώτη φορά που θα χρησιμοποιήσετε αυτήν τη δυνατότητα, μπορείτε να καθορίσετε τα όρια μέγεθος και επιδόσεις χώρου αποθήκευσης για μια νέα μονάδα δίσκου. Αυτή η εμπειρία είναι παρόμοια με ό, τι θα βλέπετε κατά την προμήθεια του χρόνου. Η κύρια διαφορά είναι ότι δεν επιτρέπεται να καθορίσετε τον τύπο φόρτο εργασίας. Αυτός ο περιορισμός αποτρέπει την διακόψετε τυχόν υπάρχουσες ρυθμίσεις παραμέτρων SQL Server στον υπολογιστή εικονική.

![Ρύθμιση παραμέτρων ρυθμιστικά χώρου αποθήκευσης του SQL Server](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-usage-sliders.png)

Azure δημιουργεί μια νέα μονάδα δίσκου που βασίζονται σε προδιαγραφές σας. Σε αυτό το σενάριο, Azure εκτελεί τις παρακάτω εργασίες ρύθμισης παραμέτρων χώρου αποθήκευσης:

- Δημιουργεί και επισυνάπτει premium χώρος αποθήκευσης δεδομένων δίσκων η εικονική μηχανή.
- Ρυθμίζει τις παραμέτρους των δίσκων δεδομένων να έχει πρόσβαση στο SQL Server.
- Ρυθμίζει τις παραμέτρους των δίσκων δεδομένων σε ένα χώρο συγκέντρωσης χώρου αποθήκευσης με βάση το καθορισμένο μέγεθος και επιδόσεις (IOP Προέλευσης και μετάδοσης) τις απαιτήσεις.
- Συσχετίζει το χώρο συγκέντρωσης χώρου αποθήκευσης με μια νέα μονάδα δίσκου στον υπολογιστή εικονική.

Για περισσότερες λεπτομέρειες σχετικά με τον τρόπο Azure ρυθμίζει τις παραμέτρους χώρου αποθήκευσης, ανατρέξτε στην [ενότητα Ρύθμιση παραμέτρων χώρου αποθήκευσης](#storage-configuration).

### <a name="add-a-new-drive"></a>Προσθέστε μια νέα μονάδα δίσκου
Εάν έχετε ήδη ρυθμίσει χώρου αποθήκευσης στον σας Εικονική SQL Server, επέκταση του χώρου αποθήκευσης που εμφανίζει τα δύο νέες επιλογές. Την πρώτη επιλογή είναι να προσθέσετε μια νέα μονάδα, η οποία μπορεί να αυξήσετε το επίπεδο επιδόσεων σας Εικονική.

![Προσθέστε μια νέα μονάδα δίσκου σε μια Εικονική SQL](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-configuration-add-new-drive.png)

Ωστόσο, μετά την προσθήκη στη μονάδα δίσκου, πρέπει να εκτελέσετε κάποια επιπλέον μη αυτόματη ρύθμιση παραμέτρων για να επιτύχετε την αύξηση της απόδοσης.

### <a name="extend-the-drive"></a>Επέκταση της μονάδας δίσκου
Κάποια άλλη επιλογή για την επέκταση του χώρου αποθήκευσης είναι για να επεκτείνετε την υπάρχουσα μονάδα δίσκου. Αυτή η επιλογή αυξάνει τον διαθέσιμο χώρο αποθήκευσης για τη μονάδα δίσκου, αλλά αυτό δεν αυξάνεται επιδόσεων. Με τους χώρους συγκέντρωσης χώρου αποθήκευσης, δεν μπορείτε να αλλάξετε τον αριθμό των στηλών αφού δημιουργηθεί το χώρο συγκέντρωσης του χώρου αποθήκευσης. Ο αριθμός των στηλών καθορίζει τον αριθμό παράλληλες εγγραφών, στο οποίο μπορεί να είναι διαγραμμισμένα σε δίσκων δεδομένων. Γι ' αυτό, οποιαδήποτε δίσκων προστέθηκε δεδομένων δεν μπορεί να βελτιώσει τις επιδόσεις. Μόνο μπορούν να παρέχουν περισσότερο χώρο αποθήκευσης για τα δεδομένα που εγγράφονται. Αυτός ο περιορισμός σημαίνει επίσης ότι, όταν επεκτείνετε τη μονάδα δίσκου, τον αριθμό των στηλών καθορίζει τον ελάχιστο αριθμό δίσκων δεδομένων που μπορείτε να προσθέσετε. Επομένως, εάν δημιουργήσετε ένα χώρο συγκέντρωσης χώρου αποθήκευσης με τέσσερις δεδομένων δίσκων, τον αριθμό των στηλών είναι επίσης τέσσερις. Οποιαδήποτε στιγμή μπορείτε να επεκτείνετε το χώρο αποθήκευσης, πρέπει να προσθέσετε τουλάχιστον τέσσερις δεδομένων δίσκων.

![Επεκτείνετε μια μονάδα δίσκου για μια Εικονική SQL](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-extend-a-drive.png)

## <a name="storage-configuration"></a>Ρύθμιση παραμέτρων αποθήκευσης
Αυτή η ενότητα παρέχει μια αναφορά για τις αλλαγές ρύθμισης παραμέτρων χώρου αποθήκευσης που Azure εκτελεί αυτόματα κατά την προμήθεια Εικονική SQL ή ρύθμισης παραμέτρων στην πύλη του Azure.

- Εάν έχετε επιλέξει λιγότερα από δύο TBs χώρου αποθήκευσης για το Εικονική, Azure δεν δημιουργεί ένα χώρο συγκέντρωσης χώρου αποθήκευσης.
- Εάν έχετε επιλέξει τουλάχιστον δύο TBs χώρου αποθήκευσης για το Εικονική, Azure ρυθμίζει τις παραμέτρους ενός χώρου συγκέντρωσης χώρου αποθήκευσης. Στην επόμενη ενότητα αυτού του θέματος παρέχει τις λεπτομέρειες της ρύθμισης παραμέτρων του χώρου συγκέντρωσης χώρου αποθήκευσης.
- Ρύθμιση παραμέτρων αυτόματης αποθήκευσης πάντα χρησιμοποιεί [χώρο αποθήκευσης premium](../storage/storage-premium-storage.md) P30 δίσκων δεδομένων. Επομένως, δεν υπάρχει μια αντιστοίχιση 1:1 μεταξύ των terabyte τον επιλεγμένο αριθμό και τον αριθμό των δίσκων δεδομένων που έχουν επισυναφθεί σε Εικονική σας.

Για πληροφορίες για τις τιμές, ανατρέξτε στη σελίδα [χώρος αποθήκευσης τις τιμές](https://azure.microsoft.com/pricing/details/storage) στην καρτέλα **Χώρος αποθήκευσης στο δίσκο** .

### <a name="creation-of-the-storage-pool"></a>Η δημιουργία του χώρου συγκέντρωσης χώρου αποθήκευσης
Azure χρησιμοποιεί τις ακόλουθες ρυθμίσεις για να δημιουργήσετε το χώρο συγκέντρωσης χώρου αποθήκευσης σε SQL Server ΣΠΣ.

| Ρύθμιση | Τιμή |
|-----|-----|
| Μέγεθος διαγράμμισης  | 256 KB (αποθήκευση δεδομένων) 64 KB (συναλλαγών) |
| Μεγέθη δίσκων | 1 TB |
| Cache | Ανάγνωση |
| Μέγεθος εκχώρησης | Μέγεθος μονάδας εκχώρησης NTFS 64 KB |
| Προετοιμασία άμεσα αρχείου | Με δυνατότητα |
| Κλείδωμα σελίδων στη μνήμη | Με δυνατότητα |
| Ανάκτηση | Απλή αποκατάστασης (δεν υποστηρίζεται) |
| Αριθμός των στηλών | Αριθμός δίσκων δεδομένων<sup>1</sup> |
| Θέση TempDB | Είναι αποθηκευμένο στο δίσκων δεδομένων<sup>2</sup> |

<sup>1</sup> μετά τη δημιουργία του χώρου συγκέντρωσης χώρου αποθήκευσης, δεν μπορείτε να αλλάξετε τον αριθμό των στηλών στο χώρο συγκέντρωσης χώρου αποθήκευσης.

<sup>2</sup> αυτή η ρύθμιση ισχύει μόνο για την πρώτη μονάδα δίσκου που δημιουργείτε χρησιμοποιώντας τη δυνατότητα ρύθμισης παραμέτρων χώρου αποθήκευσης.

## <a name="workload-optimization-settings"></a>Ρυθμίσεις βελτιστοποίησης φόρτο εργασίας
Ο παρακάτω πίνακας περιγράφει τις διαθέσιμες επιλογές τύπου τρία φόρτο εργασίας και τις αντίστοιχες βελτιστοποιήσεις:

| Τύπος φόρτο εργασίας | Περιγραφή | Βελτιστοποιήσεις |
|-----|-----|-----|
| **Γενικά** | Προεπιλεγμένη ρύθμιση που υποστηρίζει περισσότερους φόρτους εργασίας | Κανένας |
| **Επεξεργασία συναλλαγών** | Βελτιστοποιεί το χώρο αποθήκευσης για φόρτους εργασίας Συναλλαγής παραδοσιακή βάση δεδομένων | Σημαία παρακολούθησης 1117<br/>Σημαία παρακολούθησης 1118 |
| **Αποθήκευση δεδομένων** | Βελτιστοποιεί το χώρο αποθήκευσης για φόρτους εργασίας ανάλυσης και αναφοράς | Σημαία παρακολούθησης 610<br/>Σημαία παρακολούθησης 1117 |

>[AZURE.NOTE] Μπορείτε να καθορίσετε τον τύπο φόρτο εργασίας μόνο κατά την προμήθεια μια εικονική μηχανή SQL επιλέγοντάς το στο βήμα ρύθμισης παραμέτρων χώρου αποθήκευσης.

## <a name="next-steps"></a>Επόμενα βήματα
Για άλλα θέματα που σχετίζονται με εκτελεί τον SQL Server στο ΣΠΣ Azure, ανατρέξτε στο θέμα [SQL Server σε εικονικές μηχανές Windows Azure](virtual-machines-windows-sql-server-iaas-overview.md).
