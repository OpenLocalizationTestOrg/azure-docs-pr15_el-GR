<properties
    pageTitle="Λεπτομερείς SSH αντιμετώπιση προβλημάτων για μια Εικονική Azure | Microsoft Azure"
    description="Πιο λεπτομερείς SSH βήματα για τη σύνδεση σε μια εικονική μηχανή Azure θέματα αντιμετώπισης προβλημάτων"
    keywords="SSH Άρνηση σύνδεσης, ssh σφάλμα, azure ssh, SSH σύνδεση απέτυχε"
    services="virtual-machines-linux"
    documentationCenter=""
    authors="iainfoulds"
    manager="timlt"
    editor=""
    tags="top-support-issue,azure-service-management,azure-resource-manager"/>

<tags
    ms.service="virtual-machines-linux"
    ms.workload="infrastructure-services"
    ms.tgt_pltfrm="vm-linux"
    ms.devlang="na"
    ms.topic="support-article"
    ms.date="09/01/2016"
    ms.author="iainfou"/>

# <a name="detailed-ssh-troubleshooting-steps"></a>Λεπτομερή βήματα αντιμετώπισης προβλημάτων SSH

Υπάρχουν πολλοί πιθανοί λόγοι για το πρόγραμμα-πελάτη SSH ίσως να μην μπορείτε να επικοινωνήσει με την υπηρεσία SSH στην η Εικονική. Εάν έχετε ακολουθήσει καθοδηγεί στα περισσότερα [γενικά βήματα αντιμετώπισης προβλημάτων SSH](virtual-machines-linux-troubleshoot-ssh-connection.md), πρέπει να επιλύσετε περαιτέρω το συγκεκριμένο πρόβλημα σύνδεσης. Σε αυτό το άρθρο σάς καθοδηγεί λεπτομερή βήματα αντιμετώπισης προβλημάτων για να προσδιορίσετε όπου η σύνδεση SSH αποτυγχάνει και τον τρόπο για να το επιλύσετε.

## <a name="take-preliminary-steps"></a>Κάνετε προκαταρκτικό βήματα

Το παρακάτω διάγραμμα παρουσιάζει τα στοιχεία που αφορούν.

![Διάγραμμα που εμφανίζει τα στοιχεία της υπηρεσίας SSH](./media/virtual-machines-linux-detailed-troubleshoot-ssh-connection/ssh-tshoot1.png)

Ακολουθήστε τα παρακάτω βήματα θα σας βοηθήσει να απομονώσετε την προέλευση της αποτυχίας και να υπολογίσετε λύσεις.

Πρώτα, ελέγξτε την κατάσταση της η Εικονική στην πύλη.

Στην [πύλη του Azure](https://portal.azure.com):

1. Για ΣΠΣ που έχουν δημιουργηθεί με τη χρήση του μοντέλου κλασική ανάπτυξης, επιλέξτε **Αναζήτηση** > **εικονικές μηχανές (κλασική)** > *Εικονική όνομα*.

    -Ή-

    Για ΣΠΣ που έχουν δημιουργηθεί με τη χρήση του μοντέλου από διαχειριστή πόρων, επιλέξτε **Αναζήτηση** > **εικονικές μηχανές** > *Εικονική όνομα*.

    Το παράθυρο κατάστασης για την εικονική Μηχανή θα πρέπει να εμφανίζουν **εκτελείται**. Κάντε κύλιση προς τα κάτω για εμφάνιση πρόσφατη δραστηριότητα για υπολογισμού, το χώρο αποθήκευσης και πόρων δικτύου.

2. Επιλέξτε **Ρυθμίσεις** για να εξετάσετε τα τελικά σημεία, διευθύνσεις IP και άλλες ρυθμίσεις.

    Για να προσδιορίσετε τα τελικά σημεία στο ΣΠΣ που έχουν δημιουργηθεί με τη χρήση της διαχείρισης πόρων, βεβαιωθείτε ότι έχει καθοριστεί μια [ομάδα ασφαλείας δικτύου](../virtual-network/virtual-networks-nsg.md) . Επίσης, βεβαιωθείτε ότι έχουν εφαρμοστεί οι κανόνες στην ομάδα ασφαλείας δικτύου και ότι είστε οποία αναφορά στο δευτερεύον.

Στην [πύλη του Azure κλασική](https://manage.windowsazure.com), για ΣΠΣ που έχουν δημιουργηθεί με τη χρήση του μοντέλου κλασική ανάπτυξη:

1. Επιλέξτε **εικονικές μηχανές** > *Εικονική όνομα*.
2. Επιλέξτε την εικονική Μηχανή **πίνακα εργαλείων** για να ελέγξετε την κατάστασή του.
3. Επιλέξτε **την οθόνη** για να δείτε πρόσφατες δραστηριότητας για υπολογισμού, το χώρο αποθήκευσης και πόρων δικτύου.
4. Επιλέξτε **τα τελικά σημεία** για να βεβαιωθείτε ότι υπάρχει ένα τελικό σημείο για την κίνηση SSH.

Για να επαληθεύσετε τη σύνδεση δικτύου, ελέγξτε τα τελικά σημεία έχει ρυθμιστεί και δείτε εάν μπορείτε να επικοινωνήσετε η Εικονική μέσω άλλο πρωτόκολλο, όπως HTTP ή κάποια άλλη υπηρεσία.

Μετά από αυτά τα βήματα, δοκιμάστε ξανά τη σύνδεση SSH.


## <a name="find-the-source-of-the-issue"></a>Βρείτε την προέλευση του ζητήματος

Το πρόγραμμα-πελάτη SSH στον υπολογιστή σας ενδέχεται να αποτύχει για την επίτευξη της υπηρεσίας SSH σε η Εικονική Azure οφείλεται σε προβλήματα ή εσφαλμένες ρυθμίσεις το εξής:

- [Υπολογιστής-πελάτης SSH](#source-1-ssh-client-computer)
- [Συσκευή άκρη εταιρείας](#source-2-organization-edge-device)
- [Τελικού σημείου υπηρεσίας στο cloud και αποκτήστε πρόσβαση στο στοιχείο ελέγχου λίστας (ACL)](#source-3-cloud-service-endpoint-and-acl)
- [Ομάδες ασφαλείας δικτύου](#source-4-network-security-groups)
- [Βάσει Linux Εικονική Azure](#source-5-linux-based-azure-virtual-machine)

## <a name="source-1-ssh-client-computer"></a>Προέλευση 1: SSH υπολογιστή-πελάτη

Για να αποκλείσετε τον υπολογιστή σας ως την προέλευση της αποτυχίας, επιβεβαιώστε ότι το μπορεί να κάνει SSH συνδέσεων σε μια άλλη στην εσωτερική εγκατάσταση, υπολογιστή που βασίζεται σε Linux.

![Διάγραμμα που επισημαίνει στοιχεία υπολογιστή SSH προγράμματος-πελάτη](./media/virtual-machines-linux-detailed-troubleshoot-ssh-connection/ssh-tshoot2.png)

Εάν η σύνδεση αποτύχει, ελέγξτε τα εξής στον υπολογιστή σας:

- Μια ρύθμιση τοπικού τείχους προστασίας που αποκλείει εισερχομένων ή εξερχομένων κίνηση SSH (TCP 22)
- Τοπικά εγκατεστημένο λογισμικό διακομιστή μεσολάβησης προγράμματος-πελάτη που εμποδίζει SSH συνδέσεις
- Τοπικά εγκατεστημένο λογισμικό που δεν επιτρέπει συνδέσεις SSH εποπτείας δικτύου
- Άλλοι τύποι λογισμικού ασφαλείας που παρακολουθούν την κυκλοφορία ή να επιτρέψετε/απενεργοποίηση συγκεκριμένους τύπους κίνησης

Εάν ισχύει μία από αυτές τις συνθήκες, προσωρινή απενεργοποίηση του λογισμικού και δοκιμάστε μια σύνδεση SSH σε έναν υπολογιστή εσωτερικής εγκατάστασης για να μάθετε το λόγο της σύνδεσης έχει αποκλειστεί στον υπολογιστή σας. Στη συνέχεια, να εργαστείτε με το διαχειριστή του δικτύου σας για να διορθώσετε τις ρυθμίσεις του λογισμικού να επιτρέπουν συνδέσεις SSH.

Εάν χρησιμοποιείτε το πιστοποιητικό ελέγχου ταυτότητας, βεβαιωθείτε ότι έχετε αυτά τα δικαιώματα στο φάκελο .ssh στον κατάλογο της οικίας σας:

- Chmod 700 ~/.ssh
- ~/.Ssh/ chmod 644\*.pub
- ~/.Ssh/id_rsa chmod 600 (ή άλλα αρχεία που έχουν τα ιδιωτικά κλειδιά που είναι αποθηκευμένα σε τους)
- Chmod 644 ~/.ssh/known_hosts (περιέχει κεντρικούς υπολογιστές που έχετε συνδέσει μέσω SSH)

## <a name="source-2-organization-edge-device"></a>Προέλευση 2: Συσκευή άκρη εταιρεία

Για να αποκλείσετε τη συσκευή σας εταιρεία άκρη ως την προέλευση της αποτυχίας, επιβεβαιώστε ότι έναν υπολογιστή ο οποίος συνδέεται απευθείας στο Internet μπορεί να κάνει SSH συνδέσεις για να σας Εικονική Azure. Εάν έχετε πρόσβαση σε η Εικονική επάνω σε ένα VPN-τοποθεσίας ή μια σύνδεση Azure ExpressRoute, μεταβείτε στο [προέλευσης 4: δικτύου ομάδες ασφαλείας](#nsg).

![Διάγραμμα που επισημαίνει συσκευής ορίου εταιρείας](./media/virtual-machines-linux-detailed-troubleshoot-ssh-connection/ssh-tshoot3.png)

Εάν δεν έχετε έναν υπολογιστή που είναι απευθείας συνδεδεμένοι στο Internet, δημιουργήστε μια νέα Εικονική Azure στη δική του ομάδα πόρων ή υπηρεσία στο cloud και χρησιμοποιήστε το. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Δημιουργία μια εικονική μηχανή εκτελείται Linux στο Azure](virtual-machines-linux-quick-create-cli.md). Διαγραφή ομάδας πόρων ή της υπηρεσίας Εικονική και cloud όταν ολοκληρώσετε την εργασία με τις δοκιμές.

Εάν μπορείτε να δημιουργήσετε μια σύνδεση SSH με έναν υπολογιστή ο οποίος συνδέεται απευθείας στο Internet, ελέγξτε τη συσκευή σας εταιρεία άκρο για:

- Ένα εσωτερικό τείχος προστασίας που αποκλείει την κυκλοφορία SSH στο Internet
- Διακομιστής μεσολάβησης που εμποδίζει SSH συνδέσεις
- Ανίχνευση παραβίασης ή εποπτείας λογισμικό που εκτελείται σε συσκευές στο δίκτυό σας άκρο που εμποδίζει SSH συνδέσεις δικτύου

Εργασία με το διαχειριστή του δικτύου σας για να διορθώσετε τις ρυθμίσεις από τις συσκευές σας εταιρεία άκρο για να επιτρέψετε την κυκλοφορία SSH με το Internet.

## <a name="source-3-cloud-service-endpoint-and-acl"></a>Προέλευση 3: Τελικού σημείου υπηρεσίας Cloud και ACL

> [AZURE.NOTE] Αυτό το αρχείο προέλευσης ισχύει μόνο για ΣΠΣ που έχουν δημιουργηθεί με τη χρήση του μοντέλου κλασική ανάπτυξης. Για ΣΠΣ που έχουν δημιουργηθεί με τη χρήση της διαχείρισης πόρων, μεταβείτε στο [προέλευσης 4: δικτύου ομάδες ασφαλείας](#nsg).

Για να αποκλείσετε τις τελικού σημείου υπηρεσίας cloud και ACL ως την προέλευση της αποτυχίας, επιβεβαιώστε ότι ένα άλλο Εικονική Azure στο ίδιο δίκτυο εικονικού να κάνετε SSH συνδέσεις σε σας Εικονική.

![Διάγραμμα που επισημαίνει τελικού σημείου υπηρεσίας cloud και ACL](./media/virtual-machines-linux-detailed-troubleshoot-ssh-connection/ssh-tshoot4.png)

Εάν δεν έχετε ένα άλλο Εικονική στο ίδιο δίκτυο εικονικού, μπορείτε εύκολα να δημιουργήσετε ένα νέο. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Δημιουργία μια Εικονική Linux στην Azure χρησιμοποιώντας το CLI](virtual-machines-linux-quick-create-cli.md). Διαγράψτε την επιπλέον εικονική Μηχανή όταν τελειώσετε με τις δοκιμές.

Εάν μπορείτε να δημιουργήσετε μια σύνδεση SSH με μια Εικονική στο ίδιο δίκτυο εικονικού, ελέγξτε τα εξής:

- **Η ρύθμιση παραμέτρων ορίου για την κίνηση SSH στον προορισμό Εικονική.** Η ιδιωτική θύρα TCP του τελικού σημείου πρέπει να συμφωνεί με τη θύρα TCP στην οποία ακρόαση της υπηρεσίας SSH σε η Εικονική. (Η προεπιλεγμένη θύρα είναι 22). Για ΣΠΣ που έχουν δημιουργηθεί με τη χρήση του μοντέλου ανάπτυξης για τη διαχείριση πόρων, επιβεβαιώστε τον αριθμό θύρας SSH TCP στην πύλη του Azure, επιλέγοντας **Αναζήτηση** > **εικονικές μηχανές (v2)** > *όνομα Εικονική* > **Ρυθμίσεις** > **τελικά σημεία**.

- **Το ACL για το τελικό σημείο κίνηση SSH στον υπολογιστή εικονικές προορισμού.** Ένα ACL σάς επιτρέπει να καθορίσετε επιτρέπεται ή δεν επιτρέπεται η εισερχόμενη κυκλοφορία από το Internet, με βάση τη διεύθυνση IP προέλευσης. Έχουν εσφαλμένες παραμέτρους ACL να αποτρέψετε εισερχόμενη SSH κυκλοφορία για το τελικό σημείο. Ελέγξτε το ACL για να βεβαιωθείτε ότι η κυκλοφορία εισερχόμενες από τις δημόσιες διευθύνσεις IP του διακομιστή μεσολάβησης ή άλλες edge server επιτρέπεται. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [σχετικά με την πρόσβαση στο δίκτυο λίστες ελέγχου (ACL)](../virtual-network/virtual-networks-acl.md).

Για να αποφύγετε το τελικό σημείο ως προέλευση του προβλήματος, καταργήστε το τρέχον τελικό σημείο, δημιουργήστε ένα νέο τελικό σημείο και καθορίστε το όνομα SSH (θύρα TCP 22 για τον αριθμό θύρας δημόσια και ιδιωτικά). Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Ρύθμιση του σε μια εικονική μηχανή στο Azure τα τελικά σημεία](virtual-machines-windows-classic-setup-endpoints.md).

<a id="nsg"></a>
## <a name="source-4-network-security-groups"></a>Προέλευσης 4: Ομάδες ασφαλείας δικτύου

Ομάδες ασφαλείας δικτύου σάς επιτρέπουν να έχετε πιο λεπτομερή έλεγχο των επιτρεπόμενων εισερχόμενης και εξερχόμενης κυκλοφορίας. Μπορείτε να δημιουργήσετε κανόνες που εκτείνονται σε δευτερεύοντα δίκτυα και στο cloud services σε μια Azure εικονικού δικτύου. Έλεγχος κανόνων ομάδα ασφαλείας δικτύου για να βεβαιωθείτε ότι επιτρέπεται η κυκλοφορία SSH προς και από το Internet.
Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [σχετικά με τις ομάδες ασφαλείας δικτύου](../virtual-network/virtual-networks-nsg.md).

## <a name="source-5-linux-based-azure-virtual-machine"></a>Προέλευση 5: Βάσει Linux Azure εικονική μηχανή

Πιθανά προβλήματα της τελευταίας προέλευσης είναι η Azure εικονική μηχανή ίδια.

![Διάγραμμα που επισημαίνει βάσει Linux Azure εικονική μηχανή](./media/virtual-machines-linux-detailed-troubleshoot-ssh-connection/ssh-tshoot5.png)

Εάν δεν το έχετε κάνει ήδη, ακολουθήστε την οδηγίες [για να επαναφέρετε έναν κωδικό πρόσβασης ή SSH για βάσει Linux εικονικές μηχανές](virtual-machines-linux-classic-reset-access.md).

Προσπαθήστε να συνδεθείτε ξανά από τον υπολογιστή σας. Εάν εξακολουθείτε να αποτύχει, ακολουθούν ορισμένα από τα πιθανά θέματα:

- Η υπηρεσία SSH δεν εκτελείται στον υπολογιστή εικονικές προορισμού.
- Η υπηρεσία SSH δεν εκτελεί ακρόαση στη θύρα TCP 22. Για να δοκιμάσετε αυτό, εγκαταστήστε ένα πρόγραμμα-πελάτη telnet στον τοπικό υπολογιστή σας και να εκτελέσετε "telnet *cloudServiceName*. cloudapp.net 22". Καθορίζει εάν η εικονική μηχανή επιτρέπει εισερχόμενων και εξερχόμενων επικοινωνία με το τελικό σημείο SSH.
- Το τοπικό τείχος προστασίας για την εικονική μηχανή προορισμού έχει κανόνες που εμποδίζουν την κυκλοφορία SSH εισερχομένων ή εξερχομένων.
- Ανίχνευση παραβίασης ή εποπτείας λογισμικό που εκτελείται στον υπολογιστή Azure εικονικές δικτύου δεν επιτρέπει SSH συνδέσεις.


## <a name="additional-resources"></a>Πρόσθετοι πόροι
Για περισσότερες πληροφορίες σχετικά με την αντιμετώπιση προβλημάτων πρόσβασης εφαρμογή, ανατρέξτε στο θέμα [Αντιμετώπιση προβλημάτων πρόσβασης σε μια εφαρμογή που εκτελείται σε μια εικονική μηχανή Azure](virtual-machines-linux-troubleshoot-app-connection.md)