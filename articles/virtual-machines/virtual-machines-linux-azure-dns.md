<properties 
   pageTitle="Οι επιλογές επίλυσης ονόματος DNS για ΣΠΣ Linux στο Azure"
   description="Όνομα υπηρεσίες DNS σενάρια για ΣΠΣ Linux στο IaaS Azure, συμπεριλαμβανομένων των που παρέχονται επίλυσης, υβριδική εξωτερικών DNS και μεταφορά των δικών DNS server."
   services="virtual-machines"
   documentationCenter="na"
   authors="RicksterCDN"
   manager="timlt"
   editor="tysonn" />
<tags 
   ms.service="virtual-machines-linux"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="10/19/2016"
   ms.author="rclaus" />

# <a name="dns-name-resolution-options-for-linux-vms-in-azure"></a>Οι επιλογές επίλυσης ονόματος DNS για ΣΠΣ Linux στο Azure

Azure παρέχει επίλυση ονομάτων DNS από προεπιλογή για όλες ΣΠΣ περιέχεται μέσα σε ένα μεμονωμένο εικονικού δικτύου. Είστε σε θέση να υλοποιήσετε το δικό σας λύση επίλυση ονομάτων DNS, ρυθμίζοντας τις παραμέτρους τις δικές σας υπηρεσίες DNS σε σας Azure φιλοξενούμενη VM. Τα ακόλουθα σενάρια θα πρέπει να σας βοηθήσει να επιλέξετε αυτήν που λειτουργεί καλύτερα για την περίπτωσή σας.

- [Επίλυση ονόματος που παρέχονται από Azure](#azure-provided-name-resolution)

- [Επίλυση ονόματος χρησιμοποιώντας το δικό σας διακομιστή DNS](#name-resolution-using-your-own-dns-server) 

Ο τύπος του επίλυση ονομάτων που μπορείτε να χρησιμοποιήσετε εξαρτάται από το πώς σας ΣΠΣ και ρόλων παρουσίες πρέπει να επικοινωνούν μεταξύ τους.

**Ο παρακάτω πίνακας παρουσιάζει σενάρια και τις αντίστοιχες λύσεις ανάλυση όνομα:**

| **Σενάριο** | **Λύση** | **Επίθημα** |
|--------------|--------------|----------|
| Επίλυση ονομάτων μεταξύ παρουσιών ρόλο ή ΣΠΣ που βρίσκεται στο ίδιο δίκτυο εικονικού | [Επίλυση ονόματος που παρέχονται από Azure](#azure-provided-name-resolution)| όνομα κεντρικού υπολογιστή ή FQDN |
| Επίλυση ονομάτων μεταξύ παρουσιών ρόλο ή ΣΠΣ που βρίσκονται σε διαφορετική εικονικών δικτύων | Διαχείριση πελατών διακομιστές DNS προώθησης ερωτήματα μεταξύ vnets για την επίλυση από Azure (διακομιστής μεσολάβησης DNS).  ανατρέξτε στην ενότητα [επίλυση ονομάτων χρησιμοποιώντας το δικό σας διακομιστή DNS](#name-resolution-using-your-own-dns-server)| FQDN μόνο |
| Ανάλυση των ονομάτων και υπηρεσία υπολογιστή εσωτερικής εγκατάστασης από το ρόλο παρουσιών ή ΣΠΣ στο Azure | Διαχείριση πελατών διακομιστές DNS (για παράδειγμα, ελεγκτή τομέα εσωτερικής εγκατάστασης, τοπικό μόνο για ανάγνωση ελεγκτή τομέα ή μια δευτερεύουσα DNS συγχρονίσει χρησιμοποιώντας μεταφορές ζώνης).  Ανατρέξτε στην ενότητα [επίλυση ονομάτων χρησιμοποιώντας το δικό σας διακομιστή DNS](#name-resolution-using-your-own-dns-server)|FQDN μόνο |
| Ανάλυση του Azure ονόματα από τους υπολογιστές εσωτερική εγκατάσταση | Προώθηση ερωτημάτων για Διαχείριση πελατών DNS διακομιστή μεσολάβησης στο το αντίστοιχο vnet, το διακομιστή μεσολάβησης προωθεί ερωτήματα στην Azure για ανάλυση. Ανατρέξτε στην ενότητα [επίλυση ονομάτων χρησιμοποιώντας το δικό σας διακομιστή DNS](#name-resolution-using-your-own-dns-server)| FQDN μόνο |
| Αντίστροφη DNS για διευθύνσεις IP του εσωτερικού | [Επίλυση ονόματος χρησιμοποιώντας το δικό σας διακομιστή DNS](#name-resolution-using-your-own-dns-server) | δ/υ |

## <a name="azure-provided-name-resolution"></a>Επίλυση ονόματος που παρέχονται από Azure

Μαζί με την ανάλυση της δημόσιας ονομάτων DNS, Azure παρέχει λύση όνομα εσωτερικού για ΣΠΣ και παρουσίες ρόλο που βρίσκονται μέσα στο ίδιο δίκτυο εικονικού.  Στο τεχνολογίας ARM εικονικού δίκτυα, το επίθημα DNS είναι συνεπείς σε ολόκληρο το εικονικό δίκτυο (έτσι δεν είναι απαραίτητες για το FQDN) και ονόματα DNS μπορεί να αντιστοιχιστεί σε NIC και ΣΠΣ. Παρόλο που η επίλυση ονομάτων που παρέχονται από Azure δεν απαιτεί οποιαδήποτε ρύθμιση παραμέτρων, δεν είναι η κατάλληλη επιλογή για όλα τα σενάρια ανάπτυξης, όπως φαίνεται στον προηγούμενο πίνακα.

### <a name="features-and-considerations"></a>Δυνατότητες και τα θέματα

**Δυνατότητες:**

- Ευκολία στη χρήση: ρύθμιση των παραμέτρων δεν απαιτείται για τη χρήση επίλυση ονομάτων που παρέχονται από Azure.

- Η υπηρεσία επίλυσης ονομάτων που παρέχονται από Azure είναι ιδιαίτερα διαθέσιμο, χωρίς να χρειάζεται να δημιουργήσετε και να διαχειριστείτε συμπλεγμάτων των δικών σας διακομιστών DNS.

- Μπορεί να χρησιμοποιηθεί μαζί με το δικό σας διακομιστές DNS για να επιλύσετε το εσωτερικής εγκατάστασης και το Azure ονόματα.

- Επίλυση ονόματος παρέχεται μεταξύ ΣΠΣ στο εικονικού δίκτυα, χωρίς να χρειάζεται το FQDN. 

- Μπορείτε να χρησιμοποιήσετε ονόματα που περιγράφουν καλύτερα αναπτύξεις σας, και όχι την εργασία με ονόματα που δημιουργείται αυτόματα.

**Ζητήματα:**

- Το επίθημα DNS δημιουργήθηκε Azure δεν μπορεί να τροποποιηθεί.

- Δεν είναι δυνατό να καταχωρείτε με μη αυτόματο τρόπο τις δικές σας εγγραφές.

- WINS και NetBIOS δεν υποστηρίζονται.

- Ονόματα πρέπει να είναι συμβατό με DNS (πρέπει να χρησιμοποιήσουν μόνο 0-9, a-ω και '-', και δεν είναι δυνατό να αρχίζει ή να τελειώνει με μια '-'. Στην ενότητα RFC 3696 2.)

- Κίνηση ερωτημάτων DNS είναι επιβραδύνει για κάθε Εικονική. Αυτό πρέπει να επηρεάσουν περισσότερες εφαρμογές.  Εάν ο περιορισμός αιτήσεων παρατηρείται, βεβαιωθείτε ότι είναι ενεργοποιημένη η προσωρινή αποθήκευση πλευρά του προγράμματος-πελάτη.  Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Αξιοποιήστε τη επίλυση ονομάτων που παρέχονται από Azure](#Getting-the-most-from-Azure-provided-name-resolution).


### <a name="getting-the-most-from-azure-provided-name-resolution"></a>Γρήγορα τα περισσότερα από επίλυση ονομάτων που παρέχονται από Azure
**Προσωρινή αποθήκευση πλευρά του προγράμματος-πελάτη:**

Δεν κάθε ερώτημα DNS αποστέλλεται μέσω του δικτύου.  Προσωρινή αποθήκευση πλευρά του προγράμματος-πελάτη σας βοηθά να μειώσετε λανθάνων χρόνος και να βελτιώσετε ανθεκτικότητα σε blips δικτύου με την επίλυση περιοδική ερωτήματα DNS από ένα τοπικό cache.  Εγγραφές DNS περιέχει ένα Time To Live (TTL) που σας επιτρέπει το cache για να αποθηκεύσετε την εγγραφή για το χρονικό διάστημα όσο το δυνατόν χωρίς να επηρεάζονται ενημέρωση εγγραφών.  Αυτόν το λόγο, σε cache πλευρά του προγράμματος-πελάτη είναι κατάλληλη για τις περισσότερες καταστάσεις.

Ορισμένες distros Linux δεν περιλαμβάνει σε cache από προεπιλογή.  Συνιστάται να προσθέτετε μία για κάθε Εικονική Linux (μετά τον έλεγχο ότι δεν υπάρχει ένα τοπικό cache ήδη).

Υπάρχουν πολλές διαφορετικές DNS σε cache πακέτα διαθέσιμη, για παράδειγμα dnsmasq, ακολουθούν τα βήματα για να εγκαταστήσετε το dnsmasq σε τα πιο συνηθισμένα distros:

- **Ubuntu (χρησιμοποιεί resolvconf)**:
    - Εγκαταστήστε το πακέτο dnsmasq ("sudo κατάλληλη λήψη εγκατάσταση dnsmasq").
- **SUSE (χρησιμοποιεί netconf)**:
    - εγκατάσταση του πακέτου dnsmasq ("sudo zypper εγκατάσταση dnsmasq") 
    - Ενεργοποίηση της υπηρεσίας dnsmasq ("systemctl Ενεργοποίηση dnsmasq.service") 
    - εκκίνηση της υπηρεσίας dnsmasq ("systemctl Έναρξη dnsmasq.service") 
    - Επεξεργασία "/ κ.λπ/sysconfig/δικτύου/ρύθμισης παραμέτρων" και να αλλάξετε NETCONFIG_DNS_FORWARDER = "" σε "dnsmasq"
    - Ενημέρωση resolv.conf ("netconfig ενημέρωσης") για να ορίσετε το cache ως το τοπικό πρόγραμμα επίλυσης DNS
- **OpenLogic (χρησιμοποιεί NetworkManager)**:
    - εγκατάσταση του πακέτου dnsmasq ("sudo yum εγκατάσταση dnsmasq")
    - Ενεργοποίηση της υπηρεσίας dnsmasq ("systemctl Ενεργοποίηση dnsmasq.service")
    - εκκίνηση της υπηρεσίας dnsmasq ("systemctl Έναρξη dnsmasq.service")
    - Προσθήκη "ξεκινούν-τους διακομιστές ονομάτων τομέα 127.0.0.1;" σε "/etc/dhclient-eth0.conf"
    - Επανεκκινήστε την υπηρεσία δικτύου ("δίκτυο επανεκκίνηση της υπηρεσίας") για να ορίσετε το cache ως το τοπικό πρόγραμμα επίλυσης DNS

> [AZURE.NOTE]: Το πακέτο 'dnsmasq' είναι μόνο ένα από τα πολλά DNS μνήμης cache διαθέσιμη για Linux.  Πριν να το χρησιμοποιήσετε, ελέγξτε την καταλληλότητα για τις συγκεκριμένες ανάγκες σας και που είναι εγκατεστημένη χωρίς άλλες cache.

**Επαναλήψεις πλευρά του προγράμματος-πελάτη:**

Το DNS είναι κυρίως ένα πρωτόκολλο UDP.  Καθώς το πρωτόκολλο UDP δεν εγγυάται την παράδοση του μηνύματος, λογικής "Επανάληψη" γίνεται με το ίδιο το πρωτόκολλο DNS.  Κάθε υπολογιστής-πελάτης DNS (λειτουργικό σύστημα) μπορεί να παρουσιάζουν διαφορετικές "Επανάληψη" λογική ανάλογα με την προτίμηση τους δημιουργούς:

 - Λειτουργικά συστήματα Windows επανάληψης μετά από ένα δεύτερο και, στη συνέχεια, ξανά μετά από μια άλλη δύο, τεσσάρων και ένα άλλο τεσσάρων δευτερολέπτων. 
 - Το πρόγραμμα εγκατάστασης επαναλήψεις Linux προεπιλεγμένη μετά από πέντε δευτερόλεπτα.  Θα πρέπει να αλλάξετε αυτό για να επαναλάβετε την πέντε φορές σε χρονικά διαστήματα δευτερόλεπτο.  

Για να ελέγξετε τις τρέχουσες ρυθμίσεις σε μια Εικονική Linux '/etc/resolv.conf γάτα' και κοιτάξτε στη γραμμή "Επιλογές", για παράδειγμα:

    options timeout:1 attempts:5

Το αρχείο resolv.conf δημιουργείται αυτόματα και δεν θα πρέπει να υποστεί επεξεργασία.  Τα συγκεκριμένα βήματα για να προσθέσετε στη γραμμή 'Επιλογές' ποικίλλουν ανάλογα με distro:

- **Ubuntu** (χρησιμοποιεί resolvconf):
    - στη γραμμή επιλογών για να προσθέσετε ' / etc/resolveconf/resolv.conf.d/head' 
    - Εκτέλεση 'resolvconf -u' για να ενημερώσετε
- **SUSE** (χρησιμοποιεί netconf):
    - Προσθήκη 'timeout:1 προσπάθειες: 5' για να το NETCONFIG_DNS_RESOLVER_OPTIONS = "" παραμέτρου σε '/ κ.λπ/sysconfig/δικτύου/config' 
    - Εκτέλεση "Ενημέρωση netconfig" για να ενημερώσετε
- **OpenLogic** (χρησιμοποιεί NetworkManager):
    - Προσθήκη 'Αντήχηση "timeout:1 επιλογές προσπάθειες: 5" ' στο ' / etc/NetworkManager/dispatcher.d/11-dhclient' 
    - Εκτέλεση "υπηρεσίας επανεκκίνηση δικτύου" για να ενημερώσετε

## <a name="name-resolution-using-your-own-dns-server"></a>Επίλυση ονόματος χρησιμοποιώντας το δικό σας διακομιστή DNS
Υπάρχουν πολλές περιπτώσεις όπου τις ανάγκες σας επίλυση ονομάτων μπορεί να πέρα από τις δυνατότητες που παρέχονται από Azure, για παράδειγμα όταν χρειάζεστε επίλυσης DNS μεταξύ εικονικού δικτύων (vnets).  Για να καλύψετε αυτό το σενάριο, Azure παρέχει τη δυνατότητα να χρησιμοποιήσετε τη δική σας διακομιστές DNS.  

Οι διακομιστές DNS μέσα σε ένα εικονικό δίκτυο να προωθήσετε ερωτήματα DNS σε στοιχεία επίλυσης επαναλαμβανόμενες του Azure για να επιλύσετε ονόματα μέσα σε αυτό το εικονικό δίκτυο.  Για παράδειγμα, διακομιστή DNS που εκτελείται στο Azure να απαντήσετε σε ερωτήματα DNS για το δικό της αρχεία ζώνης DNS και να προωθείτε όλα τα ερωτήματα σε Azure.  Αυτό σας επιτρέπει ΣΠΣ για να δείτε και τις δύο τις καταχωρήσεις σας σε αρχεία ζώνη και ονόματα που παρέχονται από Azure (μέσω του προώθησης).  Πρόσβαση σε στοιχεία του Azure επαναλαμβανόμενες επίλυσης παρέχεται μέσω το εικονικό IP 168.63.129.16.

Επίσης, προώθησης DNS σας δίνει τη δυνατότητα επίλυσης DNS μεταξύ vnet και επιτρέπει στους υπολογιστές σας εσωτερική εγκατάσταση για να επιλύσετε ονόματα που παρέχονται από Azure.  Για να επιλύσετε μια Εικονική όνομα κεντρικού υπολογιστή, το διακομιστή DNS Εικονική πρέπει να βρίσκονται στο ίδιο δίκτυο εικονικού και να έχει ρυθμιστεί για την προώθηση hostname ερωτημάτων για Azure.  Καθώς το επίθημα DNS είναι διαφορετικό σε κάθε vnet, μπορείτε να χρησιμοποιήσετε κανόνες προώθησης υπό όρους για να στείλετε τα ερωτήματα DNS για το σωστό vnet για την επίλυση.  Η παρακάτω εικόνα εμφανίζει δύο vnets και ένα δίκτυο εσωτερικής εγκατάστασης με τον τρόπο επίλυσης DNS μεταξύ vnet χρησιμοποιώντας αυτήν τη μέθοδο:

![Μεταξύ vnet DNS](./media/virtual-machines-linux-azure-dns/inter-vnet-dns.png)

Όταν χρησιμοποιείτε επίλυση ονομάτων που παρέχονται από Azure, το επίθημα DNS εσωτερικό παρέχεται σε κάθε Εικονική χρησιμοποιώντας DHCP.  Όταν χρησιμοποιείτε το δικό σας όνομα λύσης ανάλυση, αυτό το επίθημα δεν παρέχονται στο ΣΠΣ επειδή επηρεάζει άλλες αρχιτεκτονικές DNS.  Για να ανατρέξετε σε υπολογιστές με FQDN ή για να ρυθμίσετε το επίθημα σε ΣΠΣ σας, το επίθημα μπορεί να προσδιοριστεί με τη χρήση του PowerShell ή το API:

-  Για διαχείριση πόρων Azure διαχειριζόμενων vnets, το πρόθεμα είναι διαθέσιμα μέσω του πόρου [κάρτα περιβάλλοντος εργασίας δικτύου](https://msdn.microsoft.com/library/azure/mt163668.aspx) ή μπορείτε να εκτελέσετε την εντολή `azure network public-ip show <resource group> <pip name>` για να εμφανίσετε τις λεπτομέρειες της IP σας δημόσια, όπως το FQDN του nic.    


Εάν προώθηση ερωτήματα σε Azure δεν καλύπτει τις ανάγκες σας, πρέπει να παρέχετε τις δικές σας λύση DNS.  Η λύση DNS πρέπει να:

-  Παρέχουν ανάλυση κατάλληλο όνομα κεντρικού υπολογιστή, για παράδειγμα μέσω [DDNS](../virtual-network/virtual-networks-name-resolution-ddns.md).  Σημείωση, εάν χρησιμοποιείτε DDNS που ίσως χρειαστεί να απενεργοποιήσετε την εγγραφή εκκαθάριση DNS όπως χρήσεων DHCP του Azure είναι πολύ μεγάλη και εκκαθάρισης ενδέχεται να καταργήσετε τις εγγραφές DNS πρόωρα. 
-  Παρέχουν κατάλληλο επαναλαμβανόμενη ανάλυση για να επιτρέψετε επίλυση ονομάτων εξωτερικού τομέα.
-  Είναι προσβάσιμα (TCP και UDP στη θύρα 53) από τα προγράμματα-πελάτες εξυπηρετεί και μπορεί να αποκτήσει πρόσβαση στο internet.
-  Είναι ασφαλή σε σχέση με πρόσβαση από το internet, για να συμβάλει στην αντιμετώπιση απειλές που προκύπτουν από εξωτερικούς παράγοντες.

> [AZURE.NOTE] Για καλύτερες επιδόσεις, όταν χρησιμοποιείτε ΣΠΣ Azure ως διακομιστές DNS, θα πρέπει να απενεργοποιηθεί IPv6 και μια [Δημόσια IP επιπέδου παρουσίας](../virtual-network/virtual-networks-instance-level-public-ip.md) πρέπει να αντιστοιχίζονται σε κάθε διακομιστή DNS Εικονική.  

