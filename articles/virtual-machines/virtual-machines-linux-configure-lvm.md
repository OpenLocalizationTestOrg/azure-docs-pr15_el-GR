<properties 
    pageTitle="Ρύθμιση παραμέτρων LVM σε μια εικονική μηχανή εκτελείται Linux | Microsoft Azure" 
    description="Μάθετε πώς μπορείτε να ρυθμίσετε τις παραμέτρους LVM σε Linux στο Azure." 
    services="virtual-machines-linux" 
    documentationCenter="na" 
    authors="szarkos"  
    manager="timlt" 
    editor="tysonn"
    tag="azure-service-management,azure-resource-manager" />

<tags 
    ms.service="virtual-machines-linux" 
    ms.workload="infrastructure-services" 
    ms.tgt_pltfrm="vm-linux" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="08/24/2016" 
    ms.author="szark"/>


# <a name="configure-lvm-on-a-linux-vm-in-azure"></a>Ρύθμιση παραμέτρων LVM σε μια Εικονική Linux στα Azure

Αυτό το έγγραφο θα περιγράφουν τον τρόπο ρύθμισης παραμέτρων λογική ένταση Manager (LVM) στον υπολογιστή σας Azure εικονική. Ενώ είναι εφικτό να ρυθμίσετε τις παραμέτρους LVM σε οποιονδήποτε δίσκο που έχουν επισυναφθεί σε η εικονική μηχανή, από προεπιλογή περισσότερες εικόνες cloud δεν θα έχετε ρυθμίσει τις παραμέτρους του δίσκου OS LVM. Πρόκειται για να αποφύγετε προβλήματα με τις ομάδες διπλότυπες όγκου εάν ο δίσκος OS ποτέ συνδέεται με άλλη Εικονική της ίδιας διανομής και τύπος, π.χ. κατά τη διάρκεια ένα σενάριο αποκατάστασης. Επομένως συνιστάται μόνο για να χρησιμοποιήσετε LVM των δίσκων δεδομένων.


## <a name="linear-vs-striped-logical-volumes"></a>Γραμμική έναντι ραβδωτό όγκους λογική

LVM μπορεί να χρησιμοποιηθεί για να συνδυάσετε έναν αριθμό των φυσικών δίσκων σε ένα μεμονωμένο όγκο. Από προεπιλογή LVM θα συνήθως Δημιουργήστε γραμμικές λογική όγκους, γεγονός που σημαίνει ότι ο φυσικός χώρος αποθήκευσης είναι συνδέονται μεταξύ τους. Σε αυτήν την περίπτωση λειτουργίες ανάγνωσης/εγγραφής συνήθως μόνο αποστέλλονται σε έναν μόνο δίσκο. Αντίθετα, μπορούμε να δημιουργήσουμε επίσης ραβδωτό λογική όγκους όπου είναι κατανεμημένες ανάγνωσης και εγγραφής σε πολλές δίσκων που περιέχονται στην ομάδα ένταση (δηλαδή είναι παρόμοια με RAID0). Για λόγους απόδοσης είναι πιθανό που θα θέλετε να διαγραμμίσεων σας λογική όγκους ώστε να ανάγνωσης και εγγραφής χρησιμοποιούν όλων των δίσκων σας συνημμένα δεδομένα.

Αυτό το έγγραφο θα περιγράφουν τον τρόπο συνδυασμός διάφορες δίσκων δεδομένων σε μια ομάδα μία έντασης ήχου και, στη συνέχεια, να δημιουργήσετε ένα ραβδωτό λογικού τόμου. Τα παρακάτω βήματα είναι κάπως γενίκευση για να εργαστείτε με τα περισσότερα κατανομές. Στις περισσότερες περιπτώσεις βοηθητικών προγραμμάτων και ροές εργασίας για τη Διαχείριση LVM στην Azure δεν είναι ουσιαστικά διαφορετικά από άλλα περιβάλλοντα. Όπως συνήθως, επίσης συμβουλευτείτε τον προμηθευτή Linux για τεκμηρίωση και βέλτιστες πρακτικές για τη χρήση LVM με το συγκεκριμένο διανομής.


## <a name="attaching-data-disks"></a>Επισύναψη δίσκων δεδομένων
Μία συνήθως θα θέλετε να ξεκινήσετε με δύο ή περισσότερων δίσκων κενή δεδομένων κατά τη χρήση LVM. Ανάλογα με τις ανάγκες εισόδου/ΕΞΌΔΟΥ, μπορείτε να επιλέξετε να επισυνάψετε δίσκων που είναι αποθηκευμένα σε μας τυπική χώρο αποθήκευσης, με έως και 500 εισόδου/ΕΞΌΔΟΥ/ps ανά δίσκο ή το χώρο αποθήκευσης Premium με έως 5000 εισόδου/ΕΞΌΔΟΥ/ps ανά δίσκο. Σε αυτό το άρθρο δεν μεταβαίνουν σε λεπτομέρειες σχετικά με τον τρόπο για να προμηθεύσουν και να επισυνάψετε δίσκων δεδομένων σε μια εικονική μηχανή Linux. Ανατρέξτε στο άρθρο του Microsoft Azure άρθρο [επισυνάψτε ένα δίσκο](virtual-machines-linux-add-disk.md) για λεπτομερείς οδηγίες σχετικά με τον τρόπο για να επισυνάψετε ένα δίσκο κενή δεδομένων σε ένα εικονικό μηχάνημα Linux σε Azure.

## <a name="install-the-lvm-utilities"></a>Εγκατάσταση των βοηθητικών προγραμμάτων LVM

- **Ubuntu**

        # sudo apt-get update
        # sudo apt-get install lvm2

- **RHEL, CentOS & Oracle Linux**

        # sudo yum install lvm2

- **SLES 12 και openSUSE**

        # sudo zypper install lvm2

- **SLES 11**

        # sudo zypper install lvm2

    Στην SLES11 πρέπει να επίσης να επεξεργαστείτε /etc/sysconfig/lvm και να ορίσετε `LVM_ACTIVATED_ON_DISCOVERED` σε "Ενεργοποίηση":

        LVM_ACTIVATED_ON_DISCOVERED="enable" 


## <a name="configure-lvm"></a>Ρύθμιση παραμέτρων LVM
Σε αυτόν τον οδηγό θα υποθέσουμε ότι έχετε επισυνάψει τρεις δίσκων δεδομένων, η οποία θα αναφέρονται ως `/dev/sdc`, `/dev/sdd` και `/dev/sde`. Σημειώστε ότι αυτά ενδέχεται να μην πάντα είναι τα ίδια ονόματα διαδρομής σε Εικονική σας. Μπορείτε να εκτελέσετε '`sudo fdisk -l`' ή μια παρόμοια εντολή στη λίστα διαθέσιμα δίσκων σας.

1. Προετοιμάστε το φυσικό όγκους:

        # sudo pvcreate /dev/sd[cde]
          Physical volume "/dev/sdc" successfully created
          Physical volume "/dev/sdd" successfully created
          Physical volume "/dev/sde" successfully created


2.  Δημιουργήστε μια ομάδα έντασης ήχου. Σε αυτό το παράδειγμα μας καλείτε την ένταση ομάδα "δεδομένα-vg01":

        # sudo vgcreate data-vg01 /dev/sd[cde]
          Volume group "data-vg01" successfully created


3. Δημιουργήστε τη λογική τόμων. Η εντολή κάτω από το θα σας θα δημιουργήσει ένα μεμονωμένο λογικού τόμου που ονομάζεται "δεδομένων-lv01" εκτείνονται σε ομάδα ολόκληρου του τόμου, αλλά Σημειώστε ότι είναι επίσης είναι εφικτό για να δημιουργήσετε πολλές λογικές όγκους στην ομάδα έντασης ήχου.

        # sudo lvcreate --extents 100%FREE --stripes 3 --name data-lv01 data-vg01
          Logical volume "data-lv01" created.


4. Μορφοποίηση λογικού τόμου

        # sudo mkfs -t ext4 /dev/data-vg01/data-lv01

  >[AZURE.NOTE] Με τη χρήση SLES11 "-t ext3" αντί για ext4. SLES11 υποστηρίζει μόνο την πρόσβαση μόνο για ανάγνωση σε ext4 filesystems.


## <a name="add-the-new-file-system-to-etcfstab"></a>Προσθέσετε το νέο σύστημα αρχείων /etc/fstab

**Προσοχή:** Εσφαλμένη επεξεργάζονται το αρχείο /etc/fstab θα μπορούσε να έχει ως αποτέλεσμα την αδυναμία εκκίνησης του συστήματος. Εάν βέβαιοι, ανατρέξτε στην τεκμηρίωση της κατανομής για πληροφορίες σχετικά με το πώς μπορείτε να επεξεργαστείτε σωστά αυτό το αρχείο. Συνιστάται επίσης ότι έχει δημιουργήσει ένα αντίγραφο ασφαλείας του αρχείου /etc/fstab πριν από την επεξεργασία.

1. Δημιουργήστε το σημείο ενεργοποίησης επιθυμητή για νέο σύστημα αρχείων σας, για παράδειγμα:

        # sudo mkdir /data


2. Εντοπίστε τη διαδρομή λογικού τόμου

        # lvdisplay
        --- Logical volume ---
        LV Path                /dev/data-vg01/data-lv01
        ....


3. Άνοιγμα /etc/fstab σε ένα πρόγραμμα επεξεργασίας κειμένου και προσθέστε μια καταχώρηση για το νέο σύστημα αρχείων, για παράδειγμα:

        /dev/data-vg01/data-lv01  /data  ext4  defaults  0  2

    Στη συνέχεια, αποθηκεύστε και κλείστε /etc/fstab.


4. Ελέγξτε ότι η καταχώρηση fstab/κ.λπ/είναι σωστές:

        # sudo mount -a

    Εάν αυτή η εντολή έχει ως αποτέλεσμα ένα μήνυμα σφάλματος Ελέγξτε τη σύνταξη του αρχείου fstab/κ.λπ /.

    Επόμενη εκτέλεση του `mount` εντολή για να βεβαιωθείτε ότι έχει τοποθετηθεί το σύστημα αρχείων:

        # mount
        ......
        /dev/mapper/data--vg01-data--lv01 on /data type ext4 (rw)


5. (Προαιρετικό) Παράμετροι εκκίνησης συστοιχίας στο /etc/fstab

    Πολλά κατανομές περιλαμβάνουν είτε το `nobootwait` ή `nofail` ενεργοποίησης παράμετροι που μπορεί να προστεθεί στο αρχείο fstab/κ.λπ /. Αυτές οι παράμετροι επιτρέπουν αποτυχίες κατά την τοποθέτηση ένα συγκεκριμένο αρχείο συστήματος και να επιτρέπεται το σύστημα Linux για να συνεχίσετε να κάνετε εκκίνηση ακόμα και αν δεν είναι δυνατή η σωστή ενεργοποίησης του συστήματος αρχείων RAID. Ανατρέξτε στην τεκμηρίωση της διανομής σας για περισσότερες πληροφορίες σχετικά με αυτές τις παραμέτρους.

    Παράδειγμα (Ubuntu):

        /dev/data-vg01/data-lv01  /data  ext4  defaults,nobootwait  0  2
