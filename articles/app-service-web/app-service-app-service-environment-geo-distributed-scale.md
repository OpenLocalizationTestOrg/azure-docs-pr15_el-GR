<properties 
    pageTitle="Παν κατανεμημένο κλίμακα με περιβάλλοντα εφαρμογής υπηρεσίας" 
    description="Μάθετε πώς να οριζόντια κλιμάκωση εφαρμογές χρησιμοποιώντας κατανομή παν με κίνηση Manager και η εφαρμογή υπηρεσίας περιβάλλοντα." 
    services="app-service" 
    documentationCenter="" 
    authors="stefsch" 
    manager="wpickett" 
    editor=""/>

<tags 
    ms.service="app-service" 
    ms.workload="na" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="09/07/2016" 
    ms.author="stefsch"/>   

# <a name="geo-distributed-scale-with-app-service-environments"></a>Παν κατανεμημένο κλίμακα με περιβάλλοντα εφαρμογής υπηρεσίας

## <a name="overview"></a>Επισκόπηση ##
Σενάρια εφαρμογών που απαιτούν πολύ υψηλή κλίμακα μπορεί να υπερβαίνει το δυναμικότητα πόρων υπολογισμού διαθέσιμη σε μία ανάπτυξη της εφαρμογής.  Εκλογής εφαρμογές, αθλητικές εκδηλώσεις και συμβάντα τηλεοπτικές ψυχαγωγίας είναι παραδείγματα σεναρίων που απαιτούν πολύ υψηλή κλίμακα. Απαιτήσεις υψηλής κλίμακα να να πληρούνται από οριζόντια κλιμάκωση εκτός των εφαρμογών, με πολλές αναπτύξεων εφαρμογών που γίνεται μέσα σε μία μόνο περιοχή, καθώς και σε περιοχές, να χειρίζεται τις απαιτήσεις ακραίες φόρτωση.

Εφαρμογή υπηρεσίας περιβάλλοντα είναι μια ιδανική πλατφόρμα για οριζόντια κλίμακα εκτός.  Μία φορά μια εφαρμογή υπηρεσίας περιβάλλον ρύθμισης παραμέτρων έχει επιλεγεί που μπορούν να υποστηρίξουν χρέωσης γνωστά αίτηση, τους προγραμματιστές να αναπτύξετε πρόσθετα εφαρμογής υπηρεσίας περιβάλλοντα του με τον τρόπο "cookie κοπής" για την επίτευξη χωρητικότητα φόρτωσης επιθυμητή κορύφωσης.

Για παράδειγμα, εάν μια εφαρμογή που εκτελείται σε μια ρύθμιση παραμέτρων της εφαρμογής υπηρεσίας περιβάλλον έχει ελεγχθεί χειρισμού των αιτήσεων 20K ανά δευτερόλεπτο (RPS).  Εάν η δυναμικότητα φόρτωσης επιθυμητή κορύφωσης είναι 100K RPS, στη συνέχεια, πέντε (5) εφαρμογής υπηρεσίας περιβάλλοντα δυνατό να δημιουργηθούν και έχει ρυθμιστεί ώστε να βεβαιωθείτε ότι η εφαρμογή μπορεί να χειρίζεται το μέγιστο φορτίο πρόβλεψη.

Δεδομένου ότι οι πελάτες πρόσβαση συνήθως εφαρμογές χρησιμοποιώντας έναν τομέα προσαρμοσμένη (ή ματαιοδοξίας), οι προγραμματιστές χρειάζεστε έναν τρόπο για τη διανομή αιτήσεις εφαρμογής σε όλες τις παρουσίες της εφαρμογής υπηρεσίας περιβάλλον.  Είναι ένας εξαιρετικός τρόπος για να γίνει αυτό για να επιλύσετε το προσαρμοσμένο τομέα σας με χρήση του [προφίλ διαχείρισης κίνηση Azure][AzureTrafficManagerProfile].  Στο προφίλ διαχειριστή κίνηση μπορεί να ρυθμιστεί ώστε να οδηγούν σε όλα τα μεμονωμένα περιβάλλοντα εφαρμογής υπηρεσίας.  Διαχείριση κίνηση αυτόματα θα χειρίζεται διανομή πελάτες σε όλα τα περιβάλλοντα υπηρεσίας εφαρμογής με βάση το ρυθμίσεις στο προφίλ διαχειριστή κίνηση εξισορρόπησης φόρτου.  Αυτή η προσέγγιση λειτουργεί ανεξάρτητα από το εάν όλα τα περιβάλλοντα εφαρμογής υπηρεσίας έχουν αναπτυχθεί σε μία μόνο περιοχή Azure ή αναπτυχθεί σε όλο τον κόσμο σε πολλές περιοχές Azure.

Επιπλέον, επειδή οι πελάτες πρόσβαση σε εφαρμογές μέσω του τομέα ματαιοδοξίας, πελάτες δεν γνωρίζουν τον αριθμό των εφαρμογών υπηρεσίας περιβάλλοντα εκτελείται μια εφαρμογή.  Έχει ως αποτέλεσμα τους προγραμματιστές να γρήγορα και εύκολα Προσθήκη και κατάργηση, εφαρμογή υπηρεσίας περιβάλλοντα που βασίζονται σε φόρτο παρατηρούμενη κυκλοφορίας.

Το παρακάτω εννοιολογικό διάγραμμα απεικονίζει εφαρμογής οριζόντια κλιμάκωση έλεγχο σε τρεις εφαρμογής υπηρεσίας περιβάλλοντα μέσα σε μία μόνο περιοχή.

![Εννοιολογική αρχιτεκτονικής][ConceptualArchitecture] 

Το υπόλοιπο της αυτό το θέμα παρουσιάζει τα βήματα που σχετίζονται με τη ρύθμιση μιας κατανέμεται τοπολογίας για την εφαρμογή δείγμα χρησιμοποιώντας πολλά περιβάλλοντα υπηρεσίας εφαρμογής.

## <a name="planning-the-topology"></a>Σχεδιασμός της τοπολογίας ##
Πριν από τη Δόμηση ανάληψη μια κατανεμημένη εφαρμογή αποτύπωμα, είναι χρήσιμο να έχετε ορισμένα τμήματα πληροφοριών εκ των προτέρων.

- **Προσαρμοσμένο τομέα για την εφαρμογή:**  Τι είναι το προσαρμοσμένο όνομα τομέα που θα χρησιμοποιούν οι πελάτες για να αποκτήσετε πρόσβαση στην εφαρμογή;  Για την εφαρμογή δείγμα το προσαρμοσμένο όνομα τομέα είναι *www.scalableasedemo.com*
- **Domain Manager κίνηση:**  Ένα όνομα τομέα πρέπει να επιλεγεί κατά τη δημιουργία ενός [προφίλ διαχείρισης κίνηση Azure][AzureTrafficManagerProfile].  Αυτό το όνομα θα συνδυαστούν με το πρόθεμα *trafficmanager.net* για να καταχωρήσετε μια εγγραφή τομέα που γίνεται από τη διαχείριση κυκλοφορίας.  Για την εφαρμογή δείγματος, το όνομα επιλέξει είναι *μεταβλητού μεγέθους ase επίδειξη*.  Έχει ως αποτέλεσμα το πλήρες όνομα τομέα που γίνεται από τη Διαχείριση κίνηση είναι *μεταβλητού μεγέθους ase demo.trafficmanager.net*.
- **Στρατηγικής για κλιμάκωση το αποτύπωμα εφαρμογής:**  Θα διανεμηθεί το αποτύπωμα εφαρμογής σε πολλά περιβάλλοντα υπηρεσίας εφαρμογή σε μία μόνο περιοχή;  Πολλές περιοχές;  Ένα συνδυασμό και ταίριασμα από δύο μεθόδους;  Η απόφαση πρέπει να βάσει προσδοκίες όπου θα προέρχονται οι κίνηση του πελάτη, καθώς και πόσο καλά μπορεί να κλιμακωθεί τα υπόλοιπα μια εφαρμογή υποστήριξης υποδομή παρασκηνίου.  Για παράδειγμα, με μια εφαρμογή χωρίς κατάσταση του 100%, μια εφαρμογή μπορεί να είναι μαζικά κλιμάκωση χρησιμοποιώντας ένα συνδυασμό πολλών εφαρμογής υπηρεσίας περιβάλλοντα ανά περιοχή Azure, πολλαπλασιασμένοι με εφαρμογή υπηρεσίας περιβάλλοντα αναπτυχθεί σε πολλές περιοχές Azure.  Με 15 + δημόσια Azure περιοχών που είναι διαθέσιμες για να επιλέξετε από, πελάτες πραγματικά να δημιουργήσετε μια εφαρμογή hyper κλίμακας σε όλο τον κόσμο αποτύπωμα.  Για την εφαρμογή δείγματος που χρησιμοποιείται για αυτό το άρθρο, τρεις εφαρμογής υπηρεσίας περιβάλλοντα δημιουργήθηκαν σε μία μόνο περιοχή Azure (Νότια κεντρικής Η.π.α.).
- **Σύμβαση ονομάτων για τα περιβάλλοντα εφαρμογής υπηρεσίας:**  Κάθε περιβάλλον εφαρμογής υπηρεσίας απαιτεί ένα μοναδικό όνομα.  Πέρα από μία ή δύο περιβάλλοντα εφαρμογής υπηρεσίας είναι χρήσιμο να έχετε μια συνθήκη ονοματοθεσίας για να σας βοηθήσουν να εντοπίσετε κάθε περιβάλλον εφαρμογής υπηρεσίας.  Για την εφαρμογή δείγμα χρησιμοποιήθηκε μια απλή κανόνες ονοματοθεσίας.  Τα ονόματα από τα τρία περιβάλλοντα της εφαρμογής υπηρεσίας είναι *fe1ase*, *fe2ase*και *fe3ase*.
- **Σύμβαση ονομάτων για τις εφαρμογές:**  Επειδή πρόκειται να αναπτυχθούν πολλών παρουσιών της εφαρμογής, ένα όνομα είναι απαραίτητη για κάθε παρουσία της ανεπτυγμένος εφαρμογής.  Ένα μικρό γνωστά αλλά πολύ εύκολη δυνατότητα της εφαρμογής υπηρεσίας περιβάλλοντα είναι ότι το ίδιο όνομα εφαρμογής μπορεί να χρησιμοποιηθεί σε πολλά περιβάλλοντα υπηρεσίας εφαρμογής.  Εφόσον κάθε περιβάλλον εφαρμογής υπηρεσίας έχει ένα μοναδικό τομέα επίθημα, οι προγραμματιστές να επιλέξετε την εκ νέου χρήση το ακριβές ίδιο όνομα εφαρμογής σε κάθε περιβάλλον.  Για παράδειγμα προγραμματιστής μπορεί να έχετε τις εφαρμογές με το όνομα ως εξής: *myapp.foo1.p.azurewebsites.net*, *myapp.foo2.p.azurewebsites.net*, *myapp.foo3.p.azurewebsites.net*, κ.λπ.  Για την εφαρμογή δείγματος μέσω κάθε παρουσία εφαρμογή έχει επίσης ένα μοναδικό όνομα.  Τα ονόματα παρουσία εφαρμογής που χρησιμοποιούνται είναι *webfrontend1*, *webfrontend2*και *webfrontend3*.


## <a name="setting-up-the-traffic-manager-profile"></a>Ρύθμιση το προφίλ της διαχείρισης κίνηση ##
Μόλις πολλών παρουσιών της εφαρμογής έχουν αναπτυχθεί σε πολλά περιβάλλοντα υπηρεσίας εφαρμογή, τις παρουσίες μεμονωμένα εφαρμογή μπορεί να καταχωρηθεί με τη Διαχείριση κίνηση.  Για την εφαρμογή δείγμα κίνηση Διαχείριση προφίλ είναι απαραίτητη για *μεταβλητού μεγέθους ase demo.trafficmanager.net* που να δρομολογήσετε πελάτες σε οποιαδήποτε από τις παρακάτω παρουσίες ανεπτυγμένος εφαρμογής:

- **webfrontend1.fe1ase.p.azurewebsites.net:**  Μια παρουσία της εφαρμογής δείγμα αναπτυχθεί στο πρώτο περιβάλλον εφαρμογής υπηρεσίας.
- **webfrontend2.fe2ase.p.azurewebsites.net:**  Μια παρουσία της εφαρμογής δείγμα αναπτυχθεί στο δεύτερο περιβάλλον εφαρμογής υπηρεσίας.
- **webfrontend3.fe3ase.p.azurewebsites.net:**  Μια παρουσία της εφαρμογής δείγμα αναπτυχθεί στο τρίτο περιβάλλον εφαρμογής υπηρεσίας.

Ο ευκολότερος τρόπος για να καταχωρήσετε πολλές Azure εφαρμογής υπηρεσίας τελικά σημεία, όλα τα που εκτελούνται στο το **ίδιο** Azure περιοχή, είναι με το Powershell [υποστηρίζουν Azure Manager κίνηση για τη διαχείριση πόρων][ARMTrafficManager].  

Το πρώτο βήμα είναι να δημιουργήσετε ένα προφίλ Azure κίνηση διαχείρισης.  Ο παρακάτω κώδικας παρουσιάζει τον τρόπο που δημιουργήθηκε το προφίλ για την εφαρμογή δείγμα:

    $profile = New-AzureTrafficManagerProfile –Name scalableasedemo -ResourceGroupName yourRGNameHere -TrafficRoutingMethod Weighted -RelativeDnsName scalable-ase-demo -Ttl 30 -MonitorProtocol HTTP -MonitorPort 80 -MonitorPath "/"

Παρατηρήστε πώς η παράμετρος *RelativeDnsName* έχει οριστεί στο *μεταβλητού μεγέθους ase επίδειξη*.  Πρόκειται για τον τρόπο το όνομα τομέα *με ase demo.trafficmanager.net* δημιουργείται και που σχετίζεται με ένα προφίλ διαχείρισης κίνηση.

Η παράμετρος *TrafficRoutingMethod* Καθορίζει το πολιτικής κίνηση Manager θα χρησιμοποιήσετε για να καθορίσετε τον τρόπο που εκτείνεται φόρτωσης πελατών όλα τα διαθέσιμα τελικά σημεία εξισορρόπησης φόρτου.  Σε αυτό το παράδειγμα το *Weighted* επιλέχθηκε μέθοδο.  Αυτό θα έχει ως αποτέλεσμα αιτήματα των πελατών που εκτείνεται όλα τα τελικά σημεία καταχωρημένη εφαρμογή με βάση τη σχετική βάρους που σχετίζονται με κάθε τελικού σημείου. 

Με το προφίλ που δημιουργήσατε, κάθε παρουσία εφαρμογή προστίθεται στο προφίλ ως ένα τελικό σημείο εγγενής Azure.  Ο παρακάτω κώδικας λαμβάνει μια αναφορά σε κάθε εφαρμογή web προσκηνίου και, στη συνέχεια, προσθέτει κάθε εφαρμογή ως ένα τελικό σημείο Manager κίνηση κατά την παράμετρο *TargetResourceId* .


    $webapp1 = Get-AzureRMWebApp -Name webfrontend1
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend1 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp1.Id –EndpointStatus Enabled –Weight 10

    $webapp2 = Get-AzureRMWebApp -Name webfrontend2
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend2 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp2.Id –EndpointStatus Enabled –Weight 10

    $webapp3 = Get-AzureRMWebApp -Name webfrontend3
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend3 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp3.Id –EndpointStatus Enabled –Weight 10
    
    Set-AzureTrafficManagerProfile –TrafficManagerProfile $profile
    
Παρατηρήστε πώς υπάρχει μία κλήση για *Προσθήκη AzureTrafficManagerEndpointConfig* για κάθε παρουσία μεμονωμένα εφαρμογής.  Η παράμετρος *TargetResourceId* σε κάθε εντολή Powershell αναφέρεται σε μία από τις τρεις παρουσίες ανεπτυγμένος εφαρμογής.  Στο προφίλ διαχειριστή κίνηση θα εκτείνεται φόρτωσης όλα τα τρία τελικά σημεία έχουν καταχωρηθεί στο προφίλ.

Όλα τα τελικά σημεία τρεις χρησιμοποιούν την ίδια τιμή (10) για την παράμετρο *Πάχος* .  Το αποτέλεσμα Manager κίνηση διασπορά αιτήματα των πελατών σε όλες τις εμφανίσεις τρεις εφαρμογή σχετικά ομοιόμορφα. 


## <a name="pointing-the-apps-custom-domain-at-the-traffic-manager-domain"></a>Που δείχνει την εφαρμογή προσαρμοσμένου τομέα στο κίνηση διαχείρισης τομέα ##
Είναι το τελικό βήμα είναι απαραίτητο να τοποθετήστε το δείκτη του προσαρμοσμένου τομέα της εφαρμογής στον τομέα Manager κίνηση.  Για την εφαρμογή δείγμα αυτό σημαίνει ότι αντικριστά *www.scalableasedemo.com* *με ase demo.trafficmanager.net*.  Αυτό το βήμα πρέπει να ολοκληρωθεί με το μητρώο καταχώρησης ονομάτων τομέων που διαχειρίζεται το προσαρμοσμένο τομέα.  

Μια εγγραφή CNAME χρησιμοποιώντας τα εργαλεία διαχείρισης το μητρώο καταχώρησης ονομάτων τομέα, εγγραφών πρέπει να δημιουργηθούν που δείχνει τον προσαρμοσμένο τομέα στο τομέα Manager κίνηση.  Στην παρακάτω εικόνα εμφανίζει ένα παράδειγμα αυτήν τη ρύθμιση παραμέτρων CNAME μοιάζει:

![Εγγραφή CNAME για το προσαρμοσμένο τομέα σας][CNAMEforCustomDomain] 

Παρόλο που δεν καλύπτεται σε αυτό το θέμα, να θυμάστε ότι κάθε παρουσία μεμονωμένα εφαρμογή πρέπει να έχει το προσαρμοσμένο τομέα που έχει καταχωρηθεί με το καθώς και.  Διαφορετικά εάν μια αίτηση καθιστά σε μια περίοδο λειτουργίας εφαρμογής και η εφαρμογή δεν έχει το προσαρμοσμένο τομέα που έχει καταχωρηθεί με την εφαρμογή, η αίτηση θα αποτύχει.  

Σε αυτό το παράδειγμα του προσαρμοσμένου τομέα είναι *www.scalableasedemo.com*και κάθε παρουσία της εφαρμογής έχει το προσαρμοσμένο τομέα που έχει συσχετιστεί με αυτό.

![Προσαρμοσμένο τομέα σας][CustomDomain] 

Για μια recap της καταχώρησης έναν προσαρμοσμένο τομέα με τις εφαρμογές Azure εφαρμογής υπηρεσίας, ανατρέξτε στο ακόλουθο άρθρο σχετικά με την [καταχώρηση προσαρμοσμένους τομείς][RegisterCustomDomain].

## <a name="trying-out-the-distributed-topology"></a>Δοκιμάζοντας της τοπολογίας κατανεμημένο ##
Το τελικό αποτέλεσμα της ρύθμισης παραμέτρων του DNS και διαχείριση κίνηση είναι ότι οι αιτήσεις για *www.scalableasedemo.com* ροή την ακόλουθη σειρά:

1. Πρόγραμμα περιήγησης ή συσκευή θα πραγματοποιήσει μια αναζήτηση DNS για *www.scalableasedemo.com*
2. Η εγγραφή CNAME με το μητρώο καταχώρησης ονομάτων τομέων έχει ως αποτέλεσμα την αναζήτηση DNS ανακατεύθυνση για τη Διαχείριση Azure κίνηση.
3. Γίνεται αναζήτηση DNS για *μεταβλητού μεγέθους ase demo.trafficmanager.net* σε σχέση με έναν από τους διακομιστές DNS Manager κίνηση Azure.
4. Με βάση το πολιτικής (η παράμετρος *TrafficRoutingMethod* προηγουμένως χρησιμοποιείται κατά τη δημιουργία το προφίλ της διαχείρισης κίνηση) εξισορρόπησης φόρτου, κίνηση Manager θα επιλέξτε ένα από τα τελικά σημεία έχει ρυθμιστεί και να επιστρέψετε το FQDN του αυτό το τελικό σημείο στο πρόγραμμα περιήγησης ή συσκευή.
5.  Επειδή το FQDN του τελικού σημείου είναι η διεύθυνση Url μιας παρουσίας εφαρμογής που εκτελείται σε ένα περιβάλλον εφαρμογής υπηρεσίας, το πρόγραμμα περιήγησης ή τη συσκευή θα ζητήστε από ένα διακομιστή DNS της Microsoft Azure για να επιλύσετε το FQDN σε μια διεύθυνση IP. 
6. Το πρόγραμμα περιήγησης ή τη συσκευή θα σας στέλνει την αίτηση HTTP/S στη διεύθυνση IP.  
7. Η αίτηση θα φτάνουν σε μία από τις παρουσίες εφαρμογή εκτελείται σε ένα από τα περιβάλλοντα εφαρμογής υπηρεσίας.

Στην παρακάτω εικόνα κονσόλας εμφανίζει μια αναζήτηση DNS για την εφαρμογή του δείγματος προσαρμοσμένο τομέα σας με επιτυχία επίλυση σε μια περίοδο λειτουργίας εφαρμογής που εκτελείται σε ένα από τα τρία περιβάλλοντα δείγμα εφαρμογής υπηρεσίας (σε αυτήν την περίπτωση το δεύτερο από τα τρία περιβάλλοντα της εφαρμογής υπηρεσίας):

![Αναζήτηση DNS][DNSLookup] 

## <a name="additional-links-and-information"></a>Πρόσθετες συνδέσεις και πληροφορίες ##
Όλα τα άρθρα και με ποιον τρόπο-για να του για εφαρμογή υπηρεσίας περιβάλλοντα είναι διαθέσιμες στο το [αρχείο README για περιβάλλοντα εφαρμογών υπηρεσίας](../app-service/app-service-app-service-environments-readme.md).

Τεκμηρίωση σχετικά με το Powershell [υποστηρίζουν Azure Manager κίνηση για τη διαχείριση πόρων][ARMTrafficManager].  

[AZURE.INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[AZURE.INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[AzureTrafficManagerProfile]:  https://azure.microsoft.com/documentation/articles/traffic-manager-manage-profiles/
[ARMTrafficManager]:  https://azure.microsoft.com/documentation/articles/traffic-manager-powershell-arm/
[RegisterCustomDomain]:  https://azure.microsoft.com/en-us/documentation/articles/web-sites-custom-domain-name/


<!-- IMAGES -->
[ConceptualArchitecture]: ./media/app-service-app-service-environment-geo-distributed-scale/ConceptualArchitecture-1.png
[CNAMEforCustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CNAMECustomDomain-1.png
[DNSLookup]:  ./media/app-service-app-service-environment-geo-distributed-scale/DNSLookup-1.png
[CustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CustomDomain-1.png 
