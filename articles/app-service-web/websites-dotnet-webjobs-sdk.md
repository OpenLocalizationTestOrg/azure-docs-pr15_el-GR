<properties 
    pageTitle="Τι είναι το SDK WebJobs Azure" 
    description="Μια εισαγωγή σχετικά με το SDK WebJobs Azure. Εξηγεί τι SDK, τυπικά σενάρια, είναι χρήσιμο για και δείγματα κώδικα." 
    services="app-service\web, storage" 
    documentationCenter=".net" 
    authors="tdykstra" 
    manager="wpickett" 
    editor="jimbe"/>

<tags 
    ms.service="app-service-web" 
    ms.workload="web" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="06/01/2016" 
    ms.author="tdykstra"/>

# <a name="what-is-the-azure-webjobs-sdk"></a>Τι είναι το SDK WebJobs Azure

## <a id="overview"></a>Επισκόπηση

Σε αυτό το άρθρο εξηγεί τι είναι το SDK WebJobs, αναθεωρεί ορισμένα κοινά σενάρια, είναι χρήσιμο για και παρέχει μια επισκόπηση του τρόπου χρήσης του στον κώδικα.

[WebJobs](websites-webjobs-resources.md) είναι μια δυνατότητα του Azure εφαρμογής υπηρεσίας που σας επιτρέπει να εκτελέσετε ένα πρόγραμμα ή μια δέσμη ενεργειών στο ίδιο περιβάλλον με μια εφαρμογή web, εφαρμογή API ή εφαρμογή για κινητές συσκευές. Ο σκοπός του [WebJobs SDK](websites-webjobs-resources.md) είναι για να απλοποιήσετε τον κώδικα που συντάσσετε για τις κοινές εργασίες που ένα WebJob να εκτελέσετε, όπως η επεξεργασία εικόνας, ουρά επεξεργασίας, RSS συνάθροισης, αρχείο συντήρησης και αποστολή μηνυμάτων ηλεκτρονικού ταχυδρομείου. Το SDK WebJobs έχει ενσωματωμένες δυνατότητες για την εργασία με το χώρο αποθήκευσης Azure και Bus υπηρεσίας, για τον προγραμματισμό εργασιών και χειρισμού σφαλμάτων και πολλά άλλα συνηθισμένα σενάρια. Επιπλέον, έχει σχεδιαστεί για να επεκτάσιμη. Το [WebJobs SDK είναι ανοιχτό προέλευσης](https://github.com/Azure/azure-webjobs-sdk/), και δεν υπάρχει ένα [Άνοιγμα αποθετήριο δεδομένων προέλευσης για επεκτάσεις](https://github.com/Azure/azure-webjobs-sdk-extensions/wiki/Binding-Extensions-Overview).

Το SDK WebJobs περιλαμβάνει τα παρακάτω στοιχεία:

* **Πακέτα NuGet**. Πακέτα NuGet που προσθέτετε σε ένα έργο Visual Studio κονσόλας εφαρμογής παρέχει ένα πλαίσιο που χρησιμοποιεί τον κωδικό από διακόσμηση χώρου οι μέθοδοι με WebJobs SDK χαρακτηριστικά.
  
* **Πίνακας εργαλείων**. Τμήμα του WebJobs SDK περιλαμβάνει το Azure εφαρμογής υπηρεσίας και παρέχει εμπλουτισμένου παρακολούθησης και διαγνωστικών για τα προγράμματα που χρησιμοποιούν τα πακέτα NuGet. Δεν χρειάζεται να συντάξετε κώδικα για να χρησιμοποιήσετε αυτές τις δυνατότητες παρακολούθησης και τα Διαγνωστικά.

## <a id="scenarios"></a>Σενάρια

Εδώ θα βρείτε ορισμένες τυπικές σενάρια που μπορείτε να χειριστείτε πιο εύκολα με το Azure SDK WebJobs:

* Εικόνα της επεξεργασίας ή άλλες υπολογιστική εργασία. Ένα κοινό χαρακτηριστικό των τοποθεσίες Web είναι τη δυνατότητα να αποστείλετε εικόνες ή βίντεο. Συχνά θέλετε να διαχειριστείτε το περιεχόμενο μετά την αποστολή, αλλά δεν θέλετε να κάνετε το χρήστη που περιμένετε ενώ αυτήν.

* Επεξεργασία ουράς. Μια συνηθίζεται για ένα πρόγραμμα προσκηνίου web για να επικοινωνήσετε με την υπηρεσία υποστήριξης είναι να χρησιμοποιήσετε ουρές. Όταν πρέπει να εργαστείτε στην τοποθεσία Web, προωθεί το μήνυμα σε μια ουρά. Μια υπηρεσία υποστήριξης χρησιμοποιεί τα μηνύματα από την ουρά και η εργασία. Μπορείτε να χρησιμοποιήσετε ουρές για επεξεργασία εικόνας: για παράδειγμα, αφού ο χρήστης κάνει αποστολή των αρχείων, τοποθετήστε τα ονόματα των αρχείων σε ένα μήνυμα ουρά για να εντοπιστεί από υπολογιστή στο παρασκήνιο για επεξεργασία. Ή μπορείτε να χρησιμοποιήσετε ουρές για να βελτιώσετε την ανταπόκριση τοποθεσίας. Για παράδειγμα, αντί να γράφετε απευθείας σε μια βάση δεδομένων SQL, εγγραφή σε μια ουρά, παρέχουμε στο χρήστη να ολοκληρώσετε τη διαδικασία, και επιτρέψτε την υπηρεσία λαβή υψηλής αδράνειας σχεσιακή βάση δεδομένων παρασκηνίου εργασία. Για ένα παράδειγμα της επεξεργασίας με εικόνα διεργασία ουράς, ανατρέξτε στο θέμα της [WebJobs SDK να ξεκινήσετε το πρόγραμμα εκμάθησης](websites-dotnet-webjobs-sdk-get-started.md).

* Συνάθροιση RSS. Εάν έχετε μια τοποθεσία που διατηρεί μια λίστα με τις τροφοδοσίες RSS, θα μπορούσε να αποσπάσετε σε όλα τα άρθρα από τις τροφοδοσίες σε μια διεργασία φόντου.

* Αρχείο συντήρησης, όπως μόνο τις συγκεντρώσεις ή εκκαθάριση αρχείων καταγραφής.  Ίσως έχετε αρχεία καταγραφής που δημιουργήθηκαν σε διάφορες τοποθεσίες ή για εκτείνεται ξεχωριστή ώρας που θέλετε να συνδυάσετε για να εκτελέσετε εργασίες ανάλυσης σε αυτά. Ή μπορεί να θέλετε να προγραμματίσετε μια εργασία για να εκτελέσετε εβδομαδιαία για να καθαρίσετε παλιά αρχεία καταγραφής.

* Εισόδου σε Azure πίνακες. Ενδέχεται να έχετε αρχεία που είναι αποθηκευμένα και αντικείμενα BLOB και θέλετε να ανάλυση τους και να αποθηκεύσετε τα δεδομένα σε πίνακες. Η συνάρτηση εισόδου μπορεί να γράφετε πολλές γραμμές (εκατομμύρια σε ορισμένες περιπτώσεις) και το SDK WebJobs καθιστά δυνατή την υλοποίηση αυτή η λειτουργία εύκολα. Το SDK παρέχει επίσης παρακολούθηση σε πραγματικό χρόνο με δείκτες προόδου, όπως τον αριθμό των γραμμών που εγγράφονται στον πίνακα.

* Άλλες εργασίες μεγάλη διάρκεια εκτέλεσης που θέλετε να εκτελέσετε σε ένα νήμα φόντο, όπως [την αποστολή μηνυμάτων ηλεκτρονικού ταχυδρομείου](https://github.com/victorhurdugaci/AzureWebJobsSamples/tree/master/SendEmailOnFailure). 

* Όλες τις εργασίες που θέλετε να εκτελέσετε σε ένα χρονοδιάγραμμα, όπως η εκτέλεση μιας λειτουργίας αντίγραφο ασφαλείας κάθε νύχτα.

Σε πολλά από αυτά τα σενάρια που ενδέχεται να θέλετε να κλιμακωθεί μια εφαρμογή web για την εκτέλεση σε πολλές ΣΠΣ, η οποία θα εκτελεστεί ταυτόχρονα πολλές WebJobs. Σε ορισμένα σενάρια αυτό θα μπορούσε να έχει ως αποτέλεσμα των ίδιων δεδομένων γίνεται επεξεργασία πολλές φορές, αλλά αυτό δεν είναι ένα πρόβλημα όταν χρησιμοποιείτε το ενσωματωμένο ουρά blob και εναύσματα Bus υπηρεσίας του WebJobs SDK. Το SDK εξασφαλίζει ότι σας συναρτήσεις θα γίνεται επεξεργασία μόνο μία φορά για κάθε μήνυμα ή blob.

Το SDK WebJobs διευκολύνει επίσης για το χειρισμό χειρισμού σενάρια κοινών σφαλμάτων. Μπορείτε να ρυθμίσετε ειδοποιήσεις για την αποστολή ειδοποιήσεων όταν μια συνάρτηση αποτυγχάνει και μπορείτε να ορίσετε χρονικών ορίων ώστε μια συνάρτηση ακυρώνεται αυτόματα εάν αυτή δεν ολοκληρωθεί μέσα σε ένα καθορισμένο χρονικό όριο.

## <a id="code"></a>Δείγματα κώδικα

Ο κώδικας για το χειρισμό τυπικές εργασίες που λειτουργούν με το χώρο αποθήκευσης Azure είναι απλή. Στην εφαρμογή της κονσόλας `Main` μέθοδο που μπορείτε να δημιουργήσετε ένα `JobHost` αντικείμενο στο οποίο συντεταγμένες των κλήσεων σε μεθόδους γράφετε. Στο πλαίσιο WebJobs SDK γνωρίζει πότε πρέπει να καλέσετε οι μέθοδοι και τι τιμές παραμέτρων για να χρησιμοποιήσετε με βάση τα χαρακτηριστικά WebJobs SDK που χρησιμοποιείτε σε αυτά. Το SDK παρέχει *εναύσματα* που καθορίζουν τι συνθήκες προκαλέσει τη συνάρτηση για να ονομάζεται και *ντοσιέ* που καθορίζουν τον τρόπο για να λάβετε πληροφορίες σε και έξοδος από τη μέθοδο παραμέτρους.

Για παράδειγμα, το χαρακτηριστικό [QueueTrigger](websites-dotnet-webjobs-sdk-storage-queues-how-to.md) έχει ως αποτέλεσμα μια συνάρτηση για να ονομάζεται όταν λαμβάνετε ένα μήνυμα στην ουρά και, εάν η μορφή του μηνύματος είναι JSON για έναν πίνακα byte ή έναν προσαρμοσμένο τύπο, το μήνυμα είναι αυτόματα Αποσειριοποιημένο. Το χαρακτηριστικό [BlobTrigger](websites-dotnet-webjobs-sdk-storage-blobs-how-to.md) ενεργοποιεί μια διαδικασία κάθε φορά που δημιουργείται μια νέα blob στο χώρο αποθήκευσης Azure λογαριασμού.

Ακολουθεί ένα απλό πρόγραμμα που σταθμοσκοπεί μια ουρά και δημιουργεί ένα blob για κάθε μήνυμα ουράς που λάβατε:

        public static void Main()
        {
            JobHost host = new JobHost();
            host.RunAndBlock();
        }

        public static void ProcessQueueMessage([QueueTrigger("webjobsqueue")] string inputText, 
            [Blob("containername/blobname")]TextWriter writer)
        {
            writer.WriteLine(inputText);
        }

Το `JobHost` αντικείμενο είναι ένα κοντέινερ για ένα σύνολο των συναρτήσεων φόντου. Το `JobHost` αντικείμενο παρακολουθεί τις συναρτήσεις, χεριού για συμβάντα που έναυσμα, και εκτελεί τις συναρτήσεις όταν προκύπτουν έναυσμα συμβάντα. Καλείτε μια `JobHost` μέθοδο για να υποδείξετε εάν θέλετε τη διαδικασία κοντέινερ για να εκτελέσετε το τρέχον νήμα ή ένα νήμα παρασκηνίου. Στο παράδειγμα, το `RunAndBlock` μέθοδος εκτελεί τη διαδικασία συνεχώς στο τρέχον νήμα.

Επειδή το `ProcessQueueMessage` μέθοδος σε αυτό το παράδειγμα έχει μια `QueueTrigger` χαρακτηριστικό, το έναυσμα για τη λήψη ενός νέου μηνύματος ουρά είναι αυτήν τη συνάρτηση. Το `JobHost` αντικείμενο παρακολουθήσεις για νέα μηνύματα ουρά στην καθορισμένη ουρά ("webjobsqueue" σε αυτό το δείγμα) και όταν εντοπιστεί, καλεί `ProcessQueueMessage`. 

Το `QueueTrigger` χαρακτηριστικών συνδέσεις το `inputText` παράμετρο της τιμής του μηνύματος ουρά. Και το `Blob` χαρακτηριστικών συνδέσεις μια `TextWriter` αντικειμένου για ένα αντικείμενο blob με το όνομα "blobname" σε ένα κοντέινερ που ονομάζεται "containername".  

        public static void ProcessQueueMessage([QueueTrigger("webjobsqueue")]] string inputText, 
            [Blob("containername/blobname")]TextWriter writer)

Η συνάρτηση χρησιμοποιεί, στη συνέχεια, αυτές οι παράμετροι για να γράψετε την τιμή του μηνύματος ουρά για το αντικείμενο blob:

        writer.WriteLine(inputText);

Οι δυνατότητες έναυσμα και ντοσιέ του WebJobs SDK απλοποιήσει σημαντικά τον κώδικα που χρειάζεται να γράψετε. Του χαμηλού επιπέδου κώδικα που απαιτείται για την επεξεργασία ουρές, αντικείμενα BLOB ή αρχεία, ή για να ξεκινήσετε προγραμματισμένων εργασιών, έχει γίνει για εσάς από το πλαίσιο WebJobs SDK. Για παράδειγμα, το πλαίσιο δημιουργεί ουρές που δεν υπάρχουν ακόμα, ανοίγει η ουρά, διαβάζει ουρά μηνύματα, διαγράφει ουρά μηνυμάτων κατά την επεξεργασία έχει ολοκληρωθεί, δημιουργεί κοντέινερ αντικειμένων blob που δεν υπάρχουν ακόμη, γράφει σε αντικείμενα BLOB και ούτω καθεξής.

Το παρακάτω παράδειγμα κώδικα εμφανίζει μια ποικιλία εναυσμάτων σε μία WebJob: `QueueTrigger`, `FileTrigger`, `WebHookTrigger`, και `ErrorTrigger`. 

```
    public class Functions
    {
        public static void ProcessQueueMessage([QueueTrigger("queue")] string message,
        TextWriter log)
        {
            log.WriteLine(message);
        }

        public static void ProcessFileAndUploadToBlob(
            [FileTrigger(@"import\{name}", "*.*", autoDelete: true)] Stream file,
            [Blob(@"processed/{name}", FileAccess.Write)] Stream output,
            string name,
            TextWriter log)
        {
            output = file;
            file.Close();
            log.WriteLine(string.Format("Processed input file '{0}'!", name));
        }

        [Singleton]
        public static void ProcessWebHookA([WebHookTrigger] string body, TextWriter log)
        {
            log.WriteLine(string.Format("WebHookA invoked! Body: {0}", body));
        }

        public static void ProcessGitHubWebHook([WebHookTrigger] string body, TextWriter log)
        {
            dynamic issueEvent = JObject.Parse(body);
            log.WriteLine(string.Format("GitHub WebHook invoked! ('{0}', '{1}')",
                issueEvent.issue.title, issueEvent.action));
        }

        public static void ErrorMonitor(
        [ErrorTrigger("00:01:00", 1)] TraceFilter filter, TextWriter log,
        [SendGrid(
            To = "admin@emailaddress.com",
            Subject = "Error!")]
         SendGridMessage message)
        {
            // log last 5 detailed errors to the Dashboard
            log.WriteLine(filter.GetDetailedMessage(5));
            message.Text = filter.GetDetailedMessage(1);
        }
    }
```

## <a id="schedule"></a>Προγραμματισμός

Το `TimerTrigger` χαρακτηριστικό σας δίνει τη δυνατότητα στις συναρτήσεις έναυσμα για να εκτελέσετε σε ένα χρονοδιάγραμμα. Μπορείτε να προγραμματίσετε μια WebJob στο σύνολό μέσω Azure ή προγραμματισμός μεμονωμένα λειτουργιών από μια WebJob χρησιμοποιώντας το SDK WebJobs `TimerTrigger`. Ακολουθεί ένα δείγμα κώδικα.

```
public class Functions
{
    public static void ProcessTimer([TimerTrigger("*/15 * * * * *", RunOnStartup = true)]
    TimerInfo info, [Queue("queue")] out string message)
    {
        message = info.FormatNextOccurrences(1);
    }
}
```

Για περισσότερα δείγματα κώδικα, ανατρέξτε στο θέμα [TimerSamples.cs](https://github.com/Azure/azure-webjobs-sdk-extensions/blob/master/src/ExtensionsSample/Samples/TimerSamples.cs) στο αποθετήριο azure-webjobs-sdk-επεκτάσεις GitHub.com.

## <a name="extensibility"></a>Επεκτασιμότητα του

Δεν είστε υποχρεωμένοι να ενσωματωμένες λειτουργίες--το SDK WebJobs σάς επιτρέπει να γράφετε προσαρμοσμένο εναύσματα και ντοσιέ.  Για παράδειγμα, μπορείτε να συντάξετε εναύσματα για συμβάντα cache και τα χρονοδιαγράμματα περιοδικό. Ένα [Άνοιγμα αποθετήριο δεδομένων προέλευσης](https://github.com/Azure/azure-webjobs-sdk-extensions) περιέχει μια [λεπτομερή οδηγό στο επεκτασιμότητα του WebJobs SDK](https://github.com/Azure/azure-webjobs-sdk-extensions/wiki/Binding-Extensions-Overview) και δείγματα κώδικα για να σας βοηθήσουν να ξεκινήσετε να γράφετε το δικό σας εναύσματα και ντοσιέ.

## <a id="workerrole"></a>Χρήση του SDK WebJobs εκτός WebJobs

Ένα πρόγραμμα που χρησιμοποιεί το WebJobs SDK είναι μια τυπική εφαρμογή κονσόλας και να εκτελέσετε οπουδήποτε – δεν έχει ώστε να εκτελείται ως μια WebJob. Μπορείτε να ελέγξετε το πρόγραμμα τοπικά στον υπολογιστή σας ανάπτυξης και παραγωγή μπορείτε να το εκτελέσετε σε ένα ρόλο εργαζόμενου υπηρεσία Cloud ή μια υπηρεσία των Windows εάν προτιμάτε ένα από αυτά τα περιβάλλοντα. 

Ωστόσο, στον πίνακα εργαλείων είναι διαθέσιμη μόνο ως επέκταση για μια εφαρμογή web Azure εφαρμογής υπηρεσίας. Εάν θέλετε να εκτελέσετε εκτός μιας WebJob και εξακολουθείτε να χρησιμοποιήσετε τον πίνακα εργαλείων, μπορείτε να ρυθμίσετε μια εφαρμογή web για να χρησιμοποιήσετε τον ίδιο λογαριασμό χώρου αποθήκευσης που αναφέρεται η συμβολοσειρά σύνδεσης πίνακα εργαλείων SDK WebJobs και πίνακα εργαλείων WebJobs της εφαρμογής web, θα εμφανιστεί δεδομένα σχετικά με τη συνάρτηση εκτέλεσης από το πρόγραμμα που εκτελεί κάπου αλλού. Μπορείτε να λάβετε στον πίνακα εργαλείων χρησιμοποιώντας τη διεύθυνση URL https://*{webappname}*.scm.azurewebsites.net/azurejobs/#/functions. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [γρήγορα έναν πίνακα εργαλείων για τοπική ανάπτυξη με το SDK WebJobs](http://blogs.msdn.com/b/jmstall/archive/2014/01/27/getting-a-dashboard-for-local-development-with-the-webjobs-sdk.aspx), αλλά Σημειώστε ότι η δημοσίευση ιστολογίου εμφανίζει ένα παλιό όνομα συμβολοσειρά σύνδεσης. 

## <a id="nostorage"></a>Δυνατότητες του πίνακα εργαλείων

Το SDK WebJobs παρέχει πολλά πλεονεκτήματα ακόμα και εάν δεν χρησιμοποιείτε το WebJobs SDK εναύσματα ή ντοσιέ:

* Μπορείτε να ανακαλέσετε συναρτήσεων από τον πίνακα εργαλείων.
* Μπορείτε να τα αναπαραγάγετε συναρτήσεων από τον πίνακα εργαλείων.
* Μπορείτε να προβάλετε αρχεία καταγραφής στον πίνακα εργαλείων, συνδεδεμένο με το συγκεκριμένο WebJob (αρχεία καταγραφής εφαρμογών, γραμμένο με τη χρήση Console.Out, Console.Error, ανίχνευση, κ.λπ.) ή συνδεδεμένες με τη συγκεκριμένη συνάρτηση κλήσης που δημιούργησε τους (αρχεία καταγραφής γραμμένο με τη χρήση μιας `TextWriter` αντικείμενο που μεταφέρει το SDK στη συνάρτηση ως παράμετρο). 

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [πώς μπορείτε να καλέσετε με μη αυτόματο τρόπο μια συνάρτηση](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#manual) και [Πώς να συντάξετε αρχείων καταγραφής](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#logs) 

## <a id="nextsteps"></a>Επόμενα βήματα

Για περισσότερες πληροφορίες σχετικά με το SDK WebJobs, ανατρέξτε στο θέμα [Πόροι προτεινόμενα WebJobs Azure](http://go.microsoft.com/fwlink/?linkid=390226).

Για πληροφορίες σχετικά με τις πιο πρόσφατες βελτιώσεις στο SDK WebJobs, ανατρέξτε στις [Σημειώσεις έκδοσης](https://github.com/Azure/azure-webjobs-sdk/wiki/Release-Notes).
 
