<properties
    pageTitle="Βέλτιστες πρακτικές και Οδηγός αντιμετώπισης προβλημάτων για τις εφαρμογές του κόμβου σε εφαρμογές Web Azure"
    description="Μάθετε το βέλτιστες πρακτικές και τα βήματα αντιμετώπισης προβλημάτων για τις εφαρμογές του κόμβου σε εφαρμογές Web Azure."
    services="app-service\web"
    documentationCenter="nodejs"
    authors="ranjithr"
    manager="wadeh"
    editor=""/>

<tags
    ms.service="app-service-web"
    ms.workload="web"
    ms.tgt_pltfrm="na"
    ms.devlang="nodejs"
    ms.topic="article"
    ms.date="06/06/2016"
    ms.author="ranjithr;wadeh"/>
    
# <a name="best-practices-and-troubleshooting-guide-for-node-applications-on-azure-web-apps"></a>Βέλτιστες πρακτικές και Οδηγός αντιμετώπισης προβλημάτων για τις εφαρμογές του κόμβου σε εφαρμογές Web Azure

[AZURE.INCLUDE [tabs](../../includes/app-service-web-get-started-nav-tabs.md)]

Σε αυτό το άρθρο, θα μάθετε το βέλτιστες πρακτικές και τα βήματα αντιμετώπισης προβλημάτων για [κόμβο εφαρμογές](app-service-web-nodejs-get-started.md) που εκτελούνται σε Azure Webapps (με [iisnode](https://github.com/azure/iisnode)).

>[AZURE.WARNING] Να είστε προσεκτικοί κατά τη χρήση βήματα αντιμετώπισης προβλημάτων στην τοποθεσία σας παραγωγής. Σύσταση είναι η αντιμετώπιση προβλημάτων με την εφαρμογή σας σε μια μη παραγωγής για παράδειγμα σας ενδιάμεσου σταδίου υποδιαίρεση και όταν το ζήτημα είναι σταθερή, εναλλαγή σας ενδιάμεσου σταδίου υποδιαίρεση με την εσοχή παραγωγής.

## <a name="iisnode-configuration"></a>Ρύθμιση παραμέτρων IISNODE

Αυτό το [αρχείο σχήματος](https://github.com/Azure/iisnode/blob/master/src/config/iisnode_schema_x64.xml) εμφανίζει όλες τις ρυθμίσεις που μπορούν να ρυθμιστούν για iisnode. Ορισμένες από τις ρυθμίσεις που θα σας φανεί χρήσιμο για την εφαρμογή σας είναι:

* nodeProcessCountPerApplication

    Αυτή η ρύθμιση ελέγχει τον αριθμό των διεργασιών κόμβου που ξεκινούν ανά εφαρμογής των υπηρεσιών IIS. Η προεπιλεγμένη τιμή είναι 1. Μπορείτε να εκκινήσετε όσες node.exe ως το πλήθος πυρήνα Εικονική, ορίζοντας αυτό με το 0. Προτεινόμενη τιμή είναι 0 για τα περισσότερα εφαρμογή, ώστε να μπορείτε να χρησιμοποιήσετε όλα τα πυρήνων στον υπολογιστή σας. Node.exe είναι μία νήματος ώστε μία node.exe θα εκμετάλλευση έως των πυρήνα 1 και να λάβετε μέγιστη απόδοση από την εφαρμογή σας κόμβου που θα θέλετε να χρησιμοποιούν όλοι πυρήνων.

* nodeProcessCommandLine

    Αυτή η ρύθμιση ελέγχει τη διαδρομή προς το node.exe. Μπορείτε να ορίσετε αυτήν την τιμή στην οποία θα οδηγεί η έκδοση node.exe.

* maxConcurrentRequestsPerProcess

    Αυτή η ρύθμιση ελέγχει τον μέγιστο αριθμό ταυτόχρονες αιτήσεις αποστέλλεται από iisnode σε κάθε node.exe. Στην azure webapps, η προεπιλεγμένη τιμή για αυτό είναι άπειρο. Δεν θα πρέπει να ανησυχείτε για αυτήν τη ρύθμιση. Εκτός του azure webapps, η προεπιλεγμένη τιμή είναι 1024. Ενδέχεται να θέλετε να ρυθμίσετε τις παραμέτρους αυτό ανάλογα με την εφαρμογή σας λαμβάνει αιτήσεις πόσες και της ταχύτητας κίνησης την εφαρμογή σας επεξεργάζεται κάθε αίτηση.

* maxNamedPipeConnectionRetry

    Αυτή η ρύθμιση ελέγχει τον μέγιστο αριθμό φορών iisnode θα Επανάληψη σύνδεσης κάνουν την καθορισμένη διοχέτευση για να στείλετε την πρόσκληση μέσω σε node.exe. Αυτή η ρύθμιση σε συνδυασμό με namedPipeConnectionRetryDelay Καθορίζει το συνολικό χρονικό όριο κάθε αίτησης μέσα σε iisnode. Η προεπιλεγμένη τιμή είναι 200 στην Azure Webapps. Σύνολο χρονικού ορίου σε δευτερόλεπτα = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000

* namedPipeConnectionRetryDelay

    Αυτή η ρύθμιση ελέγχει το χρονικό διάστημα (σε ms) iisnode θα περιμένετε έως ότου μεταξύ κάθε "Επανάληψη" για να στείλετε την αίτηση για να node.exe πάνω από την καθορισμένη διοχέτευση. Η προεπιλεγμένη τιμή είναι 250ms.
    Σύνολο χρονικού ορίου σε δευτερόλεπτα = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000

    Από προεπιλογή, το συνολικό χρονικό όριο στο iisnode στην azure webapps είναι 200 \* 250ms = 50 δευτερόλεπτα.

* logDirectory

    Αυτή η ρύθμιση ελέγχει τον κατάλογο όπου iisnode θα συνδεθείτε stdout/stderr. Η προεπιλεγμένη τιμή είναι iisnode που είναι σε σχέση με τον κατάλογο κύριο δέσμης ενεργειών (κατάλογο όπου υπάρχει κύριο server.js)

* debuggerExtensionDll

    Αυτή η ρύθμιση ελέγχει ποια έκδοση του iisnode κόμβου επιθεώρηση θα χρησιμοποιήσει κατά τον εντοπισμό σφαλμάτων της εφαρμογής σας κόμβο. Προς το παρόν iisnode-επιθεώρηση-0.7.3.dll και iisnode inspector.dll είναι οι 2 μόνο έγκυρες τιμές για αυτήν τη ρύθμιση. Η προεπιλεγμένη τιμή είναι iisnode-επιθεώρηση-0.7.3.dll. έκδοση iisnode-επιθεώρηση-0.7.3.dll χρησιμοποιεί κόμβου-επιθεώρηση-0.7.3 και χρησιμοποιεί websockets, επομένως θα πρέπει να ενεργοποιήσετε την websockets στην σας azure webapp για να χρησιμοποιήσετε αυτήν την έκδοση. Ανατρέξτε στο θέμα <http://www.ranjithr.com/?p=98> για περισσότερες λεπτομέρειες σχετικά με τη ρύθμιση iisnode να χρησιμοποιήσετε τη νέα επιθεώρηση κόμβο.

* flushResponse

    Η προεπιλεγμένη συμπεριφορά των υπηρεσιών IIS είναι ότι το buffer για δεδομένα απόκρισης προς τα επάνω για να 4MB πριν από την καταγραφή ή μέχρι το τέλος της απόκρισης, όποιο βρεθεί πρώτο. iisnode προσφέρει μια ρύθμιση παραμέτρων για να παρακάμψετε αυτήν τη συμπεριφορά: για να κάνετε εκκαθάριση ενός τμήματος του σώματος οντότητας απόκρισης μόλις iisnode λαμβάνει το από node.exe, πρέπει να ορίσετε το iisnode/@flushResponse χαρακτηριστικό στο web.config σε 'true':
    
    ```
    <configuration>    
        <system.webServer>    
            <!-- ... -->    
            <iisnode flushResponse="true" />    
        </system.webServer>    
    </configuration>
    ```

    Ενεργοποίηση καταγραφής του κάθε τμήματος από το κυρίως κείμενο απάντησης επιβαρύνει τις επιδόσεις που περιορίζει την απόδοση του συστήματος με ~ 5% (από τον v0.1.13), ώστε να είναι καλύτερα να εύρος αυτήν τη ρύθμιση μόνο για τα τελικά σημεία που απαιτούν απόκριση ροής (π.χ. χρησιμοποιώντας το <location> στοιχείο σε το αρχείο web.config)

    Εκτός από αυτό, για ροή εφαρμογές, θα πρέπει να επίσης να ορίσετε responseBufferLimit από το πρόγραμμα χειρισμού iisnode σε 0.
    
    ```
    <handlers>    
        <add name="iisnode" path="app.js" verb="\*" modules="iisnode" responseBufferLimit="0"/>    
    </handlers>
    ```

* watchedFiles

    Αυτή είναι μια λίστα διαχωρίζονται με ελληνικό ερωτηματικό των αρχείων που θα να παρακολουθείτε για τις αλλαγές. Μια αλλαγή σε ένα αρχείο έχει ως αποτέλεσμα την εφαρμογή για να Κάδος Ανακύκλωσης. Κάθε καταχώρηση αποτελείται από ένα όνομα προαιρετικό καταλόγου συν το όνομα απαιτούμενου αρχείου που είναι σε σχέση με τον κατάλογο όπου βρίσκεται το σημείο εισόδου κύρια εφαρμογή. Μπαλαντέρ επιτρέπονται σε μόνο το τμήμα του ονόματος αρχείου. Η προεπιλεγμένη τιμή είναι "\*. js;web.config"

* recycleSignalEnabled

    Η προεπιλεγμένη τιμή είναι false. Εάν ενεργοποιηθεί, η εφαρμογή σας κόμβου να συνδεθείτε με μια καθορισμένη διοχέτευση (μεταβλητή περιβάλλοντος IISNODE\_ΕΛΈΓΧΟΥ\_ΔΙΟΧΈΤΕΥΣΗ) και να στείλετε ένα μήνυμα "Ανακύκλωσης". Αυτό θα προκαλέσει την w3wp να Κάδος Ανακύκλωσης ομαλά.

* idlePageOutTimePeriod

    Η προεπιλεγμένη τιμή είναι 0, γεγονός που σημαίνει ότι αυτή η δυνατότητα είναι απενεργοποιημένη. Εάν οριστεί σε κάποια τιμή μεγαλύτερη του 0, η iisnode θα σελίδας ανάληψη όλες τις εξαρτημένες διαδικασίες κάθε χιλιοστά του δευτερολέπτου 'idlePageOutTimePeriod'. Για να κατανοήσετε τι σελίδα ανάληψη σημαίνει, ανατρέξτε στην παρούσα [τεκμηρίωση](https://msdn.microsoft.com/library/windows/desktop/ms682606.aspx). Αυτή η ρύθμιση θα είναι χρήσιμα για εφαρμογές που εκμετάλλευση πολλή μνήμη και θέλετε να pageout μνήμης στο δίσκο μερικές φορές για να αποδεσμεύσετε ορισμένες RAM.

>[AZURE.WARNING] Να είστε προσεκτικοί όταν ενεργοποιείτε τις ακόλουθες ρυθμίσεις παραμέτρων παραγωγής εφαρμογές. Σύσταση είναι να ενεργοποιήσετε δεν στην ζωντανή παραγωγής εφαρμογές.

* debugHeaderEnabled

    Η προεπιλεγμένη τιμή είναι false. Εάν οριστεί στην τιμή true, iisnode θα προσθέσει μια HTTP απόκριση κεφαλίδα iisnode-ο εντοπισμός σφαλμάτων σε κάθε απόκριση HTTP στέλνει την τιμή κεφαλίδας iisnode-ο εντοπισμός σφαλμάτων είναι μια διεύθυνση URL. Μπορεί να είναι εργασίας μεμονωμένα τμήματα διαγνωστικών πληροφοριών, εξετάζοντας το τμήμα της διεύθυνσης URL, αλλά πολύ καλύτερη απεικόνισης είναι δυνατό, ανοίγοντας τη διεύθυνση URL στο πρόγραμμα περιήγησης.

* loggingEnabled

    Αυτή η ρύθμιση ελέγχει την καταγραφή των stdout και stderr από iisnode. Iisnode θα καταγράψετε stdout/stderr από διεργασίες κόμβο το ξεκινά και εγγραφής στον κατάλογο που καθορίζεται στη ρύθμιση 'logDirectory'. Όταν αυτή είναι η ενεργοποίηση, η εφαρμογή σας θα να γράφετε αρχεία καταγραφής στο σύστημα αρχείων και, ανάλογα με το ποσό της καταγραφής που πραγματοποιήθηκε από την εφαρμογή, ενδέχεται να υπάρχουν επιπτώσεις στην απόδοση.

* devErrorsEnabled

    Η προεπιλεγμένη τιμή είναι false. Όταν οριστεί στην τιμή true, iisnode θα εμφανίσει τον κωδικό κατάστασης HTTP και τον κωδικό σφάλματος Win32 από το πρόγραμμα περιήγησης. Ο κωδικός win32 μπορεί να βοηθήσει τον εντοπισμό σφαλμάτων συγκεκριμένους τύπους θέματα.
    
* debuggingEnabled (δεν δίνει τη δυνατότητα στην τοποθεσία live παραγωγής)

    Αυτή η ρύθμιση ελέγχει τη δυνατότητα εντοπισμού σφαλμάτων. Iisnode συνδυάζεται με κόμβο επιθεώρηση. Με την ενεργοποίηση αυτής της ρύθμισης, μπορείτε να ενεργοποιήσετε τον εντοπισμό σφαλμάτων της εφαρμογής σας κόμβο. Όταν αυτή η ρύθμιση είναι ενεργοποιημένη, iisnode θα διάταξη τα αρχεία είναι απαραίτητο κόμβου-επιθεώρηση στον κατάλογο 'debuggerVirtualDir' στην πρώτη αίτηση εντοπισμού σφαλμάτων στην εφαρμογή σας κόμβο. Μπορείτε να φορτώσετε την επιθεώρηση κόμβο με την αποστολή μιας αίτησης για να http://yoursite/server.js/debug. Μπορείτε να ελέγχετε το τμήμα της διεύθυνσης URL εντοπισμού σφαλμάτων με τη ρύθμιση 'debuggerPathSegment'. Από προεπιλογή debuggerPathSegment = 'εντοπισμός σφαλμάτων'. Μπορείτε να ρυθμίσετε αυτή να GUID για παράδειγμα, έτσι ώστε να είναι δυσκολότερο να εντοπιστούν από άλλους χρήστες.

    Επιλέξτε αυτήν τη [σύνδεση](https://tomasz.janczuk.org/2011/11/debug-nodejs-applications-on-windows.html) για περισσότερες λεπτομέρειες σχετικά με τον εντοπισμό σφαλμάτων.

## <a name="scenarios-and-recommendationstroubleshooting"></a>Σενάρια και συστάσεις/αντιμετώπιση προβλημάτων

### <a name="my-node-application-is-making-too-many-outbound-calls"></a>Η εφαρμογή μου κόμβου πραγματοποιεί πάρα πολλές εξερχόμενες κλήσεις.

Πολλές εφαρμογές θα θέλατε να κάνετε εξερχόμενες συνδέσεις ως μέρος του κανονική λειτουργία τους. Για παράδειγμα, όταν παρουσιάζεται μια αίτηση, την εφαρμογή κόμβου θα θέλετε να επικοινωνήσετε με μια REST API σε κάποιο άλλο σημείο και λάβετε ορισμένες πληροφορίες για την επεξεργασία της αίτησης. Που θα θέλετε να χρησιμοποιήσετε έναν παράγοντα ενεργών διατήρηση κατά την πραγματοποίηση κλήσεων http ή https. Για παράδειγμα, μπορείτε να χρησιμοποιήσετε τη λειτουργική μονάδα agentkeepalive ως τον παράγοντα ενεργών διατήρηση όταν κάνετε αυτές τις εξερχόμενες κλήσεις. Αυτό διασφαλίζει ότι η sockets χρησιμοποιούνται ξανά στην σας azure webapp Εικονική και μειώνοντας τα επιβάρυνσης της δημιουργίας νέου sockets για κάθε αίτησης εξαγωγής. Επίσης, αυτό διασφαλίζει ότι χρησιμοποιείτε το μικρότερο αριθμό sockets για να κάνετε πολλές αιτήσεις εξερχομένων και, επομένως, δεν μπορείτε να υπερβείτε το maxSockets που έχουν εκχωρηθεί ανά Εικονική. Σύσταση στην Azure Webapps θα ήταν για να ορίσετε την τιμή maxSockets agentKeepAlive σε ένα σύνολο 160 sockets ανά Εικονική. Αυτό σημαίνει ότι εάν έχετε 4 node.exe εκτελείται σε η Εικονική, θα θέλετε να ρυθμίσετε το maxSockets agentKeepAlive 40 ανά node.exe που είναι 160 σύνολο ανά Εικονική.

Ρύθμιση παραμέτρων agentKeepALive παράδειγμα:

```
var keepaliveAgent = new Agent({    
    maxSockets: 40,    
    maxFreeSockets: 10,    
    timeout: 60000,    
    keepAliveTimeout: 300000    
});
```

Αυτό το παράδειγμα προϋποθέτει ότι έχετε 4 node.exe εκτελείται σε Εικονική σας. Εάν έχετε διαφορετικό αριθμό node.exe εκτελείται σε η Εικονική, θα πρέπει να τροποποιήσετε τη maxSockets ρύθμιση αντίστοιχα.

### <a name="my-node-application-is-consuming-too-much-cpu"></a>Η εφαρμογή μου κόμβο καταναλώνει πάρα πολύ CPU.

Πιθανώς θα εμφανιστεί σύσταση από το Azure Webapps στην πύλη σχετικά με υψηλή κατανάλωση cpu. Μπορείτε επίσης να ρυθμίσετε οθόνες για να παρακολουθήσετε για ορισμένες [μετρήσεις](web-sites-monitor.md). Κατά τον έλεγχο η χρήση της CPU στον πίνακα [Εργαλείων πύλη Azure](../application-insights/app-insights-web-monitor-performance.md), ελέγξτε τις τιμές MAX για CPU, ώστε να μην χάσετε ανάληψη τις τιμές κορύφωσης.
Στις περιπτώσεις όπου πιστεύετε ότι η εφαρμογή σας καταναλώνει πάρα πολύ CPU και δεν είναι δυνατό να εξηγήσετε γιατί, θα πρέπει να προφίλ εφαρμογή σας κόμβο.

### 

#### <a name="profiling-your-node-application-on-azure-webapps-with-v8-profiler"></a>Δημιουργία προφίλ την εφαρμογή κόμβου στο azure webapps με V8 Profiler

Για παράδειγμα, σας επιτρέπει να ας υποθέσουμε ότι έχετε μια εφαρμογή κόσμο Γεια σας που θέλετε να προφίλ, όπως φαίνεται παρακάτω:

```
var http = require('http');    
function WriteConsoleLog() {    
    for(var i=0;i<99999;++i) {    
        console.log('hello world');    
    }    
}

function HandleRequest() {    
    WriteConsoleLog();    
}

http.createServer(function (req, res) {    
    res.writeHead(200, {'Content-Type': 'text/html'});    
    HandleRequest();    
    res.end('Hello world!');    
}).listen(process.env.PORT);
```

Μεταβείτε στο σας scm https://yoursite.scm.azurewebsites.net/DebugConsole τοποθεσίας

Θα δείτε μια γραμμή εντολών, όπως φαίνεται παρακάτω. Μεταβείτε στον κατάλογο τοποθεσιών/wwwroot

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/scm_install_v8.png)

Εκτελέστε την εντολή "npm εγκατάσταση v8 profiler"

Αυτό θα πρέπει να εγκαταστήσουν v8-profiler κόμβο\_κατάλογος λειτουργικές μονάδες και όλες τις εξαρτήσεις.
Τώρα, επεξεργαστείτε το server.js για την εφαρμογή του προφίλ.

```
var http = require('http');    
var profiler = require('v8-profiler');    
var fs = require('fs');

function WriteConsoleLog() {    
    for(var i=0;i<99999;++i) {    
        console.log('hello world');    
    }    
}

function HandleRequest() {    
    profiler.startProfiling('HandleRequest');    
    WriteConsoleLog();    
    fs.writeFileSync('profile.cpuprofile', JSON.stringify(profiler.stopProfiling('HandleRequest')));    
}

http.createServer(function (req, res) {    
    res.writeHead(200, {'Content-Type': 'text/html'});    
    HandleRequest();    
    res.end('Hello world!');    
}).listen(process.env.PORT);
```

Τις παραπάνω αλλαγές θα προφίλ της συνάρτησης WriteConsoleLog και, στη συνέχεια, συντάξτε το αποτέλεσμα του προφίλ σε αρχείο 'profile.cpuprofile' στην περιοχή σας wwwroot τοποθεσίας. Στείλτε μια πρόσκληση για την εφαρμογή σας. Θα δείτε ένα αρχείο 'profile.cpuprofile' που δημιουργήθηκε στην περιοχή σας wwwroot τοποθεσίας.

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/scm_profile.cpuprofile.png)

Κάντε λήψη αυτού του αρχείου και θα πρέπει να ανοίξετε αυτό το αρχείο με εργαλεία F12 Chrome. Πατήστε F12 στο chrome και, στη συνέχεια, κάντε κλικ στην επιλογή της καρτέλας"προφίλ". Κάντε κλικ στο κουμπί "Φόρτωση". Επιλέξτε το αρχείο profile.cpuprofile που έχετε λάβει. Κάντε κλικ στο προφίλ που μόλις φορτώσει.

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/chrome_tools_view.png)

Θα δείτε ότι 95% του χρόνου που καταναλώθηκε από τη συνάρτηση WriteConsoleLog, όπως φαίνεται παρακάτω. Αυτό δείχνει επίσης τους αριθμούς ακριβές γραμμής και τα αρχεία προέλευσης που προκαλούν το ζήτημα.

### <a name="my-node-application-is-consuming-too-much-memory"></a>Η εφαρμογή μου κόμβο καταναλώνει πάρα πολύ μνήμη.

Πιθανώς θα εμφανιστεί σύσταση από το Azure Webapps στην πύλη σχετικά με την κατανάλωση υψηλής μνήμης. Μπορείτε επίσης να ρυθμίσετε οθόνες για να παρακολουθήσετε για ορισμένες [μετρήσεις](web-sites-monitor.md). Κατά τον έλεγχο τη χρήση μνήμης στον πίνακα [Εργαλείων πύλη Azure](../application-insights/app-insights-web-monitor-performance.md), ελέγξτε τις τιμές MAX για μνήμη, ώστε να μην χάσετε ανάληψη τις τιμές κορύφωσης.

#### <a name="leak-detection-and-heap-diffing-for-nodejs"></a>Απώλεια ανίχνευσης και Diffing σωρού για node.js 

Μπορείτε να χρησιμοποιήσετε [τον κόμβο memwatch](https://github.com/lloyd/node-memwatch) για να σας βοηθήσει να αναγνωρίζετε απώλειες μνήμης.
Μπορείτε να εγκαταστήσετε memwatch όπως v8 profiler και να επεξεργαστείτε τον κώδικα για την καταγραφή και εντοπισμού διαφορών σωρών για τον προσδιορισμό της μνήμης είναι στην εφαρμογή σας.

### <a name="my-nodeexes-are-getting-killed-randomly"></a>Μου node.exe γρήγορα θανατώνονται τυχαία 

Υπάρχουν μερικοί λόγοι γιατί μπορεί να συμβαίνει αυτό:

1.  Η εφαρμογή σας είναι αποστελλόμενο μη καταγεγραμμένο εξαιρέσεις-δ: ελέγχου Please\\αρχική\\LogFiles\\εφαρμογή\\αρχείο καταγραφής errors.txt για τις πληροφορίες στο την εξαίρεση. Αυτό το αρχείο έχει την ανίχνευση στοίβα, ώστε να μπορείτε να διορθώσετε την εφαρμογή που βασίζεται σε αυτό.

2.  Η εφαρμογή σας καταναλώνει πάρα πολύ μνήμη, η οποία επηρεάζει άλλες διεργασίες από τα γρήγορα αποτελέσματα. Εάν η συνολική Εικονική μνήμη είναι το 100%, θα μπορούσε να θανατωθούν σας node.exe από το διαχειριστή διαδικασία για να επιτρέψετε σε άλλες διεργασίες, έχετε την ευκαιρία να κάνετε ορισμένες εργασίες. Για να διορθώσετε αυτό το πρόβλημα, βεβαιωθείτε ότι η εφαρμογή σας δεν υπάρχει διαρροή μνήμης ή εάν η εφαρμογή που χρειάζεται πραγματικά να χρησιμοποιήσετε πολλά μνήμης, επικοινωνήστε κλιμάκωσης σε ένα μεγαλύτερο Εικονική με πολύ περισσότερη μνήμη RAM.

### <a name="my-node-application-does-not-start"></a>Δεν είναι δυνατή η εκκίνηση εφαρμογής του κόμβου

Εάν η εφαρμογή σας επιστρέφει 500 σφάλματα κατά την εκκίνηση, μπορεί να υπάρχει λόγους:

1.  Δεν υπάρχει node.exe στη σωστή θέση. Επιλέξτε τη ρύθμιση nodeProcessCommandLine.

2.  Αρχείο δέσμης ενεργειών κύριο δεν υπάρχει στη σωστή θέση. Επιλέξτε web.config και βεβαιωθείτε ότι το όνομα του αρχείου κύριο δέσμης ενεργειών στην ενότητα προγράμματα χειρισμού συμφωνεί με το αρχείο κύριο δέσμης ενεργειών.

3.  Ρύθμιση παραμέτρων Web.config δεν είναι σωστή – Ελέγξτε τις ρυθμίσεις ονόματα/τιμές.

4.  Ψυχρές Έναρξη – εφαρμογή σας διαρκεί πολύ χρόνο για να εκκίνησης. Εάν η εφαρμογή σας διαρκεί περισσότερο από (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000 δευτερόλεπτα, iisnode θα επιστρέψει 500 σφάλμα. Αύξηση τις τιμές από αυτές τις ρυθμίσεις ώστε να ταιριάζει με την ώρα έναρξης της εφαρμογής ώστε να μην iisnode από έληξε το χρονικό όριο και επιστρέφει το 500 σφάλμα.

### <a name="my-node-application-crashed"></a>Η εφαρμογή μου κόμβο παρουσίασε σφάλμα

Η εφαρμογή σας είναι αποστελλόμενο μη καταγεγραμμένο εξαιρέσεις-δ: ελέγχου Please\\αρχική\\LogFiles\\εφαρμογή\\αρχείο καταγραφής errors.txt για τις πληροφορίες στο την εξαίρεση. Αυτό το αρχείο έχει την ανίχνευση στοίβα, ώστε να μπορείτε να διορθώσετε την εφαρμογή που βασίζεται σε αυτό.

### <a name="my-node-application-takes-too-much-time-to-startup-cold-start"></a>Η εφαρμογή μου κόμβο χρειάζεται πολύ χρόνο για εκκίνησης (ψυχρές ξεκινά)

Πιο συνηθισμένες λόγος είναι ότι η εφαρμογή έχει πολλά αρχεία στον κόμβο\_λειτουργικές μονάδες και η εφαρμογή προσπαθεί να φορτώσει περισσότερα από αυτά τα αρχεία κατά την εκκίνηση. Από προεπιλογή, επειδή τα αρχεία σας βρίσκονται στο κοινόχρηστο στοιχείο δικτύου σε Azure Webapps, κατά τη φόρτωση τόσα αρχεία μπορεί να διαρκέσει αρκετή ώρα.
Ορισμένες λύσεις για να γίνει αυτή η πιο γρήγορα είναι οι εξής:

1.  Βεβαιωθείτε ότι έχετε επιλέξει μια δομή επίπεδο εξάρτηση και χωρίς διπλότυπα εξαρτήσεις με τη χρήση npm3 για να εγκαταστήσετε το λειτουργικές μονάδες.

2.  Προσπαθήστε να τεμπέλη φόρτωση κόμβο σας\_λειτουργικές μονάδες και δεν είναι η φόρτωση όλων των ενοτήτων κατά την εκκίνηση. Αυτό σημαίνει ότι θα πρέπει να γίνεται την κλήση σε require('module') όταν χρειάζεστε όντως εντός της συνάρτησης που προσπαθείτε να χρησιμοποιήσετε τη λειτουργική μονάδα.

3.  Azure Webapps προσφέρει μια δυνατότητα που ονομάζεται τοπικό cache. Αυτή η δυνατότητα αντιγράφει το περιεχόμενό σας από το κοινόχρηστο στοιχείο δικτύου στον τοπικό δίσκο σε η Εικονική. Επειδή τα αρχεία είναι τοπικά, του χρόνου φόρτωσης του κόμβου\_λειτουργικές μονάδες είναι πολύ πιο γρήγορα. -Παρούσα [τεκμηρίωση](../app-service/app-service-local-cache.md) εξηγεί τον τρόπο χρήσης του τοπικού Cache με περισσότερες λεπτομέρειες.

## <a name="iisnode-http-status-and-substatus"></a>Κατάσταση http IISNODE και δευτερεύουσα κατάσταση

Αυτό το [αρχείο προέλευσης](https://github.com/Azure/iisnode/blob/master/src/iisnode/cnodeconstants.h) παραθέτει όλα τα πιθανά κατάστασης/δευτερεύουσα κατάσταση iisnode συνδυασμό να επιστρέψετε σε περίπτωση σφάλματος.

Ενεργοποίηση FREB για την εφαρμογή σας για να δείτε τον κωδικό σφάλματος win32 (βεβαιωθείτε ότι ενεργοποιείτε FREB μόνο σε τοποθεσίες μη παραγωγής για λόγους απόδοσης).

| Κατάσταση HTTP | Δευτερεύουσα κατάσταση HTTP | Πιθανή αιτία;                                                                                                                                                                                            
|-------------|----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------
| 500         | 1000           | Παρουσιάστηκε ορισμένες ζήτημα στέλνει την αίτηση για IISNODE-Ελέγξτε εάν node.exe ξεκίνησε προς τα επάνω. Node.exe θα μπορούσε να έχει παρουσίασε σφάλμα κατά την εκκίνηση. Ελέγξτε τις ρυθμίσεις παραμέτρων web.config για σφάλματα.                                                                                                                                                                                                                                                                                     |
| 500         | 1001           | -Win32Error 0x2 - εφαρμογή δεν ανταποκρίνεται στη διεύθυνση URL. Ελέγξτε τους κανόνες αναδιατύπωση διεύθυνση URL ή εάν express εφαρμογή σας έχει τη σωστή δρομολογεί που ορίζονται από το. -Win32Error 0x6d – επώνυμη διοχέτευση είναι απασχολημένο-Node.exe δεν αποδέχεται αιτήσεις επειδή η κατακόρυφη γραμμή είναι απασχολημένη. Επιλέξτε υψηλή χρήση cpu. -Άλλα σφάλματα-Ελέγξτε εάν node.exe παρουσίασε σφάλμα.
| 500         | 1002           | Παρουσίασε σφάλμα node.exe-δείτε δ:\\αρχική\\LogFiles\\καταγραφής-errors.txt για παρακολούθηση στοίβας.                                                                                                                                                                                                                                                                                                                                                                                        |
| 500         | 1003           | Διοχέτευση ρύθμισης παραμέτρων πρόβλημα – θα πρέπει να βλέπετε ποτέ αυτή αλλά εάν το κάνετε, η ρύθμιση παραμέτρων επώνυμη διοχέτευση είναι εσφαλμένες.                                                                                                                                                                                                                                                                                                                                                          |
| 500         | 1004-1018      | Παρουσιάστηκε κάποιο σφάλμα κατά την αποστολή της αίτησης ή την απόκριση προς/από node.exe επεξεργασίας. Ελέγξτε εάν node.exe παρουσίασε σφάλμα. δ: έλεγχος\\αρχική\\LogFiles\\καταγραφής-errors.txt για παρακολούθηση στοίβας.                                                                                                                                                                                                                                                                                    |
| 503         | 1000           | Μνήμη δεν επαρκεί για την εκχώρηση πιο καθορισμένη διοχέτευση συνδέσεις. Έλεγχος γιατί καταναλώνει τέτοιον μνήμης της εφαρμογής σας. Επιλέξτε maxConcurrentRequestsPerProcess τη ρύθμιση της τιμής. Εάν δεν το άπειρο και που έχουν πολλές αιτήσεις, αυξήσετε αυτήν την τιμή για να αποφύγετε αυτό το σφάλμα.                                                                                                                                                                                                                                                                                                                  |
| 503         | 1001           | Δεν ήταν δυνατή η αποστολή αίτηση να node.exe, επειδή η εφαρμογή Ανακύκλωσης. Μετά την εφαρμογή έχει ανακυκλώνεται, θα πρέπει να εξυπηρετήσει κανονικά αιτήσεις.                                                                                                                                                                                                                                                                                                               |
| 503         | 1002           | Κωδικός σφάλματος win32 ελέγχου για πραγματική λόγο – αίτηση δεν ήταν δυνατή η αποστολή σε μια node.exe.                                                                                                                                                                                                                                                                                                                                                                               |
| 503         | 1003           | Επώνυμη διοχέτευση είναι πολύ απασχολημένοι – δείτε εάν κόμβο καταναλώνει πολλές CPU                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
Υπάρχει μια ρύθμιση μέσα σε NODE.exe που ονομάζεται ΚΌΜΒΟ\_σε ΕΚΚΡΕΜΌΤΗΤΑ\_ΔΙΟΧΈΤΕΥΣΗ\_ΠΑΡΟΥΣΊΕΣ. Από προεπιλογή, εκτός του azure webapps αυτή η τιμή είναι 4. Αυτό σημαίνει ότι node.exe που μπορεί να δέχεται μόνο 4 αιτήσεις ταυτόχρονα την καθορισμένη διοχέτευση. Στην Azure Webapps, αυτή η τιμή έχει οριστεί σε 5000 και αυτή η τιμή πρέπει να είναι αρκετά καλή για τις περισσότερες εφαρμογές κόμβο εκτελείται σε azure webapps. Θα πρέπει να μην βλέπετε 503.1003 στην azure webapps επειδή έχουμε μια υψηλή τιμή για τον ΚΌΜΒΟ\_σε ΕΚΚΡΕΜΌΤΗΤΑ\_ΔΙΟΧΈΤΕΥΣΗ\_ΠΑΡΟΥΣΊΕΣ.  |

## <a name="more-resources"></a>Περισσότεροι πόροι

Ακολουθήστε αυτές τις συνδέσεις για να μάθετε περισσότερα σχετικά με τις εφαρμογές node.js στην Azure εφαρμογής υπηρεσίας.

* [Γρήγορα αποτελέσματα με το Node.js web apps στο Azure εφαρμογής υπηρεσίας](app-service-web-nodejs-get-started.md)
* [Πώς μπορείτε να εντοπίσετε σφάλματα σε μια εφαρμογή web Node.js στο Azure εφαρμογής υπηρεσίας](web-sites-nodejs-debug.md)
* [Χρήση Node.js λειτουργικές μονάδες με εφαρμογές του Azure](../nodejs-use-node-modules-azure-apps.md)
* [Εφαρμογές Web Azure εφαρμογής υπηρεσίας: Node.js](https://blogs.msdn.microsoft.com/silverlining/2012/06/14/windows-azure-websites-node-js/)
* [Κέντρο για προγραμματιστές του node.js](../nodejs-use-node-modules-azure-apps.md)
* [Εξερεύνηση της κονσόλας Super μυστικού Kudu εντοπισμού σφαλμάτων](https://azure.microsoft.com/documentation/videos/super-secret-kudu-debug-console-for-azure-web-sites/)