<properties
    pageTitle="Προμήθεια και ανάπτυξη microservices προβλέψιμα στο Azure"
    description="Μάθετε πώς μπορείτε να αναπτύξετε μια εφαρμογή που αποτελείται από microservices στο Azure εφαρμογής υπηρεσίας ως ενιαία και σε προβλέψιμα, χρησιμοποιώντας πρότυπα ομάδας πόρων JSON και δέσμες ενεργειών PowerShell."
    services="app-service"
    documentationCenter=""
    authors="cephalin"
    manager="wpickett"
    editor="jimbe"/>

<tags
    ms.service="app-service"
    ms.workload="na"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="01/06/2016"
    ms.author="cephalin"/>


# <a name="provision-and-deploy-microservices-predictably-in-azure"></a>Προμήθεια και ανάπτυξη microservices προβλέψιμα στο Azure #

Αυτό το πρόγραμμα εκμάθησης δείχνει πώς μπορείτε να προμηθεύσουν και να αναπτύξετε μια εφαρμογή που αποτελείται από [microservices](https://en.wikipedia.org/wiki/Microservices) στο [Azure εφαρμογής υπηρεσίας](/services/app-service/) ως ενιαία και σε προβλέψιμα, χρησιμοποιώντας πρότυπα ομάδας πόρων JSON και δέσμες ενεργειών PowerShell. 

Κατά την προμήθεια και την ανάπτυξη εφαρμογών υψηλής κλίμακας που αποτελούνται από ιδιαίτερα αποσυνδεδεμένη microservices, επαναληψιμότητας και προβλεψιμότητα είναι κρίσιμης σημασίας για την επιτυχία του. [Azure εφαρμογής υπηρεσίας](/services/app-service/) σάς επιτρέπει να δημιουργήσετε microservices που περιλαμβάνουν εφαρμογές web, εφαρμογές για κινητές συσκευές, API εφαρμογές και λογική εφαρμογών. [Διαχείριση πόρων Azure](../azure-resource-manager/resource-group-overview.md) σάς επιτρέπει να διαχειριστείτε όλα τα microservices ως μονάδα, μαζί με τις εξαρτήσεις πόρων, όπως η βάση δεδομένων και ρυθμίσεων των στοιχείων ελέγχου προέλευσης. Τώρα, μπορείτε επίσης να αναπτύξετε όπως μια εφαρμογή χρησιμοποιώντας πρότυπα JSON και απλή δέσμη ενεργειών PowerShell. 

[AZURE.INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)] 

## <a name="what-you-will-do"></a>Τι θα κάνετε ##

Στο πρόγραμμα εκμάθησης, θα αναπτύξετε μια εφαρμογή η οποία περιλαμβάνει:

-   Δύο web apps (δηλαδή δύο microservices)
-   Μια βάση δεδομένων SQL του υπολογιστή στο παρασκήνιο
-   Ρυθμίσεις εφαρμογής, συμβολοσειρές σύνδεσης και στοιχείο ελέγχου προέλευσης
-   Εφαρμογή ιδέες, ειδοποιήσεις, ρυθμίσεις autoscaling

## <a name="tools-you-will-use"></a>Εργαλεία που θα χρησιμοποιήσετε ##

Σε αυτό το πρόγραμμα εκμάθησης, θα μπορείτε να χρησιμοποιήσετε τα παρακάτω εργαλεία. Δεδομένου ότι δεν είναι ολοκληρωμένη συζήτηση σχετικά με τα εργαλεία, θα τηρείται για το σενάριο σε ολοκληρωμένες και μόνο παρέχει μια σύντομη εισαγωγή σε κάθε, και όπου μπορείτε να βρείτε περισσότερες πληροφορίες σχετικά με αυτό. 

### <a name="azure-resource-manager-templates-json"></a>Azure πρότυπα διαχείρισης πόρων (JSON) ###
 
Κάθε φορά που δημιουργείτε μια εφαρμογή web στο Azure εφαρμογής υπηρεσίας, για παράδειγμα, διαχείριση πόρων Azure χρησιμοποιεί ένα πρότυπο JSON για να δημιουργήσετε την ομάδα ολόκληρο πόρων με τους πόρους του στοιχείου. Σύνθετη προτύπου από το [Azure Marketplace](/marketplace) όπως η εφαρμογή [Μεταβλητού μεγέθους WordPress](/marketplace/partners/wordpress/scalablewordpress/) μπορεί να περιλαμβάνει τη βάση δεδομένων MySQL, λογαριασμούς χώρου αποθήκευσης, το πρόγραμμα εφαρμογής υπηρεσίας, η εφαρμογή web μόνη της, ειδοποίησης κανόνων, των ρυθμίσεων της εφαρμογής, ρυθμίσεις autoscale και περισσότερες και όλα αυτά τα πρότυπα είναι διαθέσιμες σε εσάς μέσω του PowerShell. Για πληροφορίες σχετικά με τον τρόπο για να κάνετε λήψη και χρήση αυτών των προτύπων, ανατρέξτε στο θέμα [Χρήση του PowerShell Azure με τη διαχείριση πόρων Azure](../powershell-azure-resource-manager.md).

Για περισσότερες πληροφορίες σχετικά με τα πρότυπα για τη διαχείριση πόρων Azure, ανατρέξτε στο θέμα [Σύνταξη από κοινού πρότυπα διαχείρισης πόρων Azure](../resource-group-authoring-templates.md)

### <a name="azure-sdk-26-for-visual-studio"></a>Azure SDK 2.6 για το Visual Studio ###

Τα πιο πρόσφατα SDK περιέχει βελτιώσεις για την υποστήριξη του προτύπου για τη διαχείριση πόρων στο πρόγραμμα επεξεργασίας JSON. Μπορείτε να χρησιμοποιήστε αυτήν την επιλογή για να δημιουργήσετε ένα πρότυπο ομάδα πόρων από την αρχή ή ανοίξτε ένα υπάρχον πρότυπο JSON (όπως ένα πρότυπο ληφθέντων συλλογή) για την τροποποίηση, τη συμπλήρωση του αρχείου παραμέτρους και ακόμα και να αναπτύξετε την ομάδα των πόρων απευθείας από μια ομάδα πόρων Azure λύση.

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [2.6 SDK Azure για το Visual Studio](/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).

### <a name="azure-powershell-080-or-later"></a>Azure PowerShell 0.8.0 ή νεότερη έκδοση ###

Αρχή στην έκδοση 0.8.0, η εγκατάσταση του PowerShell Azure περιλαμβάνει τη λειτουργική μονάδα Azure διαχείριση πόρων, εκτός από τη λειτουργική μονάδα Azure. Η νέα ενότητα σάς επιτρέπει να δέσμη ενεργειών ανάπτυξης των ομάδων πόρων.

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Χρήση του PowerShell Azure με τη διαχείριση πόρων Azure](../powershell-azure-resource-manager.md)

### <a name="azure-resource-explorer"></a>Εξερεύνηση Azure πόρων ###

Αυτό το [εργαλείο προεπισκόπησης](https://resources.azure.com) σάς επιτρέπει να εξερευνήσετε των ορισμών JSON όλες τις ομάδες πόρων στη συνδρομή σας και τους μεμονωμένους πόρους. Στο εργαλείο, μπορείτε να επεξεργαστείτε των ορισμών JSON ενός πόρου, να διαγράψετε μιας ολόκληρης της ιεραρχίας των πόρων και να δημιουργήσετε νέους πόρους.  Οι πληροφορίες που είναι άμεσα διαθέσιμα σε αυτό το εργαλείο είναι πολύ χρήσιμο για το πρότυπο σύνταξης επειδή εμφανίζει ποιες ιδιότητες πρέπει να ορίσετε για έναν συγκεκριμένο τύπο πόρου, σωστές τιμές, κ.λπ. Μπορείτε να ακόμα και δημιουργήστε την ομάδα πόρων σας στην [Πύλη του Azure](https://portal.azure.com/), στη συνέχεια, έλεγχος τους ορισμούς JSON στο εργαλείο "Εξερεύνηση" για να σας βοηθήσει να templatize την ομάδα των πόρων.

### <a name="deploy-to-azure-button"></a>Ανάπτυξη Azure κουμπί ###

Εάν χρησιμοποιείτε το GitHub για το στοιχείο ελέγχου προέλευσης, μπορείτε να τοποθετήσετε μια [Ανάπτυξη Azure κουμπί](/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) στο αρχείο README για το. MD, που σας επιτρέπει μια ανάπτυξη του κλειδιού ενεργοποίηση περιβάλλοντος εργασίας Χρήστη για Azure. Ενώ μπορείτε να το κάνετε για οποιαδήποτε απλό web app, μπορείτε να επεκτείνετε αυτό για να επιτρέψετε την ανάπτυξη μια ομάδα πόρων ολόκληρου του τοποθετώντας ένα αρχείο azuredeploy.json στη ρίζα αποθετήριο δεδομένων. Αυτό το αρχείο JSON, που περιέχει το πρότυπο ομάδα πόρων, θα χρησιμοποιηθεί κατά την ανάπτυξη Azure κουμπί για να δημιουργήσετε την ομάδα των πόρων. Για παράδειγμα, ανατρέξτε στο θέμα το δείγμα [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) , η οποία θα χρησιμοποιήσετε σε αυτό το πρόγραμμα εκμάθησης.

## <a name="get-the-sample-resource-group-template"></a>Λάβετε το δείγμα προτύπου ομάδα πόρων ##

Τώρα, ας ξεκινήσουμε δεξιά σε αυτήν.

1.  Μεταβείτε στο δείγμα εφαρμογής υπηρεσίας [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) .

2.   Στο readme.md, κάντε κλικ στην επιλογή **Ανάπτυξη να Azure**.
 
3.  Είστε μεταβείτε στην τοποθεσία [ανάπτυξη-σε-azure](https://deploy.azure.com) και σας ζητηθεί να ανάπτυξης παράμετροι εισόδου. Παρατηρήστε ότι τα περισσότερα πεδία έχουν συμπληρωθεί με το όνομα του αποθετηρίου και κάποιες συμβολοσειρές τυχαίου για εσάς. Μπορείτε να αλλάξετε όλα τα πεδία, εάν θέλετε, αλλά τα μόνο βασικά πράγματα που πρέπει να εισαγάγετε τη σύνδεση διαχείρισης SQL Server και τον κωδικό πρόσβασης, στη συνέχεια, κάντε κλικ στο κουμπί **Επόμενο**.
 
    ![](./media/app-service-deploy-complex-application-predictably/gettemplate-1-deploybuttonui.png)

4.  Στη συνέχεια, κάντε κλικ στην επιλογή **Ανάπτυξη** για να ξεκινήσετε τη διαδικασία ανάπτυξης. Αφού εκτελεστεί η διαδικασία ολοκλήρωσης, κάντε κλικ στην επιλογή το http://todoapp*XXXX*. azurewebsites.net σύνδεση για να αναζητήσετε εφαρμογής. 

    ![](./media/app-service-deploy-complex-application-predictably/gettemplate-2-deployprogress.png)

    Το περιβάλλον εργασίας Χρήστη θα είναι λίγο αργή όταν κάνετε πρώτα περιήγηση σε αυτήν, επειδή απλώς εκκίνηση εφαρμογών, αλλά πείσει στον εαυτό σας ότι πρόκειται για ένα πλήρως λειτουργικό εφαρμογής.

5.  Πίσω στη σελίδα "ανάπτυξη", κάντε κλικ στη σύνδεση **Διαχείριση** για να δείτε τη νέα εφαρμογή στην πύλη του Azure.

6.  Στην αναπτυσσόμενη λίστα **βασικά στοιχεία** , κάντε κλικ στη σύνδεση ομάδας πόρων. Σημειώστε επίσης την εφαρμογή web είναι ήδη συνδεδεμένος στο αποθετήριο GitHub στην περιοχή **Εξωτερικών έργου**. 

    ![](./media/app-service-deploy-complex-application-predictably/gettemplate-3-portalresourcegroup.png)
 
7.  Στο blade την ομάδα πόρων, σημειώστε ότι δεν υπάρχουν ήδη δύο εφαρμογών web και μία βάση δεδομένων SQL στην ομάδα πόρων.

    ![](./media/app-service-deploy-complex-application-predictably/gettemplate-4-portalresourcegroupclicked.png)
 
Όλα τα στοιχεία που είδατε μόνο σε λίγα λεπτά σύντομο είναι μια εφαρμογή πλήρως ανεπτυγμένος δύο-microservice, με όλα τα στοιχεία, εξαρτήσεις, ρυθμίσεις, βάση δεδομένων και συνεχής δημοσίευση, ρυθμίσετε με ένα αυτοματοποιημένο ενορχήστρωσης στη Διαχείριση πόρων Azure. Όλα αυτά έχει γίνει από δύο πράγματα:

-   Η ανάπτυξη Azure κουμπί
-   azuredeploy.JSON στη ρίζα repo

Μπορείτε να αναπτύξετε αυτήν την ίδια εφαρμογή δεκάδες, εκατοντάδες ή χιλιάδες φορές και έχουν τις ίδιες ρυθμίσεις παραμέτρων ακριβή κάθε φορά. Η επαναληψιμότητα και την προβλεψιμότητα αυτής της προσέγγισης σάς επιτρέπει να αναπτύξετε εφαρμογές υψηλής κλίμακας με ευκολία και εμπιστοσύνης.

## <a name="examine-or-edit-azuredeployjson"></a>Εξετάστε (ή επεξεργασία) AZUREDEPLOY. JSON ##

Τώρα ας ρίξουμε μια ματιά πώς έχει ρυθμιστεί στο αποθετήριο GitHub. Θα έχετε τη χρήση του προγράμματος επεξεργασίας JSON στο Azure .NET SDK, επομένως, εάν δεν έχετε εγκαταστήσει ήδη [Azure .NET SDK 2.6](/downloads/), κάνετε τώρα.

1.  Κλωνοποίηση του αποθετηρίου [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) χρησιμοποιώντας το εργαλείο git Αγαπημένα. Στο παρακάτω στιγμιότυπο, να αυτόν τον τρόπο στην Εξερεύνηση ομάδας στο Visual Studio 2013.

    ![](./media/app-service-deploy-complex-application-predictably/examinejson-1-vsclone.png)

2.  Από το ριζικό κατάλογο αποθετήριο, ανοίξτε azuredeploy.json στο Visual Studio. Εάν δεν βλέπετε το παράθυρο διάρθρωσης JSON, πρέπει να εγκαταστήσετε το Azure .NET SDK.

    ![](./media/app-service-deploy-complex-application-predictably/examinejson-2-vsjsoneditor.png)

Δεν θα περιγράφουν κάθε λεπτομέρεια της μορφής JSON, αλλά η ενότητα [Περισσότερους πόρους](#resources) έχει συνδέσεις για την εκμάθηση της γλώσσας πρότυπο ομάδα πόρων. Εδώ, απλώς θα για να εμφανίσετε τις ενδιαφέρουσες δυνατότητες που σας βοηθούν να γρήγορα αποτελέσματα στο πραγματοποίηση το δικό σας προσαρμοσμένο πρότυπο για ανάπτυξη εφαρμογών.

### <a name="parameters"></a>Παράμετροι ###

Ρίξτε μια ματιά στην ενότητα παράμετροι για να δείτε ότι οι περισσότερες από αυτές τις παραμέτρους είναι τι το κουμπί **Ανάπτυξη να Azure** σάς ζητά να εισαγάγετε. Στην τοποθεσία πίσω από το κουμπί **Ανάπτυξη να Azure** συμπληρώνει το περιβάλλον εργασίας Χρήστη, χρησιμοποιώντας τις παραμέτρους που ορίζονται στο azuredeploy.json εισόδου. Αυτές οι παράμετροι χρησιμοποιούνται σε όλη τους ορισμούς πόρων, όπως ονόματα πόρων, τιμές ιδιοτήτων, κ.λπ.

### <a name="resources"></a>Πόροι ###

Στον κόμβο πόρους, μπορείτε να δείτε ότι έχουν οριστεί 4 πόρους ανώτατου επιπέδου, συμπεριλαμβάνοντας μια παρουσία του SQL Server, ένα πρόγραμμα εφαρμογής υπηρεσίας και τις δύο εφαρμογών web. 

#### <a name="app-service-plan"></a>Πρόγραμμα εφαρμογής υπηρεσίας ####

Ας ξεκινήσουμε με απλή πόρο ριζικού επιπέδου στην το JSON. Στη διάρθρωση JSON, κάντε κλικ στην επιλογή εφαρμογή το σχέδιο παροχής υπηρεσιών με την ονομασία **[hostingPlanName]** για να επισημάνετε τον αντίστοιχο κώδικα JSON. 

![](./media/app-service-deploy-complex-application-predictably/examinejson-3-appserviceplan.png)

Λάβετε υπόψη ότι η `type` στοιχείο Καθορίζει τη συμβολοσειρά για ένα πρόγραμμα εφαρμογής υπηρεσίας (αυτό ονομαζόταν σύμπλεγμα διακομιστών μια μεγάλη και πολύ καιρό), και άλλα στοιχεία και τις ιδιότητες που έχουν συμπληρωθεί χρησιμοποιώντας τις παραμέτρους που ορίζονται στο αρχείο JSON αυτόν τον πόρο δεν διαθέτει ένθετη πόροι.

>[AZURE.NOTE] Σημειώστε επίσης ότι η τιμή του `apiVersion` ενημερώνει Azure ποια έκδοση του το REST API για να χρησιμοποιήσετε τον ορισμό πόρων JSON με και θα μπορεί να επηρεάσει πώς ο πόρος πρέπει να μορφοποιηθούν εντός του `{}`. 

#### <a name="sql-server"></a>SQL Server ####

Στη συνέχεια, κάντε κλικ στον πόρο SQL Server με το όνομα **της** στη διάρθρωση JSON.

![](./media/app-service-deploy-complex-application-predictably/examinejson-4-sqlserver.png)
 
Λάβετε υπόψη τα εξής σχετικά με την επισήμανση JSON κώδικα:

-   Τη χρήση των παραμέτρων εξασφαλίζει ότι οι πόροι που έχουν δημιουργηθεί είναι με το όνομα και έχει ρυθμιστεί με τον τρόπο που το κάνει συνεπείς μεταξύ τους.
-   Ο πόρος της έχει δύο ένθετες πόρους, κάθε ένας έχει μια διαφορετική τιμή για το `type`.
-   Οι πόροι ένθετων μέσα `“resources”: […]`, όπου ορίζονται τη βάση δεδομένων και τους κανόνες τείχους προστασίας, έχετε μια `dependsOn` στοιχείο που καθορίζει το Αναγνωριστικό πόρου του πόρου της ριζικού επιπέδου. Αυτό σας ενημερώνει για το διαχειριστή πόρων Azure, "πριν να δημιουργήσετε αυτόν τον πόρο, που άλλο πόρο πρέπει να υπάρχει ήδη. και εάν άλλες συγκεκριμένο πόρο έχει οριστεί στο πρότυπο, στη συνέχεια, δημιουργήστε ότι ένας πρώτα".

    >[AZURE.NOTE] Για λεπτομερείς πληροφορίες σχετικά με τη χρήση του `resourceId()` συνάρτηση, ανατρέξτε στο θέμα [Συναρτήσεις πρότυπο Azure διαχείριση πόρων](../resource-group-template-functions.md).

-   Το αποτέλεσμα της το `dependsOn` στοιχείο είναι ότι μπορεί να γνωρίζουν από διαχειριστή πόρων Azure τους πόρους που μπορούν να δημιουργηθούν παράλληλα και τους πόρους που πρέπει να δημιουργηθούν διαδοχικά. 

#### <a name="web-app"></a>Εφαρμογή Web ####

Τώρα, ας μετακινήσετε στις εφαρμογές web πραγματική τον εαυτό τους, που είναι πιο σύνθετη. Κάντε κλικ στην εφαρμογή web [variables('apiSiteName')] στη διάρθρωση JSON για να επισημάνετε τον κώδικά JSON. Θα παρατηρήσετε ότι πράγματα που πρέπει να δέχονται πολύ πιο ενδιαφέρουσα. Για το σκοπό που θα μιλήσετε σχετικά με τις δυνατότητες ένα προς ένα:

##### <a name="root-resource"></a>Πόρος ρίζας #####

Η εφαρμογή web εξαρτάται από δύο διαφορετικούς πόρους. Αυτό σημαίνει ότι η διαχείριση πόρων Azure θα δημιουργήσει την εφαρμογή web μόνο αφού δημιουργηθεί το πρόγραμμα εφαρμογής υπηρεσίας και την παρουσία του SQL Server.

![](./media/app-service-deploy-complex-application-predictably/examinejson-5-webapproot.png)

##### <a name="app-settings"></a>Ρυθμίσεις εφαρμογής #####

Οι ρυθμίσεις εφαρμογής επίσης ορίζονται ως ένθετη πόρο.

![](./media/app-service-deploy-complex-application-predictably/examinejson-6-webappsettings.png)

Στο το `properties` στοιχείο για `config/appsettings`, έχετε δύο των ρυθμίσεων της εφαρμογής στη μορφή `“<name>” : “<value>”`.

-   `PROJECT`είναι μια [Ρύθμιση KUDU](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) που σας ενημερώνει για ανάπτυξη του Azure ποια έργου για να χρησιμοποιήσετε σε μια λύση Visual Studio πολλών έργων. Που θα σας δείξουν αργότερα τη ρύθμιση των παραμέτρων προέλευσης στοιχείου ελέγχου, αλλά επειδή ο κωδικός ToDoApp είναι σε μια λύση Visual Studio πολλών έργων, χρειαζόμαστε αυτήν τη ρύθμιση.
-   `clientUrl`είναι απλώς μια εφαρμογή ρύθμιση που τον κώδικα της εφαρμογής χρησιμοποιεί.

##### <a name="connection-strings"></a>Συμβολοσειρές σύνδεσης #####

Οι συμβολοσειρές σύνδεσης επίσης ορίζονται ως ένθετη πόρο.

![](./media/app-service-deploy-complex-application-predictably/examinejson-7-webappconnstr.png)

Στο το `properties` στοιχείο για `config/connectionstrings`, κάθε συμβολοσειρά σύνδεσης επίσης ορίζεται ως ένα ζεύγος τιμή: όνομα, με τη συγκεκριμένη μορφή του `“<name>” : {“value”: “…”, “type”: “…”}`. Για το `type` στοιχείο, πιθανές τιμές είναι `MySql`, `SQLServer`, `SQLAzure`, και `Custom`.

>[AZURE.TIP] Για μια λίστα οριστικά από τους τύπους συμβολοσειρά σύνδεσης, εκτελέστε την ακόλουθη εντολή στο Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")
    
##### <a name="source-control"></a>Στοιχείο ελέγχου προέλευσης #####

Οι ρυθμίσεις του στοιχείου ελέγχου προέλευσης ορίζονται επίσης ως ένθετη πόρο. Azure διαχείριση πόρων χρησιμοποιεί αυτόν τον πόρο για τη ρύθμιση παραμέτρων συνεχής δημοσίευσης (ανατρέξτε στο θέμα ότι σε `IsManualIntegration` αργότερα) και επίσης για να ξεκινήσετε την ανάπτυξη του κώδικα της εφαρμογής αυτόματα κατά την επεξεργασία του αρχείου JSON.

![](./media/app-service-deploy-complex-application-predictably/examinejson-8-webappsourcecontrol.png)

`RepoUrl`και `branch` πρέπει να είναι αρκετά διαισθητική και πρέπει να κατευθύνουν στο του αποθετηρίου Git και το όνομα του κλάδου για δημοσίευση από. Και πάλι, αυτά ορίζονται από παραμέτρους εισόδου. 

Σημείωση στο το `dependsOn` στοιχείο που, εκτός από τον πόρο εφαρμογής web μόνη της, `sourcecontrols/web` επίσης εξαρτάται από το `config/appsettings` και `config/connectionstrings`. Αυτό συμβαίνει επειδή όταν `sourcecontrols/web` έχει ρυθμιστεί, της διαδικασίας ανάπτυξης του Azure θα προσπαθήσει αυτόματα να αναπτύξετε, να δημιουργήσετε και να ξεκινήσετε τον κώδικα της εφαρμογής. Επομένως, εισαγωγή αυτή την εξάρτηση σάς βοηθά να βεβαιωθείτε ότι η εφαρμογή θα έχει πρόσβαση στις ρυθμίσεις εφαρμογής απαιτείται και συμβολοσειρές σύνδεσης πριν εκτελέσετε τον κώδικα της εφαρμογής. 

>[AZURE.NOTE] Σημειώστε επίσης ότι `IsManualIntegration` έχει οριστεί σε `true`. Αυτή η ιδιότητα είναι απαραίτητη σε αυτό το πρόγραμμα εκμάθησης, επειδή σας δεν ανήκουν στην πραγματικότητα του αποθετηρίου GitHub και, επομένως, δεν είναι δυνατό να μπορέσουν να εκχωρήσετε δικαιώματα σε Azure για ρύθμιση παραμέτρων συνεχής δημοσίευσης από [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (π.χ. Ώθηση αποθετήριο αυτόματων ενημερώσεων σε Azure). Μπορείτε να χρησιμοποιήσετε την προεπιλεγμένη τιμή `false` για το καθορισμένο αρχείο φύλαξης μόνο εάν έχετε ρυθμίσει τις παραμέτρους του κατόχου GitHub διαπιστευτήρια στην [πύλη του Azure](https://portal.azure.com/) πριν από. Με άλλα λόγια, εάν έχετε ρυθμίσει του στοιχείου ελέγχου προέλευσης σε GitHub ή BitBucket για οποιαδήποτε εφαρμογή στην [Πύλη του Azure](https://portal.azure.com/) προηγουμένως, χρησιμοποιώντας τα διαπιστευτήρια χρήστη, στη συνέχεια, Azure θα απομνημονεύει τα διαπιστευτήρια και χρησιμοποιήστε τους κάθε φορά που αναπτύσσετε οποιαδήποτε εφαρμογή από GitHub ή BitBucket στο μέλλον. Ωστόσο, εάν δεν το έχετε κάνει ήδη, ανάπτυξης του προτύπου JSON θα αποτύχει όταν διαχείριση πόρων Azure προσπαθεί να ρύθμιση παραμέτρων του web app Προέλευση στοιχείου ελέγχου επειδή αυτό δεν είναι δυνατό να συνδεθείτε στο GitHub ή BitBucket με τα διαπιστευτήρια του κατόχου αποθετήριο δεδομένων.

## <a name="compare-the-json-template-with-deployed-resource-group"></a>Σύγκριση του προτύπου JSON με ομάδα ανεπτυγμένος πόρων ##

Εδώ, μπορείτε να μεταβείτε μέσω λεπίδες όλα τα web της εφαρμογής στην [Πύλη του Azure](https://portal.azure.com/), αλλά υπάρχει κάποιο άλλο εργαλείο που είναι πολύ χρήσιμη, εάν δεν περισσότερα. Μεταβείτε στο εργαλείο προεπισκόπηση το [Azure πόρων Explorer](https://resources.azure.com) , το οποίο παρέχει μια αναπαράσταση JSON όλες τις ομάδες πόρων στο τις συνδρομές σας, καθώς υπάρχουν στην πραγματικότητα στο υπόβαθρο Azure. Μπορείτε επίσης να δείτε πώς η ομάδα πόρων JSON ιεραρχία στο Azure αντιστοιχεί με την ιεραρχία στο αρχείο του προτύπου που χρησιμοποιείται για τη δημιουργία του.

Για παράδειγμα, όταν μεταβείτε στο εργαλείο [Explorer πόρων Azure](https://resources.azure.com) και αναπτύξτε τους κόμβους στην Εξερεύνηση, μπορώ να δω την ομάδα των πόρων και τους πόρους ριζικού επιπέδου που έχουν συλλεχθεί κάτω από τους τύπους των αντίστοιχων πόρων.

![](./media/app-service-deploy-complex-application-predictably/ARM-1-treeview.png)

Εάν κάνετε Διερεύνηση σε μια εφαρμογή web, θα πρέπει να μπορείτε να δείτε λεπτομέρειες ρύθμισης παραμέτρων εφαρμογής web παρόμοιο με το παρακάτω στιγμιότυπο οθόνης:

![](./media/app-service-deploy-complex-application-predictably/ARM-2-jsonview.png)

Ξανά, τους πόρους ένθετων θα πρέπει να έχετε μια ιεραρχία που είναι παρόμοια με εκείνα του αρχείου προτύπου JSON και θα πρέπει να βλέπετε το των ρυθμίσεων της εφαρμογής, συμβολοσειρές σύνδεσης, κ.λπ., σωστά αντανακλώνται στο παράθυρο JSON. Δεν υπάρχουν οι ρυθμίσεις εδώ μπορεί να υποδεικνύουν κάποιο πρόβλημα με το αρχείο σας JSON και μπορεί να σας βοηθήσει να αντιμετωπίσετε το αρχείο προτύπου JSON.

## <a name="deploy-the-resource-group-template-yourself"></a>Ανάπτυξη του προτύπου ομάδα πόρων στον εαυτό σας ##

Το κουμπί **Ανάπτυξη να Azure** είναι ιδανική, αλλά σας επιτρέπει να αναπτύξετε το πρότυπο ομάδα πόρων στο azuredeploy.json μόνο εάν έχετε ήδη προωθηθεί azuredeploy.json GitHub. Το .NET SDK Azure παρέχει επίσης τα εργαλεία για να αναπτύξετε οποιοδήποτε αρχείο προτύπου JSON απευθείας από το τοπικό υπολογιστή σας. Για να κάνετε αυτό, ακολουθήστε τα παρακάτω βήματα:

1.  Στο Visual Studio, κάντε κλικ στο **αρχείο** > **Δημιουργία** > **έργου**.

2.  Κάντε κλικ στην επιλογή **Visual C#** > **Cloud** > **Ομάδα πόρων Azure**, στη συνέχεια, κάντε κλικ στο κουμπί **OK**.

    ![](./media/app-service-deploy-complex-application-predictably/deploy-1-vsproject.png)

3.  Στην **Επιλογή πρότυπο Azure**, επιλέξτε **Κενό πρότυπο** και κάντε κλικ στο κουμπί **OK**.

4.  Σύρετε το azuredeploy.json στο φάκελο **προτύπου** από το νέο έργο σας.

    ![](./media/app-service-deploy-complex-application-predictably/deploy-2-copyjson.png)

5.  Από την Εξερεύνηση λύσεων, ανοίξτε το αντίγραφο azuredeploy.json.

6.  Μόνο για την επίδειξη, ας προσθέσουμε ορισμένους πόρους τυπικές πληροφορίες εφαρμογής για το αρχείο JSON, κάνοντας κλικ στην επιλογή **Προσθήκη πόρων**. Εάν σας ενδιαφέρει μόνο για την ανάπτυξη του αρχείου JSON, μεταβείτε στα βήματα ανάπτυξη.

    ![](./media/app-service-deploy-complex-application-predictably/deploy-3-newresource.png)

7.  Επιλέξτε **Εφαρμογή ιδέες για τις εφαρμογές Web**, στη συνέχεια, βεβαιωθείτε ότι μια υπάρχουσα υπηρεσία εφαρμογής Σχεδιασμός και web app είναι επιλεγμένο και, στη συνέχεια, κάντε κλικ στην επιλογή **Προσθήκη**.

    ![](./media/app-service-deploy-complex-application-predictably/deploy-4-newappinsight.png)

    Θα τώρα μπορείτε να δείτε διάφορες νέων πόρων που, ανάλογα με τον πόρο και τι κάνει, να εξαρτώνται από το πρόγραμμα εφαρμογής υπηρεσίας ή της εφαρμογής web. Αυτοί οι πόροι δεν είναι ενεργοποιημένες από τα υπάρχοντα ορισμό και πρόκειται να το αλλάξετε.

    ![](./media/app-service-deploy-complex-application-predictably/deploy-5-appinsightresources.png)
 
8.  Στη διάρθρωση JSON, κάντε κλικ στην επιλογή **appInsights AutoScale** για να επισημάνετε τον κώδικά JSON. Αυτή είναι η ρύθμιση κλιμάκωσης για το πρόγραμμα εφαρμογής υπηρεσίας.

9.  Επισήμανση κώδικα JSON, εντοπίστε το `location` και `enabled` ιδιότητες και ορίστε τους, όπως φαίνεται παρακάτω.

    ![](./media/app-service-deploy-complex-application-predictably/deploy-6-autoscalesettings.png)

10. Στη διάρθρωση JSON, κάντε κλικ στην επιλογή **CPUHigh appInsights** για να επισημάνετε τον κώδικά JSON. Αυτή είναι μια ειδοποίηση.

11. Εντοπίστε το `location` και `isEnabled` ιδιότητες και ορίστε τους, όπως φαίνεται παρακάτω. Κάντε το ίδιο για τις άλλες τρεις ειδοποιήσεις (μοβ βολβοί).

    ![](./media/app-service-deploy-complex-application-predictably/deploy-7-alerts.png)

12. Τώρα είστε έτοιμοι να αναπτύξετε. Κάντε δεξί κλικ στο έργο και επιλέξτε **Ανάπτυξη** > **Νέας ανάπτυξης**.

    ![](./media/app-service-deploy-complex-application-predictably/deploy-8-newdeployment.png)

13. Συνδεθείτε στο λογαριασμό σας στο Azure, εάν έχετε κάνει ήδη.

14. Επιλέξτε μια υπάρχουσα ομάδα πόρων στη συνδρομή σας ή δημιουργήστε ένα νέο, επιλέξτε **azuredeploy.json**και, στη συνέχεια, κάντε κλικ στην επιλογή **Επεξεργασία παραμέτρους**.

    ![](./media/app-service-deploy-complex-application-predictably/deploy-9-deployconfig.png)

    Θα τώρα μπορείτε να επεξεργαστείτε όλες τις παραμέτρους που ορίζονται στο αρχείο προτύπου σε όμορφες και πίνακα. Παράμετροι που ορίζουν τις προεπιλεγμένες ρυθμίσεις θα έχετε ήδη τις προεπιλεγμένες τιμές και παραμέτρους που καθορίζουν μια λίστα των επιτρεπόμενων τιμές θα εμφανίζονται ως αναπτυσσόμενη λίστα.

    ![](./media/app-service-deploy-complex-application-predictably/deploy-10-parametereditor.png)

15. Συμπληρώστε όλες τις παραμέτρους κενή και χρησιμοποιήστε τη [διεύθυνση repo GitHub για ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) **repoUrl**. Στη συνέχεια, κάντε κλικ στην επιλογή **Αποθήκευση**.
 
    ![](./media/app-service-deploy-complex-application-predictably/deploy-11-parametereditorfilled.png)

    >[AZURE.NOTE] Autoscaling είναι μια δυνατότητα που παρέχονται σε **Τυπική** σειρά ή νεότερη έκδοση και ειδοποιήσεις πρόγραμμα επιπέδου είναι δυνατότητες που προσφέρει στο **βασικό** επίπεδο ή νεότερη έκδοση, θα πρέπει να ορίσετε την παράμετρο **sku** σε **Τυπική** ή **Premium** για να βλέπετε όλες νέα εφαρμογή τις ιδέες σας ανάβει πόρους.
    
16. Κάντε κλικ στην επιλογή **Ανάπτυξη**. Εάν έχετε επιλέξει την **Αποθήκευση κωδικών πρόσβασης**, ο κωδικός πρόσβασης θα αποθηκευτούν στο η παράμετρος αρχείο **σε μορφή απλού κειμένου**. Διαφορετικά, θα σας ζητηθεί να εισαγάγετε τον κωδικό πρόσβασης βάσης δεδομένων κατά τη διαδικασία ανάπτυξης.

Αυτό είναι! Τώρα, χρειάζεστε για να μεταβείτε στην [Πύλη Azure](https://portal.azure.com/) και το εργαλείο [Azure Explorer πόρων](https://resources.azure.com) για να δείτε τις νέες ειδοποιήσεις και ρυθμίσεις autoscale προστεθεί σας JSON αναπτυχθεί εφαρμογής.

Τα βήματα σε αυτήν την ενότητα πραγματοποιηθεί κυρίως τα εξής:

1.  Προετοιμασία του αρχείου προτύπου
2.  Δημιουργία ενός αρχείου παραμέτρου για να μεταβείτε με το αρχείο προτύπου
3.  Αναπτυχθεί το αρχείο προτύπου με το αρχείο παραμέτρων

Το τελευταίο βήμα γίνεται εύκολα με ένα cmdlet του PowerShell. Για να δείτε τι θα κάνατε Visual Studio όταν το αναπτύξετε την εφαρμογή σας, ανοίξτε Scripts\Deploy AzureResourceGroup.ps1. Υπάρχουν πολλές κώδικα εκεί, αλλά απλώς θα για να επισημάνετε όλα του σχετικές κώδικα που θέλετε να αναπτύξετε το αρχείο προτύπου με το αρχείο παραμέτρων.

![](./media/app-service-deploy-complex-application-predictably/deploy-12-powershellsnippet.png)

Το τελευταίο cmdlet, `New-AzureResourceGroup`, είναι εκείνη που πραγματικά εκτελεί την ενέργεια. Όλα αυτά θα πρέπει να δείχνουν για εσάς ότι, με τη Βοήθεια του tooling, είναι σχετικά απλές για να αναπτύξετε την εφαρμογή σας cloud προβλέψιμα. Κάθε φορά που εκτελείτε το cmdlet στο ίδιο πρότυπο με το ίδιο αρχείο παραμέτρων, θα λάβετε το ίδιο αποτέλεσμα.

## <a name="summary"></a>Σύνοψη ##

Στο DevOps, επαναληψιμότητας και προβλεψιμότητα είναι πλήκτρων για οποιαδήποτε επιτυχημένη ανάπτυξη μιας εφαρμογής υψηλής κλίμακας που αποτελείται από microservices. Σε αυτό το πρόγραμμα εκμάθησης, έχετε αναπτύξει μια εφαρμογή δύο microservice για Azure ως ομάδα μία πόρων χρησιμοποιώντας το πρότυπο διαχείρισης πόρων Azure. Ευτυχώς, το σας εκχώρησε τις γνώσεις που χρειάζεστε για να ξεκινήσετε τη μετατροπή την εφαρμογή στο Azure σε ένα πρότυπο και να προμηθεύσουν και να αναπτύξετε το προβλέψιμα. 

## <a name="next-steps"></a>Επόμενα βήματα ##

Μάθετε πώς μπορείτε να [εφαρμόσετε ευέλικτη μεθοδολογία και δημοσίευση συνεχώς την εφαρμογή σας microservices με ευκολία](app-service-agile-software-development.md) και ανάπτυξης για προχωρημένους τεχνικές όπως [flighting ανάπτυξης](app-service-web-test-in-production-controlled-test-flight.md) εύκολα.

<a name="resources"></a>
## <a name="more-resources"></a>Περισσότεροι πόροι ##

-   [Azure γλώσσα προτύπου για τη διαχείριση πόρων](../resource-group-authoring-templates.md)
-   [Σύνταξη από κοινού Azure πρότυπα διαχείρισης πόρων](../resource-group-authoring-templates.md)
-   [Azure συναρτήσεις προτύπου για τη διαχείριση πόρων](../resource-group-template-functions.md)
-   [Ανάπτυξη μιας εφαρμογής με το πρότυπο διαχείρισης πόρων Azure](../resource-group-template-deploy.md)
-   [Χρήση του Azure PowerShell με τη Διαχείριση Azure πόρων](../powershell-azure-resource-manager.md)
-   [Αντιμετώπιση προβλημάτων αναπτύξεις ομάδα πόρων στο Azure](../resource-manager-troubleshoot-deployments-portal.md)




 
