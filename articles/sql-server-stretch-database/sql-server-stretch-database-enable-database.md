<properties
    pageTitle="Ενεργοποίηση παραμόρφωση βάσης δεδομένων για μια βάση δεδομένων | Microsoft Azure"
    description="Μάθετε πώς μπορείτε να ρυθμίσετε τις παραμέτρους μιας βάσης δεδομένων για τη βάση δεδομένων παραμόρφωση."
    services="sql-server-stretch-database"
    documentationCenter=""
    authors="douglaslMS"
    manager="jhubbard"
    editor=""/>

<tags
    ms.service="sql-server-stretch-database"
    ms.workload="data-management"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="08/05/2016"
    ms.author="douglasl"/>

# <a name="enable-stretch-database-for-a-database"></a>Ενεργοποίηση παραμόρφωση βάσης δεδομένων για μια βάση δεδομένων

Για να ρυθμίσετε τις παραμέτρους μιας υπάρχουσας βάσης δεδομένων για παραμόρφωση βάση δεδομένων, επιλέξτε εργασίες **| Παραμόρφωση | Ενεργοποίηση** για μια βάση δεδομένων στο SQL Server Management Studio για να ανοίξετε τον οδηγό **Ενεργοποίηση της βάσης δεδομένων για παραμόρφωση** . Μπορείτε επίσης να χρησιμοποιήσετε Transact\-SQL για να ενεργοποιήσετε την παραμόρφωση βάσης δεδομένων για μια βάση δεδομένων.

Εάν επιλέξετε εργασίες **| Παραμόρφωση | Ενεργοποίηση** για έναν μεμονωμένο πίνακα και δεν έχετε ακόμη ενεργοποιήσει τη βάση δεδομένων για παραμόρφωση βάση δεδομένων, ο οδηγός ρυθμίζει τις παραμέτρους της βάσης δεδομένων για τη βάση δεδομένων παραμόρφωση και σας επιτρέπει να επιλέξετε πίνακες ως μέρος της διαδικασίας. Ακολουθήστε τα βήματα σε αυτό το θέμα αντί για τα βήματα στο θέμα [Ενεργοποίηση της βάσης δεδομένων παραμόρφωση για έναν πίνακα](sql-server-stretch-database-enable-database.md).

Ενεργοποίηση παραμόρφωση βάσης δεδομένων σε μια βάση δεδομένων ή έναν πίνακα απαιτεί db\_δικαιώματα κατόχου. Ενεργοποίηση παραμόρφωση βάσης δεδομένων σε μια βάση δεδομένων απαιτεί επίσης δικαιώματα ΕΛΈΓΧΟΥ στη βάση ΔΕΔΟΜΈΝΩΝ.

 >   [AZURE.NOTE] Αργότερα, εάν απενεργοποιήσετε παραμόρφωση βάσης δεδομένων, να θυμάστε ότι η απενεργοποίηση παραμόρφωση βάσης δεδομένων για έναν πίνακα ή για μια βάση δεδομένων δεν διαγράφει το απομακρυσμένο αντικείμενο. Εάν θέλετε να διαγράψετε τον απομακρυσμένο πίνακα ή η απομακρυσμένη βάση δεδομένων, πρέπει να αποθέστε το χρησιμοποιώντας την πύλη διαχείρισης Azure. Τα αντικείμενα απομακρυσμένο εξακολουθούν να αναλαμβάνουν Azure κόστους μέχρι να τα διαγράψετε με μη αυτόματο τρόπο.

## <a name="before-you-get-started"></a>Πριν ξεκινήσετε

-   Πριν να ρυθμίζετε τις παραμέτρους μιας βάσης δεδομένων για παραμόρφωση, συνιστάται να εκτελέσετε το Σύμβουλο παραμόρφωση βάσης δεδομένων για τον προσδιορισμό βάσεις δεδομένων και τους πίνακες που πληρούν τις απαιτήσεις για παραμόρφωση. Σύμβουλος βάση δεδομένων των παραμόρφωση προσδιορίζει επίσης ζητήματα που εμποδίζουν. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [αναγνώριση βάσεις δεδομένων και πινάκων για βάση δεδομένων παραμόρφωση](sql-server-stretch-database-identify-databases.md).

-   Αναθεώρηση [περιορισμοί για παραμόρφωση βάσης δεδομένων](sql-server-stretch-database-limitations.md).

-   Επέκταση βάσης δεδομένων μετεγκαθιστά τα δεδομένα για να Azure. Επομένως, πρέπει να έχετε ένα λογαριασμό Azure και μια συνδρομή για τις χρεώσεις. Για να αποκτήσετε ένα λογαριασμό Azure, [κάντε κλικ εδώ](http://azure.microsoft.com/pricing/free-trial/).

-   Έχετε τις πληροφορίες και η σύνδεση που χρειάζεστε για να δημιουργήσετε ένα νέο Azure διακομιστή ή για να επιλέξετε μια υπάρχουσα Azure διακομιστή.

## <a name="EnableTSQLServer"></a>Προϋπόθεση: Ενεργοποίηση παραμόρφωση βάσης δεδομένων στο διακομιστή
Μπορείτε να ενεργοποιήσετε παραμόρφωση βάσης δεδομένων σε μια βάση δεδομένων ή έναν πίνακα, πρέπει να την ενεργοποιήσετε στον τοπικό διακομιστή. Αυτή η λειτουργία απαιτεί δικαιώματα sysadmin ή serveradmin.

-   Εάν έχετε τα απαραίτητα δικαιώματα διαχείρισης, τον οδηγό **Ενεργοποίηση της βάσης δεδομένων για παραμόρφωση** ρυθμίζει τις παραμέτρους του διακομιστή για παραμόρφωση.

-   Εάν δεν έχετε τα απαραίτητα δικαιώματα, ο διαχειριστής πρέπει να ενεργοποιήσετε την επιλογή με μη αυτόματο τρόπο, εκτελώντας **sp\_ρύθμιση παραμέτρων** πριν από την εκτέλεση του οδηγού ή ο διαχειριστής έχει την εκτέλεση του οδηγού.

Για να ενεργοποιήσετε παραμόρφωση βάσης δεδομένων στο διακομιστή με μη αυτόματο τρόπο, εκτελέστε **sp\_ρύθμιση παραμέτρων** και να ενεργοποιήσετε την επιλογή **Αρχειοθέτηση απομακρυσμένα δεδομένα** . Το παρακάτω παράδειγμα επιτρέπει την επιλογή **Αρχειοθέτηση απομακρυσμένα δεδομένα** , ορίζοντας την τιμή σε 1.

```
EXEC sp_configure 'remote data archive' , '1';
GO

RECONFIGURE;
GO
```
Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Ρύθμιση παραμέτρων τα απομακρυσμένα δεδομένα αρχειοθέτηση επιλογή ρύθμισης παραμέτρων διακομιστή](https://msdn.microsoft.com/library/mt143175.aspx) και [sp_configure (Transact-SQL)](https://msdn.microsoft.com/library/ms188787.aspx).

## <a name="Wizard"></a>Χρησιμοποιήστε τον οδηγό για να ενεργοποιήσετε παραμόρφωση βάσης δεδομένων σε μια βάση δεδομένων
Για πληροφορίες σχετικά με τη βάση δεδομένων ενεργοποίηση για τον Οδηγό παραμόρφωση, καθώς και τις πληροφορίες που πρέπει να εισαγάγετε και τις επιλογές που έχετε να κάνετε, ανατρέξτε στο θέμα [Γρήγορα αποτελέσματα με την εκτέλεση της βάσης δεδομένων με ενεργοποίηση για τον Οδηγό παραμόρφωση](sql-server-stretch-database-wizard.md).

## <a name="EnableTSQLDatabase"></a>Χρήση Transact\-SQL για να ενεργοποιήσετε παραμόρφωση βάσης δεδομένων σε μια βάση δεδομένων
Μπορείτε να ενεργοποιήσετε παραμόρφωση βάσης δεδομένων σε μεμονωμένους πίνακες, πρέπει να την ενεργοποιήσετε στη βάση δεδομένων.

Ενεργοποίηση παραμόρφωση βάσης δεδομένων σε μια βάση δεδομένων ή έναν πίνακα απαιτεί db\_δικαιώματα κατόχου. Ενεργοποίηση παραμόρφωση βάσης δεδομένων σε μια βάση δεδομένων απαιτεί επίσης δικαιώματα ΕΛΈΓΧΟΥ στη βάση ΔΕΔΟΜΈΝΩΝ.

1.  Πριν ξεκινήσετε, επιλέξτε έναν υπάρχοντα Azure διακομιστή για τα δεδομένα τα οποία μετεγκαθιστά παραμόρφωση βάσης δεδομένων, ή δημιουργήστε ένα νέο Azure διακομιστή.

2.  Στο διακομιστή του Azure, δημιουργήστε έναν κανόνα τείχους προστασίας με τη διεύθυνση IP του SQL Server που σας επιτρέπει να SQL Server επικοινωνία με τον απομακρυσμένο διακομιστή.

    Μπορείτε εύκολα να βρείτε τις τιμές που χρειάζεστε και να δημιουργήσετε τον κανόνα τείχους προστασίας κατά προσπαθείτε να συνδεθείτε με το διακομιστή Azure από την Εξερεύνηση αντικειμένου στο SQL Server Management Studio (SSMS). SSMS σάς βοηθά να δημιουργήσετε τον κανόνα, ανοίγοντας το παρακάτω παράθυρο διαλόγου που ήδη περιλαμβάνει τις απαιτούμενες τιμές διεύθυνση IP.

    ![Δημιουργία κανόνα τείχους προστασίας στο SSMS][FirewallRule]

3.  Για να ρυθμίσετε μια βάση δεδομένων SQL Server για παραμόρφωση βάση δεδομένων, η βάση δεδομένων πρέπει να έχει ένα πρωτεύον κλειδί βάσης δεδομένων. Το πρωτεύον κλειδί βάσης δεδομένων διασφαλίζει τα διαπιστευτήρια που χρησιμοποιεί παραμόρφωση βάσης δεδομένων για σύνδεση σε απομακρυσμένη βάση δεδομένων. Ακολουθεί ένα παράδειγμα το οποίο δημιουργεί ένα νέο πρωτεύον κλειδί βάσης δεδομένων.

    ```tsql
    USE <database>;
    GO

    CREATE MASTER KEY ENCRYPTION BY PASSWORD ='<password>';
    GO
    ```

    Για περισσότερες πληροφορίες σχετικά με το πρωτεύον κλειδί βάσης δεδομένων, ανατρέξτε στο θέμα [ΔΗΜΙΟΥΡΓΊΑ ΠΡΩΤΕΎΟΝ ΚΛΕΙΔΊ (Transact-SQL)](https://msdn.microsoft.com/library/ms174382.aspx) και [Δημιουργία ενός πρωτεύοντος κλειδιού βάσης δεδομένων](https://msdn.microsoft.com/library/aa337551.aspx).

4.  Όταν ρυθμίζετε τις παραμέτρους μιας βάσης δεδομένων για τη βάση δεδομένων παραμόρφωση, πρέπει να δώσετε μια πιστοποίηση για παραμόρφωση βάση δεδομένων για να χρησιμοποιήσετε για την επικοινωνία μεταξύ του SQL Server σε εσωτερική εγκατάσταση και ο απομακρυσμένος διακομιστής Azure. Έχετε δύο επιλογές.

    -   Μπορείτε να παράσχετε μια διαπιστευτήρια διαχειριστή.

        -   Εάν ενεργοποιήσετε παραμόρφωση βάσης δεδομένων με την εκτέλεση του οδηγού, μπορείτε να δημιουργήσετε τα διαπιστευτήρια εκείνη τη στιγμή.

        -   Εάν σκοπεύετε να ενεργοποιήσετε παραμόρφωση βάση δεδομένων, εκτελώντας **ΤΡΟΠΟΠΟΊΗΣΗ βάσης ΔΕΔΟΜΈΝΩΝ**, πρέπει να δημιουργήσετε τα διαπιστευτήρια με μη αυτόματο τρόπο πριν να εκτελέσετε **ΤΡΟΠΟΠΟΊΗΣΗ βάσης ΔΕΔΟΜΈΝΩΝ** για να ενεργοποιήσετε την παραμόρφωση βάσης δεδομένων.

        Ακολουθεί ένα παράδειγμα το οποίο δημιουργεί μια νέα πιστοποίηση.

        ```tsql
        CREATE DATABASE SCOPED CREDENTIAL <db_scoped_credential_name>
            WITH IDENTITY = '<identity>' , SECRET = '<secret>';
        GO
        ```

        Για περισσότερες πληροφορίες σχετικά με τα διαπιστευτήρια, ανατρέξτε στο θέμα [ΔΗΜΙΟΥΡΓΊΑ βάσης ΔΕΔΟΜΈΝΩΝ ΕΎΡΟΣ ΔΙΑΠΙΣΤΕΥΤΗΡΊΟΥ (Transact-SQL)](https://msdn.microsoft.com/library/mt270260.aspx). Δημιουργία των διαπιστευτηρίων απαιτεί δικαιώματα ΤΡΟΠΟΠΟΙΉΣΟΥΝ ΟΠΟΙΑΔΉΠΟΤΕ ΔΙΑΠΙΣΤΕΥΤΗΡΊΩΝ.

    -   Μπορείτε να χρησιμοποιήσετε μια εξωτερική υπηρεσία λογαριασμού για τον SQL Server για να επικοινωνήσετε με τον απομακρυσμένο διακομιστή Azure εάν ισχύουν όλες οι ακόλουθες συνθήκες.

        -   Ο λογαριασμός υπηρεσίας με τα οποία εκτελείται η παρουσία του SQL Server είναι ένας λογαριασμός τομέα.

        -   Ο λογαριασμός τομέα ανήκει σε τομέα υπηρεσίας καταλόγου Active Directory του οποίου έχει συνενωθεί με Azure Active Directory.

        -   Ο απομακρυσμένος διακομιστής Azure έχει ρυθμιστεί ώστε να υποστηρίζει έλεγχο ταυτότητας Azure Active Directory.

        -   Ο λογαριασμός υπηρεσίας με τα οποία εκτελείται η παρουσία του SQL Server πρέπει να ρυθμιστεί ως λογαριασμός dbmanager ή sysadmin στον απομακρυσμένο διακομιστή Azure.

5.  Για να ρυθμίσετε τις παραμέτρους μιας βάσης δεδομένων για τη βάση δεδομένων παραμόρφωση, εκτελέστε την εντολή ΤΡΟΠΟΠΟΊΗΣΗ βάσης ΔΕΔΟΜΈΝΩΝ.

    1.  Για το όρισμα SERVER, πληκτρολογήστε το όνομα του υπάρχοντος διακομιστή Azure, συμπεριλαμβανομένου του `.database.windows.net` μέρος του ονόματος \- για παράδειγμα, `MyStretchDatabaseServer.database.windows.net`.

    2.  Δώστε μια υπάρχουσα διαπιστευτηρίων διαχειριστή με το όρισμα ΔΙΑΠΙΣΤΕΥΤΗΡΊΩΝ, ή να καθορίσετε ΟΜΌΣΠΟΝΔΩΝ\_ΥΠΗΡΕΣΊΑ\_ΛΟΓΑΡΙΑΣΜΟΎ = ON. Το παρακάτω παράδειγμα παρέχει μια υπάρχουσα διαπιστευτηρίων.

    ```tsql
    ALTER DATABASE <database name>
        SET REMOTE_DATA_ARCHIVE = ON
            (
                SERVER = '<server_name>',
                CREDENTIAL = <db_scoped_credential_name>
            ) ;
    GO
    ```

## <a name="next-steps"></a>Επόμενα βήματα
-   [Ενεργοποίηση της βάσης δεδομένων παραμόρφωση για έναν πίνακα](sql-server-stretch-database-enable-table.md) για να ενεργοποιήσετε την επιπλέον πίνακες.

-   [Βάση δεδομένων παραμόρφωση οθόνη](sql-server-stretch-database-monitor.md) για να δείτε την κατάσταση της μετεγκατάστασης δεδομένων.

-   [Παύση και συνέχιση παραμόρφωση βάσης δεδομένων](sql-server-stretch-database-pause.md)

-   [Διαχείριση και αντιμετώπιση προβλημάτων παραμόρφωση βάσης δεδομένων](sql-server-stretch-database-manage.md)

-   [Δημιουργίας αντιγράφων ασφαλείας με δυνατότητα παραμόρφωση βάσεις δεδομένων](sql-server-stretch-database-backup.md)

## <a name="see-also"></a>Δείτε επίσης

[Προσδιορισμός βάσεων δεδομένων και πινάκων για βάση δεδομένων παραμόρφωση](sql-server-stretch-database-identify-databases.md)

[Η πρόταση ALTER βάσης ΔΕΔΟΜΈΝΩΝ ΟΡΙΣΜΌΣ επιλογών (Transact-SQL)](https://msdn.microsoft.com/library/bb522682.aspx)

[FirewallRule]: ./media/sql-server-stretch-database-enable-database/firewall.png
