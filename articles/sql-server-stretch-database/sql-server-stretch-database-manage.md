<properties
    pageTitle="Διαχείριση και αντιμετώπιση προβλημάτων βάσης δεδομένων παραμόρφωση | Microsoft Azure"
    description="Μάθετε πώς μπορείτε να διαχειριστείτε και αντιμετώπιση προβλημάτων παραμόρφωση βάσης δεδομένων."
    services="sql-server-stretch-database"
    documentationCenter=""
    authors="douglaslMS"
    manager="jhubbard"
    editor=""/>

<tags
    ms.service="sql-server-stretch-database"
    ms.workload="data-management"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="06/27/2016"
    ms.author="douglasl"/>

# <a name="manage-and-troubleshoot-stretch-database"></a>Διαχείριση και αντιμετώπιση προβλημάτων παραμόρφωση βάση δεδομένων

Για να διαχειριστείτε και αντιμετώπιση προβλημάτων παραμόρφωση βάσης δεδομένων, χρησιμοποιήστε τα εργαλεία και τις μεθόδους που περιγράφονται σε αυτό το θέμα.

## <a name="manage-local-data"></a>Διαχείριση τοπικών δεδομένων

### <a name="LocalInfo"></a>Λήψη πληροφοριών σχετικά με τις τοπικές βάσεις δεδομένων και τους πίνακες που είναι ενεργοποιημένες για βάση δεδομένων παραμόρφωση
Ανοίξτε την προβολές καταλόγου **sys.databases** και **sys.tables** για να δείτε πληροφορίες σχετικά με την παραμόρφωση\-με δυνατότητα βάσεις δεδομένων SQL Server και πίνακες. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [sys.databases (Transact-SQL)](https://msdn.microsoft.com/library/ms178534.aspx) και [sys.tables (Transact-SQL)](https://msdn.microsoft.com/library/ms187406.aspx).

Για να δείτε πόσο χώρο μια παραμόρφωση\-με δυνατότητα πίνακα χρησιμοποιεί στον SQL Server, εκτελέστε την ακόλουθη πρόταση.

 ```tsql
USE <Stretch-enabled database name>;
GO
EXEC sp_spaceused '<Stretch-enabled table name>', 'true', 'LOCAL_ONLY';
GO
 ```
## <a name="manage-data-migration"></a>Διαχείριση δεδομένων μετεγκατάστασης

### <a name="check-the-filter-function-applied-to-a-table"></a>Ελέγξτε τη συνάρτηση φίλτρο που έχουν εφαρμοστεί σε έναν πίνακα
Ανοίξετε την προβολή καταλόγου **sys.remote\_δεδομένων\_αρχειοθέτησης\_πίνακες** και ελέγξτε την τιμή της το **φίλτρο\_κατηγόρημα** στήλη για να προσδιορίσετε τη συνάρτηση που χρησιμοποιεί το παραμόρφωση βάσης δεδομένων για να επιλέξετε γραμμές για τη μετεγκατάσταση. Εάν η τιμή είναι μηδέν, ολόκληρο τον πίνακα είναι επιλέξιμο για να μετεγκαταστήσετε. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [sys.remote_data_archive_tables (Transact-SQL)](https://msdn.microsoft.com/library/dn935003.aspx) και [Επιλέξτε γραμμές για να μετεγκαταστήσετε χρησιμοποιώντας μια συνάρτηση φίλτρου](sql-server-stretch-database-predicate-function.md).

### <a name="Migration"></a>Ελέγξτε την κατάσταση της μετεγκατάστασης δεδομένων
Επιλέξτε εργασίες **| Παραμόρφωση | Οθόνη** για μια βάση δεδομένων στο SQL Server Management Studio για την παρακολούθηση της μετεγκατάστασης δεδομένων στην Εποπτεία παραμόρφωση βάσης δεδομένων. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [οθόνη και αντιμετώπιση προβλημάτων μετεγκατάστασης δεδομένων (βάση δεδομένων παραμόρφωση)](sql-server-stretch-database-monitor.md).

Εναλλακτικά, ανοίξτε την προβολή δυναμική διαχείριση **sys.dm\_db\_rda\_μετεγκατάστασης\_κατάστασης** για να δείτε πόσες δέσμες και γραμμές δεδομένων έχουν μετεγκατασταθεί.

### <a name="Firewall"></a>Αντιμετώπιση προβλημάτων μετεγκατάστασης δεδομένων
Για την αντιμετώπιση προβλημάτων προτάσεις, ανατρέξτε στο θέμα [οθόνη και αντιμετώπιση προβλημάτων μετεγκατάστασης δεδομένων (βάση δεδομένων παραμόρφωση)](sql-server-stretch-database-monitor.md).

## <a name="manage-remote-data"></a>Διαχείριση απομακρυσμένα δεδομένα

### <a name="RemoteInfo"></a>Λήψη πληροφοριών σχετικά με τις βάσεις δεδομένων της απομακρυσμένης και πίνακες που χρησιμοποιούνται από παραμόρφωση βάσης δεδομένων
Ανοίξτε τις προβολές του καταλόγου **sys.remote\_δεδομένων\_αρχειοθέτησης\_βάσεις δεδομένων** και **sys.remote\_δεδομένων\_αρχειοθέτησης\_πίνακες** για να δείτε πληροφορίες σχετικά με τους πίνακες και απομακρυσμένο βάσεις δεδομένων στην οποία είναι αποθηκευμένο μετεγκαταστάθηκαν δεδομένων. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [sys.remote_data_archive_databases (Transact-SQL)](https://msdn.microsoft.com/library/dn934995.aspx) και [sys.remote_data_archive_tables (Transact-SQL)](https://msdn.microsoft.com/library/dn935003.aspx).

Για να δείτε πόσο χώρο χρησιμοποιεί έναν πίνακα με δυνατότητα παραμόρφωση στο Azure, εκτελέστε την ακόλουθη πρόταση.

 ```tsql
USE <Stretch-enabled database name>;
GO
EXEC sp_spaceused '<Stretch-enabled table name>', 'true', 'REMOTE_ONLY';
GO
 ```

### <a name="delete-migrated-data"></a>Διαγραφή δεδομένων μετεγκατάστασης  
Εάν θέλετε να διαγράψετε τα δεδομένα που έχει ήδη γίνει μετεγκατάσταση για να Azure, ακολουθήστε τα βήματα που περιγράφονται στην [sys.sp_rda_reconcile_batch](https://msdn.microsoft.com/library/mt707768.aspx).

## <a name="manage-table-schema"></a>Διαχείριση σχήματος πίνακα

### <a name="dont-change-the-schema-of-the-remote-table"></a>Μην αλλάξετε το σχήμα του απομακρυσμένου πίνακα
Μην αλλάξετε τη διάταξη ενός απομακρυσμένου Azure πίνακα που σχετίζεται με έναν πίνακα SQL Server έχει ρυθμιστεί για παραμόρφωση βάσης δεδομένων. Συγκεκριμένα, μην τροποποιείτε το όνομα ή τον τύπο δεδομένων μιας στήλης. Η δυνατότητα βάσης δεδομένων παραμόρφωση κάνει διάφορες υποθέσεις σχετικά με το σχήμα του απομακρυσμένου πίνακα σχέση με το σχήμα του πίνακα του SQL Server. Εάν αλλάξετε το απομακρυσμένο σχήμα, βάση δεδομένων παραμόρφωση σταματά να λειτουργεί για τον τροποποιημένο πίνακα.

### <a name="reconcile-table-columns"></a>Συμφωνία στηλών πίνακα  
Εάν διαγράψατε κατά λάθος στήλες από τον απομακρυσμένο πίνακα, εκτελέστε **sp_rda_reconcile_columns** για να προσθέσετε στήλες στον απομακρυσμένο πίνακα που υπάρχουν στο την παραμόρφωση\-με δυνατότητα πίνακα του SQL Server, αλλά όχι σε απομακρυσμένο πίνακα. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [sys.sp_rda_reconcile_columns](https://msdn.microsoft.com/library/mt707765.aspx).  

  > [!IMPORTANT] Όταν **sp_rda_reconcile_columns** αναδημιουργεί στήλες που διαγράψατε κατά λάθος από τον απομακρυσμένο πίνακα, δεν γίνεται ανάκτηση των δεδομένων που ήταν προηγουμένως στις διαγραμμένες στήλες.

**sp_rda_reconcile_columns** Διαγραφή στηλών από τον απομακρυσμένο πίνακα που υπάρχουν στον απομακρυσμένο πίνακα αλλά όχι στο την παραμόρφωση\-με δυνατότητα πίνακα του SQL Server. Εάν υπάρχουν στήλες του απομακρυσμένου Azure πίνακα που δεν υπάρχουν πλέον στο την παραμόρφωση\-με δυνατότητα SQL Server πίνακα, αυτές τις επιπλέον στήλες δεν εμποδίζει παραμόρφωση βάσης δεδομένων λειτουργεί κανονικά. Προαιρετικά, μπορείτε να καταργήσετε τις επιπλέον στήλες με μη αυτόματο τρόπο.  

## <a name="manage-performance-and-costs"></a>Διαχείριση απόδοσης και κόστους  

### <a name="troubleshoot-query-performance"></a>Αντιμετώπιση προβλημάτων επιδόσεις ερωτημάτων
Ερωτήματα που περιλαμβάνουν παραμόρφωση\-αναμένεται με δυνατότητα πίνακες για να εκτελέσετε πιο αργά από αυτήν που είχαν πριν από τους πίνακες που έχουν ενεργοποιηθεί για παραμόρφωση. Εάν οι επιδόσεις του ερωτήματος μειώνονται σημαντικά, ελέγξτε τα ακόλουθα πιθανά προβλήματα.

-   Είναι ο διακομιστής Azure σε διαφορετική γεωγραφική περιοχή από τον SQL Server; Ρύθμιση παραμέτρων του Azure διακομιστή να είναι με την ίδια γεωγραφική περιοχή του SQL Server για να μειώσετε την αδράνεια δικτύου.

-   Ενδέχεται να έχει μειωθεί συνθήκες του δικτύου σας. Για πληροφορίες σχετικά με θέματα πρόσφατες ή ΡΕΥΜΑΤΟΣ, επικοινωνήστε με το διαχειριστή του δικτύου σας.

### <a name="increase-azure-performance-level-for-resource-intensive-operations-such-as-indexing"></a>Αύξηση του επιπέδου Azure επιδόσεων για πόρο\-εντατική πράξεις, όπως η δημιουργία ευρετηρίου
Όταν δημιουργείτε, εκ νέου δημιουργία ή αναδιοργάνωση ένα ευρετήριο σε έναν μεγάλο πίνακα που έχει ρυθμιστεί για βάση δεδομένων παραμόρφωση και σκοπεύετε να έντονη υποβολή ερωτημάτων τα δεδομένα μετεγκατάστασης στο Azure σε αυτό το διάστημα, ίσως χρειάζεται να αυξήσετε το επίπεδο της η αντίστοιχη απομακρυσμένη βάση δεδομένων Azure απόδοσης στη διάρκεια της λειτουργίας. Για περισσότερες πληροφορίες σχετικά με τις επιδόσεις και τις τιμές, ανατρέξτε στο θέμα [Τις τιμές του SQL Server παραμόρφωση βάσης δεδομένων](https://azure.microsoft.com/pricing/details/sql-server-stretch-database/).

### <a name="you-cant-pause-the-sql-server-stretch-database-service-on-azure"></a>Δεν μπορείτε να διακόψετε την υπηρεσία βάση δεδομένων του SQL Server παραμόρφωση σε Azure  
 Βεβαιωθείτε ότι έχετε επιλέξει τις κατάλληλες επιδόσεις και τις πληροφορίες τιμολόγησης επίπεδο. Εάν αυξάνετε το επίπεδο απόδοσης προσωρινά για έναν πόρο\-εντατική πράξη, επαναφέρετε στο προηγούμενο επίπεδο μετά την ολοκλήρωση της λειτουργίας. Για περισσότερες πληροφορίες σχετικά με τις επιδόσεις και τις τιμές, ανατρέξτε στο θέμα [Τις τιμές του SQL Server παραμόρφωση βάσης δεδομένων](https://azure.microsoft.com/pricing/details/sql-server-stretch-database/).  

## <a name="change-the-scope-of-queries"></a>Αλλαγή του εύρους ερωτημάτων  
 Ερωτήματα παραμόρφωση\-πίνακες με δυνατότητα επιστρέφουν τοπικούς και απομακρυσμένους δεδομένων από προεπιλογή. Μπορείτε να αλλάξετε το εύρος των ερωτημάτων για όλα τα ερωτήματα από όλους τους χρήστες ή μόνο για ένα ερώτημα από ένα διαχειριστή.  

### <a name="change-the-scope-of-queries-for-all-queries-by-all-users"></a>Αλλάξτε το εύρος των ερωτημάτων για όλα τα ερωτήματα από όλους τους χρήστες  
 Για να αλλάξετε το εύρος της όλα τα ερωτήματα από όλους τους χρήστες, εκτελέστε την αποθηκευμένη διαδικασία **sys.sp_rda_set_query_mode**. Μπορείτε να μειώσετε το εύρος στο ερώτημα μόνο των τοπικών δεδομένων, απενεργοποίηση όλων των ερωτημάτων ή επαναφορά της προεπιλεγμένης ρύθμισης. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [sys.sp_rda_set_query_mode](https://msdn.microsoft.com/library/mt703715.aspx).  

### <a name="queryHints"></a>Αλλάξτε το εύρος των ερωτημάτων για ένα ερώτημα από ένα διαχειριστή  
 Για να αλλάξετε την εμβέλεια ενός απλού ερωτήματος από ένα μέλος του ρόλου db_owner, προσθέστε το * *με \( REMOTE_DATA_ARCHIVE_OVERRIDE = *τιμή* \)** υποδείξεων ερωτήματος για να την πρόταση SELECT. Η υπόδειξη ερωτήματος REMOTE_DATA_ARCHIVE_OVERRIDE μπορεί να έχει τις παρακάτω τιμές.  
 -   **LOCAL_ONLY**. Ερώτημα μόνο των τοπικών δεδομένων.  

 -   **REMOTE_ONLY**. Ερώτημα απομακρυσμένα δεδομένα μόνο.  

 -   **STAGE_ONLY**. Ερώτημα μόνο τα δεδομένα στον πίνακα όπου στάδια βάσης δεδομένων παραμόρφωση γραμμών επιλέξιμα μετεγκατάστασης και διατηρεί μετεγκαταστάθηκαν γραμμές για την καθορισμένη περίοδο, μετά τη μετεγκατάσταση. Αυτή η υπόδειξη ερωτήματος είναι ο μόνος τρόπος να ερωτήματος στον πίνακα ενδιάμεσου σταδίου.  

Για παράδειγμα, το ακόλουθο ερώτημα επιστρέφει μόνο τοπικό αποτελέσματα.  

 ```tsql  
 USE <Stretch-enabled database name>;
 GO
 SELECT * FROM <Stretch_enabled table name> WITH (REMOTE_DATA_ARCHIVE_OVERRIDE = LOCAL_ONLY) WHERE ... ;
 GO
```  

## <a name="adminHints"></a>Πραγματοποίηση διαχειριστικές ενημερωμένες εκδόσεις και διαγραφές  
 Από προεπιλογή, δεν μπορείτε να ΕΝΗΜΕΡΏΣΕΤΕ ή ΔΙΑΓΡΑΦΉ γραμμών που πληρούν τις απαιτήσεις για τη μετεγκατάσταση, ή τις γραμμές που ήδη έχουν μετεγκατασταθεί, σε μια παραμόρφωση\-με δυνατότητα πίνακα. Όταν έχετε για να διορθώσετε το πρόβλημα, ένα μέλος του ρόλου db_owner να εκτελέσετε μια λειτουργία ΕΝΗΜΈΡΩΣΗΣ ή ΔΙΑΓΡΑΦΉΣ, προσθέτοντας την * *με \( REMOTE_DATA_ARCHIVE_OVERRIDE = *τιμή* \)** υποδείξεων ερωτήματος στην πρόταση. Η υπόδειξη ερωτήματος REMOTE_DATA_ARCHIVE_OVERRIDE μπορεί να έχει τις παρακάτω τιμές.  
 -   **LOCAL_ONLY**. Ενημέρωση ή να διαγράψετε μόνο των τοπικών δεδομένων.  

 -   **REMOTE_ONLY**. Ενημέρωση ή διαγράψτε απομακρυσμένα δεδομένα μόνο.  

 -   **STAGE_ONLY**. Ενημέρωση ή να διαγράψετε μόνο τα δεδομένα στον πίνακα όπου στάδια βάσης δεδομένων παραμόρφωση γραμμών επιλέξιμα μετεγκατάστασης και διατηρεί μετεγκαταστάθηκαν γραμμές για την καθορισμένη περίοδο, μετά τη μετεγκατάσταση.  

## <a name="see-also"></a>Δείτε επίσης

[Οθόνη παραμόρφωσης βάσης δεδομένων](sql-server-stretch-database-monitor.md)

[Δημιουργίας αντιγράφων ασφαλείας με δυνατότητα παραμόρφωση βάσεις δεδομένων](sql-server-stretch-database-backup.md)

[Επαναφορά με δυνατότητα παραμόρφωση βάσεων δεδομένων](sql-server-stretch-database-restore.md)
