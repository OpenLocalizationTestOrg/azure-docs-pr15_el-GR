<properties
    pageTitle="Γρήγορα αποτελέσματα με ανάλυση ροή Azure την επεξεργασία δεδομένων από συσκευές IoT. | Microsoft Azure"
    description="IoT αισθητήρα ετικέτες και τα δεδομένα ροές με ροή ανάλυση και σε πραγματικό χρόνο επεξεργασίας δεδομένων"
    keywords="λύση IOT, γρήγορα αποτελέσματα με το iot"
    services="stream-analytics"
    documentationCenter=""
    authors="jeffstokes72"
    manager="jhubbard"
    editor="cgronlun"
/>

<tags
    ms.service="stream-analytics"
    ms.devlang="na"
    ms.topic="hero-article"
    ms.tgt_pltfrm="na"
    ms.workload="data-services"
    ms.date="10/19/2016"
    ms.author="jeffstok"
/>

# <a name="get-started-with-azure-stream-analytics-to-process-data-from-iot-devices"></a>Γρήγορα αποτελέσματα με το Azure ροή ανάλυση την επεξεργασία δεδομένων από συσκευές IoT

Σε αυτό το πρόγραμμα εκμάθησης, θα μάθετε πώς μπορείτε να δημιουργήσετε ροή επεξεργασίας λογική για τη συλλογή δεδομένων από το Internet πράγματα (IoT) συσκευές. Θα χρησιμοποιήσουμε μια υπόθεση χρήσης Internet πράγματα (IoT) ρεαλιστικό, για να δείχνουν πώς να δημιουργείτε τη λύση σας γρήγορα και οικονομικά.

## <a name="prerequisites"></a>Προαπαιτούμενα στοιχεία

-   [Azure συνδρομή](https://azure.microsoft.com/pricing/free-trial/)
-   Δείγμα ερωτήματος και αρχεία δεδομένων με δυνατότητα λήψης από [GitHub](https://aka.ms/azure-stream-analytics-get-started-iot)

## <a name="scenario"></a>Σενάριο

Θησέας, το οποίο είναι μια εταιρεία στο χώρο βιομηχανικού αυτοματισμού, έχει εντελώς αυτοματοποιημένη τη διαδικασία κατασκευής. Η μηχανή σε αυτό εργοστασίου έχει αισθητήρες που έχουν τη δυνατότητα εκπομπής ροές δεδομένα σε πραγματικό χρόνο. Σε αυτό το σενάριο, η διαχείριση floor παραγωγής θέλει να έχετε ιδέες σε πραγματικό χρόνο από τα δεδομένα αισθητήρα για να αναζητήσετε μοτίβα και να εκτελέσετε ενέργειες σε αυτά. Θα χρησιμοποιήσουμε τη γλώσσα ερωτήματος ανάλυσης ροής (SAQL) αντί για τα δεδομένα αισθητήρα για να βρείτε ενδιαφέρον μοτίβα από τα εισερχόμενα ροή δεδομένων.

Εδώ δεδομένων που δημιουργείται από μια συσκευή οργάνων Τέξας αισθητήρα ετικέτα.

![Ετικέτα αισθητήρα Τέξας οργάνων](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-01.jpg)

Το φορτίο των δεδομένων είναι σε μορφή JSON και μοιάζει με τα εξής:


    {
        "time": "2016-01-26T20:47:53.0000000",  
        "dspl": "sensorE",  
        "temp": 123,  
        "hmdt": 34  
    }  

Σε ένα σενάριο ρεαλιστικό, θα μπορούσατε να έχετε εκατοντάδες αυτές τις αισθητήρες δημιουργό συμβάντα ως ροή. Ιδανικά, μια συσκευή πύλης θα εκτελεστεί κώδικα για να προωθήσετε αυτά τα συμβάντα σε [Διανομείς συμβάν Azure](https://azure.microsoft.com/services/event-hubs/) ή [Azure IoT διανομείς](https://azure.microsoft.com/services/iot-hub/). Την ανάλυση ροή εργασίας θα ingest αυτά τα συμβάντα από το συμβάν διανομείς και εκτέλεση ερωτημάτων σε πραγματικό χρόνο ανάλυση σε σχέση με τις ροές. Στη συνέχεια, ενδέχεται να μπορείτε να στείλετε τα αποτελέσματα σε μία από τις [εξόδους που υποστηρίζονται](stream-analytics-define-outputs.md).

Για μεγαλύτερη ευκολία στη χρήση, αυτός ο οδηγός γρήγορα αποτελέσματα παρέχει ένα αρχείο δεδομένων δείγματος, το οποίο ήταν καταγράφονται από συσκευές ετικέτα πραγματικό αισθητήρα. Μπορείτε να εκτελέσετε ερωτήματα το δείγμα δεδομένων και να δείτε αποτελέσματα. Στα επόμενα προγράμματα εκμάθησης, θα μάθετε πώς μπορείτε να συνδέσετε την εργασία σας σε εισροές και εξάγει και αναπτύξτε τους στην υπηρεσία Azure.

## <a name="create-a-stream-analytics-job"></a>Δημιουργία μιας εργασίας ροής ανάλυσης

1. Στην [πύλη του Azure](http://portal.azure.com), κάντε κλικ στο σύμβολο του συν και πληκτρολογήστε **ΡΟΉ ΑΝΆΛΥΣΗΣ** στο παράθυρο κειμένου προς τα δεξιά. Στη συνέχεια, επιλέξτε **ανάλυση ροής εργασίας** στη λίστα των αποτελεσμάτων.

    ![Δημιουργία νέας ανάλυσης ροής εργασίας](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-02.png)

2. Πληκτρολογήστε ένα όνομα εργασίας μοναδικών τιμών και επαληθεύστε τη συνδρομή είναι η σωστή για την εργασία σας. Στη συνέχεια, δημιουργήστε μια νέα ομάδα πόρων ή επιλέξτε ένα υπάρχον στη συνδρομή σας στο.

3. Στη συνέχεια, επιλέξτε μια θέση για την εργασία σας. Συνιστάται μεταφοράς επιλέγοντας στην ίδια θέση με την ομάδα πόρων και λογαριασμού προβλεπόμενο χώρου αποθήκευσης για ταχύτητα επεξεργασίας και τη μείωση του κόστους στα δεδομένα.

    ![Δημιουργία νέας εργασίας ροής ανάλυση λεπτομέρειες](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-03.png)

    > [AZURE.NOTE] Θα πρέπει να μπορείτε να δημιουργήσετε μόνο μία φορά αυτό λογαριασμού χώρου αποθήκευσης ανά περιοχή. Αυτός ο χώρος αποθήκευσης θα είναι κοινόχρηστη σε όλες τις εργασίες ροής ανάλυσης που έχουν δημιουργηθεί σε αυτήν την περιοχή.

4. Επιλέξτε το πλαίσιο για να τοποθετήσετε την εργασία σας στον πίνακα εργαλείων σας και, στη συνέχεια, κάντε κλικ στην επιλογή **ΔΗΜΙΟΥΡΓΊΑ**.

    ![Δημιουργία θέσεων εργασίας βρίσκεται σε εξέλιξη](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-03a.png)

5. Θα πρέπει να δείτε μια 'ανάπτυξη αποτελέσματα...' εμφανίζεται στην επάνω δεξιά γωνία του παραθύρου του προγράμματος περιήγησης. Σύντομα θα αλλάξει σε ένα παράθυρο του ολοκληρωμένες όπως φαίνεται παρακάτω.

    ![Δημιουργία θέσεων εργασίας βρίσκεται σε εξέλιξη](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-03b.png)

### <a name="create-an-azure-stream-analytics-query"></a>Δημιουργία ερωτήματος ανάλυσης ροή Azure

Μετά τη δημιουργία εργασίας την έχει χρόνο για να ανοίξετε και να δημιουργήσετε ένα ερώτημα. Μπορείτε εύκολα να αποκτήσετε πρόσβαση την εργασία σας, κάνοντας κλικ στο πλακίδιο για αυτήν.

![Πλακίδιο του έργου](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-04.png)

Στο παράθυρο **Τοπολογία εργασίας** , επιλέξτε το πλαίσιο **ΕΡΩΤΉΜΑΤΟΣ** για να μεταβείτε στο πρόγραμμα επεξεργασίας ερωτήματος. Πρόγραμμα επεξεργασίας **ΕΡΩΤΉΜΑΤΟΣ** σάς επιτρέπει να εισαγάγετε ένα ερώτημα T SQL που εκτελεί τον μετασχηματισμό επάνω από τα εισερχόμενα δεδομένα συμβάντος.

![Πλαίσιο ερωτήματος](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-05.png)

### <a name="query-archive-your-raw-data"></a>Ερώτημα: Αρχειοθέτηση ανεπεξέργαστα δεδομένα σας

Η φόρμα απλούστερος ερωτήματος είναι ένα ερώτημα διαβίβασης που αρχειοθετεί όλα τα δεδομένα εισόδου που έχει οριστεί ως το αποτέλεσμα. Κάντε λήψη το δείγμα αρχείου δεδομένων από [GitHub](https://aka.ms/azure-stream-analytics-get-started-iot) σε μια θέση στον υπολογιστή σας. 

1. Επικολλήστε το ερώτημα από το αρχείο PassThrough.txt. 

    ![Ροή δεδομένων εισόδου δοκιμής](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-06.png)

2. Κάντε κλικ στις τρεις τελείες δίπλα στην επιλογή δεδομένα εισόδου σας και επιλέξτε **Αποστολή δείγμα δεδομένων από αρχείο** πλαίσιο.

    ![Ροή δεδομένων εισόδου δοκιμής](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-06a.png)

3. Ανοίγει ένα τμήμα παραθύρου στα δεξιά ως αποτέλεσμα, με επιλέξτε το αρχείο δεδομένων HelloWorldASA InputStream.json από τη θέση που έχουν ληφθεί και κάντε κλικ στο **κουμπί OK** στο κάτω μέρος του παραθύρου.

    ![Ροή δεδομένων εισόδου δοκιμής](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-06b.png)

4. Στη συνέχεια, κάντε κλικ τη **Δοκιμή** γραναζιού στην επάνω αριστερή περιοχή του παραθύρου και επεξεργασία του ερωτήματος δοκιμής σε σχέση με το σύνολο δεδομένων δείγματος. Ένα παράθυρο αποτελεσμάτων θα ανοίξει κάτω από το ερώτημά σας, όπως η επεξεργασία έχει ολοκληρωθεί.

    ![Αποτελέσματα δοκιμής](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-07.png)

### <a name="query-filter-the-data-based-on-a-condition"></a>Ερώτημα: Φιλτράρισμα των δεδομένων με βάση μια συνθήκη

Ας δοκιμάσουμε για να φιλτράρετε τα αποτελέσματα με βάση μια συνθήκη. Προτείνεται να εμφανίσετε αποτελέσματα για μόνο τα συμβάντα που προέρχονται από "sensorA." Το ερώτημα είναι στο αρχείο Filtering.txt.

![Φιλτράρισμα μιας ροής δεδομένων](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-08.png)

Σημειώστε ότι το ερώτημα διάκριση πεζών-κεφαλαίων συγκρίνει μια τιμή συμβολοσειράς. Επιλέξτε το εικονίδιο γραναζιού **δοκιμής** ξανά για να εκτελέσετε το ερώτημα. Το ερώτημα θα πρέπει να επιστρέψει 389 γραμμές εκτός 1860 συμβάντα.

![Δεύτερο εξόδου αποτελέσματα από δοκιμή ερωτήματος](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-09.png)

### <a name="query-alert-to-trigger-a-business-workflow"></a>Ερώτημα: Ειδοποίηση για να ενεργοποιήσετε μια ροής εργασιών επιχείρησης

Ας κάνουμε πιο λεπτομερείς μας ερωτήματος. Για κάθε τύπο αισθητήρα, θέλουμε να παρακολουθείτε μέσος όρος θερμοκρασίας ανά παραθύρου 30 δευτερόλεπτα και να εμφανίσετε αποτελέσματα μόνο εάν η μέση θερμοκρασία είναι μεγαλύτερη από 100 μοίρες. Θα Γράψτε το ακόλουθο ερώτημα και, στη συνέχεια, κάντε κλικ στην επιλογή **Δοκιμή** για να δείτε τα αποτελέσματα. Το ερώτημα είναι στο αρχείο ThresholdAlerting.txt.

![ερώτημα φίλτρου 30 δευτερόλεπτα](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-10.png)

Θα πρέπει τώρα θα βλέπετε τα αποτελέσματα που περιέχουν μόνο 245 γραμμές και τα ονόματα των αισθητήρες όπου ο μέσος όρος εύκρατα είναι μεγαλύτερη από 100. Αυτό το ερώτημα ομάδων στη ροή συμβάντων από **dspl**, που είναι το όνομα του αισθητήρα, επάνω σε ένα **Παράθυρο του Tumbling** 30 δευτερόλεπτα. Χρονικό ερωτήματα πρέπει να αναφέρουν πώς θέλουμε χρόνου στην πρόοδο. Χρησιμοποιώντας τον όρο **Χρονικής ΣΉΜΑΝΣΗΣ κατά** , θα σας έχετε καθορίσει τη στήλη **OUTPUTTIME** για να συσχετίσετε φορές με όλους τους υπολογισμούς χρονικό. Για λεπτομερείς πληροφορίες, διαβάστε τα άρθρα MSDN σχετικά με τη [Διαχείριση χρόνου](https://msdn.microsoft.com/library/azure/mt582045.aspx) και [συναρτήσεις Άνοιγμα παραθύρου](https://msdn.microsoft.com/library/azure/dn835019.aspx).

### <a name="query-detect-absence-of-events"></a>Ερώτημα: Εντοπισμός απουσίας συμβάντων

Πώς θα σας να συντάξετε ένα ερώτημα για να βρείτε μια έλλειψη εισαγωγής συμβάντων; Ας βρείτε την τελευταία φορά που αισθητήρα αποστέλλονται δεδομένων και, στη συνέχεια, δεν στείλατε συμβάντων για το επόμενο λεπτό. Το ερώτημα είναι στο αρχείο AbsenseOfEvent.txt.

![Εντοπισμός απουσίας συμβάντων](./media/stream-analytics-get-started-with-iot-devices/stream-analytics-get-started-with-iot-devices-11.png)

Εδώ χρησιμοποιούμε έναν **ΑΡΙΣΤΕΡΌ ΕΞΩΤΕΡΙΚΌ** σύνδεσμο για την ίδια ροή δεδομένων (ιδιο-σύνδεσμος). Για έναν **ΕΣΩΤΕΡΙΚΌ** σύνδεσμο, το αποτέλεσμα επιστρέφεται μόνο όταν βρεθεί αντιστοίχιση.  Για έναν **ΑΡΙΣΤΕΡΌ ΕΞΩΤΕΡΙΚΌ** σύνδεσμο, εάν το συμβάν από την αριστερή πλευρά της συνένωσης είναι αταίριαστων, επιστρέφεται μια γραμμή με τιμή NULL για όλες τις στήλες στη δεξιά πλευρά. Αυτή η τεχνική είναι ιδιαίτερα χρήσιμη για να βρείτε μια απουσία συμβάντων. Δείτε την τεκμηρίωση MSDN για περισσότερες πληροφορίες σχετικά με τη [ΣΥΜΜΕΤΟΧΉ](https://msdn.microsoft.com/library/azure/dn835026.aspx).

## <a name="conclusion"></a>Ολοκλήρωση

Το σκοπό αυτού του προγράμματος εκμάθησης είναι να παρουσιάζουν τον τρόπο σύνταξης ερωτημάτων διαφορετική γλώσσα ερωτημάτων ροής ανάλυσης και να δείτε αποτελέσματα στο πρόγραμμα περιήγησης. Ωστόσο, αυτή είναι απλώς γρήγορα αποτελέσματα. Μπορείτε να κάνετε τέτοιον περισσότερα με τα αναλυτικά στοιχεία ροής. Ανάλυση ροή υποστηρίζει μια ποικιλία των εισόδων και εξάγει και ακόμα και να χρησιμοποιήσετε συναρτήσεις στο Azure μηχανικής εκμάθησης ώστε να είναι ένα ισχυρό εργαλείο για την ανάλυση ροές δεδομένων. Μπορείτε να ξεκινήσετε να εξερευνήσετε περισσότερα σχετικά με τη ροή ανάλυσης με τη χρήση μας [εκμάθησης χάρτη](https://azure.microsoft.com/documentation/learning-paths/stream-analytics/). Για περισσότερες πληροφορίες σχετικά με τον τρόπο σύνταξης ερωτημάτων, διαβάστε το άρθρο σχετικά με τις [κοινές μοτίβα ερωτήματος](./stream-analytics-stream-analytics-query-patterns.md).
