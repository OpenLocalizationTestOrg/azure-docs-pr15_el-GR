<properties
    pageTitle="Ροή Analytics: Εντοπισμός σε πραγματικό χρόνο απάτη | Microsoft Azure"
    description="Μάθετε πώς μπορείτε να δημιουργήσετε μια λύση εντοπισμού απάτη σε πραγματικό χρόνο με ροή ανάλυσης. Χρησιμοποιήστε ένα διανομέα συμβάντων για επεξεργασία συμβάντος σε πραγματικό χρόνο."
    keywords="εντοπισμός ανωμαλία, απάτη εντοπισμού, εντοπισμός ανωμαλία πραγματικό χρόνο"
    services="stream-analytics"
    documentationCenter=""
    authors="jeffstokes72"
    manager="jhubbard"
    editor="cgronlun" />

<tags
    ms.service="stream-analytics"
    ms.devlang="na"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="data-services"
    ms.date="09/26/2016"
    ms.author="jeffstok" />



# <a name="get-started-using-azure-stream-analytics-real-time-fraud-detection"></a>Γρήγορα αποτελέσματα με το Azure ροή ανάλυση: εντοπισμός απάτη σε πραγματικό χρόνο

Μάθετε πώς μπορείτε να δημιουργήσετε μια λύση για να ολοκληρωμένες για τον εντοπισμό απάτη σε πραγματικό χρόνο με ανάλυση ροή Azure. Φέρτε συμβάντα σε διανομείς συμβάν Azure, να συντάξουν ανάλυσης ροή ερωτήματα για συνάθροιση ή ειδοποίησης και αποστολή των αποτελεσμάτων ενός δέκτη εξόδου για να αποκτήσετε ιδέες στα δεδομένα με την επεξεργασία σε πραγματικό χρόνο. Επεξήγηση ανίχνευση σε πραγματικό χρόνο ανωμαλία για τηλεπικοινωνιακό, αλλά την τεχνική παράδειγμα εξίσου είναι κατάλληλος για άλλους τύπους εντοπισμού απάτη όπως πιστωτική κάρτα ή ταυτότητας κλοπή σενάρια.

Ροή ανάλυσης είναι μια πλήρως διαχειριζόμενη υπηρεσία που παρέχει Επεξεργασία συμβάντος χαμηλής αδράνειας, ιδιαίτερα διαθέσιμη, μεταβλητού μεγέθους, σύνθετες μέσω ροής δεδομένων στο cloud. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Εισαγωγή στην ανάλυση ροή Azure](stream-analytics-introduction.md).


## <a name="scenario-telecommunications-and-sim-fraud-detection-in-real-time"></a>Σενάριο: Τηλεπικοινωνιακό και SIM απάτη ανίχνευση σε πραγματικό χρόνο

Μια εταιρεία τηλεπικοινωνιακό έχει μεγάλο όγκο δεδομένων για εισερχόμενες κλήσεις. Η εταιρεία πρέπει τα ακόλουθα από τα δεδομένα:

* Μείωση των δεδομένων σε ένα ποσό διαχειρίσιμα και αποκτήστε ιδέες σχετικά με τη χρήση πελατών στο χρόνο και σε γεωγραφική περιοχή.
* Εντοπισμός SIM απάτη (πολλαπλές κλήσεις από την ίδια ταυτότητα γύρω από την ίδια στιγμή, αλλά σε γεωγραφικά διαφορετικές θέσεις του) σε πραγματικό χρόνο, έτσι ώστε η εταιρεία εύκολα να απαντήσετε με που σας ειδοποιεί τους πελάτες ή τερματισμό της υπηρεσίας.

Σενάρια κανονικής Internet πράγματα (IoT) έχουν μια τόνος τηλεμετρίας ή δεδομένα από αισθητήρες. Οι πελάτες που θέλετε να συγκεντρώσετε τα δεδομένα ή να λαμβάνουν ειδοποιήσεις σχετικά με ανωμαλίες σε πραγματικό χρόνο.

## <a name="prerequisites"></a>Προαπαιτούμενα στοιχεία

- Κάντε λήψη του [TelcoGenerator.zip](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) από το Κέντρο λήψης της Microsoft
- Προαιρετικό: Πηγαίου κώδικα από το συμβάν γεννήτρια από [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator)

## <a name="create-azure-event-hubs-input-and-consumer-group"></a>Δημιουργία ομάδας εισόδου και καταναλωτή διανομείς συμβάν Azure

Το δείγμα εφαρμογής θα δημιουργήσει συμβάντα και να προωθήσετε τα σε μια παρουσία διανομείς συμβάντων για επεξεργασία σε πραγματικό χρόνο. Υπηρεσία Bus συμβάν διανομείς είναι την προτιμώμενη μέθοδο κατάποσης συμβάντων για ανάλυση ροής. Μπορείτε να μάθετε περισσότερα σχετικά με το συμβάν διανομείς στην [τεκμηρίωση Bus υπηρεσίας Azure](/documentation/services/service-bus/).

Για να δημιουργήσετε ένα διανομέα συμβάν:

1.  Στην [πύλη του Azure](https://manage.windowsazure.com/), κάντε κλικ στην επιλογή **ΔΗΜΙΟΥΡΓΊΑ** > **Εφαρμογή ΥΠΗΡΕΣΙΏΝ** > **BUS ΥΠΗΡΕΣΊΑΣ** > **ΔΙΑΝΟΜΈΑ ΣΥΜΒΆΝ** > **ΓΡΉΓΟΡΗΣ ΔΗΜΙΟΥΡΓΊΑΣ**. Δώστε ένα όνομα, περιοχής και νέο ή υπάρχον χώρος ονομάτων για να δημιουργήσετε ένα νέο συμβάν διανομέα.  
2.  Η βέλτιστη πρακτική κάθε ανάλυση ροή εργασίας πρέπει να διαβάσετε από μια ομάδα καταναλωτή διανομέα μεμονωμένο συμβάν. Θα σας θα σας καθοδηγήσει στη διαδικασία δημιουργίας μιας ομάδας καταναλωτή αργότερα. [Μάθετε περισσότερα σχετικά με τις ομάδες καταναλωτών](https://msdn.microsoft.com/library/azure/dn836025.aspx). Για να δημιουργήσετε μια ομάδα καταναλωτή, επιλέξτε την ενότητα που μόλις δημιουργήθηκε συμβάντος, κάντε κλικ στην καρτέλα **ΚΑΤΑΝΑΛΩΤΉ ΟΜΆΔΕΣ** , κάντε κλικ στην επιλογή **ΔΗΜΙΟΥΡΓΊΑ** στο κάτω μέρος της σελίδας και, στη συνέχεια, δώστε ένα όνομα για την ομάδα σας καταναλωτή.
3.  Για να εκχωρήσετε πρόσβαση σε ενότητα συμβάντων, θα χρειαστεί να δημιουργήσετε μια πολιτική κοινόχρηστη πρόσβαση. Κάντε κλικ στην καρτέλα **Ρύθμιση ΠΑΡΑΜΈΤΡΩΝ** από το κέντρο του συμβάντος σας.
4.  Στην περιοχή **ΠΟΛΙΤΙΚΈΣ ΠΡΌΣΒΑΣΗΣ σε κοινή ΧΡΉΣΗ**, δημιουργήστε μια νέα πολιτική με **ΔΙΑΧΕΊΡΙΣΗ** δικαιωμάτων.

    ![Κοινή χρήση πολιτικές πρόσβασης όπου μπορείτε να δημιουργήσετε μια πολιτική με Διαχείριση δικαιωμάτων.](./media/stream-analytics-real-time-fraud-detection/stream-ananlytics-shared-access-policies.png)

5.  Κάντε κλικ στην επιλογή " **ΑΠΟΘΉΚΕΥΣΗ** " στο κάτω μέρος της σελίδας.
6.  Μεταβείτε στον πίνακα **εργαλείων**, κάντε κλικ στην επιλογή **ΠΛΗΡΟΦΟΡΊΕΣ ΣΎΝΔΕΣΗΣ** στο κάτω μέρος της σελίδας, και στη συνέχεια, αντιγράψτε και αποθηκεύστε τις πληροφορίες σύνδεσης.

## <a name="configure-and-start-the-event-generator-application"></a>Ρύθμιση παραμέτρων και ξεκινήστε την εφαρμογή δημιουργίας συμβάντος

Παρέχουμε μια εφαρμογή προγράμματος-πελάτη που θα δημιουργήσει μεταδεδομένων εισερχόμενης κλήσης δείγμα και να προωθήσετε την σε διανομείς συμβάν. Χρησιμοποιήστε τα παρακάτω βήματα για να ορίσετε αυτήν την εφαρμογή.  

1.  Κάντε λήψη του [αρχείου TelcoGenerator.zip](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip)και αποσυμπιέστε το σε έναν κατάλογο.

    > [AZURE.NOTE] Windows μπορεί να αποκλείσετε το αρχείο zip που έχετε λάβει. Κάντε δεξί κλικ στο αρχείο και επιλέξτε την εντολή **Ιδιότητες**. Εάν δείτε το μήνυμα "αυτό το αρχείο προήλθε από έναν άλλο υπολογιστή και μπορεί να έχει αποκλειστεί για την προστασία αυτόν τον υπολογιστή", επιλέξτε το πλαίσιο **Κατάργηση αποκλεισμού** και, στη συνέχεια, κάντε κλικ στο κουμπί Εφαρμογή σε αρχείο zip.

2.  Αντικαταστήστε τις τιμές Microsoft.ServiceBus.ConnectionString και EventHubName telcodatagen.exe.config με το συμβάν συμβολοσειρά σύνδεσης διανομέας και όνομα.

    Η συμβολοσειρά σύνδεσης που αντιγράψατε από την πύλη του Azure τοποθετεί το όνομα της σύνδεσης στο τέλος. Φροντίστε να καταργήσετε "; EntityPath =<value>"από την" Προσθήκη κλειδιού = "πεδίο.

3.  Εκκίνηση της εφαρμογής. Η χρήση της είναι ως εξής:

    telcodatagen.exe [#NumCDRsPerHour] [πιθανότητα απάτη κάρτα SIM] [#DurationHours]

Το παρακάτω παράδειγμα θα δημιουργήσει 1.000 συμβάντα με πιθανότητα 20 τοις εκατό απάτης στη διάρκεια της δύο ώρες.

    telcodatagen.exe 1000 .2 2

Θα δείτε τις εγγραφές που στέλνεται με το συμβάν διανομέα. Ορισμένα πεδία κλειδιών που θα χρησιμοποιήσουμε σε αυτήν την εφαρμογή εντοπισμού σε πραγματικό χρόνο απάτη ορίζονται εδώ:

| Εγγραφή | Ορισμός |
| ------------- | ------------- |
| CallrecTime | Ώρα έναρξης χρονικής σήμανσης για την κλήση. |
| SwitchNum | Διακόπτης τηλεφώνου που χρησιμοποιούνται για τη σύνδεση της κλήσης. |
| CallingNum | Αριθμός τηλεφώνου του καλούντος. |
| CallingIMSI | Διεθνής συνδρομητής κινητή ταυτότητα (IMSI).  Μοναδικό αναγνωριστικό του καλούντος. |
| CalledNum | Τον αριθμό τηλεφώνου του παραλήπτη της κλήσης. |
| CalledIMSI | Διεθνής συνδρομητής κινητή ταυτότητα (IMSI).  Μοναδικό αναγνωριστικό του παραλήπτη της κλήσης. |


## <a name="create-a-stream-analytics-job"></a>Δημιουργία μιας εργασίας ροής ανάλυσης
Τώρα που έχουμε μια ροή τηλεπικοινωνιακό συμβάντων, θα σας να ρυθμίσετε μια εργασία ροής ανάλυσης για την ανάλυση αυτά τα συμβάντα σε πραγματικό χρόνο.

### <a name="provision-a-stream-analytics-job"></a>Παροχή μιας ανάλυσης ροής εργασίας

1.  Στην πύλη του Azure, κάντε κλικ στην επιλογή **ΔΗΜΙΟΥΡΓΊΑ** > **ΥΠΗΡΕΣΊΕΣ ΔΕΔΟΜΈΝΩΝ** > **ΡΟΉ ΑΝΆΛΥΣΗ** > **ΓΡΉΓΟΡΗΣ ΔΗΜΙΟΥΡΓΊΑΣ**.
2.  Καθορίστε τις παρακάτω τιμές και, στη συνέχεια, κάντε κλικ στην επιλογή **ΔΗΜΙΟΥΡΓΊΑ ΡΟΉ ΑΝΆΛΥΣΗΣ ΕΡΓΑΣΊΑΣ**:

    * **ΌΝΟΜΑ ΕΡΓΑΣΊΑΣ**: Πληκτρολογήστε ένα όνομα εργασίας.

    * **ΠΕΡΙΟΧΉ**: Επιλέξτε την περιοχή όπου θέλετε να εκτελέσετε την εργασία. Εξετάστε το ενδεχόμενο τοποθετώντας το έργο και την ενότητα συμβάντων στην ίδια περιοχή για να εξασφαλίσουν την καλύτερη απόδοση και να διασφαλίσετε ότι θα δεν πληρώνετε για τη μεταφορά δεδομένων μεταξύ περιοχών.

    * **Το ΛΟΓΑΡΙΑΣΜΌ χώρου ΑΠΟΘΉΚΕΥΣΗΣ**: Επιλέξτε το λογαριασμό Azure χώρου αποθήκευσης που θέλετε να χρησιμοποιήσετε για την αποθήκευση δεδομένων παρακολούθησης για όλες τις εργασίες ροής ανάλυσης που εκτελούνται μέσα σε αυτήν την περιοχή. Έχετε την επιλογή για να επιλέξετε έναν υπάρχοντα λογαριασμό του χώρου αποθήκευσης ή να δημιουργήσετε ένα νέο.

3.  Κάντε κλικ στην επιλογή **ΑΝΆΛΥΣΗΣ ΡΟΉΣ** στο αριστερό τμήμα του παραθύρου για μια λίστα των εργασιών ροής ανάλυσης.

    ![Εικονίδιο της υπηρεσίας ανάλυσης ροής](./media/stream-analytics-real-time-fraud-detection/stream-analytics-service-icon.png)

    Το νέο έργο θα εμφανίζεται με κατάσταση **ΔΗΜΙΟΥΡΓΉΘΗΚΕ**. Παρατηρήστε ότι είναι απενεργοποιημένο το κουμπί " **ΈΝΑΡΞΗ** " στο κάτω μέρος της σελίδας. Πρέπει να ρυθμίσετε την εργασία εισαγωγής, εξόδου και ερωτήματος να μπορέσετε να ξεκινήσετε την εργασία.

### <a name="specify-job-input"></a>Καθορισμός εισαγωγής έργου
1.  Στο την ανάλυση ροή εργασίας, κάντε κλικ στην επιλογή **ΕΙΣΌΔΩΝ** στο επάνω μέρος της σελίδας και, στη συνέχεια, κάντε κλικ στην επιλογή **Προσθήκη ΕΙΣΑΓΩΓΉΣ**. Παράθυρο διαλόγου που ανοίγει θα σας καθοδηγήσει αρκετά βήματα για να ρυθμίσετε τα δεδομένα εισόδου σας.
2.  Κάντε κλικ στην επιλογή **ΡΟΉΣ ΔΕΔΟΜΈΝΩΝ**και, στη συνέχεια, κάντε κλικ στο δεξιό κουμπί.
3.  Κάντε κλικ στην επιλογή **ΔΙΑΝΟΜΈΑ ΣΥΜΒΆΝ**και, στη συνέχεια, κάντε κλικ στο δεξιό κουμπί.
4.  Πληκτρολογήστε ή επιλέξτε τις παρακάτω τιμές στην τρίτη σελίδα:

    * **ΨΕΥΔΏΝΥΜΟ ΕΙΣΑΓΩΓΉΣ**: Πληκτρολογήστε ένα φιλικό όνομα, όπως *CallStream*, για αυτό το έργο. Σημειώστε ότι πρόκειται να χρησιμοποιήσετε αυτό το όνομα του ερωτήματος αργότερα.

    * **ΕΝΌΤΗΤΑ ΣΥΜΒΆΝ**: Εάν ενότητα συμβάντων που δημιουργήσατε είναι στην ίδια συνδρομή ως της ανάλυσης ροή εργασίας, επιλέξτε το πεδίο ονόματος που είναι ο διανομέας συμβάντος στο.

        Εάν το Κέντρο συμβάν σας βρίσκεται σε μια διαφορετική συνδρομή, επιλέξτε **Χρήση διανομέα συμβάν από μια άλλη συνδρομή**και, στη συνέχεια, εισαγάγετε με μη αυτόματο τρόπο πληροφορίες για **Χώρος ΟΝΟΜΆΤΩΝ BUS ΥΠΗΡΕΣΊΑΣ**, **ΌΝΟΜΑ ΔΙΑΝΟΜΈΑΣ ΣΥΜΒΆΝΤΟΣ**, **ΌΝΟΜΑ ΠΟΛΙΤΙΚΉΣ ΔΙΑΝΟΜΈΑ ΣΥΜΒΆΝΤΟΣ**, **ΚΛΕΙΔΊ ΠΟΛΙΤΙΚΉΣ ΔΙΑΝΟΜΈΑ ΣΥΜΒΆΝΤΩΝ**και **ΠΛΉΘΟΣ ΔΙΑΜΕΡΙΣΜΆΤΩΝ ΔΙΑΝΟΜΈΑ ΣΥΜΒΆΝ**.

    * **ΌΝΟΜΑ ΣΥΜΒΆΝΤΟΣ ΔΙΑΝΟΜΈΑ**: Επιλέξτε το όνομα του συμβάντος διανομέα.

    * **ΌΝΟΜΑ ΠΟΛΙΤΙΚΉΣ ΔΙΑΝΟΜΈΑ ΣΥΜΒΆΝ**: Επιλέξτε την πολιτική διανομέα συμβάντων που δημιουργήσατε νωρίτερα σε αυτό το πρόγραμμα εκμάθησης.

    * **ΟΜΆΔΑ ΚΑΤΑΝΑΛΩΤΉ ΔΙΑΝΟΜΈΑ ΣΥΜΒΆΝ**: Πληκτρολογήστε το όνομα της ομάδας καταναλωτή που δημιουργήσατε νωρίτερα σε αυτό το πρόγραμμα εκμάθησης.

5.  Κάντε κλικ στο δεξιό κουμπί.
6.  Καθορίστε τις ακόλουθες τιμές:

    * **ΜΟΡΦΉ ΣΕΙΡΙΟΠΟΙΗΤΉΣ ΣΥΜΒΆΝ**: JSON
    * **ΚΩΔΙΚΟΠΟΊΗΣΗ**: UTF8
7.  Κάντε κλικ στο κουμπί **ΈΛΕΓΧΟΣ** για να προσθέσετε αυτή την προέλευση και για να επαληθεύσετε ότι ροή ανάλυσης να συνδεθείτε με επιτυχία την ενότητα συμβάντων.

### <a name="specify-job-query"></a>Καθορισμός ερωτήματος εργασία

Ανάλυση ροή υποστηρίζει ένα μοντέλο απλή, δηλωτικό ερωτήματος που περιγράφει μετασχηματισμοί για επεξεργασία σε πραγματικό χρόνο. Για να μάθετε περισσότερα σχετικά με τη γλώσσα, ανατρέξτε στο άρθρο [Αναφορά γλώσσας ερωτήματος ανάλυσης ροή Azure](https://msdn.microsoft.com/library/dn834998.aspx). Αυτό το πρόγραμμα εκμάθησης, θα σας βοηθήσει να συντάκτη και να ελέγξετε πολλά ερωτήματα μέσω σας σε πραγματικό χρόνο ροή δεδομένων κλήσης.

#### <a name="optional-sample-input-data"></a>Προαιρετικό: Το δείγμα δεδομένων εισόδου
Για να επικυρώσετε το ερώτημά σας σε σχέση με την πραγματική εργασία δεδομένων, μπορείτε να χρησιμοποιήσετε τη δυνατότητα **ΔΕΊΓΜΑΤΟΣ ΔΕΔΟΜΈΝΩΝ** για να εξαγάγετε συμβάντα από τη ροή σας και να δημιουργήσετε ένα. Αρχείο JSON τα συμβάντα για σκοπούς δοκιμής.  Ακολουθήστε τα παρακάτω βήματα δείχνουν πώς μπορείτε να το κάνετε αυτό. Παρέχουμε επίσης ένα δείγμα αρχείου [telco.json](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json) για σκοπούς δοκιμής.

1.  Επιλέξτε το συμβάν εισαγωγής διανομέας και, στη συνέχεια, κάντε κλικ στην επιλογή **ΔΕΊΓΜΑΤΑ ΔΕΔΟΜΈΝΩΝ** στο κάτω μέρος της σελίδας.
2.  Στο παράθυρο διαλόγου που ανοίγει, καθορίστε μια **ΏΡΑ ΈΝΑΡΞΗΣ** για να ξεκινήσετε τη συλλογή δεδομένων και μια **ΔΙΆΡΚΕΙΑ** για τον όγκο πρόσθετα δεδομένα για την εκμετάλλευση.
3.  Κάντε κλικ στο κουμπί **ΈΛΕΓΧΟΣ** για να ξεκινήσετε δειγματοληψία δεδομένων από την είσοδο.  Αυτό μπορεί να διαρκέσει ένα ή δύο για το αρχείο δεδομένων που θα παραχθεί λεπτά.  Όταν ολοκληρώσετε τη διαδικασία, κάντε κλικ στην επιλογή **ΛΕΠΤΟΜΈΡΕΙΕΣ**, κάντε λήψη του που δημιουργήθηκε. JSON file και αποθηκεύστε το.

    ![Λήψη και αποθήκευση επεξεργασία δεδομένων σε ένα αρχείο JSON](./media/stream-analytics-real-time-fraud-detection/stream-analytics-download-save-json-file.png)

#### <a name="pass-through-query"></a>Ερώτημα διαβίβασης

Εάν θέλετε να αρχειοθετήσετε κάθε συμβάντος, μπορείτε να χρησιμοποιήσετε ένα ερώτημα διαβίβασης για να διαβάσετε όλα τα πεδία στο φορτίο του συμβάντος ή του μηνύματος. Για να ξεκινήσετε, κάντε ένα απλό ερώτημα διαβίβασης που έργα όλα τα πεδία του συμβάντος.

1.  Κάντε κλικ στο **ΕΡΏΤΗΜΑ** από το επάνω μέρος της σελίδας ανάλυση ροής εργασίας.
2.  Προσθέστε τα ακόλουθα στο πρόγραμμα επεξεργασίας κώδικα:

        SELECT * FROM CallStream

    > [AZURE.IMPORTANT] Βεβαιωθείτε ότι το όνομα του αρχείου προέλευσης εισαγωγής συμφωνεί με το όνομα της εισόδου που καθορίσατε προηγουμένως.

3.  Στην περιοχή του προγράμματος επεξεργασίας ερωτήματος, κάντε κλικ στην επιλογή **Έλεγχος** .
4.  Δώστε ένα αρχείο δοκιμής. Χρησιμοποιήστε ένα που δημιουργήσατε χρησιμοποιώντας τα προηγούμενα βήματα, ή [telco.json](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/SampleDataFiles/Telco.json).
5.  Κάντε κλικ στο κουμπί **ΈΛΕΓΧΟΣ** και δείτε τα αποτελέσματα εμφανίζονται κάτω από τον ορισμό του ερωτήματος.

    ![Αποτελέσματα ερωτήματος ορισμού](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sim-fraud-output.png)


### <a name="column-projection"></a>Προβολή στήλης

Τώρα θα μπορούμε να μειώσουμε τα πεδία που επιστρέφονται σε ένα μικρότερο σύνολο.

1.  Αλλάξτε το ερώτημα στο πρόγραμμα επεξεργασίας κώδικα για να:

        SELECT CallRecTime, SwitchNum, CallingIMSI, CallingNum, CalledNum
        FROM CallStream

2.  Κάντε κλικ στην επιλογή **Επανεκτέλεση** κάτω από το πρόγραμμα επεξεργασίας ερωτήματος για να δείτε τα αποτελέσματα του ερωτήματος.

    ![Αποτέλεσμα στο πρόγραμμα επεξεργασίας ερωτήματος.](./media/stream-analytics-real-time-fraud-detection/stream-analytics-query-editor-output.png)

### <a name="count-of-incoming-calls-by-region-tumbling-window-with-aggregation"></a>Πλήθος εισερχόμενες κλήσεις ανά περιοχή: παράθυρο Tumbling με συνάθροισης

Για να συγκρίνετε τον αριθμό των εισερχόμενων κλήσεων ανά περιοχή, ας χρησιμοποιήσουμε ένα [TumblingWindow](https://msdn.microsoft.com/library/azure/dn835055.aspx) να καταμέτρηση των εισερχόμενων κλήσεων ομαδοποιημένα κατά **SwitchNum** κάθε πέντε δευτερόλεπτα.

1.  Αλλάξτε το ερώτημα στο πρόγραμμα επεξεργασίας κώδικα για να:

        SELECT System.Timestamp as WindowEnd, SwitchNum, COUNT(*) as CallCount
        FROM CallStream TIMESTAMP BY CallRecTime
        GROUP BY TUMBLINGWINDOW(s, 5), SwitchNum

    Αυτό το ερώτημα χρησιμοποιεί τη **Χρονική σήμανση από** τη λέξη-κλειδί για να καθορίσετε ένα πεδίο χρονικής σήμανσης στο φορτίο να χρησιμοποιηθεί με το χρονικό κατά τον υπολογισμό. Εάν αυτό το πεδίο δεν καθορίζεται, η λειτουργία Άνοιγμα παραθύρου θα εκτελεστεί από χρησιμοποιώντας την ώρα που έφτασαν κάθε συμβάντος στην ενότητα συμβάντων. Ανατρέξτε στο θέμα [αναφορά γλώσσας ερωτήματος "Άφιξη ώρα και στο εφαρμογής ώρα" σε την ανάλυση ροής](https://msdn.microsoft.com/library/azure/dn834998.aspx).

    Σημειώστε ότι έχετε πρόσβαση σε μια χρονική σήμανση για το τέλος κάθε παραθύρου, χρησιμοποιώντας την ιδιότητα **System.Timestamp** .

2.  Κάντε κλικ στην επιλογή **Επανεκτέλεση** κάτω από το πρόγραμμα επεξεργασίας ερωτήματος για να δείτε τα αποτελέσματα του ερωτήματος.

    ![Αποτελέσματα ερωτήματος για Timestand από](./media/stream-analytics-real-time-fraud-detection/stream-ananlytics-query-editor-rerun.png)

### <a name="sim-fraud-detection-with-a-self-join"></a>Εντοπισμός απάτη SIM με ιδιο-συνδέσμου

Για να προσδιορίσετε πιθανώς απάτες χρήση, θα δούμε για κλήσεις που προέρχονται από τον ίδιο χρήστη, αλλά σε διαφορετικές θέσεις σε λιγότερο από 5 δευτερόλεπτα.  Θα σας [συμμετοχή](https://msdn.microsoft.com/library/azure/dn835026.aspx) στη ροή συμβάντων κλήσης με το ίδιο για να ελέγξετε για αυτές τις περιπτώσεις.

1.  Αλλάξτε το ερώτημα στο πρόγραμμα επεξεργασίας κώδικα για να:

        SELECT System.Timestamp as Time, CS1.CallingIMSI, CS1.CallingNum as CallingNum1,
        CS2.CallingNum as CallingNum2, CS1.SwitchNum as Switch1, CS2.SwitchNum as Switch2
        FROM CallStream CS1 TIMESTAMP BY CallRecTime
        JOIN CallStream CS2 TIMESTAMP BY CallRecTime
        ON CS1.CallingIMSI = CS2.CallingIMSI
        AND DATEDIFF(ss, CS1, CS2) BETWEEN 1 AND 5
        WHERE CS1.SwitchNum != CS2.SwitchNum

2.  Κάντε κλικ στην επιλογή **Επανεκτέλεση** κάτω από το πρόγραμμα επεξεργασίας ερωτήματος για να δείτε τα αποτελέσματα του ερωτήματος.

    ![Αποτελέσματα αναζήτησης του συνδέσμου](./media/stream-analytics-real-time-fraud-detection/stream-ananlytics-query-editor-join.png)

### <a name="create-output-sink"></a>Δημιουργία δέκτη εξόδου

Τώρα που έχετε ορίσαμε ροή ενός συμβάντος, ένα συμβάν διανομέα της εισόδου ingest συμβάντων και ένα ερώτημα για να εκτελέσετε ένα μετασχηματισμό από τη ροή, το τελευταίο βήμα είναι να ορίσετε ενός δέκτη εξόδου για το έργο. Θα σας θα εγγραφή συμβάντων για ως δόλια συμπεριφορά στο χώρο αποθήκευσης αντικειμένων Blob του Azure.

Χρησιμοποιήστε τα ακόλουθα βήματα για να δημιουργήσετε ένα κοντέινερ για το χώρο αποθήκευσης αντικειμένων Blob, εάν δεν έχετε ήδη ένα.

1.  Χρήση ενός υπάρχοντος λογαριασμού χώρου αποθήκευσης ή να δημιουργήσετε ένα νέο λογαριασμό του χώρου αποθήκευσης, κάνοντας κλικ **ΔΗΜΙΟΥΡΓΊΑ > ΥΠΗΡΕΣΊΕΣ ΔΕΔΟΜΈΝΩΝ > ΑΠΟΘΉΚΕΥΣΗ > ΓΡΉΓΟΡΗ ΔΗΜΙΟΥΡΓΊΑ**, και ακολουθήστε τις οδηγίες.
2.  Επιλέξτε το λογαριασμό χώρου αποθήκευσης, κάντε κλικ στην επιλογή **ΚΟΝΤΈΙΝΕΡ** στο επάνω μέρος της σελίδας και, στη συνέχεια, κάντε κλικ στην επιλογή **ΠΡΟΣΘΉΚΗ**.
3.  Καθορίστε ένα **ΌΝΟΜΑ** για το κοντέινερ και ορίστε την **ΠΡΌΣΒΑΣΗ** σε **Δημόσια Blob**.

## <a name="specify-job-output"></a>Καθορίστε το αποτέλεσμα του έργου

1.  Στην εργασία σας ροή ανάλυση, κάντε κλικ στην επιλογή **ΕΞΌΔΟΥ** στο επάνω μέρος της σελίδας και, στη συνέχεια, κάντε κλικ στην επιλογή **Προσθήκη ΕΞΌΔΟΥ**. Παράθυρο διαλόγου που ανοίγει θα σας καθοδηγήσει αρκετά βήματα για να ρυθμίσετε το αποτέλεσμα.
2.  Κάντε κλικ στην επιλογή **Χώρος ΑΠΟΘΉΚΕΥΣΗΣ αντικειμένων BLOB**και, στη συνέχεια, κάντε κλικ στο δεξιό κουμπί.
3.  Πληκτρολογήστε ή επιλέξτε τις παρακάτω τιμές στην τρίτη σελίδα:

    * **ΨΕΥΔΏΝΥΜΟ ΕΞΌΔΟΥ**: Πληκτρολογήστε ένα φιλικό όνομα για αυτό το αποτέλεσμα εργασίας.
    * **ΣΥΝΔΡΟΜΉ**: Εάν είναι το χώρο αποθήκευσης αντικειμένων Blob που δημιουργήσατε στην ίδια συνδρομή ως της ανάλυσης ροή εργασίας, κάντε κλικ στην επιλογή **Χρήση λογαριασμού χώρου αποθήκευσης από τρέχουσα συνδρομή σας**. Εάν ο χώρος αποθήκευσης είναι σε μια διαφορετική συνδρομή, κάντε κλικ στην επιλογή **Χρήση λογαριασμού χώρου αποθήκευσης από μια άλλη συνδρομή**και εισαγάγετε με μη αυτόματο τρόπο τις πληροφορίες για **Το ΛΟΓΑΡΙΑΣΜΌ χώρου ΑΠΟΘΉΚΕΥΣΗΣ**, **ΚΛΕΙΔΊ ΛΟΓΑΡΙΑΣΜΟΎ χώρου ΑΠΟΘΉΚΕΥΣΗΣ**και **ΚΟΝΤΈΙΝΕΡ**.
    * **Το ΛΟΓΑΡΙΑΣΜΌ χώρου ΑΠΟΘΉΚΕΥΣΗΣ**: Επιλέξτε το όνομα του λογαριασμού χώρου αποθήκευσης.
    * **ΚΟΝΤΈΙΝΕΡ**: Επιλέξτε το όνομα του κοντέινερ.
    * **Όνομα ΑΡΧΕΊΟΥ ΠΡΌΘΕΜΑ**: Πληκτρολογήστε ένα αρχείο πρόθεμα για χρήση κατά τη σύνταξη blob εξόδου.

4.  Κάντε κλικ στο δεξιό κουμπί.
5.  Καθορίστε τις ακόλουθες τιμές:

    * **ΜΟΡΦΉ ΣΕΙΡΙΟΠΟΙΗΤΉΣ ΣΥΜΒΆΝ**: JSON
    * **ΚΩΔΙΚΟΠΟΊΗΣΗ**: UTF8

6.  Κάντε κλικ στο κουμπί **ΈΛΕΓΧΟΣ** για να προσθέσετε αυτή την προέλευση και για να επαληθεύσετε ότι ανάλυση ροή μπορεί να συνδεθεί με επιτυχία με το λογαριασμό χώρου αποθήκευσης.

## <a name="start-job-for-real-time-processing"></a>Έναρξη εργασίας για επεξεργασία σε πραγματικό χρόνο

Επειδή η εργασία εισαγωγής, ερώτημα και εξόδου όλα έχουν καθοριστεί, είμαστε έτοιμοι να ξεκινήσει η εργασία ροής ανάλυσης για τον εντοπισμό απάτη σε πραγματικό χρόνο.

1.  Από την εργασία **πίνακα ΕΡΓΑΛΕΊΩΝ**, κάντε κλικ στο κουμπί " **ΈΝΑΡΞΗ** " στο κάτω μέρος της σελίδας.
2.  Στο παράθυρο διαλόγου που ανοίγει, κάντε κλικ στην επιλογή **ΏΡΑ ΈΝΑΡΞΗΣ του ΈΡΓΟΥ**και, στη συνέχεια, κάντε κλικ στο κουμπί **ΈΛΕΓΧΟΣ** στο κάτω μέρος του παραθύρου διαλόγου. Την κατάσταση της εργασίας θα αλλάξει σε **Έναρξη** και λίγο θα αλλάξουν με την **Εκτέλεση**.

## <a name="view-fraud-detection-output"></a>Προβολή απάτη εντοπισμού εξόδου

Χρησιμοποιήστε ένα εργαλείο όπως [Εξερεύνηση χώρου αποθήκευσης Azure](http://storageexplorer.com/) ή [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction) για να προβάλετε ως δόλια συμβάντα όπως γίνεται εγγραφή σε το αποτέλεσμα σε πραγματικό χρόνο.  

![Εντοπισμός απάτη: ως δόλια συμβάντα προβληθεί σε πραγματικό χρόνο](./media/stream-analytics-real-time-fraud-detection/stream-ananlytics-view-real-time-fraudent-events.png)

## <a name="get-support"></a>Λήψη υποστήριξης
Για περαιτέρω βοήθεια, δοκιμάστε να μας [φόρουμ Azure ροή ανάλυσης](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).


## <a name="next-steps"></a>Επόμενα βήματα

- [Εισαγωγή στην ανάλυση Azure ροής](stream-analytics-introduction.md)
- [Κλίμακα Azure ανάλυση ροής εργασιών](stream-analytics-scale-jobs.md)
- [Αναφορά γλώσσας ερωτήματος ανάλυσης Azure ροής](https://msdn.microsoft.com/library/azure/dn834998.aspx)
- [Azure ροή ανάλυση διαχείρισης REST API αναφοράς](https://msdn.microsoft.com/library/azure/dn835031.aspx)
