<properties
    pageTitle="Ερώτημα παραδείγματα για την κοινή χρήση μοτίβα σε ροή ανάλυση | Microsoft Azure"
    description="Κοινά μοτίβα ερωτήματος ανάλυσης Azure ροής "
    keywords="Παραδείγματα ερωτημάτων"
    services="stream-analytics"
    documentationCenter=""
    authors="jeffstokes72"
    manager="jhubbard"
    editor="cgronlun"/>

<tags
    ms.service="stream-analytics"
    ms.devlang="na"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="big-data"
    ms.date="09/26/2016"
    ms.author="jeffstok"/>


# <a name="query-examples-for-common-stream-analytics-usage-patterns"></a>Ερώτημα παραδείγματα για κοινά μοτίβα χρήσης ροή ανάλυσης

## <a name="introduction"></a>Εισαγωγή

Ερωτήματα στην ανάλυση ροή Azure εκφράζονται σε μια γλώσσα ερωτημάτων μοιάζει με SQL, που τεκμηριώνονται σε του οδηγού [Αναφοράς γλώσσας ερωτήματος ανάλυσης ροής](https://msdn.microsoft.com/library/azure/dn834998.aspx) .  Σε αυτό το άρθρο περιγράφει λύσεις σε πολλές κοινές μοτίβα ερωτήματος που βασίζονται σε σενάρια πραγματικό κόσμο.  Είναι μια εργασία σε εξέλιξη και θα συνεχίσουν να ενημερώνονται με νέα μοτίβα σε συνεχή βάση.

## <a name="query-example-data-type-conversions"></a>Παράδειγμα ερωτήματος: τις μετατροπές τύπων δεδομένων
**Περιγραφή**: Καθορισμός τους τύπους των ιδιοτήτων σε ροή δεδομένων εισόδου.
Για παράδειγμα, πάχος αυτοκινήτου έρχεται σε ροή δεδομένων εισόδου ως συμβολοσειρές και πρέπει να μετατραπούν σε INT για να εκτελέσετε την ΆΘΡΟΙΣΗ προς τα επάνω.

**Εισαγωγή δεδομένων**:

| Πραγματοποίηση | Ώρα | Βάρος |
| --- | --- | --- |
| Honda | 2015-01-01T00:00:01.0000000Z | "1000" |
| Honda | 2015-01-01T00:00:02.0000000Z | "2000" |

**Αποτέλεσμα**:

| Πραγματοποίηση | Βάρος |
| --- | --- |
| Honda | 3000 |

**Λύση**:

    SELECT
        Make,
        SUM(CAST(Weight AS BIGINT)) AS Weight
    FROM
        Input TIMESTAMP BY Time
    GROUP BY
        Make,
        TumblingWindow(second, 10)

**Επεξήγηση**: Χρησιμοποιήστε μια πρόταση CAST στο πεδίο πάχος για να καθορίσετε τον τύπο (δείτε τη λίστα των υποστηριζόμενοι τύποι δεδομένων [εδώ](https://msdn.microsoft.com/library/azure/dn835065.aspx)).


## <a name="query-example-using-likenot-like-to-do-pattern-matching"></a>Παράδειγμα ερωτήματος: χρήση μου αρέσει/δεν θέλατε να μοτίβου αντιστοίχισης
**Περιγραφή**: Ελέγξτε ότι μια τιμή πεδίου με το συμβάν που ταιριάζει με ένα συγκεκριμένο μοτίβο, για παράδειγμα, επιστροφής πλάκες άδεια χρήσης που αρχίζουν με A και τελειώνει με 9

**Εισαγωγή δεδομένων**:

| Πραγματοποίηση | LicensePlate | Ώρα |
| --- | --- | --- |
| Honda | ΑΒΓ 123 | 2015-01-01T00:00:01.0000000Z |
| Toyota | ΑΑΑ-999 | 2015-01-01T00:00:02.0000000Z |
| Nissan | ΑΒΓ 369 | 2015-01-01T00:00:03.0000000Z |

**Αποτέλεσμα**:

| Πραγματοποίηση | LicensePlate | Ώρα |
| --- | --- | --- |
| Toyota | ΑΑΑ-999 | 2015-01-01T00:00:02.0000000Z |
| Nissan | ΑΒΓ 369 | 2015-01-01T00:00:03.0000000Z |

**Λύση**:

    SELECT
        *
    FROM
        Input TIMESTAMP BY Time
    WHERE
        LicensePlate LIKE 'A%9'

**Επεξήγηση**: Χρησιμοποιήστε την πρόταση LIKE για να βεβαιωθείτε ότι η τιμή του πεδίου LicensePlate ξεκινά με A, στη συνέχεια, έχει οποιαδήποτε συμβολοσειρά κανέναν ή περισσότερους χαρακτήρες και τελειώνει με 9. 

## <a name="query-example-specify-logic-for-different-casesvalues-case-statements"></a>Παράδειγμα ερωτήματος: Καθορίστε λογική για διάφορες περιπτώσεις/τιμές (δηλώσεις πεζών-ΚΕΦΑΛΑΊΩΝ)
**Περιγραφή**: Δώστε διαφορετική υπολογισμού για ένα πεδίο με βάση ορισμένα κριτήρια.
Για παράδειγμα, δώστε μια περιγραφή συμβολοσειρά για το πόσες αυτοκίνητα που εισήχθησαν της ίδιας κατασκευής με μια υπόθεση ειδικών για 1.

**Εισαγωγή δεδομένων**:

| Πραγματοποίηση | Ώρα |
| --- | --- |
| Honda | 2015-01-01T00:00:01.0000000Z |
| Toyota | 2015-01-01T00:00:02.0000000Z |
| Toyota | 2015-01-01T00:00:03.0000000Z |

**Αποτέλεσμα**:

| CarsPassed | Ώρα |
| --- | --- | --- |
| 1 Honda | 2015-01-01T00:00:10.0000000Z |
| 2 Toyotas | 2015-01-01T00:00:10.0000000Z |

**Λύση**:

    SELECT
        CASE
            WHEN COUNT(*) = 1 THEN CONCAT('1 ', Make)
            ELSE CONCAT(CAST(COUNT(*) AS NVARCHAR(MAX)), ' ', Make, 's')
        END AS CarsPassed,
        System.TimeStamp AS Time
    FROM
        Input TIMESTAMP BY Time
    GROUP BY
        Make,
        TumblingWindow(second, 10)

**Επεξήγηση**: ο όρος την ΥΠΌΘΕΣΗ επιτρέπει μας για την παροχή μια διαφορετική κατά τον υπολογισμό που βασίζονται σε μερικά κριτηρίων (σε περίπτωση μας το πλήθος των αυτοκίνητα στο παράθυρο συγκεντρωτικών αποτελεσμάτων).

## <a name="query-example-send-data-to-multiple-outputs"></a>Παράδειγμα ερωτήματος: Αποστολή δεδομένων σε πολλές εξόδους
**Περιγραφή**: Αποστολή δεδομένων σε πολλούς στόχους εξόδου από μία μόνο εργασία.
Για παράδειγμα, ανάλυση των δεδομένων για μια ειδοποίηση που βασίζεται στο όριο και αρχειοθέτησης όλα τα συμβάντα με το χώρο αποθήκευσης αντικειμένων blob

**Εισαγωγή δεδομένων**:

| Πραγματοποίηση | Ώρα |
| --- | --- |
| Honda | 2015-01-01T00:00:01.0000000Z |
| Honda | 2015-01-01T00:00:02.0000000Z |
| Toyota | 2015-01-01T00:00:01.0000000Z |
| Toyota | 2015-01-01T00:00:02.0000000Z |
| Toyota | 2015-01-01T00:00:03.0000000Z |

**Output1**:

| Πραγματοποίηση | Ώρα |
| --- | --- |
| Honda | 2015-01-01T00:00:01.0000000Z |
| Honda | 2015-01-01T00:00:02.0000000Z |
| Toyota | 2015-01-01T00:00:01.0000000Z |
| Toyota | 2015-01-01T00:00:02.0000000Z |
| Toyota | 2015-01-01T00:00:03.0000000Z |

**Output2**:

| Πραγματοποίηση | Ώρα | Καταμέτρηση |
| --- | --- | --- |
| Toyota | 2015-01-01T00:00:10.0000000Z | 3 |

**Λύση**:

    SELECT
        *
    INTO
        ArchiveOutput
    FROM
        Input TIMESTAMP BY Time

    SELECT
        Make,
        System.TimeStamp AS Time,
        COUNT(*) AS [Count]
    INTO
        AlertOutput
    FROM
        Input TIMESTAMP BY Time
    GROUP BY
        Make,
        TumblingWindow(second, 10)
    HAVING
        [Count] >= 3

**Επεξήγηση**: το σε όρος ενημερώνει ανάλυση ροή ποιο από τα εξόδους εγγραφή των δεδομένων από αυτήν τη δήλωση.
Το πρώτο ερώτημα είναι μια διαβίβασης από τα δεδομένα που θα σας λαμβάνονται για το αποτέλεσμα που θα σας με το όνομα ArchiveOutput.
Το δεύτερο ερώτημα κάνει κάποιες απλές συνάθροισης και το φιλτράρισμα και στέλνει τα αποτελέσματα σε ένα σύστημα ροής προειδοποίησης.
*Σημείωση*: Μπορείτε επίσης να χρησιμοποιήσετε ξανά αποτελέσματα της CTEs (δηλαδή με δηλώσεις) σε πολλαπλές δηλώσεις εξόδου – αυτό έχει το πρόσθετο πλεονέκτημα της Άνοιγμα λιγότερα προγράμματα ανάγνωσης με το αρχείο προέλευσης εισαγωγής.
Για παράδειγμα, 

    WITH AllRedCars AS (
        SELECT
            *
        FROM
            Input TIMESTAMP BY Time
        WHERE
            Color = 'red'
    )
    SELECT * INTO HondaOutput FROM AllRedCars WHERE Make = 'Honda'
    SELECT * INTO ToyotaOutput FROM AllRedCars WHERE Make = 'Toyota'

## <a name="query-example-counting-unique-values"></a>Παράδειγμα ερωτήματος: Καταμέτρηση μοναδικών τιμών
**Περιγραφή**: καταμέτρηση του αριθμού μοναδικών πεδίων τιμών που εμφανίζονται στη ροή μέσα σε ένα παράθυρο του χρόνου.
Για παράδειγμα, τον αριθμό μοναδικών δημιουργίας με αυτοκίνητα διέλευσή του μέσω του περίπτερου με χρέωση σε ένα παράθυρο του 2 δεύτερο;

**Εισαγωγή δεδομένων**:

| Πραγματοποίηση | Ώρα |
| --- | --- |
| Honda | 2015-01-01T00:00:01.0000000Z |
| Honda | 2015-01-01T00:00:02.0000000Z |
| Toyota | 2015-01-01T00:00:01.0000000Z |
| Toyota | 2015-01-01T00:00:02.0000000Z |
| Toyota | 2015-01-01T00:00:03.0000000Z |

**Αποτέλεσμα:**

| Καταμέτρηση | Ώρα |
| --- | --- |
| 2 | 2015-01-01T00:00:02.000Z |
| 1 | 2015-01-01T00:00:04.000Z |

**Λύση:**

    WITH Makes AS (
        SELECT
            Make,
            COUNT(*) AS CountMake
        FROM
            Input TIMESTAMP BY Time
        GROUP BY
              Make,
              TumblingWindow(second, 2)
    )
    SELECT
        COUNT(*) AS Count,
        System.TimeStamp AS Time
    FROM
        Makes
    GROUP BY
        TumblingWindow(second, 1)


**Εξήγηση:** Κάνουμε μια αρχική συγκέντρωση για να λάβετε μοναδικό κάνει με την καταμέτρηση πάνω από το παράθυρο.
Στη συνέχεια, κάνουμε μια συγκέντρωση των πόσες κάνει μας έχετε – δεδομένο όλα μοναδικές τιμές σε ένα παράθυρο γρήγορα το ίδιο χρονικής σήμανσης και, στη συνέχεια, το δεύτερο παράθυρο συνάθροιση πρέπει να είναι ελάχιστους για να συγκεντρώσετε 2 των windows από το πρώτο βήμα.

## <a name="query-example-determine-if-a-value-has-changed"></a>Παράδειγμα ερωτήματος: καθορίζουν εάν μια τιμή έχει αλλάξει#
**Περιγραφή**: δείτε μια προηγούμενη τιμή για να προσδιορίσετε εάν είναι διαφορετική από την τρέχουσα τιμή είναι για παράδειγμα, το προηγούμενο αυτοκίνητο εν κινήσει με χρέωση ίδια πραγματοποίηση ως το τρέχον αυτοκινήτου;

**Εισαγωγή δεδομένων**:

| Πραγματοποίηση | Ώρα |
| --- | --- |
| Honda | 2015-01-01T00:00:01.0000000Z |
| Toyota | 2015-01-01T00:00:02.0000000Z |

**Αποτέλεσμα**:

| Πραγματοποίηση | Ώρα |
| --- | --- |
| Toyota | 2015-01-01T00:00:02.0000000Z |

**Λύση**:

    SELECT
        Make,
        Time
    FROM
        Input TIMESTAMP BY Time
    WHERE
        LAG(Make, 1) OVER (LIMIT DURATION(minute, 1)) <> Make

**Επεξήγηση**: χρήση ΑΠΌΚΡΙΣΗΣ σε Ρίξτε μια ματιά στην είσοδο ροή ένα συμβάν πίσω και λάβετε την τιμή δημιουργίας. Στη συνέχεια, συγκρίνετε για να το κάνετε με το τρέχον συμβάν και εξόδου στο συμβάν, εάν διαφέρουν.

## <a name="query-example-find-first-event-in-a-window"></a>Παράδειγμα ερωτήματος: Εύρεση πρώτο συμβάν σε ένα παράθυρο
**Περιγραφή**: Εύρεση πρώτου αυτοκινήτου σε κάθε χρονικό διάστημα 10 λεπτά;

**Εισαγωγή δεδομένων**:

| LicensePlate | Πραγματοποίηση | Ώρα |
| --- | --- | --- |
| DXE 5291 | Honda | 2015-07-27T00:00:05.0000000Z |
| YZK 5704 | Διάβαση | 2015-07-27T00:02:17.0000000Z |
| RMV 8282 | Honda | 2015-07-27T00:05:01.0000000Z |
| YHN 6970 | Toyota | 2015-07-27T00:06:00.0000000Z |
| VFE 1616 | Toyota | 2015-07-27T00:09:31.0000000Z |
| QYF 9358 | Honda | 2015-07-27T00:12:02.0000000Z |
| MDR 6128 | BMW | 2015-07-27T00:13:45.0000000Z |

**Αποτέλεσμα**:

| LicensePlate | Πραγματοποίηση | Ώρα |
| --- | --- | --- |
| DXE 5291 | Honda | 2015-07-27T00:00:05.0000000Z |
| QYF 9358 | Honda | 2015-07-27T00:12:02.0000000Z |

**Λύση**:

    SELECT 
        LicensePlate,
        Make,
        Time
    FROM 
        Input TIMESTAMP BY Time
    WHERE 
        IsFirst(minute, 10) = 1

Τώρα, ας κάνουμε αλλαγή το πρόβλημα και Εύρεση πρώτου αυτοκίνητο συγκεκριμένου σε κάθε χρονικό διάστημα 10 λεπτά.

| LicensePlate | Πραγματοποίηση | Ώρα |
| --- | --- | --- |
| DXE 5291 | Honda | 2015-07-27T00:00:05.0000000Z |
| YZK 5704 | Διάβαση | 2015-07-27T00:02:17.0000000Z |
| YHN 6970 | Toyota | 2015-07-27T00:06:00.0000000Z |
| QYF 9358 | Honda | 2015-07-27T00:12:02.0000000Z |
| MDR 6128 | BMW | 2015-07-27T00:13:45.0000000Z |

**Λύση**:

    SELECT 
        LicensePlate,
        Make,
        Time
    FROM 
        Input TIMESTAMP BY Time
    WHERE 
        IsFirst(minute, 10) OVER (PARTITION BY Make) = 1

## <a name="query-example-find-last-event-in-a-window"></a>Παράδειγμα ερωτήματος: Εύρεση τελευταίο συμβάν σε ένα παράθυρο
**Περιγραφή**: Εύρεση τελευταία αυτοκίνητο σε κάθε χρονικό διάστημα 10 λεπτά.

**Εισαγωγή δεδομένων**:

| LicensePlate | Πραγματοποίηση | Ώρα |
| --- | --- | --- |
| DXE 5291 | Honda | 2015-07-27T00:00:05.0000000Z |
| YZK 5704 | Διάβαση | 2015-07-27T00:02:17.0000000Z |
| RMV 8282 | Honda | 2015-07-27T00:05:01.0000000Z |
| YHN 6970 | Toyota | 2015-07-27T00:06:00.0000000Z |
| VFE 1616 | Toyota | 2015-07-27T00:09:31.0000000Z |
| QYF 9358 | Honda | 2015-07-27T00:12:02.0000000Z |
| MDR 6128 | BMW | 2015-07-27T00:13:45.0000000Z |

**Αποτέλεσμα**:

| LicensePlate | Πραγματοποίηση | Ώρα |
| --- | --- | --- |
| VFE 1616 | Toyota | 2015-07-27T00:09:31.0000000Z |
| MDR 6128 | BMW | 2015-07-27T00:13:45.0000000Z |

**Λύση**:

    WITH LastInWindow AS
    (
        SELECT 
            MAX(Time) AS LastEventTime
        FROM 
            Input TIMESTAMP BY Time
        GROUP BY 
            TumblingWindow(minute, 10)
    )
    SELECT 
        Input.LicensePlate,
        Input.Make,
        Input.Time
    FROM
        Input TIMESTAMP BY Time 
        INNER JOIN LastInWindow
        ON DATEDIFF(minute, Input, LastInWindow) BETWEEN 0 AND 10
        AND Input.Time = LastInWindow.LastEventTime

**Επεξήγηση**: υπάρχουν δύο βήματα στο ερώτημα – το πρώτο εντοπίζει την πιο πρόσφατη χρονικής σήμανσης στα windows 10 λεπτά. Το δεύτερο βήμα ενώνει τα αποτελέσματα του πρώτου ερωτήματος με το αρχικό ροής για να βρείτε τα συμβάντα που ικανοποιούν τελευταία χρονικές σημάνσεις σε κάθε παράθυρο. 

## <a name="query-example-detect-the-absence-of-events"></a>Παράδειγμα ερωτήματος: ανίχνευση της απουσίας συμβάντα
**Περιγραφή**: Ελέγξτε ότι μια ροή δεν έχει τιμή που ταιριάζει με ένα συγκεκριμένο κριτήριο.
Για παράδειγμα, 2 διαδοχικές αυτοκινήτων από το ίδιο πραγματοποιείται πληκτρολογήσατε δρόμο με χρέωση εντός 90 δευτερόλεπτα;

**Εισαγωγή δεδομένων**:

| Πραγματοποίηση | LicensePlate | Ώρα |
| --- | --- | --- |
| Honda | ΑΒΓ 123 | 2015-01-01T00:00:01.0000000Z |
| Honda | ΑΑΑ-999 | 2015-01-01T00:00:02.0000000Z |
| Toyota | 987 ΑΝΆΛΥΣΗΣ | 2015-01-01T00:00:03.0000000Z |
| Honda | GHI-345 | 2015-01-01T00:00:04.0000000Z |

**Αποτέλεσμα**:

| Πραγματοποίηση | Ώρα | CurrentCarLicensePlate | FirstCarLicensePlate | FirstCarTime |
| --- | --- | --- | --- | --- |
| Honda | 2015-01-01T00:00:02.0000000Z | ΑΑΑ-999 | ΑΒΓ 123 | 2015-01-01T00:00:01.0000000Z |

**Λύση**:

    SELECT
        Make,
        Time,
        LicensePlate AS CurrentCarLicensePlate,
        LAG(LicensePlate, 1) OVER (LIMIT DURATION(second, 90)) AS FirstCarLicensePlate,
        LAG(Time, 1) OVER (LIMIT DURATION(second, 90)) AS FirstCarTime
    FROM
        Input TIMESTAMP BY Time
    WHERE
        LAG(Make, 1) OVER (LIMIT DURATION(second, 90)) = Make

**Επεξήγηση**: χρήση ΑΠΌΚΡΙΣΗΣ σε Ρίξτε μια ματιά στην είσοδο ροή ένα συμβάν πίσω και λάβετε την τιμή δημιουργίας. Στη συνέχεια, συγκρίνετε για να το κάνετε με το τρέχον συμβάν και εξόδου στο συμβάν, εάν είναι η ίδια και χρησιμοποιήστε ΑΠΌΚΡΙΣΗΣ για να λάβετε δεδομένα σχετικά με το προηγούμενο αυτοκινήτου.

## <a name="query-example-detect-duration-between-events"></a>Παράδειγμα ερωτήματος: εντοπισμός διάρκεια μεταξύ συμβάντα
**Περιγραφή**: εύρεση της διάρκειας ενός δεδομένου συμβάντος. Για παράδειγμα, η δεδομένη μια clickstream web καθορίζουν χρόνο που δαπανάται σε μια δυνατότητα.

**Εισαγωγή δεδομένων**:  
  
| Χρήστη | Η δυνατότητα | Συμβάν | Ώρα |
| --- | --- | --- | --- |
| user@location.com | RightMenu | Έναρξη | 2015-01-01T00:00:01.0000000Z |
| user@location.com | RightMenu | Τέλος | 2015-01-01T00:00:08.0000000Z |
  
**Αποτέλεσμα**:  
  
| Χρήστη | Η δυνατότητα | Διάρκεια |
| --- | --- | --- |
| user@location.com | RightMenu | 7 |
  

**Λύση**

````
    SELECT
        [user], feature, DATEDIFF(second, LAST(Time) OVER (PARTITION BY [user], feature LIMIT DURATION(hour, 1) WHEN Event = 'start'), Time) as duration
    FROM input TIMESTAMP BY Time
    WHERE
        Event = 'end'
````

**Επεξήγηση**: χρήση της συνάρτησης ΤΕΛΕΥΤΑΊΑ για την ανάκτηση τελευταία τιμή ώρας, όταν ο τύπος συμβάντος ήταν 'Έναρξη'. Σημειώστε ότι χρησιμοποιεί ΤΕΛΕΥΤΑΊΑ συνάρτηση PARTITION από [χρήστη] για να υποδείξει ότι αποτέλεσμα υπολογίζεται ανά χρήστη μοναδικών τιμών.  Το ερώτημα έχει ένα μέγιστο όριο 1 ώρα για χρονική διαφορά μεταξύ συμβάντα 'Έναρξη' και 'Stop', αλλά είναι δυνατό να ρυθμιστεί ως απαραίτητες (το ΌΡΙΟ DURATION(hour, 1).

## <a name="query-example-detect-duration-of-a-condition"></a>Παράδειγμα ερωτήματος: εντοπισμός διάρκεια των συνθήκης
**Περιγραφή**: Εύρεση εκτός πόσος χρόνος Παρουσιάστηκε μια συνθήκη για.
Για παράδειγμα, ας υποθέσουμε ότι ένα σφάλμα που οδήγησε σε όλα αυτοκίνητα έχουν μια εσφαλμένη βάρος (επάνω από 20.000 λίβρες) – θέλουμε να υπολογίσετε τη διάρκεια του σφάλματος.

**Εισαγωγή δεδομένων**:

| Πραγματοποίηση | Ώρα | Βάρος |
| --- | --- | --- |
| Honda | 2015-01-01T00:00:01.0000000Z | 2000 |
| Toyota | 2015-01-01T00:00:02.0000000Z | 25000 |
| Honda | 2015-01-01T00:00:03.0000000Z | 26000 |
| Toyota | 2015-01-01T00:00:04.0000000Z | 25000 |
| Honda | 2015-01-01T00:00:05.0000000Z | 26000 |
| Toyota | 2015-01-01T00:00:06.0000000Z | 25000 |
| Honda | 2015-01-01T00:00:07.0000000Z | 26000 |
| Toyota | 2015-01-01T00:00:08.0000000Z | 2000 |

**Αποτέλεσμα**:

| StartFault | EndFault |
| --- | --- |
| 2015-01-01T00:00:02.000Z | 2015-01-01T00:00:07.000Z |

**Λύση**:

````
    WITH SelectPreviousEvent AS
    (
    SELECT
    *,
        LAG([time]) OVER (LIMIT DURATION(hour, 24)) as previousTime,
        LAG([weight]) OVER (LIMIT DURATION(hour, 24)) as previousWeight
    FROM input TIMESTAMP BY [time]
    )

    SELECT 
        LAG(time) OVER (LIMIT DURATION(hour, 24) WHEN previousWeight < 20000 ) [StartFault],
        previousTime [EndFault]
    FROM SelectPreviousEvent
    WHERE
        [weight] < 20000
        AND previousWeight > 20000
````

**Επεξήγηση**: χρήση ΑΠΌΚΡΙΣΗΣ για να προβάλετε τη ροή εισαγωγής 24 ώρες και αναζητήστε παρουσίες όπου StartFault και StopFault είναι καλύπτει weight < 20000.

## <a name="query-example-fill-missing-values"></a>Παράδειγμα ερωτήματος: συμπληρώσετε τιμές που λείπουν
**Περιγραφή**: για τη ροή των συμβάντων που έχουν τιμές που λείπουν, αγροτικά προϊόντα ροή συμβάντων με τακτά χρονικά διαστήματα.
Για παράδειγμα, δημιουργούν συμβάν κάθε 5 δευτερόλεπτα που θα αναφέρει το σημείο δεδομένων εμφανίζεται πιο πρόσφατα.

**Εισαγωγή δεδομένων**:

| t | τιμή |
|--------------------------|-------|
| "2014-01-01T06:01:00" | 1 |
| "2014-01-01T06:01:05" | 2 |
| "2014-01-01T06:01:10" | 3 |
| "2014-01-01T06:01:15" | 4 |
| "2014-01-01T06:01:30" | 5 |
| "2014-01-01T06:01:35" | 6 |

**Εξόδου (10 πρώτες γραμμές)**:

| windowend | lastevent.t | lastevent.Value |
|--------------------------|--------------------------|--------|
| 2014-01-01T14:01:00.000Z | 2014-01-01T14:01:00.000Z | 1 |
| 2014-01-01T14:01:05.000Z | 2014-01-01T14:01:05.000Z | 2 |
| 2014-01-01T14:01:10.000Z | 2014-01-01T14:01:10.000Z | 3 |
| 2014-01-01T14:01:15.000Z | 2014-01-01T14:01:15.000Z | 4 |
| 2014-01-01T14:01:20.000Z | 2014-01-01T14:01:15.000Z | 4 |
| 2014-01-01T14:01:25.000Z | 2014-01-01T14:01:15.000Z | 4 |
| 2014-01-01T14:01:30.000Z | 2014-01-01T14:01:30.000Z | 5 |
| 2014-01-01T14:01:35.000Z | 2014-01-01T14:01:35.000Z | 6 |
| 2014-01-01T14:01:40.000Z | 2014-01-01T14:01:35.000Z | 6 |
| 2014-01-01T14:01:45.000Z | 2014-01-01T14:01:35.000Z | 6 |

    
**Λύση**:

    SELECT
        System.Timestamp AS windowEnd,
        TopOne() OVER (ORDER BY t DESC) AS lastEvent
    FROM
        input TIMESTAMP BY t
    GROUP BY HOPPINGWINDOW(second, 300, 5)


**Επεξήγηση**: αυτό το ερώτημα θα δημιουργήσει συμβάντα ανά δευτερόλεπτο 5 και θα το τελευταίο συμβάν που παραλήφθηκε πριν από την έξοδο. [Διασκέδαση παραθύρου] Διάρκεια (https://msdn.microsoft.com/library/dn835041.aspx "Διασκέδαση παράθυρο - Azure ροή ανάλυσης") Καθορίζει πόσο μακριά πίσω θα μοιάζει το ερώτημα για να βρείτε την πιο πρόσφατη συμβάν (300 δευτερόλεπτα σε αυτό το παράδειγμα).


## <a name="get-help"></a>Λήψη Βοήθειας
Για περαιτέρω βοήθεια, δοκιμάστε να μας [φόρουμ ανάλυση ροή Azure](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics)

## <a name="next-steps"></a>Επόμενα βήματα

- [Εισαγωγή στην ανάλυση Azure ροής](stream-analytics-introduction.md)
- [Γρήγορα αποτελέσματα με το Azure ροή ανάλυσης](stream-analytics-get-started.md)
- [Κλίμακα Azure ανάλυση ροής εργασιών](stream-analytics-scale-jobs.md)
- [Αναφορά γλώσσας ερωτήματος ανάλυσης Azure ροής](https://msdn.microsoft.com/library/azure/dn834998.aspx)
- [Azure ροή ανάλυση διαχείρισης REST API αναφοράς](https://msdn.microsoft.com/library/azure/dn835031.aspx)
 
