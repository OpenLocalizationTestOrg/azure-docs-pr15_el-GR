<properties
    pageTitle="Αποτέλεσμα JSON για την ανάλυση ροή | Microsoft Azure"
    description="Μάθετε πώς ροή ανάλυση, να στοχεύετε Azure DocumentDB για JSON εξόδου, για αρχειοθέτηση δεδομένων και τα ερωτήματα χαμηλής αδράνειας σε μη δομημένα δεδομένα JSON."
    keywords="JSON εξόδου"
    documentationCenter=""
    services="stream-analytics,documentdb"
    authors="jeffstokes72"
    manager="jhubbard"
    editor="cgronlun"/>

<tags
    ms.service="stream-analytics"
    ms.devlang="na"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="data-services"
    ms.date="09/26/2016"
    ms.author="jeffstok"/>

# <a name="target-azure-documentdb-for-json-output-from-stream-analytics"></a>DocumentDB Azure προορισμού για JSON έξοδο από ροή ανάλυσης

Ανάλυση ροής, να στοχεύετε [Azure DocumentDB](https://azure.microsoft.com/services/documentdb/) για JSON εξόδου, ενεργοποίηση αρχειοθέτησης και χαμηλής αδράνειας ερωτήματα δεδομένων σε μη δομημένα δεδομένα JSON. Μάθετε πώς μπορείτε να υλοποιήσετε καλύτερα αυτή η ενσωμάτωση.

Για τα άτομα που δεν γνωρίζετε με DocumentDB, Ρίξτε μια ματιά [του DocumentDB διαδρομή εκμάθησης](https://azure.microsoft.com/documentation/learning-paths/documentdb/) για να ξεκινήσετε.

## <a name="basics-of-documentdb-as-an-output-target"></a>Βασικά στοιχεία των DocumentDB ως ένα προορισμός εξόδου
Το αποτέλεσμα του Azure DocumentDB στην ανάλυση ροή ενεργοποιεί την εγγραφή σας ροή επεξεργασίας αποτελέσματα ως JSON Έξοδος σε σας συλλογές DocumentDB. Ροή ανάλυση δεν δημιουργεί συλλογές στη βάση δεδομένων σας, αντί να χρειάζεται να τα δημιουργήσετε προκαταβολικά. Αυτή είναι έτσι ώστε το χρεώσεων κόστους των συλλογών DocumentDB διαφανή σε εσάς και έτσι, ώστε να μπορείτε με ακρίβεια τις επιδόσεις, συνέπειας και δυναμικότητα των συλλογών σας απευθείας χρησιμοποιώντας τα [DocumentDB APIs](https://msdn.microsoft.com/library/azure/dn781481.aspx). Συνιστάται να χρησιμοποιείτε μια βάση δεδομένων DocumentDB ανά ροής εργασίας για να διαχωρίσετε λογικά τις συλλογές για μια ροή εργασίας.

Ορισμένες από τις επιλογές συλλογής DocumentDB παρατίθενται λεπτομερώς πιο κάτω.

## <a name="tune-consistency-availability-and-latency"></a>Ρύθμιση της συνέπειας, διαθεσιμότητα και λανθάνοντος χρόνου

Για να ταιριάζουν με τις απαιτήσεις της εφαρμογής, DocumentDB σάς επιτρέπει να ρυθμίσετε με ακρίβεια τη βάση δεδομένων και συλλογές και να κάνετε τα ανταλλάγματα μεταξύ συνέπειας, διαθεσιμότητα και λανθάνοντος χρόνου. Ανάλογα με το ποια επίπεδα Διαβάστε συνέπειας σύμφωνα με τις ανάγκες σας σενάριο ανάγνωσης και εγγραφής λανθάνοντα χρόνο, μπορείτε να επιλέξετε ένα επίπεδο συνέπειας στο λογαριασμό σας βάση δεδομένων. Από προεπιλογή, DocumentDB καθίσταται σύγχρονη δημιουργίας ευρετηρίου σε κάθε εργασία CRUD στη συλλογή σας. Αυτή είναι μια άλλη επιλογή χρήσιμη για να ελέγξετε τις επιδόσεις ανάγνωσης/εγγραφής σε DocumentDB. Για περαιτέρω πληροφορίες σχετικά με αυτό το θέμα, διαβάστε το άρθρο [Αλλαγή σας επίπεδα συνέπειας βάσης δεδομένων και ερωτήματος](../documentdb/documentdb-consistency-levels.md) .

## <a name="choose-a-performance-level"></a>Επιλέξτε ένα επίπεδο επιδόσεων

Συλλογές DocumentDB μπορούν να δημιουργηθούν σε 3 επιδόσεων διαφορετικά επίπεδα (S1, S2 ή S3), που καθορίζουν την ταχύτητα μεταγωγής διαθέσιμη για CRUDs σε αυτήν τη συλλογή. Επιπλέον, επιδόσεων επηρεάζεται από τα επίπεδα δημιουργίας ευρετηρίου συνέπειας στη συλλογή σας. Ανατρέξτε [σε αυτό το άρθρο](../documentdb/documentdb-performance-levels.md) για να κατανοήσετε αυτών των επιπέδων απόδοσης με λεπτομέρειες.

## <a name="upserts-from-stream-analytics"></a>Upserts από ροή ανάλυσης

Ροή ανάλυση ενοποίηση με DocumentDB σάς επιτρέπει να εισαγάγετε ή να ενημερώσετε τις εγγραφές σε συλλογή σας DocumentDB που βασίζεται σε μια δεδομένη στήλη Αναγνωριστικού εγγράφου. Αυτό είναι επίσης αναφέρεται ως μια *Upsert*.

Ανάλυση ροή χρησιμοποιεί αισιόδοξη Upsert προσέγγισης, όπου ενημερώσεις γίνονται μόνο όταν η εισαγωγή αποτυγχάνει λόγω διένεξη Αναγνωριστικών εγγράφων. Αυτής της ενημερωμένης έκδοσης πραγματοποιείται από ανάλυση ροή ως μια ενημερωμένη έκδοση ΚΏΔΙΚΑ, ώστε να δίνει τη δυνατότητα μερικής ενημερώσεις για το έγγραφο, δηλαδή Προσθήκη νέες ιδιότητες ή αντικατάσταση μιας υπάρχουσας ιδιότητας εκτελείται σταδιακά. Σημειώστε ότι οι αλλαγές στις τιμές της Ιδιότητες πίνακα στο το αποτέλεσμα εγγράφου JSON σε ολόκληρη τη συστοιχία γρήγορα αντικατασταθούν, δηλαδή έναν πίνακα δεν είναι συγχώνευση.

## <a name="data-partitioning-in-documentdb"></a>Δημιουργία διαμερισμάτων στο DocumentDB δεδομένων

DocumentDB συλλογές σάς επιτρέπουν να δημιουργήσετε διαμερίσματα τα δεδομένα σας με βάση το ερώτημα και τα μοτίβα επιδόσεων ανάγκες της εφαρμογής σας. Κάθε συλλογή μπορεί να περιέχει έως και 10GB δεδομένων (έως) και αυτήν τη στιγμή δεν υπάρχει τρόπος να περιορίσετε το μέγεθος (ή υπερχείλισης) μιας συλλογής. Για την κλιμάκωση ανάληψη, ανάλυση ροή σάς επιτρέπει να γράφετε σε πολλές συλλογές με δεδομένη πρόθεμα (ανατρέξτε στο θέμα Χρήση λεπτομέρειες παρακάτω). Ανάλυση ροή χρησιμοποιεί τη συνεπή στρατηγική [Επίλυσης Partition κατακερματισμός](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.partitioning.hashpartitionresolver.aspx) με βάση το χρήστη που παρέχονται PartitionKey στήλης για να δημιουργήσετε διαμερίσματα τις εγγραφές εξόδου. Ο αριθμός των συλλογών με το πρόθεμα δεδομένη στιγμή έναρξης της ροής εργασίας χρησιμοποιείται ως το πλήθος των διαμερισμάτων εξόδου και στην οποία η εργασία εγγράφει παράλληλα (συλλογές DocumentDB = διαμερίσματα εξόδου). Για μια μεμονωμένη S3 συλλογή με τεμπέλη δημιουργίας ευρετηρίου κάνοντας εισάγει μόνο, σχετικά με την 0,4 μπορεί να αναμένεται MB/s απόδοσης εγγραφής. Χρήση πολλές συλλογές μπορεί να σας επιτρέπουν να επιτύχετε υψηλότερη μετάδοσης και αύξηση της ικανότητας.

Εάν σκοπεύετε να αυξήσετε το πλήθος διαμερισμάτων στο μέλλον, ίσως χρειαστεί να διακόψετε την εργασία σας, δημιουργήστε διαμερίσματα τα δεδομένα από τις υπάρχουσες συλλογές σε νέες συλλογές και στη συνέχεια, επανεκκινήστε την εργασία ροής αναλυτικών στοιχείων. Περισσότερες λεπτομέρειες για τη χρήση PartitionResolver και εκ νέου δημιουργία διαμερισμάτων μαζί με δείγματα κώδικα, θα συμπεριληφθεί σε μια δημοσίευση παρακολούθησης. Το άρθρο [διαμερισμάτων σε DocumentDB](../articles/documentdb-partition-data.md#developing-a-partitioned-application) παρέχει επίσης λεπτομέρειες σχετικά με αυτό.

## <a name="documentdb-settings-for-json-output"></a>Ρυθμίσεις DocumentDB για JSON εξόδου

Δημιουργία DocumentDB ως το αποτέλεσμα σε ροή ανάλυσης δημιουργεί μια προτροπή για πληροφορίες, όπως φαίνεται παρακάτω. Αυτή η ενότητα παρέχει μια επεξήγηση τον ορισμό ιδιοτήτων.

![οθόνη αποτελέσματος documentdb ροή ανάλυσης](media/stream-analytics-documentdb-output/stream-analytics-documentdb-output.png)  

-   **Ψευδώνυμο εξόδου** – ένα ψευδώνυμο να αναφέρεται σε αυτό το αποτέλεσμα στο ερώτημά σας ASA  
-   **Το όνομα του λογαριασμού** – το όνομα ή το URI του λογαριασμού DocumentDB τελικού σημείου.  
-   Το **Κλειδί λογαριασμού** – το πλήκτρο κοινόχρηστο πρόσβασης για το λογαριασμό DocumentDB.  
-   **Βάση δεδομένων** – DocumentDB το όνομα της βάσης δεδομένων.  
-   **Συλλογή όνομα μοτίβου** – το μοτίβο όνομα συλλογής για τις συλλογές θα χρησιμοποιηθεί. Μπορεί να έχει τη μορφή ονόματος συλλογής τη χρησιμοποιώντας το διακριτικό προαιρετικό {partition}, όπου τα διαμερίσματα Έναρξη από 0. Ακολουθούν έγκυρη εισόδων δείγμα:  
   1\) MyCollection – πρέπει να υπάρχει μια συλλογή με το όνομα "MyCollection".  
   2\) MyCollection {partition}-όπως συλλογές πρέπει να υπάρχει – "MyCollection0", "MyCollection1", "MyCollection2" και ούτω καθεξής.  
-   **Πλήκτρο partition** – το όνομα του πεδίου εξόδου συμβάντα που χρησιμοποιούνται για να ορίσετε το κλειδί για τη δημιουργία διαμερισμάτων εξόδου σε συλλογές. Για μία μόνο συλλογή εξόδου, μπορεί να είναι οποιαδήποτε στήλη αυθαίρετο εξόδου χρησιμοποιείται π.χ. ΑναγνωριστικόΔιαμερίσματος.  
-   **Αναγνωριστικό εγγράφου** – προαιρετικό. Το όνομα του πεδίου εξόδου συμβάντα που χρησιμοποιούνται για να καθορίσετε το πρωτεύον κλειδί των εισαγωγή ή ενημέρωση βασίζονται λειτουργίες.  
