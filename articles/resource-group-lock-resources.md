<properties 
    pageTitle="Κλείδωμα πόρους με τη διαχείριση πόρων | Microsoft Azure" 
    description="Αποτροπή χρηστών από την ενημέρωση ή διαγραφή ορισμένους πόρους με την εφαρμογή ενός περιορισμού για όλους τους χρήστες και τους ρόλους." 
    services="azure-resource-manager" 
    documentationCenter="" 
    authors="tfitzmac" 
    manager="timlt" 
    editor="tysonn"/>

<tags 
    ms.service="azure-resource-manager" 
    ms.workload="multiple" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="08/15/2016" 
    ms.author="tomfitz"/>

# <a name="lock-resources-with-azure-resource-manager"></a>Κλείδωμα πόρους με τη διαχείριση πόρων Azure

Ως διαχειριστής, ίσως χρειαστεί να κλειδώσετε μια συνδρομή, ομάδα πόρων, ή έναν πόρο για να αποτρέψετε άλλους χρήστες στην εταιρεία σας από τη διαγραφή ή την τροποποίηση κρίσιμες πόρους κατά λάθος. Μπορείτε να ορίσετε το επίπεδο κλειδώματος **CanNotDelete** ή **μόνο για ανάγνωση**. 

- **CanNotDelete** σημαίνει εξουσιοδοτημένους χρήστες εξακολουθούν να να διαβάσετε και να τροποποιήσετε έναν πόρο, αλλά δεν μπορούν να διαγράψουν το. 
- **Μόνο για ανάγνωση** σημαίνει εξουσιοδοτημένους χρήστες μπορεί να διαβάσει από έναν πόρο, αλλά δεν μπορούν να το διαγράψετε ή να εκτελέστε τις ενέργειες σε αυτήν. Το δικαίωμα ο πόρος είναι περιορισμένη ρόλο **αναγνώστη** . 

Εφαρμογή **μόνο για ανάγνωση** μπορεί να οδηγήσει σε μη αναμενόμενα αποτελέσματα επειδή ορισμένες λειτουργίες που φαίνεται ανάγνωση λειτουργίες απαιτούν στην πραγματικότητα πρόσθετες ενέργειες. Για παράδειγμα, τοποθετώντας το κλείδωμα **μόνο για ανάγνωση** σε ένα λογαριασμό του χώρου αποθήκευσης αποτρέπει όλους τους χρήστες παραθέτει τα πλήκτρα. Λίστα χειρισμού πλήκτρα λειτουργίας μέσω μιας αίτησης ΔΗΜΟΣΊΕΥΣΗ επειδή τα πλήκτρα που επιστρέφεται είναι διαθέσιμες για λειτουργίες εγγραφής. Για ένα άλλο παράδειγμα, τοποθετώντας το κλείδωμα **μόνο για ανάγνωση** σε έναν πόρο εφαρμογής υπηρεσίας αποτρέπει την Εξερεύνηση Server Visual Studio εμφάνιση αρχείων για τον πόρο, επειδή επικοινωνίας που απαιτεί δικαιώματα εγγραφής.

Σε αντίθεση με έλεγχο πρόσβασης βάσει ρόλων, μπορείτε να χρησιμοποιήσετε κλειδώματα διαχείρισης για την εφαρμογή ενός περιορισμού σε όλους τους χρήστες και τους ρόλους. Για να μάθετε σχετικά με τη ρύθμιση δικαιωμάτων για τους χρήστες και τους ρόλους, ανατρέξτε στο θέμα [Έλεγχος πρόσβασης βάσει ρόλων Azure](./active-directory/role-based-access-control-configure.md).

Όταν εφαρμόζετε ένα κλείδωμα στο γονικό εμβέλεια, όλους τους πόρους θυγατρικό μεταβιβάζεται το ίδιο κλείδωμα. Ακόμα και τους πόρους που προσθέτετε αργότερα μεταβιβάζονται το κλείδωμα από το γονικό στοιχείο. Το πιο περιοριστικό κλείδωμα στο τη μεταβίβαση έχει προτεραιότητα.

## <a name="who-can-create-or-delete-locks-in-your-organization"></a>Ποιος μπορεί να δημιουργήσετε ή να διαγράψετε κλειδωμάτων στον οργανισμό σας

Για να δημιουργήσετε ή να διαγράψετε κλειδωμάτων διαχείρισης, πρέπει να έχετε πρόσβαση σε **Microsoft.Authorization/\* ** ή **Microsoft.Authorization/locks/\* ** ενέργειες. Η ενσωματωμένη ρόλων, μόνο **κάτοχο** και **Διαχειριστή πρόσβασης χρήστη** εκχωρούνται αυτές τις ενέργειες.

## <a name="creating-a-lock-through-the-portal"></a>Δημιουργία ενός κλειδώματος μέσω της πύλης

[AZURE.INCLUDE [resource-manager-lock-resources](../includes/resource-manager-lock-resources.md)]

## <a name="creating-a-lock-in-a-template"></a>Δημιουργία ενός κλειδώματος σε ένα πρότυπο

Το παρακάτω παράδειγμα εμφανίζει ένα πρότυπο που δημιουργεί μια κλειδαριά σε ένα λογαριασμό του χώρου αποθήκευσης. Το λογαριασμό χώρου αποθήκευσης στο οποίο θέλετε να εφαρμόσετε το κλείδωμα παρέχεται ως παράμετρο. Το όνομα του το κλείδωμα δημιουργείται συνδέοντας το όνομα του πόρου με **/Microsoft.Authorization/** και το όνομα του το κλείδωμα, σε αυτό πεζών-κεφαλαίων **myLock**.

Ο τύπος που παρέχονται είναι συγκεκριμένη για τον τύπο πόρου. Για το χώρο αποθήκευσης, ορίστε τον τύπο για να "Microsoft.Storage/storageaccounts/providers/locks".

    {
      "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0",
      "parameters": {
        "lockedResource": {
          "type": "string"
        }
      },
      "resources": [
        {
          "name": "[concat(parameters('lockedResource'), '/Microsoft.Authorization/myLock')]",
          "type": "Microsoft.Storage/storageAccounts/providers/locks",
          "apiVersion": "2015-01-01",
          "properties": {
            "level": "CannotDelete"
          }
        }
      ]
    }

## <a name="creating-a-lock-with-rest-api"></a>Δημιουργία ενός κλειδώματος με REST API

Μπορείτε να κλειδώσετε ανεπτυγμένος πόρους με το [REST API για διαχείριση κλειδωμάτων](https://msdn.microsoft.com/library/azure/mt204563.aspx). Το REST API σάς επιτρέπει να δημιουργείτε και να διαγράψετε κλειδωμάτων και να ανακτήσετε πληροφορίες σχετικά με την υπάρχουσα κλειδωμάτων.

Για να δημιουργήσετε ένα κλείδωμα, εκτελέστε:

    PUT https://management.azure.com/{scope}/providers/Microsoft.Authorization/locks/{lock-name}?api-version={api-version}

Το εύρος θα μπορούσε να είναι μια συνδρομή, ομάδα πόρων ή πόρου. Το όνομα κλειδώματος είναι ό, τι θέλετε να καλέσετε το κλείδωμα. Για την έκδοση api, χρησιμοποιήστε **2015-01-01**.

Στην πρόσκληση σε, περιλαμβάνουν JSON αντικείμενο που καθορίζει τις ιδιότητες για το κλείδωμα.

    {
      "properties": {
        "level": "CanNotDelete",
        "notes": "Optional text notes."
      }
    } 

Για παραδείγματα, ανατρέξτε στο θέμα [REST API για διαχείριση κλειδωμάτων](https://msdn.microsoft.com/library/azure/mt204563.aspx).

## <a name="creating-a-lock-with-azure-powershell"></a>Δημιουργία ενός κλειδώματος με το Azure PowerShell

Μπορείτε να κλειδώσετε ανεπτυγμένος πόρους με το Azure PowerShell χρησιμοποιώντας τη **Δημιουργία AzureRmResourceLock** , όπως φαίνεται στο παρακάτω παράδειγμα.

    New-AzureRmResourceLock -LockLevel CanNotDelete -LockName LockSite -ResourceName examplesite -ResourceType Microsoft.Web/sites -ResourceGroupName exampleresourcegroup

Azure PowerShell παρέχει άλλες εντολές για την εργασία κλειδωμάτων, όπως το **Σύνολο AzureRmResourceLock** για να ενημερώσετε μια κλειδαριά και **Κατάργηση AzureRmResourceLock** για να διαγράψετε μια κλειδαριά.

## <a name="next-steps"></a>Επόμενα βήματα

- Για περισσότερες πληροφορίες σχετικά με την εργασία με κλειδώματα πόρων, δείτε [Κλείδωμα προς τα κάτω σας Azure πόρους](http://blogs.msdn.com/b/cloud_solution_architect/archive/2015/06/18/lock-down-your-azure-resources.aspx)
- Για να μάθετε πληροφορίες για την οργάνωση λογικά τους πόρους σας, ανατρέξτε στο θέμα [Χρήση ετικετών για να οργανώσετε τους πόρους σας](resource-group-using-tags.md)
- Για να αλλάξετε την ομάδα πόρων ενός πόρου που βρίσκεται σε, ανατρέξτε στο θέμα [Μετακίνηση πόρων για νέα ομάδα πόρων](resource-group-move-resources.md)
- Μπορείτε να εφαρμόσετε περιορισμούς και συμβάσεις κατά μήκος τη συνδρομή σας με τις προσαρμοσμένες πολιτικές. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Χρήση της πολιτικής για να διαχειριστείτε τους πόρους και τον έλεγχο της πρόσβασης](resource-manager-policy.md).
