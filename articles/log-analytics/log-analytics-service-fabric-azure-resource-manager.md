<properties
    pageTitle="Βελτιστοποιήστε το περιβάλλον σας με τη λύση ύφασμα υπηρεσίας στο αρχείο καταγραφής ανάλυσης | Microsoft Azure"
    description="Μπορείτε να χρησιμοποιήσετε τη λύση ύφασμα υπηρεσία για την αξιολόγηση του κινδύνου και την εύρυθμη λειτουργία των ύφασμα υπηρεσίας εφαρμογές, υπηρεσίες μικρής κλίμακας, κόμβους και συμπλεγμάτων."
    services="log-analytics"
    documentationCenter=""
    authors="niniikhena"
    manager="jochan"
    editor=""/>

<tags
    ms.service="log-analytics"
    ms.workload="na"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="09/21/2016"
    ms.author="nini"/>



# <a name="service-fabric-solution-in-log-analytics"></a>Λύση ύφασμα υπηρεσίας στο αρχείο καταγραφής ανάλυσης

> [AZURE.SELECTOR]
- [Διαχείριση πόρων](log-analytics-service-fabric-azure-resource-manager.md)
- [PowerShell](log-analytics-service-fabric.md)

Σε αυτό το άρθρο περιγράφει τον τρόπο χρήσης της λύσης ύφασμα υπηρεσίας στο αρχείο καταγραφής ανάλυσης για να προσδιορίσετε και αντιμετώπιση προβλημάτων σε ύφασμα υπηρεσιών συμπλέγματος.

Η λύση ύφασμα υπηρεσίας χρησιμοποιεί Azure διαγνωστικά δεδομένα από σας ΣΠΣ ύφασμα υπηρεσίας, από τη συλλογή αυτών των δεδομένων από τους πίνακές σας Azure WAD. Ανάλυση καταγραφής διαβάζει, στη συνέχεια, υπηρεσία ύφασμα framework συμβάντα, συμπεριλαμβανομένων των **Αξιόπιστη συμβάντα της υπηρεσίας**, **Συμβάντα παράγοντα**, **Λειτουργικές συμβάντων**και **τα συμβάντα ETW προσαρμοσμένη**. Με τον πίνακα εργαλείων λύση, θα μπορείτε να προβάλετε αξιοσημείωτες θέματα και σχετικές συμβάντα στο περιβάλλον σας υφάσματος υπηρεσίας.

Για να ξεκινήσετε με τη λύση, που θα πρέπει να συνδεθείτε το σύμπλεγμά σας υφάσματος υπηρεσίας σε χώρο εργασίας του αρχείου καταγραφής ανάλυσης. Ακολουθούν τρία σενάρια πρέπει να λάβετε υπόψη:

1. Εάν δεν έχετε αναπτύξει το σύμπλεγμά σας ύφασμα υπηρεσίας, χρησιμοποιήστε τα βήματα στην ***Ανάπτυξη ένα σύμπλεγμα ύφασμα υπηρεσίας συνδεδεμένο με ένα χώρο εργασίας του αρχείου καταγραφής ανάλυσης*** να αναπτύξετε ένα νέο σύμπλεγμα και να το έχει ρυθμιστεί για την αναφορά στο αρχείο καταγραφής ανάλυσης.

2. Εάν χρειάζεστε για τη συλλογή μετρητών επιδόσεων από το hosts για να χρησιμοποιήσετε άλλες λύσεις OMS όπως ασφαλείας σε ύφασμα συμπλέγματος υπηρεσίας, ακολουθήστε τα βήματα στο ***Ανάπτυξη ένα σύμπλεγμα ύφασμα υπηρεσίας συνδεδεμένο με ένα χώρο εργασίας OMS με επέκταση Εικονική εγκατεστημένο.***

3. Εάν έχετε ήδη αναπτύξει σας ύφασμα υπηρεσιών συμπλέγματος και θέλετε να συνδέστε τη με ανάλυση καταγραφής, ακολουθήστε τα βήματα στο ***Προσθήκη έναν υπάρχοντα λογαριασμό του χώρου αποθήκευσης στο αρχείο καταγραφής ανάλυσης.***


##<a name="deploy-a-service-fabric-cluster-connected-to-a-log-analytics-workspace"></a>Για να αναπτύξετε ένα σύμπλεγμα ύφασμα υπηρεσίας συνδεδεμένο με ένα χώρο εργασίας του αρχείου καταγραφής ανάλυσης.
Αυτό το πρότυπο κάνει τα εξής:


1. Ανάπτυξη ένα σύμπλεγμα Azure Service υφάσματος ήδη συνδεδεμένοι σε ένα χώρο εργασίας του αρχείου καταγραφής ανάλυσης. Έχετε την επιλογή για να δημιουργήσετε ένα νέο χώρο εργασίας κατά την ανάπτυξη του προτύπου ή εισαγάγετε το όνομα του ήδη υπάρχοντα χώρο εργασίας καταγραφής ανάλυσης.
2. Προσθέτει το λογαριασμό διαγνωστικών χώρου αποθήκευσης στο χώρο εργασίας του αρχείου καταγραφής ανάλυσης.
3. Επιτρέπει τη λύση ύφασμα υπηρεσίας στο χώρο εργασίας σας καταγραφής ανάλυσης.

[![Ανάπτυξη Azure](./media/log-analytics-service-fabric/deploybutton.png)](https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fazure%2Fazure-quickstart-templates%2Fmaster%2Fservice-fabric-oms%2F%2Fazuredeploy.json)


Αφού επιλέξετε το κουμπί "ανάπτυξη" παραπάνω, θα φτάνουν στην πύλη του Azure με παραμέτρους για να επεξεργαστείτε. Φροντίστε να δημιουργήσετε μια νέα ομάδα πόρων, εάν εισαγάγετε ένα νέο όνομα αρχείου καταγραφής αναλυτικών στοιχείων στο χώρο εργασίας: ![ύφασμα υπηρεσίας](./media/log-analytics-service-fabric/2.png)

![Υπηρεσία ύφασμα](./media/log-analytics-service-fabric/3.png)

Αποδεχτείτε τους όρους της νομικές και πατήστε "Δημιουργία" για να ξεκινήσετε την ανάπτυξη. Μόλις ολοκληρωθεί η ανάπτυξη, θα πρέπει να δείτε το νέο χώρο εργασίας και σύμπλεγμα δημιουργήθηκε και το WADServiceFabric * συμβάντος, WADWindowsEventLogs και WADETWEvent πίνακες που έχουν προστεθεί:

![Υπηρεσία ύφασμα](./media/log-analytics-service-fabric/4.png)

##<a name="deploy-a-service-fabric-cluster-connected-to-an-oms-workspace-with-vm-extension-installed"></a>Για να αναπτύξετε ένα σύμπλεγμα ύφασμα υπηρεσίας συνδεδεμένο με ένα χώρο εργασίας OMS με επέκταση Εικονική εγκατεστημένο.
Αυτό το πρότυπο κάνει τα εξής:

1. Ανάπτυξη ένα σύμπλεγμα Azure Service ύφασμα ήδη συνδεδεμένοι σε ένα χώρο εργασίας του αρχείου καταγραφής ανάλυσης. Μπορείτε να δημιουργήσετε ένα νέο χώρο εργασίας ή να χρησιμοποιήσετε ένα υπάρχον.
2. Προσθέτει τους λογαριασμούς διαγνωστικών χώρου αποθήκευσης στο χώρο εργασίας του αρχείου καταγραφής ανάλυσης.
3. Επιτρέπει τη λύση ύφασμα υπηρεσίας στο χώρο εργασίας του αρχείου καταγραφής ανάλυσης.
4. Εγκαθιστά την επέκταση παράγοντας MMA σε κάθε κλίμακα Εικονική ρύθμιση στην υπηρεσία ύφασμα συμπλέγματος. Με εγκαταστήσει τον παράγοντα MMA, θα μπορείτε να προβάλετε μετρικών απόδοσης σχετικά με το κόμβους.


[![Ανάπτυξη Azure](./media/log-analytics-service-fabric/deploybutton.png)](https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fazure%2Fazure-quickstart-templates%2Fmaster%2Fservice-fabric-vmss-oms%2F%2Fazuredeploy.json)


Ακολουθώντας τα ίδια βήματα παραπάνω, εισαγάγετε τις απαραίτητες παραμέτρους και ξεκινήσετε μια ανάπτυξη. Ξανά, θα πρέπει να βλέπετε το νέο χώρο εργασίας, σύμπλεγμα και WAD πίνακες που έχουν δημιουργηθεί όλα:

![Υπηρεσία ύφασμα](./media/log-analytics-service-fabric/5.png)

###<a name="viewing-performance-data"></a>Προβολή δεδομένων για τις επιδόσεις

Για την προβολή δεδομένων επιδόσεων από κόμβους σας:
</br>
- Εκκινήστε το χώρο εργασίας ανάλυση καταγραφής από την πύλη του Azure.

![Υπηρεσία ύφασμα](./media/log-analytics-service-fabric/6.png)

- Μεταβείτε στις ρυθμίσεις στο αριστερό τμήμα του παραθύρου και επιλέξτε δεδομένα >> μετρητών επιδόσεων των Windows >> "Προσθήκη μετρητών επιλεγμένο επιδόσεων": ![ύφασμα υπηρεσίας](./media/log-analytics-service-fabric/7.png)

- Στο αρχείο καταγραφής αναζήτηση, χρησιμοποιήστε τα ακόλουθα ερωτήματα για να του delve σε βασικές μετρικά σχετικά με το κόμβους:
</br>

    μια. Συγκρίνουν η χρήση της CPU average σε όλους τους κόμβους σας την τελευταία μία ώρα για να δείτε ποια κόμβους αντιμετωπίζουν προβλήματα και σε τι χρονικό διάστημα έναν κόμβο είχατε ένα Συλλέκτη:

    ``` Type=Perf ObjectName=Processor CounterName="% Processor Time"|measure avg(CounterValue) by Computer Interval 1HOUR. ```

    ![Υπηρεσία ύφασμα](./media/log-analytics-service-fabric/10.png)


    β. Προβολή παρόμοια γραφήματα γραμμών για τη διαθέσιμη μνήμη σε κάθε κόμβο με αυτό το ερώτημα:

    ```Type=Perf ObjectName=Memory CounterName="Available MBytes Memory" | measure avg(CounterValue) by Computer Interval 1HOUR.```

    Για να προβάλετε μια λίστα με όλους τους κόμβους σας, που εμφανίζει την ακριβή τιμή μέσος όρος για διαθέσιμα MB για κάθε κόμβο, χρησιμοποιήστε αυτό το ερώτημα:

    ```Type=Perf (ObjectName=Memory) (CounterName="Available MBytes") | measure avg(CounterValue) by Computer ```

    ![Υπηρεσία ύφασμα](./media/log-analytics-service-fabric/11.png)


    c. Στην περίπτωση που θέλετε να κάνετε Διερεύνηση σε έναν συγκεκριμένο κόμβο, εξετάζοντας τις ωριαία μέσος όρος, ελάχιστο, μέγιστο και 75 εκατοστημόριο της CPU, είστε σε θέση να το κάνετε αυτό με τη χρήση αυτού του ερωτήματος (αντικαταστήστε το πεδίο υπολογιστή):

    ```Type=Perf CounterName="% Processor Time" InstanceName=_Total Computer="BaconDC01.BaconLand.com"| measure min(CounterValue), avg(CounterValue), percentile75(CounterValue), max(CounterValue) by Computer Interval 1HOUR```

    ![Υπηρεσία ύφασμα](./media/log-analytics-service-fabric/12.png)

    Διαβάστε περισσότερες πληροφορίες σχετικά με τις μετρήσεις επιδόσεων στο αρχείο καταγραφής ανάλυσης [εδώ]. (https://blogs.technet.microsoft.com/msoms/tag/metrics/)


##<a name="adding-an-existing-storage-account-to-log-analytics"></a>Προσθήκη έναν υπάρχοντα λογαριασμό του χώρου αποθήκευσης στο αρχείο καταγραφής ανάλυσης

Αυτό το πρότυπο προσθέτει απλώς σας υπαρχόντων λογαριασμών χώρου αποθήκευσης σε ένα νέο ή υπάρχοντα χώρο εργασίας καταγραφής αναλυτικών στοιχείων.
</br>

[![Ανάπτυξη Azure](./media/log-analytics-service-fabric/deploybutton.png)](https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Foms-existing-storage-account%2Fazuredeploy.json)

>[AZURE.NOTE] Κατά την επιλογή μιας ομάδας πόρων, αν εργάζεστε με ένα ήδη υπάρχον χώρο εργασίας του αρχείου καταγραφής ανάλυσης, επιλέξτε "Χρήση υπάρχουσας" και κάντε αναζήτηση για την ομάδα των πόρων που περιέχει το χώρο εργασίας OMS. Δημιουργία ενός νέου εάν μία διαφορετικά.
![Υπηρεσία ύφασμα](./media/log-analytics-service-fabric/8.png)

Μετά την ανάπτυξη αυτό το πρότυπο, θα μπορείτε να δείτε το λογαριασμό χώρου αποθήκευσης συνδεδεμένοι στο χώρο εργασίας σας καταγραφής ανάλυσης. Σε αυτήν την παρουσία, έχω προσθέσει ένα λογαριασμό περισσότερες χώρου αποθήκευσης στο χώρο εργασίας Exchange που δημιουργήθηκε παραπάνω.
![Υπηρεσία ύφασμα](./media/log-analytics-service-fabric/9.png)

## <a name="view-service-fabric-events"></a>Προβολή ύφασμα υπηρεσία συμβάντων

Όταν το αναπτύξεις έχουν ολοκληρωθεί και έχει ενεργοποιηθεί η λύση υφάσματος υπηρεσίας στο χώρο εργασίας σας, επιλέξτε το πλακίδιο **Υφάσματος υπηρεσίας** στην πύλη του αρχείου καταγραφής ανάλυσης για την εκκίνηση του πίνακα εργαλείων υφάσματος υπηρεσίας. Πίνακας εργαλείων περιλαμβάνει τις στήλες στον παρακάτω πίνακα. Κάθε στήλη παραθέτει τα συμβάντα επάνω δέκα βάσει πλήθους με κριτήρια αυτής της στήλης για το καθορισμένο χρονικό διάστημα. Μπορείτε να εκτελέσετε μια αναζήτηση καταγραφής που παρέχει ολόκληρη τη λίστα, κάνοντας κλικ στην επιλογή **δείτε όλες** στο κάτω δεξιό μέρος κάθε στήλη ή κάνοντας κλικ στην κεφαλίδα της στήλης.

| **Υπηρεσία υφάσματος συμβάντος** | **Περιγραφή** |
| --- | --- |
| Αξιοσημείωτες θέματα | Μια προβολή των θεμάτων όπως RunAsyncFailures RunAsynCancellations και λίστες κόμβο. |
| Λειτουργικές συμβάντα | Αξιοσημείωτες λειτουργικές συμβάντα όπως αναβάθμισης εφαρμογής και αναπτύξεις. |
| Αξιόπιστη υπηρεσία συμβάντα | Αξιοσημείωτες αξιόπιστη υπηρεσία συμβάντα όπως ένα Runasyncinvocations. |
| Συμβάντα παράγοντα | Αξιοσημείωτες παράγοντα συμβάντα που δημιουργούνται από τους-των υπηρεσιών σας, όπως εξαιρέσεις που ανακύπτουν από μια μέθοδο παράγοντα, παράγοντα ενεργοποίησης και deactivations και ούτω καθεξής. |
| Συμβάντα εφαρμογής | Όλα προσαρμοσμένα ETW τα συμβάντα που δημιουργούνται από τις εφαρμογές σας. |

![Υπηρεσία ύφασμα πίνακα εργαλείων](./media/log-analytics-service-fabric/sf3.png)

![Υπηρεσία ύφασμα πίνακα εργαλείων](./media/log-analytics-service-fabric/sf4.png)


Ο παρακάτω πίνακας εμφανίζει μεθόδους συλλογής δεδομένων και άλλες λεπτομέρειες σχετικά με το πώς συλλέγονται δεδομένα για ύφασμα υπηρεσίας.

| πλατφόρμα | Άμεση παράγοντα | Παράγοντας SCOM | Azure χώρου αποθήκευσης | SCOM απαιτείται; | SCOM παράγοντας δεδομένων που αποστέλλονται μέσω ομάδας διαχείρισης | συχνότητα συλλογής |
|---|---|---|---|---|---|---|
|Windows|![Όχι](./media/log-analytics-malware/oms-bullet-red.png)|![Όχι](./media/log-analytics-malware/oms-bullet-red.png)| ![Ναι](./media/log-analytics-malware/oms-bullet-green.png)|            ![Όχι](./media/log-analytics-malware/oms-bullet-red.png)|![Όχι](./media/log-analytics-malware/oms-bullet-red.png)|10 λεπτά |


>[AZURE.NOTE] Μπορείτε να αλλάξετε την εμβέλεια από αυτά τα συμβάντα στη λύση ύφασμα υπηρεσίας κάνοντας κλικ στην επιλογή **δεδομένων με βάση τελευταίες 7 ημέρες** στο επάνω μέρος του πίνακα εργαλείων. Μπορείτε επίσης να εμφανίσετε τα συμβάντα που δημιουργούνται από τις τελευταίες 7 ημέρες, 1 ημέρα ή έξι ώρες. Εναλλακτικά, μπορείτε να επιλέξετε **προσαρμοσμένο** για να καθορίσετε μια προσαρμοσμένη περιοχή ημερομηνιών.


## <a name="next-steps"></a>Επόμενα βήματα

- Χρησιμοποιήστε [Αναζητήσεις καταγραφής στο αρχείο καταγραφής ανάλυσης](log-analytics-log-searches.md) για να δείτε λεπτομερή δεδομένα συμβάντων ύφασμα υπηρεσίας.
