<properties 
   pageTitle="Προσαρμοσμένη συνδέεται στο αρχείο καταγραφής ανάλυσης | Microsoft Azure"
   description="Ανάλυση καταγραφής μπορεί να συλλέξει συμβάντα από αρχεία κειμένου σε υπολογιστές των Windows και Linux.  Σε αυτό το άρθρο περιγράφει τον τρόπο για να ορίσετε ένα νέο προσαρμοσμένο αρχείο καταγραφής και λεπτομέρειες για τις εγγραφές που δημιουργούν στο αποθετήριο OMS."
   services="log-analytics"
   documentationCenter=""
   authors="bwren"
   manager="jwhit"
   editor="tysonn" />
<tags 
   ms.service="log-analytics"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="10/18/2016"
   ms.author="bwren" />

# <a name="custom-logs-in-log-analytics"></a>Προσαρμοσμένα αρχεία καταγραφής στο αρχείο καταγραφής ανάλυσης

Το αρχείο προέλευσης δεδομένων προσαρμοσμένα αρχεία καταγραφής στο αρχείο καταγραφής ανάλυσης σάς επιτρέπει να συλλέξετε συμβάντα από αρχεία κειμένου σε υπολογιστές των Windows και Linux. Πολλές εφαρμογές καταγραφή πληροφοριών σε αρχεία κειμένου αντί για το τυπικό καταγραφής υπηρεσίες, όπως αρχείο καταγραφής συμβάντων των Windows ή Syslog.  Μόλις που συλλέγονται, μπορείτε να ανάλυσης κάθε εγγραφή στο αρχείο καταγραφής σε μεμονωμένα πεδία χρησιμοποιώντας τη δυνατότητα [Προσαρμοσμένα πεδία](log-analytics-custom-fields.md) του αρχείου καταγραφής ανάλυσης.

![Συλλογή προσαρμοσμένων αρχείων καταγραφής](media/log-analytics-data-sources-custom-logs/overview.png)

Τα αρχεία καταγραφής που συλλέγονται πρέπει να συμφωνεί με τα ακόλουθα κριτήρια.

- Το αρχείο καταγραφής πρέπει να έχετε μία καταχώρηση ανά γραμμή ή να χρησιμοποιήσετε μια χρονική σήμανση που ταιριάζουν με μία από τις παρακάτω μορφές κατά την έναρξη της κάθε καταχώρηση.

    HH:MM:SS ΕΕΕΕ-MM-DD <br>
  Μ/ΕΕΕΕ ΩΩ: ΛΛ: ΔΔ ΠΜ/ΜΜ <br>
  ΔΕΥ ηη, εεεε HH:MM:SS
    
- Το αρχείο καταγραφής δεν πρέπει να κυκλική ενημερώσεις όπου το αρχείο αντικαθίσταται με νέες εγγραφές. 

## <a name="defining-a-custom-log"></a>Ορισμός ενός προσαρμοσμένου αρχείου καταγραφής

Χρησιμοποιήστε την ακόλουθη διαδικασία για να ορίσετε ένα προσαρμοσμένο αρχείο καταγραφής.  Κάντε κύλιση στο τέλος αυτού του άρθρου για αναλυτικές οδηγίες από ένα δείγμα Προσθήκη προσαρμοσμένου αρχείου καταγραφής.

### <a name="step-1-open-the-custom-log-wizard"></a>Βήμα 1. Άνοιγμα του οδηγού προσαρμοσμένου αρχείου καταγραφής

Το προσαρμοσμένο Οδηγός καταγραφής εκτελείται στην πύλη του OMS και σας επιτρέπει να ορίσετε ένα νέο προσαρμοσμένο αρχείο καταγραφής για τη συλλογή.

1.  Στην πύλη του OMS, μεταβείτε στις **Ρυθμίσεις**.
2.  Κάντε κλικ σε **δεδομένα** και, στη συνέχεια, **προσαρμοσμένα αρχεία καταγραφής**.
3.  Από προεπιλογή, όλες οι αλλαγές ρύθμισης παραμέτρων προωθούνται αυτόματα σε όλα παράγοντες.  Για Linux παράγοντες, αποστέλλεται ένα αρχείο ρύθμισης παραμέτρων της συλλογής δεδομένων Fluentd.  Εάν θέλετε να τροποποιήσετε αυτό το αρχείο με μη αυτόματο τρόπο σε κάθε παράγοντα Linux, στη συνέχεια, καταργήστε την επιλογή στο πλαίσιο *εφαρμογή κάτω από τη ρύθμιση παραμέτρων για να μου μηχανές Linux*.
4.  Κάντε κλικ στην επιλογή **Add +** για να ανοίξετε τον Οδηγό καταγραφής προσαρμοσμένη.

### <a name="step-2-upload-and-parse-a-sample-log"></a>Βήμα 2. Αποστολή και ανάλυση ένα δείγμα αρχείου καταγραφής

Ξεκινήστε με την αποστολή ενός δείγματος του προσαρμοσμένου αρχείου καταγραφής.  Ο οδηγός θα ανάλυση και να εμφανίσετε τις καταχωρήσεις σε αυτό το αρχείο για να επικυρώσετε.  Ανάλυση καταγραφής θα χρησιμοποιήσει το διαχωριστικό που καθορίζετε να προσδιορίσετε κάθε εγγραφή.

**Νέα γραμμή** είναι ο προεπιλεγμένος οριοθέτης και χρησιμοποιείται για τα αρχεία καταγραφής που έχουν μία καταχώρηση ανά γραμμή.  Εάν η γραμμή ξεκινά με μια ημερομηνία και ώρα σε μία από τις διαθέσιμες μορφές, στη συνέχεια, μπορείτε να καθορίσετε οριοθέτη **χρονικής σήμανσης** που υποστηρίζει καταχωρήσεις που εκτείνονται σε περισσότερες από μία γραμμή. 

Εάν χρησιμοποιείται οριοθέτη χρονικής σήμανσης, στη συνέχεια, την ιδιότητα TimeGenerated από κάθε εγγραφή που είναι αποθηκευμένα σε OMS θα συμπληρωθεί με την ημερομηνία/ώρα που καθορίζεται για αυτή την καταχώρηση στο αρχείο καταγραφής.  Εάν χρησιμοποιείται μια νέα γραμμή οριοθέτη, στη συνέχεια, TimeGenerated συμπληρώνεται με ημερομηνία και την ώρα που καταγραφής αναλυτικών στοιχείων που έχουν συλλεχθεί την καταχώρηση. 

>[AZURE.NOTE]Ανάλυση καταγραφής χειρίζεται αυτήν τη στιγμή την ημερομηνία/ώρα που συλλέγονται από ένα αρχείο καταγραφής χρησιμοποιώντας οριοθέτη χρονικής σήμανσης ως UTC.  Αυτό θα σύντομα αλλάξει για να χρησιμοποιήσετε τη ζώνη ώρας στον αντιπρόσωπο. 
 
1.  Κάντε κλικ στο κουμπί **Αναζήτηση** και αναζητήστε ένα δείγμα αρχείου.  Σημειώστε ότι αυτό μπορεί να κουμπί ενδέχεται να ονομάζεται **Επιλογή αρχείου** σε ορισμένα προγράμματα περιήγησης.
2.  Κάντε κλικ στο κουμπί **Επόμενο**. 
3.  Ο Οδηγός καταγραφής προσαρμοσμένη θα αποστείλετε το αρχείο και παράθεση σε λίστα τις εγγραφές που προσδιορίζει.
4.  Αλλαγή του οριοθέτη που χρησιμοποιείται για να προσδιορίσετε μια νέα εγγραφή και επιλέξτε το διαχωριστικό που προσδιορίζει καλύτερα τις εγγραφές στο αρχείο καταγραφής σας.
5.  Κάντε κλικ στο κουμπί **Επόμενο**.

### <a name="step-3-add-log-collection-paths"></a>Βήμα 3. Προσθήκη αρχείου καταγραφής συλλογής διαδρομές

Πρέπει να ορίσετε μία ή περισσότερες διαδρομές σε τον παράγοντα όπου το να εντοπίσετε το αρχείο καταγραφής της προσαρμοσμένης.  Μπορείτε είτε να παράσχετε μια συγκεκριμένη διαδρομή και ένα όνομα για το αρχείο καταγραφής ή μπορείτε να καθορίσετε μια διαδρομή με ένα χαρακτήρα μπαλαντέρ για το όνομα.  Αυτό υποστηρίζει εφαρμογές που δημιουργείτε ένα νέο αρχείο κάθε ημέρα ή όταν ένα αρχείο φτάσει σε ένα συγκεκριμένο μέγεθος.  Μπορείτε επίσης να δώσετε πολλές διαδρομές για ένα μεμονωμένο αρχείο καταγραφής.

Για παράδειγμα, μια εφαρμογή μπορεί να δημιουργήσετε ένα αρχείο καταγραφής κάθε ημέρα με την ημερομηνία που συμπεριλαμβάνεται στο όνομα όπως log20100316.txt. Μπορεί να είναι ένα μοτίβο για ένα αρχείο καταγραφής *καταγραφής\*.txt* που θα ισχύουν για οποιοδήποτε αρχείο καταγραφής μετά την εφαρμογή ονομασία συνδυασμού.

Ο παρακάτω πίνακας παρέχει παραδείγματα μοτίβων έγκυρη για να καθορίσετε διαφορετικό αρχείο καταγραφής αρχεία. 

| Περιγραφή | Διαδρομή |
|:--|:--|
| Όλα τα αρχεία στο *C:\Logs* με επέκταση .txt στον παράγοντα Windows | C:\Logs\\\*.txt |
| Όλα τα αρχεία *C:\Logs* με όνομα ξεκινώντας με το αρχείο καταγραφής και επέκταση .txt στον παράγοντα Windows | C:\Logs\log\*.txt |
| Όλα τα αρχεία */var/log/audit* με επέκταση .txt σε Linux παράγοντα | /VAR/log/audit/*.txt |
| Όλα τα αρχεία */var/log/audit* με όνομα ξεκινώντας με το αρχείο καταγραφής και επέκταση .txt σε Linux παράγοντα | /VAR/log/audit/log\*.txt |
  

1.  Επιλέξτε Windows ή Linux για να καθορίσετε ποια μορφή διαδρομή που προσθέτετε.
2.  Πληκτρολογήστε τη διαδρομή και κάντε κλικ στην επιλογή το **+** κουμπί.
3.  Επαναλάβετε τη διαδικασία για κάθε επιπλέον διαδρομές.

### <a name="step-4-provide-a-name-and-description-for-the-log"></a>Βήμα 4. Δώστε ένα όνομα και μια περιγραφή για το αρχείο καταγραφής

Το όνομα που καθορίζετε θα χρησιμοποιηθεί για τον τύπο αρχείου καταγραφής, όπως περιγράφεται παραπάνω.  Αυτό θα πάντα τελειώνει με _CL για τη διακρίνετε ως ένα προσαρμοσμένο αρχείο καταγραφής.

1.  Πληκτρολογήστε ένα όνομα για το αρχείο καταγραφής.  Το ** \_Εκατοστά** επίθημα παρέχεται αυτόματα.
2.  Προσθέστε μια προαιρετική **Περιγραφή**.
3.  Κάντε κλικ στο κουμπί **Επόμενο** για να αποθηκεύσετε τον ορισμό της προσαρμοσμένης καταγραφής.

### <a name="step-5-validate-that-the-custom-logs-are-being-collected"></a>Βήμα 5. Επικυρώστε ότι που συλλέγονται τα προσαρμοσμένα αρχεία καταγραφής
Το ενδέχεται να χρειαστεί έως μία ώρα για την αρχική δεδομένων από ένα νέο προσαρμοσμένο αρχείο καταγραφής να εμφανίζεται στο αρχείο καταγραφής ανάλυσης.  Θα ξεκινήσει τη συλλογή καταχωρήσεων από τα αρχεία καταγραφής βρίσκονται στη διαδρομή που καθορίσατε από το σημείο που ορίζονται από το προσαρμοσμένο αρχείο καταγραφής.  Δεν θα διατηρήσει τις καταχωρήσεις που έχετε αποστείλει κατά τη δημιουργία προσαρμοσμένου αρχείου καταγραφής, αλλά αυτό θα συλλέγει ήδη υπάρχουσες καταχωρήσεις στα αρχεία καταγραφής που εντοπίζει.

Μόλις ανάλυση καταγραφής ξεκινά τη συλλογή από το προσαρμοσμένο αρχείο καταγραφής, τις εγγραφές θα είναι διαθέσιμη μια αναζήτηση αρχείου καταγραφής.  Χρησιμοποιήστε το όνομα που έχετε δώσει το αρχείο καταγραφής της προσαρμοσμένης ως **τύπο** στο ερώτημά σας.

>[AZURE.NOTE] Εάν η ιδιότητα RawData λείπει από την αναζήτηση, ίσως χρειαστεί να κλείσετε και ανοίξετε ξανά το πρόγραμμα περιήγησης.

### <a name="step-6-parse-the-custom-log-entries"></a>Βήμα 6. Ανάλυση τις προσαρμοσμένες εγγραφές

Η εγγραφή ολόκληρο το αρχείο καταγραφής θα αποθηκευτούν σε μια μεμονωμένη ιδιότητα που ονομάζεται **RawData**.  Που πιθανότατα θα θέλετε να διαχωρίσετε τα διάφορα τμήματα πληροφοριών σε κάθε καταχώρηση σε μεμονωμένες ιδιότητες που είναι αποθηκευμένα στην εγγραφή.  Μπορείτε να κάνετε αυτήν τη δυνατότητα [Προσαρμοσμένα πεδία](log-analytics-custom-fields.md) του αρχείου καταγραφής αναλυτικών στοιχείων χρήσης.

Λεπτομερείς οδηγίες για την ανάλυση την καταχώρηση προσαρμοσμένου αρχείου καταγραφής δεν παρέχονται εδώ.  Ανατρέξτε στην τεκμηρίωση του [Προσαρμοσμένων πεδίων](log-analytics-custom-fields.md) για αυτές τις πληροφορίες.

## <a name="disabling-a-custom-log"></a>Απενεργοποίηση ενός προσαρμοσμένου αρχείου καταγραφής

Δεν μπορείτε να καταργήσετε έναν ορισμό προσαρμοσμένου αρχείου καταγραφής, όταν έχει δημιουργηθεί, αλλά μπορείτε να τον απενεργοποιήσετε καταργώντας όλες τις διαδρομές συλλογής.

1.  Στην πύλη του OMS, μεταβείτε στις **Ρυθμίσεις**.
2.  Κάντε κλικ σε **δεδομένα** και, στη συνέχεια, **προσαρμοσμένα αρχεία καταγραφής**.
3.  Κάντε κλικ στην επιλογή **Λεπτομέρειες** δίπλα στον ορισμό προσαρμοσμένου αρχείου καταγραφής για να απενεργοποιήσετε.
4.  Κατάργηση κάθε μία από τις διαδρομές συλλογής για τον ορισμό του προσαρμοσμένου αρχείου καταγραφής.


## <a name="data-collection"></a>Συλλογή δεδομένων

Ανάλυση καταγραφής θα συλλέγει νέες εγγραφές από κάθε προσαρμοσμένη καταγραφής περίπου κάθε 5 λεπτά.  Ο παράγοντας θα καταγράψει τη θέση σε κάθε αρχείο καταγραφής που που συλλέγει από.  Αν ο παράγοντας αποσυνδεθεί για μια χρονική περίοδο, στη συνέχεια, ανάλυση καταγραφής θα συλλέγει καταχωρήσεις από όπου το τελευταίο σταματήσατε, ακόμα και αν έχουν δημιουργηθεί αυτές τις καταχωρήσεις, ενώ ο παράγοντας ήταν χωρίς σύνδεση.

Όλα τα περιεχόμενα της εγγραφής είναι γραμμένες σε μία μόνο ιδιότητα που ονομάζεται **RawData**.  Μπορείτε να την ανάλυση σε πολλές ιδιότητες που μπορούν να αναλυθούν και να γίνει αναζήτηση ξεχωριστά, καθορίζοντας [Τα προσαρμοσμένα πεδία](log-analytics-custom-fields.md) αφού δημιουργήσετε το προσαρμοσμένο αρχείο καταγραφής.


## <a name="custom-log-record-properties"></a>Ιδιότητες εγγραφής προσαρμοσμένου αρχείου καταγραφής

Προσαρμοσμένες εγγραφές έχουν έναν τύπο με το όνομα του αρχείου καταγραφής που παρέχετε και τις ιδιότητες στον παρακάτω πίνακα.

| Ιδιότητα | Περιγραφή |
|:--|:--|
| TimeGenerated | Ημερομηνία και ώρα που έχουν συλλεχθεί την εγγραφή από αρχείο καταγραφής ανάλυσης.  Εάν το αρχείο καταγραφής χρησιμοποιεί οριοθέτη βάσει χρόνου, στη συνέχεια, αυτό είναι ο χρόνος που συλλέγονται από την καταχώρηση. |
| SourceSystem  | Τύπος παράγοντας την εγγραφή έχει συγκεντρώσει από. <br> Σύνδεση OpsManager – παράγοντα Windows, είτε απευθείας ή SCOM <br> Linux – όλοι οι παράγοντες Linux  |
| RawData             | Η εγγραφή που έχουν συλλεχθεί πλήρους κειμένου. |
| ManagementGroupName | Όνομα της ομάδας διαχείρισης για SCOM παράγοντες.  Για άλλες παράγοντες, αυτή είναι AOI -\<Αναγνωριστικό χώρου εργασίας\> |


## <a name="log-searches-with-custom-log-records"></a>Αρχείο καταγραφής αναζητήσεις με τις εγγραφές προσαρμοσμένου αρχείου καταγραφής

Εγγραφές από προσαρμοσμένα αρχεία καταγραφής αποθηκεύονται στο αποθετήριο OMS όπως εγγραφές από οποιοδήποτε αρχείο προέλευσης δεδομένων.  Θα έχουν έναν τύπο που ταιριάζουν με το όνομα που παρέχετε όταν ορίζετε το αρχείο καταγραφής, ώστε να μπορείτε να χρησιμοποιήσετε την ιδιότητα τύπου στην αναζήτησή σας για την ανάκτηση εγγραφών που συλλέγονται από ένα συγκεκριμένο αρχείο καταγραφής.

Ο παρακάτω πίνακας παρέχει διαφορετικές παραδείγματα αναζητήσεων καταγραφής που ανάκτηση εγγραφών από προσαρμοσμένα αρχεία καταγραφής.

| Ερώτημα | Περιγραφή |
|:--|:--|
| Τύπος = MyApp_CL | Όλα τα συμβάντα από ένα προσαρμοσμένο συνδεθείτε με όνομα MyApp_CL. |
| Τύπος = MyApp_CL Severity_CF = σφάλματος | Όλα τα συμβάντα από ένα προσαρμοσμένο αρχείο καταγραφής που ονομάζεται MyApp_CL με μια τιμή *σφάλματος* σε ένα προσαρμοσμένο πεδίο με το όνομα *Severity_CF*. |




## <a name="sample-walkthrough-of-adding-a-custom-log"></a>Δείγμα αναλυτικές οδηγίες Προσθήκη προσαρμοσμένου αρχείου καταγραφής

Ενότητα που ακολουθεί παρουσιάζει ένα παράδειγμα για τη δημιουργία ενός προσαρμοσμένου αρχείου καταγραφής.  Το δείγμα αρχείου καταγραφής που συλλέγονται έχει μία καταχώρηση σε κάθε γραμμή, ξεκινώντας από μια ημερομηνία και ώρα και, στη συνέχεια, με κόμμα οριοθετημένα πεδία για κώδικα, κατάσταση και το μήνυμα.  Περισσότερες από μία εγγραφές του δείγματος εμφανίζονται παρακάτω.

    2016-03-10 01:34:36 207,Success,Client 05a26a97-272a-4bc9-8f64-269d154b0e39 connected
    2016-03-10 01:33:33 208,Warning,Client ec53d95c-1c88-41ae-8174-92104212de5d disconnected
    2016-03-10 01:35:44 209,Success,Transaction 10d65890-b003-48f8-9cfc-9c74b51189c8 succeeded
    2016-03-10 01:38:22 302,Error,Application could not connect to database
    2016-03-10 01:31:34 303,Error,Application lost connection to database

### <a name="upload-and-parse-a-sample-log"></a>Αποστολή και ανάλυση ένα δείγμα αρχείου καταγραφής

Θα σας παρέχουν ένα από τα αρχεία καταγραφής και να δείτε τα συμβάντα που θα τη συλλογή.  Σε αυτήν την περίπτωση νέα γραμμή είναι αρκετό οριοθέτη.  Εάν μία καταχώρηση στο αρχείο καταγραφής μπορεί να εκτείνεται σε πολλές γραμμές όμως, στη συνέχεια, οριοθέτη χρονικής σήμανσης, θα πρέπει να χρησιμοποιηθεί.

![Αποστολή και ανάλυση ένα δείγμα αρχείου καταγραφής](media/log-analytics-data-sources-custom-logs/delimiter.png)

### <a name="add-log-collection-paths"></a>Προσθήκη αρχείου καταγραφής συλλογής διαδρομές

Τα αρχεία καταγραφής θα βρίσκεται στο *C:\MyApp\Logs*.  Ένα νέο αρχείο θα δημιουργηθεί κάθε ημέρα με όνομα που περιλαμβάνει την ημερομηνία στο το μοτίβο *appYYYYMMDD.log*.  Ένα μοτίβο επαρκή για αυτό το αρχείο καταγραφής θα ήταν *C:\MyApp\Logs\\\*καταγραφής*.

![Διαδρομή αρχείου καταγραφής συλλογής](media/log-analytics-data-sources-custom-logs/collection-path.png)

### <a name="provide-a-name-and-description-for-the-log"></a>Δώστε ένα όνομα και μια περιγραφή για το αρχείο καταγραφής

Χρησιμοποιούμε ένα όνομα του *MyApp_CL* και πληκτρολογήστε μια **Περιγραφή**.

![Όνομα του αρχείου καταγραφής](media/log-analytics-data-sources-custom-logs/log-name.png)


### <a name="validate-that-the-custom-logs-are-being-collected"></a>Επικυρώστε ότι που συλλέγονται τα προσαρμοσμένα αρχεία καταγραφής

Χρησιμοποιούμε ένα ερώτημα με *Τύπος = MyApp_CL* για να επιστρέψει όλες τις εγγραφές από το αρχείο καταγραφής που έχουν συλλεχθεί.

![Αρχείο καταγραφής ερώτημα με προσαρμοσμένα πεδία](media/log-analytics-data-sources-custom-logs/query-01.png)

### <a name="parse-the-custom-log-entries"></a>Ανάλυση τις προσαρμοσμένες εγγραφές

Χρησιμοποιούμε προσαρμοσμένα πεδία για να ορίσετε το *EventTime*, *Κωδικός*, *κατάσταση*και πεδία του *μηνύματος* και θα σας μπορούν να δουν τη διαφορά στις εγγραφές που επιστρέφονται από το ερώτημα.

![Αρχείο καταγραφής ερώτημα με προσαρμοσμένα πεδία](media/log-analytics-data-sources-custom-logs/query-02.png)

## <a name="next-steps"></a>Επόμενα βήματα

- Χρησιμοποιήστε [Τα προσαρμοσμένα πεδία](log-analytics-custom-fields.md) ανάλυσης τις καταχωρήσεις στο αρχείο καταγραφής της προσαρμοσμένης σε μεμονωμένα πεδία.
- Μάθετε σχετικά με το [αρχείο καταγραφής αναζητήσεις](log-analytics-log-searches.md) για να αναλύσετε τα δεδομένα που συλλέγονται από προελεύσεις δεδομένων και τις λύσεις. 