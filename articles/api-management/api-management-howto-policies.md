<properties 
    pageTitle="Πολιτικές διαχείρισης Azure API | Microsoft Azure" 
    description="Μάθετε πώς μπορείτε να δημιουργήσετε, να επεξεργαστείτε και ρύθμιση παραμέτρων πολιτικών API διαχείρισης." 
    services="api-management" 
    documentationCenter="" 
    authors="steved0x" 
    manager="erikre" 
    editor=""/>

<tags 
    ms.service="api-management" 
    ms.workload="mobile" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="10/25/2016" 
    ms.author="sdanie"/>


#<a name="policies-in-azure-api-management"></a>Πολιτικές διαχείρισης API του Azure

Στην περιοχή Διαχείριση API Azure, οι πολιτικές είναι μια δυνατότητα του συστήματος που επιτρέπουν τον εκδότη για να αλλάξετε τη συμπεριφορά του API μέσω της ρύθμισης παραμέτρων. Οι πολιτικές είναι μια συλλογή από δηλώσεις που εκτελούνται διαδοχικά στην αίτηση ή απόκριση του API. Δημοφιλείς δηλώσεις περιλαμβάνουν μετατροπής μορφής από XML σε JSON και καλέστε περιορισμού για να περιορίσετε την ποσότητα του εισερχόμενες κλήσεις από έναν προγραμματιστή της ταχύτητας. Πολλές περισσότερες πολιτικές είναι διαθέσιμες από το πλαίσιο.

Ανατρέξτε στο άρθρο [Αναφορά πολιτικής][] για μια πλήρη λίστα των προτάσεων πολιτικής και τις ρυθμίσεις τους.

Οι πολιτικές εφαρμόζονται εντός της πύλης που βρίσκεται μεταξύ του καταναλωτή API και το API διαχείρισης. Η πύλη λαμβάνει όλες τις αιτήσεις και τα συνήθως προωθεί μη τροποποιημένο για το υποκείμενο API. Ωστόσο μια πολιτική μπορούν να εφαρμοστούν οι αλλαγές τόσο στο εισερχόμενης αίτησης και απόκρισης εξερχομένων.

Πολιτική παραστάσεις μπορεί να χρησιμοποιηθεί ως χαρακτηριστικό τιμές ή τιμές κειμένου σε οποιαδήποτε από τις πολιτικές διαχείρισης API, εκτός εάν η πολιτική καθορίζει διαφορετικά. Ορισμένες πολιτικές όπως το [στοιχείο ελέγχου ροής][] και [Ρυθμίστε τη μεταβλητή][] πολιτικές βασίζονται σε παραστάσεις πολιτικής. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [πολιτικές για προχωρημένους][] και [παραστάσεις πολιτικής][].

## <a name="scopes"> </a>Πώς μπορείτε να ρυθμίσετε τις πολιτικές
Πολιτικές μπορούν να ρυθμιστούν καθολικά ή από την εμβέλεια ενός [προϊόντος][], [API][] ή [λειτουργία][]. Για να ρυθμίσετε μια πολιτική, μεταβείτε στο πρόγραμμα επεξεργασίας πολιτικών στην πύλη του publisher.

![Μενού πολιτικές][policies-menu]

Πρόγραμμα επεξεργασίας πολιτικών αποτελείται από τρεις κύριες ενότητες: το πεδίο πολιτικής (επάνω), ο ορισμός πολιτικής όπου πολιτικές έχουν υποστεί επεξεργασία (αριστερά) και τις προτάσεις λίστα (δεξιά):

![Πρόγραμμα επεξεργασίας πολιτικών][policies-editor]

Για να ξεκινήσετε τη ρύθμιση των παραμέτρων μιας πολιτικής πρέπει πρώτα να επιλέξετε το εύρος στο οποίο θα πρέπει να εφαρμοστεί η πολιτική. Στο παρακάτω το **Starter** στιγμιότυπο οθόνης προϊόντος είναι επιλεγμένο. Σημειώστε ότι το τετράγωνο σύμβολο δίπλα στο όνομα της πολιτικής δηλώνει ότι μια πολιτική έχει ήδη εφαρμοστεί σε αυτό το επίπεδο.

![Πεδίο εφαρμογής][policies-scope]

Εφόσον έχει ήδη εφαρμοστεί μια πολιτική, η ρύθμιση παραμέτρων εμφανίζεται στην προβολή ορισμού.

![Ρύθμιση παραμέτρων][policies-configure]

Η πολιτική εμφανίζεται μόνο για ανάγνωση στην αρχή. Για να επεξεργαστείτε τον ορισμό, κάντε κλικ στην ενέργεια **Ρύθμιση παραμέτρων πολιτικής** .

![Επεξεργασία][policies-edit]

Ο ορισμός πολιτικής είναι ένα απλό έγγραφο XML που περιγράφει μια ακολουθία των εισερχόμενων και εξερχόμενων καταστάσεων. Το XML μπορεί να είναι δυνατή η επεξεργασία απευθείας στο παράθυρο ορισμού. Παρέχεται μια λίστα με τις προτάσεις προς τα δεξιά και δηλώσεις που ισχύουν για το τρέχον πεδίο είναι ενεργοποιημένο και επισήμανση; όπως φαίνεται από τη δήλωση **Επιτόκιο κλήσεων όριο** στο στιγμιότυπο οθόνης παραπάνω.

Κάνοντας κλικ στην επιλογή πρόταση με δυνατότητα θα προσθέσει το κατάλληλο XML στη θέση του δρομέα στην προβολή ορισμού. 

>[AZURE.NOTE] Εάν δεν είναι ενεργοποιημένη η πολιτική που θέλετε να προσθέσετε, βεβαιωθείτε ότι βρίσκεστε σε τη σωστή εμβέλεια για αυτήν την πολιτική. Κάθε δήλωσης πολιτικής έχει σχεδιαστεί για χρήση σε συγκεκριμένο εύρος και ενότητες πολιτικής. Για να δείτε τις ενότητες πολιτικής και εύρους για μια πολιτική, ανατρέξτε στην ενότητα **Χρήση** για τη συγκεκριμένη πολιτική στην [Αναφορά πολιτικής][].

Μια πλήρη λίστα των προτάσεων πολιτικής και οι ρυθμίσεις είναι διαθέσιμες στην [Αναφορά πολιτικής][].

Για παράδειγμα, για να προσθέσετε μια νέα πρόταση για να περιορίσετε τις εισερχόμενες προσκλήσεις σε καθορισμένες διευθύνσεις IP, τοποθετήστε το δρομέα μέσα στο περιεχόμενο του το `inbound` στοιχείο XML και κάντε κλικ στην πρόταση **περιορισμένης καλούντος διευθύνσεις IP** .

![Πολιτικές περιορισμού][policies-restrict]

Αυτό θα προσθέσει μια τμημάτων κώδικα XML για να το `inbound` στοιχείο που παρέχει οδηγίες σχετικά με τον τρόπο ρύθμισης των παραμέτρων της δήλωσης.

    <ip-filter action="allow | forbid">
        <address>address</address>
        <address-range from="address" to="address"/>
    </ip-filter>

Για να περιορίσετε τις εισερχόμενες αιτήσεις και αποδοχή μόνο αυτές από μια διεύθυνση IP 1.2.3.4 τροποποιήστε το XML ως εξής:

    <ip-filter action="allow">
        <address>1.2.3.4</address>
    </ip-filter>

![Αποθήκευση][policies-save]

Όταν ολοκληρώσετε τη ρύθμιση των παραμέτρων τις προτάσεις για την πολιτική, κάντε κλικ στην επιλογή **Αποθήκευση** και οι αλλαγές θα μεταδοθούν για την πύλη διαχείρισης API αμέσως.

##<a name="sections"> </a>Ρύθμιση παραμέτρων της πολιτικής Κατανόηση

Μια πολιτική είναι μια σειρά από δηλώσεις που εκτελούνται με τη σειρά για αίτησης και απόκρισης. Η ρύθμιση παραμέτρων διαιρείται σωστά σε `inbound`, `backend`, `outbound`, και `on-error` ενότητες όπως φαίνεται στην παρακάτω ρύθμιση παραμέτρων.

    <policies>
      <inbound>
        <!-- statements to be applied to the request go here -->
      </inbound>
      <backend>
        <!-- statements to be applied before the request is forwarded to 
             the backend service go here -->
      </backend>
      <outbound>
        <!-- statements to be applied to the response go here -->
      </outbound>
      <on-error>
        <!-- statements to be applied if there is an error condition go here -->
      </on-error>
    </policies> 

Εάν υπάρχει ένα σφάλμα κατά την επεξεργασία μιας αίτησης, τους υπόλοιπους των βημάτων σε το `inbound`, `backend`, ή `outbound` παραλείπονται ενότητες και εκτέλεσης μεταπηδά τις προτάσεις στο το `on-error` ενότητας. Τοποθετώντας προτάσεις πολιτικής σε το `on-error` ενότητα μπορείτε να αναθεωρήσετε το σφάλμα, χρησιμοποιώντας το `context.LastError` ιδιότητα, έλεγχος και να προσαρμόσετε την απάντηση σφάλματος χρησιμοποιώντας το `set-body` πολιτική, και ρύθμιση παραμέτρων τι συμβαίνει εάν προκύψει σφάλμα. Υπάρχουν τους κωδικούς σφάλματος για ενσωματωμένα βήματα και για σφάλματα που μπορεί να προκύψουν κατά την επεξεργασία της πολιτικής δηλώσεις. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [χειρισμού σφαλμάτων στις πολιτικές διαχείρισης API](https://msdn.microsoft.com/library/azure/mt629506.aspx).

Εφόσον πολιτικές μπορεί να καθοριστεί σε διαφορετικά επίπεδα (καθολικός, προϊόντος, api και λειτουργίας) στη ρύθμιση παραμέτρων παρέχει έναν τρόπο για να καθορίσετε τη σειρά με την οποία τον ορισμό της πολιτικής δηλώσεις εκτέλεση σε σχέση με την πολιτική γονικό. 

Πολιτική εύρους αξιολογούνται με την ακόλουθη σειρά.

1. Καθολική εμβέλεια
2. Εμβέλεια προϊόντος
3. Εμβέλεια API
4. Η λειτουργία εύρους

Τις προτάσεις μέσα σε αυτά αξιολογούνται σύμφωνα με τη θέση του το `base` στοιχείο, εάν υπάρχει.

Για παράδειγμα, εάν έχετε μια πολιτική στο καθολικό επίπεδο και μια πολιτική που έχει ρυθμιστεί για το API, στη συνέχεια, κάθε φορά που χρησιμοποιείται αυτήν συγκεκριμένο API και στις δύο πολιτικές θα εφαρμοστεί. API διαχείρισης επιτρέπει ντετερμινιστική ταξινόμηση των προτάσεων συνδυασμένες πολιτικής μέσω του στοιχείου βάσης. 

    <policies>
        <inbound>
            <cross-domain />
            <base />
            <find-and-replace from="xyz" to="abc" />
        </inbound>
    </policies>

Στον ορισμό πολιτικής παράδειγμα παραπάνω, η `cross-domain` δήλωση είναι δυνατό να εκτελεστεί πριν από τις υψηλότερες πολιτικές που κάνατε στην ενεργοποίηση, να ακολουθείται από το `find-and-replace` πολιτικής.

Εάν η ίδια πολιτική εμφανίζεται δύο φορές στην πρόταση πολιτικής, εφαρμόζεται η πολιτική αξιολογηθεί πιο πρόσφατα. Μπορείτε να το χρησιμοποιήσετε για να παρακάμψετε τις πολιτικές που έχουν οριστεί στο ανώτερο εμβέλεια. Για να δείτε τις πολιτικές στο τρέχον πεδίο στο πρόγραμμα επεξεργασίας για την πολιτική, κάντε κλικ στην επιλογή **επανυπολογισμός αποτελεσματική πολιτική για επιλεγμένο πεδίο**.

Σημειώστε ότι καθολικού πολιτικής έχει καμία πολιτική γονικό στοιχείο και τη χρήση του `<base>` σε αυτό το στοιχείο δεν έχει καμία επίδραση. 

## <a name="next-steps"></a>Επόμενα βήματα

Ανατρέξτε στο θέμα παρακολούθηση βίντεο σε παραστάσεις πολιτικής.

> [AZURE.VIDEO policy-expressions-in-azure-api-management]

[Αναφορά πολιτικής]: api-management-policy-reference.md
[Προϊόν]: api-management-howto-add-products.md
[API]: api-management-howto-add-products.md#add-apis 
[Η λειτουργία]: api-management-howto-add-operations.md

[Πολιτικές για προχωρημένους]: https://msdn.microsoft.com/library/azure/dn894085.aspx
[Στοιχείο ελέγχου ροής]: https://msdn.microsoft.com/library/azure/dn894085.aspx#choose
[Ορισμός μεταβλητής]: https://msdn.microsoft.com/library/azure/dn894085.aspx#set_variable
[Παραστάσεις πολιτικής]: https://msdn.microsoft.com/library/azure/dn910913.aspx

[policies-menu]: ./media/api-management-howto-policies/api-management-policies-menu.png
[policies-editor]: ./media/api-management-howto-policies/api-management-policies-editor.png
[policies-scope]: ./media/api-management-howto-policies/api-management-policies-scope.png
[policies-configure]: ./media/api-management-howto-policies/api-management-policies-configure.png
[policies-edit]: ./media/api-management-howto-policies/api-management-policies-edit.png
[policies-restrict]: ./media/api-management-howto-policies/api-management-policies-restrict.png
[policies-save]: ./media/api-management-howto-policies/api-management-policies-save.png
