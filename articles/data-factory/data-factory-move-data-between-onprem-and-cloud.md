<properties 
    pageTitle="Μετακίνηση δεδομένων - πύλη διαχείρισης δεδομένων | Microsoft Azure"
    description="Ρύθμιση του πύλης δεδομένων για τη μετακίνηση δεδομένων μεταξύ της εσωτερικής εγκατάστασης και cloud. Χρήση πύλης διαχείρισης δεδομένων στο Azure εργοστασίου δεδομένων για να μετακινήσετε τα δεδομένα σας." 
    keywords="πύλη δεδομένων, η ενσωμάτωση δεδομένων, μετακίνηση δεδομένων, διαπιστευτήρια πύλης"
    services="data-factory" 
    documentationCenter="" 
    authors="linda33wj" 
    manager="jhubbard" 
    editor="monicar"/>

<tags 
    ms.service="data-factory" 
    ms.workload="data-services" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="10/18/2016" 
    ms.author="jingwang"/>

# <a name="move-data-between-on-premises-sources-and-the-cloud-with-data-management-gateway"></a>Μετακίνηση δεδομένων μεταξύ μιας εσωτερικής προέλευσης και του cloud με την πύλη διαχείρισης δεδομένων
Σε αυτό το άρθρο παρέχει μια επισκόπηση των ενσωμάτωση δεδομένων μεταξύ της αποθηκεύει δεδομένα εσωτερικής εγκατάστασης και cloud αποθηκεύει δεδομένα χρησιμοποιώντας εργοστασίου δεδομένων. Δημιουργεί με στο άρθρο [Δραστηριότητες κίνηση δεδομένων](data-factory-data-movement-activities.md) και άλλα αντικείμενα δεδομένων εργοστασίου βασικές έννοιες: [σύνολα δεδομένων](data-factory-create-datasets.md) και [αγωγούς](data-factory-create-pipelines.md). 

## <a name="data-management-gateway"></a>Η πύλη διαχείρισης δεδομένων
Πρέπει να εγκαταστήσετε πύλη διαχείρισης δεδομένων στον υπολογιστή σας στην εσωτερική εγκατάσταση για να ενεργοποιήσετε την μετακίνηση δεδομένων προς/από ένα κατάστημα δεδομένων εσωτερικής εγκατάστασης. Η πύλη μπορεί να εγκατασταθεί στον ίδιο υπολογιστή με το χώρο αποθήκευσης δεδομένων ή σε διαφορετικό υπολογιστή με την προϋπόθεση ότι η πύλη να συνδεθείτε με το χώρο αποθήκευσης δεδομένων. 

> [AZURE.IMPORTANT] Δείτε το άρθρο [Πύλη διαχείρισης δεδομένων](data-factory-data-management-gateway.md) για λεπτομέρειες σχετικά με την πύλη διαχείρισης δεδομένων.   

Το παρακάτω οδηγίες δείχνει πώς μπορείτε να δημιουργήσετε μια προέλευση δεδομένων με μια διαδικασία που ορίζει τη μετακίνηση δεδομένων από μια βάση δεδομένων **SQL Server** εσωτερικής εγκατάστασης στο χώρο αποθήκευσης αντικειμένων blob του Azure. Ως μέρος του αναλυτικές οδηγίες, εγκατάσταση και ρύθμιση παραμέτρων της πύλης διαχείρισης δεδομένων στον υπολογιστή σας. 

## <a name="walkthrough-copy-on-premises-data-to-cloud"></a>Αναλυτικές οδηγίες: αντιγραφή δεδομένων εσωτερικής εγκατάστασης στο cloud
  
## <a name="create-data-factory"></a>Δημιουργία εργοστασίου δεδομένων
Σε αυτό το βήμα, μπορείτε να χρησιμοποιήσετε την πύλη του Azure για να δημιουργήσετε μια παρουσία Azure εργοστασίου δεδομένων με το όνομα **ADFTutorialOnPremDF**. 

1.  Συνδεθείτε [πύλη του Azure](https://portal.azure.com). 
2.  Κάντε κλικ στο κουμπί **+ ΔΗΜΙΟΥΡΓΊΑ**, κάντε κλικ στην επιλογή **ευφυΐας + αναλυτικών στοιχείων**και επιλέξτε **Εργοστασίου δεδομένων**.

    ![Δημιουργία -> DataFactory](./media/data-factory-move-data-between-onprem-and-cloud/NewDataFactoryMenu.png)  
2. Στο blade τη **νέα προέλευση δεδομένων** , πληκτρολογήστε **ADFTutorialOnPremDF** για το όνομα.

    ![Προσθήκη Startboard](./media/data-factory-move-data-between-onprem-and-cloud/OnPremNewDataFactoryAddToStartboard.png)

    > [AZURE.IMPORTANT] 
    > Το όνομα του εργοστασίου Azure δεδομένων πρέπει να είναι μοναδικό καθολικό. Εάν λαμβάνετε το μήνυμα σφάλματος: **όνομα εργοστασίου δεδομένων "ADFTutorialOnPremDF" δεν είναι διαθέσιμη**, αλλάξτε το όνομα του εργοστασίου δεδομένων (για παράδειγμα, yournameADFTutorialOnPremDF) και δοκιμάστε να δημιουργήσετε ξανά. Χρησιμοποιήστε αυτό το όνομα στη θέση ADFTutorialOnPremDF κατά την εκτέλεση υπόλοιπα βήματα σε αυτό το πρόγραμμα εκμάθησης.
    > 
    > Το όνομα του εργοστασίου δεδομένων μπορεί να έχει εγγραφεί ως όνομα **DNS** στο μέλλον και συνεπώς γίνονται δημόσια ορατά.
3. Επιλέξτε τη **συνδρομή Azure** όπου θέλετε το εργοστασίου δεδομένων που θα δημιουργηθεί. 
4.  Επιλέξτε υπάρχουσα **ομάδα πόρων** ή δημιουργήστε μια ομάδα πόρων. Για το πρόγραμμα εκμάθησης, δημιουργήστε μια ομάδα πόρων με το όνομα: **ADFTutorialResourceGroup**. 
5.  Κάντε κλικ στην εντολή **Δημιουργία** blade τη **νέα προέλευση δεδομένων** .

    > [AZURE.IMPORTANT] Για να δημιουργήσετε παρουσίες εργοστασίου δεδομένων, πρέπει να είναι ένα μέλος του ρόλου [Συμβολής εργοστασίου δεδομένων](../active-directory/role-based-access-built-in-roles.md/#data-factory-contributor) σε επίπεδο ομάδας συνδρομή/πόρων. 
11. Μετά την ολοκλήρωση της δημιουργίας, βλέπετε το blade **Εργοστασίου δεδομένων** , όπως φαίνεται στην παρακάτω εικόνα:

    ![Δεδομένα εργοστασίου αρχική σελίδα](./media/data-factory-move-data-between-onprem-and-cloud/OnPremDataFactoryHomePage.png)

## <a name="create-gateway"></a>Δημιουργία πύλης
5. Στο blade την **Προέλευση δεδομένων** , κάντε κλικ στην επιλογή **συντάκτη και ανάπτυξη** πλακίδιο στην εκκίνηση του **προγράμματος επεξεργασίας** για την προέλευση δεδομένων.

    ![Σύνταξη και ανάπτυξη των πλακιδίων](./media/data-factory-move-data-between-onprem-and-cloud/author-deploy-tile.png) 
6.  Στο πρόγραμμα επεξεργασίας εργοστασίου τα δεδομένα, κάντε κλικ στην επιλογή **... Περισσότερες** στη γραμμή εργαλείων και, στη συνέχεια, κάντε κλικ στην επιλογή **νέα πύλη δεδομένων**. Εναλλακτικά, μπορείτε να κάντε δεξί κλικ **Πύλες δεδομένων** στην προβολή δέντρου και κάντε κλικ στην επιλογή **νέα πύλη δεδομένων**. 

    ![Νέα πύλη δεδομένων στη γραμμή εργαλείων](./media/data-factory-move-data-between-onprem-and-cloud/NewDataGateway.png)
2. Στο η **Δημιουργία** blade, εισαγάγετε **adftutorialgateway** για το **όνομα**και κάντε κλικ στο κουμπί **OK**.    

    ![Δημιουργία πύλης blade](./media/data-factory-move-data-between-onprem-and-cloud/OnPremCreateGatewayBlade.png)
3. Στο blade τη **Ρύθμιση παραμέτρων** , κάντε κλικ στην επιλογή **Εγκατάσταση απευθείας σε αυτόν τον υπολογιστή**. Αυτή η ενέργεια κάνει λήψη του πακέτου εγκατάστασης για την πύλη, εγκαθιστά, ρυθμίζει τις παραμέτρους και καταχωρήσει την πύλη του υπολογιστή.  

    > [AZURE.NOTE] 
    > Χρήση του Internet Explorer ή ένα συμβατό πρόγραμμα περιήγησης Microsoft ένα κλικ.
    > 
    > Εάν χρησιμοποιείτε το Chrome, μεταβείτε στο [χώρο αποθήκευσης web Chrome](https://chrome.google.com/webstore/), με την αναζήτηση λέξεων-κλειδιών "Ένα κλικ", επιλέξτε μία από τις επεκτάσεις ένα κλικ και να το εγκαταστήσετε. 
    >  
    > Κάντε το ίδιο για το Firefox (εγκατάσταση του προσθέτου). Κάντε κλικ στο κουμπί **Άνοιγμα μενού** στη γραμμή εργαλείων (**τρεις οριζόντιες γραμμές** στην επάνω δεξιά γωνία), κάντε κλικ στην επιλογή **πρόσθετα**, με λέξεις-κλειδιά "Ένα κλικ" για την αναζήτηση, επιλέξτε μία από τις επεκτάσεις ένα κλικ και να το εγκαταστήσετε.    

    ![Η πύλη - ρύθμιση παραμέτρων blade](./media/data-factory-move-data-between-onprem-and-cloud/OnPremGatewayConfigureBlade.png)

    Με αυτόν τον τρόπο είναι ο ευκολότερος τρόπος (ένα κλικ) για λήψη, εγκατάσταση, ρύθμιση παραμέτρων και καταχώρηση της πύλης με ένα μόνο βήμα. Μπορείτε να δείτε την εφαρμογή **Διαχείριση παραμέτρων πύλης διαχείρισης δεδομένων Microsoft** είναι εγκατεστημένο στον υπολογιστή σας. Μπορείτε επίσης να βρείτε το εκτελέσιμο **ConfigManager.exe** στο φάκελο: **C:\Program Files\Microsoft δεδομένων διαχείρισης Gateway\2.0\Shared**.

    Επίσης, μπορείτε να κάνετε λήψη και να εγκατάσταση πύλης με μη αυτόματο τρόπο, χρησιμοποιώντας τις συνδέσεις σε αυτήν blade και να καταχωρήσετε χρησιμοποιώντας το κλειδί που εμφανίζεται στο πλαίσιο κειμένου **ΝΈΟ αριθμό-ΚΛΕΙΔΊ** .
    
    Δείτε το άρθρο [Πύλη διαχείρισης δεδομένων](data-factory-data-management-gateway.md) για όλες τις λεπτομέρειες σχετικά με την πύλη.

    >[AZURE.NOTE] Πρέπει να είστε διαχειριστής στον τοπικό υπολογιστή για να εγκαταστήσετε και να ρυθμίσετε την πύλη διαχείρισης δεδομένων με επιτυχία. Μπορείτε να προσθέσετε επιπλέον χρήστες στην τοπική ομάδα Windows **Τους χρήστες της πύλης διαχείρισης δεδομένων** . Τα μέλη αυτής της ομάδας μπορούν να χρησιμοποιήσετε το εργαλείο Διαχείριση παραμέτρων πύλης διαχείρισης δεδομένων για τη ρύθμιση παραμέτρων της πύλης. 

5. Περιμένετε λίγα λεπτά ή να περιμένετε μέχρι να εμφανιστεί το ακόλουθο μήνυμα ειδοποίησης:

    ![Εγκατάσταση πύλης ολοκληρώθηκε με επιτυχία](./media/data-factory-move-data-between-onprem-and-cloud/gateway-install-success.png) 
6. Εκκίνηση εφαρμογής **Διαχείριση παραμέτρων πύλης διαχείρισης δεδομένων** στον υπολογιστή σας. Στο παράθυρο " **Αναζήτηση** ", πληκτρολογήστε **Πύλη διαχείρισης δεδομένων** για να αποκτήσετε πρόσβαση σε αυτό το βοηθητικό πρόγραμμα. Μπορείτε επίσης να βρείτε το εκτελέσιμο **ConfigManager.exe** στο φάκελο: **C:\Program Files\Microsoft δεδομένων διαχείρισης Gateway\2.0\Shared** 

    ![Διαχείριση παραμέτρων πύλης](./media/data-factory-move-data-between-onprem-and-cloud/OnPremDMGConfigurationManager.png)
6. Επιβεβαιώστε ότι μπορείτε να δείτε `adftutorialgateway is connected to the cloud service` μήνυμα. Η γραμμή κάτω κατάστασης εμφανίζει **σύνδεση με την υπηρεσία cloud** μαζί με ένα **πράσινο σημάδι ελέγχου**.

    Στην καρτέλα **κεντρική** , μπορείτε επίσης να κάνετε τις ακόλουθες λειτουργίες: 
    - **Καταχωρήσετε** μια πύλη με αριθμό-κλειδί από την πύλη του Azure χρησιμοποιώντας το κουμπί Register. 
    - **Διακοπή** της υπηρεσίας κεντρικού υπολογιστή πύλης διαχείρισης δεδομένων εκτελείται στον υπολογιστή σας πύλης. 
    - **Προγραμματισμός ενημερώσεων** για να έχει εγκατασταθεί μια συγκεκριμένη ώρα της ημέρας. 
    - Προβολή, όταν η πύλη έχει **τελευταία ενημέρωση**.
    - Καθορίστε ώρα κατά την οποία μπορεί να εγκατασταθεί μια ενημέρωση για την πύλη. 

8. Μεταβείτε στην καρτέλα **Ρυθμίσεις** . Το πιστοποιητικό που καθορίζονται στην ενότητα **πιστοποιητικό** χρησιμοποιείται για την Κρυπτογράφηση/αποκρυπτογράφηση διαπιστευτήρια για το χώρο αποθήκευσης δεδομένων εσωτερικής εγκατάστασης που καθορίζετε στην πύλη. (προαιρετικό) Κάντε κλικ στην επιλογή **Αλλαγή** για να χρησιμοποιήσετε το δικό σας πιστοποιητικό αντί για αυτό. Από προεπιλογή, η πύλη χρησιμοποιεί το πιστοποιητικό που δημιουργείται αυτόματα από την υπηρεσία εργοστασίου δεδομένων.

    ![Ρύθμιση παραμέτρων πιστοποιητικού πύλης](./media/data-factory-move-data-between-onprem-and-cloud/gateway-certificate.png)

    Μπορείτε επίσης να κάνετε τις ακόλουθες ενέργειες στην καρτέλα **Ρυθμίσεις** : 
    - Προβάλετε ή να εξαγάγετε το πιστοποιητικό που χρησιμοποιείται από την πύλη.
    - Αλλάξτε το τελικό σημείο HTTPS που χρησιμοποιούνται από την πύλη.    
    - Ορίστε ένα διακομιστή μεσολάβησης HTTP για να χρησιμοποιηθεί από την πύλη.   
9. (προαιρετικό) Μεταβείτε στην καρτέλα **Εργαλεία διαγνωστικού ελέγχου** , επιλέξτε την επιλογή **Ενεργοποίηση Λεπτομερής καταγραφή** , εάν θέλετε να ενεργοποιήσετε Λεπτομερής καταγραφή που μπορείτε να χρησιμοποιήσετε για την αντιμετώπιση τυχόν προβλημάτων με την πύλη. Μπορείτε να βρείτε τις πληροφορίες σύνδεσης στο **Πρόγραμμα προβολής συμβάντων** στην περιοχή **υπηρεσίες αρχεία καταγραφής εφαρμογών και** -> κόμβου**Πύλη διαχείρισης δεδομένων** . 

    ![Καρτέλα Διαγνωστικά](./media/data-factory-move-data-between-onprem-and-cloud/diagnostics-tab.png)

    Μπορείτε επίσης να εκτελέσετε τις ακόλουθες ενέργειες στην καρτέλα **Εργαλεία διαγνωστικών** : 
    
    - Χρησιμοποιήστε την ενότητα **Δοκιμή σύνδεσης** με μια προέλευση δεδομένων εσωτερικής εγκατάστασης με χρήση της πύλης.
    - Κάντε κλικ στην επιλογή **Προβολή αρχείων καταγραφής** για να δείτε το αρχείο καταγραφής της πύλης διαχείρισης δεδομένων σε ένα παράθυρο Προβολή συμβάντων. 
    - Κάντε κλικ στην επιλογή **Αποστολή αρχείων καταγραφής** για να αποστείλετε ένα αρχείο zip με τα αρχεία καταγραφής του τελευταίες επτά ημέρες στη Microsoft για να διευκολύνετε τη διαδικασία αντιμετώπισης προβλημάτων για θέματα σας. 
10. Στην καρτέλα **Εργαλεία διαγνωστικού ελέγχου** , στην ενότητα **Δοκιμή σύνδεσης** , επιλέξτε **της** για τον τύπο του χώρου αποθήκευσης δεδομένων, πληκτρολογήστε το όνομα του διακομιστή βάσης δεδομένων, το όνομα της βάσης δεδομένων, Καθορισμός Τύπος ελέγχου ταυτότητας, πληκτρολογήστε το όνομα χρήστη και τον κωδικό πρόσβασης και κάντε κλικ στην επιλογή **Δοκιμή** για να ελέγξετε εάν πύλης μπορεί να συνδεθείτε στη βάση δεδομένων. 
11. Μετάβαση στο πρόγραμμα περιήγησης web και, στην **πύλη του Azure**, κάντε κλικ στο κουμπί **OK** , τη **Ρύθμιση παραμέτρων** blade και, στη συνέχεια, το blade **νέα πύλη δεδομένων** .
6. Θα πρέπει να βλέπετε **adftutorialgateway** στην περιοχή **Πύλες δεδομένων** στην προβολή δέντρου στα αριστερά.  Εάν κάνετε κλικ σε αυτό, θα πρέπει να βλέπετε το συσχετισμένο JSON. 
    

## <a name="create-linked-services"></a>Δημιουργία συνδεδεμένων υπηρεσιών 
Σε αυτό το βήμα, δημιουργείτε δύο συνδεδεμένες υπηρεσίες: **AzureStorageLinkedService** και **SqlServerLinkedService**. Το **SqlServerLinkedService** συνδέσεων μια βάση δεδομένων SQL Server εσωτερικής εγκατάστασης και τις συνδέσεις συνδεδεμένων υπηρεσίας **AzureStorageLinkedService** αποθηκεύετε μια αντικειμένων blob του Azure για την προέλευση δεδομένων. Μπορείτε να δημιουργήσετε μια διοχέτευση αργότερα σε αυτές τις οδηγίες που αντιγράφει δεδομένα από τη βάση δεδομένων SQL Server εσωτερικής εγκατάστασης στο χώρο αποθήκευσης αντικειμένων blob του Azure. 

#### <a name="add-a-linked-service-to-an-on-premises-sql-server-database"></a>Προσθήκη υπηρεσίας συνδεδεμένο σε μια βάση δεδομένων SQL Server εσωτερικής εγκατάστασης
1.  Στο πρόγραμμα **Επεξεργασίας εργοστασίου δεδομένων**, κάντε κλικ στην επιλογή **Αποθήκευση νέα δεδομένα** στη γραμμή εργαλείων και επιλέξτε **SQL Server**. 

    ![Νέα υπηρεσία SQL Server συνδεδεμένες](./media/data-factory-move-data-between-onprem-and-cloud/NewSQLServer.png) 
3.  Στο πρόγραμμα **επεξεργασίας JSON** στη δεξιά πλευρά, κάντε τα εξής βήματα: 
    1. **GatewayName**, καθορίστε **adftutorialgateway**. 
    2. Στη **συμβολοσειρά σύνδεσης**, κάντε τα εξής βήματα: 
        1. Για το **όνομα διακομιστή**, εισαγάγετε το όνομα του διακομιστή που φιλοξενεί τη βάση δεδομένων SQL Server.
        2. Για **όνομα βάσης δεδομένων**, πληκτρολογήστε το όνομα της βάσης δεδομένων.
        3. Κάντε κλικ στο κουμπί **κρυπτογράφηση** στη γραμμή εργαλείων. Αυτό στοιχεία λήψης και ανοίγει την εφαρμογή Διαχείριση διαπιστευτηρίων.
        
            ![Εφαρμογή διαχείρισης διαπιστευτηρίων](./media/data-factory-move-data-between-onprem-and-cloud/credentials-manager-application.png)
        5. Στο παράθυρο διαλόγου **Ρύθμιση διαπιστευτήρια** , καθορίστε τύπος ελέγχου ταυτότητας, το όνομα χρήστη και τον κωδικό πρόσβασης και κάντε κλικ στο κουμπί **OK**. Εάν η σύνδεση είναι επιτυχής, το κρυπτογραφημένο διαπιστευτήρια αποθηκεύονται σε JSON του και κλείνει το παράθυρο διαλόγου. 
        6. Κλείστε την καρτέλα κενή προγράμματος περιήγησης που ξεκινά το παράθυρο διαλόγου, εάν δεν είναι κλειστή αυτόματα και να επιστρέψετε στην καρτέλα με την πύλη του Azure. 
  
            Στον υπολογιστή πύλης, αυτά τα διαπιστευτήρια είναι **κρυπτογραφημένη** χρησιμοποιώντας ένα πιστοποιητικό που ανήκει στην υπηρεσία εργοστασίου δεδομένων. Εάν θέλετε να χρησιμοποιήσετε το πιστοποιητικό που συσχετίζεται με την πύλη διαχείρισης δεδομένων αντί για αυτό, ανατρέξτε στο θέμα [Ορισμός διαπιστευτηρίων με ασφάλεια](#set-credentials-and-security).    
    1.  Στη γραμμή εντολών για να αναπτύξετε την υπηρεσία SQL Server συνδεδεμένες, κάντε κλικ στην επιλογή **Ανάπτυξη** . Θα πρέπει να βλέπετε το συνδεδεμένο υπηρεσίας στην προβολή δέντρου. 
        
        ![Υπηρεσία του SQL Server συνδεδεμένες στην προβολή δέντρου](./media/data-factory-move-data-between-onprem-and-cloud/sql-linked-service-in-tree-view.png)  

#### <a name="add-a-linked-service-for-an-azure-storage-account"></a>Προσθήκη συνδεδεμένων υπηρεσίας για ένα λογαριασμό Azure χώρου αποθήκευσης
 
1. Στο πρόγραμμα **Επεξεργασίας εργοστασίου δεδομένων**, κάντε κλικ στην επιλογή **Αποθήκευση νέα δεδομένα** στη γραμμή εντολών και επιλέξτε **Azure χώρου αποθήκευσης**.
2. Πληκτρολογήστε το όνομα του λογαριασμού σας Azure χώρου αποθήκευσης για το **όνομα του λογαριασμού**.
3. Πληκτρολογήστε το κλειδί για το λογαριασμό σας Azure χώρου αποθήκευσης για το **κλειδί λογαριασμού**.
4. Κάντε κλικ στο κουμπί **ανάπτυξης** για να αναπτύξετε το **AzureStorageLinkedService**.
   
 
## <a name="create-datasets"></a>Δημιουργία συνόλων δεδομένων
Σε αυτό το βήμα, δημιουργείτε εισόδου και εξόδου συνόλων δεδομένων που αντιπροσωπεύουν δεδομένα εισόδου και εξόδου για τη λειτουργία αντιγραφής (βάση δεδομένων SQL Server εσωτερικής εγκατάστασης = > χώρος αποθήκευσης αντικειμένων blob του Azure). Πριν από τη δημιουργία συνόλων δεδομένων, ακολουθήστε τα παρακάτω βήματα (λεπτομερείς οδηγίες ακολουθεί τη λίστα):

- Δημιουργία πίνακα με το όνομα της βάσης δεδομένων SQL Server που προσθέσατε ως συνδεδεμένο υπηρεσία για την προέλευση δεδομένων **emp** και εισαγάγετε δύο εγγραφές του δείγματος στον πίνακα.
- Δημιουργία κοντέινερ αντικειμένων blob με το όνομα **adftutorial** στο λογαριασμό χώρο αποθήκευσης αντικειμένων blob του Azure που προσθέσατε ως συνδεδεμένο υπηρεσία για την προέλευση δεδομένων.

### <a name="prepare-on-premises-sql-server-for-the-tutorial"></a>Προετοιμασία SQL Server εσωτερικής εγκατάστασης για το πρόγραμμα εκμάθησης

1. Στη βάση δεδομένων που καθορίσατε για τον SQL Server εσωτερικής εγκατάστασης συνδεδεμένων υπηρεσιών (**SqlServerLinkedService**), χρησιμοποιήστε την ακόλουθη δέσμη ενεργειών SQL για να δημιουργήσετε τον πίνακα **emp** στη βάση δεδομένων.

        CREATE TABLE dbo.emp
        (
            ID int IDENTITY(1,1) NOT NULL, 
            FirstName varchar(50),
            LastName varchar(50),
            CONSTRAINT PK_emp PRIMARY KEY (ID)
        )
        GO 
2. Εισαγάγετε ορισμένα δείγματα στον πίνακα: 

        INSERT INTO emp VALUES ('John', 'Doe')
        INSERT INTO emp VALUES ('Jane', 'Doe')

### <a name="create-input-dataset"></a>Δημιουργία συνόλου δεδομένων εισαγωγής

1. Στο πρόγραμμα **Επεξεργασίας εργοστασίου δεδομένων**, κάντε κλικ στην επιλογή **... Περισσότερες**, κάντε κλικ στην επιλογή **νέο σύνολο δεδομένων** στη γραμμή εντολών και κάντε κλικ στην επιλογή **πίνακα του SQL Server**. 
2.  Αντικαταστήστε το JSON στο δεξιό παράθυρο με το ακόλουθο κείμενο:
        
            {       
                "name": "EmpOnPremSQLTable",
                "properties": {
                    "type": "SqlServerTable",
                    "linkedServiceName": "SqlServerLinkedService",
                    "typeProperties": {
                        "tableName": "emp"
                    },
                    "external": true,
                    "availability": {
                        "frequency": "Hour",
                        "interval": 1
                    },
                    "policy": {
                        "externalData": {
                            "retryInterval": "00:01:00",
                            "retryTimeout": "00:10:00",
                            "maximumRetry": 3
                        }
                    }
                }
            }    

    Λάβετε υπόψη τα εξής σημεία: 

    - **Τύπος** έχει οριστεί σε **SqlServerTable**.
    - **όνομα πίνακα** έχει οριστεί σε **emp**.
    - **linkedServiceName** έχει οριστεί σε **SqlServerLinkedService** (είχατε δημιουργήσει αυτήν την υπηρεσία συνδεδεμένων νωρίτερα σε αυτόν τον οδηγό.).
    - Για μια εισαγωγής συνόλου δεδομένων που δεν έχει δημιουργηθεί από μια άλλη διοχέτευσης του Azure εργοστασίου δεδομένων, πρέπει να ορίσετε **εξωτερικών** στην **τιμή true**. Το υποδηλώνει τα δεδομένα εισόδου παράγεται εξωτερική υπηρεσία Azure εργοστασίου δεδομένων. Προαιρετικά, μπορείτε να καθορίσετε τις πολιτικές εξωτερικά δεδομένα χρησιμοποιώντας το στοιχείο **externalData** στην ενότητα **πολιτικής** .    

    Για λεπτομέρειες σχετικά με τις ιδιότητες JSON, ανατρέξτε στο θέμα [Μετακίνηση δεδομένων προς/από SQL Server](data-factory-sqlserver-connector.md) .
2. Κάντε κλικ στο κουμπί " **Ανάπτυξη** " στη γραμμή εντολών για την ανάπτυξη του συνόλου δεδομένων.  


### <a name="create-output-dataset"></a>Δημιουργία συνόλου δεδομένων εξόδου

1.  Στο πρόγραμμα **Επεξεργασίας εργοστασίου δεδομένων**, κάντε κλικ στην επιλογή **νέο σύνολο δεδομένων** στη γραμμή εντολών και κάντε κλικ στην επιλογή **χώρος αποθήκευσης αντικειμένων Blob του Azure**.
2.  Αντικαταστήστε το JSON στο δεξιό παράθυρο με το ακόλουθο κείμενο: 

            {
                "name": "OutputBlobTable",
                "properties": {
                    "type": "AzureBlob",
                    "linkedServiceName": "AzureStorageLinkedService",
                    "typeProperties": {
                        "folderPath": "adftutorial/outfromonpremdf",
                        "format": {
                            "type": "TextFormat",
                            "columnDelimiter": ","
                        }
                    },
                    "availability": {
                        "frequency": "Hour",
                        "interval": 1
                    }
                }
            }
  
    Λάβετε υπόψη τα εξής σημεία: 
    
    - **Τύπος** έχει οριστεί σε **AzureBlob**.
    - **linkedServiceName** έχει οριστεί σε **AzureStorageLinkedService** (είχατε δημιουργήσει αυτήν την υπηρεσία συνδεδεμένο στο βήμα 2).
    - **folderPath** έχει οριστεί σε **adftutorial/outfromonpremdf** όπου outfromonpremdf είναι ο φάκελος στο κοντέινερ adftutorial. Δημιουργήστε το κοντέινερ **adftutorial** , εάν δεν υπάρχει ήδη. 
    - Η **διαθεσιμότητα** έχει οριστεί σε **ωριαία** (**συχνότητα** ορισμένη σε **ώρα** και **διάστημα** οριστεί σε **1**).  Η υπηρεσία εργοστασίου δεδομένων δημιουργεί μια φέτα δεδομένων εξόδου κάθε ώρα στον πίνακα **emp** στη βάση δεδομένων SQL Azure. 

    Εάν δεν καθορίσετε ένα **όνομα αρχείου** για έναν **πίνακα αποτελεσμάτων**, τα αρχεία που δημιουργούνται στο το **folderPath** ονομάζονται με την εξής μορφή: δεδομένων. <Guid>.txt (για παράδειγμα:: Data.0a405f8a-93ff-4c6f-b3be-f69616f1df7a.txt.).

    Για να ορίσετε **folderPath** και δυναμικά με βάση την ώρα **SliceStart** **όνομα αρχείου** , χρησιμοποιήστε την ιδιότητα partitionedBy. Στο παρακάτω παράδειγμα, folderPath χρησιμοποιεί έτος, μήνα και την ημέρα από την SliceStart (ώρα έναρξης της στη φέτα που υποβάλλεται σε επεξεργασία) και ώρα από την SliceStart χρησιμοποιεί το όνομα αρχείου. Για παράδειγμα, εάν μια φέτα που παράγεται 2014-10-20T08:00:00, το όνομα φακέλου έχει οριστεί σε wikidatagateway/wikisampledataout/2014/10/20 και το όνομα του αρχείου που έχει οριστεί σε 08.csv. 

        "folderPath": "wikidatagateway/wikisampledataout/{Year}/{Month}/{Day}",
        "fileName": "{Hour}.csv",
        "partitionedBy": 
        [
            { "name": "Year", "value": { "type": "DateTime", "date": "SliceStart", "format": "yyyy" } },
            { "name": "Month", "value": { "type": "DateTime", "date": "SliceStart", "format": "MM" } }, 
            { "name": "Day", "value": { "type": "DateTime", "date": "SliceStart", "format": "dd" } }, 
            { "name": "Hour", "value": { "type": "DateTime", "date": "SliceStart", "format": "hh" } } 
        ],

 
    Για λεπτομέρειες σχετικά με τις ιδιότητες JSON, ανατρέξτε στο θέμα [Μετακίνηση δεδομένων προς/από χώρο αποθήκευσης Blob του Azure](data-factory-azure-blob-connector.md) .
2.  Κάντε κλικ στο κουμπί " **Ανάπτυξη** " στη γραμμή εντολών για την ανάπτυξη του συνόλου δεδομένων. Επιβεβαιώστε ότι μπορείτε να δείτε και τις δύο τα σύνολα δεδομένων στην προβολή δέντρου.  

## <a name="create-pipeline"></a>Δημιουργία διοχέτευσης
Σε αυτό το βήμα, δημιουργείτε μια **διαδικασία** με μία **Δραστηριότητα αντίγραφο** που χρησιμοποιεί **EmpOnPremSQLTable** ως είσοδο και **OutputBlobTable** ως αποτέλεσμα.

1.  Στο δεδομένα εργοστασίου επεξεργασίας, κάντε κλικ στην επιλογή **... Περισσότερες**, και κάντε κλικ στην επιλογή **νέα διοχέτευσης**. 
2.  Αντικαταστήστε το JSON στο δεξιό παράθυρο με το ακόλουθο κείμενο: 
    
            {
                "name": "ADFTutorialPipelineOnPrem",
                "properties": {
                "description": "This pipeline has one Copy activity that copies data from an on-prem SQL to Azure blob",
                "activities": [
                {
                    "name": "CopyFromSQLtoBlob",
                    "description": "Copy data from on-prem SQL server to blob",
                    "type": "Copy",
                    "inputs": [
                    {
                        "name": "EmpOnPremSQLTable"
                    }
                    ],
                    "outputs": [
                    {
                        "name": "OutputBlobTable"
                      }
                    ],
                    "typeProperties": {
                      "source": {
                        "type": "SqlSource",
                        "sqlReaderQuery": "select * from emp"
                      },
                      "sink": {
                        "type": "BlobSink"
                      }
                    },
                    "Policy": {
                      "concurrency": 1,
                      "executionPriorityOrder": "NewestFirst",
                      "style": "StartOfInterval",
                      "retry": 0,
                      "timeout": "01:00:00"
                    }
                  }
                ],
                "start": "2016-07-05T00:00:00Z",
                "end": "2016-07-06T00:00:00Z",
                "isPaused": false
              }
            }

    > [AZURE.IMPORTANT]
    > Αντικαταστήστε την τιμή της ιδιότητας **Έναρξη** με την τρέχουσα ημέρα και **Τέλος** τιμή με την επόμενη ημέρα.

    Λάβετε υπόψη τα εξής σημεία:
 
    - Στην ενότητα δραστηριότητες, υπάρχει μόνο δραστηριότητα του οποίου ο **Τύπος** έχει οριστεί σε **αντίγραφο**.
    - **Εισαγωγή δεδομένων** για τη δραστηριότητα έχει οριστεί σε **EmpOnPremSQLTable** και **εξόδου** για τη δραστηριότητα έχει οριστεί σε **OutputBlobTable**.
    - Στην ενότητα **typeProperties** , **SqlSource** καθορίζεται ως **Τύπος προέλευσης** και **BlobSink **καθορίζεται ως **τύπο δέκτη**.
    - Ερώτημα SQL `select * from emp` έχει καθοριστεί για την ιδιότητα **sqlReaderQuery** **SqlSource**.

     Και τα δύο έναρξης και λήξης ημερομηνίες-ώρες πρέπει να είναι σε [μορφή ISO](http://en.wikipedia.org/wiki/ISO_8601). Για παράδειγμα: 2014-10-14T16:32:41Z. Την ώρα **λήξης** είναι προαιρετικό, αλλά χρησιμοποιούμε σε αυτό το πρόγραμμα εκμάθησης. 
    
    Εάν δεν καθορίσετε τιμή για την ιδιότητα **Τέλος** , υπολογίζεται ως "**Έναρξη + 48 ώρες**". Για να εκτελέσετε τη διαδικασία απεριόριστο χρονικό διάστημα, καθορίστε **9/9/9999** ως η τιμή για την ιδιότητα **Τέλος** . 
    
    Ορίζετε τη χρονική διάρκεια στην οποία γίνεται επεξεργασία τις φέτες δεδομένων με βάση τις ιδιότητες **διαθεσιμότητα** που έχουν οριστεί για κάθε σύνολο δεδομένων εργοστασίου δεδομένων Azure.
    
    Στο παράδειγμα, υπάρχουν 24 φέτες δεδομένων όπως κάθε φέτα δεδομένων παράγεται ανά ώρα.     
2. Κάντε κλικ στο κουμπί " **Ανάπτυξη** " στη γραμμή εντολών για την ανάπτυξη του συνόλου δεδομένων (πίνακα είναι ένα σύνολο δεδομένων ορθογώνια). Επιβεβαιώστε ότι η διαδικασία καταδεικνύει στην προβολή δέντρου στην περιοχή **αγωγούς** κόμβο.  
5. Στη συνέχεια, κάντε κλικ στο **X** δύο φορές για να κλείσετε τις λεπίδες για να επιστρέψετε το blade **Εργοστασίου δεδομένων** για το **ADFTutorialOnPremDF**.

**Συγχαρητήρια!** Με επιτυχία έχετε δημιουργήσει μια εργοστασίου Azure δεδομένων, συνδεδεμένες υπηρεσίες, σύνολα δεδομένων και ένα διοχέτευσης και έχει προγραμματιστεί τη διαδικασία.

#### <a name="view-the-data-factory-in-a-diagram-view"></a>Δείτε την προέλευση δεδομένων σε μια προβολή διαγράμματος 
1. Στην **πύλη του Azure**, κάντε κλικ στο πλακίδιο **διάγραμμα** στην αρχική σελίδα για την προέλευση δεδομένων **ADFTutorialOnPremDF** . :

    ![Διάγραμμα σύνδεσης](./media/data-factory-move-data-between-onprem-and-cloud/OnPremDiagramLink.png)

2. Θα πρέπει να δείτε το διάγραμμα παρόμοια με την εικόνα που ακολουθεί:

    ![Προβολή διαγράμματος](./media/data-factory-move-data-between-onprem-and-cloud/OnPremDiagramView.png)

    Μπορείτε να κάνετε μεγέθυνση, σμίκρυνση, ζουμ στο 100%, ζουμ για να προσαρμοστεί αυτόματα τοποθετήστε αγωγούς και συνόλων δεδομένων και εμφάνιση πληροφορίες καταγωγής (επισημαίνει στοιχεία νέα και μετάδοση των επιλεγμένων στοιχείων).  Μπορείτε να κάνετε κλικ σε ένα αντικείμενο (συνόλου δεδομένων εισόδου/εξόδου ή διοχέτευσης) για να δείτε τις ιδιότητες για το. 

## <a name="monitor-pipeline"></a>Οθόνη διοχέτευσης
Σε αυτό το βήμα, μπορείτε να χρησιμοποιήσετε την πύλη του Azure να παρακολουθείτε τι συμβαίνει στο ενός εργοστασίου Azure δεδομένων. Μπορείτε επίσης να χρησιμοποιήσετε το cmdlet του PowerShell για την παρακολούθηση της συνόλων δεδομένων και αγωγούς. Για λεπτομέρειες σχετικά με την εποπτεία, ανατρέξτε στο θέμα [Παρακολούθηση και διαχείριση αγωγούς](data-factory-monitor-manage-pipelines.md).

5. Στο διάγραμμα, κάντε διπλό κλικ **EmpOnPremSQLTable**.  

    ![Φέτες EmpOnPremSQLTable](./media/data-factory-move-data-between-onprem-and-cloud/OnPremSQLTableSlicesBlade.png)

6. Παρατηρήστε ότι όλα τα δεδομένα που χωρίζει προς τα επάνω είναι σε κατάσταση **έτοιμη** επειδή η διάρκεια διοχέτευσης (ώρα έναρξης για την ώρα λήξης) είναι στο παρελθόν. Επίσης, είναι επειδή έχετε εισαγάγει τα δεδομένα στη βάση δεδομένων του SQL Server και είναι πάντα. Επιβεβαιώστε ότι δεν υπάρχει φέτες εμφανίζονται στην ενότητα **φέτες πρόβλημα** στο κάτω μέρος. Για να προβάλετε όλες τις φέτες του, κάντε κλικ στην επιλογή **Δείτε περισσότερα** στο κάτω μέρος της λίστας των φετών. 
7. Τώρα, στο blade τα **σύνολα δεδομένων** , κάντε κλικ στην επιλογή **OutputBlobTable**.

    ![Φέτες OputputBlobTable](./media/data-factory-move-data-between-onprem-and-cloud/OutputBlobTableSlicesBlade.png)
9. Κάντε κλικ σε οποιαδήποτε φέτα δεδομένων από τη λίστα και θα πρέπει να βλέπετε το blade **Φέτα δεδομένων** . Μπορείτε να δείτε δραστηριότητας εκτελείται για τη φέτα. Μπορείτε να δείτε μόνο μία δραστηριότητα εκτέλεση συνήθως.  

    ![Blade φέτα δεδομένων](./media/data-factory-move-data-between-onprem-and-cloud/DataSlice.png)

    Εάν στη φέτα δεν είναι σε κατάσταση **είστε έτοιμοι** , μπορείτε να δείτε την επόμενη φέτες που δεν είναι έτοιμα και εμποδίζουν την τρέχουσα φέτα από την εκτέλεση στη λίστα **νέα φέτες που είναι δεν είναι έτοιμο** .

10. Κάντε κλικ στην επιλογή την **Εκτέλεση δραστηριοτήτων** από τη λίστα στο κάτω μέρος για να δείτε **Λεπτομέρειες εκτέλεση δραστηριότητας**.

    ![Blade εκτέλεση λεπτομέρειες δραστηριότητας](./media/data-factory-move-data-between-onprem-and-cloud/ActivityRunDetailsBlade.png)

    Θα μπορείτε να δείτε πληροφορίες όπως μεταγωγή, διάρκεια και την πύλη που χρησιμοποιείται για να μεταφέρετε τα δεδομένα. 
11. Κάντε κλικ στο **X** για να κλείσετε όλα τα πτερύγια μέχρι εσείς 
12. να επιστρέψετε στην την αρχική blade για το **ADFTutorialOnPremDF**.
14. (προαιρετικό) Κάντε κλικ στην επιλογή **αγωγούς**, κάντε κλικ στην επιλογή **ADFTutorialOnPremDF**και λεπτομερούς εισαγωγής πίνακες (**Consumed**) ή σύνολα δεδομένων εξόδου (**που ΠΑΡΑΓΟΝΤΑΙ**).
15. Χρήση εργαλείων όπως χρήση εργαλείων όπως [Εξερεύνηση χώρου αποθήκευσης](http://storageexplorer.com/) για να επιβεβαιώσετε ότι το αρχείο/blob δημιουργείται για κάθε ώρα.

    ![Εξερεύνηση Azure χώρου αποθήκευσης](./media/data-factory-move-data-between-onprem-and-cloud/OnPremAzureStorageExplorer.png)

## <a name="next-steps"></a>Επόμενα βήματα

- Δείτε το άρθρο [Πύλη διαχείρισης δεδομένων](data-factory-data-management-gateway.md) για όλες τις λεπτομέρειες σχετικά με την πύλη διαχείρισης δεδομένων.
- Ανατρέξτε στο θέμα [Αντιγραφή δεδομένων από το Azure Blob σε Azure SQL](data-factory-copy-data-from-azure-blob-storage-to-sql-database.md) για να μάθετε περισσότερα σχετικά με τον τρόπο χρήσης του αντιγράφου δραστηριότητας για τη μετακίνηση δεδομένων από ένα χώρο αποθήκευσης δεδομένων προέλευσης σε ένα χώρο αποθήκευσης δεδομένων δέκτη. 
