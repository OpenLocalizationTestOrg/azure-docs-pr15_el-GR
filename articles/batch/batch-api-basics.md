<properties
    pageTitle="Azure επισκόπηση δυνατοτήτων δέσμης για τους προγραμματιστές | Microsoft Azure"
    description="Μάθετε τις δυνατότητες του στην υπηρεσία δέσμης και το API του Yammer από την πλευρά του ανάπτυξης."
    services="batch"
    documentationCenter=".net"
    authors="mmacy"
    manager="timlt"
    editor=""/>

<tags
    ms.service="batch"
    ms.devlang="multiple"
    ms.topic="get-started-article"
    ms.tgt_pltfrm="na"
    ms.workload="big-compute"
    ms.date="09/29/2016"
    ms.author="marsma"/>

# <a name="batch-feature-overview-for-developers"></a>Επισκόπηση δυνατοτήτων δέσμης για προγραμματιστές

Στο αυτό επισκόπηση των τα βασικά στοιχεία της υπηρεσίας δέσμη Azure, αναλύονται τις δυνατότητες του πρωτεύοντος service και τους πόρους που τους προγραμματιστές δέσμης να χρησιμοποιήσετε για να δημιουργήσετε ευρείας κλίμακας παράλληλα τον υπολογισμό λύσεις.

Αν ανάπτυξη μιας κατανέμεται υπολογιστική εφαρμογής ή την υπηρεσία που ζητήματα απευθείας [REST API] [ batch_rest_api] κλήσεις ή να χρησιμοποιείτε ένα από τα [SDK δέσμη](batch-technical-overview.md#batch-development-apis), θα μπορείτε να χρησιμοποιήσετε πολλά από τους πόρους και τις δυνατότητες που περιγράφονται σε αυτό το άρθρο.

> [AZURE.TIP] Για μια υψηλότερου επιπέδου εισαγωγή στην υπηρεσία δέσμη, ανατρέξτε [Βασικά στοιχεία του Azure δέσμης](batch-technical-overview.md).

## <a name="batch-service-workflow"></a>Ροή εργασίας υπηρεσίας δέσμης

Η παρακάτω υψηλού επιπέδου ροή εργασίας είναι τυπικές σχεδόν όλων των εφαρμογών και υπηρεσιών που χρησιμοποιούν την υπηρεσία δέσμης για την επεξεργασία παράλληλες φόρτους εργασίας:

1. Στείλτε τα **αρχεία δεδομένων** που θέλετε να επεξεργαστείτε στο χώρο [Αποθήκευσης Azure] [ azure_storage] λογαριασμού. Μαζική περιλαμβάνει ενσωματωμένη υποστήριξη για πρόσβαση στο χώρο αποθήκευσης αντικειμένων Blob του Azure και τις εργασίες σας μπορεί να κάνει λήψη αυτών των αρχείων για [τον υπολογισμό κόμβους](#compute-node) κατά την εκτέλεση των εργασιών.

2. Στείλτε τα **αρχεία εφαρμογών** που θα εκτελείται τις εργασίες σας. Αυτά τα αρχεία μπορεί να είναι δυαδικών αρχείων ή δέσμες ενεργειών και τις εξαρτήσεις τους και εκτελούνται από τις εργασίες με τις εργασίες σας. Τις εργασίες σας μπορεί να κάνει λήψη αυτών των αρχείων από το λογαριασμό χώρου αποθήκευσης ή μπορείτε να χρησιμοποιήσετε τη δυνατότητα [πακέτων εφαρμογών](#application-packages) της δέσμης για Διαχείριση εφαρμογών και ανάπτυξη.

3. Δημιουργία χώρου [συγκέντρωσης](#pool) κόμβους υπολογιστικών. Όταν δημιουργείτε ένα χώρο συγκέντρωσης, μπορείτε να καθορίσετε τον αριθμό των κόμβους υπολογιστικών για το χώρο συγκέντρωσης, το μέγεθος και το λειτουργικό σύστημα. Όταν εκτελείται κάθε εργασία στην εργασία σας, έχει αντιστοιχιστεί σε αυτήν για να εκτελέσετε σε έναν από τους κόμβους του χώρου συγκέντρωσης.

4. Δημιουργήστε μια [εργασία](#job). Μια εργασία διαχειρίζεται μια συλλογή των εργασιών. Μπορείτε να συσχετίσετε κάθε εργασία σε ένα συγκεκριμένο χώρο συγκέντρωσης όπου θα εκτελεστεί εργασίες του έργου.

5. Προσθήκη [εργασιών](#task) στο έργο. Κάθε εργασία εκτελείται η εφαρμογή ή η δέσμη ενεργειών που έχετε αποστείλει για να επεξεργαστείτε τα αρχεία δεδομένων να κάνει λήψη από το λογαριασμό χώρου αποθήκευσης. Κατά την ολοκλήρωση κάθε εργασίας, αυτό μπορεί να αποστείλετε τα αποτελέσματά στο χώρο αποθήκευσης Azure.

6. Παρακολούθηση της προόδου της εργασίας και να ανακτήσετε τα δεδομένα εξόδου εργασίας από το χώρο αποθήκευσης Azure.

Οι παρακάτω ενότητες περιγράφουν αυτές και οι άλλοι πόροι του δέσμη που επιτρέπουν το σενάριό σας κατανέμεται υπολογιστικό.

> [AZURE.NOTE] Χρειάζεστε ένα [λογαριασμό δέσμη](batch-account-create-portal.md) για να χρησιμοποιήσετε την υπηρεσία δέσμης. Επίσης, να χρησιμοποιήσετε σχεδόν όλες τις λύσεις χώρο [Αποθήκευσης Azure] [ azure_storage] λογαριασμού για το χώρο αποθήκευσης αρχείων και ανάκτησης. Μαζική προς το παρόν υποστηρίζει μόνο την **γενικής χρήσης** χώρο αποθήκευσης στο πεδίο Τύπος λογαριασμού, όπως περιγράφεται στο βήμα 5 του [Δημιουργία λογαριασμού χώρου αποθήκευσης](../storage/storage-create-storage-account.md#create-a-storage-account) στο [Λογαριασμοί Azure σχετικά με το χώρο αποθήκευσης](../storage/storage-create-storage-account.md).

## <a name="batch-service-resources"></a>Πόροι υπηρεσίας δέσμης

Ορισμένα από τους ακόλουθους πόρους--λογαριασμούς, τον υπολογισμό κόμβους, χώρους συγκέντρωσης, εργασίες και εργασίες--απαιτούνται από όλες τις λύσεις που χρησιμοποιούν την υπηρεσία δέσμης. Άλλα άτομα, όπως τα χρονοδιαγράμματα εργασιών και πακέτων εφαρμογών, είναι χρήσιμο, αλλά είναι προαιρετική, δυνατότητες.

- [Λογαριασμός](#account)
- [Τον υπολογισμό κόμβου](#compute-node)
- [Χώρος συγκέντρωσης](#pool)
- [Εργασία](#job)

  - [Προγραμματίζει την εργασία](#scheduled-jobs)

- [Εργασία](#task)

  - [Έναρξη εργασίας](#start-task)
  - [Διαχείριση εργασία](#job-manager-task)
  - [Προετοιμασία και την έκδοση εργασιών έργου](#job-preparation-and-release-tasks)
  - [Πολλών παρουσιών εργασιών (MPI)](#multi-instance-tasks)
  - [Εξαρτήσεις εργασιών](#task-dependencies)

- [Πακέτα εφαρμογών](#application-packages)

## <a name="account"></a>Λογαριασμός

Ένα λογαριασμό δέσμη είναι μοναδικά προσδιορισμένο οντότητα μέσα στην υπηρεσία δέσμης. Όλης της επεξεργασίας είναι συσχετισμένη με ένα λογαριασμό δέσμης. Κατά την εκτέλεση λειτουργιών με την υπηρεσία δέσμη, χρειάζεστε το όνομα λογαριασμού και ένα από τα πλήκτρα με το λογαριασμό. Μπορείτε να [δημιουργήσετε ένα λογαριασμό δέσμη Azure χρησιμοποιώντας την πύλη του Azure](batch-account-create-portal.md).

## <a name="compute-node"></a>Τον υπολογισμό κόμβου

Ένας κόμβος υπολογισμού είναι ένα Azure εικονική μηχανή (Εικονική) που είναι αφοσιωμένη στο να επεξεργασίας ένα τμήμα του φόρτου εργασίας της εφαρμογής σας. Το μέγεθος ενός κόμβου καθορίζει τον αριθμό των πυρήνων CPU, χωρητικότητα μνήμης και το μέγεθος συστήματος τοπικό αρχείο που έχει εκχωρηθεί στον κόμβο. Μπορείτε να δημιουργήσετε χώρους συγκέντρωσης των Windows ή Linux κόμβοι, χρησιμοποιώντας τις υπηρεσίες Cloud Azure ή Marketplace εικονικές μηχανές εικόνες. Ανατρέξτε στην παρακάτω ενότητα [χώρος συγκέντρωσης](#pool) για περισσότερες πληροφορίες σχετικά με αυτές τις επιλογές.

Οι κόμβοι να εκτελέσετε οποιαδήποτε εκτελέσιμο αρχείο ή δέσμη ενεργειών που υποστηρίζεται από το περιβάλλον λειτουργικό σύστημα του κόμβου. Περιλαμβάνονται και οι \*.exe, \*. cmd., \*.bat και δεσμών ενεργειών του PowerShell για Windows--και δυαδικών αρχείων, εξωτερικό περίβλημα και Python δέσμες ενεργειών για Linux.

Όλα τον υπολογισμό τους κόμβους δέσμη επίσης να περιλαμβάνουν:

- Μια τυπική [δομής των φακέλων](#files-and-directories) και σχετικές [μεταβλητές περιβάλλοντος](#environment-settings-for-tasks) που είναι διαθέσιμες για αναφορά από τις εργασίες.
- Ρυθμίσεις του **τείχους προστασίας** που έχουν ρυθμιστεί ώστε να ελέγχετε την πρόσβαση.
- [Απομακρυσμένη πρόσβαση](#connecting-to-compute-nodes) των Windows (απομακρυσμένης επιφάνειας εργασίας Protocol (RDP)) και κόμβους Linux (ασφαλούς κελύφους (SSH)).

## <a name="pool"></a>Χώρος συγκέντρωσης

Ένα χώρο συγκέντρωσης είναι μια συλλογή από τους κόμβους που εκτελεί την εφαρμογή σας στην. Ο χώρος συγκέντρωσης μπορούν να δημιουργηθούν με μη αυτόματο τρόπο από εσάς ή αυτόματα με την υπηρεσία δέσμη κατά τον καθορισμό της εργασίας πρέπει να πραγματοποιηθεί. Μπορείτε να δημιουργήσετε και να διαχειριστείτε ένα χώρο συγκέντρωσης που πληροί τις απαιτήσεις πόρων της εφαρμογής σας. Ένα χώρο συγκέντρωσης μπορεί να χρησιμοποιηθεί μόνο από ένα λογαριασμό δέσμη στην οποία δημιουργήθηκε. Ένας λογαριασμός δέσμη μπορεί να έχει περισσότερα από ένα χώρο συγκέντρωσης.

Azure χώρους συγκέντρωσης μαζική Δημιουργία επάνω από την πλατφόρμα Azure υπολογισμού πυρήνα. Παρέχουν ευρείας κλίμακας εκχώρησης, εγκατάσταση της εφαρμογής, διανομής δεδομένων, παρακολούθηση εύρυθμης λειτουργίας και ευέλικτη προσαρμογής του αριθμού των κόμβους υπολογιστικών μέσα σε ένα χώρο συγκέντρωσης ([κλίμακας](#scaling-compute-resources)).

Κάθε κόμβου που προστίθεται σε ένα χώρο συγκέντρωσης εκχωρείται ένα μοναδικό όνομα και μια διεύθυνση IP. Όταν ένας κόμβος καταργείται από ένα χώρο συγκέντρωσης, χάνονται οι αλλαγές που πραγματοποιούνται σε το λειτουργικό σύστημα ή τα αρχεία και το όνομα και τη διεύθυνση IP που έχουν κυκλοφορήσει για μελλοντική χρήση. Όταν ένας κόμβος αποχωρεί από ένα χώρο συγκέντρωσης, διάρκεια ζωής είναι μέσω.

Όταν δημιουργείτε ένα χώρο συγκέντρωσης, μπορείτε να καθορίσετε τα παρακάτω χαρακτηριστικά:

- Υπολογιστική κόμβου **λειτουργικό σύστημα** και **έκδοση**

    Όταν επιλέγετε ένα λειτουργικό σύστημα για τους κόμβους από το χώρο συγκέντρωσης, έχετε δύο επιλογές: **Ρύθμιση παραμέτρων εικονική μηχανή** και **Ρύθμιση παραμέτρων των υπηρεσιών Cloud**.

    **Ρύθμιση παραμέτρων εικονική μηχανή** παρέχει Linux και Windows εικόνες για τον υπολογισμό κόμβους από το [Azure Marketplace εικονικές μηχανές][vm_marketplace].
    Όταν δημιουργείτε ένα χώρο συγκέντρωσης που περιέχει τους κόμβους εικονική μηχανή ρύθμισης παραμέτρων, πρέπει να καθορίσετε όχι μόνο το μέγεθος του τους κόμβους, αλλά επίσης η **εικονική μηχανή αναφοράς εικόνας** και τον δέσμη **κόμβο παράγοντας SKU** στον τους κόμβους. Για περισσότερες πληροφορίες σχετικά με τον καθορισμό αυτών των ιδιοτήτων του χώρου συγκέντρωσης, ανατρέξτε στο θέμα [Linux παροχή τον υπολογισμό τους κόμβους δέσμη Azure χώρους συγκέντρωσης](batch-linux-nodes.md).

    **Ρύθμιση παραμέτρων των υπηρεσιών cloud** παρέχει υπολογιστική κόμβους *μόνο*των Windows. Διαθέσιμα λειτουργικά συστήματα για ρύθμιση παραμέτρων των υπηρεσιών Cloud χώρους συγκέντρωσης παρατίθενται στις [εκδόσεις OS επισκέπτη Azure και SDK συμβατότητας μήτρα](../cloud-services/cloud-services-guestos-update-matrix.md). Όταν δημιουργείτε ένα χώρο συγκέντρωσης που περιέχει τις υπηρεσίες Cloud κόμβοι, πρέπει να προσδιορίσετε μόνο το μέγεθος του κόμβου και την *Οικογένεια OS*. Όταν δημιουργείτε κόμβους υπολογίσετε σύνολα των Windows, μπορείτε να χρησιμοποιήσετε πιο συχνά υπηρεσίες Cloud.

    - Το *Λειτουργικό σύστημα οικογένεια* επίσης καθορίζει ποιες εκδόσεις του .NET και εγκαθίστανται με το λειτουργικό σύστημα.
    - Όπως με τους ρόλους εργασίας μέσα σε υπηρεσίες Cloud, μπορείτε να καθορίσετε μια *Έκδοση του λειτουργικού Συστήματος* (για περισσότερες πληροφορίες σχετικά με τους ρόλους εργασίας, ανατρέξτε στην ενότητα [ειδοποιούμαι σχετικά με τις υπηρεσίες cloud](../cloud-services/cloud-services-choose-me.md#tell-me-about-cloud-services) στην [Επισκόπηση των υπηρεσιών Cloud](../cloud-services/cloud-services-choose-me.md)).
    - Όπως με τους ρόλους εργαζόμενου, συνιστάται να καθορίσετε `*` για την *Έκδοση του λειτουργικού Συστήματος* , έτσι ώστε οι κόμβοι αναβαθμίζονται αυτόματα και δεν υπάρχει καμία εργασίας που απαιτείται για να αντιμετωπίσουν πρόσφατα για να κυκλοφορήσει εκδόσεις. Βασική χρήση συμβαίνει επιλέγοντας μια συγκεκριμένη έκδοση λειτουργικού Συστήματος είναι να εξασφαλιστεί συμβατότητας των εφαρμογών, που επιτρέπει την συμβατότητα με προηγούμενες εκδόσεις ελέγχους για να εκτελεστεί πριν να σας επιτραπεί να ενημερωθεί η έκδοση. Μετά την επικύρωση, την *Έκδοση του λειτουργικού Συστήματος* για το χώρο συγκέντρωσης μπορούν να ενημερωθούν και η νέα εικόνα OS μπορεί να είναι εγκατεστημένο--όλες τις εργασίες που εκτελούνται έχουν διακοπεί και τοποθετήθηκε.

- **Μέγεθος από τους κόμβους**

    **Ρύθμιση παραμέτρων των υπηρεσιών cloud** υπολογισμού κόμβο μεγέθη παρατίθενται σε [μεγέθη για τις υπηρεσίες Cloud](../cloud-services/cloud-services-sizes-specs.md). Μαζική υποστηρίζει όλες τις υπηρεσίες Cloud μεγέθη εκτός από `ExtraSmall`.

    **Ρύθμιση παραμέτρων εικονική μηχανή** υπολογίσετε κόμβος μεγέθη παρατίθενται στο [μεγέθη για εικονικές μηχανές στο Azure](../virtual-machines/virtual-machines-linux-sizes.md) (Linux) και τα [μεγέθη για εικονικές μηχανές στο Azure](../virtual-machines/virtual-machines-windows-sizes.md) (Windows). Μαζική υποστηρίζει όλα τα μεγέθη Εικονική Azure εκτός από `STANDARD_A0` και σε εκείνα με premium αποθήκευσης (`STANDARD_GS`, `STANDARD_DS`, και `STANDARD_DSV2` σειρά).

    Όταν επιλέγετε ένα μέγεθος κόμβο υπολογισμού, μπορείτε να τα χαρακτηριστικά και τις απαιτήσεις από τις εφαρμογές που θα εκτελέσετε σε τους κόμβους. Στοιχεία όπως εάν η εφαρμογή είναι πολυνηματική και μπορεί να σας βοηθήσει πόση μνήμη χρησιμοποιεί προσδιορισμός του μεγέθους κόμβου πιο κατάλληλο και οικονομική. Πρόκειται για τυπικά για να επιλέξετε έναν κόμβο μέγεθος υπό την προϋπόθεση ότι μία εργασία θα εκτελείται σε έναν κόμβο με κάθε φορά. Ωστόσο, είναι πιθανό να έχουν πολλές εργασίες (και επομένως πολλών παρουσιών της εφαρμογής) [Εκτέλεση παράλληλα](batch-parallel-node-tasks.md) σε τον υπολογισμό κόμβους κατά την εκτέλεση του έργου. Σε αυτήν την περίπτωση, είναι συνηθισμένο για να επιλέξετε ένα μεγαλύτερο μέγεθος κόμβο ώστε να περιλαμβάνει την αυξημένη ζήτηση εκτέλεσης παράλληλες εργασίας. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [πολιτική τον προγραμματισμό των εργασιών](#task-scheduling-policy) .

    Όλες οι κόμβοι σε ένα χώρο συγκέντρωσης είναι το ίδιο μέγεθος. Εάν σκοπεύετε να εκτελέσετε τις εφαρμογές με διαφορετικές απαιτήσεις συστήματος ή/και τη φόρτωση επίπεδα, συνιστάται να χρησιμοποιήσετε ξεχωριστό χώρους συγκέντρωσης.

- **Αριθμός προορισμού κόμβοι**

    Αυτός είναι ο αριθμός των κόμβους υπολογιστικών που θέλετε να αναπτύξετε το χώρο συγκέντρωσης. Αυτό αναφέρεται ως *προορισμού* επειδή, σε ορισμένες περιπτώσεις, το χώρο συγκέντρωσης δεν μπορεί να φτάσει στο τον επιθυμητό αριθμό κόμβοι. Ένα χώρο συγκέντρωσης δεν μπορεί να φτάσετε τον επιθυμητό αριθμό κόμβους Εάν φτάσει του [ορίου πυρήνα](batch-quota-limit.md#batch-account-quotas) για το λογαριασμό σας δέσμη--ή εάν είναι τύπος αυτόματης κλίμακας που έχετε εφαρμόσει στο χώρο συγκέντρωσης που περιορίζει τον μέγιστο αριθμό κόμβους (ανατρέξτε στην παρακάτω ενότητα "Κλιμάκωση πολιτικής").

- **Κλιμάκωση πολιτικής**

    Εκτός από καθορίζοντας μια στατική αριθμό κόμβους, αντί για αυτό μπορείτε να γράψετε και να εφαρμόσετε έναν [τύπο Αυτόματη κλίμακα](#scaling-compute-resources) σε ένα χώρο συγκέντρωσης. Η υπηρεσία δέσμη περιοδικά αξιολογεί τον τύπο και ρυθμίζει τον αριθμό των κόμβους εντός του χώρου συγκέντρωσης που βασίζονται σε διάφορες χώρου συγκέντρωσης έργων και εργασιών παράμετροι που μπορείτε να καθορίσετε.

- **Πολιτική προγραμματισμού εργασιών**

    Η επιλογή ρύθμισης παραμέτρων [μέγιστου εργασίες ανά κόμβο](batch-parallel-node-tasks.md) Καθορίζει το μέγιστο αριθμό των εργασιών που μπορούν να εκτελεστούν παράλληλα σε κάθε κόμβος εντός του χώρου συγκέντρωσης.

    Η προεπιλεγμένη ρύθμιση παραμέτρων είναι ότι μία εργασία κάθε φορά που εκτελείται σε έναν κόμβο, αλλά υπάρχουν σενάρια όπου είναι προτιμότερο να έχετε περισσότερες από μία εργασία που εκτελείται σε έναν κόμβο ταυτόχρονα. Δείτε το [παράδειγμα σεναρίου](batch-parallel-node-tasks.md#example-scenario) στο άρθρο [ταυτόχρονες κόμβο εργασίες](batch-parallel-node-tasks.md) για να δείτε πώς μπορείτε να επωφεληθείτε από πολλές εργασίες ανά κόμβο.

    Μπορείτε επίσης να καθορίσετε έναν *τύπο γεμίσματος* που καθορίζει εάν δέσμη δισέλιδα ομοιόμορφα τις εργασίες σε όλους τους κόμβους σε ένα χώρο συγκέντρωσης ή πακέτα κάθε κόμβο με τον μέγιστο αριθμό των εργασιών πριν από την ανάθεση εργασιών σε έναν άλλο κόμβο.

- **Κατάσταση επικοινωνίας** των κόμβους υπολογιστικών

    Στα περισσότερα σενάρια, εργασίες λειτουργούν ανεξάρτητα και δεν χρειάζεται να επικοινωνούν μεταξύ. Ωστόσο, υπάρχουν ορισμένες εφαρμογές στο οποίο πρέπει να επικοινωνήσετε εργασίες, όπως [MPI σενάρια](batch-mpi.md).

    Μπορείτε να ρυθμίσετε ένα χώρο συγκέντρωσης για να επιτρέπεται η επικοινωνία μεταξύ τους κόμβους μέσα σε it--**μεσογονατίου επικοινωνίας**. Όταν είναι ενεργοποιημένη η επικοινωνία μεσογονατίου, τους κόμβους χώρους συγκέντρωσης ρύθμιση παραμέτρων υπηρεσιών Cloud μπορούν να επικοινωνούν μεταξύ τους σε θύρες μεγαλύτερο από 1100 και ρύθμισης παραμέτρων εικονική μηχανή χώρους συγκέντρωσης δεν περιορίζουν την κίνηση σε οποιαδήποτε θύρα.

    Σημειώστε ότι επίσης επιτρέπει την επικοινωνία μεσογονατίου επηρεάζει τη θέση του τους κόμβους εντός συμπλεγμάτων και να ενδέχεται να περιορίζει τον μέγιστο αριθμό κόμβους σε ένα χώρο συγκέντρωσης λόγω περιορισμών ανάπτυξης. Εάν η εφαρμογή σας δεν απαιτεί επικοινωνία μεταξύ τους κόμβους, την υπηρεσία δέσμη μπορεί να εκχωρήσει ενδεχομένως μεγάλου αριθμού κόμβους στο χώρο συγκέντρωσης από πολλές διαφορετικές συμπλεγμάτων και κέντρα δεδομένων για να ενεργοποιήσετε την αυξήθηκε ισχύος παράλληλες επεξεργασίας.

- **Έναρξη εργασίας** για κόμβους υπολογιστικών

    Προαιρετικό *Έναρξη εργασίας* εκτελείται σε κάθε κόμβο, όπως είναι αυτόν τον κόμβο συνδέει το χώρο συγκέντρωσης και κάθε φορά που ένας κόμβος είναι επανεκκίνηση του ή reimaged. Η εργασία έναρξης είναι ιδιαίτερα χρήσιμη για την προετοιμασία κόμβους υπολογιστικών για την εκτέλεση των εργασιών, όπως την εγκατάσταση των εφαρμογών που τις εργασίες που εκτελούνται σε κόμβους υπολογιστικών.

- **Πακέτα εφαρμογών**

    Μπορείτε να καθορίσετε [πακέτων εφαρμογών](#application-packages) για να αναπτύξετε στους κόμβους υπολογιστικών στο χώρο συγκέντρωσης. Πακέτων εφαρμογών παρέχουν απλοποιημένη ανάπτυξης και διαχείρισης εκδόσεων από τις εφαρμογές που εκτελούν τις εργασίες σας. Πακέτα εφαρμογών που ορίζετε για ένα χώρο συγκέντρωσης είναι εγκατεστημένα σε κάθε κόμβο που συνδέει αυτόν το χώρο συγκέντρωσης και κάθε φορά που κάποιος κόμβος είναι επανεκκίνηση ή reimaged. Πακέτων εφαρμογών δεν υποστηρίζονται αυτήν τη στιγμή σε κόμβους υπολογιστικών Linux.

- **Ρύθμιση παραμέτρων δικτύου**

    Μπορείτε να καθορίσετε το Αναγνωριστικό Azure [εικονικού δικτύου (VNet)](../virtual-network/virtual-networks-overview.md) με την οποία το χώρο συγκέντρωσης υπολογιστική κόμβους θα πρέπει να δημιουργηθεί. Απαιτήσεις για να καθορίσετε μια VNet για το χώρο συγκέντρωσης μπορείτε να βρείτε στο θέμα [Προσθήκη ενός χώρου συγκέντρωσης για ένα λογαριασμό] [ vnet] στην αναφορά δέσμη REST API.

> [AZURE.IMPORTANT] Όλοι οι λογαριασμοί δέσμη έχουν ένα προεπιλεγμένο **όριο** που περιορίζει τον αριθμό των **πυρήνων** (και συνεπώς, κόμβους υπολογιστικών) σε ένα λογαριασμό δέσμης. Μπορείτε να βρείτε η προεπιλεγμένη ορίων και οδηγίες σχετικά με τον τρόπο για να [αυξήσετε ένα όριο](batch-quota-limit.md#increase-a-quota) (όπως ο μέγιστος αριθμός πυρήνων στο λογαριασμό σας δέσμη) σε [όρια και περιορισμοί για την υπηρεσία δέσμη Azure](batch-quota-limit.md). Εάν δεν μπορείτε να βρείτε τον εαυτό σας ζητά "Γιατί δεν μου χώρος συγκέντρωσης επίτευξη περισσότερες από X κόμβους;" Αυτό το όριο πυρήνα μπορεί να είναι η αιτία.

## <a name="job"></a>Εργασία

Μια εργασία είναι μια συλλογή των εργασιών. Διαχειρίζεται τον τρόπο που εκτελείται κατά τον υπολογισμό από τις εργασίες σε κόμβους υπολογιστικών σε ένα χώρο συγκέντρωσης.

- Η εργασία καθορίζει το **χώρο συγκέντρωσης** όπου πρόκειται να εκτελεστεί η εργασία. Μπορείτε να δημιουργήσετε ένα νέο σύνολο για κάθε εργασία, ή να χρησιμοποιούν ένα σύνολο για πολλές εργασίες. Μπορείτε να δημιουργήσετε ένα χώρο συγκέντρωσης για κάθε εργασία που σχετίζεται με ένα χρονοδιάγραμμα έργου ή για όλες τις εργασίες που σχετίζονται με ένα χρονοδιάγραμμα έργου.

- Μπορείτε να καθορίσετε ένα προαιρετικό **προτεραιότητα έργων**. Κατά την υποβολή μιας εργασίας με υψηλότερη προτεραιότητα από εργασίες που είναι σε εξέλιξη, τις εργασίες για τη δουλειά υψηλότερη προτεραιότητα έχουν εισαχθεί σε ουρά πριν εργασίες για τις εργασίες κάτω προτεραιότητα. Εργασίες στο χαμηλότερης προτεραιότητας εργασίες που εκτελούνται ήδη δεν είναι πέρασε σε αναμονή.

- Μπορείτε να χρησιμοποιήσετε **τους περιορισμούς** του έργου για να καθορίσετε ορισμένων ορίων για τις εργασίες σας:

    Μπορείτε να ορίσετε **wallclock μέγιστο χρόνο**, ώστε να εάν μια εργασία εκτελείται για περισσότερο από το μέγιστο wallclock ώρα που έχει καθοριστεί, η εργασία και όλες τις εργασίες τερματίζονται.

    Μαζική μπορεί να εντοπίσει και προσπαθήστε ξανά αποτυχίας εργασίες. Μπορείτε να καθορίσετε τον **μέγιστο αριθμό των επαναλήψεων της εργασίας** ως έναν περιορισμό, όπως εάν μια εργασία είναι *πάντα* ή *ποτέ* επαναληφθεί. Επανάληψη εργασίας σημαίνει ότι η εργασία είναι τοποθετήθηκε να εκτελεστεί ξανά.

- Την εφαρμογή-πελάτη μπορούν να προσθέτουν εργασίες σε μια εργασία ή μπορείτε να καθορίσετε μια [εργασία manager](#job-manager-task). Μια εργασία διαχείρισης έργου περιέχει τις πληροφορίες που είναι απαραίτητες για να δημιουργήσετε τις απαιτούμενες εργασίες για μια εργασία, με τη Διαχείριση την εργασία που εκτελείται σε έναν από τους κόμβους υπολογισμού στο χώρο συγκέντρωσης. Διαχείριση εργασίας γίνεται συγκεκριμένα από δέσμη--αυτό είναι σε ουρά μόλις η εργασία έχει δημιουργηθεί και την επανεκκίνηση εάν αποτύχει. Μια εργασία manager είναι *απαιτείται* για τις εργασίες που έχουν δημιουργηθεί από ένα [χρονοδιάγραμμα έργου](#scheduled-jobs) , επειδή είναι ο μόνος τρόπος για να ορίσετε τις εργασίες πριν δημιουργηθεί η εργασία.

- Από προεπιλογή, οι εργασίες παραμένουν σε την ενεργή κατάσταση, όταν ολοκληρώσετε όλες τις εργασίες στο έργο. Μπορείτε να αλλάξετε αυτήν τη συμπεριφορά, έτσι ώστε η εργασία τερματίζεται αυτόματα όταν ολοκληρωθούν όλες οι εργασίες της εργασίας. Ορίστε την ιδιότητα **onAllTasksComplete** του έργου ([OnAllTasksComplete] [ net_onalltaskscomplete] στο .NET δέσμη) για να *terminatejob* για να τερματιστεί αυτόματα η εργασία όταν όλες τις εργασίες σε ολοκληρωμένη κατάσταση.

    Σημειώστε ότι η υπηρεσία δέσμη θεωρεί μια εργασία με *εργασίες για να έχετε όλες τις εργασίες που ολοκληρώθηκαν* . Επομένως, αυτή η επιλογή χρησιμοποιείται συνήθως με μια [εργασία manager](#job-manager-task). Εάν θέλετε να χρησιμοποιήσετε τερματισμού αυτόματη εργασία χωρίς διαχείρισης έργου, που θα πρέπει να αρχικά ορίστε την ιδιότητα **onAllTasksComplete** μια νέα εργασία σε *noaction*, στη συνέχεια, ρυθμίστε την σε *terminatejob* μόνο αφού ολοκληρώσετε την προσθήκη εργασιών στο έργο.

### <a name="job-priority"></a>Προτεραιότητα έργων

Μπορείτε να αντιστοιχίσετε μια προτεραιότητα σε εργασίες που δημιουργείτε στο δέσμης. Η υπηρεσία δέσμης χρησιμοποιεί την τιμή προτεραιότητα της εργασίας για να καθορίσετε τη σειρά του προγραμματισμού εργασία μέσα σε ένα λογαριασμό (αυτό είναι να μην να συγχέονται με μια [προγραμματισμένη εργασία](#scheduled-jobs)). Η προτεραιότητα τιμές κυμαίνονται από -1000 έως 1000, με-1000 την χαμηλότερη προτεραιότητα και 1000 τις υψηλότερες. Μπορείτε να ενημερώσετε την προτεραιότητα της εργασίας, χρησιμοποιώντας την [Ενημέρωση των ιδιοτήτων ενός έργου] [ rest_update_job] λειτουργία (το ΥΠΌΛΟΙΠΟ δέσμη) ή τροποποιώντας το [CloudJob.Priority] [ net_cloudjob_priority] ιδιότητα (δέσμη .NET).

Κατά τον ίδιο λογαριασμό, υψηλότερη προτεραιότητα εργασίες έχουν προγραμματισμού προτεραιότητας μέσω χαμηλότερης προτεραιότητας εργασίες. Μια εργασία με μια τιμή υψηλότερη προτεραιότητα σε ένα λογαριασμό δεν έχει τον προγραμματισμό προτεραιότητας επάνω από μια άλλη εργασία με μια τιμή χαμηλότερης προτεραιότητας σε διαφορετικό λογαριασμό.

Η εργασία προγραμματισμού σε χώρους συγκέντρωσης είναι ανεξάρτητα. Ανάμεσα σε διαφορετικά σύνολα, δεν υπάρχει εγγύηση ότι ένα υψηλότερη προτεραιότητα είναι προγραμματισμένη εργασία πρώτα εάν το σχετικό χώρο συγκέντρωσης είναι αρκετό αδράνειας κόμβους. Στο ίδιο σύνολο, έργα με το ίδιο επίπεδο προτεραιότητας έχουν μια ίση πιθανότητα που έχει προγραμματιστεί.

### <a name="scheduled-jobs"></a>Προγραμματισμένες εργασίες

[Εργασία χρονοδιαγράμματα] [ rest_job_schedules] σάς επιτρέπουν να δημιουργήσετε επαναλαμβανόμενες εργασίες μέσα στην υπηρεσία δέσμης. Ένα χρονοδιάγραμμα έργου Καθορίζει πότε πρέπει να εκτελέσετε εργασίες και περιλαμβάνει τις προδιαγραφές για τις εργασίες που θα εκτελεστεί. Μπορείτε να καθορίσετε τη διάρκεια του χρονοδιαγράμματος--πόσος χρόνος και όταν το χρονοδιάγραμμα είναι στην πραγματικότητα--και πόσο συχνά κατά τη συγκεκριμένη χρονική περίοδο που θα πρέπει να δημιουργηθεί εργασίες.

## <a name="task"></a>Εργασία

Η εργασία είναι μια μονάδα κατά τον υπολογισμό που είναι συσχετισμένη με μια εργασία. Εκτελείται σε έναν κόμβο. Εργασίες έχουν ανατεθεί σε έναν κόμβο για εκτέλεση ή βρίσκονται στην ουρά μέχρι να μετατραπεί δωρεάν έναν κόμβο. Τοποθετήστε απλώς, μια εργασία εκτελείται ένα ή περισσότερα προγράμματα ή δέσμες ενεργειών σε έναν κόμβο υπολογισμού για να εκτελέσετε τη δουλειά που χρειάζεστε.

Όταν δημιουργείτε μια εργασία, μπορείτε να καθορίσετε:

- Η **γραμμή εντολών** της εργασίας. Αυτή είναι η γραμμή εντολών που εκτελεί την εφαρμογή ή δέσμη ενεργειών στον κόμβο υπολογισμού.

    Είναι σημαντικό να λάβετε υπόψη ότι η γραμμή εντολών δεν εκτελεί στην πραγματικότητα στην περιοχή κέλυφος. Γι ' αυτό, αυτό δεν είναι δυνατό να εγγενώς εκμεταλλευτείτε κελύφους δυνατότητες όπως επέκτασης [μεταβλητή περιβάλλοντος](#environment-settings-for-tasks) (περιλαμβάνει την `PATH`). Για να επωφεληθείτε από αυτές τις δυνατότητες, που πρέπει να καλέσετε το κέλυφος στη γραμμή εντολών--για παράδειγμα, κατά την εκκίνηση της `cmd.exe` σε κόμβους Windows ή `/bin/sh` στην Linux:

    `cmd /c MyTaskApplication.exe %MY_ENV_VAR%`

    `/bin/sh -c MyTaskApplication $MY_ENV_VAR`

    Εάν χρειάζεστε τις εργασίες σας για να εκτελέσετε μια εφαρμογή ή δέσμη ενεργειών που δεν είναι ο κόμβος `PATH` ή αναφορά μεταβλητές περιβάλλοντος, καλέστε το κέλυφος ρητά στη γραμμή εντολών εργασιών.

- Τα **αρχεία πόρων** που περιέχουν τα δεδομένα για επεξεργασία. Αυτά τα αρχεία αντιγράφονται αυτόματα στον κόμβο από το χώρο αποθήκευσης αντικειμένων Blob σε λογαριασμό αποθήκευσης Azure **γενικής χρήσης** πριν την εκτέλεση της εργασίας γραμμής εντολών. Για περισσότερες πληροφορίες, ανατρέξτε στις ενότητες [Έναρξη εργασιών](#start-task) και [αρχείων και καταλόγων](#files-and-directories).

- Το **περιβάλλον μεταβλητές** που απαιτούνται από την εφαρμογή σας. Για περισσότερες πληροφορίες, ανατρέξτε στην ενότητα [ρυθμίσεις περιβάλλοντος για τις εργασίες](#environment-settings-for-tasks) .

- Τους **περιορισμούς** βάσει των οποίων θα πρέπει να εκτελεί την εργασία. Για παράδειγμα, ο μέγιστος χρόνος που επιτρέπεται για να εκτελέσετε, ο μέγιστος αριθμός των φορών που πρέπει να επαναληφθεί αποτυχίας εργασίας, της εργασίας και το μέγιστο χρόνο όπου τα αρχεία στον κατάλογο εργασίας της εργασίας διατηρούνται.

- **Πακέτων εφαρμογών** για την ανάπτυξη στον κόμβο υπολογισμού κατά την οποία η εργασία είναι προγραμματισμένη για να εκτελέσετε. [Πακέτων εφαρμογών](#application-packages) παρέχουν απλοποιημένη ανάπτυξης και διαχείρισης εκδόσεων από τις εφαρμογές που εκτελούν τις εργασίες σας. Πακέτων εφαρμογών επιπέδου εργασίας είναι ιδιαίτερα χρήσιμη σε κοινόχρηστο χώρο συγκέντρωσης περιβάλλοντα, όπου διαφορετικές εργασίες που εκτελούνται σε ένα χώρο συγκέντρωσης και το χώρο συγκέντρωσης δεν διαγράφεται, όταν ολοκληρωθεί μια εργασία. Εάν η εργασία σας έχει λιγότερες εργασίες από τους κόμβους στο χώρο συγκέντρωσης, πακέτων εφαρμογών εργασίας να ελαχιστοποιήσετε μεταφορά δεδομένων από την εφαρμογή σας έχει αναπτυχθεί μόνο για τους κόμβους που εκτελούνται εργασίες.

Εκτός από τις εργασίες που μπορείτε να καθορίσετε για να εκτελέσετε υπολογισμούς σε έναν κόμβο, τις ακόλουθες εργασίες ειδικές επίσης παρέχονται από την υπηρεσία δέσμη:

- [Έναρξη εργασίας](#start-task)
- [Διαχείριση εργασία](#job-manager-task)
- [Προετοιμασία και την έκδοση εργασιών έργου](#job-preparation-and-release-tasks)
- [Εργασίες πολλών παρουσιών (MPI)](#multi-instance-tasks)
- [Εξαρτήσεις εργασιών](#task-dependencies)

### <a name="start-task"></a>Έναρξη εργασίας

Συσχετίζοντας ένα **Έναρξη εργασιών** με ένα χώρο συγκέντρωσης, μπορείτε να προετοιμάσετε το περιβάλλον λειτουργίας από τους κόμβους. Για παράδειγμα, μπορείτε να εκτελέσετε ενέργειες όπως την εγκατάσταση των εφαρμογών που εκτελούνται τις εργασίες σας και ξεκινώντας διεργασίες παρασκηνίου. Η εργασία Έναρξη εκτελείται κάθε φορά που ξεκινά έναν κόμβο, για όσο διάστημα παραμένει στο χώρο συγκέντρωσης--συμπεριλαμβανομένων κατά την πρώτη τον κόμβο η προσθήκη του για το χώρο συγκέντρωσης και πότε είναι επανεκκίνηση του ή να reimaged.

Το βασικό πλεονέκτημα της εργασίας έναρξης είναι ότι μπορεί να περιέχει όλες τις πληροφορίες που είναι απαραίτητες για να ρυθμίσετε τις παραμέτρους ενός κόμβος και να εγκαταστήσετε τις εφαρμογές που απαιτούνται για την εκτέλεση εργασιών. Επομένως, είναι τόσο απλή όσο η αύξηση του αριθμού των κόμβους σε ένα χώρο συγκέντρωσης που καθορίζει το νέο πλήθος κόμβο προορισμού--δέσμη ήδη περιλαμβάνει τις πληροφορίες που απαιτούνται για τη ρύθμιση των παραμέτρων τους κόμβους νέα και να είναι έτοιμες για την αποδοχή εργασιών.

Όπως με οποιαδήποτε εργασία δέσμης Azure, μπορείτε να καθορίσετε μια λίστα των **αρχείων πόρων** στο [Χώρο αποθήκευσης Azure][azure_storage], εκτός από μια **γραμμή εντολών** που θα εκτελεστεί. Μαζική αντιγράφει πρώτα τα αρχεία πόρων στον κόμβο από χώρο αποθήκευσης Azure και, στη συνέχεια, εκτελεί τη γραμμή εντολών. Για μια εργασία Έναρξη χώρου συγκέντρωσης, της λίστας αρχείων περιέχει συνήθως η εφαρμογή εργασίας και τις εξαρτήσεις.

Ωστόσο, αυτό θα μπορούσε να επίσης να περιλαμβάνουν δεδομένα αναφοράς που θα χρησιμοποιηθεί από όλες τις εργασίες που εκτελούνται στον κόμβο υπολογισμού. Για παράδειγμα, γραμμή εντολών έναρξης μιας εργασίας μπορεί να εκτελέσετε μια `robocopy` λειτουργίας να αντιγράψετε αρχεία εφαρμογών (που έχουν καθοριστεί ως αρχεία πόρων και λήψη στον κόμβο) από την έναρξη της εργασίας [κατάλογος εργασίας](#files-and-directories) στον [κοινόχρηστο φάκελο](#files-and-directories)και, στη συνέχεια, εκτελέστε MSI ή `setup.exe`.

> [AZURE.IMPORTANT] Μαζική προς το παρόν υποστηρίζει *μόνο* τον τύπο λογαριασμού χώρου αποθήκευσης **γενικής χρήσης** , όπως περιγράφεται στο βήμα 5 του [Δημιουργία λογαριασμού χώρου αποθήκευσης](../storage/storage-create-storage-account.md#create-a-storage-account) στο [Λογαριασμοί Azure σχετικά με το χώρο αποθήκευσης](../storage/storage-create-storage-account.md). Πρέπει να καθορίσετε αρχεία πόρων που βρίσκονται *μόνο* στους λογαριασμούς χώρου αποθήκευσης **γενικής χρήσης** τις εργασίες σας δέσμη (συμπεριλαμβανομένων των τυπική εργασίες, έναρξη εργασιών, εργασίες προετοιμασίας και εργασίες τελική έκδοση).

Είναι συνήθως επιθυμητό για την υπηρεσία δέσμη να περιμένετε για την εργασία έναρξης για να ολοκληρωθεί πριν από την εξετάζοντας τον κόμβο είστε έτοιμοι να ανατεθούν εργασίες, αλλά μπορείτε να το ρυθμίσετε.

Εάν αποτύχει η έναρξη εργασίας σε έναν κόμβο υπολογισμού, στη συνέχεια, την κατάσταση του κόμβου ενημερώνεται ώστε να αντικατοπτρίζει την αποτυχία και ο κόμβος δεν έχει εκχωρηθεί όλες τις εργασίες. Έναρξη εργασίας μπορεί να αποτύχει, εάν υπάρχει κάποιο πρόβλημα αντιγραφή των πόρων αρχείων από χώρο αποθήκευσης ή εάν η διαδικασία που εκτελείται από τη γραμμή εντολών επιστρέφει έναν κωδικό εξόδου εκτός από μηδέν.

Εάν κάνετε προσθήκη ή ενημέρωση της εργασίας έναρξης για έναν *υπάρχοντα* χώρο συγκέντρωσης, πρέπει να επανεκκινήσετε το κόμβους υπολογιστικών για την εργασία έναρξης για να εφαρμοστεί σε τους κόμβους.

### <a name="job-manager-task"></a>Διαχείριση εργασία

Μπορείτε συνήθως να χρησιμοποιήσετε μια **εργασία manager** για τον έλεγχο ή/και παρακολούθηση της εργασίας εκτέλεσης--για παράδειγμα, για να δημιουργήσετε και να υποβάλετε τις εργασίες για ένα έργο, προσδιορίσετε πρόσθετες εργασίες να εκτελούνται και τον καθορισμό όταν ολοκληρωθεί η εργασία. Ωστόσο, μια εργασία manager δεν περιορίζεται σε αυτές τις δραστηριότητες. Πρόκειται για ένα πλήρως Χρονοδιάγραμμα εργασιών που μπορούν να εκτελούν τις ενέργειες που απαιτούνται για το έργο. Για παράδειγμα, μια εργασία διαχείρισης έργου μπορεί να κάνετε λήψη ενός αρχείου που έχει καθοριστεί ως παράμετρο, ανάλυση τα περιεχόμενα αυτού του αρχείου, και υποβολή πρόσθετες εργασίες που βασίζονται σε αυτά τα περιεχόμενα.

Έναρξη μιας εργασίας διαχείρισης έργου πριν από όλες τις άλλες εργασίες. Παρέχει τις ακόλουθες δυνατότητες:

- Το οποίο υποβάλλεται αυτόματα ως εργασία από την υπηρεσία δέσμη όταν δημιουργείται η εργασία.

- Έχει προγραμματιστεί για εκτέλεση πριν από τις άλλες εργασίες σε μια εργασία.

- Το σχετικό κόμβος είναι η τελευταία να καταργηθούν από ένα χώρο συγκέντρωσης όταν το χώρο συγκέντρωσης είναι που έχουν συρρικνωθεί.

- Το τερματισμού μπορεί να είναι συνδεδεμένη με την κατάργηση όλων των εργασιών της εργασίας.

- Μια εργασία manager λαμβάνει την υψηλότερη προτεραιότητα όταν είναι απαραίτητο να γίνει επανεκκίνηση. Εάν μια αδρανής κόμβου δεν είναι διαθέσιμη, την υπηρεσία δέσμη ενδέχεται να τερματιστεί μία από τις άλλες εργασίες εκτελείται στο χώρο συγκέντρωσης για να κάνετε χώρο για την εργασία manager για να εκτελέσετε.

- Μια εργασία διαχείρισης έργου στη μία εργασία δεν έχει προτεραιότητα επάνω από τις εργασίες με άλλες εργασίες. Σε έργα, εξετάζονται μόνο προτεραιότητες σε επίπεδο έργου.

### <a name="job-preparation-and-release-tasks"></a>Προετοιμασία και την έκδοση εργασιών έργου

Μαζική παρέχει εργασίες προετοιμασίας για τη ρύθμιση εκτέλεσης προ-εργασία. Εργασίες από την έκδοση είναι για εργασία μετά τη συντήρηση ή εκκαθάριση.

- **Εργασία προετοιμασίας**: μια εργασία προετοιμασίας εκτελείται σε όλους τους κόμβους υπολογισμού που έχουν προγραμματιστεί για να εκτελέσετε εργασίες, πριν από οποιαδήποτε από τις άλλες εργασίες εκτελούνται. Μπορείτε να χρησιμοποιήσετε μια εργασία προετοιμασίας για να αντιγράψετε δεδομένα που χρησιμοποιείται από κοινού από όλες τις εργασίες, αλλά είναι μοναδικό για την εργασία, για παράδειγμα.
- **Αποδέσμευση εργασίας έργου**: Όταν ολοκληρωθεί μια εργασία, μια εργασία κυκλοφορίας εκτελείται σε κάθε κόμβο στο χώρο συγκέντρωσης που εκτελεστεί τουλάχιστον μία εργασία. Μπορείτε να χρησιμοποιήσετε μια έκδοση εργασία για να διαγράψετε δεδομένα που αντιγράφεται από την εργασία προετοιμασίας, ή για να συμπιέσετε και αποστολή δεδομένων καταγραφής διαγνωστικών, για παράδειγμα.

Και τα δύο εργασία προετοιμασίας και εργασίες έκδοση σας επιτρέπει να ορίσετε μια γραμμή εντολών για να εκτελέσετε όταν ενεργοποιείται η εργασία. Προσφέρουν δυνατότητες, όπως λήψη αρχείου, αναβαθμισμένα δικαιώματα εκτέλεσης, προσαρμοσμένο περιβάλλον μεταβλητές, μέγιστο εκτέλεσης διάρκεια, των επαναλήψεων και ώρα διατήρησης αρχείου.

Για περισσότερες πληροφορίες σχετικά με εργασίες προετοιμασίας και την έκδοση, ανατρέξτε στο θέμα [εργασία προετοιμασίας και ολοκλήρωση εργασιών στη δέσμη Azure κόμβοι τον υπολογισμό](batch-job-prep-release.md).

### <a name="multi-instance-task"></a>Πολλών παρουσιών εργασιών

[Πολλών παρουσιών εργασίας](batch-mpi.md) είναι μια εργασία που έχει ρυθμιστεί ώστε να εκτελείται σε περισσότερες από μία κόμβος ταυτόχρονα. Με την παρουσία πολλών εργασίες, μπορείτε να ενεργοποιήσετε σενάρια υπολογιστική υψηλών επιδόσεων που απαιτούν μια ομάδα κόμβους υπολογιστικών που έχουν εκχωρηθεί μαζί για να επεξεργαστείτε ένα μεμονωμένο φόρτο εργασίας (όπως το μήνυμα που περνά μέσα περιβάλλοντος εργασίας (MPI)).

Για λεπτομερή συζήτηση σε εργασίες που εκτελούνται MPI στη δέσμη χρησιμοποιώντας τη βιβλιοθήκη .NET δέσμης, ανατρέξτε στο θέμα [χρήση πολλών παρουσιών εργασίες για να εκτελέσετε εφαρμογές μηνύματος που περνά μέσα περιβάλλοντος εργασίας (MPI) σε δέσμη Azure](batch-mpi.md).

### <a name="task-dependencies"></a>Εξαρτήσεις εργασιών

[Εξαρτήσεις εργασιών](batch-task-dependencies.md), όπως υποδηλώνει το όνομα, σας επιτρέπουν να καθορίσετε ότι μια εργασία εξαρτάται από την ολοκλήρωση των άλλων εργασιών πριν από την εκτέλεση. Αυτή η δυνατότητα παρέχει υποστήριξη για περιπτώσεις στις οποίες μια "μετάδοση" εργασία καταναλώνει την έξοδο από μια εργασία "νέα"--ή όταν μια νέα εργασία εκτελεί ορισμένες προετοιμασίας που απαιτούνται από μια εργασία ροής εργασίας. Για να χρησιμοποιήσετε αυτήν τη δυνατότητα, πρέπει πρώτα να ενεργοποιήσετε εξαρτήσεις εργασιών στην εργασία σας δέσμης. Στη συνέχεια, για κάθε εργασία που εξαρτάται από μια άλλη (ή πολλά άλλα), μπορείτε να καθορίσετε τις εργασίες που εξαρτάται από αυτήν την εργασία.

Με τις εξαρτήσεις εργασιών, μπορείτε να ρυθμίσετε σενάρια όπως το εξής:

* *taskB* εξαρτάται από το *taskA* (*taskB* να μην ξεκινά εκτέλεσης μέχρι να ολοκληρωθεί *taskA* ).
* *taskC* εξαρτάται από *taskA* και *taskB*.
* *taskD* εξαρτάται από μια περιοχή εργασίες, όπως εργασίες *1* έως *10*, πριν να εκτελέσει.

Ελέγξτε τις [εξαρτήσεις εργασιών σε δέσμη Azure](batch-task-dependencies.md) και την [TaskDependencies] [ github_sample_taskdeps] δείγμα κώδικα στα [azure-δέσμη-δείγματα] [ github_samples] αποθετήριο GitHub για περισσότερες λεπτομέρειες αναλυτικά αυτήν τη δυνατότητα.

## <a name="environment-settings-for-tasks"></a>Ρυθμίσεις περιβάλλοντος για τις εργασίες

Κάθε εργασίας που έχει εκτελεστεί από την υπηρεσία δέσμη έχει πρόσβαση σε μεταβλητές περιβάλλοντος που ορίζει σε κόμβους υπολογισμού. Αυτό περιλαμβάνει μεταβλητές περιβάλλοντος που καθορίζονται από την υπηρεσία δέσμης ([που ορίζονται από την υπηρεσία][msdn_env_vars]) και προσαρμοσμένο περιβάλλον μεταβλητές που μπορείτε να ορίσετε για τις εργασίες σας. Οι εφαρμογές και οι δέσμες ενεργειών που εκτελεί τις εργασίες σας έχουν πρόσβαση σε αυτές τις μεταβλητές περιβάλλοντος κατά την εκτέλεση.

Μπορείτε να ορίσετε προσαρμοσμένο περιβάλλον μεταβλητές στο επίπεδο της εργασίας ή εργασία από συμπληρώνετε την ιδιότητα *ρυθμίσεων περιβάλλοντος* για αυτών των οντοτήτων. Για παράδειγμα, ανατρέξτε στο θέμα [εργασία σε ένα έργο Προσθήκη] [ rest_add_task] λειτουργία (δέσμη REST API) ή το [CloudTask.EnvironmentSettings] [ net_cloudtask_env] και [CloudJob.CommonEnvironmentSettings] [ net_job_env] ιδιότητες στο .NET δέσμης.

Εφαρμογή προγράμματος-πελάτη ή της υπηρεσίας σας να αποκτήσετε μεταβλητές περιβάλλοντος μιας εργασίας, τόσο που ορίζονται από την υπηρεσία και προσαρμοσμένες, χρησιμοποιώντας τη [λήψη πληροφοριών σχετικά με μια εργασία] [ rest_get_task_info] λειτουργία (το ΥΠΌΛΟΙΠΟ δέσμη) ή με την πρόσβαση του [CloudTask.EnvironmentSettings] [ net_cloudtask_env] ιδιότητα (δέσμη .NET). Διεργασιών που εκτελούνται σε έναν κόμβο υπολογισμού μπορούν να έχουν πρόσβαση αυτές και άλλες μεταβλητές περιβάλλοντος στον κόμβο, για παράδειγμα, χρησιμοποιώντας την οικεία `%VARIABLE_NAME%` (Windows) ή `$VARIABLE_NAME` σύνταξη (Linux).

Μπορείτε να βρείτε μια πλήρη λίστα των όλες τις μεταβλητές που ορίζονται από το υπηρεσία περιβάλλοντος σε [τον υπολογισμό μεταβλητές περιβάλλοντος κόμβο][msdn_env_vars].

## <a name="files-and-directories"></a>Αρχεία και καταλόγους

Κάθε εργασία έχει μια *εργασία καταλόγου* στην περιοχή ποια δημιουργεί μηδέν ή περισσότερα αρχεία και καταλόγους. Αυτός ο κατάλογος εργασίας μπορεί να χρησιμοποιηθεί για την αποθήκευση του προγράμματος που εκτελείται κατά την εργασία, τα δεδομένα που επεξεργάζεται και το αποτέλεσμα της επεξεργασίας εκτελέσει. Όλα τα αρχεία και τους καταλόγους εργασίας ανήκουν από το χρήστη εργασίας.

Η υπηρεσία δέσμη εκθέτει ένα τμήμα του συστήματος αρχείων σε έναν κόμβο ως *ριζικό κατάλογο*. Εργασίες να αποκτήσετε πρόσβαση στον ριζικό κατάλογο με την αναφορά του `AZ_BATCH_NODE_ROOT_DIR` μεταβλητή περιβάλλοντος. Για περισσότερες πληροφορίες σχετικά με τη χρήση μεταβλητών περιβάλλοντος, ανατρέξτε στο θέμα [ρυθμίσεις περιβάλλοντος για τις εργασίες](#environment-settings-for-tasks).

Ο ριζικός κατάλογος περιέχει την ακόλουθη δομή καταλόγου:

![Τον υπολογισμό δομή καταλόγου κόμβου][1]

- **κοινόχρηστο**: αυτόν τον κατάλογο παρέχει πρόσβαση ανάγνωσης/εγγραφής σε *όλες* τις εργασίες που εκτελούνται σε έναν κόμβο. Οποιαδήποτε εργασία που εκτελείται στον κόμβο να δημιουργήσετε ανάγνωση, ενημέρωση και διαγραφή αρχείων σε αυτόν τον κατάλογο. Εργασίες να αποκτήσετε πρόσβαση σε αυτόν τον κατάλογο με την αναφορά του `AZ_BATCH_NODE_SHARED_DIR` μεταβλητή περιβάλλοντος.

- **Εκκίνηση**: αυτόν τον κατάλογο χρησιμοποιείται από μια εργασία Έναρξη ως το κατάλογο εργασίας. Όλα τα αρχεία που έχουν ληφθεί στον κόμβο από την εργασία Έναρξη αποθηκεύονται εδώ. Έναρξη εργασίας μπορούν να δημιουργήσετε ανάγνωση, ενημέρωση και διαγραφή αρχείων στην περιοχή αυτόν τον κατάλογο. Εργασίες να αποκτήσετε πρόσβαση σε αυτόν τον κατάλογο με την αναφορά του `AZ_BATCH_NODE_STARTUP_DIR` μεταβλητή περιβάλλοντος.

- **Εργασίες**: ένας κατάλογος δημιουργείται για κάθε εργασία που εκτελείται στον κόμβο. Αυτό γίνεται με την αναφορά του `AZ_BATCH_TASK_DIR` μεταβλητή περιβάλλοντος.

    Μέσα σε κάθε κατάλογο εργασίας, η υπηρεσία δέσμη δημιουργεί έναν κατάλογο εργασίας (`wd`) των οποίων μοναδική διαδρομή καθορίζεται από το `AZ_BATCH_TASK_WORKING_DIR` μεταβλητή περιβάλλοντος. Αυτός ο κατάλογος παρέχει πρόσβαση ανάγνωσης/εγγραφής με την εργασία. Η εργασία μπορεί να δημιουργήσετε ανάγνωση, ενημέρωση και διαγραφή αρχείων στην περιοχή αυτόν τον κατάλογο. Αυτός ο κατάλογος διατηρούνται με βάση τον περιορισμό *RetentionTime* που έχει καθοριστεί για την εργασία.

    `stdout.txt`και `stderr.txt`: αυτά τα αρχεία που είναι γραμμένες στο φάκελο εργασίας κατά την εκτέλεση της εργασίας.

>[AZURE.IMPORTANT] Όταν ένας κόμβος καταργείται από το χώρο συγκέντρωσης, καταργούνται *όλα* τα αρχεία που είναι αποθηκευμένα στον κόμβο.

## <a name="application-packages"></a>Πακέτα εφαρμογών

Η δυνατότητα [πακέτων εφαρμογών](batch-application-packages.md) παρέχει εύκολη διαχείριση και την ανάπτυξη εφαρμογών για να τους κόμβους υπολογισμού σας χώρους συγκέντρωσης. Μπορείτε να αποστείλετε και να διαχειριστείτε πολλές εκδόσεις των εφαρμογών του εκτέλεση με τις εργασίες, όπως τα δυαδικά δεδομένα και αρχεία υποστήριξης. Στη συνέχεια, μπορείτε να αναπτύξετε αυτόματα μία ή περισσότερες από αυτές τις εφαρμογές για να κόμβους υπολογιστικών σε το χώρο συγκέντρωσης.

Μπορείτε να καθορίσετε πακέτων εφαρμογών σε επίπεδο χώρο συγκέντρωσης και εργασιών. Όταν καθορίζετε πακέτων χώρου συγκέντρωσης εφαρμογών, η εφαρμογή έχει αναπτυχθεί σε κάθε κόμβο στο χώρο συγκέντρωσης. Όταν καθορίζετε πακέτων εφαρμογών εργασίας, η εφαρμογή θα αναπτυχθεί μόνο σε κόμβους που έχουν προγραμματιστεί για να εκτελέσετε τουλάχιστον μία από τις εργασίες του έργου, απλώς πριν από την εκτέλεση της εργασίας γραμμής εντολών.

Μαζική χειρίζεται τις λεπτομέρειες της εργασίας με το χώρο αποθήκευσης Azure για την αποθήκευση του πακέτων εφαρμογών και αναπτύξτε τους για τον υπολογισμό κόμβους, ώστε να είναι απλοποιημένα επιβάρυνσης τόσο τον κωδικό σας και διαχείριση.

Για να μάθετε περισσότερα σχετικά με τη δυνατότητα πακέτου εφαρμογών, δείτε [ανάπτυξη εφαρμογών με το Azure δέσμη πακέτων εφαρμογών](batch-application-packages.md).

>[AZURE.NOTE] Εάν προσθέσετε πακέτα χώρου συγκέντρωσης εφαρμογών σε έναν *υπάρχοντα* χώρο συγκέντρωσης, πρέπει να επανεκκινήσετε το κόμβους υπολογιστικών για τα πακέτα εφαρμογής για να αναπτυχθούν στο τους κόμβους.

## <a name="pool-and-compute-node-lifetime"></a>Διάρκεια ζωής κόμβου χώρου συγκέντρωσης και υπολογισμού

Όταν σχεδιάζετε τη λύση σας δέσμη Azure, πρέπει να κάνετε μια απόφαση σχεδιασμού σχετικά με τον τρόπο και όταν χώρους συγκέντρωσης δημιουργούνται και πόσο χρόνο τον υπολογισμό κόμβοι μέσα σε αυτά τα σύνολα παραμένουν διαθέσιμες.

Στη μία πλευρά του φάσματος, μπορείτε να δημιουργήσετε ένα σύνολο για κάθε εργασία που υποβάλλετε και διαγράψτε το χώρο συγκέντρωσης μόλις καθηκόντων λήξης εκτέλεσης. Αυτό Μεγιστοποίηση χρήσης, επειδή οι κόμβοι εκχωρούνται μόνο όταν είναι απαραίτητο, και τερματισμός μόλις να είναι σε αδράνεια. Παρόλο που αυτό σημαίνει ότι η εργασία πρέπει να περιμένετε για τους κόμβους που θα εκχωρηθεί, είναι σημαντικό να λάβετε υπόψη ότι οι εργασίες προγραμματίζονται για εκτέλεση μόλις κόμβοι διατίθενται μεμονωμένα, που έχει εκχωρηθεί, και η έναρξη εργασία έχει ολοκληρωθεί. Η δέσμη *δεν* περιμένετε να γίνει όλους τους κόμβους μέσα σε ένα χώρο συγκέντρωσης είναι διαθέσιμες πριν από την ανάθεση εργασιών για να τους κόμβους. Αυτό διασφαλίζει μέγιστη αξιοποίηση των όλους τους κόμβους διαθέσιμη.

Στο άλλο άκρο του φάσματος, εάν χρειάζεται Άμεση έναρξη εργασιών είναι η υψηλότερη προτεραιότητα, μπορείτε να δημιουργήσετε ένα χώρο συγκέντρωσης εκ των προτέρων και διάθεση τους κόμβους προτού υποβληθούν εργασίες. Σε αυτό το σενάριο, εργασίες να ξεκινήσετε αμέσως, αλλά κόμβοι μπορεί να καθίσετε σε αδράνεια κατά την αναμονή για να αντιστοιχιστούν.

Μια συνδυαστική προσέγγιση χρησιμοποιείται συνήθως για τη διαχείριση μιας μεταβλητής, αλλά βρίσκεται σε εξέλιξη, φόρτωση. Μπορείτε να έχετε ένα χώρο συγκέντρωσης που υποβάλλονται πολλές εργασίες, αλλά να περιορίσετε το μέγεθος του αριθμού των κόμβους προς τα επάνω ή προς τα κάτω, σύμφωνα με την εργασία φόρτωση (ανατρέξτε στο θέμα [Κλιμάκωση τον υπολογισμό πόρους](#scaling-compute-resources) στην παρακάτω ενότητα). Μπορείτε να το κάνετε ανάγκη, που βασίζεται στην τρέχουσα φόρτωσης ή εκ των προτέρων, εάν μπορεί να γίνει πρόβλεψη φόρτωση.

## <a name="scaling-compute-resources"></a>Κλιμάκωση πόρους υπολογισμού

Με [αυτόματης κλίμακας](batch-automatic-scaling.md), μπορείτε να ρυθμίσετε την υπηρεσία δέσμη δυναμικά προσαρμόσετε τον αριθμό των κόμβοι υπολογισμού σε ένα χώρο συγκέντρωσης σύμφωνα με την τρέχουσα χρήση φόρτο εργασίας και πόρων σας σεναρίου υπολογισμού. Αυτό σας επιτρέπει να μειώσετε το συνολικό κόστος εκτελεί την εφαρμογή σας χρησιμοποιώντας μόνο τους πόρους που χρειάζεστε και τη διάθεση αυτούς που δεν χρειάζεστε.

Ενεργοποίηση αυτόματης κλίμακας, πληκτρολογείτε έναν [τύπο αυτόματης κλιμάκωσης](batch-automatic-scaling.md#automatic-scaling-formulas) και συσχετίζοντας αυτόν τον τύπο με ένα χώρο συγκέντρωσης. Η υπηρεσία δέσμης χρησιμοποιεί τον τύπο για να προσδιορίσετε τον αριθμό προορισμού κόμβους στο χώρο συγκέντρωσης για το επόμενο κλίμακας διάστημα (ένα διάστημα που μπορείτε να ρυθμίσετε). Μπορείτε να καθορίσετε τις ρυθμίσεις αυτόματης κλιμάκωσης για ένα χώρο συγκέντρωσης κατά τη δημιουργία του ή ενεργοποίηση κλιμάκωση σε ένα χώρο συγκέντρωσης αργότερα. Μπορείτε επίσης να ενημερώσετε τις ρυθμίσεις κλίμακας σε ένα χώρο συγκέντρωσης με κλιμάκωση δυνατότητα.

Ως παράδειγμα, ίσως μια εργασία απαιτεί υποβολή πολύ μεγάλο αριθμό των εργασιών που θα εκτελεστεί. Μπορείτε να αντιστοιχίσετε έναν τύπο κλίμακας στο χώρο συγκέντρωσης που ρυθμίζει τον αριθμό των κόμβους στο χώρο συγκέντρωσης με βάση τον αριθμό της τρέχουσας των εργασιών σε ουρά και το ποσοστό ολοκλήρωσης των εργασιών του έργου. Η υπηρεσία δέσμη περιοδικά υπολογίζει τον τύπο και αλλάζει το μέγεθος του χώρου συγκέντρωσης, που βασίζονται σε φόρτο εργασίας (Προσθήκη κόμβους για πολλές εργασίες σε ουρά και κατάργηση κόμβους για τις εργασίες σε ουρά ή δεν εκτελείται καμία) και τις άλλες ρυθμίσεις τύπου.

Ένας τύπος κλίμακας μπορεί να βασίζονται σε των παρακάτω μετρικών:

- **Μετρικά ώρας** βασίζονται σε στατιστικά στοιχεία που έχουν συλλεχθεί κάθε πέντε λεπτά τον καθορισμένο αριθμό των ωρών.

- **Μετρικά πόρων** βασίζονται σε χρήση CPU, χρήση του εύρους ζώνης, χρήση μνήμης και αριθμό κόμβους.

- **Μετρικά εργασίας** βασίζονται στην κατάσταση εργασίας, όπως το *ενεργό* (σε ουρά), *εκτελεί*ή *ολοκληρώθηκαν*.

Όταν αυτόματης κλίμακας μείωση του αριθμού των κόμβους υπολογιστικών σε ένα χώρο συγκέντρωσης, πρέπει να εξετάσετε τον τρόπο χειρισμού των εργασιών που εκτελούνται τη στιγμή της λειτουργίας μείωση. Για να συμπεριλάβετε αυτό, δέσμη παρέχει μια *επιλογή deallocation κόμβος* που μπορείτε να συμπεριλάβετε τους τύπους σας. Για παράδειγμα, μπορείτε να καθορίσετε ότι εκτελείται εργασίες έχουν διακοπεί αμέσως, διακοπεί αμέσως και, στη συνέχεια, τοποθετήθηκε για εκτέλεση σε έναν άλλο κόμβο ή επιτρέπεται να ολοκληρωθεί πριν από τον κόμβο καταργείται από το χώρο συγκέντρωσης.

Για περισσότερες πληροφορίες σχετικά με την αυτόματη κλιμάκωση μια εφαρμογή, ανατρέξτε στο θέμα [Αυτόματη κλίμακα τον υπολογισμό κόμβους σε ένα σύνολο δέσμη Azure](batch-automatic-scaling.md).

> [AZURE.TIP] Για να μεγιστοποιήσετε χρήσης πόρων υπολογισμού, ορίστε τον αριθμό προορισμού του κόμβους μηδέν στο τέλος μιας εργασίας, αλλά να επιτρέπεται η εκτέλεση εργασιών για να ολοκληρώσετε.

## <a name="security-with-certificates"></a>Ασφάλεια με πιστοποιητικά

Συνήθως πρέπει να χρησιμοποιήσετε πιστοποιητικά κατά την κρυπτογράφηση ή αποκρυπτογράφηση ευαίσθητες πληροφορίες για τις εργασίες, όπως το κλειδί για ένα [λογαριασμό αποθήκευσης Azure][azure_storage]. Για να υποστηρίξει αυτήν, μπορείτε να εγκαταστήσετε τα πιστοποιητικά σε κόμβους. Κρυπτογραφημένο απόρρητο είναι διέλευσή του μέσω παραμέτρους γραμμής εντολών για τις εργασίες ή ενσωματωμένο σε έναν από τους πόρους εργασίας και τα εγκατεστημένα πιστοποιητικά μπορεί να χρησιμοποιηθεί για αποκρυπτογράφηση τους.

Μπορείτε να χρησιμοποιήσετε το [πρόσθετο πιστοποιητικό] [ rest_add_cert] λειτουργία (το ΥΠΌΛΟΙΠΟ δέσμη) ή [CertificateOperations.CreateCertificate] [ net_create_cert] μέθοδο (δέσμη .NET) για να προσθέσετε ένα πιστοποιητικό σε ένα λογαριασμό δέσμης. Στη συνέχεια, μπορείτε να συσχετίσετε το πιστοποιητικό σε ένα νέο ή υπάρχον σύνολο. Όταν ένα πιστοποιητικό σχετίζεται με ένα χώρο συγκέντρωσης, την υπηρεσία δέσμη εγκαθιστά το πιστοποιητικό σε κάθε κόμβο στο χώρο συγκέντρωσης. Η υπηρεσία δέσμη εγκαθιστά τα κατάλληλα πιστοποιητικά όταν ξεκινά ο κόμβος προς τα επάνω, πριν από την εκκίνηση όλες τις εργασίες (συμπεριλαμβανομένης της εργασίας έναρξης και την εργασία manager).

Εάν προσθέσετε πιστοποιητικά σε έναν *υπάρχοντα* χώρο συγκέντρωσης, πρέπει να επανεκκινήσετε τους κόμβους υπολογισμού για τα πιστοποιητικά που εφαρμόζονται για τους κόμβους.

## <a name="error-handling"></a>Χειρισμού σφαλμάτων

Μπορεί να είναι απαραίτητα για το χειρισμό αποτυχίες εργασίας και εφαρμογών σας λύσεις δέσμης.

### <a name="task-failure-handling"></a>Χειρισμός αποτυχία εργασιών
Αποτυχίες εργασιών ανήκουν σε αυτές τις κατηγορίες:

- **Αποτυχίες προγραμματισμού**

    Εάν η μεταφορά των αρχείων που έχουν καθοριστεί για μια εργασία αποτύχει για οποιονδήποτε λόγο, "προγραμματισμού σφάλμα" έχει οριστεί για την εργασία.

    Προγραμματισμός σφάλματα μπορεί να προκύψει εάν έχετε μετακινήσει αρχεία πόρων της εργασίας, το λογαριασμό χώρου αποθήκευσης δεν είναι πλέον διαθέσιμη ή κάποιο άλλο ζήτημα παρουσιάστηκε που εμπόδισε την επιτυχή αντιγραφή των αρχείων στον κόμβο.

- **Αποτυχίες εφαρμογών**

    Η διαδικασία που καθορίζεται από την εργασία γραμμής εντολών επίσης μπορεί να αποτύχει. Η διαδικασία θεωρείται ότι έχουν αποτύχει όταν επιστρέφεται ένας κωδικός μη μηδενική Έξοδος από τη διαδικασία που εκτελείται από την εργασία (ανατρέξτε στο θέμα *εργασία κωδικούς εξόδου* στην επόμενη ενότητα).

    Για εφαρμογή αποτυχίες, μπορείτε να ρυθμίσετε για την αυτόματη επανάληψη εργασίας έως και έναν καθορισμένο αριθμό φορών δέσμης.

- **Αποτυχίες περιορισμού**

    Μπορείτε να ορίσετε έναν περιορισμό που καθορίζει το μέγιστο εκτέλεσης διάρκεια για μια εργασία ή μια εργασία, το *maxWallClockTime*. Αυτό μπορεί να είναι χρήσιμες για τον τερματισμό εργασιών "κολλήσει".

    Όταν έχει γίνει υπέρβαση του το μέγιστο χρονικό διάστημα, η εργασία έχει επισημανθεί ως *ολοκληρώθηκε*, αλλά τον κωδικό εξόδου έχει οριστεί σε `0xC000013A` και το πεδίο *schedulingError* έχει σημανθεί ως `{ category:"ServerError", code="TaskEnded"}`.

### <a name="debugging-application-failures"></a>Εντοπισμός σφαλμάτων αποτυχίες εφαρμογών

- `stderr`και`stdout`

    Κατά την εκτέλεση, μια εφαρμογή μπορεί να παράγουν διαγνωστικών εξόδου που μπορείτε να χρησιμοποιήσετε για την αντιμετώπιση προβλημάτων. Όπως αναφέρθηκε στην προηγούμενη ενότητα [αρχεία και καταλόγους](#files-and-directories), η υπηρεσία δέσμη εγγράφει τυπική έξοδο και εξόδου τυπικού σφάλματος σε `stdout.txt` και `stderr.txt` τα αρχεία στον κατάλογο εργασίας στον κόμβο υπολογισμού. Μπορείτε να χρησιμοποιήσετε την πύλη του Azure ή ένα από τα SDK δέσμη για να κάνετε λήψη αυτών των αρχείων. Για παράδειγμα, μπορείτε να ανακτήσετε αυτές και άλλα αρχεία για την αντιμετώπιση προβλημάτων με τη χρήση [ComputeNode.GetNodeFile] [ net_getfile_node] και [CloudTask.GetNodeFile] [ net_getfile_task] στη βιβλιοθήκη δέσμη .NET.

- **Κωδικοί εξόδου εργασίας**

    Όπως προαναφέρθηκε, μια εργασία έχει επισημανθεί ως απέτυχε από την υπηρεσία δέσμη εάν η διαδικασία που εκτελείται από την εργασία επιστρέφει έναν κωδικό εξόδου εκτός από μηδέν. Όταν μια εργασία για εκτέλεση μιας διαδικασίας, δέσμη συμπληρώνει ιδιότητα κώδικα έξοδος από την εργασία με την *Επιστροφή κώδικα της διαδικασίας*. Είναι σημαντικό να σημειωθεί ότι κωδικό εξόδου μιας εργασίας είναι **δεν** προσδιορίζεται από την υπηρεσία δέσμη--το προσδιορίζεται από τη διαδικασία μόνη ή του λειτουργικού συστήματος στην οποία εκτελείται η διαδικασία.

### <a name="accounting-for-task-failures-or-interruptions"></a>Λογιστική για αποτυχίες εργασία ή τις διακοπές

Εργασίες μερικές φορές μπορεί να αποτύχει ή να σας διακόψουν. Την ίδια την εφαρμογή εργασίας μπορεί να αποτύχει, μπορεί να γίνει επανεκκίνηση του κόμβου στον οποίο εκτελείται η εργασία ή ο κόμβος ενδέχεται να καταργηθούν από το χώρο συγκέντρωσης κατά τη διάρκεια μιας λειτουργίας αλλαγής μεγέθους εάν το χώρο συγκέντρωσης deallocation πολιτική έχει ρυθμιστεί για να καταργήσετε τους κόμβους αμέσως χωρίς να περιμένουν για να ολοκληρώσετε τις εργασίες. Σε όλες τις περιπτώσεις, η εργασία μπορεί να είναι αυτόματα τοποθετήθηκε από δέσμη για εκτέλεση σε έναν άλλο κόμβο.

Είναι επίσης πιθανό για ένα περιστασιακό ζήτημα για να προκαλέσει να σταματήσει να ανταποκρίνεται ή για να εκτελέσετε πολύ μεγάλο για να εκτελέσετε μια εργασία. Μπορείτε να ορίσετε το μέγιστο χρόνο εκτέλεσης για μια εργασία. Εάν υπάρχει υπέρβαση, δέσμη διακόπτει την εφαρμογή των εργασιών.

### <a name="connecting-to-compute-nodes"></a>Σύνδεση για τον υπολογισμό κόμβοι

Μπορείτε να πραγματοποιήσετε επιπλέον εντοπισμού και αντιμετώπιση προβλημάτων πραγματοποιώντας είσοδο με ένα κόμβος από απόσταση. Μπορείτε να χρησιμοποιήσετε την πύλη του Azure για λήψη ενός αρχείου πρωτόκολλο απομακρυσμένης επιφάνειας εργασίας (RDP) για τους κόμβους Windows και να λάβετε πληροφορίες σύνδεσης ασφαλούς κελύφους (SSH) για τους κόμβους Linux. Μπορείτε επίσης να κάνετε αυτό, χρησιμοποιώντας τα API δέσμη--για παράδειγμα, με [.NET δέσμη] [ net_rdpfile] ή [Python δέσμης](batch-linux-nodes.md#connect-to-linux-nodes).

>[AZURE.IMPORTANT] Για να συνδεθείτε σε έναν κόμβο μέσω RDP ή SSH, πρέπει πρώτα να δημιουργήσετε ένα χρήστη στον κόμβο. Για να το κάνετε αυτό, μπορείτε να χρησιμοποιήσετε το Azure πύλης, [προσθέστε ένα λογαριασμό χρήστη σε έναν κόμβο] [ rest_create_user] χρησιμοποιώντας τη μαζική REST API, καλέστε την [ComputeNode.CreateComputeNodeUser] [ net_create_user] μέθοδο στο .NET δέσμη ή κλήση του [add_user] [ py_add_user] μέθοδο στη λειτουργική μονάδα Python δέσμης.

### <a name="troubleshooting-bad-compute-nodes"></a>Αντιμετώπιση προβλημάτων "ακατάλληλη" τον υπολογισμό κόμβοι

Στις περιπτώσεις όπου αποτυγχάνει ορισμένες από τις εργασίες σας, την εφαρμογή-πελάτη δέσμη ή υπηρεσία να εξετάσετε τα μετα-δεδομένα των αποτυχημένων εργασιών για να προσδιορίσετε ένα πρόβλημα στη λειτουργία μιας κόμβο. Κάθε κόμβος σε ένα χώρο συγκέντρωσης δίνεται ένα μοναδικό Αναγνωριστικό και τα μετα-δεδομένα εργασίας περιλαμβάνει τον κόμβο στην οποία εκτελείται μια εργασία. Αφού έχετε προσδιορίσει έναν κόμβο με το πρόβλημα, μπορείτε να εκτελέσετε διάφορες ενέργειες με αυτό:

- **Κάντε επανεκκίνηση του κόμβου** ([REST][rest_reboot] | [.NET][net_reboot])

    Επανεκκίνηση του κόμβου μερικές φορές να καταργήσετε κρυφό θέματα όπως κολλημένη ή των οποίων διακόπηκε η λειτουργία διεργασίες προς τα επάνω. Σημειώστε ότι αν ο χώρος συγκέντρωσης χρησιμοποιεί μια εργασία έναρξης ή την εργασία σας μια εργασία προετοιμασίας, εκτελούνται όταν γίνει επανεκκίνηση τον κόμβο.

- **Ο κόμβος reimage** ([REST][rest_reimage] | [.NET][net_reimage])

    Αυτό εγκαθιστά ξανά το λειτουργικό σύστημα στον κόμβο. Όπως με την επανεκκίνηση έναν κόμβο, Έναρξη εργασίες και εργασίες προετοιμασίας είναι εκτελέστε ξανά αφού έχει γίνει reimaged τον κόμβο.

- **Καταργήστε τον κόμβο από το χώρο συγκέντρωσης** ([REST][rest_remove] | [.NET][net_remove])

    Μερικές φορές είναι απαραίτητο να καταργήσετε εντελώς τον κόμβο από το χώρο συγκέντρωσης.

- **Απενεργοποίηση προγραμματισμού στον κόμβο εργασιών** ([REST][rest_offline] | [.NET][net_offline])

    Αυτό αποτελεσματική μεταφέρει στον κόμβο "χωρίς σύνδεση", έτσι ώστε να χωρίς περαιτέρω εργασίες έχουν ανατεθεί σε αυτήν, αλλά επιτρέπει στον κόμβο για να παραμείνει εκτελείται και στο χώρο συγκέντρωσης. Αυτό σας επιτρέπει να πραγματοποιήσετε περαιτέρω διερεύνηση την αιτία οι αποτυχίες χωρίς να χάσετε τα δεδομένα της εργασίας απέτυχε--και χωρίς τον κόμβο προκαλεί αποτυχίες επιπλέον εργασιών. Για παράδειγμα, μπορείτε να απενεργοποιήσετε προγραμματισμού στον κόμβο, στη συνέχεια, [Πραγματοποιήστε είσοδο από απόσταση](#connecting-to-compute-nodes) για να εξετάσετε αρχεία καταγραφής συμβάντων στον κόμβο ή προβλημάτων άλλων εργασιών. Αφού ολοκληρώσετε την έρευνα, μπορείτε να μεταφέρετε τον κόμβο πάλι σε σύνδεση, στη συνέχεια, ενεργοποιώντας τον προγραμματισμό των εργασιών ([REST][rest_online] | [.NET][net_online]), ή εκτελέστε μία από τις άλλες ενέργειες όπως εξηγήθηκε προηγουμένως.

> [AZURE.IMPORTANT] Με κάθε ενέργεια που περιγράφεται σε αυτήν την ενότητα--επανεκκίνηση, reimage, κατάργηση και απενεργοποιήστε τον προγραμματισμό των εργασιών--, θα μπορείτε να καθορίσετε τον τρόπο χειρισμού των εργασιών που εκτελούνται τη συγκεκριμένη στιγμή στον κόμβο κατά την εκτέλεση της ενέργειας. Για παράδειγμα, όταν απενεργοποιείτε τον προγραμματισμό των εργασιών σε έναν κόμβο με τη χρήση της βιβλιοθήκης του προγράμματος-πελάτη .NET δέσμη, μπορείτε να καθορίσετε μια [DisableComputeNodeSchedulingOption] [ net_offline_option] τιμή απαρίθμησης για να καθορίσετε αν για να **τερματίσετε** εκτελεί εργασίες, **Requeue** τους για τον προγραμματισμό σε άλλους κόμβους, ή να επιτρέψετε την εκτέλεση εργασιών για να ολοκληρωθεί πριν από την εκτέλεση της ενέργειας (**TaskCompletion**).

## <a name="next-steps"></a>Επόμενα βήματα

- Θα καθοδηγήσουν για μια εφαρμογή δέσμης δείγμα βήμα προς βήμα στο [Γρήγορα αποτελέσματα με τη βιβλιοθήκη δέσμη Azure για το .NET](batch-dotnet-get-started.md). Υπάρχει επίσης μια [έκδοση Python](batch-python-tutorial.md) του προγράμματος εκμάθησης που εκτελείται ένα φόρτο εργασίας σε κόμβους υπολογιστικών Linux.

- Λήψη και να δημιουργήσετε τη [Δέσμη Explorer] [ github_batchexplorer] δείγμα έργου για χρήση κατά την ανάπτυξη λύσεων του δέσμη. Χρησιμοποιώντας την Εξερεύνηση δέσμη, μπορείτε να εκτελέσετε τα παρακάτω και πολλά άλλα:
  - Παρακολούθηση και να χειριστείτε τα σύνολα, εργασίες και εργασίες μέσα στο λογαριασμό σας δέσμης
  - Λήψη `stdout.txt`, `stderr.txt`, και άλλα αρχεία από κόμβους
  - Δημιουργία χρηστών σε κόμβους και λήψη αρχείων RDP για απομακρυσμένη σύνδεση

- Μάθετε πώς μπορείτε να [δημιουργήσετε χώρους συγκέντρωσης του κόμβους υπολογιστικών Linux](batch-linux-nodes.md).

- Επισκεφθείτε το [φόρουμ δέσμη Azure] [ batch_forum] στο MSDN. Το φόρουμ αποτελεί ένα καλό μέρος για να υποβάλετε ερωτήσεις, αν είναι απλώς εκμάθησης ή είναι ειδικός σε χρήση δέσμης.

[1]: ./media/batch-api-basics/node-folder-structure.png

[azure_storage]: https://azure.microsoft.com/services/storage/
[batch_forum]: https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurebatch
[cloud_service_sizes]: ../cloud-services/cloud-services-sizes-specs.md
[msmpi]: https://msdn.microsoft.com/library/bb524831.aspx
[github_samples]: https://github.com/Azure/azure-batch-samples
[github_sample_taskdeps]:  https://github.com/Azure/azure-batch-samples/tree/master/CSharp/ArticleProjects/TaskDependencies
[github_batchexplorer]: https://github.com/Azure/azure-batch-samples/tree/master/CSharp/BatchExplorer
[batch_net_api]: https://msdn.microsoft.com/library/azure/mt348682.aspx
[msdn_env_vars]: https://msdn.microsoft.com/library/azure/mt743623.aspx
[net_cloudjob_jobmanagertask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.jobmanagertask.aspx
[net_cloudjob_priority]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.priority.aspx
[net_cloudpool_starttask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudpool.starttask.aspx
[net_cloudtask_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.environmentsettings.aspx
[net_create_cert]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.certificateoperations.createcertificate.aspx
[net_create_user]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.createcomputenodeuser.aspx
[net_getfile_node]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getnodefile.aspx
[net_getfile_task]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.getnodefile.aspx
[net_job_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.commonenvironmentsettings.aspx
[net_multiinstancesettings]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.multiinstancesettings.aspx
[net_onalltaskscomplete]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.onalltaskscomplete.aspx
[net_rdp]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getrdpfile.aspx
[net_reboot]: https://msdn.microsoft.com/library/azure/mt631495.aspx
[net_reimage]: https://msdn.microsoft.com/library/azure/mt631496.aspx
[net_remove]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.pooloperations.removefrompoolasync.aspx
[net_offline]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.disableschedulingasync.aspx
[net_online]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.enableschedulingasync.aspx
[net_offline_option]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.common.disablecomputenodeschedulingoption.aspx
[net_rdpfile]: https://msdn.microsoft.com/library/azure/Mt272127.aspx
[vnet]: https://msdn.microsoft.com/library/azure/dn820174.aspx#bk_netconf

[py_add_user]: http://azure-sdk-for-python.readthedocs.io/en/latest/ref/azure.batch.operations.html#azure.batch.operations.ComputeNodeOperations.add_user

[batch_rest_api]: https://msdn.microsoft.com/library/azure/Dn820158.aspx
[rest_add_job]: https://msdn.microsoft.com/library/azure/mt282178.aspx
[rest_add_pool]: https://msdn.microsoft.com/library/azure/dn820174.aspx
[rest_add_cert]: https://msdn.microsoft.com/library/azure/dn820169.aspx
[rest_add_task]: https://msdn.microsoft.com/library/azure/dn820105.aspx
[rest_create_user]: https://msdn.microsoft.com/library/azure/dn820137.aspx
[rest_get_task_info]: https://msdn.microsoft.com/library/azure/dn820133.aspx
[rest_job_schedules]: https://msdn.microsoft.com/library/azure/mt282179.aspx
[rest_multiinstance]: https://msdn.microsoft.com/library/azure/mt637905.aspx
[rest_multiinstancesettings]: https://msdn.microsoft.com/library/azure/dn820105.aspx#multiInstanceSettings
[rest_update_job]: https://msdn.microsoft.com/library/azure/dn820162.aspx
[rest_rdp]: https://msdn.microsoft.com/library/azure/dn820120.aspx
[rest_reboot]: https://msdn.microsoft.com/library/azure/dn820171.aspx
[rest_reimage]: https://msdn.microsoft.com/library/azure/dn820157.aspx
[rest_remove]: https://msdn.microsoft.com/library/azure/dn820194.aspx
[rest_offline]: https://msdn.microsoft.com/library/azure/mt637904.aspx
[rest_online]: https://msdn.microsoft.com/library/azure/mt637907.aspx

[vm_marketplace]: https://azure.microsoft.com/marketplace/virtual-machines/
