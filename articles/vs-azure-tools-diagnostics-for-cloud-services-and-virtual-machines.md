<properties
   pageTitle="Ρύθμιση παραμέτρων διαγνωστικών για τις υπηρεσίες Azure Cloud και εικονικές μηχανές | Microsoft Azure"
   description="Περιγράφει τον τρόπο ρύθμισης παραμέτρων των πληροφοριών διαγνωστικών για τον εντοπισμό σφαλμάτων υπηρεσιών Azure cloude και εικονικές μηχανές (ΣΠΣ) στο Visual Studio."
   services="visual-studio-online"
   documentationCenter="na"
   authors="TomArcher"
   manager="douge"
   editor="" />
<tags
   ms.service="multiple"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="multiple"
   ms.date="08/15/2016"
   ms.author="tarcher" />

# <a name="configuring-diagnostics-for-azure-cloud-services-and-virtual-machines"></a>Ρύθμιση παραμέτρων διαγνωστικών για τις υπηρεσίες Azure Cloud και εικονικές μηχανές

Όταν χρειάζεστε για την αντιμετώπιση προβλημάτων σε μια υπηρεσία Azure cloud ή Azure εικονική μηχανή, μπορείτε να ρυθμίσετε Azure Διαγνωστικά πιο εύκολα με χρήση του Visual Studio. Διαγνωστικά του Azure καταγράφει δεδομένα του συστήματος και καταγραφή δεδομένων σε εικονικές μηχανές και εικονική μηχανή παρουσιών που εκτελούνται την υπηρεσία cloud και μεταφέρει τα δεδομένα σε ένα λογαριασμό του χώρου αποθήκευσης της επιλογής σας. Για περισσότερες πληροφορίες σχετικά με την καταγραφή στο Azure Διαγνωστικά, ανατρέξτε στο θέμα [Ενεργοποίηση καταγραφής για τις εφαρμογές web στην υπηρεσία εφαρμογής Azure Διαγνωστικά](./app-service-web/web-sites-enable-diagnostic-log.md) .

Αυτό το θέμα δείχνει πώς μπορείτε να ενεργοποιήσετε και να ρυθμίσετε τις παραμέτρους Azure Διαγνωστικά στο Visual Studio, και τα δύο πριν και μετά την ανάπτυξη, καθώς και σε εικονικές μηχανές Windows Azure. Σας δείχνει επίσης πώς μπορείτε να επιλέξετε τους τύπους των διαγνωστικών πληροφοριών για τη συλλογή και πώς μπορείτε να προβάλετε τις πληροφορίες μετά αυτήν τη συλλογή.

Μπορείτε να ρυθμίσετε Διαγνωστικά Azure με τους εξής τρόπους:

- Μπορείτε να αλλάξετε τις ρυθμίσεις παραμέτρων Διαγνωστικά μέσω του παραθύρου διαλόγου **Ρύθμισης παραμέτρων Διαγνωστικά** στο Visual Studio. Οι ρυθμίσεις αποθηκεύονται σε ένα αρχείο που ονομάζεται diagnostics.wadcfgx (diagnostics.wadcfg σε Azure SDK 2.4 ή παλαιότερη έκδοση). Εναλλακτικά, μπορείτε να τροποποιήσετε απευθείας το αρχείο ρύθμισης παραμέτρων. Εάν ενημερώσετε με μη αυτόματο τρόπο το αρχείο, οι αλλαγές ρύθμισης παραμέτρων θα ισχύσει την επόμενη ώρα να αναπτύξετε το cloud υπηρεσίας για να Azure ή εκτέλεση της υπηρεσίας σε το προσομοίωσης.

- Χρησιμοποιήστε **Εξερεύνηση Cloud** ή **Explorer διακομιστή** στο Visual Studio για να αλλάξετε τις ρυθμίσεις διαγνωστικών για μια υπηρεσία cloud της εκτελείται ή εικονική μηχανή.

## <a name="azure-26-diagnostics-changes"></a>Αλλαγές Διαγνωστικά Azure 2.6

Για τα έργα Azure SDK 2.6 στο Visual Studio, έγιναν τις ακόλουθες αλλαγές. (Αυτές οι αλλαγές εφαρμοστούν επίσης στις νεότερες εκδόσεις του Azure SDK.)

- Το τοπικό προσομοίωσης υποστηρίζει πλέον Διαγνωστικά. Αυτό σημαίνει ότι μπορείτε να συλλέξετε διαγνωστικά δεδομένα και να βεβαιωθείτε ότι η εφαρμογή σας είναι να δημιουργήσετε το σωστό ανιχνεύσεις ενώ είστε ανάπτυξη και δοκιμές στο Visual Studio. Η συμβολοσειρά σύνδεσης `UseDevelopmentStorage=true` σας δίνει τη δυνατότητα συλλογής δεδομένων Διαγνωστικά ενώ χρησιμοποιείτε το project υπηρεσία cloud στο Visual Studio, χρησιμοποιώντας το προσομοίωσης Azure χώρου αποθήκευσης. Όλα τα διαγνωστικά δεδομένα που συλλέγονται στο λογαριασμό χώρου αποθήκευσης (χώρος αποθήκευσης ανάπτυξης).

- Συμβολοσειρά σύνδεσης λογαριασμού τα Διαγνωστικά του χώρου αποθήκευσης (Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString) αποθηκεύεται ξανά στο αρχείο ρύθμισης παραμέτρων (.cscfg) της υπηρεσίας. Στο Azure SDK 2,5 το λογαριασμό χώρου αποθήκευσης Διαγνωστικά έχει καθοριστεί στο αρχείο diagnostics.wadcfgx.

Υπάρχουν ορισμένες διαφορές αξιοσημείωτες μεταξύ τον τρόπο τη συμβολοσειρά σύνδεσης ολοκληρώθηκε με επιτυχία στο Azure SDK 2.4 και παλαιότερες εκδόσεις και τον τρόπο που λειτουργεί στο Azure SDK 2.6 και νεότερες εκδόσεις.

- Στο Azure SDK 2.4 και προηγούμενες εκδόσεις, τη συμβολοσειρά σύνδεσης χρησιμοποιήθηκε ως χρόνο εκτέλεσης από την προσθήκη Διαγνωστικά για να λάβετε τις πληροφορίες λογαριασμού χώρου αποθήκευσης για τη μεταφορά αρχείων καταγραφής διαγνωστικών.

- Στο Azure SDK 2.6 και νεότερες εκδόσεις, τη συμβολοσειρά σύνδεσης Διαγνωστικά χρησιμοποιείται από Visual Studio για να ρυθμίσετε τις παραμέτρους της επέκτασης Διαγνωστικά με τις πληροφορίες λογαριασμού κατάλληλη αποθήκευση κατά τη δημοσίευση. Η συμβολοσειρά σύνδεσης σάς επιτρέπει να ορίσετε διαφορετικό χώρο αποθήκευσης λογαριασμών για διαφορετική υπηρεσία ρυθμίσεις παραμέτρων που θα χρησιμοποιήσετε Visual Studio κατά τη δημοσίευση. Ωστόσο, επειδή η προσθήκη Διαγνωστικά δεν είναι πλέον διαθέσιμη (μετά το 2,5 SDK Azure), το αρχείο .cscfg μόνη δεν είναι δυνατό να ενεργοποιήσετε την επέκταση Διαγνωστικά. Πρέπει να ενεργοποιήσετε την επέκταση ξεχωριστά μέσω εργαλεία όπως το Visual Studio ή PowerShell.

- Για να απλοποιήσετε τη διαδικασία της ρύθμισης παραμέτρων την επέκταση Διαγνωστικά με το PowerShell, το αποτέλεσμα του πακέτου από το Visual Studio περιέχει επίσης τη δημόσια ρύθμιση παραμέτρων XML για την επέκταση Διαγνωστικά για κάθε ρόλο. Visual Studio χρησιμοποιεί τη συμβολοσειρά σύνδεσης Διαγνωστικά για να συμπληρώσετε τις πληροφορίες λογαριασμού χώρου αποθήκευσης που υπάρχει στη δημόσια ρύθμιση παραμέτρων. Τα αρχεία δημόσια config δημιουργούνται στο φάκελο επεκτάσεις και ακολουθήστε το μοτίβο PaaSDiagnostics. &lt;Όνομα ρόλου >. PubConfig.xml. Οποιαδήποτε αναπτύξεις PowerShell βάσει να χρησιμοποιήσετε αυτό το μοτίβο για να αντιστοιχίσετε κάθε ρύθμιση παραμέτρων σε ένα ρόλο.

- Η συμβολοσειρά σύνδεσης στο αρχείο .cscfg χρησιμοποιείται επίσης από την [πύλη του Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040) για πρόσβαση στα δεδομένα Διαγνωστικά ώστε να μπορεί να εμφανίζεται στην καρτέλα **Εποπτεία** . Η συμβολοσειρά σύνδεσης είναι απαραίτητη για τη ρύθμιση παραμέτρων της υπηρεσίας για να εμφανίσετε λεπτομερή δεδομένα παρακολούθησης στην πύλη του.

## <a name="migrating-projects-to-azure-sdk-26-and-later"></a>Η μετεγκατάσταση έργα σε Azure SDK 2.6 και νεότερες εκδόσεις

Όταν κάνετε μετεγκατάσταση από το Azure SDK 2,5 Azure SDK 2.6 ή νεότερη έκδοση, εάν είχατε ένα λογαριασμό χώρου αποθήκευσης διαγνωστικά που καθορίζεται στο αρχείο .wadcfgx, στη συνέχεια, θα παραμείνει εκεί. Για να επωφεληθείτε από την ευελιξία να χρησιμοποιώντας τους λογαριασμούς διαφορετικό χώρο αποθήκευσης για διαμορφώσεις διαφορετικό χώρο αποθήκευσης, θα πρέπει να προσθέσετε με μη αυτόματο τρόπο τη συμβολοσειρά σύνδεσης στο έργο σας. Εάν μετεγκατάσταση ενός έργου από το Azure SDK 2.4 ή προηγούμενη έκδοση στο Azure SDK 2.6, στη συνέχεια, τις συμβολοσειρές σύνδεσης Διαγνωστικά διατηρούνται. Ωστόσο, σημειώστε τις αλλαγές στο πώς συμβολοσειρές σύνδεσης αντιμετωπίζονται στο Azure SDK 2.6 όπως καθορίζονται στην προηγούμενη ενότητα.

### <a name="how-visual-studio-determines-the-diagnostics-storage-account"></a>Πώς θα Visual Studio Καθορίζει το λογαριασμό χώρου αποθήκευσης Διαγνωστικά

- Εάν μια συμβολοσειρά σύνδεσης Διαγνωστικά έχει καθοριστεί στο αρχείο .cscfg, το Visual Studio χρησιμοποιεί για να ρυθμίσετε την επέκταση Διαγνωστικά κατά τη δημοσίευση και, κατά τη δημιουργία των αρχείων xml δημόσια ρύθμισης παραμέτρων κατά τη διάρκεια της συσκευασίας.

- Εάν δεν υπάρχει συμβολοσειρά σύνδεσης Διαγνωστικά έχει οριστεί στο αρχείο .cscfg, στη συνέχεια, Visual Studio εμπίπτει ξανά για να χρησιμοποιώντας το λογαριασμό χώρου αποθήκευσης που καθορίζεται στο αρχείο .wadcfgx για να ρυθμίσετε την επέκταση Διαγνωστικά κατά τη δημοσίευση, και δημιουργία τα αρχεία xml δημόσια ρύθμισης παραμέτρων όταν συσκευασία.

- Η συμβολοσειρά σύνδεσης Διαγνωστικά στο αρχείο .cscfg προηγείται του λογαριασμού χώρου αποθήκευσης του αρχείου .wadcfgx. Εάν μια συμβολοσειρά σύνδεσης Διαγνωστικά έχει οριστεί στο αρχείο .cscfg, στη συνέχεια, Visual Studio που χρησιμοποιεί και παραβλέπει το λογαριασμό χώρου αποθήκευσης στο .wadcfgx.

### <a name="what-does-the-update-development-storage-connection-strings-checkbox-do"></a>Τι κάνει η "Ενημέρωση ανάπτυξης του χώρου αποθήκευσης συμβολοσειρές σύνδεσης..." επιλογή του πλαισίου ελέγχου να κάνετε;

Το πλαίσιο ελέγχου για τις **συμβολοσειρές σύνδεσης χώρου αποθήκευσης ανάπτυξης ενημέρωσης για εργαλεία διαγνωστικών και προσωρινή αποθήκευση με το Microsoft Azure αποθήκευσης διαπιστευτήρια λογαριασμού κατά τη δημοσίευση σε Microsoft Azure** παρέχει έναν εύχρηστο τρόπο για να ενημερώσετε τυχόν συμβολοσειρές ανάπτυξης του χώρου αποθήκευσης λογαριασμό σύνδεσης με το λογαριασμό Azure χώρου αποθήκευσης που καθορίσατε κατά τη δημοσίευση.

Για παράδειγμα, ας υποθέσουμε ότι μπορείτε να επιλέξετε αυτό το πλαίσιο ελέγχου και καθορίζει τη συμβολοσειρά σύνδεσης Διαγνωστικά `UseDevelopmentStorage=true`. Όταν δημοσιεύετε το έργο να Azure, Visual Studio θα ενημερωθεί αυτόματα τη συμβολοσειρά σύνδεσης Διαγνωστικά με το λογαριασμό χώρου αποθήκευσης που καθορίσατε στον Οδηγό δημοσίευση. Ωστόσο, εάν ένας λογαριασμός πραγματικός χώρος αποθήκευσης έχει καθοριστεί ως συμβολοσειρά σύνδεσης Διαγνωστικά, στη συνέχεια, αυτόν το λογαριασμό χρησιμοποιείται αντί για αυτό.

## <a name="diagnostics-functionality-differences-between-azure-sdk-24-and-earlier-and-azure-sdk-25-and-later"></a>Διαγνωστικά λειτουργίες διαφορές μεταξύ Azure SDK 2.4 και προηγούμενες και Azure SDK 2,5 και νεότερες εκδόσεις

Εάν πραγματοποιείτε αναβάθμιση το έργο σας από το Azure SDK 2.4 2,5 SDK Azure ή νεότερη έκδοση, που θα πρέπει να φέρουν υπόψη τις ακόλουθες διαφορές λειτουργίες Διαγνωστικά.

- **Ρύθμιση παραμέτρων APIs έχουν καταργηθεί** – προγραμματισμού ρύθμισης παραμέτρων των διαγνωστικών του είναι διαθέσιμη στο Azure SDK 2.4 ή με προηγούμενες εκδόσεις, αλλά έχει καταργηθεί στο Azure SDK 2,5 και νεότερες εκδόσεις. Εάν σας παραμέτρων διαγνωστικών ορίζεται αυτήν τη στιγμή στον κώδικα, θα πρέπει να ρυθμίσει ξανά τις παραμέτρους αυτές τις ρυθμίσεις από την αρχή του μετεγκαταστάθηκαν έργου με τη σειρά για τα Διαγνωστικά του για να συνεχίσετε να εργάζεστε. Το αρχείο ρύθμισης παραμέτρων διαγνωστικών για Azure SDK 2.4 είναι diagnostics.wadcfg και diagnostics.wadcfgx για 2,5 SDK Azure και νεότερη έκδοση.

- **Διαγνωστικά για εφαρμογές υπηρεσιών cloud μπορούν να ρυθμιστούν μόνο σε επίπεδο ρόλων, όχι στο επίπεδο της παρουσίας.**

- **Κάθε φορά που μπορείτε να αναπτύξετε την εφαρμογή σας, η ρύθμιση παραμέτρων Διαγνωστικά ενημερώνεται** – αυτό μπορεί να προκαλέσει ζητήματα ομοιομορφίας Εάν αλλάξετε της ρύθμισης παραμέτρων Διαγνωστικά από την Εξερεύνηση του διακομιστή και, στη συνέχεια, αναπτύξτε ξανά την εφαρμογή σας.

- **Έχουν ρυθμιστεί στο Azure SDK 2,5 και νεότερη έκδοση, σφάλμα ενδείξεων σφαλμάτων στο αρχείο ρύθμισης παραμέτρων Διαγνωστικά, όχι σε κώδικα** – εάν έχετε ρυθμίσει τις παραμέτρους στον κώδικα ενδείξεις σφαλμάτων, θα πρέπει να μεταφέρετε με μη αυτόματο τρόπο τις παραμέτρους από κώδικα στο αρχείο ρύθμισης παραμέτρων, επειδή το ενδείξεις σφαλμάτων δεν μεταφέρονται κατά τη διάρκεια της μετεγκατάστασης του Azure SDK 2.6.

## <a name="enable-diagnostics-in-cloud-service-projects-before-deploying-them"></a>Ενεργοποίηση Διαγνωστικά έργα υπηρεσία cloud πριν από την ανάπτυξη τους

Στο Visual Studio, μπορείτε να επιλέξετε να συλλέξετε διαγνωστικά δεδομένα για τους ρόλους που εκτελούνται στο Azure, κατά την εκτέλεση της υπηρεσίας στο το προσομοίωσης πριν από την ανάπτυξή του. Όλες οι αλλαγές ρυθμίσεων των διαγνωστικών του στο Visual Studio αποθηκεύονται στο αρχείο ρύθμισης παραμέτρων diagnostics.wadcfgx. Αυτές οι ρυθμίσεις παραμέτρων Καθορίστε το λογαριασμό χώρου αποθήκευσης όπου είναι αποθηκευμένο Διαγνωστικά δεδομένων κατά την ανάπτυξη της υπηρεσίας cloud.

### <a name="to-enable-diagnostics-in-visual-studio-before-deployment"></a>Για να ενεργοποιήσετε τα Διαγνωστικά στο Visual Studio πριν από την ανάπτυξη

1. Στο μενού συντόμευσης για το ρόλο που σας ενδιαφέρει, επιλέξτε **Ιδιότητες**και, στη συνέχεια, επιλέξτε την καρτέλα **ρύθμισης παραμέτρων** στο παράθυρο **Ιδιότητες** του ρόλου.

1. Στην ενότητα **Διαγνωστικά** , βεβαιωθείτε ότι είναι επιλεγμένο το πλαίσιο ελέγχου **Ενεργοποίηση Διαγνωστικά** .

    ![Πρόσβαση στην επιλογή Ενεργοποίηση Διαγνωστικά](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796660.png)

1. Επιλέξτε το κουμπί αποσιωπητικά (...) για να καθορίσετε το λογαριασμό χώρου αποθήκευσης όπου θέλετε τα διαγνωστικά δεδομένα που είναι αποθηκευμένα. Το λογαριασμό χώρου αποθήκευσης που επιλέγετε θα είναι στη θέση όπου αποθηκεύονται τα διαγνωστικά δεδομένα.

    ![Καθορίστε το λογαριασμό χώρου αποθήκευσης για χρήση](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796661.png)

1. Στο παράθυρο διαλόγου **Δημιουργία συμβολοσειράς σύνδεσης χώρου αποθήκευσης** , καθορίστε εάν θέλετε να συνδεθείτε χρησιμοποιώντας το Azure προσομοίωσης χώρου αποθήκευσης, μια συνδρομή του Azure ή έχουν εισαχθεί μη αυτόματα τα διαπιστευτήρια.

    ![Παράθυρο διαλόγου λογαριασμός χώρου αποθήκευσης](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796662.png)

  - Εάν επιλέξετε το Microsoft Azure προσομοίωσης αποθήκευσης επιλογής, τη συμβολοσειρά σύνδεσης έχει οριστεί να UseDevelopmentStorage = true.

  - Εάν επιλέξετε την επιλογή τη συνδρομή σας, μπορείτε να επιλέξετε το Azure συνδρομή που θέλετε να χρησιμοποιήσετε και το όνομα του λογαριασμού. Μπορείτε να επιλέξετε το κουμπί "Διαχείριση λογαριασμών" για να διαχειριστείτε τις συνδρομές σας στο Azure.

  - Εάν επιλέξετε το στοιχείο διαπιστευτήρια που εισάγονται με μη αυτόματο τρόπο, θα σας ζητηθεί να εισαγάγετε το όνομα και το κλειδί του Azure λογαριασμού που θέλετε να χρησιμοποιήσετε.

1. Επιλέξτε το κουμπί **Ρύθμιση παραμέτρων** για να προβάλετε το παράθυρο διαλόγου **παραμέτρων διαγνωστικών** . Κάθε καρτέλα (με εξαίρεση **Γενικά** και **Καταλόγων Log**) αντιπροσωπεύει μια προέλευση δεδομένων διαγνωστικών που μπορείτε να συλλέξετε. Στην προεπιλεγμένη καρτέλα, **Γενικά**, παρέχει τις ακόλουθες επιλογές συλλογής δεδομένων διαγνωστικών: **μόνο τα σφάλματα**, **όλες οι πληροφορίες**και **προσαρμοσμένο πρόγραμμα**. Η προεπιλεγμένη επιλογή, **μόνο τα σφάλματα**, χρειάζονται τη μικρότερη ποσότητα χώρου αποθήκευσης, επειδή αυτό δεν μεταφορά προειδοποιήσεις ή μηνύματα παρακολούθησης. Η επιλογή πληροφορίες όλα μεταφέρει τις περισσότερες πληροφορίες και είναι, επομένως, η πιο ακριβό επιλογή όσον αφορά χώρου αποθήκευσης.

    ![Ενεργοποίηση Azure Διαγνωστικά και ρύθμισης παραμέτρων](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758144.png)

1. Για αυτό το παράδειγμα, ενεργοποιήστε την επιλογή **προσαρμοσμένο πρόγραμμα** , ώστε να μπορείτε να προσαρμόσετε τα δεδομένα που συλλέγονται.

1. Στο πλαίσιο **Όριο δίσκου σε MB** Καθορίζει πόσο χώρο θέλετε να εισαγάγετε στο λογαριασμό σας στο χώρο αποθήκευσης για τα δεδομένα Διαγνωστικά. Εάν θέλετε, μπορείτε να αλλάξετε την προεπιλεγμένη τιμή.

1. Σε κάθε καρτέλα Διαγνωστικά δεδομένων που θέλετε να συλλέξετε, επιλέξτε το **Ενεργοποίηση μεταφορά του <log type> ** του πλαισίου ελέγχου. Για παράδειγμα, εάν θέλετε να συλλέξετε αρχεία καταγραφής εφαρμογών, επιλέξτε το πλαίσιο ελέγχου **Ενεργοποίηση μεταφορά των αρχείων καταγραφής της εφαρμογής** στην καρτέλα **Αρχεία καταγραφής εφαρμογών** . Επίσης, καθορίστε οποιεσδήποτε άλλες πληροφορίες που απαιτούνται από κάθε τύπο δεδομένων Διαγνωστικά. Ανατρέξτε στην ενότητα **Ρύθμιση παραμέτρων προελεύσεις δεδομένων Διαγνωστικά** αργότερα σε αυτό το θέμα για ρύθμιση παραμέτρων πληροφορίες σε κάθε καρτέλα.

1. Αφού ενεργοποιήσετε συλλογή από όλα τα διαγνωστικά δεδομένα που θέλετε, επιλέξτε το κουμπί **OK** .

1. Εκτελέστε το έργο σας Azure cloud υπηρεσίας στο Visual Studio ως συνήθως. Όταν χρησιμοποιείτε την εφαρμογή σας, αποθηκεύεται τις πληροφορίες καταγραφής που έχετε ενεργοποιήσει το λογαριασμό Azure χώρου αποθήκευσης που καθορίσατε.

## <a name="enable-diagnostics-in-azure-virtual-machines"></a>Ενεργοποίηση Διαγνωστικά σε εικονικές μηχανές Windows Azure

Στο Visual Studio, μπορείτε να επιλέξετε για τη συλλογή δεδομένων διαγνωστικών για Azure εικονικές μηχανές.

### <a name="to-enable-diagnostics-in-azure-virtual-machines"></a>Για να ενεργοποιήσετε την Διαγνωστικά σε εικονικές μηχανές Windows Azure

1. Στην **Εξερεύνηση Server**, επιλέξτε τον κόμβο Azure και, στη συνέχεια, συνδεθείτε με τη συνδρομή σας Azure, εάν είστε ήδη συνδεδεμένοι.

1. Αναπτύξτε τον κόμβο **εικονικές μηχανές** . Μπορείτε να δημιουργήσετε μια νέα εικονική μηχανή, ή επιλέξτε ένα που υπάρχει ήδη εκεί.

1. Στο μενού συντόμευσης για την εικονική μηχανή που σας ενδιαφέρει, επιλέξτε **Ρύθμιση παραμέτρων**. Η επιλογή αυτή εμφανίζει το παράθυρο διαλόγου Ρύθμιση παραμέτρων εικονική μηχανή.

    ![Ρύθμιση των παραμέτρων ενός Azure εικονική μηχανή](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796663.png)

1. Εάν δεν είναι ήδη έχει εγκατασταθεί, προσθέστε την επέκταση Διαγνωστικά παράγοντας παρακολούθησης της Microsoft. Αυτή η επέκταση σάς επιτρέπει να συγκεντρώσετε διαγνωστικά δεδομένα για την Azure εικονική μηχανή. Στη λίστα εγκατεστημένα επεκτάσεις, επιλέξτε το, επιλέξτε μια διαθέσιμη επέκταση αναπτυσσόμενο μενού και, στη συνέχεια, επιλέξτε παρακολούθηση τα Διαγνωστικά παράγοντας του Microsoft.

    ![Κατά την εγκατάσταση επέκταση Azure εικονική μηχανή](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766024.png)

    >[AZURE.NOTE] Άλλες επεκτάσεις Διαγνωστικά είναι διαθέσιμα για τις εικονικές μηχανές. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα επεκτάσεις Εικονική Azure και δυνατότητες.

1. Επιλέξτε το κουμπί **Προσθήκη** για να προσθέσετε την επέκταση και να προβάλετε το παράθυρο διαλόγου **παραμέτρων διαγνωστικών** .

1. Επιλέξτε το κουμπί **Ρύθμιση παραμέτρων** για να καθορίσετε ένα λογαριασμό του χώρου αποθήκευσης και, στη συνέχεια, επιλέξτε το κουμπί **OK** .

    Κάθε καρτέλα (με εξαίρεση **Γενικά** και **Καταλόγων Log**) αντιπροσωπεύει μια προέλευση δεδομένων διαγνωστικών που μπορείτε να συλλέξετε.

    ![Ενεργοποίηση Azure Διαγνωστικά και ρύθμισης παραμέτρων](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758144.png)

    Στην προεπιλεγμένη καρτέλα, **Γενικά**, παρέχει τις ακόλουθες επιλογές συλλογής δεδομένων διαγνωστικών: **μόνο τα σφάλματα**, **όλες οι πληροφορίες**και **προσαρμοσμένο πρόγραμμα**. Η προεπιλεγμένη επιλογή, **μόνο τα σφάλματα**, χρειάζονται το ελάχιστο μέγεθος του χώρου αποθήκευσης, επειδή αυτό δεν μεταφορά προειδοποιήσεις ή μηνύματα παρακολούθησης. Η επιλογή **όλες οι πληροφορίες** μεταφέρει τις περισσότερες πληροφορίες και είναι, επομένως, η πιο ακριβό επιλογή όσον αφορά χώρου αποθήκευσης.

1. Για αυτό το παράδειγμα, ενεργοποιήστε την επιλογή **προσαρμοσμένο πρόγραμμα** , ώστε να μπορείτε να προσαρμόσετε τα δεδομένα που συλλέγονται.

1. Στο πλαίσιο **Όριο δίσκου σε MB** Καθορίζει πόσο χώρο θέλετε να εισαγάγετε στο λογαριασμό σας στο χώρο αποθήκευσης για τα δεδομένα Διαγνωστικά. Εάν θέλετε, μπορείτε να αλλάξετε την προεπιλεγμένη τιμή.

1. Σε κάθε καρτέλα Διαγνωστικά δεδομένων που θέλετε να συλλέξετε, επιλέξτε το **Ενεργοποίηση μεταφορά του <log type> ** του πλαισίου ελέγχου.

    Για παράδειγμα, εάν θέλετε να συλλέξετε αρχεία καταγραφής εφαρμογών, επιλέξτε το πλαίσιο ελέγχου **Ενεργοποίηση μεταφορά των αρχείων καταγραφής της εφαρμογής** στην καρτέλα **Αρχεία καταγραφής εφαρμογών** . Επίσης, καθορίστε οποιεσδήποτε άλλες πληροφορίες που απαιτούνται από κάθε τύπο δεδομένων Διαγνωστικά. Ανατρέξτε στην ενότητα **Ρύθμιση παραμέτρων προελεύσεις δεδομένων Διαγνωστικά** αργότερα σε αυτό το θέμα για ρύθμιση παραμέτρων πληροφορίες σε κάθε καρτέλα.

1. Αφού ενεργοποιήσετε συλλογή από όλα τα διαγνωστικά δεδομένα που θέλετε, επιλέξτε το κουμπί **OK** .

1. Αποθηκεύστε το ενημερωμένο έργο.

    Θα δείτε ένα μήνυμα στο παράθυρο του **Microsoft Azure δραστηριότητα καταγραφής** ότι η εικονική μηχανή έχει ενημερωθεί.

## <a name="configure-diagnostics-data-sources"></a>Ρύθμιση παραμέτρων Διαγνωστικά προελεύσεις δεδομένων

Αφού ενεργοποιήσετε Διαγνωστικά συλλογής δεδομένων, μπορείτε να επιλέξετε ακριβώς ποια αρχεία προέλευσης δεδομένων που θέλετε να συλλέξετε και ποιες πληροφορίες συλλέγονται. Ακολουθεί μια λίστα με τις καρτέλες στο παράθυρο διαλόγου **παραμέτρων διαγνωστικών** και σημαίνει τι κάθε επιλογή ρύθμισης παραμέτρων.

### <a name="application-logs"></a>Αρχεία καταγραφής εφαρμογών

**Αρχεία καταγραφής εφαρμογών** περιέχουν πληροφορίες διαγνωστικών παράγονται από μια εφαρμογή web. Εάν θέλετε να καταγράψετε αρχεία καταγραφής εφαρμογών, επιλέξτε το πλαίσιο ελέγχου **Ενεργοποίηση μεταφορά των αρχείων καταγραφής της εφαρμογής** . Μπορείτε να αυξήσετε ή να μειώσετε τον αριθμό των λεπτών κατά τη μεταφορά των αρχείων καταγραφής της εφαρμογής στο λογαριασμό σας χώρου αποθήκευσης, αλλάζοντας την τιμή **Μεταφορά περίοδο (λεπτό)** . Μπορείτε επίσης να αλλάξετε την ποσότητα των πληροφοριών που καταγράφονται στο αρχείο καταγραφής, ορίζοντας την τιμή επιπέδου καταγραφής. Για παράδειγμα, μπορείτε να επιλέξετε **λεπτομερές** για να λάβετε περισσότερες πληροφορίες ή επιλέξτε **κρίσιμη** για να καταγράψετε μόνο κρίσιμα σφάλματα. Εάν έχετε μια υπηρεσία παροχής συγκεκριμένες διαγνωστικά που εκπέμπει αρχεία καταγραφής εφαρμογών, μπορείτε να καταγράψετε τους με την προσθήκη της υπηρεσίας παροχής GUID στο πλαίσιο **GUID υπηρεσίας παροχής** .

  ![Αρχεία καταγραφής εφαρμογών](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758145.png)

  Για περισσότερες πληροφορίες σχετικά με τα αρχεία καταγραφής εφαρμογών, ανατρέξτε στο θέμα [Ενεργοποίηση καταγραφής για τις εφαρμογές web στην υπηρεσία εφαρμογής Azure Διαγνωστικά](./app-service-web/web-sites-enable-diagnostic-log.md) .

### <a name="windows-event-logs"></a>Αρχεία καταγραφής συμβάντων των Windows

Εάν θέλετε να καταγράψετε αρχεία καταγραφής συμβάντων των Windows, επιλέξτε το πλαίσιο ελέγχου **Ενεργοποίηση μεταφοράς αρχείων καταγραφής συμβάντων των Windows** . Μπορείτε να αυξήσετε ή να μειώσετε τον αριθμό των λεπτών κατά τη μεταφορά των αρχείων καταγραφής συμβάντων για το λογαριασμό χώρου αποθήκευσης, αλλάζοντας την τιμή **Μεταφορά περίοδο (λεπτό)** . Επιλέξτε τα πλαίσια ελέγχου για τους τύπους των συμβάντων που θέλετε να παρακολουθήσετε.

  ![Αρχεία καταγραφής συμβάντων](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796664.png)

Εάν χρησιμοποιείτε Azure SDK 2.6 ή νεότερη έκδοση και θέλετε να καθορίσετε μια προσαρμοσμένη προέλευση δεδομένων, πληκτρολογήστε με το **<Data source name>** κειμένου πλαίσιο και, στη συνέχεια, επιλέξτε το κουμπί **Προσθήκη** δίπλα της. Το αρχείο diagnostics.cfcfg προστίθεται στην προέλευση δεδομένων.

Εάν χρησιμοποιείτε το 2,5 SDK Azure και θέλετε να καθορίσετε μια προσαρμοσμένη προέλευση δεδομένων, μπορείτε να την προσθέσετε για το `WindowsEventLog` ενότητα diagnostics.wadcfgx το αρχείο, όπως το παρακάτω παράδειγμα.

```
<WindowsEventLog scheduledTransferPeriod="PT1M">
   <DataSource name="Application!*" />
   <DataSource name="CustomDataSource!*" />
</WindowsEventLog>
```
### <a name="performance-counters"></a>Μετρητές επιδόσεων

Πληροφοριών του μετρητή επιδόσεων μπορεί να σας βοηθήσει να εντοπισμό παραγόντων που επιβραδύνουν συστήματος και να ρυθμίσετε τις επιδόσεις του συστήματος και εφαρμογής. Ανατρέξτε στο θέμα [Δημιουργία και χρήση μετρητών επιδόσεων σε μια εφαρμογή του Azure](https://msdn.microsoft.com/library/azure/hh411542.aspx) για περισσότερες πληροφορίες. Εάν θέλετε να καταγράψετε μετρητές επιδόσεων, επιλέξτε το πλαίσιο ελέγχου **Ενεργοποίηση μεταφορά των μετρητών επιδόσεων** . Μπορείτε να αυξήσετε ή να μειώσετε τον αριθμό των λεπτών κατά τη μεταφορά των αρχείων καταγραφής συμβάντων για το λογαριασμό χώρου αποθήκευσης, αλλάζοντας την τιμή **Μεταφορά περίοδο (λεπτό)** . Επιλέξτε τα πλαίσια ελέγχου για τους μετρητές επιδόσεων που θέλετε να παρακολουθήσετε.

  ![Μετρητές επιδόσεων](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758147.png)

Για να παρακολουθήσετε ένα μετρητή επιδόσεων που δεν υπάρχει στη λίστα, πληκτρολογήστε τον χρησιμοποιώντας την προτεινόμενη σύνταξη και, στη συνέχεια, επιλέξτε το κουμπί **Προσθήκη** . Το λειτουργικό σύστημα στον υπολογιστή εικονικές καθορίζει ποιους μετρητές επιδόσεων, μπορείτε να παρακολουθήσετε. Για περισσότερες πληροφορίες σχετικά με τη σύνταξη, ανατρέξτε στο θέμα [που καθορίζει μια διαδρομή μετρητή](https://msdn.microsoft.com/library/windows/desktop/aa373193.aspx).

### <a name="infrastructure-logs"></a>Αρχεία καταγραφής από την υποδομή

Εάν θέλετε να καταγράψετε αρχεία καταγραφής υποδομή, οι οποίες περιέχουν πληροφορίες σχετικά με την υποδομή του Azure διαγνωστικών, τη λειτουργική μονάδα απομακρυσμένης πρόσβασης και τη λειτουργική μονάδα RemoteForwarder, επιλέξτε το πλαίσιο ελέγχου **Ενεργοποίηση μεταφορά των αρχείων καταγραφής υποδομής** . Μπορείτε να αυξήσετε ή να μειώσετε τον αριθμό των λεπτών κατά τη μεταφορά των αρχείων καταγραφής για το λογαριασμό χώρου αποθήκευσης, αλλάζοντας την τιμή μεταφορά περίοδο (λεπτό).

  ![Αρχεία καταγραφής διαγνωστικών υποδομής](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758148.png)

  Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Συλλογή καταγραφή δεδομένων, χρησιμοποιώντας τα Διαγνωστικά Azure](https://msdn.microsoft.com/library/azure/gg433048.aspx) .

### <a name="log-directories"></a>Αρχείο καταγραφής σε καταλόγους

Εάν θέλετε να καταγράψετε καταλόγους καταγραφής, οι οποίοι περιέχουν δεδομένα που συλλέγονται από το αρχείο καταγραφής σε καταλόγους για αιτήσεις Internet Information Services (IIS), αποτυχημένων αιτήσεων ή τους φακέλους που έχετε επιλέξει, επιλέξτε το πλαίσιο ελέγχου **Ενεργοποίηση της μεταφοράς αρχείου καταγραφής καταλόγων** . Μπορείτε να αυξήσετε ή να μειώσετε τον αριθμό των λεπτών κατά τη μεταφορά των αρχείων καταγραφής για το λογαριασμό χώρου αποθήκευσης, αλλάζοντας την τιμή **Μεταφορά περίοδο (λεπτό)** .

Μπορείτε να επιλέξετε τα πλαίσια για τα αρχεία καταγραφής που θέλετε να συλλέξετε, όπως **Τα αρχεία καταγραφής των υπηρεσιών IIS** και **Απέτυχε η αίτηση** αρχεία καταγραφής. Παρέχονται προεπιλεγμένα ονόματα κοντέινερ χώρου αποθήκευσης, αλλά μπορείτε να αλλάξετε τα ονόματα, εάν θέλετε.

Επίσης, μπορείτε να καταγράψετε αρχεία καταγραφής από οποιονδήποτε φάκελο. Απλώς Καθορίστε τη διαδρομή στην ενότητα **αρχείο καταγραφής από απόλυτη κατάλογο** και, στη συνέχεια, επιλέξτε το κουμπί **Προσθήκη καταλόγου** . Τα αρχεία καταγραφής θα καταγραφεί για το καθορισμένο κοντέινερ.

  ![Αρχείο καταγραφής σε καταλόγους](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796665.png)

### <a name="etw-logs"></a>Αρχεία καταγραφής ETW

Εάν χρησιμοποιείτε [Παρακολούθηση συμβάντων για τα Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803(v=vs.85).aspx) (ETW) και θέλετε να καταγράψετε ETW αρχεία καταγραφής, επιλέξτε το πλαίσιο ελέγχου **Ενεργοποίηση μεταφορά των αρχείων καταγραφής ETW** . Μπορείτε να αυξήσετε ή να μειώσετε τον αριθμό των λεπτών κατά τη μεταφορά των αρχείων καταγραφής για το λογαριασμό χώρου αποθήκευσης, αλλάζοντας την τιμή **Μεταφορά περίοδο (λεπτό)** .

Τα συμβάντα που καταγράφονται από προελεύσεις συμβάντων και δηλώσεων συμβάντων που καθορίζετε. Για να καθορίσετε μια προέλευση συμβάντος, πληκτρολογήστε ένα όνομα στην ενότητα **Προελεύσεις συμβάντων** και, στη συνέχεια, επιλέξτε το κουμπί **Προσθήκη προέλευση συμβάντος** . Ομοίως, μπορείτε να καθορίσετε μια δήλωση συμβάντος στην ενότητα **Δηλώσεις συμβάν** και, στη συνέχεια, επιλέξτε το κουμπί **Προσθήκη δήλωσης συμβάν** .

  ![Αρχεία καταγραφής ETW](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766025.png)

  Στο πλαίσιο ETW υποστηρίζεται στο ASP.NET μέσω κλάσεις το [System.Diagnostics.aspx] (χώρος ονομάτων https://msdn.microsoft.com/library/system.diagnostics (v=vs.110). Ο χώρος ονομάτων Microsoft.WindowsAzure.Diagnostics, το οποίο μεταβιβάζονται από και επεκτείνει τυπική [System.Diagnostics.aspx] (https://msdn.microsoft.com/library/system.diagnostics (v=vs.110) κλάδους, επιτρέπει τη χρήση [System.Diagnostics.aspx] (https://msdn.microsoft.com/library/system.diagnostics (v=vs.110) ως πλαίσιο καταγραφή στο περιβάλλον Azure. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Λήψη ελέγχου της καταγραφής και ανίχνευση στο Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) και τα [Διαγνωστικά Ενεργοποίηση στις υπηρεσίες Cloud Azure και εικονικές μηχανές](./cloud-services/cloud-services-dotnet-diagnostics.md).

### <a name="crash-dumps"></a>Ενδείξεις σφαλμάτων

Εάν θέλετε να καταγράψετε πληροφορίες σχετικά με το πότε μια παρουσία ρόλο παρουσιάζει σφάλμα, επιλέξτε το πλαίσιο ελέγχου **Ενεργοποίηση μεταφοράς Αποτυπώνει παρουσιάσει σφάλμα** . (Επειδή ASP.NET χειρίζεται περισσότερες εξαιρέσεις, αυτό είναι συνήθως χρήσιμο μόνο για τους ρόλους εργαζόμενου.) Μπορείτε να αυξήσετε ή να μειώσετε το ποσοστό του χώρου αποθήκευσης στα το ενδείξεις σφαλμάτων, αλλάζοντας την τιμή **Καταλόγου ορίου (%)** . Μπορείτε να αλλάξετε το κοντέινερ χώρου αποθήκευσης όπου είναι αποθηκευμένο το ενδείξεις σφαλμάτων και μπορείτε να επιλέξετε εάν θέλετε να καταγράψετε μια ένδειξη **πλήρη** ή **μικρή** .

Παρατίθενται οι διεργασίες αυτήν τη στιγμή γίνεται παρακολούθηση. Επιλέξτε τα πλαίσια ελέγχου για τις διαδικασίες που θέλετε να καταγράψετε. Για να προσθέσετε μια άλλη διαδικασία στη λίστα, πληκτρολογήστε το όνομα της διαδικασίας και, στη συνέχεια, επιλέξτε το κουμπί **Προσθήκη διαδικασία** .

  ![Ενδείξεις σφαλμάτων](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766026.png)

  Ανατρέξτε στο θέμα [Λήψη ελέγχου της καταγραφής και ανίχνευση στο Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) και [Microsoft Azure Διαγνωστικά μέρος 4: προσαρμοσμένα στοιχεία καταγραφή και τις αλλαγές 1.3 Διαγνωστικά Azure](http://justazure.com/microsoft-azure-diagnostics-part-4-custom-logging-components-azure-diagnostics-1-3-changes/) για περισσότερες πληροφορίες.

## <a name="view-the-diagnostics-data"></a>Προβάλετε τα διαγνωστικά δεδομένα

Αφού έχετε συγκεντρώσει τα διαγνωστικά δεδομένα για μια υπηρεσία cloud ή μια εικονική μηχανή, μπορείτε να το προβάλετε.

### <a name="to-view-cloud-service-diagnostics-data"></a>Για να προβάλετε δεδομένα Διαγνωστικά υπηρεσίας cloud

1. Ανάπτυξη της υπηρεσίας cloud ως συνήθη και, στη συνέχεια, εκτελέστε το.

1. Μπορείτε να προβάλετε τα διαγνωστικά δεδομένα σε μια αναφορά που παράγει το Visual Studio ή πίνακες στο λογαριασμό σας στο χώρο αποθήκευσης. Για να προβάλετε τα δεδομένα σε μια αναφορά, Άνοιγμα **Εξερεύνηση Cloud** ή **Explorer διακομιστή**, ανοίξτε το μενού συντόμευσης του κόμβου για το ρόλο που σας ενδιαφέρει και στη συνέχεια, επιλέξτε **Προβολή διαγνωστικών δεδομένων**.

    ![Προβολή διαγνωστικών δεδομένων](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC748912.png)

    Εμφανίζεται μια έκθεση που εμφανίζει τα διαθέσιμα δεδομένα.

    ![Αναφορά Διαγνωστικά του Microsoft Azure στο Visual Studio](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796666.png)

    Εάν τα πιο πρόσφατα δεδομένα δεν εμφανίζεται, ίσως χρειαστεί να περιμένετε για την περίοδο μεταφοράς να περάσει.

    Επιλέξτε τη σύνδεση **Ανανέωση** για να ενημερώσετε αμέσως τα δεδομένα ή επιλέξτε ένα χρονικό διάστημα από το αναπτυσσόμενο πλαίσιο λίστας **Αυτόματης ανανέωσης** , τα δεδομένα ενημερώνονται αυτόματα. Για να εξαγάγετε τα δεδομένα σφάλματος, επιλέξτε το κουμπί **Εξαγωγή σε CSV** για να δημιουργήσετε ένα αρχείο τιμών διαχωρισμένων μπορείτε να ανοίξετε σε ένα υπολογιστικό φύλλο.

    Στην **Εξερεύνηση Cloud** ή **Εξερεύνηση Server**, ανοίξτε το λογαριασμό χώρου αποθήκευσης που είναι συσχετισμένη με την ανάπτυξη.

1. Ανοίξτε τα Διαγνωστικά πίνακες στο πρόγραμμα προβολής πίνακα και, στη συνέχεια, εξετάστε τα δεδομένα που έχετε συγκεντρώσει. Για τα αρχεία καταγραφής των υπηρεσιών IIS και προσαρμοσμένα αρχεία καταγραφής, μπορείτε να ανοίξετε ένα κοντέινερ αντικειμένων blob. Ανατρέχοντας στον παρακάτω πίνακα, μπορείτε να βρείτε το κοντέινερ πίνακα ή blob που περιέχει τα δεδομένα που σας ενδιαφέρει. Εκτός από τα δεδομένα για αυτό το αρχείο καταγραφής, οι καταχωρήσεις πίνακα περιέχουν EventTickCount, DeploymentId, ρόλο και RoleInstance για να σας βοηθήσει να προσδιορίσετε ποια εικονική μηχανή και το ρόλο που δημιουργούνται από τα δεδομένα και πότε. 

  	|Διαγνωστικών δεδομένων|Περιγραφή|Θέση|
  	|---|---|---|
  	|Αρχεία καταγραφής εφαρμογών|Αρχεία καταγραφής που δημιουργείται από τον κωδικό καλώντας μεθόδους της κλάσης System.Diagnostics.Trace.|WADLogsTable|
  	|Αρχεία καταγραφής συμβάντων|Αυτά τα δεδομένα είναι από τα αρχεία καταγραφής συμβάντων των Windows σε τις εικονικές μηχανές. Τα Windows αποθηκεύουν πληροφορίες σε αυτά τα αρχεία καταγραφής, αλλά εφαρμογές και υπηρεσίες επίσης τις χρησιμοποιήσουν για την αναφορά σφαλμάτων ή καταγραφή πληροφοριών.|WADWindowsEventLogsTable|
  	|Μετρητές επιδόσεων|Μπορείτε να συλλέξετε δεδομένα σε οποιαδήποτε μετρητή απόδοσης που είναι διαθέσιμες στο η εικονική μηχανή. Το λειτουργικό σύστημα παρέχει μετρητές επιδόσεων, οι οποίοι περιλαμβάνουν πολλές στατιστικών στοιχείων όπως χρόνο χρήσης και επεξεργαστής μνήμης.|WADPerformanceCountersTable|
  	|Αρχεία καταγραφής από την υποδομή|Αυτά τα αρχεία καταγραφής δημιουργούνται από την ίδια την υποδομή Διαγνωστικά.|WADDiagnosticInfrastructureLogsTable|
  	|Αρχεία καταγραφής των υπηρεσιών IIS|Αυτά τα αρχεία καταγραφής εγγραφή αιτήσεις web. Εάν την υπηρεσία cloud λαμβάνει σημαντική κίνηση, αυτά τα αρχεία καταγραφής μπορεί να είναι πολύ μεγάλη, έτσι θα πρέπει να μπορείτε να συλλέξετε και να αποθηκεύσετε αυτά τα δεδομένα μόνο όταν τα χρειάζεστε.|Μπορείτε να βρείτε απέτυχε η αίτηση συνδέεται στο κοντέινερ αντικειμένων blob στην περιοχή wad-των υπηρεσιών iis-failedreqlogs κάτω από μια διαδρομή που ανάπτυξης ρόλο και την παρουσία. Μπορείτε να βρείτε ολοκλήρωσης αρχείων καταγραφής στην περιοχή wad-των υπηρεσιών iis-logfiles. Στον πίνακα WADDirectories γίνονται οι καταχωρήσεις για κάθε αρχείο.|
  	|Ενδείξεις σφαλμάτων|Αυτές οι πληροφορίες παρέχει δυαδικές εικόνες υπηρεσία cloud της διαδικασίας (συνήθως ένα ρόλο εργαζόμενου).|Οι ενδείξεις θλιπτικό wad blob κοντέινερ|
  	|Αρχεία καταγραφής προσαρμοσμένο|Αρχεία καταγραφής των δεδομένων που έχετε προκαθορισμένες.|Μπορείτε να καθορίσετε στον κώδικα της θέσης των αρχείων καταγραφής προσαρμοσμένο στο λογαριασμό σας στο χώρο αποθήκευσης. Για παράδειγμα, μπορείτε να καθορίσετε ένα προσαρμοσμένο blob κοντέινερ.|

1. Εάν τα δεδομένα από οποιονδήποτε τύπο περικόπτονται, μπορείτε να δοκιμάσετε αυξάνοντας το buffer για αυτά τα δεδομένα τύπου ή συντόμευση το διάστημα μεταξύ των μεταφορών των δεδομένων από την εικονική μηχανή στο λογαριασμό σας χώρου αποθήκευσης.

1. (προαιρετικό) Εκκαθάριση των δεδομένων από το λογαριασμό χώρου αποθήκευσης κάποιες φορές, για να μειώσετε το συνολικό κόστος του χώρου αποθήκευσης.

1. Όταν κάνετε μια πλήρη ανάπτυξη, το αρχείο diagnostics.cscfg (.wadcfgx για το 2,5 SDK Azure) είναι ενημερωθεί στο Azure και την υπηρεσία cloud παίρνει τυχόν αλλαγές στη ρύθμιση παραμέτρων Διαγνωστικά. Εάν, αντί για αυτό, ενημερώσετε μια υπάρχουσα ανάπτυξη, το αρχείο .cscfg δεν είναι ενημερωθεί στο Azure. Εξακολουθείτε να μπορείτε να αλλάξετε ρυθμίσεις Διαγνωστικά, όμως, ακολουθώντας τα βήματα στην επόμενη ενότητα. Για περισσότερες πληροφορίες σχετικά με την εκτέλεση μιας πλήρους ανάπτυξης και να ενημερώσετε μια υπάρχουσα ανάπτυξη, ανατρέξτε στο θέμα [Οδηγός δημοσίευση εφαρμογών Azure](vs-azure-tools-publish-azure-application-wizard.md).

### <a name="to-view-virtual-machine-diagnostics-data"></a>Για να προβάλετε δεδομένα Διαγνωστικά εικονική μηχανή

1. Στο μενού συντόμευσης για την εικονική μηχανή, επιλέξτε **Προβολή διαγνωστικών δεδομένων**.

    ![Προβολή διαγνωστικών δεδομένων σε Azure εικονική μηχανή](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766027.png)

    Έτσι ανοίγει το παράθυρο **σύνοψης Διαγνωστικά** .

    ![Διαγνωστικά Azure εικονική μηχανή σύνοψης](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796667.png)  

    Εάν τα πιο πρόσφατα δεδομένα δεν εμφανίζεται, ίσως χρειαστεί να περιμένετε για την περίοδο μεταφοράς να περάσει.

    Επιλέξτε τη σύνδεση **Ανανέωση** για να ενημερώσετε αμέσως τα δεδομένα ή επιλέξτε ένα χρονικό διάστημα από το αναπτυσσόμενο πλαίσιο λίστας **Αυτόματης ανανέωσης** , τα δεδομένα ενημερώνονται αυτόματα. Για να εξαγάγετε τα δεδομένα σφάλματος, επιλέξτε το κουμπί **Εξαγωγή σε CSV** για να δημιουργήσετε ένα αρχείο τιμών διαχωρισμένων μπορείτε να ανοίξετε σε ένα υπολογιστικό φύλλο.

## <a name="configure-cloud-service-diagnostics-after-deployment"></a>Ρύθμιση παραμέτρων Διαγνωστικά υπηρεσία cloud μετά την ανάπτυξη

Εάν κάνετε έρευνα ένα πρόβλημα με ένα σύννεφο υπηρεσία που εκτελείται ήδη, ενδέχεται να θέλετε να συλλέξετε δεδομένα τα οποία δεν καθορίσατε πριν να αναπτυχθεί αρχικά το ρόλο. Σε αυτήν την περίπτωση, μπορείτε να ξεκινήσετε να συλλέξετε αυτών των δεδομένων, χρησιμοποιώντας τις ρυθμίσεις στην Εξερεύνηση Server. Μπορείτε να ρυθμίσετε Διαγνωστικά για μια μεμονωμένη παρουσία ή όλων των εμφανίσεων σε ένα ρόλο, ανάλογα με το εάν μπορείτε να ανοίξετε το παράθυρο διαλόγου παραμέτρων διαγνωστικών από το μενού συντόμευσης για την παρουσία ή το ρόλο. Εάν ρυθμίσετε τον κόμβο ρόλο, οι αλλαγές εφαρμόζονται σε όλες τις εμφανίσεις. Εάν ρυθμίσετε τον κόμβο παρουσία, οι αλλαγές εφαρμόζονται σε αυτήν την παρουσία μόνο.

### <a name="to-configure-diagnostics-for-a-running-cloud-service"></a>Να ρυθμίσετε τις παραμέτρους Διαγνωστικά για μια υπηρεσία cloud που εκτελείται

1. Στην Εξερεύνηση διακομιστή, αναπτύξτε τον κόμβο **Υπηρεσίες Cloud** και, στη συνέχεια, αναπτύξτε τους κόμβους για να εντοπίσετε το ρόλο ή την παρουσία που θέλετε να εξετάσετε ή και τα δύο.

    ![Ρύθμιση παραμέτρων διαγνωστικών](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC748913.png)

1. Στο μενού συντόμευσης για έναν κόμβο παρουσία ή έναν κόμβο με το ρόλο, επιλέξτε **Ενημέρωση ρυθμίσεων των διαγνωστικών**και, στη συνέχεια, επιλέξτε τις ρυθμίσεις διαγνωστικών που θέλετε να συλλέξετε.

    Για πληροφορίες σχετικά με τις ρυθμίσεις παραμέτρων, ανατρέξτε στο θέμα **Ρύθμιση παραμέτρων προελεύσεις δεδομένων Διαγνωστικά** σε αυτό το θέμα. Για πληροφορίες σχετικά με το πώς μπορείτε να προβάλετε τα διαγνωστικά δεδομένα, ανατρέξτε στο θέμα **Προβολή των δεδομένων Διαγνωστικά** σε αυτό το θέμα.

    Εάν αλλάξετε συλλογής δεδομένων στην **Εξερεύνηση Server**, αυτές οι αλλαγές παραμένουν σε ισχύ μέχρι να πλήρως αναπτύξετε εκ νέου την υπηρεσία cloud. Εάν χρησιμοποιείτε την προεπιλεγμένη ρυθμίσεις δημοσίευσης, οι αλλαγές δεν αντικαθίστανται, επειδή το δημοσιεύσετε την προεπιλεγμένη ρύθμιση είναι να ενημερώσετε την υπάρχουσα ανάπτυξη, αντί να κάνετε μια πλήρη επανάληψη ανάπτυξης. Για να βεβαιωθείτε ότι οι ρυθμίσεις καταργήστε κατά το χρόνο ανάπτυξης, μεταβείτε στην καρτέλα " **Ρυθμίσεις για προχωρημένους** " του Οδηγού δημοσίευσης και καταργήστε την επιλογή από το πλαίσιο ελέγχου **Ενημέρωση ανάπτυξης** . Όταν αναπτύξτε ξανά με αυτό το πλαίσιο ελέγχου απενεργοποιημένο, οι ρυθμίσεις επαναφέρονται αυτές στο αρχείο .wadcfgx (ή .wadcfg) ως σύνολο μέσω του προγράμματος επεξεργασίας ιδιοτήτων για το ρόλο. Εάν ενημερώσετε την ανάπτυξη, Azure διατηρεί τις παλιές ρυθμίσεις.

## <a name="troubleshoot-azure-cloud-service-issues"></a>Αντιμετώπιση προβλημάτων υπηρεσία Azure cloud

Εάν αντιμετωπίζετε προβλήματα με τα έργα υπηρεσία cloud, όπως ένα ρόλο που παραμένει στα "απασχολημένος" κατάσταση, επανειλημμένα ανακυκλώνει ή να παρουσιάσει σφάλμα εσωτερικό διακομιστή, υπάρχουν εργαλεία και τεχνικές που μπορείτε να χρησιμοποιήσετε για τη διάγνωση και διόρθωση αυτά τα προβλήματα. Για συγκεκριμένα παραδείγματα σχετικά με συνηθισμένα προβλήματα και λύσεις, καθώς και μια επισκόπηση της τις έννοιες και εργαλεία που χρησιμοποιούνται για τη διάγνωση και διόρθωση τέτοια σφάλματα, δείτε [Τον υπολογισμό δεδομένων Διαγνωστικά του Azure PaaS](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).

## <a name="q--a"></a>Ερωτήσεις και απαντήσεις

**Τι είναι το μέγεθος του buffer και πόσο μεγάλο θα πρέπει να είναι;**

Σε κάθε παρουσία εικονική μηχανή, ορίων περιορίζει τον όγκο δεδομένων διαγνωστικών μπορούν να αποθηκευτούν σε τοπικό σύστημα αρχείων. Επιπλέον, μπορείτε να καθορίσετε ένα μέγεθος buffer για κάθε τύπο διαγνωστικών δεδομένα που είναι διαθέσιμα. Αυτό το μέγεθος buffer λειτουργεί ως ένα μεμονωμένο όριο μεγέθους για αυτόν τον τύπο των δεδομένων. Επιλέγοντας το κάτω μέρος του παραθύρου διαλόγου, μπορείτε να προσδιορίσετε τη συνολική ορίου και το μέγεθος της μνήμης που απομένει. Εάν καθορίσετε μεγαλύτερο συγκέντρωσης buffer ή περισσότερους τύπους δεδομένων, θα μπορείτε να προσεγγίσετε το συνολικό όριο. Μπορείτε να αλλάξετε τη συνολική ορίου, τροποποιώντας το αρχείο ρύθμισης παραμέτρων diagnostics.wadcfg/.wadcfgx. Τα δεδομένα Διαγνωστικά είναι αποθηκευμένο στο ίδιο συστήματος αρχείων ως δεδομένα της εφαρμογής σας, ώστε να εάν η εφαρμογή σας χρησιμοποιεί πολλά χώρου στο δίσκο, δεν θα πρέπει μπορείτε να αυξήσετε τη συνολική ορίου Διαγνωστικά.

**Τι είναι η περίοδος μεταφοράς και πόσος χρόνος θα πρέπει να είναι;**

Η περίοδος μεταφοράς είναι το χρονικό διάστημα που καταγράφει παύσης μεταξύ δεδομένων. Μετά από κάθε περίοδο μεταφοράς, είναι μετακίνηση δεδομένων από το τοπικό σύστημα αρχείων σε μια εικονική μηχανή σε πίνακες στο λογαριασμό σας στο χώρο αποθήκευσης. Εάν την ποσότητα των δεδομένων που συλλέγονται υπερβαίνει το όριο μεγέθους πριν από τη λήξη μιας περιόδου μεταφοράς, απορρίπτονται παλαιότερων δεδομένων. Ενδέχεται να θέλετε να μειώσετε την περίοδο μεταφοράς, εάν απώλεια δεδομένων, επειδή τα δεδομένα σας υπερβαίνει το μέγεθος του buffer ή του ορίου συνολική.

**Ποια ζώνη ώρας είναι οι χρονικές σημάνσεις στο;**

Οι χρονικές σημάνσεις είναι με την τοπική ζώνη ώρας του κέντρου δεδομένων που φιλοξενεί την υπηρεσία cloud. Οι παρακάτω τρεις στήλες χρονικής σήμανσης στους πίνακες καταγραφής που χρησιμοποιούνται.

  - **PreciseTimeStamp** είναι η σήμανση χρόνου ETW του συμβάντος. Αυτό σημαίνει ότι ο χρόνος καταγράφεται το συμβάν από το πρόγραμμα-πελάτη.

  - **Σήμανση ΧΡΌΝΟΥ** είναι PreciseTimeStamp στρογγυλοποίηση προς τα κάτω το όριο συχνότητα αποστολής. Επομένως, εάν τη συχνότητα αποστολής είναι 5 λεπτά και το συμβάν χρόνου 00:17:12, χρονικής ΣΉΜΑΝΣΗΣ θα 15:00:00.

  - **Σήμανση χρόνου** είναι της χρονικής σήμανσης με την οποία δημιουργήθηκε η οντότητα στον πίνακα Azure.

**Πώς μπορώ να διαχειριστώ κόστους κατά τη συλλογή διαγνωστικών πληροφοριών;**

Οι προεπιλεγμένες ρυθμίσεις (το**επίπεδο καταγραφής** **σφαλμάτων** και **μεταφορά περίοδο** οριστεί σε **1 λεπτό**) έχουν σχεδιαστεί για να ελαχιστοποιήσετε το κόστος. Εάν μπορείτε να συλλέγετε δεδομένα περισσότερες διαγνωστικών ή να μειώσετε την περίοδο μεταφοράς, θα αυξήσετε το κόστος υπολογισμού. Δεν συλλογής περισσότερα δεδομένα από αυτά που χρειάζεστε και να μην ξεχάσετε να απενεργοποιήσετε συλλογή δεδομένων όταν τις χρειάζεστε πλέον. Μπορείτε να πάντα την ενεργοποιήσετε ξανά, ακόμα και στο περιβάλλον εκτέλεσης, όπως φαίνεται στην προηγούμενη ενότητα.

**Πώς να συλλέξετε απέτυχε η αίτηση-αρχεία καταγραφής από τις υπηρεσίες IIS;**

Από προεπιλογή, των υπηρεσιών IIS δεν συλλογής απέτυχε η αίτηση-αρχεία καταγραφής. Μπορείτε να ρυθμίσετε τις παραμέτρους των υπηρεσιών IIS για τη συλλογή τους αν μπορείτε να επεξεργαστείτε το αρχείο web.config για ο ρόλος σας web.

**Δεν λαμβάνω ανίχνευση πληροφορίες από τις μεθόδους RoleEntryPoint όπως OnStart. Τι συμβαίνει?**

Οι μέθοδοι RoleEntryPoint ονομάζονται στο περιβάλλον της WAIISHost.exe, δεν των υπηρεσιών IIS. Επομένως, οι πληροφορίες ρύθμισης παραμέτρων στο web.config που κανονικά δεν ισχύει, παρέχει τη δυνατότητα ανίχνευσης. Για να επιλύσετε αυτό το ζήτημα, προσθέστε ένα αρχείο .config στο έργο σας web ρόλο και ονομάστε το αρχείο ώστε να ταιριάζει με το σύνολο εξόδου που περιέχει τον κωδικό RoleEntryPoint. Στο έργο ρόλο web προεπιλογή, το όνομα του αρχείου .config θα είναι WAIISHost.exe.config. Στη συνέχεια, προσθέστε τις ακόλουθες γραμμές σε αυτό το αρχείο:

```
<system.diagnostics>
  <trace>
      <listeners>
          <add name “AzureDiagnostics” type=”Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener”>
              <filter type=”” />
          </add>
      </listeners>
  </trace>
</system.diagnostics>
```

Τώρα, στο παράθυρο **ιδιοτήτων** , ορίστε την ιδιότητα **Αντιγραφή κατάλογο εξόδου** **πάντα**αντίγραφο.

## <a name="next-steps"></a>Επόμενα βήματα

Για να μάθετε περισσότερα σχετικά με την καταγραφή στο Azure Διαγνωστικά, ανατρέξτε στο θέμα [Ενεργοποίηση Διαγνωστικά στις υπηρεσίες Cloud Azure και εικονικές μηχανές](./cloud-services/cloud-services-dotnet-diagnostics.md) και [Ενεργοποίηση καταγραφής για τις εφαρμογές web στην υπηρεσία εφαρμογής Azure Διαγνωστικά](./app-service-web/web-sites-enable-diagnostic-log.md).
