<properties
   pageTitle="Εισαγωγή και εξαγωγή αρχείου ζώνη τομέα DNS Azure χρησιμοποιώντας CLI | Microsoft Azure"
   description="Μάθετε τον τρόπο εισαγωγής και εξαγωγής ένα αρχείο ζώνης DNS σε Azure DNS χρησιμοποιώντας Azure CLI"
   services="dns"
   documentationCenter="na"
   authors="sdwheeler"
   manager="carmonm"
   editor=""/>

<tags
   ms.service="dns"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="08/16/2016"
   ms.author="sewhee"/>

# <a name="import-and-export-a-dns-zone-file-using-the-azure-cli"></a>Εισαγωγή και εξαγωγή ενός αρχείου ζώνης DNS με το CLI Azure


Σε αυτό το άρθρο θα σας καθοδηγήσει εισαγωγή και εξαγωγή αρχείων ζώνης DNS για το DNS Azure χρησιμοποιώντας το Azure CLI.

## <a name="introduction-to-dns-zone-migration"></a>Εισαγωγή στο DNS zone μετεγκατάστασης

Ένα αρχείο ζώνης DNS είναι ένα αρχείο κειμένου που περιέχει λεπτομέρειες κάθε συστήματος ονομάτων τομέα (DNS) εγγραφής στη ζώνη. Το ακολουθεί μια τυποποιημένη μορφή, καθιστώντας κατάλληλη για τη μεταφορά τις εγγραφές DNS μεταξύ συστήματα DNS. Χρησιμοποιώντας ένα αρχείο ζώνης είναι γρήγορη, αξιόπιστο και εύκολο τρόπο για να μεταφέρετε μια ζώνη DNS ή εξαφάνιση Azure DNS.

Azure DNS υποστηρίζει εισαγωγή και εξαγωγή αρχείων ζώνη, χρησιμοποιώντας το Azure περιβάλλον γραμμής εντολών (CLI). Το Azure CLI είναι ένα εργαλείο γραμμής εντολών πλατφόρμες που χρησιμοποιείται για τη διαχείριση των υπηρεσιών Azure. Είναι διαθέσιμα για τις πλατφόρμες Windows, Mac και Linux από τη [σελίδα Azure στοιχεία λήψης](https://azure.microsoft.com/downloads/). Υποστήριξη πλατφόρμες είναι ιδιαίτερα σημαντικό για εισαγωγή και εξαγωγή αρχείων ζώνη, επειδή τα πιο συνηθισμένα λογισμικό διακομιστή ονομάτων, [ΔΕΣΜΕΎΣΕΤΕ](https://www.isc.org/downloads/bind/), συνήθως εκτελείται σε Linux.

## <a name="obtain-your-existing-dns-zone-file"></a>Αποκτήστε το υπάρχον αρχείο ζώνης DNS

Πριν από την εισαγωγή ενός αρχείου ζώνης DNS σε Azure DNS, θα πρέπει να αποκτήσετε ένα αντίγραφο του αρχείου ζώνη. Εξαρτάται από την προέλευση αυτού του αρχείου στην οποία φιλοξενείται αυτήν τη στιγμή της ζώνης DNS.

- Εάν σας ζώνης DNS φιλοξενείται από μια υπηρεσία συνεργάτη (όπως ένα μητρώο καταχώρησης ονομάτων τομέων, αποκλειστικό υπηρεσία παροχής φιλοξενίας DNS ή παροχής εναλλακτικές cloud), αυτή την υπηρεσία θα πρέπει να παρέχουν τη δυνατότητα να κάνετε λήψη του αρχείου ζώνης DNS.

- Εάν φιλοξενείται της ζώνης DNS σε DNS των Windows, ο προεπιλεγμένος φάκελος για τα αρχεία ζώνη είναι **%systemroot%\system32\dns**. Εμφανίζει επίσης την πλήρη διαδρομή για κάθε αρχείο ζώνης στην καρτέλα " **Γενικά** " από την Κονσόλα διαχείρισης της υπηρεσίας DNS.

- Εάν σας ζώνης DNS φιλοξενείται με χρήση ΣΎΝΔΕΣΗΣ, τη θέση του στο αρχείο ζώνης για κάθε ζώνη καθορίζεται με το αρχείο ρύθμισης παραμέτρων ΣΎΝΔΕΣΗΣ **named.conf**.

**Εργασία με τα αρχεία ζώνης από το GoDaddy**<BR>
Ζώνη αρχεία που έχουν ληφθεί από το GoDaddy έχουν ελαφρώς μη τυπική μορφή. Πρέπει να διορθώσετε αυτό το πρόβλημα, πριν από την εισαγωγή αυτών των αρχείων ζώνη σε Azure DNS. Ονόματα DNS στο το RData κάθε εγγραφής DNS που έχουν καθοριστεί ως πλήρως προσδιορισμένων ονομάτων, αλλά δεν έχει μια Τερματισμός "." Αυτό σημαίνει ότι ερμηνείας από άλλα συστήματα DNS ως σχετική ονόματα. Πρέπει να επεξεργαστείτε το αρχείο ζώνης για να προσαρτήσετε το Τερματισμός "." για να τα ονόματά τους πριν την εισαγωγή τους στο Azure DNS.

## <a name="import-a-dns-zone-file-into-azure-dns"></a>Εισαγάγετε ένα αρχείο ζώνης DNS στο Azure DNS


Εισαγωγή ενός αρχείου ζώνη θα δημιουργήσει μια νέα ζώνη στο Azure DNS εάν δεν υπάρχει ήδη. Εάν υπάρχει ήδη στη ζώνη, τα σύνολα εγγραφών στο αρχείο ζώνης πρέπει να είναι συγχώνευση με την υπάρχουσα εγγραφή σύνολα.

### <a name="merge-behavior"></a>Συγχώνευση συμπεριφορά

- Από προεπιλογή, συγχωνεύονται υπάρχοντα και για νέα σύνολα εγγραφών. Όμοια εγγραφές μέσα σε ένα συγχωνευμένο σύνολο εγγραφών είναι κατάργηση διπλότυπων.

- Εναλλακτικά, καθορίζοντας την `--force` επιλογής, η διαδικασία εισαγωγής αντικαθιστά τις υπάρχουσες σύνολα εγγραφών με νέα σύνολα εγγραφών. Υπάρχοντα σύνολα εγγραφής που δεν έχουν μια αντίστοιχη εγγραφή οριστεί στο αρχείο ζώνης που έχει εισαχθεί δεν θα καταργηθούν.

- Όταν συγχωνεύονται σύνολα εγγραφών, χρησιμοποιείται ο χρόνος ζωής (TTL) των προϋπάρχουσες σύνολα εγγραφών. Όταν `--force` έχει χρησιμοποιηθεί, χρησιμοποιείται το TTL ενός νέου συνόλου εγγραφών.

- Έναρξη των παραμέτρων αρχή έκδοσης πιστοποιητικών (SOA) (εκτός από `host`) πάντα λαμβάνονται από το αρχείο που έχει εισαχθεί ζώνη, ανεξάρτητα από το αν `--force` χρησιμοποιείται. Ομοίως, για το σύνολο στην κορυφή ζώνη εγγραφών διακομιστή ονομάτων, την τιμή TTL πάντα λαμβάνονται από το αρχείο που έχει εισαχθεί ζώνης.

- Μια εγγραφή CNAME που έχει εισαχθεί δεν θα αντικαταστήσει μια υπάρχουσα εγγραφή CNAME με το ίδιο όνομα, εκτός εάν το `--force` έχει καθοριστεί παράμετρος.

- Όταν προκύπτει μια διένεξη ανάμεσα σε μια εγγραφή CNAME και μια άλλη εγγραφή από το ίδιο όνομα αλλά διαφορετικό τύπο (ανεξάρτητα από το οποίο υπάρχουσες ή νέες), διατηρείται στην υπάρχουσα εγγραφή. Αυτό είναι ανεξάρτητα από τη χρήση του `--force`.

### <a name="additional-information-about-importing"></a>Πρόσθετες πληροφορίες σχετικά με την εισαγωγή

Οι παρακάτω σημειώσεις παρέχουν πρόσθετες τεχνικές λεπτομέρειες σχετικά με τη ζώνη εισαγωγή διεργασίας.

- Το `$TTL` οδηγία είναι προαιρετικό και υποστηρίζεται. Όταν χωρίς `$TTL` οδηγία δίνεται, εγγραφών χωρίς μια ρητή TTL θα είναι το σύνολο που έχουν εισαχθεί σε ένα προεπιλεγμένο TTL 3600 δευτερόλεπτα. Όταν δύο εγγραφές στο ίδιο σύνολο εγγραφών καθορίσετε διαφορετικό TTLs, χρησιμοποιείται η χαμηλότερη τιμή.

- Το `$ORIGIN` οδηγία είναι προαιρετικό και υποστηρίζεται. Όταν χωρίς `$ORIGIN` έχει οριστεί, η προεπιλεγμένη τιμή χρησιμοποιείται είναι το όνομα της ζώνης όπως καθορίζεται στη γραμμή εντολών (συν το Τερματισμός ".").

- Το `$INCLUDE` και `$GENERATE` οδηγιών δεν υποστηρίζονται.

- Υποστηρίζονται αυτούς τους τύπους καρτέλας: Α, AAAA, CNAME, MX, NS, SOA, SRV και TXT.

- Η εγγραφή SOA δημιουργείται αυτόματα από το Azure DNS όταν δημιουργείται μια ζώνη. Όταν εισάγετε ένα αρχείο ζώνης, όλες οι παράμετροι SOA λαμβάνονται από τη ζώνη αρχείων *εκτός από* το `host` παραμέτρου. Αυτή η παράμετρος χρησιμοποιεί την τιμή που παρέχεται από Azure DNS. Αυτό συμβαίνει επειδή αυτή η παράμετρος πρέπει να αναφέρονται το κύριο όνομα διακομιστή που παρέχονται από Azure DNS.

- Το σύνολο στην κορυφή ζώνη εγγραφών διακομιστή ονομάτων δημιουργείται επίσης αυτόματα από το Azure DNS κατά τη δημιουργία της ζώνης. Έχει εισαχθεί μόνο την τιμή TTL αυτού του συνόλου εγγραφών. Αυτές οι εγγραφές περιέχουν τα ονόματα των διακομιστών ονομάτων που παρέχονται από Azure DNS. Τα δεδομένα εγγραφής δεν αντικαθίσταται με βάση τις τιμές που περιέχονται στο αρχείο ζώνης που έχουν εισαχθεί.

- Κατά την προεπισκόπηση δημόσια Azure DNS υποστηρίζει μόνο μίας συμβολοσειράς TXT records. Multistring η εγγραφές TXT θα συνδέονται και θα περικοπεί στους 255 χαρακτήρες.

### <a name="cli-format-and-values"></a>Μορφή CLI και τιμές


Η μορφή της εντολής Azure CLI για να εισαγάγετε μια ζώνη DNS είναι:<BR>`azure network dns zone import [options] <resource group> <zone name> <zone file name>`

Τιμές:

- `<resource group>`είναι το όνομα της ομάδας πόρων για τη ζώνη στο Azure DNS.
- `<zone name>`είναι το όνομα της ζώνης.
- `<zone file name>`είναι το όνομα/διαδρομή του αρχείου ζώνης για εισαγωγή.

Εάν δεν υπάρχει μια ζώνη με αυτό το όνομα στην ομάδα πόρων, θα δημιουργηθεί για εσάς. Εάν υπάρχει ήδη στη ζώνη, τα σύνολα εγγραφών που έχουν εισαχθεί θα συγχωνευτούν με υπάρχοντα σύνολα εγγραφών. Για να αντικαταστήσετε το υπάρχον σύνολα εγγραφών, χρησιμοποιήστε το `--force` την επιλογή.

Για να επαληθεύσετε τη μορφή του αρχείου ζώνη χωρίς να τα εισαγάγετε στην πραγματικότητα, χρησιμοποιήστε το `--parse-only` την επιλογή.

### <a name="step-1-import-a-zone-file"></a>Βήμα 1. Εισαγάγετε ένα αρχείο ζώνης

Για να εισαγάγετε ένα αρχείο ζώνης για τη ζώνη **contoso.com**.

1. Πραγματοποιήστε είσοδο στο Azure τη συνδρομή σας, χρησιμοποιώντας το Azure CLI.

        azure login

2. Επιλέξτε τη συνδρομή όπου θέλετε να δημιουργήσετε τη νέα ζώνη DNS.

        azure account set <subscription name>

3. Azure DNS είναι μια Azure μόνο από διαχειριστή πόρων υπηρεσία, έτσι ώστε το Azure CLI πρέπει να να μεταβείτε σε λειτουργία διαχείρισης πόρων.

        azure config mode arm

4. Για να χρησιμοποιήσετε την υπηρεσία Azure DNS, πρέπει να καταχωρήσετε τη συνδρομή σας για να χρησιμοποιήσετε την υπηρεσία παροχής Microsoft.Network πόρων. (Αυτό είναι ένα μοναδικό λειτουργίας για κάθε συνδρομής.)

        azure provider register Microsoft.Network

5. Εάν δεν έχετε ήδη, πρέπει επίσης να δημιουργήσετε μια ομάδα πόρων διαχείρισης πόρων.

        azure group create myresourcegroup westeurope

6. Για να εισαγάγετε τη ζώνη **contoso.com** από το αρχείο **contoso.com.txt** σε μια νέα ζώνη DNS από την ομάδα πόρων **myresourcegroup**, εκτελέστε την εντολή `azure network dns zone import`.<BR>Αυτή η εντολή θα φορτώσετε το αρχείο ζώνης και ανάλυσης του. Η εντολή θα εκτελεστεί μιας σειράς εντολών στην υπηρεσία Azure DNS για να δημιουργήσετε τη ζώνη και όλων των την εγγραφή ορίζει στη ζώνη. Η εντολή θα αναφέρει την πρόοδο στο παράθυρο της κονσόλας, μαζί με τυχόν σφάλματα ή προειδοποιήσεις. Επειδή σύνολα εγγραφών δημιουργούνται σε σειρά, ενδέχεται να χρειαστούν μερικά λεπτά για να εισαγάγετε ένα αρχείο μεγάλο ζώνης.

        azure network dns zone import myresourcegroup contoso.com contoso.com.txt



### <a name="step-2-verify-the-zone"></a>Βήμα 2. Επαληθεύστε τη ζώνη

Για να επαληθεύσετε τη ζώνη DNS μετά την εισαγωγή του αρχείου, μπορείτε να χρησιμοποιήσετε μία από τις παρακάτω μεθόδους:

- Μπορείτε να εμφανίσετε τις εγγραφές, χρησιμοποιώντας την ακόλουθη εντολή Azure CLI.

        azure network dns record-set list myresourcegroup contoso.com

- Μπορείτε να εμφανίσετε τις εγγραφές, χρησιμοποιώντας το cmdlet του PowerShell `Get-AzureRmDnsRecordSet`.

- Μπορείτε να χρησιμοποιήσετε `nslookup` για να επαληθεύσετε επίλυση ονομάτων για τις εγγραφές. Επειδή η ζώνη δεν είναι ακόμη με ανάθεση, θα πρέπει να καθορίσετε τους σωστούς διακομιστές ονομάτων Azure DNS ρητά. Το παρακάτω παράδειγμα δείχνει πώς μπορείτε να ανακτήσετε τα ονόματα των διακομιστών ονομάτων που έχουν εκχωρηθεί στη ζώνη. IT επίσης δείχνει πώς μπορείτε να ερώτημα την εγγραφή "www", χρησιμοποιώντας `nslookup`.

        C:\>azure network dns record-set show myresourcegroup contoso.com @ NS
        info:Executing command network dns record-set show
        + Looking up the DNS Record Set "@" of type "NS"
        data:Id: /subscriptions/…/resourceGroups/myresourcegroup/providers/Microsoft.Network/dnszones/contoso.com/NS/@
        data:Name: @
        data:Type: Microsoft.Network/dnszones/NS
        data:Location: global
        data:TTL : 3600
        data:NS records
        data:Name server domain name : ns1-01.azure-dns.com
        data:Name server domain name : ns2-01.azure-dns.net
        data:Name server domain name : ns3-01.azure-dns.org
        data:Name server domain name : ns4-01.azure-dns.info
        data:
        info:network dns record-set show command OK

        C:\> nslookup www.contoso.com ns1-01.azure-dns.com

        Server: ns1-01.azure-dns.com
        Address:  40.90.4.1

        Name:www.contoso.com
        Addresses:  134.170.185.46
        134.170.188.221

### <a name="step-3-update-dns-delegation"></a>Βήμα 3. Ενημέρωση DNS ανάθεση

Αφού έχετε επαληθεύσει ότι τη ζώνη έχει εισαχθεί σωστά, θα πρέπει να ενημερώσετε την ανάθεση DNS ώστε να οδηγούν στους διακομιστές ονομάτων του Azure DNS. Για περισσότερες πληροφορίες, ανατρέξτε στο άρθρο [Ενημέρωση της ανάθεσης DNS](dns-domain-delegation.md).

## <a name="export-a-dns-zone-file-from-azure-dns"></a>Εξαγωγή αρχείου ζώνης DNS από το Azure DNS

Η μορφή της εντολής Azure CLI για να εισαγάγετε μια ζώνη DNS είναι:<BR>`azure network dns zone export [options] <resource group> <zone name> <zone file name>`

Τιμές:

- `<resource group>`είναι το όνομα της ομάδας πόρων για τη ζώνη στο Azure DNS.
- `<zone name>`είναι το όνομα της ζώνης.
- `<zone file name>`είναι το όνομα/διαδρομή του αρχείου προς εξαγωγή ζώνη.

Ως με την εισαγωγή ζώνη, μπορείτε πρώτα πρέπει για να πραγματοποιήσετε είσοδο, επιλέξτε τη συνδρομή σας, και ρύθμιση παραμέτρων του Azure CLI για να χρησιμοποιήσετε τη λειτουργία διαχείρισης πόρων.

### <a name="to-export-a-zone-file"></a>Για να εξαγάγετε ένα αρχείο ζώνης


1. Πραγματοποιήστε είσοδο στο Azure τη συνδρομή σας, χρησιμοποιώντας το Azure CLI.

        azure login

2. Επιλέξτε τη συνδρομή όπου θέλετε να δημιουργήσετε τη νέα ζώνη DNS.

        azure account set <subscription name>

3. Azure DNS είναι μια Azure υπηρεσία μόνο από διαχειριστή πόρων. Το Azure CLI πρέπει να να μεταβείτε σε λειτουργία διαχείρισης πόρων.

        azure config mode arm

4. Για να εξαγάγετε τα υπάρχοντα ζώνης Azure DNS **contoso.com** στην ομάδα πόρων **myresourcegroup** για το αρχείο **contoso.com.txt** (στον τρέχοντα φάκελο), εκτελέστε `azure network dns zone export`. Αυτή η εντολή θα καλέστε την υπηρεσία Azure DNS απαρίθμηση σύνολα εγγραφής στη ζώνη και εξαγωγή τα αποτελέσματα σε ένα αρχείο ζώνης συμβατό με ΣΎΝΔΕΣΗ.

        azure network dns zone export myresourcegroup contoso.com contoso.com.txt

