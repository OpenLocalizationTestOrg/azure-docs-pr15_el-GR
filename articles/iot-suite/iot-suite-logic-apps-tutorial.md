<properties
  pageTitle="Azure IoT οικογένεια προγραμμάτων και λογική εφαρμογών | Microsoft Azure"
  description="Ένα πρόγραμμα εκμάθησης σχετικά με τον τρόπο για να συνδέσετε λογικής εφαρμογές στην οικογένεια προγραμμάτων IoT Azure για επιχειρηματική διαδικασία."
  services=""
  suite="iot-suite"
  documentationCenter=""
  authors="aguilaaj"
  manager="timlt"
  editor=""/>

<tags
  ms.service="iot-suite"
  ms.devlang="na"
  ms.topic="article"
  ms.tgt_pltfrm="na"
  ms.workload="na"
  ms.date="08/16/2016"
  ms.author="araguila"/>
  
# <a name="tutorial-connect-logic-app-to-your-azure-iot-suite-remote-monitoring-preconfigured-solution"></a>Πρόγραμμα εκμάθησης: Σύνδεση λογική εφαρμογής τη λύση σας Azure IoT οικογένεια απομακρυσμένη παρακολούθηση προ-διαμορφωμένες

Την [Οικογένεια προγραμμάτων του Microsoft Azure IoT] [ lnk-internetofthings] απομακρυσμένη παρακολούθηση προδιαμορφωμένο λύση είναι ένας εξαιρετικός τρόπος για να ξεκινήσετε γρήγορα με ένα σύνολο δυνατοτήτων για να ολοκληρωμένες που αποτελεί υπόδειγμα μια λύση IoT. Αυτό το πρόγραμμα εκμάθησης σάς καθοδηγεί σε πώς μπορείτε να προσθέσετε λογική εφαρμογής στην οικογένεια προγραμμάτων του Microsoft Azure IoT απομακρυσμένη παρακολούθηση προδιαμορφωμένο λύση. Αυτά τα βήματα που δείχνουν τον τρόπο που μπορείτε να κάνετε ακόμη περισσότερο τη λύση σας IoT συνδέοντας μια επιχειρηματική διαδικασία.

_Εάν αναζητάτε για αναλυτικές οδηγίες σχετικά με την παροχή μια απομακρυσμένη παρακολούθηση προ-διαμορφωμένες λύση, ανατρέξτε στο θέμα [πρόγραμμα εκμάθησης: γρήγορα αποτελέσματα με τις λύσεις IoT προ-διαμορφωμένες][lnk-getstarted]._

Πριν να ξεκινήσετε αυτό το πρόγραμμα εκμάθησης, θα πρέπει:

- Παροχή τον απομακρυσμένο έλεγχο προ-διαμορφωμένες λύσης στο Azure τη συνδρομή σας.

- Δημιουργήστε ένα λογαριασμό SendGrid για να μπορέσετε να στείλετε μήνυμα ηλεκτρονικού ταχυδρομείου που ενεργοποιεί την επιχειρηματική διαδικασία. Μπορείτε να εγγραφείτε για έναν δωρεάν δοκιμαστικής έκδοσης λογαριασμό στο [SendGrid](https://sendgrid.com/) κάνοντας κλικ στην επιλογή **δοκιμάστε δωρεάν**. Αφού έχετε εγγραφεί για το δωρεάν λογαριασμό της δοκιμαστικής έκδοσης, πρέπει να δημιουργήσετε ένα [πλήκτρο API](https://sendgrid.com/docs/User_Guide/Settings/api_keys.html) στο SendGrid που εκχωρεί δικαιώματα για την αποστολή αλληλογραφίας. Χρειάζεστε αυτού του πλήκτρου API αργότερα στην εκμάθηση.

Υπό την προϋπόθεση ότι που ήδη έχετε παρασχεθεί σας απομακρυσμένη παρακολούθηση προ-διαμορφωμένες λύση, μεταβείτε στην ομάδα πόρων για αυτήν τη λύση στην [πύλη του Azure][lnk-azureportal]. Η ομάδα πόρων έχει το ίδιο όνομα με το όνομα της λύσης που επιλέξατε κατά την προμήθεια σας απομακρυσμένο λύση παρακολούθησης. Στην ομάδα πόρων, μπορείτε να δείτε όλους τους προμήθεια του φακέλου Azure πόρους για τη λύση εκτός από την εφαρμογή Azure Active Directory που μπορείτε να βρείτε στην πύλη κλασική Azure. Το παρακάτω στιγμιότυπο οθόνης εμφανίζει ένα παράδειγμα blade **ομάδα πόρων** για απομακρυσμένο λύση προδιαμορφωμένο παρακολούθησης:

![](media/iot-suite-logic-apps-tutorial/resourcegroup.png)

Για να ξεκινήσετε, ρύθμιση της εφαρμογής λογικής για χρήση με το προδιαμορφωμένο λύση.

## <a name="set-up-the-logic-app"></a>Ρύθμιση της εφαρμογής λογικής

1. Κάντε κλικ στην επιλογή __Προσθήκη__ στο επάνω μέρος του blade ομάδα πόρων στην πύλη του Azure.

2. Αναζητήστε __Λογικής εφαρμογή__, επιλέξτε το και, στη συνέχεια, κάντε κλικ στην επιλογή **Δημιουργία**.

3. Συμπληρώστε το __όνομα__ και να χρησιμοποιήσετε την ίδια **συνδρομή** και **ομάδα πόρων** που χρησιμοποιήσατε κατά την παροχή της υπηρεσίας σας απομακρυσμένο λύση παρακολούθησης. Κάντε κλικ στην επιλογή __Δημιουργία__.

    ![](media/iot-suite-logic-apps-tutorial/createlogicapp.png)

4. Όταν ολοκληρωθεί η ανάπτυξή σας, μπορείτε να δείτε την εφαρμογή λογικής εμφανίζεται ως έναν πόρο στην ομάδα πόρων.

5. Κάντε κλικ στην εφαρμογή λογικής για να μεταβείτε το blade λογικής εφαρμογών, επιλέξτε το πρότυπο **Κενή εφαρμογή λογικής** για να ανοίξετε το εργαλείο **Σχεδίασης λογικής εφαρμογών**.

    ![](media/iot-suite-logic-apps-tutorial/logicappsdesigner.png)

6. Επιλέξτε __αίτησης__. Αυτή η ενέργεια καθορίζει ότι μια εισερχόμενη αίτηση HTTP με μια συγκεκριμένη JSON πράξεις φορτίο με μορφοποίηση ένα έναυσμα.

7. Επικολλήστε το εξής στο το σχήμα JSON σώμα αίτησης:

    ```
    {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "id": "/",
      "properties": {
        "DeviceId": {
          "id": "DeviceId",
          "type": "string"
        },
        "measuredValue": {
          "id": "measuredValue",
          "type": "integer"
        },
        "measurementName": {
          "id": "measurementName",
          "type": "string"
        }
      },
      "required": [
        "DeviceId",
        "measurementName",
        "measuredValue"
      ],
      "type": "object"
    }
    ```
    
    > [AZURE.NOTE] Μπορείτε να αντιγράψετε τη διεύθυνση URL για τη δημοσίευση HTTP μετά την αποθήκευση της εφαρμογής λογικής, αλλά πρώτα πρέπει να προσθέσετε μια ενέργεια.

8. Κάντε κλικ στο κουμπί __+ νέο βήμα__ στην περιοχή σας μη αυτόματη έναυσμα. Στη συνέχεια, κάντε κλικ στην επιλογή **Προσθήκη μιας ενέργειας**.

    ![](media/iot-suite-logic-apps-tutorial/logicappcode.png)

9. Αναζήτηση **SendGrid - αποστολή μηνύματος ηλεκτρονικού ταχυδρομείου** και κάντε κλικ σε αυτό.

    ![](media/iot-suite-logic-apps-tutorial/logicappaction.png)

10. Πληκτρολογήστε ένα όνομα για τη σύνδεση, όπως **SendGridConnection**, εισαγάγετε το **Κλειδί API SendGrid** που δημιουργήσατε κατά την ρύθμιση του λογαριασμού σας SendGrid και κάντε κλικ στην επιλογή **Δημιουργία**.

    ![](media/iot-suite-logic-apps-tutorial/sendgridconnection.png)

11. Προσθέστε τις διευθύνσεις ηλεκτρονικού ταχυδρομείου είστε ο κάτοχος **ο **από** και** πεδία. Προσθέστε **απομακρυσμένη παρακολούθηση ειδοποίηση [DeviceId]** στο πεδίο " **θέμα** ". Στο πεδίο **Σώμα ηλεκτρονικού ταχυδρομείου** , προσθέστε **συσκευή [DeviceId] έχει αναφέρει [measurementName] με τιμή [measuredValue].** Μπορείτε να προσθέσετε **[DeviceId]**, **[measurementName]**και **[measuredValue]** , κάνοντας κλικ στην ενότητα **μπορείτε να εισαγάγετε δεδομένα από τα προηγούμενα βήματα** .

    ![](media/iot-suite-logic-apps-tutorial/sendgridaction.png)

12. Στο μενού "επάνω", κάντε κλικ στην επιλογή __Αποθήκευση__ .

13. Κάντε κλικ στην επιλογή το έναυσμα **αίτηση** και αντιγράψτε την τιμή __Δημοσίευση Http σε αυτήν τη διεύθυνση URL__ . Αυτή η διεύθυνση URL πρέπει παρακάτω σε αυτό το πρόγραμμα εκμάθησης.

> [AZURE.NOTE] Λογική εφαρμογών σάς επιτρέπουν να εκτελέσετε [πολλούς διαφορετικούς τύπους ενεργειών] [ lnk-logic-apps-actions] συμπεριλαμβανομένων των ενεργειών στο Office 365. 

## <a name="set-up-the-eventprocessor-web-job"></a>Ρύθμιση της εργασίας Web EventProcessor

Σε αυτήν την ενότητα, μπορείτε να συνδεθείτε προδιαμορφωμένο λύση σας με την εφαρμογή λογικής που δημιουργήσατε. Για να ολοκληρώσετε αυτήν την εργασία, μπορείτε να προσθέσετε τη διεύθυνση URL για να ενεργοποιήσετε την εφαρμογή λογικής με την ενέργεια που ενεργοποιείται όταν μια τιμή αισθητήρα συσκευή υπερβαίνει το όριο.

1. Χρησιμοποιήστε το πρόγραμμα-πελάτη git για να αντιγράψετε την πιο πρόσφατη έκδοση του το [azure iot-remote-παρακολούθησης αποθετήριο github][lnk-rmgithub]. Για παράδειγμα:

    ```
    git clone https://github.com/Azure/azure-iot-remote-monitoring.git
    ```

2. Στο Visual Studio, ανοίξτε το __RemoteMonitoring.sln__ από το τοπικό αντίγραφο του αποθετηρίου.

3. Ανοίξτε το αρχείο __ActionRepository.cs__ στο το **υποδομή\\αποθετήριο** φακέλου.

4. Ενημερώστε το λεξικό **actionIds** με τη __Δημοσίευση Http σε αυτήν τη διεύθυνση URL__ που σημειώσατε από την εφαρμογή λογικής ως εξής:

    ```
    private Dictionary<string,string> actionIds = new Dictionary<string, string>()
    {
        { "Send Message", "<Http Post to this UR>" },
        { "Raise Alarm", "<Http Post to this UR> }
    };
    ```

5. Αποθηκεύστε τις αλλαγές σε λύση και έξοδος από το Visual Studio.

## <a name="deploy-from-the-command-line"></a>Ανάπτυξη από τη γραμμή εντολών

Σε αυτήν την ενότητα, μπορείτε να αναπτύξετε την ενημερωμένη έκδοση της απομακρυσμένης παρακολούθησης λύσης για να αντικαταστήσετε την έκδοση που εκτελούνται τη συγκεκριμένη στιγμή στο Azure.

1. Μετά την [απόκλιση ρυθμίζουν] [ lnk-devsetup] οδηγίες για να ρυθμίσετε το περιβάλλον σας για ανάπτυξη.

2.  Για να αναπτύξετε τοπικά, ακολουθήστε την [ανάπτυξη του τοπικού] [ lnk-localdeploy] οδηγίες.

3.  Για να αναπτύξετε στο cloud και να ενημερώσετε την υπάρχουσα ανάπτυξη cloud, ακολουθήστε την [ανάπτυξη του cloud] [ lnk-clouddeploy] οδηγίες. Χρησιμοποιήστε το όνομα του αρχικού ανάπτυξή σας ως το όνομα ανάπτυξης. Για παράδειγμα εάν το αρχικό ανάπτυξης ονομαζόταν **demologicapp**, χρησιμοποιήστε την ακόλουθη εντολή:

    ``
    build.cmd cloud release demologicapp
    ``
    
    Όταν εκτελείται η δέσμη ενεργειών δόμησης, φροντίστε να χρησιμοποιήσετε το ίδιο λογαριασμό Azure, συνδρομή, περιοχής και την παρουσία υπηρεσίας καταλόγου Active Directory που χρησιμοποιήσατε κατά την προμήθεια της λύσης.

## <a name="see-your-logic-app-in-action"></a>Ανατρέξτε στο θέμα εφαρμογή της λογικής σε δράση

Η απομακρυσμένη λύση παρακολούθησης προδιαμορφωμένο έχει δύο κανόνες ρύθμιση από προεπιλογή κατά την προμήθεια μια λύση. Και οι δύο κανόνες είναι στη συσκευή **SampleDevice001** :

* Θερμοκρασίας > 38.00
* Υγρασία > 48.00

Ο κανόνας θερμοκρασίας ενεργοποιεί την ενέργεια **Βελτιώσετε ειδοποίησης** και ο κανόνας υγρασία εκκινεί την ενέργεια **SendMessage** . Υπό την προϋπόθεση ότι χρησιμοποιήσατε την ίδια διεύθυνση URL για δύο ενέργειες την κλάση **ActionRepository** , εφαρμογή της λογικής εκκινεί για κάθε κανόνα. Δύο κανόνες Χρησιμοποιήστε SendGrid για να στείλετε ένα μήνυμα ηλεκτρονικού ταχυδρομείου με **τη διεύθυνση με λεπτομέρειες της ειδοποίησης** .

> [AZURE.NOTE] Η εφαρμογή λογικής εξακολουθεί να έναυσμα κάθε φορά που ικανοποιείται το όριο. Για να αποφύγετε περιττές μηνύματα ηλεκτρονικού ταχυδρομείου, μπορείτε να απενεργοποιήσετε τους κανόνες στην πύλη λύση ή να απενεργοποιήσετε την εφαρμογή λογικής στην [πύλη του Azure][lnk-azureportal].

Εκτός από λαμβάνει μηνύματα ηλεκτρονικού ταχυδρομείου, μπορείτε επίσης να δείτε κατά την εκτέλεση της εφαρμογής λογικής στην πύλη:

![](media/iot-suite-logic-apps-tutorial/logicapprun.png)

## <a name="next-steps"></a>Επόμενα βήματα

Τώρα που έχετε χρησιμοποιήσει μια εφαρμογή λογική για τη σύνδεση της λύσης προδιαμορφωμένο με μια επιχειρηματική διαδικασία, μπορείτε να μάθετε περισσότερα σχετικά με τις επιλογές για την προσαρμογή τις προκαθορισμένες λύσεις:

- [Χρήση δυναμικής τηλεμετρίας με το απομακρυσμένο προδιαμορφωμένο λύση παρακολούθησης][lnk-dynamic]
- [Συσκευή πληροφορίες μετα-δεδομένων σε απομακρυσμένη παρακολούθηση προ-διαμορφωμένες λύσης][lnk-devinfo]

[lnk-dynamic]: iot-suite-dynamic-telemetry.md
[lnk-devinfo]: iot-suite-remote-monitoring-device-info.md

[lnk-internetofthings]: https://azure.microsoft.com/documentation/suites/iot-suite/
[lnk-getstarted]: iot-suite-getstarted-preconfigured-solutions.md
[lnk-azureportal]: https://portal.azure.com
[lnk-logic-apps-actions]: ../connectors/apis-list.md
[lnk-rmgithub]: https://github.com/Azure/azure-iot-remote-monitoring
[lnk-devsetup]: https://github.com/Azure/azure-iot-remote-monitoring/blob/master/Docs/dev-setup.md
[lnk-localdeploy]: https://github.com/Azure/azure-iot-remote-monitoring/blob/master/Docs/local-deployment.md
[lnk-clouddeploy]: https://github.com/Azure/azure-iot-remote-monitoring/blob/master/Docs/cloud-deployment.md
