<properties
 pageTitle="Συσκευή πληροφορίες μετα-δεδομένων στη λύση απομακρυσμένης παρακολούθησης | Microsoft Azure"
 description="Μια περιγραφή για το Azure IoT προ-διαμορφωμένες λύση απομακρυσμένη παρακολούθηση και την αρχιτεκτονική."
 services=""
 suite="iot-suite"
 documentationCenter=""
 authors="dominicbetts"
 manager="timlt"
 editor=""/>

<tags
 ms.service="iot-suite"
 ms.devlang="na"
 ms.topic="article"
 ms.tgt_pltfrm="na"
 ms.workload="na"
 ms.date="09/12/2016"
 ms.author="dobett"/>

# <a name="device-information-metadata-in-the-remote-monitoring-preconfigured-solution"></a>Συσκευή πληροφορίες μετα-δεδομένων σε απομακρυσμένη παρακολούθηση προ-διαμορφωμένες λύσης

Την οικογένεια IoT Azure απομακρυσμένη παρακολούθηση προδιαμορφωμένο λύση παρουσιάζει προσέγγισης για τη διαχείριση μετα-δεδομένα συσκευής. Σε αυτό το άρθρο περιγράφει την προσέγγιση χρειάζονται αυτήν τη λύση για να μπορέσετε να κατανοήσετε:

- Τι μετα-δεδομένα συσκευής αποθηκεύει τη λύση.
- Πώς η λύση διαχειρίζεται τα μετα-δεδομένα συσκευής.

## <a name="context"></a>Περιβάλλον

Η απομακρυσμένη λύση παρακολούθησης προδιαμορφωμένο χρησιμοποιεί [Διανομέα IoT Azure] [ lnk-iot-hub] για να ενεργοποιήσετε τις συσκευές σας για την αποστολή δεδομένων στο cloud. Διανομέα IoT περιλαμβάνει μια [συσκευή ταυτότητας μητρώου] [ lnk-identity-registry] για τον έλεγχο της πρόσβασης σε διανομέα IoT. Το μητρώο διανομέα IoT συσκευή ταυτότητας είναι ξεχωριστό από την απομακρυσμένη παρακολούθηση λύσης που αφορούν το *μητρώο συσκευή* όπου αποθηκεύονται τα μετα-δεδομένα πληροφορίες συσκευής. Η απομακρυσμένη λύση παρακολούθησης χρησιμοποιεί μια [DocumentDB] [ lnk-docdb] βάσης δεδομένων για την υλοποίηση τη συσκευή μητρώου για την αποθήκευση μετα-δεδομένα πληροφορίες συσκευής. Η [Αρχιτεκτονική αναφοράς του Microsoft Azure IoT] [ lnk-ref-arch] περιγράφει το ρόλο του μητρώου συσκευής σε μια τυπική λύση IoT.

> [AZURE.NOTE] Η απομακρυσμένη λύση παρακολούθησης προδιαμορφωμένο διατηρεί το μητρώο ταυτότητας συσκευή σε συγχρονισμό με το μητρώο συσκευή. Και τα δύο να χρησιμοποιήσετε το ίδιο αναγνωριστικό συσκευής για να προσδιορίσει μοναδικά κάθε συσκευή που είναι συνδεδεμένη με το διανομέα IoT.

Η [Προεπισκόπηση διαχείρισης συσκευών διανομέα IoT] [ lnk-dm-preview] προσθέτει δυνατότητες σε διανομέα IoT που είναι παρόμοιες με τις δυνατότητες διαχείρισης πληροφοριών συσκευής που περιγράφονται σε αυτό το άρθρο. Προς το παρόν, το απομακρυσμένο λύση παρακολούθησης χρησιμοποιεί μόνο γενικά διαθέσιμες δυνατότητες (GA) στην ενότητα IoT.

## <a name="device-information-metadata"></a>Μετα-δεδομένα πληροφορίες συσκευής

Μια συσκευή πληροφορίες μετα-δεδομένων JSON έγγραφο που είναι αποθηκευμένο στη βάση δεδομένων DocumentDB μητρώου συσκευή έχει την εξής δομή:

```
{
  "DeviceProperties": {
    "DeviceID": "deviceid1",
    "HubEnabledState": null,
    "CreatedTime": "2016-04-25T23:54:01.313802Z",
    "DeviceState": "normal",
    "UpdatedTime": null
    },
  "SystemProperties": {
    "ICCID": null
  },
  "Commands": [],
  "CommandHistory": [],
  "IsSimulatedDevice": false,
  "id": "fe81a81c-bcbc-4970-81f4-7f12f2d8bda8"
}
```

- **DeviceProperties**: την ίδια τη συσκευή γράφει αυτές τις ιδιότητες και η συσκευή είναι η αρχή για αυτά τα δεδομένα. Άλλες ιδιότητες των συσκευών παράδειγμα περιλαμβάνουν κατασκευαστή, αριθμό μοντέλου και σειριακό αριθμό. 
- **DeviceID**: το αναγνωριστικό συσκευής μοναδικών τιμών. Αυτή η τιμή είναι η ίδια στο μητρώο διανομέα IoT συσκευή ταυτότητα.
- **HubEnabledState**: Η κατάσταση της συσκευής σε διανομέα IoT. Αυτή η τιμή αρχικά έχει οριστεί σε **null** μέχρι να συνδεθεί στη συσκευή για πρώτη φορά. Στην πύλη του λύση, αποδίδεται μια τιμή **null** με τη συσκευή που "καταχωρημένες, αλλά δεν υπάρχει".
- **CreatedTime**: την ώρα της συσκευής που δημιουργήθηκε.
- **DeviceState**: Η κατάσταση αναφέρονται από τη συσκευή.
- **UpdatedTime**: την ώρα της συσκευής έγινε η τελευταία ενημέρωση μέσω της πύλης λύση.
- **SystemProperties**: πύλη λύση γράφει τις ιδιότητες συστήματος και η συσκευή διαθέτει δεν γνωρίζει από αυτές τις ιδιότητες. Μια ιδιότητα συστήματος παράδειγμα είναι το **ICCID** εάν η λύση είναι εξουσιοδοτημένοι με και συνδεδεμένο σε μια υπηρεσία τη Διαχείριση συσκευών με δυνατότητα SIM.
- **Εντολές**: μια λίστα με τις εντολές που υποστηρίζει η συσκευή. Η συσκευή παρέχει αυτές τις πληροφορίες στη λύση.
- **CommandHistory**: μια λίστα με τις εντολές που αποστέλλονται από το απομακρυσμένο λύση παρακολούθησης για τη συσκευή και την κατάσταση της αυτές οι εντολές.
- **IsSimulatedDevice**: μια σημαία που προσδιορίζει μια συσκευή ως προσομοιωμένη συσκευή.
- **αναγνωριστικό**: το μοναδικό αναγνωριστικό DocumentDB για αυτό το έγγραφο συσκευή.

> [AZURE.NOTE] Πληροφορίες για τη συσκευή μπορεί επίσης να περιλαμβάνει μετα-δεδομένων για να περιγράψετε την τηλεμετρίας στη συσκευή σας στείλει IoT διανομέα. Το απομακρυσμένο λύση παρακολούθησης χρησιμοποιεί αυτό μετα-δεδομένα τηλεμετρίας για να προσαρμόσετε τον τρόπο στον πίνακα εργαλείων που εμφανίζει [δυναμικής τηλεμετρίας][lnk-dynamic-telemetry].

## <a name="lifecycle"></a>Κύκλος ζωής

Όταν δημιουργείτε πρώτα μια συσκευή στην πύλη του λύση, η λύση δημιουργεί μια εγγραφή από το μητρώο συσκευή όπως φαίνεται προηγουμένως. Οι πληροφορίες είναι αρχικά stubbed και η **HubEnabledState** έχει οριστεί σε **null**. Σε αυτό το σημείο της λύσης επίσης δημιουργεί μια εγγραφή για τη συσκευή στο μητρώο ταυτότητας τη συσκευή, το οποίο δημιουργεί τα πλήκτρα που χρησιμοποιεί τη συσκευή για τον έλεγχο ταυτότητας με IoT διανομέα.

Όταν μια συσκευή συνδέεται πρώτα τη λύση, στέλνει ένα μήνυμα πληροφορίες συσκευή. Αυτό το μήνυμα πληροφορίες συσκευή περιλαμβάνει ιδιότητες των συσκευών όπως του κατασκευαστή της συσκευής, αριθμό μοντέλου και σειριακό αριθμό. Ένα μήνυμα πληροφορίες συσκευής περιλαμβάνει επίσης μια λίστα με τις εντολές που υποστηρίζει η συσκευή, συμπεριλαμβανομένων των πληροφοριών σχετικά με τις παραμέτρους της εντολής. Όταν η λύση λάβει αυτό το μήνυμα, ενημερώνει τα μετα-δεδομένα συσκευής πληροφορίες στο μητρώο των συσκευών.

### <a name="view-and-edit-device-information-in-the-solution-portal"></a>Προβολή και επεξεργασία πληροφοριών συσκευής στην πύλη του λύσης

Λίστα συσκευών στην πύλη του λύση εμφανίζει τις ακόλουθες ιδιότητες συσκευή ως στήλες: **κατάσταση**, **DeviceId**, **τον κατασκευαστή**, **Αριθμό μοντέλου**, **σειριακό αριθμό**, **υλικολογισμικού**, **πλατφόρμα**, **Επεξεργαστής**και **Εγκατεστημένη RAM**. Τις ιδιότητες της συσκευής ** **γεωγραφικού** πλάτους και μήκους** καθοδηγούν στη θέση στο χάρτη Bing στον πίνακα εργαλείων. 

![Λίστα συσκευών][img-device-list]

Εάν κάνετε κλικ σε **Επεξεργασία** στο παράθυρο **Λεπτομέρειες συσκευής** στην πύλη του λύση, μπορείτε να επεξεργαστείτε όλες αυτές τις ιδιότητες. Επεξεργασία αυτών των ιδιοτήτων ενημερώνει την εγγραφή για τη συσκευή DocumentDB βάσης δεδομένων. Ωστόσο, εάν μια συσκευή στέλνει ένα μήνυμα συσκευή ενημερωμένες πληροφορίες, που αντικαθιστούν τις αλλαγές που κάνατε στην πύλη του λύση. Δεν μπορείτε να επεξεργαστείτε το **DeviceId**, **όνομα κεντρικού υπολογιστή**, **HubEnabledState**, **CreatedTime**, **DeviceState**και **UpdatedTime** ιδιότητες στην πύλη του λύση επειδή μόνο στη συσκευή έχει αρχή πάνω από αυτές τις ιδιότητες.

![Επεξεργασία συσκευή][img-device-edit]

Μπορείτε να χρησιμοποιήσετε την πύλη λύση για να καταργήσετε μια συσκευή από τη λύση σας. Όταν καταργείτε μια συσκευή, της λύσης καταργεί τα μετα-δεδομένα πληροφορίες συσκευής από το μητρώο συσκευή λύση και καταχώρησης της συσκευής στο μητρώο διανομέα IoT συσκευή ταυτότητα. Μπορείτε να καταργήσετε μια συσκευή, πρέπει να το απενεργοποιήσετε.

![Κατάργηση συσκευής][img-device-remove]

## <a name="device-information-message-processing"></a>Επεξεργασία μηνυμάτων πληροφορίες συσκευής

Συσκευή πληροφορίες μηνύματα που αποστέλλονται από μια συσκευή διαφέρουν από τα μηνύματα που τηλεμετρίας. Τα μηνύματα πληροφορίες συσκευής περιλαμβάνουν πληροφορίες, όπως ιδιότητες των συσκευών, οι εντολές που μπορούν να απαντούν μια συσκευή και το ιστορικό οποιαδήποτε εντολή. Ενότητα IoT ίδια δεν γνωρίζει τα μετα-δεδομένα που περιέχονται σε μια συσκευή πληροφοριακό μήνυμα και επεξεργάζεται το μήνυμα με τον ίδιο τρόπο που επεξεργάζεται οποιοδήποτε μήνυμα συσκευής στο cloud. Σε απομακρυσμένο παρακολούθησης λύση, μια [Ανάλυση ροή Azure] [ lnk-stream-analytics] εργασία (ASA) διαβάζει τα μηνύματα από το Κέντρο IoT. Την ανάλυση **DeviceInfo** ροή εργασίας φίλτρα για τα μηνύματα που περιέχουν **"Τύπος_αντικειμένου": "DeviceInfo"** και τα προωθεί την παρουσία host **EventProcessorHost** που εκτελείται σε ένα έργο web. Λογική στην παρουσία **EventProcessorHost** χρησιμοποιεί το αναγνωριστικό συσκευής για να βρείτε την εγγραφή DocumentDB για τη συγκεκριμένη συσκευή και να ενημερώσετε την εγγραφή. Η εγγραφή μητρώου συσκευή περιλαμβάνει τώρα πληροφορίες, όπως ιδιότητες των συσκευών, εντολές και ιστορικό εντολών.

> [AZURE.NOTE] Ένα μήνυμα πληροφορίες συσκευή είναι ένα τυπικό μήνυμα συσκευής στο cloud. Η λύση διαχωρίζει μεταξύ συσκευή πληροφορίες και τηλεμετρίας μηνύματα με τη χρήση ερωτημάτων ASA.

## <a name="example-device-information-records"></a>Παράδειγμα συσκευή πληροφορίες εγγραφών

Η απομακρυσμένη λύση παρακολούθησης προδιαμορφωμένο χρησιμοποιεί δύο τύπους εγγραφών πληροφοριών συσκευής: εγγραφές για τις συσκευές προσομοιωμένη αναπτυχθεί με τη λύση και εγγραφών για προσαρμοσμένα συσκευές που μπορείτε να συνδεθείτε στη λύση.

### <a name="simulated-device"></a>Προσομοιωμένη συσκευή

Το παρακάτω παράδειγμα εμφανίζει την εγγραφή JSON συσκευή πληροφορίες για μια πρόχειρη συσκευή. Αυτή η εγγραφή έχει μια τιμή για **UpdatedTime**, που υποδηλώνει η συσκευή έχει στείλει ένα μήνυμα **DeviceInfo** IoT διανομέα. Η εγγραφή περιλαμβάνει ορισμένες κοινές ιδιότητες των συσκευών, ορίζει τα έξι εντολές προσομοιωμένη συσκευές υποστηρίζουν και έχει οριστεί η σημαία **IsSimulatedDevice** σε **1**.

```
{
  "DeviceProperties": {
    "DeviceID": "SampleDevice001_455",
    "HubEnabledState": true,
    "CreatedTime": "2016-01-26T19:02:01.4550695Z",
    "DeviceState": "normal",
    "UpdatedTime": "2016-06-01T15:28:41.8105157Z",
    "Manufacturer": "Contoso Inc.",
    "ModelNumber": "MD-369",
    "SerialNumber": "SER9009",
    "FirmwareVersion": "1.39",
    "Platform": "Plat-34",
    "Processor": "i3-2191",
    "InstalledRAM": "3 MB",
    "Latitude": 47.583582,
    "Longitude": -122.130622
  },
  "Commands": [
    {
      "Name": "PingDevice",
      "Parameters": null
    },
    {
      "Name": "StartTelemetry",
      "Parameters": null
    },
    {
      "Name": "StopTelemetry",
      "Parameters": null
    },
    {
      "Name": "ChangeSetPointTemp",
      "Parameters": [
        {
          "Name": "SetPointTemp",
          "Type": "double"
        }
      ]
    },
    {
      "Name": "DiagnosticTelemetry",
      "Parameters": [
        {
          "Name": "Active",
          "Type": "boolean"
        }
      ]
    },
    {
      "Name": "ChangeDeviceState",
      "Parameters": [
        {
          "Name": "DeviceState",
          "Type": "string"
        }
      ]
    }
  ],
  "CommandHistory": [],
  "IsSimulatedDevice": 1,
  "Version": "1.0",
  "ObjectType": "DeviceInfo",
  "IoTHub": {
    "MessageId": null,
    "CorrelationId": null,
    "ConnectionDeviceId": "SampleDevice001_455",
    "ConnectionDeviceGenerationId": "635894317219942540",
    "EnqueuedTime": "0001-01-01T00:00:00",
    "StreamId": null
  },
  "SystemProperties": {
    "ICCID": null
  },
  "id": "7101c002-085f-4954-b9aa-7466980a2aaf"
}
```

### <a name="custom-device"></a>Προσαρμοσμένη συσκευή

Το παρακάτω παράδειγμα εμφανίζει την καρτέλα JSON συσκευή πληροφορίες για μια προσαρμοσμένη συσκευή και έχει τη σημαία **IsSimulatedDevice** την τιμή **0**. Μπορείτε να δείτε ότι αυτή η προσαρμοσμένη συσκευή υποστηρίζει δύο εντολές και ότι η πύλη λύση έχει στείλει μια εντολή **SetTemperature** στη συσκευή:

```
{
  "DeviceProperties": {
    "DeviceID": "mydevice01",
    "HubEnabledState": true,
    "CreatedTime": "2016-03-28T21:05:06.6061104Z",
    "DeviceState": "normal",
    "UpdatedTime": "2016-06-07T22:05:34.2802549Z"
  },
  "SystemProperties": {
    "ICCID": null
  },
  "Commands": [
    {
      "Name": "SetHumidity",
      "Parameters": [
        {
          "Name": "humidity",
          "Type": "int"
        }
      ]
    },
    {
      "Name": "SetTemperature",
      "Parameters": [
        {
          "Name": "temperature",
          "Type": "int"
        }
      ]
    }
  ],
  "CommandHistory": [
    {
      "Name": "SetTemperature",
      "MessageId": "2a0cec61-5eca-4de7-92dc-9c0bc4211c46",
      "CreatedTime": "2016-06-07T21:05:18.140796Z",
      "Parameters": {
        "temperature": 20
      },
      "UpdatedTime": "2016-06-07T21:05:18.716076Z",
      "Result": "Expired"
    }
  ],
  "IsSimulatedDevice": 0,
  "id": "6184ae0f-2d94-4fbd-91cd-4b193aecc9d1",
  "ObjectType": "DeviceInfo",
  "Version": "1.0",
  "IoTHub": {
    "MessageId": null,
    "CorrelationId": null,
    "ConnectionDeviceId": "SampleCustom",
    "ConnectionDeviceGenerationId": "635947959068246845",
    "EnqueuedTime": "0001-01-01T00:00:00",
    "StreamId": null
  }
}
```

Η ακόλουθη εικόνα δείχνει το μήνυμα JSON **DeviceInfo** τη συσκευή που αποστέλλονται για να ενημερώσετε τα μετα-δεδομένα πληροφορίες συσκευή:

```
{ "ObjectType":"DeviceInfo",
  "Version":"1.0",
  "IsSimulatedDevice":false,
  "DeviceProperties": { "DeviceID":"mydevice01", "HubEnabledState":true },
  "Commands": [
    {"Name":"SetHumidity", "Parameters":[{"Name":"humidity","Type":"double"}]},
    {"Name":"SetTemperature", "Parameters":[{"Name":"temperature","Type":"double"}]}
  ]
}
```

## <a name="next-steps"></a>Επόμενα βήματα

Τώρα που έχετε ολοκληρώσει τη μάθετε πώς μπορείτε να προσαρμόσετε τις προκαθορισμένες λύσεις, μπορείτε να εξερευνήσετε ορισμένες από τις άλλες δυνατότητες και τις δυνατότητες των λύσεων οικογένεια IoT προ-διαμορφωμένες:

- [Επισκόπηση της λύσης πρόβλεψης συντήρησης προ-διαμορφωμένες][lnk-predictive-overview]
- [Συνήθεις ερωτήσεις για την οικογένεια προγραμμάτων IoT][lnk-faq]
- [Ασφάλεια IoT από το μηδέν προς τα επάνω][lnk-security-groundup]



<!-- Images and links -->
[img-device-list]: media/iot-suite-remote-monitoring-device-info/image1.png
[img-device-edit]: media/iot-suite-remote-monitoring-device-info/image2.png
[img-device-remove]: media/iot-suite-remote-monitoring-device-info/image3.png

[lnk-iot-hub]: https://azure.microsoft.com/documentation/services/iot-hub/
[lnk-identity-registry]: ../iot-hub/iot-hub-devguide-identity-registry.md
[lnk-docdb]: https://azure.microsoft.com/documentation/services/documentdb/
[lnk-ref-arch]: http://download.microsoft.com/download/A/4/D/A4DAD253-BC21-41D3-B9D9-87D2AE6F0719/Microsoft_Azure_IoT_Reference_Architecture.pdf
[lnk-stream-analytics]: https://azure.microsoft.com/documentation/services/stream-analytics/
[lnk-dm-preview]: ../iot-hub/iot-hub-device-management-overview.md
[lnk-dynamic-telemetry]: iot-suite-dynamic-telemetry.md

[lnk-predictive-overview]: iot-suite-predictive-overview.md
[lnk-faq]: iot-suite-faq.md
[lnk-security-groundup]: securing-iot-ground-up.md
