<properties
   pageTitle="Ασφάλιση μιας βάσης δεδομένων σε αποθήκη δεδομένων του SQL | Microsoft Azure"
   description="Συμβουλές για την ασφάλεια των βάσεων δεδομένων στην αποθήκη δεδομένων του SQL Azure για την ανάπτυξη λύσεων."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="ronortloff"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="09/24/2016"
   ms.author="rortloff;barbkess;sonyama"/>

# <a name="secure-a-database-in-sql-data-warehouse"></a>Ασφάλιση μιας βάσης δεδομένων σε αποθήκη δεδομένων του SQL

> [AZURE.SELECTOR]
- [Επισκόπηση ασφαλείας](sql-data-warehouse-overview-manage-security.md)
- [Έλεγχος ταυτότητας](sql-data-warehouse-authentication.md)
- [Κρυπτογράφηση (πύλη)](sql-data-warehouse-encryption-tde.md)
- [Κρυπτογράφηση (T-SQL)](sql-data-warehouse-encryption-tde-tsql.md)

Σε αυτό το άρθρο παρουσιάζει τα βασικά στοιχεία για την ασφάλιση της βάσης δεδομένων σας αποθήκη δεδομένων του SQL Azure. Συγκεκριμένα, αυτό το άρθρο θα σας βοηθήσουν να ξεκινήσετε με πόρους περιορισμού της πρόσβασης, προστασία δεδομένων, και την παρακολούθηση δραστηριοτήτων σε μια βάση δεδομένων.

## <a name="connection-security"></a>Ασφάλεια σύνδεσης

Ασφάλεια σύνδεσης αναφέρεται σε ασφαλείς συνδέσεις στη βάση δεδομένων με χρήση του κανόνες τείχους προστασίας και κρυπτογράφηση σύνδεσης και πώς μπορείτε να περιορίσετε.

Κανόνες τείχους προστασίας χρησιμοποιούνται από το διακομιστή και τη βάση δεδομένων για να απορρίψετε προσπάθειες σύνδεσης από διευθύνσεις IP που δεν έχουν ρητά whitelisted. Να επιτρέπουν συνδέσεις από την εφαρμογή σας ή δημόσια διεύθυνση IP του υπολογιστή-πελάτη, πρέπει πρώτα να δημιουργήσετε έναν κανόνα τείχους προστασίας επιπέδου διακομιστή χρησιμοποιώντας την πύλη Azure, REST API ή PowerShell. Ως βέλτιστη πρακτική, θα πρέπει να περιορίσετε τις περιοχές διευθύνσεων IP επιτράπηκε μέσω του τείχους προστασίας του διακομιστή όσο είναι δυνατό.  Για να αποκτήσετε πρόσβαση αποθήκη δεδομένων του SQL Azure από τον τοπικό υπολογιστή, βεβαιωθείτε ότι το τείχος προστασίας στο δίκτυό σας και του τοπικού υπολογιστή επιτρέπει την εξερχόμενη επικοινωνία στη θύρα TCP 1433.  Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [βάση δεδομένων SQL Azure τείχος προστασίας][], [sp_set_firewall_rule][]και [sp_set_database_firewall_rule][].

Συνδέσεις προς την αποθήκη δεδομένων του SQL κρυπτογραφούνται από προεπιλογή.  Τροποποίηση των ρυθμίσεων σύνδεσης για να απενεργοποιήσετε την κρυπτογράφηση παραβλέπονται.

## <a name="authentication"></a>Έλεγχος ταυτότητας

Έλεγχος ταυτότητας αναφέρεται σε πώς αποδεικνύετε την ταυτότητά σας κατά τη σύνδεση με τη βάση δεδομένων. Αποθήκη δεδομένων του SQL υποστηρίζει αυτήν τη στιγμή τον έλεγχο ταυτότητας του SQL Server με ένα όνομα χρήστη και τον κωδικό πρόσβασης, καθώς και μια Azure Active Directory. 

Όταν δημιουργήσατε το διακομιστή λογική για τη βάση δεδομένων, έχετε καθορίσει μια σύνδεση "Διαχείριση διακομιστή" με ένα όνομα χρήστη και τον κωδικό πρόσβασης. Χρησιμοποιεί αυτά τα διαπιστευτήρια, μπορείτε να τον έλεγχο ταυτότητας με οποιαδήποτε βάση δεδομένων σε αυτόν το διακομιστή ως κάτοχος της βάσης δεδομένων, ή "dbo" μέσω του ελέγχου ταυτότητας του SQL Server.

Ωστόσο, ως βέλτιστη πρακτική, οι χρήστες της εταιρείας σας πρέπει να χρησιμοποιήσετε ένα διαφορετικό λογαριασμό για τον έλεγχο ταυτότητας. Με αυτόν τον τρόπο μπορείτε να περιορίσετε τα δικαιώματα που έχουν εκχωρηθεί στην εφαρμογή και να μειώσετε τους κινδύνους της κακόβουλης δραστηριότητας σε περίπτωση κώδικα της εφαρμογής σας έχει ευπάθεια μια επίθεση εισαγωγής SQL. 

Για να δημιουργήσετε ένα χρήστη με έλεγχο ταυτότητας στον SQL Server, συνδεθείτε με την **κύρια** βάση δεδομένων στο διακομιστή σας με τη σύνδεσή σας διακομιστή διαχείρισης και να δημιουργήσετε μια νέα σύνδεση σε διακομιστή.  Επιπλέον, είναι καλή ιδέα να δημιουργήσετε έναν χρήστη στην κύρια βάση δεδομένων για τους χρήστες αποθήκη δεδομένων του SQL Azure. Δημιουργία ενός χρήστη στο υπόδειγμα επιτρέπει στο χρήστη να συνδεθείτε με εργαλεία όπως SSMS χωρίς να καθορίσετε ένα όνομα βάσης δεδομένων.  Αυτό σας επιτρέπει επίσης να χρησιμοποιήσετε την Εξερεύνηση του αντικειμένου για να δείτε όλες τις βάσεις δεδομένων SQL server.

```sql
-- Connect to master database and create a login
CREATE LOGIN ApplicationLogin WITH PASSWORD = 'Str0ng_password';
CREATE USER ApplicationUser FOR LOGIN ApplicationLogin;
```

Στη συνέχεια, συνδεθείτε σας **αποθήκη δεδομένων του SQL βάσης δεδομένων** με τη σύνδεσή σας διακομιστή διαχείρισης και να δημιουργήσετε χρήστη βάσης δεδομένων με βάση τη σύνδεση σε διακομιστή που μόλις δημιουργήσατε.

```sql
-- Connect to SQL DW database and create a database user
CREATE USER ApplicationUser FOR LOGIN ApplicationLogin;
```

Εάν ένας χρήστης θα κάνετε πρόσθετες λειτουργίες όπως δημιουργία συνδέσεων ή τη δημιουργία νέων βάσεων δεδομένων, αυτά θα πρέπει επίσης να αντιστοιχιστεί σε το `Loginmanager` και `dbmanager` ρόλους στην κύρια βάση δεδομένων. Για περισσότερες πληροφορίες σχετικά με αυτούς τους ρόλους πρόσθετες και ο έλεγχος ταυτότητας με μια βάση δεδομένων SQL, ανατρέξτε στο θέμα [Διαχείριση βάσεων δεδομένων και συνδέσεις σε βάση δεδομένων SQL Azure][].  Για περισσότερες λεπτομέρειες σχετικά με Azure AD για αποθήκη δεδομένων του SQL, ανατρέξτε στο θέμα [σύνδεση με δεδομένα αποθήκης από χρησιμοποιώντας Azure Active Directory έλεγχος ταυτότητας του SQL][].


## <a name="authorization"></a>Εξουσιοδότηση

Εξουσιοδότηση αναφέρεται σε τι μπορείτε να κάνετε μέσα σε μια βάση δεδομένων SQL Azure Data Warehouse και αυτό ελέγχεται από το λογαριασμό χρήστη ιδιότητες μελών ρόλων και δικαιωμάτων. Ως βέλτιστη πρακτική, θα πρέπει να εκχωρήσετε στους χρήστες το ελάχιστα απαραίτητα δικαιώματα. Αποθήκη δεδομένων του SQL Azure διευκολύνει σε αυτό για να διαχειριστείτε με τους ρόλους στο T-SQL:

```sql
EXEC sp_addrolemember 'db_datareader', 'ApplicationUser'; -- allows ApplicationUser to read data
EXEC sp_addrolemember 'db_datawriter', 'ApplicationUser'; -- allows ApplicationUser to write data
```

Ο λογαριασμός διαχειριστή διακομιστή συνδέεστε με είναι μέλος της db_owner, η οποία έχει αρχή για να κάνετε τίποτα μέσα στη βάση δεδομένων. Αποθήκευση αυτού του λογαριασμού για την ανάπτυξη του σχήματος αναβαθμίσεις και άλλες λειτουργίες διαχείρισης. Χρησιμοποιήστε το λογαριασμό "ApplicationUser" με πιο περιορισμένα δικαιώματα για σύνδεση από την εφαρμογή σας στη βάση δεδομένων με τα ελάχιστα δικαιώματα που απαιτούνται από την εφαρμογή σας.

Υπάρχουν τρόποι για να περιορίσετε περαιτέρω τι να κάνετε ένα χρήστη με βάση δεδομένων SQL Azure:

- Λεπτομερές [δικαιώματα][] σάς επιτρέπουν να ελέγχετε ποιες λειτουργίες που μπορείτε να κάνετε σε μεμονωμένες στήλες, πινάκων, προβολών, διαδικασίες και άλλα αντικείμενα στη βάση δεδομένων. Χρησιμοποιήστε λεπτομερούς δικαιώματα για να έχετε το μεγαλύτερο έλεγχο και εκχώρηση τα ελάχιστα απαραίτητα δικαιώματα. Το σύστημα λεπτομερούς δικαιωμάτων είναι κάπως περίπλοκο και θα απαιτούν ορισμένες μελέτης για να χρησιμοποιήσετε αποτελεσματικά.
- Εκτός από db_datareader και db_datawriter [ρόλους βάσης δεδομένων][] μπορεί να χρησιμοποιηθεί για να δημιουργήσετε λογαριασμούς χρήστη πιο ισχυρή εφαρμογών ή λιγότερο ισχυρά διαχείρισης λογαριασμών. Οι ρόλοι ενσωματωμένη σταθερό βάσης δεδομένων παρέχουν έναν εύκολο τρόπο για την εκχώρηση δικαιωμάτων, αλλά μπορεί να έχει ως αποτέλεσμα εκχώρηση δικαιωμάτων περισσότερες από αυτές που είναι απαραίτητες.
- [Αποθηκευμένες διαδικασίες][] μπορεί να χρησιμοποιηθεί για να περιορίσετε τις ενέργειες που μπορούν να ληφθούν από τη βάση δεδομένων.

Διαχείριση βάσεων δεδομένων και λογική διακομιστές από την πύλη κλασική Azure ή τη χρήση του API διαχείρισης πόρων Azure ελέγχεται από εκχώρησης ρόλου του λογαριασμού σας χρήστη της πύλης. Για περισσότερες πληροφορίες σχετικά με αυτό το θέμα, ανατρέξτε στο θέμα [Έλεγχος πρόσβασης βάσει ρόλων στην πύλη Azure][].

## <a name="encryption"></a>Κρυπτογράφηση

Azure SQL δεδομένων αποθήκης διαφανή δεδομένων κρυπτογράφησης (TDE) συμβάλλει στην προστασία υπό την απειλή κακόβουλης δραστηριότητας, εκτελώντας σε πραγματικό χρόνο κρυπτογράφηση και αποκρυπτογράφηση των δεδομένων σας στο υπόλοιπο.  Όταν κρυπτογραφήσετε τη βάση δεδομένων, συσχετισμένη αντίγραφα ασφαλείας και αρχεία καταγραφής συναλλαγών κρυπτογραφούνται χωρίς να απαιτείται τυχόν αλλαγές στις εφαρμογές σας. TDE κρυπτογραφεί την αποθήκευση μιας ολόκληρης βάσης δεδομένων με τη χρήση συμμετρική κλειδιού που ονομάζεται του κλειδιού κρυπτογράφησης βάσης δεδομένων. Σε βάση δεδομένων SQL του κλειδιού κρυπτογράφησης βάσης δεδομένων προστατεύεται από ένα πιστοποιητικό διακομιστή ενσωματωμένα. Το πιστοποιητικό διακομιστή ενσωματωμένη είναι μοναδικός για κάθε βάση δεδομένων SQL server. Microsoft περιστρέφει αυτόματα αυτά τα πιστοποιητικά τουλάχιστον κάθε 90 ημέρες. Ο αλγόριθμος κρυπτογράφησης που χρησιμοποιούνται από αποθήκη δεδομένων του SQL είναι AES-256. Για μια γενική περιγραφή της TDE, ανατρέξτε στο θέμα [Διαφανή κρυπτογράφηση δεδομένων][].

Μπορείτε να κρυπτογραφήσετε τη βάση δεδομένων με την [Πύλη Azure] [ Encryption with Portal] ή [T SQL][Encryption with TSQL].

## <a name="next-steps"></a>Επόμενα βήματα

Για λεπτομέρειες και παραδείγματα σχετικά με τη σύνδεση σας αποθήκη δεδομένων του SQL με διαφορετικά πρωτόκολλα, ανατρέξτε στο θέμα [σύνδεση σε αποθήκη δεδομένων του SQL][].

<!--Image references-->

<!--Article references-->
[Σύνδεση με αποθήκη δεδομένων του SQL]: ./sql-data-warehouse-connect-overview.md
[Encryption with Portal]: ./sql-data-warehouse-encryption-tde.md
[Encryption with TSQL]: ./sql-data-warehouse-encryption-tde-tsql.md
[Σύνδεση με αποθήκη δεδομένων του SQL χρησιμοποιώντας τον έλεγχο ταυτότητας καταλόγου Azure Active Directory]: ./sql-data-warehouse-authentication.md

<!--MSDN references-->
[Το τείχος προστασίας της βάσης δεδομένων SQL Azure]: https://msdn.microsoft.com/library/ee621782.aspx
[sp_set_firewall_rule]: https://msdn.microsoft.com/library/dn270017.aspx
[sp_set_database_firewall_rule]: https://msdn.microsoft.com/library/dn270010.aspx
[Ρόλοι βάσης δεδομένων]: https://msdn.microsoft.com/library/ms189121.aspx
[Διαχείριση βάσεων δεδομένων και συνδέσεις σε βάση δεδομένων SQL Azure]: https://msdn.microsoft.com/library/ee336235.aspx
[Δικαιώματα]: https://msdn.microsoft.com/library/ms191291.aspx
[Αποθηκευμένες διαδικασίες]: https://msdn.microsoft.com/library/ms190782.aspx
[Κρυπτογράφηση διαφανή δεδομένων]: https://msdn.microsoft.com/library/bb934049.aspx
[Azure portal]: https://portal.azure.com/

<!--Other Web references-->
[Έλεγχος πρόσβασης βάσει ρόλων στην πύλη Azure]: https://azure.microsoft.com/documentation/articles/role-based-access-control-configure
