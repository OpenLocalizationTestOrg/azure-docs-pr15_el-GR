<properties
   pageTitle="Αποθηκευμένες διαδικασίες στο αποθήκη δεδομένων του SQL | Microsoft Azure"
   description="Συμβουλές για την υλοποίηση αποθηκευμένες διαδικασίες στο αποθήκη δεδομένων του SQL Azure για την ανάπτυξη λύσεων."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="jrowlandjones"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="06/30/2016"
   ms.author="jrj;barbkess;sonyama"/>

# <a name="stored-procedures-in-sql-data-warehouse"></a>Αποθηκευμένες διαδικασίες στο αποθήκη δεδομένων του SQL

Αποθήκη δεδομένων του SQL υποστηρίζει πολλές από τις δυνατότητες Transact-SQL που βρέθηκε στο SQL Server. Πιο σημαντικό είναι ότι υπάρχουν κλίμακα συγκεκριμένες δυνατότητες που θα θέλουμε να αξιοποιήσετε για να μεγιστοποιήσετε τις επιδόσεις της λύσης σας.

Ωστόσο, για να διατηρήσετε την κλίμακα και τις επιδόσεις του αποθήκη δεδομένων του SQL είναι επίσης ορισμένες δυνατότητες και λειτουργίες που έχουν διαφορές συμπεριφοράς και οι άλλοι χρήστες που δεν υποστηρίζονται.

Σε αυτό το άρθρο εξηγεί πώς μπορείτε να υλοποιήσετε αποθηκευμένες διαδικασίες μέσα σε αποθήκη δεδομένων του SQL.

## <a name="introducing-stored-procedures"></a>Εισαγωγή αποθηκευμένες διαδικασίες
Αποθηκευμένες διαδικασίες είναι ένας εξαιρετικός τρόπος για την ενσωμάτωση του κώδικα SQL. Αποθήκευση του κοντά σας δεδομένα στην αποθήκη δεδομένων. Από την ενσωματώνει τον κώδικα σε εύχρηστες μονάδες αποθηκευμένες διαδικασίες βοηθήσει τους προγραμματιστές modularize λύσεις τους; διευκόλυνση της μεγαλύτερη επαναχρησιμοποίησης του κώδικα. Κάθε αποθηκευμένη διαδικασία επίσης μπορούν να αποδεχθούν παραμέτρους ώστε να είναι ακόμα πιο ευέλικτη.

Αποθήκη δεδομένων του SQL παρέχει μια υλοποίηση απλοποιημένα και βελτιωμένο αποθηκευμένη διαδικασία. Η διαφορά μεγαλύτερων σε σύγκριση με το SQL Server είναι ότι την αποθηκευμένη διαδικασία δεν είναι προ-μεταγλωττισμένο κώδικα. Σε χώρους αποθήκευσης δεδομένων Ζητούμε γενικά λιγότερο ενημερώνουν το χρόνο μεταγλώττισης. Είναι πιο σημαντικά ότι ο κώδικας αποθηκευμένη διαδικασία είναι τέτοια σωστά όταν λειτουργεί σε μεγάλους όγκους δεδομένων. Ο στόχος είναι να την αποθηκεύσετε ώρες, λεπτά και δευτερόλεπτα δεν χιλιοστά του δευτερολέπτου. Επομένως, είναι πιο χρήσιμο να θεωρήσετε αποθηκευμένες διαδικασίες ως κοντέινερ για λογική SQL.     

Όταν αποθήκη δεδομένων του SQL εκτελεί την αποθηκευμένη διαδικασία τις προτάσεις SQL αναλύονται, μεταφρασμένου και βελτιστοποιημένη κατά το χρόνο εκτέλεσης. Κατά τη διάρκεια αυτής της διαδικασίας κάθε δήλωση μετατρέπεται σε κατανεμημένα ερωτήματα. Τον κώδικα SQL που είναι στην πραγματικότητα εκτελεστεί σε τα δεδομένα είναι διαφορετικό στο ερώτημα που υποβάλλεται.

## <a name="nesting-stored-procedures"></a>Ένθεση αποθηκευμένες διαδικασίες
Όταν καλέσετε άλλους αποθηκευμένες διαδικασίες αποθηκευμένες διαδικασίες ή η εκτέλεση δυναμικής sql, στη συνέχεια, τα εσωτερικά αποθηκευμένη διαδικασία ή κωδικός κλήσης λέγεται είναι ένθετες.

Αποθήκη δεδομένων του SQL υποστηρίζει έως 8 επίπεδα ένθεσης. Αυτή είναι λίγο διαφορετικά με τον SQL Server. Το επίπεδο φωλιά στον SQL Server είναι 32.

Η κλήση επάνω επιπέδου αποθηκευμένη διαδικασία ισούται με ένθεση επιπέδου 1

```sql
EXEC prc_nesting
```
Εάν την αποθηκευμένη διαδικασία δημιουργεί επίσης ένα άλλο ΕΚΤΈΛΕΣΗΣ κλήσης, στη συνέχεια, αυτό θα αυξηθεί το επίπεδο φωλιά σε 2
```sql
CREATE PROCEDURE prc_nesting
AS
EXEC prc_nesting_2  -- This call is nest level 2
GO
EXEC prc_nesting
```
Εάν η δεύτερη διαδικασία, στη συνέχεια, εκτελεί ορισμένες δυναμικής sql, στη συνέχεια, αυτό θα αυξήσει το επίπεδο φωλιά σε 3
```sql
CREATE PROCEDURE prc_nesting_2
AS
EXEC sp_executesql 'SELECT 'another nest level'  -- This call is nest level 2
GO
EXEC prc_nesting
```

Σημείωση το SQL Data Warehouse δεν υποστηρίζει αυτήν τη στιγμή @@NESTLEVEL. Θα πρέπει να παρακολουθείτε ένα επίπεδο σας φωλιά μόνοι σας. Είναι πιθανό θα πατήσετε το όριο επίπεδο 8 φωλιά, αλλά εάν το κάνετε θα πρέπει να εργαστείτε ξανά τον κωδικό και "Ισοπέδωση" το ώστε να χωράει μέσα σε αυτό το όριο.

## <a name="insertexecute"></a>ΕΙΣΑΓΩΓΉ... ΕΚΤΈΛΕΣΗ
Αποθήκη δεδομένων του SQL δεν σας επιτρέπει να εκμετάλλευση το σύνολο των αποτελεσμάτων μιας αποθηκευμένης διαδικασίας με μια δήλωση INSERT. Ωστόσο, υπάρχει μια εναλλακτική προσέγγιση, μπορείτε να χρησιμοποιήσετε.

Ανατρέξτε στο ακόλουθο άρθρο σε [προσωρινό πίνακες] για ένα παράδειγμα σχετικά με τον τρόπο για να το κάνετε αυτό.

## <a name="limitations"></a>Περιορισμοί

Υπάρχουν ορισμένα στοιχεία της Transact-SQL αποθηκευμένες διαδικασίες που δεν εφαρμόζονται σε αποθήκη δεδομένων του SQL.

Είναι οι εξής:

- προσωρινά αποθηκευμένων διαδικασιών
- αρίθμηση αποθηκευμένες διαδικασίες
- σύνθετες αποθηκευμένες διαδικασίες
- CLR αποθηκευμένες διαδικασίες
- επιλογή κρυπτογράφηση
- επιλογή "Αναπαραγωγή"
- παράμετροι με πίνακα τιμών
- παράμετροι μόνο για ανάγνωση
- προεπιλεγμένες παραμέτρους
- εκτέλεση περιβάλλοντα
- δήλωση επιστροφής

## <a name="next-steps"></a>Επόμενα βήματα
Για περισσότερες συμβουλές ανάπτυξης, ανατρέξτε στο θέμα [Επισκόπηση ανάπτυξης][].

<!--Image references-->

<!--Article references-->
[προσωρινό πίνακες]: ./sql-data-warehouse-tables-temporary.md#modularizing-code
[Επισκόπηση ανάπτυξης]: ./sql-data-warehouse-overview-develop.md

<!--MSDN references-->
[nest level]: https://msdn.microsoft.com/library/ms187371.aspx

<!--Other Web references-->
