<properties
   pageTitle="Δημιουργήστε μια πύλη εφαρμογής με το τείχος προστασίας εφαρμογής web με την πύλη | Microsoft Azure"
   description="Μάθετε πώς μπορείτε να δημιουργήσετε μια πύλη εφαρμογής με το τείχος προστασίας εφαρμογής web χρησιμοποιώντας την πύλη"
   services="application-gateway"
   documentationCenter="na"
   authors="georgewallace"
   manager="carmonm"
   editor="tysonn"
   tags="azure-resource-manager"
/>
<tags  
   ms.service="application-gateway"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="10/25/2016"
   ms.author="gwallace" />

# <a name="create-an-application-gateway-with-web-application-firewall-by-using-the-portal"></a>Δημιουργήστε μια πύλη εφαρμογής με τείχος προστασίας εφαρμογής web με χρήση της πύλης

> [AZURE.SELECTOR]
- [Πύλη του Azure](application-gateway-web-application-firewall-portal.md)
- [Azure του PowerShell για τη διαχείριση πόρων](application-gateway-web-application-firewall-powershell.md)

Το web εφαρμογής τείχος προστασίας (WAF) στην πύλη εφαρμογής Azure προστατεύει εφαρμογές web από κοινές επιθέσεις βασίζεται στο web όπως την εισαγωγή SQL, επιθέσεις δέσμης ενεργειών διατοποθεσιακή και hijacks περιόδου λειτουργίας. Εφαρμογή Web προστατεύει από πολλές από τις OWASP πρώτων 10 κοινές web ευπάθειες.

Azure πύλη εφαρμογής είναι μια μονάδα εξισορρόπησης φόρτου επιπέδου-7. Παρέχει ανακατεύθυνση, δρομολόγησης επιδόσεων αιτήσεις HTTP ανάμεσα σε διαφορετικούς διακομιστές, είτε είναι στο cloud ή εσωτερικής εγκατάστασης.
Εφαρμογή παρέχει πολλές ελεγκτή παράδοσης εφαρμογής (ADC) δυνατότητες όπως εξισορρόπηση φόρτου HTTP συσχέτισης βασίζεται σε cookie περιόδου λειτουργίας, Secure Sockets Layer (SSL) μείωση φόρτου, καθετήρες προσαρμοσμένο εύρυθμης λειτουργίας υποστήριξης για πολλούς τοποθεσίας και πολλά άλλα.
Για να βρείτε μια πλήρη λίστα των υποστηριζόμενες δυνατότητες, επισκεφθείτε την [Επισκόπηση πύλης εφαρμογής](application-gateway-introduction.md)

## <a name="scenarios"></a>Σενάρια

Σε αυτό το άρθρο υπάρχουν δύο σενάρια:

Στο πρώτο σενάριο, μπορείτε να μάθετε για να [προσθέσετε το τείχος προστασίας εφαρμογής web σε μια υπάρχουσα πύλη εφαρμογής](#add-web-application-firewall-to-an-existing-application-gateway).

Στο δεύτερο σενάριο, θα μάθετε πώς να [δημιουργείτε μια πύλη εφαρμογής με το τείχος προστασίας εφαρμογής web](#create-an-application-gateway-with-web-application-firewall)

![Παράδειγμα σεναρίου][scenario]

>[AZURE.NOTE] Πρόσθετες ρυθμίσεις παραμέτρων της πύλης εφαρμογής, συμπεριλαμβανομένων των προσαρμοσμένων εύρυθμης λειτουργίας probes, διευθύνσεις χώρου συγκέντρωσης παρασκηνίου επιπλέον κανόνες ρυθμίζονται και μετά τη ρύθμιση παραμέτρων της πύλης εφαρμογής και όχι κατά την αρχική ανάπτυξη.

## <a name="before-you-begin"></a>Πριν ξεκινήσετε

Azure πύλη εφαρμογής απαιτεί ξεχωριστή υποδικτύου. Κατά τη δημιουργία ενός εικονικού δικτύου, βεβαιωθείτε ότι έχετε αφήσει αρκετό χώρο διεύθυνση να έχει πολλά δευτερεύοντα δίκτυα. Αφού αναπτύξετε μια πύλη εφαρμογής με ένα δευτερεύον, πύλες μόνο πρόσθετα εφαρμογής είναι μπορούν να προστεθούν στο υποδίκτυο.

## <a name="add-web-application-firewall-to-an-existing-application-gateway"></a>Προσθήκη τείχος προστασίας εφαρμογής web σε μια υπάρχουσα πύλη εφαρμογής

Αυτό το σενάριο ενημερώνεται ένα υπάρχον πύλη εφαρμογής για την υποστήριξη τείχος προστασίας εφαρμογής web σε λειτουργία αποτροπής.

### <a name="step-1"></a>Βήμα 1

Μεταβείτε στην πύλη του Azure, επιλέξτε μια υπάρχουσα πύλη εφαρμογής.

![Δημιουργία εφαρμογής πύλης][1]

### <a name="step-2"></a>Βήμα 2

Κάντε κλικ στην επιλογή **Ρύθμιση παραμέτρων** και ενημέρωση των ρυθμίσεων της πύλης εφαρμογής. Όταν ολοκληρωθεί η εγκατάσταση κάντε κλικ στο κουμπί **Αποθήκευση**

Οι ρυθμίσεις για να ενημερώσετε μια υπάρχουσα πύλη εφαρμογής για την υποστήριξη τείχος προστασίας εφαρμογής web είναι:

- **Επίπεδο** - η σειρά επιλεγμένο πρέπει να είναι **WAF** για την υποστήριξη τείχος προστασίας εφαρμογής web
- **Μέγεθος SKU** - αυτή η ρύθμιση είναι το μέγεθος της πύλης εφαρμογή με το τείχος προστασίας εφαρμογής web, οι διαθέσιμες επιλογές είναι (**Μεσαίο** και **μεγάλο**).
- **Κατάσταση του τείχους προστασίας** - αυτή η ρύθμιση απενεργοποιεί ή ενεργοποιεί τείχος προστασίας εφαρμογής web.
- **Κατάσταση λειτουργίας τείχους προστασίας** - αυτή η ρύθμιση είναι πώς τείχος προστασίας εφαρμογής web ασχολείται με κακόβουλο κίνηση. Λειτουργία **εντοπισμού** καταγράφει μόνο τα συμβάντα, όπου η λειτουργία **αποτροπής** καταγράφει τα συμβάντα και διακόπτει την κυκλοφορία κακόβουλο.

![βασικές ρυθμίσεις που εμφανίζει blade][2]

>[AZURE.NOTE] Για να προβάλετε αρχεία καταγραφής τείχους προστασίας των εφαρμογών web, πρέπει να είναι ενεργοποιημένη Διαγνωστικά και ApplicationGatewayFirewallLog επιλεγμένο. Μπορείτε να επιλέξετε ένα πλήθος παρουσία 1 για σκοπούς δοκιμής. Είναι σημαντικό να γνωρίζετε ότι οποιαδήποτε count παρουσία στην περιοχή δύο παρουσίες δεν καλύπτεται από το SLA και επομένως δεν συνιστάται. Μικρό πύλες δεν είναι διαθέσιμες όταν χρησιμοποιείτε τείχος προστασίας εφαρμογής web.

## <a name="create-an-application-gateway-with-web-application-firewall"></a>Δημιουργήστε μια πύλη εφαρμογής με το τείχος προστασίας εφαρμογής web

Αυτό το σενάριο θα:

- Δημιουργία πύλης εφαρμογής web ενδιάμεση εφαρμογή τείχος προστασίας με δύο παρουσίες.
- Δημιουργήστε ένα εικονικό δίκτυο με το όνομα AdatumAppGatewayVNET με ένα δεσμευμένο μπλοκ CIDR 10.0.0.0/16.
- Δημιουργήστε ένα δευτερεύον που ονομάζεται Appgatewaysubnet που χρησιμοποιεί 10.0.0.0/28 ως το μπλοκ CIDR.
- Ρύθμιση παραμέτρων ενός πιστοποιητικού για μείωση φόρτου SSL.

### <a name="step-1"></a>Βήμα 1

Μεταβείτε στην πύλη του Azure, κάντε κλικ στην επιλογή **Δημιουργία** > **δίκτυο** > **Πύλη εφαρμογής**

![Δημιουργία εφαρμογής πύλης][1-1]

### <a name="step-2"></a>Βήμα 2

Στη συνέχεια συμπληρώστε τις βασικές πληροφορίες σχετικά με την πύλη εφαρμογής. Φροντίστε να επιλέξετε **WAF** ως η σειρά. Όταν τελειώσετε, κάντε κλικ στο κουμπί **OK**

Οι πληροφορίες που χρειάζονται για τις βασικές ρυθμίσεις είναι:

- **Όνομα** - το όνομα για την πύλη εφαρμογής.
- **Επίπεδο** - η σειρά της πύλης εφαρμογής, οι διαθέσιμες επιλογές είναι (**Τυπική** και **WAF**). Τείχος προστασίας εφαρμογής Web είναι διαθέσιμη στο επίπεδο WAF μόνο.
- **Μέγεθος SKU** - αυτή η ρύθμιση είναι το μέγεθος της πύλης εφαρμογής, οι διαθέσιμες επιλογές είναι (**Μεσαίο** και **μεγάλο**).
- **Καταμέτρηση παρουσία** - ο αριθμός των παρουσιών, αυτή η τιμή πρέπει να είναι ένας αριθμός μεταξύ **2** και **10**.
- **Ομάδα πόρων** - την ομάδα των πόρων για τη διατήρηση της πύλης εφαρμογής, μπορεί να είναι μια υπάρχουσα ομάδα πόρων ή ένα νέο.
- **Θέση** - την περιοχή για την πύλη, η εφαρμογή είναι στην ίδια θέση με την ομάδα των πόρων. *Η τοποθεσία είναι σημαντική ως το εικονικό δίκτυο και δημόσια IP πρέπει να είναι στην ίδια θέση με την πύλη*.

![βασικές ρυθμίσεις που εμφανίζει blade][2-2]

>[AZURE.NOTE] Μπορείτε να επιλέξετε ένα πλήθος παρουσία 1 για σκοπούς δοκιμής. Είναι σημαντικό να γνωρίζετε ότι οποιαδήποτε count παρουσία στην περιοχή δύο παρουσίες δεν καλύπτεται από το SLA και επομένως δεν συνιστάται. Μικρό πυλών δεν υποστηρίζονται για σενάρια τείχους προστασίας εφαρμογής web.

### <a name="step-3"></a>Βήμα 3

Αφού τις βασικές ρυθμίσεις έχουν οριστεί, το επόμενο βήμα είναι να ορίσετε το εικονικό δίκτυο που θα χρησιμοποιηθεί. Το εικονικό δίκτυο φιλοξενεί την εφαρμογή που η πύλη εφαρμογής εξισορρόπηση φόρτου για.

Κάντε κλικ στην **επιλογή ένα εικονικό δίκτυο** για να ρυθμίσετε τις παραμέτρους του εικονικού δικτύου.

![blade που εμφανίζει ρυθμίσεις για την πύλη εφαρμογής][3]

### <a name="step-4"></a>Βήμα 4

Στο το blade **Επιλέξτε εικονικού δικτύου** , κάντε κλικ στην επιλογή **Δημιουργία νέου**

Ενώ δεν περιγράφεται σε αυτό το σενάριο, θα μπορούσε να είναι επιλεγμένο ένα υπάρχον δίκτυο εικονικού σε αυτό το σημείο.  Εάν χρησιμοποιείται ένα υπάρχον εικονικό δίκτυο, είναι σημαντικό να γνωρίζετε ότι το εικονικό δίκτυο χρειάζεται μια κενή υποδικτύου ή ένα υποδίκτυο μόνο εφαρμογή πύλης πόρων που θα χρησιμοποιηθεί.

![Επιλέξτε blade εικονικού δικτύου][4]

### <a name="step-5"></a>Βήμα 5

Συμπληρώστε τις πληροφορίες δικτύου στο blade τη **Δημιουργία εικονικού δικτύου** , όπως περιγράφεται στην προηγούμενη περιγραφή [σενάριο](#scenario) .

![Δημιουργία blade εικονικού δικτύου με πληροφορίες που έχουν εισαχθεί][5]

### <a name="step-6"></a>Βήμα 6

Αφού δημιουργηθεί το εικονικό δίκτυο, το επόμενο βήμα είναι να ορίσετε το προσκηνίου IP για την πύλη εφαρμογής. Σε αυτό το σημείο, η επιλογή είναι ανάμεσα σε μια δημόσια ή μια ιδιωτική διεύθυνση IP για το στοιχείο προσκηνίου. Η επιλογή εξαρτάται από το εάν η εφαρμογή είναι internet αντικριστές ή εσωτερικό μόνο. Αυτό το σενάριο προϋποθέτει χρησιμοποιώντας μια δημόσια διεύθυνση IP. Για να επιλέξετε μια ιδιωτική διεύθυνση IP, μπορείτε να κάνετε κλικ στο κουμπί **ιδιωτικό** . Έχει επιλεγεί η διεύθυνση IP που έχουν αντιστοιχιστεί αυτόματα ή μπορείτε να κάνετε κλικ στο πλαίσιο ελέγχου **επιλογή μια συγκεκριμένη ιδιωτική διεύθυνση IP** για να εισαγάγετε ένα με μη αυτόματο τρόπο.

Κάντε κλικ στην **επιλογή μια δημόσια διεύθυνση IP**. Εάν είναι διαθέσιμη μια υπάρχουσα δημόσια διεύθυνση IP, μπορείτε να επιλέξετε αυτήν τη στιγμή, σε αυτό το σενάριο μπορείτε να δημιουργήσετε μια νέα δημόσια διεύθυνση IP. Κάντε κλικ στην επιλογή **Δημιουργία νέου**

![Επιλέξτε δημόσια blade διεύθυνση IP][6]

### <a name="step-7"></a>Βήμα 7

Δώστε στη δημόσια διεύθυνση IP ένα φιλικό όνομα και κάντε κλικ στο **κουμπί OK**

![Δημιουργία blade δημόσια διεύθυνση IP][7]

### <a name="step-8"></a>Βήμα 8

Στη συνέχεια, μπορείτε να ρυθμίσετε τις παραμέτρους ακρόασης.  Εάν χρησιμοποιείται **http** , τίποτα είναι προς τα αριστερά για να ρυθμίσετε τις παραμέτρους και μπορείτε να κάνετε κλικ **OK** . Για να χρησιμοποιήσετε **https** περαιτέρω απαιτείται ρύθμιση παραμέτρων.

Για να χρησιμοποιήσετε **https**, απαιτείται ένα πιστοποιητικό. Το ιδιωτικό κλειδί του πιστοποιητικού είναι απαραίτητο, ώστε να εξαγάγετε ένα .pfx το πιστοποιητικό πρέπει να παρέχεται και τον κωδικό πρόσβασης για το αρχείο.

Κάντε κλικ στην επιλογή **HTTPS**, κάντε κλικ στο εικονίδιο του **φακέλου** δίπλα στο πλαίσιο κειμένου **Αποστολή PFX πιστοποιητικού** .
Μεταβείτε στο αρχείο .pfx πιστοποιητικό στο σύστημα αρχείων σας. Όταν είναι επιλεγμένο, δώστε το πιστοποιητικό ένα φιλικό όνομα και πληκτρολογήστε τον κωδικό πρόσβασης για το αρχείο .pfx.

Μόλις ολοκληρωθεί η λήψη, κάντε κλικ στο κουμπί **OK** για να δείτε τις ρυθμίσεις για την πύλη εφαρμογής.

![Ενότητα ρύθμισης παραμέτρων ακρόασης blade ρυθμίσεις][8]

### <a name="step-9"></a>Βήμα 9

Ρυθμίστε τις παραμέτρους συγκεκριμένων **WAF** .

- **Κατάσταση του τείχους προστασίας** - αυτή η ρύθμιση ενεργοποιεί WAF ή να απενεργοποιήσετε.
- **Κατάσταση λειτουργίας τείχους προστασίας** - αυτή η ρύθμιση καθορίζει το WAF ενέργειες τίθεται σε κακόβουλο κίνηση. Εάν έχει επιλεγεί **εντοπισμού** , καταγράφεται μόνο κίνηση.  Εάν επιλεγεί η **Αποτροπή** , κίνηση είναι συνδεδεμένος και να διακοπεί με μια 403 εξουσιοδότηση.

![ρυθμίσεις τείχους προστασίας της εφαρμογής Web][9]

### <a name="step-10"></a>Βήμα 10

Ελέγξτε τη σελίδα σύνοψης και κάντε κλικ στο κουμπί **OK**.  Τώρα η πύλη εφαρμογής είναι στην ουρά και να δημιουργήσει.

### <a name="step-12"></a>Βήμα 12

Μετά τη δημιουργία της πύλης εφαρμογή, μεταβείτε σε αυτό στην πύλη για να συνεχίσετε τη ρύθμιση παραμέτρων της πύλης εφαρμογής.

![Προβολή πόρων πύλης εφαρμογής][10]

Αυτά τα βήματα Δημιουργία πύλης βασικής εφαρμογής με τις προεπιλεγμένες ρυθμίσεις για το ακρόασης, χώρος συγκέντρωσης παρασκηνίου, ρυθμίσεις http παρασκηνίου και κανόνων. Μπορείτε να τροποποιήσετε αυτές τις ρυθμίσεις ώστε να ανταποκρίνονται ανάπτυξή σας μετά την προμήθεια είναι επιτυχής

## <a name="next-steps"></a>Επόμενα βήματα

Μάθετε πώς μπορείτε να ρυθμίσετε τις παραμέτρους καταγραφή διαγνωστικών, για να συνδεθείτε τα συμβάντα που έχουν εντοπιστεί ή εμπόδισε με τείχος προστασίας εφαρμογής Web με την επίσκεψή σας [Διαγνωστικά πύλης εφαρμογής](application-gateway-diagnostics.md)

Μάθετε πώς να δημιουργείτε προσαρμοσμένα εύρυθμης λειτουργίας καθετήρες μεταβαίνοντας [δημιουργήσετε μια προσαρμοσμένη εύρυθμης λειτουργίας δοκιμή του](application-gateway-create-probe-portal.md)

Μάθετε πώς μπορείτε να ρυθμίσετε τις παραμέτρους μείωση φόρτου SSL και διαρκέσει η κοστίζουν αποκρυπτογράφηση SSL απενεργοποίηση διακομιστές web με την επίσκεψή σας [Ρύθμιση παραμέτρων μείωση φόρτου SSL](application-gateway-ssl-portal.md)

<!--Image references-->
[1]: ./media/application-gateway-web-application-firewall-portal/figure1.png
[2]: ./media/application-gateway-web-application-firewall-portal/figure2.png
[1-1]: ./media/application-gateway-web-application-firewall-portal/figure1-1.png
[2-2]: ./media/application-gateway-web-application-firewall-portal/figure2-2.png
[3]: ./media/application-gateway-web-application-firewall-portal/figure3.png
[4]: ./media/application-gateway-web-application-firewall-portal/figure4.png
[5]: ./media/application-gateway-web-application-firewall-portal/figure5.png
[6]: ./media/application-gateway-web-application-firewall-portal/figure6.png
[7]: ./media/application-gateway-web-application-firewall-portal/figure7.png
[8]: ./media/application-gateway-web-application-firewall-portal/figure8.png
[9]: ./media/application-gateway-web-application-firewall-portal/figure9.png
[10]: ./media/application-gateway-web-application-firewall-portal/figure10.png
[scenario]: ./media/application-gateway-web-application-firewall-portal/scenario.png