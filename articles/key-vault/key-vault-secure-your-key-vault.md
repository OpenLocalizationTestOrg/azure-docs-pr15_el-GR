<properties
    pageTitle="Ασφαλούς σας κλειδιού θάλαμο | Microsoft Azure"
    description="Διαχείριση δικαιωμάτων πρόσβασης για κλειδιού θάλαμο για τη Διαχείριση χώροι φύλαξης και αριθμούς-κλειδιά και απορρήτου. Έλεγχος ταυτότητας και εξουσιοδότηση μοντέλου για κλειδιού θάλαμο και τον τρόπο για την ασφάλιση του κλειδιού θάλαμο"
    services="key-vault"
    documentationCenter=""
    authors="amitbapat"
    manager="mbaldwin"
    tags="azure-resource-manager"/>

<tags
    ms.service="key-vault"
    ms.workload="identity"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="hero-article"
    ms.date="10/07/2016"
    ms.author="ambapat"/>


# <a name="secure-your-key-vault"></a>Ασφαλούς σας κλειδιού θάλαμο

Azure θάλαμο κλειδί είναι μια υπηρεσία cloud που διασφαλίσεων κλειδιών κρυπτογράφησης και απορρήτου (όπως τα πιστοποιητικά, συμβολοσειρές σύνδεσης, κωδικούς πρόσβασης) για τις εφαρμογές σας cloud. Εφόσον αυτά τα δεδομένα είναι διάκριση πεζών-κεφαλαίων και κρίσιμο για την επιχείρηση, που θέλετε να διασφαλίσετε την πρόσβαση του κλειδιού χώροι φύλαξης, έτσι ώστε μόνο εξουσιοδοτημένοι εφαρμογές και τους χρήστες να αποκτήσετε πρόσβαση κλειδιού θάλαμο. Σε αυτό το άρθρο παρέχει μια επισκόπηση των βασικών θάλαμο μοντέλο πρόσβασης, εξηγεί τον έλεγχο ταυτότητας και εξουσιοδότηση και περιγράφει τον τρόπο ασφαλή πρόσβαση σε βασικές θάλαμο για τις εφαρμογές του cloud με ένα παράδειγμα.

## <a name="overview"></a>Επισκόπηση

Πρόσβαση σε ένα πλήκτρο θάλαμο ελέγχεται μέσω δύο ξεχωριστές διασυνδέσεων: Διαχείριση επιπέδου και επίπεδο δεδομένων. Για δύο επίπεδα proper ελέγχου ταυτότητας και εξουσιοδότησης απαιτείται πριν καλών (ένα χρήστη ή μια εφαρμογή του) μπορεί να αποκτήσετε πρόσβαση σε βασικές θάλαμο. Έλεγχος ταυτότητας δημιουργεί την ταυτότητα του καλούντος, ενώ εξουσιοδότησης καθορίζει ποιες λειτουργίες επιτρέπεται για να εκτελέσετε τον καλούντα.

Για τον έλεγχο ταυτότητας επιπέδου διαχείρισης και επίπεδο δεδομένων Χρησιμοποιήστε Azure Active Directory. Για άδεια επιπέδου διαχείρισης χρησιμοποιεί έλεγχο πρόσβασης βάσει ρόλων (RBAC), ενώ επίπεδο δεδομένων χρησιμοποιεί πολιτική πρόσβασης κλειδιού θάλαμο.

Ακολουθεί μια σύντομη επισκόπηση των θεμάτων που καλύπτονται:

[Έλεγχος ταυτότητας με χρήση Azure Active Directory](#authentication-using-azure-active-direcrory) - αυτή η ενότητα εξηγεί πώς καλών πραγματοποιεί έλεγχο ταυτότητας με το Azure Active Directory για να αποκτήσετε πρόσβαση σε ένα πλήκτρο θάλαμο μέσω επιπέδου διαχείρισης και επίπεδο δεδομένων. 

[Διαχείριση επιπέδου και επίπεδο δεδομένων](#management-plane-and-data-plane) - επιπέδου διαχείρισης και επίπεδο δεδομένων είναι δύο επιπέδων πρόσβασης που χρησιμοποιούνται για την πρόσβαση του κλειδιού θάλαμο. Κάθε επίπεδο πρόσβασης υποστηρίζει συγκεκριμένες εργασίες. Αυτή η ενότητα περιγράφει τα τελικά σημεία της access, λειτουργίες υποστηρίζονται και πρόσβαση μέθοδος ελέγχου που χρησιμοποιείται από κάθε επίπεδο. 

[Έλεγχος πρόσβασης επιπέδου διαχείρισης](#management-plane-access-control) - σε αυτήν την ενότητα θα εξετάσουμε δυνατότητας πρόσβασης λειτουργίες επιπέδου διαχείρισης χρησιμοποιώντας τον έλεγχο πρόσβασης βάσει ρόλων.

[Έλεγχος πρόσβασης επίπεδο δεδομένων](#data-plane-access-control) - αυτή η ενότητα περιγράφει τον τρόπο χρήσης κλειδιού θάλαμο πολιτική πρόσβασης για τον έλεγχο της πρόσβασης σε επίπεδο δεδομένα.

[Παράδειγμα](#example) - σε αυτό το παράδειγμα περιγράφει τον τρόπο ρύθμισης του ελέγχου πρόσβασης για το πλήκτρο θάλαμο για να επιτρέψετε σε τρεις διαφορετικές ομάδες (ομάδας ασφαλείας προγραμματιστές/τελεστές και ελεγκτές) για να εκτελέσετε συγκεκριμένες εργασίες για να αναπτύξετε, να διαχειριστείτε και να παρακολουθείτε μια εφαρμογή στο Azure.


## <a name="authentication-using-azure-active-directory"></a>Έλεγχος ταυτότητας με χρήση Azure Active Directory

Όταν δημιουργείτε ένα πλήκτρο θάλαμο σε μια συνδρομή του Azure, είναι αυτόματα σχετίζεται με τη συνδρομή Azure Active Directory μισθωτή. Όλες οι καλούντες (χρήστες και εφαρμογές) πρέπει να έχει εγγραφεί στο αυτού του μισθωτή για να αποκτήσετε πρόσβαση σε αυτό κλειδιού θάλαμο. Μια εφαρμογή ή ένα χρήστη πρέπει να τον έλεγχο ταυτότητας με το Azure Active Directory για να αποκτήσετε πρόσβαση κλειδιού θάλαμο. Αυτό ισχύει για δύο πρόσβαση επιπέδου διαχείρισης επιπέδου και των δεδομένων. Και στις δύο περιπτώσεις, μια εφαρμογή να αποκτήσετε πρόσβαση κλειδιού θάλαμο με δύο τρόπους:

-  **χρήστη + εφαρμογής access** - συνήθως πρόκειται για εφαρμογές που έχουν πρόσβαση κλειδιού θάλαμο εκ μέρους ενός χρήστη συνδεδεμένοι στο. Azure PowerShell, πύλη Azure είναι παραδείγματα αυτού του τύπου της access. Υπάρχουν δύο τρόποι για να εκχωρήσετε πρόσβαση στους χρήστες: ένας τρόπος είναι να εκχωρήσετε πρόσβαση στους χρήστες, ώστε να μπορούν να έχουν πρόσβαση κλειδιού θάλαμο από οποιαδήποτε εφαρμογή και ο άλλος τρόπος είναι να εκχωρήσετε ένα χρήστη πρόσβαση σε βασικές θάλαμο μόνο όταν χρησιμοποιούν μια συγκεκριμένη εφαρμογή (αναφέρεται ως σύνθετης ταυτότητας). 
-  **πρόσβαση μόνο για εφαρμογή** - για τις εφαρμογές που εκτελούνται μονού υπηρεσίες, φόντου εργασίες κ.λπ. Την ταυτότητα της εφαρμογής έχει εκχωρηθεί πρόσβαση για το πλήκτρο θάλαμο.

Και στους δύο τύπους εφαρμογών, η εφαρμογή πραγματοποιεί έλεγχο ταυτότητας με το Azure Active Directory χρησιμοποιώντας οποιαδήποτε από τις [μεθόδους ελέγχου ταυτότητας που υποστηρίζονται](../active-directory/active-directory-authentication-scenarios.md) και αποκτά ενός διακριτικού. Μέθοδος ελέγχου ταυτότητας που χρησιμοποιείται εξαρτάται από τον τύπο εφαρμογής. Στη συνέχεια, η εφαρμογή χρησιμοποιεί αυτό το διακριτικό και στέλνει την αίτηση REST API να κλειδιού θάλαμο. Σε περίπτωση πρόσβαση επιπέδου διαχείρισης των αιτήσεων δρομολογούνται μέσω Azure από διαχειριστή πόρων τελικού σημείου. Κατά την πρόσβαση στο επίπεδο δεδομένων, η συνομιλεί εφαρμογές απευθείας με έναν αριθμό-κλειδί φύλαξης τελικού σημείου. Δείτε περισσότερες λεπτομέρειες σχετικά με τη [ροή ολόκληρο τον έλεγχο ταυτότητας](../active-directory/active-directory-protocols-oauth-code.md). 

Το όνομα του πόρου για τον οποίο οι αιτήσεις εφαρμογών ενός διακριτικού διαφέρει ανάλογα με το εάν η εφαρμογή είναι την πρόσβαση σε επίπεδο διαχείρισης ή επίπεδο δεδομένων. Ως εκ τούτου το όνομα του πόρου είναι είτε Διαχείριση επιπέδου ή δεδομένα επιπέδου τελικό σημείο περιγράφεται στον πίνακα στην επόμενη ενότητα, ανάλογα με το περιβάλλον Azure.

Έχετε μία μόνο μηχανισμό για τον έλεγχο ταυτότητας, διαχείριση και επίπεδο δεδομένων έχει δικό του πλεονεκτήματα:

- Εταιρείες κεντρικά να ελέγχετε την πρόσβαση σε όλες τις βασικές χώροι φύλαξης στον οργανισμό τους
- Εάν ένας χρήστης αποχωρεί, τους χάσετε αμέσως πρόσβαση σε όλα χώροι φύλαξης κλειδιού στην εταιρεία
- Εταιρείες να προσαρμόσετε τον έλεγχο ταυτότητας μέσω τις επιλογές στο Azure Active Directory (για παράδειγμα, ενεργοποίηση ελέγχου ταυτότητας πολλαπλών παραγόντων για πρόσθετη ασφάλεια)

## <a name="management-plane-and-data-plane"></a>Διαχείριση επιπέδου και επίπεδο δεδομένων

Azure θάλαμο κλειδί είναι μια διαθέσιμη μέσω μοντέλο ανάπτυξης διαχείρισης πόρων Azure Azure υπηρεσία. Όταν δημιουργείτε ένα πλήκτρο θάλαμο, λαμβάνετε ένα εικονικό κοντέινερ εντός των οποίων μπορείτε να δημιουργήσετε άλλα αντικείμενα όπως πλήκτρα απορρήτου και πιστοποιητικά. Στη συνέχεια, έχετε πρόσβαση του κλειδιού θάλαμο χρήση επιπέδου διαχείρισης και επίπεδο δεδομένων για την εκτέλεση συγκεκριμένων λειτουργιών. Περιβάλλον εργασίας διαχείρισης επιπέδου χρησιμοποιείται για τη διαχείριση του κλειδιού θάλαμο μόνη της, όπως τη δημιουργία, διαγραφή, ενημέρωση κλειδιού θάλαμο χαρακτηριστικά και τη ρύθμιση πολιτικές πρόσβασης για το επίπεδο δεδομένων. Περιβάλλον εργασίας επίπεδο δεδομένων χρησιμοποιείται για την προσθήκη, διαγραφή, τροποποίηση και χρησιμοποιήστε τα πλήκτρα απορρήτου και πιστοποιητικά που είναι αποθηκευμένα σε σας κλειδιού θάλαμο.

Για τη Διαχείριση επιπέδου και δεδομένα επιπέδου που είναι προσβάσιμες μέσω διαφορετικό τελικά σημεία (ανατρέξτε στον πίνακα). Στη δεύτερη στήλη του πίνακα περιγράφονται τα ονόματα DNS για αυτά τα τελικά σημεία σε διαφορετικά περιβάλλοντα Azure. Η τρίτη στήλη περιγράφει τις ενέργειες που μπορείτε να εκτελέσετε από κάθε επίπεδο πρόσβασης. Κάθε επίπεδο πρόσβασης διαθέτει επίσης το δικό του μηχανισμού ελέγχου πρόσβασης: για έλεγχο πρόσβασης σε επίπεδο διαχείρισης έχει οριστεί με χρήση του ελέγχου πρόσβασης Azure Resource Manager Role-Based (RBAC), ενώ για τον έλεγχο πρόσβασης επιπέδου δεδομένων έχει οριστεί χρησιμοποιώντας την πολιτική πρόσβασης κλειδιού θάλαμο.

| Επίπεδο πρόσβασης | Τα τελικά σημεία πρόσβασης | Λειτουργίες | Μηχανισμός ελέγχου πρόσβασης|
|--------------|------------------|--------------------|--------|
| Διαχείριση επιπέδου|**Καθολικό:**<br> Management.Azure.com:443<br><br> **Azure Κίνα:**<br> Management.chinacloudapi.CN:443<br><br> **Azure κυβέρνηση των η.π.α.:**<br> Management.usgovcloudapi.NET:443<br><br> **Azure Γερμανία:**<br> Management.microsoftazure.de:443 | Δημιουργία/ανάγνωση/ενημέρωση/διαγραφή θάλαμο κλειδιού <br> Ορισμός πολιτικές πρόσβασης για το πλήκτρο θάλαμο<br>Ορισμός ετικέτες για θάλαμο κλειδιού | Έλεγχος πρόσβασης βάσει ρόλων διαχειριστή Azure πόρων (RBAC) |
| Επίπεδο δεδομένων | **Καθολικό:**<br> &lt;όνομα θάλαμο&gt;. vault.azure.net:443<br><br> **Azure Κίνα:**<br> &lt;όνομα θάλαμο&gt;. vault.azure.cn:443<br><br> **Azure κυβέρνηση των η.π.α.:**<br> &lt;όνομα θάλαμο&gt;. vault.usgovcloudapi.net:443<br><br> **Azure Γερμανία:**<br> &lt;όνομα θάλαμο&gt;. vault.microsoftazure.de:443 | Πλήκτρα: Αποκρυπτογράφηση, κρυπτογράφηση, UnwrapKey, WrapKey, επαλήθευση, πραγματοποιήστε είσοδο, λήψη, λίστα, ενημέρωση, δημιουργία, εισαγωγή, διαγραφή, δημιουργία αντιγράφων ασφαλείας, επαναφορά<br><br> Για απόρρητο: λήψη, λίστα, ορισμός, διαγραφή | Πολιτική πρόσβασης θάλαμο κλειδιού|

Η διαχείριση επιπέδου και δεδομένα επιπέδου πρόσβαση σε στοιχεία ελέγχου λειτουργούν ανεξάρτητα. Για παράδειγμα, εάν θέλετε να εκχωρήσετε μια εφαρμογή access για να χρησιμοποιήσετε τα πλήκτρα σε ένα πλήκτρο θάλαμο, αρκεί να εκχωρήσετε δικαιώματα πρόσβασης επίπεδο δεδομένων με χρήση βασικών θάλαμο πολιτικές πρόσβασης και δεν επιτρέπεται η πρόσβαση επιπέδου διαχείρισης είναι απαραίτητη για αυτήν την εφαρμογή. Και αντίστροφα, εάν θέλετε ένας χρήστης να είναι σε θέση να διαβάσετε θάλαμο ιδιότητες και ετικέτες, αλλά δεν έχουν οποιαδήποτε πρόσβαση στο πλήκτρα, απόρρητο ή πιστοποιητικά, μπορείτε να εκχωρήσετε αυτόν το χρήστη, "ανάγνωση" πρόσβασης χρησιμοποιώντας RBAC και δεν επιτρέπεται η πρόσβαση σε επίπεδο δεδομένων είναι απαραίτητη.

## <a name="management-plane-access-control"></a>Έλεγχος πρόσβασης επιπέδου διαχείρισης

Το επίπεδο διαχείρισης αποτελείται από λειτουργίες που επηρεάζουν το πλήκτρο θάλαμο ίδια. Για παράδειγμα, μπορείτε να δημιουργήσετε ή να διαγράψετε ένα πλήκτρο θάλαμο. Μπορείτε να λάβετε μια λίστα με χώροι φύλαξης σε μια συνδρομή. Μπορείτε να ανακτήσετε κλειδιού θάλαμο Ιδιότητες (όπως SKU, ετικέτες) και ορισμός βασικών θάλαμο πολιτικές πρόσβασης που ελέγχουν τους χρήστες και τις εφαρμογές που μπορούν να αποκτήσουν πρόσβαση πλήκτρα και απόρρητο στο του κλειδιού θάλαμο. Έλεγχος πρόσβασης επιπέδου διαχείρισης χρησιμοποιεί RBAC. Δείτε την πλήρη λίστα των λειτουργιών κλειδιού θάλαμο που μπορεί να πραγματοποιηθεί μέσω διαχείρισης επίπεδο στον πίνακα πριν από την ενότητα. 

### <a name="role-based-access-control-rbac"></a>Έλεγχος πρόσβασης βάσει ρόλων (RBAC)
Κάθε Azure συνδρομή έχει μια Azure Active Directory. Οι χρήστες, ομάδες και εφαρμογές από αυτόν τον κατάλογο μπορεί να σας εκχωρηθεί πρόσβαση για να διαχειριστείτε πόρους στην Azure συνδρομής που χρησιμοποιούν το μοντέλο ανάπτυξης διαχείρισης πόρων Azure. Αυτός ο τύπος ελέγχου πρόσβασης αναφέρεται ως έλεγχος πρόσβασης βάσει ρόλων (RBAC). Για να διαχειριστείτε την πρόσβαση σε αυτήν, μπορείτε να χρησιμοποιήσετε την [πύλη του Azure](https://portal.azure.com/), τα [Εργαλεία Azure CLI](../xplat-cli-install.md), [PowerShell](../powershell-install-configure.md)ή τα [APIs ΥΠΌΛΟΙΠΑ Azure διαχείριση πόρων](https://msdn.microsoft.com/library/azure/dn906885.aspx).

Με το μοντέλο από διαχειριστή πόρων Azure, δημιουργείτε σας κλειδιού θάλαμο στο ενός πόρου ομάδας και έλεγχος πρόσβασης στο επίπεδο διαχείρισης του αυτό κλειδιού θάλαμο χρησιμοποιώντας Azure Active Directory. Για παράδειγμα, μπορείτε να εκχωρήσετε στους χρήστες ή μια δυνατότητα ομάδα για τη Διαχείριση βασικών χώροι φύλαξης σε μια ομάδα συγκεκριμένο πόρο.

Μπορείτε να εκχωρήσετε πρόσβαση σε χρήστες, ομάδες και εφαρμογές σε ένα συγκεκριμένο εύρος, εκχώρηση ρόλων κατάλληλο RBAC. Για παράδειγμα, για να εκχωρήσετε πρόσβαση σε ένα χρήστη για τη Διαχείριση βασικών χώροι φύλαξης θα αντιστοιχίσετε ένα προκαθορισμένο ρόλο 'κλειδιού θάλαμο συμβολής' σε αυτόν το χρήστη σε ένα συγκεκριμένο εύρος. Το πεδίο εφαρμογής σε αυτήν την περίπτωση θα ήταν μια συνδρομή, μια ομάδα πόρων ή μόνο ένα συγκεκριμένο κλειδιού θάλαμο. Ένα ρόλο που έχει αντιστοιχιστεί στο επίπεδο συνδρομή ισχύει για όλες τις ομάδες πόρων και τους πόρους που συνδρομής. Ένα ρόλο που έχουν εκχωρηθεί σε επίπεδο ομάδας πόρων ισχύει για όλους τους πόρους στη συγκεκριμένη ομάδα πόρων. Ένα ρόλο που έχουν εκχωρηθεί για ένα συγκεκριμένο πόρο ισχύει μόνο για αυτόν τον πόρο. Υπάρχουν πολλές προκαθορισμένες ρόλοι (ανατρέξτε στο θέμα [RBAC: ενσωματωμένη ρόλους](../active-directory/role-based-access-built-in-roles.md)), και εάν οι προκαθορισμένες ρόλοι δεν καλύπτει τις ανάγκες σας μπορείτε επίσης να ορίσετε τις δικές σας ρόλους.

>[AZURE.IMPORTANT] Λάβετε υπόψη ότι εάν ένας χρήστης έχει δικαιώματα (RBAC) για ένα επίπεδο διαχείρισης κλειδιών θάλαμο, που μπορούν να εκχωρούν τον εαυτό της συμβολής πρόσβαση σε επίπεδο δεδομένων, κατά τη ρύθμιση κλειδιού θάλαμο access πολιτική, η οποία ελέγχει την πρόσβαση σε δεδομένα επιπέδου. Επομένως, συνιστάται να στενά ελέγχετε ποιος έχει πρόσβαση 'Συμβολής' για να σας κλειδιού χώροι φύλαξης για να βεβαιωθείτε ότι μόνο εξουσιοδοτημένα άτομα να αποκτήσετε πρόσβαση και να διαχειρίζεστε κλειδιού χώροι φύλαξης, πλήκτρα, απόρρητο και τα πιστοποιητικά.

## <a name="data-plane-access-control"></a>Έλεγχος πρόσβασης επίπεδο δεδομένων

Το επίπεδο δεδομένων κλειδιού θάλαμο αποτελείται από λειτουργίες που επηρεάζουν τα αντικείμενα σε ένα πλήκτρο θάλαμο, όπως αριθμούς-κλειδιά, απόρρητο και πιστοποιητικά.  Περιλαμβάνονται και οι λειτουργίες όπως δημιουργία αριθμού-κλειδιού, εισαγωγής, ενημέρωσης, λίστα, δημιουργία αντιγράφων ασφαλείας και επαναφορά πλήκτρα, λειτουργίες κρυπτογράφησης όπως το σύμβολο, επαλήθευση, κρυπτογράφηση, αποκρυπτογράφηση, αναδίπλωση, και χωρίς αναδίπλωση και ορισμός ετικέτες και άλλα χαρακτηριστικά πλήκτρα. Ομοίως, για να περιλαμβάνει απόρρητο, ορισμός, λίστα, διαγραφή.

Πρόσβαση σε δεδομένα επιπέδου παρέχεται, ορίζοντας πολιτικές πρόσβασης για ένα πλήκτρο θάλαμο. Ένα χρήστη, ομάδας ή μια εφαρμογή πρέπει να έχετε δικαιώματα συνεργάτη (RBAC) για το επίπεδο διαχείρισης για ένα πλήκτρο θάλαμο για να μπορέσετε να ορίσετε πολιτικές πρόσβασης για το συγκεκριμένο κλειδιού θάλαμο. Ένα χρήστη, ομάδας ή εφαρμογή μπορεί να σας εκχωρηθεί πρόσβαση για την εκτέλεση συγκεκριμένων λειτουργιών για πλήκτρα ή απόρρητο στο ενός κλειδιού θάλαμο. πλήκτρο θάλαμο υποστήριξης έως 16 καταχωρήσεις πολιτική πρόσβασης για ένα πλήκτρο θάλαμο. Δημιουργήστε μια ομάδα ασφαλείας του Azure Active Directory και προσθέστε τους χρήστες σε αυτήν την ομάδα για να εκχωρήσετε πρόσβαση σε δεδομένα επιπέδου σε πολλούς χρήστες να ενός κλειδιού θάλαμο.

### <a name="key-vault-access-policies"></a>πλήκτρο θάλαμο πολιτικές πρόσβασης

πολιτικές πρόσβασης κλειδιού θάλαμο εκχώρηση δικαιωμάτων σε αριθμούς-κλειδιά, απόρρητο και τα πιστοποιητικά ξεχωριστά. Για παράδειγμα, μπορείτε να δώσετε μια πρόσβασης χρήστη σε μόνο κλειδιά, αλλά δεν υπάρχουν δικαιώματα για απόρρητο. Ωστόσο, δικαιώματα πρόσβασης σε πλήκτρα ή απορρήτου ή πιστοποιητικά είναι στο επίπεδο θάλαμο. Με άλλα λόγια, πολιτική πρόσβασης κλειδιού θάλαμο δεν υποστηρίζει το επίπεδο δικαιωμάτων αντικειμένου. Μπορείτε να χρησιμοποιήσετε [Azure πύλη](https://portal.azure.com/), τα [Εργαλεία Azure CLI](../xplat-cli-install.md), [PowerShell](../powershell-install-configure.md)ή το [πλήκτρο θάλαμο APIs ΥΠΌΛΟΙΠΑ διαχείρισης](https://msdn.microsoft.com/library/azure/mt620024.aspx) για να ορίσετε πολιτικές πρόσβασης για ένα πλήκτρο θάλαμο.

>[AZURE.IMPORTANT] Σημειώστε ότι οι πολιτικές πρόσβασης κλειδιού θάλαμο εφαρμόζονται στο επίπεδο θάλαμο. Για παράδειγμα, όταν ένας χρήστης έχει εκχωρηθεί δικαίωμα να δημιουργήσετε και να διαγράψετε κλειδιά, κάνει μπορεί να εκτελέσει αυτές τις λειτουργίες σε όλα τα κλειδιά στο συγκεκριμένο κλειδιού θάλαμο.

## <a name="example"></a>Παράδειγμα

Ας υποθέσουμε ότι σχεδιάζετε μια εφαρμογή που χρησιμοποιεί ένα πιστοποιητικό για το SSL, Azure χώρου αποθήκευσης για την αποθήκευση των δεδομένων, και χρησιμοποιεί ένα κλειδί RSA 2048 bit για λειτουργίες εισόδου. Ας υποθέσουμε ότι αυτή η εφαρμογή εκτελείται σε μια Εικονική (ή ένα σύνολο κλίμακα Εικονική). Μπορείτε να χρησιμοποιήσετε ένα πλήκτρο θάλαμο για την αποθήκευση όλα τα απόρρητο εφαρμογής, και χρησιμοποιήστε θάλαμο κλειδιού για να αποθηκεύσετε το πιστοποιητικό εκκίνησης που χρησιμοποιείται από την εφαρμογή για τον έλεγχο ταυτότητας με το Azure Active Directory.

Επομένως, θα δείτε μια σύνοψη όλων των αριθμών-κλειδιών και απορρήτου να αποθηκευτούν σε ένα πλήκτρο θάλαμο.

- **Το πιστοποιητικό SSL** - χρησιμοποιείται για SSL
- **Κλειδί αποθήκευσης** - χρησιμοποιείται για να αποκτήσετε πρόσβαση στο λογαριασμό χώρου αποθήκευσης
- **Πλήκτρο RSA 2048 bit** - χρησιμοποιείται για λειτουργίες εισόδου
- **Πιστοποιητικό εκκίνησης** - χρησιμοποιείται για τον έλεγχο ταυτότητας Azure Active Directory, για να αποκτήσετε πρόσβαση σε βασικές θάλαμο για λήψη το κλειδί αποθήκευσης και χρησιμοποιήστε το πλήκτρο RSA για την υπογραφή.

Τώρα ας πληρούν τα άτομα που τη διαχείριση, την ανάπτυξη και έλεγχος αυτής της εφαρμογής. Θα χρησιμοποιήσουμε τρεις ρόλοι σε αυτό το παράδειγμα.

- **Η ομάδα ασφαλείας** - αυτές είναι συνήθως το προσωπικό IT από το 'office ο ΥΑΕ (διευθυντής ασφαλείας)' ή ισοδύναμη, υπεύθυνοι για το πρώτο γράμμα κάθε λέξης προστασία του απορρήτου όπως πιστοποιητικά SSL, κλειδιών RSA που χρησιμοποιούνται για την είσοδο, συμβολοσειρές σύνδεσης για βάσεις δεδομένων, πλήκτρα λογαριασμού χώρου αποθήκευσης.
- **Προγραμματιστές/τελεστές** - αυτές είναι οι δημιουργοί αναπτύσσουμε αυτής της εφαρμογής και, στη συνέχεια, να το αναπτύξετε στο Azure. Συνήθως, δεν αποτελούν μέρος της ομάδας ασφαλείας, και επομένως θα πρέπει να δεν έχουν πρόσβαση σε οποιαδήποτε ευαίσθητα δεδομένα, όπως τα πιστοποιητικά SSL, κλειδιών RSA, αλλά η εφαρμογή ανάπτυξη θα πρέπει να έχει πρόσβαση σε αυτά.
- **Ελεγκτές** - αυτό είναι συνήθως ένα διαφορετικό σύνολο ατόμων, απομονωμένες από το τους προγραμματιστές και τις γενικές το προσωπικό IT. Ευθύνη τους είναι να εξετάσετε proper χρήσης και συντήρησης πιστοποιητικά, κλειδιά, κ.λπ. και διασφάλιση της συμμόρφωσης με τα πρότυπα ασφαλείας δεδομένων. 

Υπάρχει ένα ρόλο περισσότερες που είναι εκτός του αντικειμένου του αυτό εφαρμογή, αλλά σχετικές εδώ θα πρέπει να αναφέρονται και που θα είναι η συνδρομή (ή ομάδα πόρων) διαχειριστή. Συνδρομή διαχειριστής ρυθμίζει αρχικό τα δικαιώματα για την ομάδα ασφαλείας. Εδώ θα σας λαμβάνεται ως δεδομένο ότι ο διαχειριστής συνδρομή έχει εκχωρηθεί πρόσβαση για την ομάδα ασφαλείας σε μια ομάδα πόρων σε ποια όλους τους πόρους που χρειάζονται για αυτό κατοικούν εφαρμογής.

Τώρα ας δούμε ποιες ενέργειες που εκτελεί κάθε ρόλο στο περιβάλλον αυτής της εφαρμογής.

- **Η ομάδα ασφαλείας**
    - Δημιουργία βασικών χώροι φύλαξης
    - Ενεργοποιεί το κλειδί φύλαξης καταγραφής
    - Προσθήκη αριθμών-κλειδιών/απορρήτου
    - Δημιουργία αντιγράφου ασφαλείας των πλήκτρων για αποκατάσταση
    - Ορισμός βασικών θάλαμο πολιτική πρόσβασης για την εκχώρηση δικαιωμάτων σε χρήστες και εφαρμογές για να εκτελέσετε συγκεκριμένες εργασίες
    - Περιοδική λήψη πλήκτρα/απορρήτου
- **Προγραμματιστές/τελεστές**
    - Λήψη αναφορές γίνεται εκκίνηση και πιστοποιητικά SSL (thumbprints), κλειδί αποθήκευσης (μυστικό URI) και είσοδος αριθμού-κλειδιού (πλήκτρο URI) από την ομάδα ασφαλείας
    - Ανάπτυξη και ανάπτυξη εφαρμογών που αποκτά πρόσβαση κλειδιά και απορρήτου μέσω προγραμματισμού
- **Συνέδριο**
    - Αναθεώρηση των αρχείων καταγραφής χρήσης για να επιβεβαιώσετε την κατάλληλη χρήση αριθμού-κλειδιού/μυστικό και τη συμμόρφωση με τα πρότυπα ασφαλείας δεδομένων

Τώρα ας δούμε τι δικαιώματα πρόσβασης σε θάλαμο κλειδιού είναι απαραίτητο από κάθε ρόλο (και της εφαρμογής) για να εκτελέσετε τις εργασίες που έχουν ανατεθεί. 

| Ρόλος χρήστη    | Δικαιώματα επιπέδου διαχείρισης | Δεδομένα επιπέδου δικαιωμάτων |
|--------------|------------------------------|------------------------|
|Η ομάδα ασφαλείας|πλήκτρο θάλαμο συμβολής|Πλήκτρα: δημιουργία αντιγράφων ασφαλείας, δημιουργία, διαγραφή, λήψη, εισαγωγή, λίστα, επαναφέρετε <br> Απόρρητο: όλων|
|Προγραμματιστές/χειριστή| βασικές θάλαμο ανάπτυξη δικαιωμάτων, έτσι ώστε το ΣΠΣ ανάπτυξη μπορεί να λήψη απόρρητο από το πλήκτρο θάλαμο | Κανένας |
|Συνέδριο| Κανένας | Πλήκτρα: λίστα<br>Απόρρητο: λίστα|
|Εφαρμογή| Κανένας | Πλήκτρα: εισόδου<br>Απόρρητο: λήψη |

>[AZURE.NOTE] Ελεγκτές χρειάζεστε δικαιώματα πρόσβασης σε λίστα για κλειδιά και απορρήτου, ώστε να μπορούν να ελέγχονται χαρακτηριστικά για κλειδιά και απορρήτου που δεν έχουν αποσταλεί στα αρχεία καταγραφής, όπως ετικέτες, ημερομηνίες ενεργοποίησης και λήξης.

Εκτός από το δικαίωμα κλειδιού θάλαμο, όλοι οι τρεις ρόλοι πρέπει επίσης πρόσβαση σε άλλους πόρους. Για παράδειγμα, για να έχετε τη δυνατότητα να αναπτύξετε το ΣΠΣ (ή Web Apps κ.λπ.) Προγραμματιστές/τελεστές πρέπει επίσης πρόσβαση 'Συμβολής' σε αυτούς τους τύπους πόρων. Ελεγκτές πρέπει πρόσβαση για ανάγνωση με το λογαριασμό χώρου αποθήκευσης όπου αποθηκεύονται τα αρχεία καταγραφής του κλειδιού θάλαμο.

Εφόσον η εστίαση αυτού του άρθρου παρέχει ασφάλεια πρόσβαση του κλειδιού θάλαμο, χρησιμοποιούμε μόνο απεικόνιση των σχετικών τμημάτων που σχετίζονται με αυτό το θέμα και παραλείψετε λεπτομέρειες σχετικά με την ανάπτυξη πιστοποιητικών, την πρόσβαση σε κλειδιά και απορρήτου μέσω προγραμματισμού κ.λπ. Οι λεπτομέρειες καλύπτονται ήδη σε άλλο σημείο. Ανάπτυξη πιστοποιητικών που είναι αποθηκευμένα σε βασικές θάλαμο σε ΣΠΣ καλύπτεται σε μια [Δημοσίευση ιστολογίου](https://blogs.technet.microsoft.com/kv/2016/09/14/updated-deploy-certificates-to-vms-from-customer-managed-key-vault/)και υπάρχει [δείγμα κώδικα](https://www.microsoft.com/download/details.aspx?id=45343) διαθέσιμες που παρουσιάζει τον τρόπο χρήσης εκκίνησης πιστοποιητικό για τον έλεγχο ταυτότητας Azure AD για να αποκτήσετε πρόσβαση σε βασικές θάλαμο.

Περισσότερα από τα δικαιώματα πρόσβασης εκχωρούνται με Azure πύλη, αλλά για να εκχωρήσετε δικαιώματα λεπτομερούς ίσως χρειαστεί να χρησιμοποιήσετε Azure PowerShell (ή Azure CLI) για να επιτύχετε το επιθυμητό αποτέλεσμα. 

Έστω ότι τα παρακάτω τμήματα του PowerShell:

- Ο διαχειριστής της υπηρεσίας καταλόγου Azure Active Directory έχει δημιουργήσει ομάδες ασφαλείας που αναπαριστούν τους τρεις ρόλους, δηλαδή ομάδας ασφαλείας Contoso, Devops εφαρμογή Contoso, Συνέδριο εφαρμογή Contoso. Ο διαχειριστής έχει προστεθεί επίσης τους χρήστες για τις ομάδες που ανήκουν.

- **ContosoAppRG** είναι η ομάδα πόρων όπου βρίσκονται όλους τους πόρους. **contosologstorage** είναι όπου αποθηκεύονται τα αρχεία καταγραφής. 

- Πλήκτρο θάλαμο **ContosoKeyVault** και αποθήκευσης λογαριασμού που χρησιμοποιείται για αρχεία καταγραφής κλειδιού θάλαμο **contosologstorage** πρέπει να είναι στην ίδια θέση Azure


Πρώτα ο διαχειριστής συνδρομή εκχωρεί 'βασικές θάλαμο συμβολής' και ρόλων ' χρήστη πρόσβαση διαχειριστή ' στην ομάδα ασφαλείας. Αυτό σας επιτρέπει την ομάδα ασφαλείας για να διαχειριστείτε την πρόσβαση σε άλλους πόρους και Διαχείριση κλειδιού χώροι φύλαξης στην ομάδα πόρων ContosoAppRG.

```
New-AzureRmRoleAssignment -ObjectId (Get-AzureRmADGroup -SearchString 'Contoso Security Team')[0].Id -RoleDefinitionName "key vault Contributor" -ResourceGroupName ContosoAppRG
New-AzureRmRoleAssignment -ObjectId (Get-AzureRmADGroup -SearchString 'Contoso Security Team')[0].Id -RoleDefinitionName "User Access Administrator" -ResourceGroupName ContosoAppRG
```

Η ακόλουθη δέσμη ενεργειών απεικονίζει τον τρόπο την ομάδα ασφαλείας να δημιουργήσετε ένα πλήκτρο θάλαμο, ρύθμισης καταγραφής και να ορίσετε δικαιώματα πρόσβασης για άλλους ρόλους και την εφαρμογή. 

```
# Create key vault and enable logging
$sa = Get-AzureRmStorageAccount -ResourceGroup ContosoAppRG -Name contosologstorage
$kv = New-AzureRmKeyVault -VaultName ContosoKeyVault -ResourceGroup ContosoAppRG -SKU premium -Location 'westus' -EnabledForDeployment
Set-AzureRmDiagnosticSetting -ResourceId $kv.ResourceId -StorageAccountId $sa.Id -Enabled $true -Categories AuditEvent

# Data plane permissions for Security team
Set-AzureRmKeyVaultAccessPolicy -VaultName ContosoKeyVault -ObjectId (Get-AzureRmADGroup -SearchString 'Contoso Security Team')[0].Id -PermissionToKeys backup,create,delete,get,import,list,restore -PermissionToSecrets all

# Management plane permissions for Dev/ops
# Create a new role from an existing role
$devopsrole = Get-AzureRmRoleDefinition -Name "Virtual Machine Contributor"
$devopsrole.Id = $null
$devopsrole.Name = "Contoso App Devops"
$devopsrole.Description = "Can deploy VMs that need secrets from key vault"
$devlopsrole.AssignableScopes = @("/subscriptions/<SUBSCRIPTION-GUID>")

# Add permission for dev/ops so they can deploy VMs that have secrets deployed from key vaults
$devopsrole.Actions.Add("Microsoft.KeyVault/vaults/deploy/action")
New-AzureRmRoleDefinition -Role $role

# Assign this newly defined role to Dev ops security group
New-AzureRmRoleAssignment -ObjectId (Get-AzureRmADGroup -SearchString 'Contoso App Devops')[0].Id -RoleDefinitionName "Contoso App Devops" -ResourceGroupName ContosoAppRG

# Data plane permissions for Auditors
Set-AzureRmKeyVaultAccessPolicy -VaultName ContosoKeyVault -ObjectId (Get-AzureRmADGroup -SearchString 'Contoso App Auditors')[0].Id -PermissionToKeys list -PermissionToSecrets list
```

Το προσαρμοσμένο ρόλο ορίζεται, μόνο είναι δυνατό να αντιστοιχιστεί τη συνδρομή όπου τη δημιουργία της ομάδας πόρων ContosoAppRG. Εάν το ίδιο προσαρμοσμένο ρόλων θα χρησιμοποιηθεί για άλλα έργα σε άλλες συνδρομές, της εμβέλειας θα μπορούσε να έχει προσθέσει τις περισσότερες συνδρομές.

Προσαρμοσμένο ρόλο ανάθεσης για τους προγραμματιστές/τελεστές για το δικαίωμα "ανάπτυξη/ενέργειας" έχει εύρος για την ομάδα των πόρων. Με αυτόν τον τρόπο μόνο του ΣΠΣ που έχουν δημιουργηθεί με την ομάδα των πόρων 'ContosoAppRG' θα λάβουν το απόρρητο (πιστοποιητικού SSL και εκκίνησης πιστοποιητικού). Οποιαδήποτε ΣΠΣ που δημιουργεί ένα μέλος της ομάδας ανάπτυξης/ops στην άλλη ομάδα πόρων δεν θα μπορείτε να λάβετε αυτές τις απόρρητο ακόμα και αν γνώριζαν το μυστικό URIs.

Αυτό το παράδειγμα απεικονίζει ένα απλό σενάριο. Πραγματική ζωή σενάρια μπορεί να είναι πιο σύνθετη και ίσως χρειαστεί να προσαρμόσετε τα δικαιώματα για το πλήκτρο θάλαμο με βάση τις ανάγκες σας. Για παράδειγμα, στο παράδειγμά μας, υποθέσουμε ότι αυτήν την ομάδα ασφαλείας θα παρέχει το κλειδί και μυστικού αναφορές (URIs και thumbprints) που τους προγραμματιστές/τελεστές ομάδας πρέπει να αναφέρονται στις εφαρμογές τους. Επομένως, δεν χρειάζεται να εκχωρήσετε στους προγραμματιστές/τελεστές οποιοδήποτε επίπεδο πρόσβαση σε δεδομένα. Επίσης, σημειώστε ότι αυτό το παράδειγμα εστιάζει σχετικά με την προστασία του κλειδιού θάλαμο. Θα πρέπει να είναι παρόμοια υπόψη για την ασφάλιση [σας ΣΠΣ](https://azure.microsoft.com/services/virtual-machines/security/), [λογαριασμούς χώρου αποθήκευσης](../storage/storage-security-guide.md) και άλλοι πόροι Azure πολύ.

>[AZURE.NOTE] Σημείωση: Αυτό το παράδειγμα εμφανίζει τον τρόπο κλειδιού θάλαμο access θα κλειδωθεί προς τα κάτω σε παραγωγής. Οι προγραμματιστές θα πρέπει να έχετε τις δικές τους συνδρομή ή την ομάδα πόρων έχουν πλήρη δικαιώματα για να διαχειριστείτε τους χώροι φύλαξης, ΣΠΣ και το λογαριασμό χώρου αποθήκευσης όπου αυτά ανάπτυξη της εφαρμογής.


## <a name="resources"></a>Πόροι

-   [Έλεγχος πρόσβασης βάσει ρόλων καταλόγου Azure Active Directory](../active-directory/role-based-access-control-configure.md)

    Σε αυτό το άρθρο εξηγεί τον έλεγχο πρόσβασης βάσει ρόλων Active Directory Azure και τον τρόπο που λειτουργεί.

-   [RBAC: Ενσωματωμένη ρόλους](../active-directory/role-based-access-built-in-roles.md)

    Σε αυτό το άρθρο λεπτομέρειες για όλα τα ενσωματωμένα ρόλους που είναι διαθέσιμοι στο RBAC.

-   [Κατανόηση της διαχείρισης πόρων ανάπτυξης και κλασική ανάπτυξης](../resource-manager-deployment-model.md)

    Σε αυτό το άρθρο εξηγεί τις ανάπτυξης διαχείρισης πόρων και τα μοντέλα κλασική ανάπτυξης και εξηγεί τα οφέλη της χρήσης των ομάδων διαχείρισης πόρων και πόρων

-    [Διαχειριστείτε τον έλεγχο πρόσβασης βάσει ρόλων με το Azure PowerShell](../active-directory/role-based-access-control-manage-access-powershell.md)

     Σε αυτό το άρθρο εξηγεί πώς μπορείτε να διαχειριστείτε τον έλεγχο πρόσβασης βάσει ρόλων με το Azure PowerShell

-   [Διαχείριση έλεγχος πρόσβασης βάσει ρόλων με το REST API](../active-directory/role-based-access-control-manage-access-rest.md)

    Σε αυτό το άρθρο παρουσιάζει πώς μπορείτε να χρησιμοποιήσετε το REST API για τη Διαχείριση RBAC.

-   [Έλεγχος πρόσβασης βάσει ρόλων για το Microsoft Azure από Ignite](https://channel9.msdn.com/events/Ignite/2015/BRK2707)

    Αυτή είναι μια σύνδεση με βίντεο στο κανάλι 9 από τη διάσκεψη Ignite 2015 MS. Σε αυτήν την περίοδο λειτουργίας, μιλήσουμε για πρόσβαση διαχείρισης και δυνατότητες αναφοράς στο Azure και την Εξερεύνηση βέλτιστων πρακτικών που αφορούν την ασφάλεια των πρόσβασης Azure συνδρομές χρησιμοποιώντας Azure Active Directory.

-   [Εξουσιοδότηση για πρόσβαση στις εφαρμογές web, χρησιμοποιώντας το διακριτικό 2.0 και Azure Active Directory](../active-directory/active-directory-protocols-oauth-code.md)

    Σε αυτό το άρθρο περιγράφει ολοκλήρωσης 2.0 διακριτικό ροής για τον έλεγχο ταυτότητας με το Azure Active Directory.

-   [πλήκτρο θάλαμο APIs ΥΠΌΛΟΙΠΑ διαχείρισης](https://msdn.microsoft.com/library/azure/mt620024.aspx)

    Αυτό το έγγραφο είναι η αναφορά για τα ΥΠΌΛΟΙΠΑ API για τη διαχείριση του κλειδιού θάλαμο μέσω προγραμματισμού, συμπεριλαμβανομένης της ρύθμισης πολιτικής πρόσβασης κλειδιού θάλαμο.

-   [πλήκτρο θάλαμο APIs ΥΠΌΛΟΙΠΟ](https://msdn.microsoft.com/library/azure/dn903609.aspx)

    Σύνδεση με βασικές θάλαμο REST API τεκμηρίωση αναφοράς.

-   [Έλεγχος πλήκτρων πρόσβασης](https://msdn.microsoft.com/library/azure/dn903623.aspx#BKMK_KeyAccessControl)

    Σύνδεση με τεκμηρίωση αναφοράς ελέγχου πρόσβασης αριθμού-κλειδιού.

-   [Έλεγχος πρόσβασης μυστικό](https://msdn.microsoft.com/library/azure/dn903623.aspx#BKMK_SecretAccessControl)

    Σύνδεση με τεκμηρίωση αναφοράς ελέγχου πρόσβασης αριθμού-κλειδιού.

-   [Ορισμός](https://msdn.microsoft.com/library/mt603625.aspx) και [Κατάργηση](https://msdn.microsoft.com/library/mt619427.aspx) κλειδιού θάλαμο access πολιτικής με χρήση του PowerShell

    Συνδέσεις προς την τεκμηρίωση για το cmdlet του PowerShell για τη Διαχείριση πολιτικής πρόσβασης κλειδιού θάλαμο αναφοράς.

## <a name="next-steps"></a>Επόμενα βήματα

Για ένα γρήγορα αποτελέσματα πρόγραμμα εκμάθησης για το διαχειριστή, ανατρέξτε στο θέμα [Γρήγορα αποτελέσματα με το Azure κλειδιού θάλαμο](key-vault-get-started.md).

Για περισσότερες πληροφορίες σχετικά με τη χρήση του αρχείου καταγραφής για κλειδιού θάλαμο, ανατρέξτε στο θέμα [Καταγραφή Azure κλειδιού θάλαμο](key-vault-logging.md).

Για περισσότερες πληροφορίες σχετικά με τη χρήση αριθμών-κλειδιών και απορρήτου με Azure θάλαμο κλειδιού, ανατρέξτε στο θέμα [σχετικά με κλειδιά και απορρήτου](https://msdn.microsoft.com/library/azure/dn903623.aspx).

Εάν έχετε ερωτήσεις σχετικά με τις βασικές θάλαμο, επισκεφθείτε το [Azure κλειδιού θάλαμο στα φόρουμ](https://social.msdn.microsoft.com/forums/azure/home?forum=AzureKeyVault)
