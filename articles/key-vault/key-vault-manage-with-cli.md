<properties
    pageTitle="Διαχείριση θάλαμο κλειδί με χρήση CLI | Microsoft Azure"
    description="Χρησιμοποιήστε αυτό το πρόγραμμα εκμάθησης για την αυτοματοποίηση κοινές εργασίες στο πλήκτρο θάλαμο χρησιμοποιώντας το CLI"
    services="key-vault"
    documentationCenter=""
    authors="BrucePerlerMS"
    manager="mbaldwin"
    tags="azure-resource-manager"/>

<tags
    ms.service="key-vault"
    ms.workload="identity"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="07/26/2016"
    ms.author="bruceper"/>

# <a name="manage-key-vault-using-cli"></a>Διαχείριση θάλαμο κλειδί με χρήση CLI #
Azure θάλαμο κλειδί είναι διαθέσιμη στις περισσότερες περιοχές. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα το [κλειδί θάλαμο τιμολόγησης σελίδας](https://azure.microsoft.com/pricing/details/key-vault/).

## <a name="introduction"></a>Εισαγωγή  
Χρησιμοποιήστε αυτό το πρόγραμμα εκμάθησης για να σας βοηθήσει να ξεκινήσετε με το Azure θάλαμο αριθμού-κλειδιού για να δημιουργήσετε ένα κοντέινερ υψηλό επίπεδο ασφαλείας (ένα θάλαμο) στο Azure, για να αποθηκεύσετε και να διαχειριστείτε κλειδιών κρυπτογράφησης και απόρρητο στο Azure. Σας καθοδηγεί κατά τη διαδικασία χρησιμοποιώντας περιβάλλον γραμμής εντολών πλατφόρμες Azure για να δημιουργήσετε ένα θάλαμο που περιέχει έναν αριθμό-κλειδί ή τον κωδικό πρόσβασης που μπορείτε να χρησιμοποιήσετε με μια εφαρμογή του Azure. Στη συνέχεια, βλέπετε πώς μια εφαρμογή να χρησιμοποιήσετε αυτόν τον κωδικό πρόσβασης ή αριθμό-κλειδί.

**Εκτιμώμενη χρόνο για να ολοκληρωθεί:** 20 λεπτά την

>[AZURE.NOTE]  Αυτό το πρόγραμμα εκμάθησης δεν περιλαμβάνει οδηγίες σχετικά με τον τρόπο για να γράψετε το Azure εφαρμογή ότι ένα από τα βήματα περιλαμβάνει, που δείχνει πώς μπορείτε να εγκρίνετε μια εφαρμογή για να χρησιμοποιήσετε έναν αριθμό-κλειδί ή μυστικό στο του κλειδιού θάλαμο.
>
>Προς το παρόν, δεν μπορείτε να ρυθμίσετε θάλαμο κλειδί Azure στην πύλη του Azure. Εναλλακτικά, χρησιμοποιήστε αυτές τις οδηγίες περιβάλλον γραμμής εντολών πλατφόρμες. Εναλλακτικά, για οδηγίες Azure PowerShell, ανατρέξτε [σε αυτό το πρόγραμμα εκμάθησης ισοδύναμο](key-vault-get-started.md).

Για επισκόπηση πληροφορίες σχετικά με το Azure κλειδί θάλαμο, ανατρέξτε στο θέμα [Τι είναι το Azure κλειδί θάλαμο;](key-vault-whatis.md)

## <a name="prerequisites"></a>Προαπαιτούμενα στοιχεία
Για να ολοκληρώσετε αυτό το πρόγραμμα εκμάθησης, πρέπει να έχετε τα εξής:

- Μια συνδρομή στο Microsoft Azure. Εάν δεν έχετε ένα, μπορείτε να εγγραφείτε για μια [δωρεάν δοκιμαστική έκδοση](https://azure.microsoft.com/pricing/free-trial).
- Περιβάλλον γραμμής εντολών έκδοση 0.9.1 ή νεότερη έκδοση. Για να εγκαταστήσετε την πιο πρόσφατη έκδοση και συνδεθείτε με τη συνδρομή σας στο Azure, ανατρέξτε στο θέμα [εγκατάσταση και ρύθμιση παραμέτρων περιβάλλον γραμμής εντολών του Azure πλατφόρμες](../xplat-cli-install.md).
- Μια εφαρμογή που θα ρυθμιστεί για να χρησιμοποιήσετε το κλειδί ή τον κωδικό πρόσβασης που δημιουργείτε σε αυτό το πρόγραμμα εκμάθησης. Ένα δείγμα εφαρμογής είναι διαθέσιμη από το [Κέντρο λήψης της Microsoft](http://www.microsoft.com/download/details.aspx?id=45343). Για οδηγίες, ανατρέξτε στο θέμα συνοδευτικό αρχείο Readme.

## <a name="getting-help-with-azure-cross-platform-command-line-interface"></a>Λήψη Βοήθειας με το περιβάλλον εργασίας γραμμής εντολών πλατφόρμες Azure

Αυτό το πρόγραμμα εκμάθησης προϋποθέτει ότι είστε εξοικειωμένοι με το περιβάλλον γραμμής εντολών (πάρτι, Terminal, εντολών)

Το--Βοήθειας ή -h παράμετρος μπορεί να χρησιμοποιηθεί για να προβάλετε τη Βοήθεια για τις ειδικές εντολές. Εναλλακτικά, η azure Βοήθεια [εντολή] [επιλογές] μορφή μπορεί επίσης να χρησιμοποιηθεί για να επιστρέψει τις ίδιες πληροφορίες. Για παράδειγμα, τις παρακάτω εντολές όλα επιστρέφουν τις ίδιες πληροφορίες:

    azure account set --help

    azure account set -h

    azure help account set

Όταν βρίσκεστε σε έχετε αμφιβολίες σχετικά με τις παραμέτρους που απαιτούνται από μια εντολή, ανατρέξτε στη Βοήθεια χρησιμοποιώντας--για βοήθεια, -h ή azure Βοήθεια [εντολή].

Μπορείτε, επίσης, να διαβάσετε τα παρακάτω προγράμματα εκμάθησης για να εξοικειωθείτε με τη διαχείριση πόρων Azure στο περιβάλλον εργασίας γραμμής εντολών πλατφόρμες Azure:

- [Πώς να εγκαταστήσετε και να ρυθμίσετε τις παραμέτρους περιβάλλον γραμμής εντολών πλατφόρμες Azure](../xplat-cli-install.md)
- [Χρήση του Azure περιβάλλον γραμμής εντολών πλατφόρμες με τη Διαχείριση Azure πόρων](../xplat-cli-azure-resource-manager.md)


## <a name="connect-to-your-subscriptions"></a>Σύνδεση με τις συνδρομές σας

Για να συνδεθείτε χρησιμοποιώντας έναν εταιρικό λογαριασμό, χρησιμοποιήστε την ακόλουθη εντολή:

    azure login -u username -p password

ή εάν θέλετε να συνδεθείτε στο, πληκτρολογώντας αλληλεπιδραστικά

    azure login

>[AZURE.NOTE]  Λειτουργεί μόνο τη μέθοδο σύνδεσης με εταιρικό λογαριασμό σας. Έναν εταιρικό λογαριασμό είναι ένας χρήστης που γίνεται από την εταιρεία σας, και ορίζεται στο μισθωτή Azure Active Directory του οργανισμού σας.


Εάν δεν έχετε έναν εταιρικό λογαριασμό και χρησιμοποιείτε ένα λογαριασμό Microsoft για να συνδεθείτε στο Azure τη συνδρομή σας, μπορείτε εύκολα να δημιουργήσετε μία ακολουθώντας τα παρακάτω βήματα.

1.  Συνδεθείτε στο Login στην [Πύλη διαχείρισης του Azure](https://manage.windowsazure.com/)και κάντε κλικ στην υπηρεσία καταλόγου Active Directory.
2.  Εάν υπάρχει καμία καταλόγου, επιλέξτε Δημιουργία καταλόγου σας και δώστε τις απαιτούμενες πληροφορίες.
3.  Επιλέξτε σας κατάλογο και να προσθέσετε έναν νέο χρήστη. Αυτόν το χρήστη είναι εταιρικό λογαριασμό. Κατά τη δημιουργία του χρήστη, θα είναι που παρέχονται με μια διεύθυνση ηλεκτρονικού ταχυδρομείου για το χρήστη και ένα προσωρινό κωδικό πρόσβασης. Αποθηκεύσετε αυτές τις πληροφορίες που χρησιμοποιούνται σε ένα άλλο βήμα.
4.  Από την πύλη, επιλέξτε ρυθμίσεις και, στη συνέχεια, επιλέξτε διαχειριστές. Επιλέξτε Προσθήκη και προσθήκη νέου χρήστη ως διαχειριστής από κοινού. Αυτό σας επιτρέπει την εταιρικό λογαριασμό για να διαχειριστείτε τη συνδρομή σας στο Azure.
5.  Τέλος, αποσυνδέεστε από την πύλη του Azure και, στη συνέχεια, συνδεθείτε ξανά χρησιμοποιώντας το νέο εταιρικό λογαριασμό. Εάν αυτή είναι η πρώτη καταγραφή χρόνου με αυτόν το λογαριασμό, θα σας ζητηθεί να αλλάξετε τον κωδικό πρόσβασης.

Για περισσότερες πληροφορίες σχετικά με τη χρήση έναν εταιρικό λογαριασμό με το Windows Azure, ανατρέξτε στο θέμα [εγγραφή για το Microsoft Azure ως μια εταιρεία](../active-directory/sign-up-organization.md).

Εάν έχετε πολλές συνδρομές και θέλετε να καθορίσετε κάποια συγκεκριμένη για να χρησιμοποιήσετε για Azure θάλαμο κλειδί, πληκτρολογήστε τα εξής για να δείτε τις συνδρομές για το λογαριασμό σας:

    azure account list

Στη συνέχεια, για να καθορίσετε τη συνδρομή για να χρησιμοποιήσετε, πληκτρολογήστε:

    azure account set <subscription name>

Για περισσότερες πληροφορίες σχετικά με τη ρύθμιση των παραμέτρων περιβάλλον γραμμής εντολών πλατφόρμες Azure, δείτε [πώς μπορείτε να εγκατάσταση και ρύθμιση παραμέτρων Azure πλατφόρμες περιβάλλον γραμμής εντολών](../xplat-cli-install.md).


## <a name="switch-to-using-azure-resource-manager"></a>Εναλλαγή σε χρήση από διαχειριστή πόρων Azure

Το κλειδί θάλαμο απαιτεί διαχείριση πόρων Azure, επομένως, πληκτρολογήστε τα εξής για να μεταβείτε σε λειτουργία Azure διαχείριση πόρων:

    azure config mode arm

## <a name="create-a-new-resource-group"></a>Δημιουργία νέας ομάδας πόρων

Όταν χρησιμοποιείτε τη διαχείριση πόρων Azure, όλους τους πόρους σχετικά δημιουργούνται μέσα σε μια ομάδα πόρων. Θα δημιουργήσουμε μια νέα ομάδα πόρων 'ContosoResourceGroup' για αυτό το πρόγραμμα εκμάθησης.

    azure group create 'ContosoResourceGroup' 'East Asia'

Η πρώτη παράμετρος είναι το όνομα της ομάδας πόρων και η δεύτερη παράμετρος είναι στη θέση. Για τη θέση, χρησιμοποιήστε την εντολή `azure location list` για να προσδιορίσετε τον τρόπο για να καθορίσετε μια εναλλακτική θέση σε αυτό σε αυτό το παράδειγμα. Εάν χρειάζεστε περισσότερες πληροφορίες, πληκτρολογήστε:`azure help location`

## <a name="register-the-key-vault-resource-provider"></a>Καταχώρηση της υπηρεσίας παροχής πόρων θάλαμο αριθμού-κλειδιού
Βεβαιωθείτε ότι έχει καταχωρηθεί αυτήν την υπηρεσία παροχής πόρων θάλαμο κλειδί στη συνδρομή σας:

`azure provider register Microsoft.KeyVault`

Αυτό πρέπει να γίνει μία φορά ανά συνδρομή.


## <a name="create-a-key-vault"></a>Δημιουργία ενός κλειδιού θάλαμο

Χρησιμοποιήστε το `azure keyvault create` εντολή για να δημιουργήσετε ένα πλήκτρο θάλαμο. Αυτή η δέσμη ενεργειών περιλαμβάνει τρία υποχρεωτικές παράμετροι: ένα όνομα ομάδας πόρων, ένα όνομα κλειδιού θάλαμο και τη γεωγραφική θέση.

Για παράδειγμα, εάν χρησιμοποιείτε το όνομα θάλαμο του ContosoKeyVault, το όνομα της ομάδας πόρων της ContosoResourceGroup και τη θέση της Ανατολικής Ασίας, πληκτρολογήστε:

    azure keyvault create --vault-name 'ContosoKeyVault' --resource-group 'ContosoResourceGroup' --location 'East Asia'

Το αποτέλεσμα αυτής της εντολής εμφανίζει ιδιοτήτων του κλειδιού θάλαμο που μόλις δημιουργήσατε. Οι δύο σημαντικότερες ιδιότητες είναι οι εξής:

- **Όνομα**: στο παράδειγμα αυτό είναι ContosoKeyVault. Θα χρησιμοποιήσετε αυτό το όνομα για άλλες cmdlet του αριθμού-κλειδιού θάλαμο.
- **vaultUri**: στο παράδειγμα αυτό είναι https://contosokeyvault.vault.azure.net. Εφαρμογές που χρησιμοποιούν το θάλαμο έως το REST API πρέπει να χρησιμοποιήσετε αυτό URI.

Azure το λογαριασμό σας τώρα είναι εξουσιοδοτημένοι να εκτελούν τις λειτουργίες σε αυτό κλειδιού θάλαμο. Προς το παρόν, κανείς δεν είναι.


## <a name="add-a-key-or-secret-to-the-key-vault"></a>Προσθήκη αριθμού-κλειδιού ή μυστικό του κλειδιού θάλαμο

Εάν θέλετε το Azure θάλαμο αριθμού-κλειδιού για να δημιουργήσετε έναν αριθμό-κλειδί προστατεύεται με λογισμικό για εσάς, χρησιμοποιήστε το `azure key create` εντολή και, πληκτρολογήστε τα εξής:

    azure keyvault key create --vault-name 'ContosoKeyVault' --key-name 'ContosoFirstKey' --destination software

Ωστόσο, εάν έχετε ένα υπάρχον κλειδί σε ένα αρχείο .pem αποθηκεύονται ως τοπικό αρχείο σε ένα αρχείο με το όνομα softkey.pem που θέλετε να αποστείλετε θάλαμο κλειδί Azure, πληκτρολογήστε τα εξής για να εισαγάγετε το κλειδί από το. Αρχείο PEM, το οποίο προστατεύει το κλειδί από λογισμικό στην υπηρεσία θάλαμο αριθμού-κλειδιού:

    azure keyvault key import --vault-name 'ContosoKeyVault' --key-name 'ContosoFirstKey' --pem-file './softkey.pem' --password 'PaSSWORD' --destination software

Μπορείτε τώρα να αναφέρετε το κλειδί που έχετε δημιουργήσει ή αποστολή του σε θάλαμο κλειδί Azure, χρησιμοποιώντας το URI. Χρησιμοποιήστε **https://ContosoKeyVault.vault.azure.net/keys/ContosoFirstKey** για να έχετε πάντα την τρέχουσα έκδοση και χρησιμοποιήστε **https://ContosoKeyVault.vault.azure.net/keys/ContosoFirstKey/cgacf4f763ar42ffb0a1gca546aygd87** για να λάβετε αυτήν τη συγκεκριμένη έκδοση.

Για να προσθέσετε έναν μυστικό το θάλαμο, δηλαδή έναν κωδικό πρόσβασης που ονομάζεται SQLPassword και που έχει την τιμή της Pa$ $w0rd σε θάλαμο κλειδί Azure, πληκτρολογήστε τα εξής:

    azure keyvault secret set --vault-name 'ContosoKeyVault' --secret-name 'SQLPassword' --value 'Pa$$w0rd'

Μπορείτε τώρα να αναφέρετε αυτόν τον κωδικό πρόσβασης που έχετε προσθέσει στο θάλαμο κλειδί Azure, χρησιμοποιώντας το URI. Χρησιμοποιήστε **https://ContosoVault.vault.azure.net/secrets/SQLPassword** για να έχετε πάντα την τρέχουσα έκδοση και χρησιμοποιήστε **https://ContosoVault.vault.azure.net/secrets/SQLPassword/90018dbb96a84117a0d2847ef8e7189d** για να λάβετε αυτήν τη συγκεκριμένη έκδοση.

Ας προβολή του αριθμού-κλειδιού ή μυστικό που μόλις δημιουργήσατε:

- Για να δείτε τον αριθμό-κλειδί, πληκτρολογήστε:`azure keyvault key list --vault-name 'ContosoKeyVault'`
- Για να προβάλετε το μυστικό, πληκτρολογήστε:`azure keyvault secret list --vault-name 'ContosoKeyVault'`


## <a name="register-an-application-with-azure-active-directory"></a>Καταχωρήστε μια εφαρμογή του Azure Active Directory

Αυτό το βήμα μπορεί να γίνει συνήθως από έναν προγραμματιστή, σε διαφορετικό υπολογιστή. Δεν είναι συγκεκριμένη για θάλαμο κλειδί Azure αλλά περιλαμβάνεται εδώ, για λόγους πληρότητας.


>[AZURE.IMPORTANT] Για να ολοκληρώσετε το πρόγραμμα εκμάθησης, το λογαριασμό σας, το θάλαμο και την εφαρμογή που θα καταχώρηση σε αυτό το βήμα πρέπει να είναι στον ίδιο Azure κατάλογο.

Εφαρμογές που χρησιμοποιούν ένα πλήκτρο θάλαμο πρέπει να τον έλεγχο ταυτότητας με τη χρήση ενός διακριτικού από το Azure Active Directory. Τον κάτοχο της εφαρμογής, να το κάνετε αυτό, πρέπει πρώτα να καταχωρήσετε την εφαρμογή στο τους Azure Active Directory. Στο τέλος της καταχώρησης, τον κάτοχο της εφαρμογής λαμβάνει τις ακόλουθες τιμές:


- Ένα **Αναγνωριστικό εφαρμογής** (γνωστό και ως Αναγνωριστικό υπολογιστή-πελάτη) και το **κλειδί ελέγχου ταυτότητας** (γνωστό και ως το κοινόχρηστο μυστικό). Η εφαρμογή πρέπει να παρουσιάσετε και τα δύο από αυτές τις τιμές σε Azure Active Directory, για να λάβετε ένα διακριτικό. Πώς η εφαρμογή έχει ρυθμιστεί να το κάνετε αυτό εξαρτάται από την εφαρμογή. Για το δείγμα εφαρμογής θάλαμο αριθμού-κλειδιού, ο κάτοχος της εφαρμογής ορίζει αυτές τις τιμές στο αρχείο app.config.



Για να καταχωρήσετε την εφαρμογή στο Azure Active Directory:

1. Είσοδος στην πύλη του Azure.
2. Στα αριστερά, κάντε κλικ στην επιλογή **Υπηρεσία καταλόγου Active Directory**και, στη συνέχεια, επιλέξτε τον κατάλογο στην οποία θα μπορείτε να καταχωρήσετε την εφαρμογή σας. <br> <br> Σημείωση: Πρέπει να επιλέξετε το ίδιο κατάλογο που περιέχει το Azure συνδρομή με τον οποίο δημιουργήσατε το πλήκτρο θάλαμο. Εάν δεν γνωρίζετε ποια καταλόγου αυτό είναι, κάντε κλικ στην επιλογή **Ρυθμίσεις**, να προσδιορίσετε τη συνδρομή με τον οποίο δημιουργήσατε το πλήκτρο θάλαμο και σημειώστε το όνομα του τον κατάλογο που εμφανίζεται στην τελευταία στήλη.

3. Κάντε κλικ στην επιλογή **ΕΦΑΡΜΟΓΈΣ**. Εάν δεν υπάρχει εφαρμογές που έχουν προστεθεί στον κατάλογό σας, αυτή η σελίδα θα εμφανίσει μόνο τη σύνδεση **Προσθήκη εφαρμογής** . Κάντε κλικ στη σύνδεση ή Εναλλακτικά, μπορείτε να επιλέξετε το **ΠΡΟΣΘΈΣΕΤΕ** στη γραμμή εντολών.
4.  Στον οδηγό **Προσθήκη ΕΦΑΡΜΟΓΉΣ** , σε το **Τι θέλετε να κάνετε;** σελίδα, κάντε κλικ στην επιλογή **Προσθήκη εφαρμογής ανάπτυξη την εταιρεία μου**.
5.  Στη σελίδα **πείτε μας σχετικά με την εφαρμογή σας** , καθορίστε ένα όνομα για την εφαρμογή σας και επιλέξτε **Το API WEB ή/και ΕΦΑΡΜΟΓΏΝ WEB** (προεπιλογή). Κάντε κλικ στο εικονίδιο Επόμενο.
6.  Στη σελίδα **Ιδιότητες εφαρμογής** , καθορίστε τη **Διεύθυνση URL ΕΙΣΌΔΟΥ ON** και **URI Αναγνωριστικό Εφαρμογής** για την εφαρμογή web. Εάν η εφαρμογή σας δεν διαθέτει αυτές τις τιμές, μπορείτε να τα κάνετε για χρήση με αυτό το βήμα (για παράδειγμα, θα μπορούσατε να καθορίσετε http://test1.contoso.com για δύο πλαίσια). Δεν έχει σημασία αν υπάρχουν αυτές τις τοποθεσίες; Τι είναι το σημαντικό είναι ότι η εφαρμογή URI Αναγνωριστικό για κάθε εφαρμογή είναι διαφορετικό για κάθε εφαρμογή στον κατάλογό σας. Ο κατάλογος χρησιμοποιεί αυτήν τη συμβολοσειρά για τον προσδιορισμό της εφαρμογής σας.
7.  Κάντε κλικ στο εικονίδιο ολοκλήρωσης για να αποθηκεύσετε τις αλλαγές σας στον οδηγό.
8.  Στη σελίδα Γρήγορη εκκίνηση, κάντε κλικ στην επιλογή **Ρύθμιση ΠΑΡΑΜΈΤΡΩΝ**.
9.  Κάντε κύλιση στην ενότητα **πλήκτρα** , επιλέξτε τη διάρκεια και, στη συνέχεια, κάντε κλικ στην επιλογή **ΑΠΟΘΉΚΕΥΣΗ**. Η σελίδα ανανεώνεται και εμφανίζει τώρα μια τιμή κλειδιού. Πρέπει να ρυθμίσετε την εφαρμογή σας με αυτήν την τιμή κλειδιού και την τιμή **Αναγνωριστικό υπολογιστή-ΠΕΛΆΤΗ** . (Οδηγίες για αυτήν τη ρύθμιση παραμέτρων είναι συγκεκριμένη εφαρμογή).
10. Αντιγράψτε την τιμή Αναγνωριστικού προγράμματος-πελάτη από αυτήν τη σελίδα που θα χρησιμοποιήσετε στο επόμενο βήμα για να ορίσετε δικαιώματα για το θάλαμο.




## <a name="authorize-the-application-to-use-the-key-or-secret"></a>Εγκρίνετε την εφαρμογή για να χρησιμοποιήσετε το κλειδί ή το μυστικό

Για να εγκρίνετε την εφαρμογή για να αποκτήσετε πρόσβαση το κλειδί ή το μυστικό στο το θάλαμο, χρησιμοποιήστε το `azure keyvault set-policy` εντολή.

Για παράδειγμα, εάν το όνομα θάλαμο είναι ContosoKeyVault και την εφαρμογή που θέλετε να εξουσιοδοτήσετε περιλαμβάνει ένα Αναγνωριστικό υπολογιστή-πελάτη του 8f8c4bbd-485b-45fd-98f7-ec6300b7b4ed και θέλετε να εγκρίνετε την εφαρμογή για να αποκρυπτογραφήσετε και συνδεθείτε με πλήκτρα στο θάλαμο σας, στη συνέχεια, εκτελέστε τα εξής:

    azure keyvault set-policy --vault-name 'ContosoKeyVault' --spn 8f8c4bbd-485b-45fd-98f7-ec6300b7b4ed --perms-to-keys '["decrypt","sign"]'

>[AZURE.NOTE] Εάν εκτελείτε στη γραμμή εντολών των Windows, που θα πρέπει να αντικαταστήσετε μονά εισαγωγικά με διπλά εισαγωγικά και διαφυγής επίσης το εσωτερικό διπλά εισαγωγικά. Για παράδειγμα: "[\"αποκρυπτογράφηση\",\"εισόδου\"]".

Εάν θέλετε να εγκρίνετε ίδια αίτηση για να διαβάσετε απόρρητο στο θάλαμο σας, εκτελέστε τα εξής:

    azure keyvault set-policy --vault-name 'ContosoKeyVault' --spn 8f8c4bbd-485b-45fd-98f7-ec6300b7b4ed --perms-to-secrets '["get"]'

## <a name="if-you-want-to-use-a-hardware-security-module-hsm"></a>Εάν θέλετε να χρησιμοποιήσετε μια λειτουργική μονάδα ασφαλείας υλικού (HSM) ##

Για πρόσθετες εξασφάλισης αναβάθμισης, μπορείτε να εισαγάγετε ή να δημιουργία των κλειδιών στο υλικό ασφαλείας λειτουργικές μονάδες (HSMs) που ποτέ αποχώρηση από το όριο HSM. Το HSMs είναι FIPS 140-2 επιπέδου 2 επικύρωση. Εάν αυτή η απαίτηση δεν ισχύει για εσάς, παραλείψτε αυτήν την ενότητα και μεταβείτε για να [διαγράψετε το πλήκτρο θάλαμο και σχετικές κλειδιά και απορρήτου](#delete-the-key-vault-and-associated-keys-and-secrets).

Για να δημιουργήσετε αυτά τα κλειδιά που προστατεύονται με HSM, πρέπει να έχετε μια συνδρομή θάλαμο που υποστηρίζει πλήκτρα HSM προστασία.

Όταν δημιουργείτε την keyvault, προσθέστε την παράμετρο 'sku':

    azure azure keyvault create --vault-name 'ContosoKeyVaultHSM' --resource-group 'ContosoResourceGroup' --location 'East Asia' --sku 'Premium'

Μπορείτε να προσθέσετε προστασία λογισμικού (όπως φαίνεται παραπάνω) και προστασία HSM κλειδιά σε αυτό θάλαμο. Για να δημιουργήσετε ένα κλειδί προστασία HSM, ορίστε την παράμετρο προορισμού για να 'HSM':

    azure keyvault key create --vault-name 'ContosoKeyVaultHSM' --key-name 'ContosoFirstHSMKey' --destination 'HSM'

Μπορείτε να χρησιμοποιήσετε την παρακάτω εντολή για να εισαγάγετε έναν αριθμό-κλειδί από ένα αρχείο .pem στον υπολογιστή σας. Αυτή η εντολή εισάγει τον αριθμό-κλειδί σε HSMs στην υπηρεσία θάλαμο αριθμού-κλειδιού:

    azure keyvault key import --vault-name 'ContosoKeyVaultHSM' --key-name 'ContosoFirstHSMKey' --pem-file '/.softkey.pem' --destination 'HSM' --password 'PaSSWORD'

Η επόμενη εντολή εισάγει μια "μεταφορά το δικό σας κλειδί" πακέτο (BYOK). Αυτό σας επιτρέπει να δημιουργούν τον αριθμό-κλειδί στον τοπικό σας HSM, και να μεταφέρετε το HSMs στην υπηρεσία θάλαμο αριθμού-κλειδιού, χωρίς να κλείσετε το όριο HSM τον αριθμό-κλειδί:

    azure keyvault key import --vault-name 'ContosoKeyVaultHSM' --key-name 'ContosoFirstHSMKey' --byok-file './ITByok.byok' --destination 'HSM'

Για πιο λεπτομερείς οδηγίες σχετικά με τον τρόπο για τη δημιουργία αυτού του πακέτου BYOK, δείτε [πώς μπορείτε να χρησιμοποιήσετε τα πλήκτρα HSM-Protected με Azure κλειδί θάλαμο](key-vault-hsm-protected-keys.md).


## <a name="delete-the-key-vault-and-associated-keys-and-secrets"></a>Διαγράψτε το πλήκτρο θάλαμο και σχετικές πλήκτρα και απορρήτου

Εάν δεν χρειάζεστε πλέον το πλήκτρο θάλαμο και το πλήκτρο ή το μυστικό που περιέχει, μπορείτε να διαγράψετε το κλειδί θάλαμο χρησιμοποιώντας την εντολή Διαγραφή azure keyvault:

    azure keyvault delete --vault-name 'ContosoKeyVault'

Εναλλακτικά, μπορείτε να διαγράψετε μια ομάδα ολόκληρο Azure πόρων, η οποία περιλαμβάνει το πλήκτρο θάλαμο και τυχόν άλλους πόρους που έχετε συμπεριλάβει στη συγκεκριμένη ομάδα:

    azure group delete --name 'ContosoResourceGroup'


## <a name="other-azure-cross-platform-command-line-interface-commands"></a>Άλλες εντολές Azure περιβάλλον γραμμής εντολών πλατφόρμες

Άλλες εντολές που ίσως χρήσιμη για τη Διαχείριση Azure κλειδί θάλαμο.

Αυτή η εντολή παραθέτει μια εμφάνιση σε μορφή πίνακα των όλα τα κλειδιά και επιλεγμένες ιδιότητες:

    azure keyvault key list --vault-name 'ContosoKeyVault'

Αυτή η εντολή εμφανίζει μια πλήρη λίστα των ιδιοτήτων για το συγκεκριμένο κλειδί:

    azure keyvault key show --vault-name 'ContosoKeyVault' --key-name 'ContosoFirstKey'

Αυτή η εντολή παραθέτει μια σε μορφή πίνακα Εμφάνιση των όλα τα ονόματα μυστικού και επιλεγμένες ιδιότητες:

    azure keyvault secret list --vault-name 'ContosoKeyVault'

Ακολουθεί ένα παράδειγμα του τρόπου για να καταργήσετε έναν συγκεκριμένο αριθμό-κλειδί:

    azure keyvault key delete --vault-name 'ContosoKeyVault' --key-name 'ContosoFirstKey'

Ακολουθεί ένα παράδειγμα του τρόπου για να καταργήσετε ένα συγκεκριμένο μυστικό:

    azure keyvault secret delete --vault-name 'ContosoKeyVault' --secret-name 'SQLPassword'


## <a name="next-steps"></a>Επόμενα βήματα

Για τον προγραμματισμό αναφορών, ανατρέξτε στο θέμα [Οδηγός για προγραμματιστές του Azure θάλαμο αριθμού-κλειδιού](key-vault-developers-guide.md).
