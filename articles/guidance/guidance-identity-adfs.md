<properties
   pageTitle="Εφαρμογή ADFS στο Azure | Microsoft Azure"
   description="Πώς μπορείτε να υλοποιήσετε μια αρχιτεκτονική δικτύου ασφαλούς υβριδική με Active Directory ομοσπονδιακή υπηρεσία εξουσιοδότησης στο Azure."
   services="guidance,vpn-gateway,expressroute,load-balancer,virtual-network,active-directory"
   documentationCenter="na"
   authors="telmosampaio"
   manager="christb"
   editor=""
   tags="azure-resource-manager"/>

<tags
   ms.service="guidance"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="10/13/2016"
   ms.author="telmos"/>

# <a name="implementing-active-directory-federation-services-adfs-in-azure"></a>Εφαρμογή υπηρεσίας καταλόγου Active Directory Federation Services (ADFS) στο Azure

[AZURE.INCLUDE [pnp-RA-branding](../../includes/guidance-pnp-header-include.md)]

Σε αυτό το άρθρο περιγράφει τις βέλτιστες πρακτικές για την υλοποίηση ασφαλούς υβριδική δικτύου που επεκτείνει το δίκτυο εσωτερικής εγκατάστασης για να Azure και που χρησιμοποιεί [Active Directory Federation Services (ADFS)] [ active-directory-federation-services] για να εκτελέσετε ομόσπονδη ελέγχου ταυτότητας και εξουσιοδότησης για τα στοιχεία που εκτελούνται στο cloud. Αυτή η αρχιτεκτονική επεκτείνει τη δομή που περιγράφεται με [Επέκταση υπηρεσίας καταλόγου Active Directory για να Azure][implementing-active-directory].

> [AZURE.NOTE] Azure έχει δύο διαφορετικές ανάπτυξης μοντέλα: [Διαχείριση πόρων] [ resource-manager-overview] και κλασική. Αυτή η αρχιτεκτονική αναφορά χρησιμοποιεί διαχείριση πόρων, η οποία η Microsoft συνιστά για νέες αναπτύξεις.

ADFS μπορεί να εκτελέσει εσωτερικής εγκατάστασης, αλλά σε ένα σενάριο υβριδική πού βρίσκονται οι εφαρμογές στο Azure μπορεί να είναι πιο αποδοτικό να υλοποιήσετε αυτήν τη λειτουργικότητα στο cloud. Τυπική χρήση υποθέσεις για αυτήν την αρχιτεκτονική περιλαμβάνουν τα εξής:

- Υβριδική εφαρμογές όπου εκτέλεση φόρτους εργασίας εν μέρει εσωτερικής εγκατάστασης και εν μέρει σε Azure.

- Λύσεις που χρησιμοποιούν εξωτερικές εξουσιοδότησης για να εμφανίσετε τις εφαρμογές web για τις εταιρείες συνεργάτη.

- Τα συστήματα που υποστηρίζουν πρόσβαση από προγράμματα περιήγησης web που εκτελούνται εκτός το εταιρικό τείχος προστασίας.

- Συστήματα που επιτρέπουν στους χρήστες για να αποκτήσετε πρόσβαση σε εφαρμογές web κατά τη σύνδεση από τους χρήστες με δικαίωμα εξωτερικές συσκευές όπως απομακρυσμένους υπολογιστές, σημειωματάρια και άλλες κινητές συσκευές. 

Για περισσότερες πληροφορίες σχετικά με τη λειτουργία ADFS, ανατρέξτε στο θέμα [Active Directory ομοσπονδίας υπηρεσίες Επισκόπηση][active-directory-federation-services-overview]. Επιπλέον, το άρθρο [ανάπτυξης ADFS στο Azure] [ adfs-intro] περιέχει μια λεπτομερή βήμα προς βήμα εισαγωγή εφαρμογής ADFS στο Azure.

## <a name="architecture-diagram"></a>Διάγραμμα αρχιτεκτονικής

Το παρακάτω διάγραμμα επισημαίνει τα σημαντικά στοιχεία σε αυτήν την αρχιτεκτονική (*κάντε κλικ στην επιλογή για να μεγεθύνετε*). Για περισσότερες πληροφορίες σχετικά με τα στοιχεία που δεν σχετίζονται με ADFS, διαβάστε [εφαρμογής μια αρχιτεκτονική δικτύου ασφαλούς υβριδική στο Azure][implementing-a-secure-hybrid-network-architecture], [εφαρμογή μια αρχιτεκτονική δικτύου ασφαλούς υβριδική με πρόσβαση στο Internet στο Azure][implementing-a-secure-hybrid-network-architecture-with-internet-access], και την [εφαρμογή ενός ασφαλούς υβριδική αρχιτεκτονική δικτύου με τις ταυτότητες υπηρεσίας καταλόγου Active Directory στο Azure][implementing-active-directory]:

[! [0]][0]

>[AZURE.NOTE] Σε αυτό το διάγραμμα απεικονίζει την παρακάτω περιπτώσεις χρήσης:
>
>- Εφαρμογή του κώδικα που εκτελείται μέσα σε μια εταιρεία συνεργάτη αποκτά πρόσβαση σε μια εφαρμογή web που φιλοξενείται στο εσωτερικό σας VNet Azure.
>
>- Ένας χρήστης εξωτερικών, καταχωρημένες (με τα διαπιστευτήρια που είναι αποθηκευμένα μέσα ΠΡΟΣΘΈΤΕΙ) πρόσβαση σε μια εφαρμογή web που φιλοξενείται στο εσωτερικό σας VNet Azure.
>
>- Ένας χρήστης τη σύνδεση με το VNet χρησιμοποιώντας μια συσκευή εξουσιοδοτημένοι και εκτελεί μια εφαρμογή web που φιλοξενείται στο εσωτερικό σας VNet Azure.
>
>Επιπλέον, αυτή η αρχιτεκτονική εστιάζει σε παθητικό ομοσπονδίας, όπου οι διακομιστές ομοσπονδίας Αποφασίστε πώς και πότε για τον έλεγχο ταυτότητας χρήστη. Ο χρήστης αναμένεται να παράσχετε πληροφορίες εισόδου όταν μια εφαρμογή αρχίζει να λειτουργεί. Αυτό είναι το μηχανισμό που χρησιμοποιείται πιο συχνά από προγράμματα περιήγησης web και περιλαμβάνει ένα πρωτόκολλο που ανακατευθύνει το πρόγραμμα περιήγησης σε μια τοποθεσία όπου ο χρήστης να παρέχετε τα διαπιστευτήριά τους. ADFS υποστηρίζει επίσης ενεργό Ομοσπονδία με την οποία τίθεται σε μια εφαρμογή σε ευθύνη για την παροχή διαπιστευτήρια χωρίς περαιτέρω παρέμβαση του χρήστη, αλλά αυτήν την περίπτωση είναι εκτός του αντικειμένου αυτής της αρχιτεκτονικής.

- **ΠΡΟΣΘΈΤΕΙ υποδικτύου.** Οι διακομιστές ΠΡΟΣΘΈΤΕΙ περιέχονται τις δικές τους υποδικτύου. Οι κανόνες NSG Βοήθεια για την προστασία τους διακομιστές ΠΡΟΣΘΈΤΕΙ και μπορούν να παρέχουν ένα τείχος προστασίας σε σχέση με την κυκλοφορία από μη αναμενόμενο προελεύσεις.

- **ΠΡΟΣΘΈΤΕΙ διακομιστές.** Αυτά είναι ελεγκτές τομέα που εκτελούν ως ΣΠΣ στο cloud. Αυτοί οι διακομιστές μπορεί να παρέχει έλεγχο ταυτότητας του τοπικού ταυτότητες εντός του τομέα.

- **Υποδικτύου ADFS.** Οι διακομιστές ADFS μπορεί να βρίσκονται μέσα σε τις δικές τους υποδίκτυο, με κανόνες NSG ενεργώντας ως ένα τείχος προστασίας.

- **Οι διακομιστές ADFS.** Οι διακομιστές ADFS παρέχουν ομόσπονδη εξουσιοδότηση και τον έλεγχο ταυτότητας. Σε αυτήν την αρχιτεκτονική, μπορούν να εκτελούν τις ακόλουθες εργασίες:

    - Μπορούν να λαμβάνουν τα διακριτικά ασφαλείας που περιέχει αξιώσεων που έγιναν από ένα διακομιστή ομοσπονδίας συνεργάτη εκ μέρους ενός χρήστη συνεργάτη. ADFS να επαληθεύσετε ότι αυτά τα διακριτικά είναι έγκυρα πριν διέρχεται η αξιώσεων στην εφαρμογή web που εκτελείται στο Azure. Εφαρμογή εταιρικό web (στο Azure) να χρησιμοποιήσετε αυτές τις απαιτήσεις για να εξουσιοδοτήσετε αιτήσεις. Σε αυτό το σενάριο, της εφαρμογής web εταιρικό είναι το *βασίζεστε πάρτι*, και την ευθύνη του διακομιστή ομοσπονδίας συνεργάτη για την έκδοση ισχυρίζεται που είναι κατανοητή από την εφαρμογή web εταιρικό. Τους διακομιστές ομοσπονδίας συνεργάτη αναφέρονται ως *συνεργάτες λογαριασμού* επειδή υποβάλλουν αιτήσεις πρόσβασης εκ μέρους με έλεγχο ταυτότητας λογαριασμών στην εταιρεία συνεργάτη. Οι διακομιστές ADFS ονομάζονται *συνεργάτες πόρων* επειδή παρέχουν πρόσβαση σε πόρους (εφαρμογές web, σε αυτήν την περίπτωση).

    - Να τον έλεγχο ταυτότητας (μέσω ΠΡΟΣΘΈΤΕΙ και την [Ενεργή υπηρεσία δήλωσης συσκευή καταλόγου][ADDRS]) και εγκρίνετε εισερχόμενες αιτήσεις από εξωτερικούς χρήστες με ένα πρόγραμμα περιήγησης web ή τη συσκευή που χρειάζονται πρόσβαση στις εφαρμογές του εταιρικού web. 

    Οι διακομιστές ADFS έχουν ρυθμιστεί ως ένα σύμπλεγμα, η πρόσβαση σε μια μονάδα εξισορρόπησης φόρτου Azure. Αυτή η δομή συμβάλλει στη βελτίωση διαθεσιμότητα και κλιμάκωση. Επίσης, σημειώστε ότι οι διακομιστές ADFS δεν εκτίθενται απευθείας με το Internet, προτιμάτε όλη την κυκλοφορία Internet είναι φιλτραρισμένο μέσω διακομιστές μεσολάβησης εφαρμογών web ADFS και μια DMZ.

- **ADFS υποδικτύου διακομιστή μεσολάβησης.** Οι διακομιστές μεσολάβησης ADFS μπορεί να είναι μέσα σε τις δικές τους υποδίκτυο, με κανόνες NSG παροχή προστασίας. Οι διακομιστές σε αυτό το υποδίκτυο είναι εκτεθειμένη στο Internet μέσω ενός συνόλου εικονικού συσκευές δικτύου που παρέχουν ένα τείχος προστασίας μεταξύ του Azure εικονικού δικτύου και Internet.

- **Διακομιστές μεσολάβησης (WAP) εφαρμογών web ADFS.** Αυτοί οι υπολογιστές που λειτουργούν ως διακομιστές ADFS για εισερχόμενες αιτήσεις από εταιρείες συνεργατών και τις εξωτερικές συσκευές. Οι διακομιστές WAP λειτουργεί ως ένα φίλτρο, θωράκισή τους διακομιστές ADFS από άμεση πρόσβαση μέσω Internet. Όπως και με τους διακομιστές ADFS, την ανάπτυξη του WAP διακομιστές σε μια συστοιχία με εξισορρόπηση φόρτου παρέχει μεγαλύτερη διαθεσιμότητα και κλιμάκωση από μια συλλογή από μεμονωμένους διακομιστές για την ανάπτυξη.

    >[AZURE.NOTE] Για λεπτομερείς πληροφορίες σχετικά με την εγκατάσταση του WAP διακομιστές, ανατρέξτε στο θέμα [εγκατάσταση και ρύθμιση παραμέτρων του διακομιστή μεσολάβησης εφαρμογής Web][install_and_configure_the_web_application_proxy_server]

- **Οργανισμός συνεργάτη.** Αυτή είναι μια εταιρεία συνεργάτη το παράδειγμα, το οποίο εκτελείται μια εφαρμογή web που ζητά πρόσβαση στην εφαρμογή web εκτελείται στο Azure. Διακομιστή ομοσπονδίας στην εταιρεία του συνεργάτη πραγματοποιεί έλεγχο ταυτότητας αιτήσεις τοπικά και υποβάλλει διακριτικά ασφάλειας που περιέχει αξιώσεων να εκτελείται στο Azure ADFS. ADFS στο Azure επικυρώσει τα διακριτικά ασφαλείας και, εάν είναι έγκυρη αυτό μπορεί να περάσει το αξιώσεων στην εφαρμογή web εκτελείται στο Azure για να εξουσιοδοτήσετε τους.

    >[AZURE.NOTE] Μπορείτε επίσης να ρυθμίσετε μια διοχέτευσης VPN χρησιμοποιώντας Azure πύλης για την παροχή άμεση πρόσβαση σε ADFS αξιόπιστων συνεργάτες. Αιτήσεις που λήφθηκαν από αυτές τις συνεργάτες δεν διέρχονται από τους διακομιστές WAP.

## <a name="recommendations"></a>Συστάσεις

Αυτή η ενότητα συνοψίζει συστάσεις για την εφαρμογή ADFS στο Azure, που καλύπτεται από:

- Εικονική συστάσεις.

- Συστάσεις δικτύωσης.

- Διαθεσιμότητα συστάσεις.

- Συστάσεις ασφαλείας.

- Συστάσεις εγκατάστασης ADFS.

- Συστάσεις αξιοπιστίας ADFS.

### <a name="vm-recommendations"></a>Εικονική συστάσεων

Δημιουργήστε ΣΠΣ επαρκείς πόρους για να χειριστείτε τα αναμενόμενα όγκος κυκλοφορίας. Χρησιμοποιήστε το μέγεθος του την υπάρχουσα μηχανές φιλοξενίας ADFS εσωτερικής εγκατάστασης ως σημείο εκκίνησης. Παρακολούθηση της χρήσης του πόρου. Μπορείτε να αλλάξετε το μέγεθος του ΣΠΣ και κλιμάκωση προς τα κάτω, εάν είναι πολύ μεγάλο.

Ακολουθήστε τις συστάσεις που αναφέρονται σε [εκτελεί μια Εικονική Windows στο Azure][vm-recommendations].

### <a name="networking-recommendations"></a>Συστάσεις δικτύωση

Ρύθμιση παραμέτρων του περιβάλλοντος δικτύου για κάθε ένα από τα ΣΠΣ φιλοξενίας ADFS και WAP διακομιστές με στατική ιδιωτικών διευθύνσεων IP.

Μην δώσετε στις διευθύνσεις IP δημόσια ΣΠΣ ADFS. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [ζητήματα ασφαλείας][security-considerations].

Ορισμός της διεύθυνσης IP των διακομιστών DNS προτιμώμενη και δευτερεύουσας για τις διασυνδέσεις δικτύου για κάθε ADFS και WAP Εικονική για αναφορά του ΣΠΣ ΠΡΟΣΘΈΤΕΙ (το οποίο θα πρέπει να εκτελεί DNS). Αυτό το βήμα είναι απαραίτητο για να ενεργοποιήσετε την κάθε Εικονική για να συνδεθείτε με τον τομέα.

### <a name="availability-recommendations"></a>Διαθεσιμότητα συστάσεων

Δημιουργήστε ένα σύμπλεγμα ADFS με τουλάχιστον δύο διακομιστές για να αυξήσετε τη διαθεσιμότητα της υπηρεσίας ADFS.

Χρησιμοποιήστε διαφορετικό χώρο αποθήκευσης λογαριασμούς για κάθε Εικονική ADFS στη συστοιχία. Αυτή η προσέγγιση σάς βοηθά να διασφαλίσετε ότι αποτυχία σε ένα λογαριασμό μόνο χώρου αποθήκευσης δεν κάνει ολόκληρο το σύμπλεγμα προσβάσιμα.

Δημιουργήσετε ξεχωριστές Azure διαθεσιμότητα σύνολα για τα ADFS και WAP ΣΠΣ. Βεβαιωθείτε ότι δεν υπάρχουν τουλάχιστον δύο ΣΠΣ σε κάθε σύνολο. Κάθε σύνολο διαθεσιμότητα πρέπει να έχετε τουλάχιστον δύο τομείς ενημέρωσης και δύο τομείς σφαλμάτων.

Ρύθμιση παραμέτρων η φόρτωση balancers για το ΣΠΣ ADFS και WAP ΣΠΣ ως εξής:

- Χρησιμοποιήστε μια μονάδα εξισορρόπησης φόρτου Azure να παρέχει εξωτερική πρόσβαση του ΣΠΣ WAP και μια εσωτερική εξισορρόπηση φόρτου για τη διανομή η φόρτωση σε τους διακομιστές ADFS στο σύμπλεγμα ADFS.

- Μόνο μεταβιβάζουν κίνηση που εμφανίζεται στη θύρα 443 (HTTPS) με τους διακομιστές ADFS/WAP.

- Δώστε τη μονάδα εξισορρόπησης φόρτου μια στατική διεύθυνση IP.

- Δημιουργήστε μια δοκιμή του εύρυθμης λειτουργίας που χρησιμοποιεί το πρωτόκολλο TCP αντί για HTTPS. Μπορείτε να κάνετε ping θύρα 443 για να επαληθεύσετε ότι λειτουργεί ένα διακομιστή ADFS.

    >[AZURE.NOTE] Οι διακομιστές ADFS χρησιμοποιούν το πρωτόκολλο ένδειξη όνομα διακομιστή (SNI), ώστε να επιχειρήσετε να Διερεύνηση χρησιμοποιώντας ένα τελικό σημείο HTTPS από η αποτυγχάνει εξισορρόπησης φόρτου.

- Προσθήκη μιας εγγραφής DNS *A* στον τομέα για τη μονάδα εξισορρόπησης φόρτου ADFS. 

    Καθορίστε τη διεύθυνση IP του την εξισορρόπηση φόρτου και δώσετε ένα όνομα στον τομέα (όπως adfs.contoso.com). Αυτό είναι το όνομα με το οποίο προγράμματα-πελάτες και τους διακομιστές WAP πρόσβαση στο σύμπλεγμα διακομιστών ADFS.

### <a name="security-recommendations"></a>Συστάσεις ασφαλείας

Αποτροπή άμεση έκθεση τους διακομιστές ADFS στο Internet. Οι διακομιστές ADFS είναι τομέα υπολογιστές που είναι συνδεδεμένοι με πλήρη άδεια για να εκχωρήσετε κωδικοί ασφαλείας. Εάν ένα διακομιστή ADFS έχει παραβιαστεί, κακόβουλο χρήστη να εκδώσετε διακριτικά πλήρη πρόσβαση σε όλες τις εφαρμογές web και στους διακομιστές ομοσπονδίας που προστατεύονται από ADFS. Εάν το σύστημά σας πρέπει να χειρισμού των αιτήσεων από εξωτερικούς χρήστες όχι απαραίτητα σύνδεσης από το συνεργάτη αξιόπιστες τοποθεσίες, χρησιμοποιήστε τους διακομιστές WAP χειρισμού αυτές τις αιτήσεις. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [θέση ενός διακομιστή μεσολάβησης ομοσπονδίας][where-to-place-an-fs-proxy].

Θέση ADFS οι διακομιστές και WAP σε ξεχωριστά δευτερεύοντα δίκτυα με τις δικές τους τείχη προστασίας. Μπορείτε να χρησιμοποιήσετε κανόνες NSG για να ορίσετε κανόνες τείχους προστασίας. Εάν χρειάζεστε πιο ολοκληρωμένη προστασία, μπορείτε να εφαρμόσετε μια πρόσθετη ασφάλεια περίμετρο γύρω από τους διακομιστές, χρησιμοποιώντας ένα ζεύγος δευτερεύοντα δίκτυα και NVAs, όπως περιγράφεται από το έγγραφο [εφαρμογής μια αρχιτεκτονική δικτύου ασφαλούς υβριδική με πρόσβαση στο Internet στο Azure][implementing-a-secure-hybrid-network-architecture-with-internet-access]. Σημειώστε ότι όλα τα τείχη προστασίας θα πρέπει να επιτρέψετε την κυκλοφορία στη θύρα 443 (HTTPS).

Περιορίστε την πρόσβαση απευθείας σύνδεσης με τους διακομιστές ADFS και WAP. Μόνο DevOps προσωπικού πρέπει να μπορείτε να συνδεθείτε.

Δεν είναι η συμμετοχή τους διακομιστές WAP στον τομέα.

### <a name="adfs-installation-recommendations"></a>Συστάσεις εγκατάστασης ADFS

Το άρθρο [για την ανάπτυξη σύμπλεγμα διακομιστών Ομοσπονδία] [ Deploying_a_federation_server_farm] παρέχει λεπτομερείς οδηγίες για την εγκατάσταση και τη ρύθμιση των παραμέτρων ADFS. Εκτελέστε τις ακόλουθες εργασίες πριν από τη ρύθμιση των παραμέτρων του πρώτου διακομιστή ADFS στη συστοιχία:

1. Προμηθευτείτε ένα πιστοποιητικό δημόσια αξιόπιστη για την εκτέλεση του ελέγχου ταυτότητας διακομιστή. Το *όνομα θέματος* πρέπει να περιέχει το όνομα με το οποίο οι υπολογιστές-πελάτες πρόσβαση στην υπηρεσία ομοσπονδίας. Αυτό μπορεί να είναι το όνομα DNS που έχουν καταχωρηθεί για την εξισορρόπηση φόρτου, για παράδειγμα, *adfs.contoso.com* (αποφύγετε τη χρήση χαρακτήρων μπαλαντέρ ονόματα όπως **. contoso.com*, για λόγους ασφαλείας). Χρησιμοποιήστε το ίδιο πιστοποιητικό σε όλα VM διακομιστή ADFS. Μπορείτε να αγοράσετε ένα πιστοποιητικό από μια αξιόπιστη αρχή έκδοσης πιστοποιητικών, αλλά εάν η εταιρεία σας χρησιμοποιεί υπηρεσίες πιστοποιητικού Active Directory μπορείτε να δημιουργήσετε το δικό σας. 

    Το *εναλλακτικό όνομα θέματος* χρησιμοποιείται από το DRS για να ενεργοποιήσετε την πρόσβαση από εξωτερικές συσκευές. Αυτό πρέπει να έχει τη μορφή *enterpriseregistration.contoso.com*.

    Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [λήψη και ρύθμιση παραμέτρων πιστοποιητικού SSL για ADFS][adfs_certificates].

2. Στον ελεγκτή τομέα, δημιουργία ενός νέου κλειδιού ρίζας για την υπηρεσία διανομής αριθμού-κλειδιού. Ορισμός του πραγματικού χρόνου για να την τρέχουσα ώρα μείον 10 ώρες (αυτή η ρύθμιση παραμέτρων μειώνει την καθυστέρηση που μπορεί να προκύψουν σε τη διανομή και το συγχρονισμό πλήκτρα σε ολόκληρο τον τομέα). Αυτό το βήμα είναι απαραίτητο να υποστηρίζει τη δημιουργία του λογαριασμού υπηρεσίας ομάδας που χρησιμοποιούνται για την εκτέλεση της υπηρεσίας ADFS. Η παρακάτω εντολή Powershell παρουσιάζει ένα παράδειγμα πώς μπορείτε να το κάνετε αυτό:

    ```powershell
    Add-KdsRootKey -EffectiveTime (Get-Date).AddHours(-10)
    ```

3. Προσθέστε κάθε διακομιστή ADFS Εικονική στον τομέα.

>[AZURE.NOTE] Για να εγκαταστήσετε ADFS, του ελεγκτή τομέα που εκτελεί στον PDC ρόλο FSMO για τον τομέα πρέπει να εκτελείται και προσβάσιμες από το ΣΠΣ ADFS.

### <a name="adfs-trust-recommendations"></a>Συστάσεις αξιοπιστίας ADFS

Δημιουργήσετε Ομοσπονδία αξιοπιστίας μεταξύ της εγκατάστασης του ADFS και τους διακομιστές ομοσπονδίας οποιαδήποτε εταιρειών συνεργάτη. Ρύθμιση παραμέτρων οποιαδήποτε αξιώσεων φιλτράρισμα και αντιστοίχιση απαιτείται. Αυτή η διαδικασία απαιτεί τα εξής:

- DevOps προσωπικού **σε κάθε οργανισμό συνεργάτη** για να προσθέσετε μια υπηρεσία αξιοπιστίας αξιοπιστίας κατασκευαστή για τις εφαρμογές web προσβάσιμα μέσω του διακομιστών ADFS.

- DevOps υπαλλήλους **στην εταιρεία σας** για τη ρύθμιση παραμέτρων υπηρεσίας παροχής αξιώσεων αξιοπιστίας για να ενεργοποιήσετε τους διακομιστές σας ADFS να θεωρήσετε αξιόπιστη την αξιώσεων που παρέχουν εταιρείες συνεργάτη.

- DevOps υπαλλήλους **στην εταιρεία σας** για να ρυθμίσετε τις παραμέτρους ADFS για τη μεταβίβαση αξιώσεων με τις εφαρμογές web της εταιρείας σας.

    Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Για τον καθορισμό αξιοπιστίας Ομοσπονδία][establishing-federation-trust].

Δημοσίευση εφαρμογών web της εταιρείας σας και είναι διαθέσιμα για εξωτερικούς συνεργάτες, χρησιμοποιώντας πραγματοποιήσει προκαταρκτικό έλεγχο ταυτότητας μέσω των διακομιστών WAP. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [δημοσίευση εφαρμογών χρησιμοποιώντας προκαταρκτικού ελέγχου ταυτότητας ADFS][publish_applications_using_AD_FS_preauthentication]

Σημειώστε ότι ADFS υποστηρίζει διακριτικού μετασχηματισμό και επαύξηση. Αυτή η δυνατότητα δεν παρέχει του καταλόγου Azure Active Directory. Με ADFS, όταν έχετε ορίσει τις σχέσεις αξιοπιστίας, μπορείτε να κάνετε:

- Ρύθμιση παραμέτρων μετασχηματισμοί διεκδίκηση για των κανόνων εξουσιοδότησης. Για παράδειγμα, μπορείτε να αντιστοιχίσετε ομάδα ασφαλείας από μια απεικόνιση που χρησιμοποιούνται από τον οργανισμό ενός συνεργάτη δεν ανήκουν στη Microsoft για κάτι που να εξουσιοδοτήσετε που ΠΡΟΣΘΈΤΕΙ στην εταιρεία σας.

- Μετασχηματισμός αξιώσεων από μια μορφή σε μια άλλη. Για παράδειγμα, μπορείτε να αντιστοιχίσετε από SAML 2.0 σε SAML 1.1 εάν η εφαρμογή σας υποστηρίζει μόνο αξιώσεων SAML 1.1. 

## <a name="availability-considerations"></a>Ζητήματα διαθεσιμότητας

Μπορείτε να χρησιμοποιήσετε SQL Server ή τα Windows εσωτερική βάση δεδομένων (WID) για τη διατήρηση πληροφοριών ρύθμισης παραμέτρων ADFS. WID παρέχει βασικές πλεονασμού. Αλλαγές εγγράφονται απευθείας μόνο μία από τις βάσεις δεδομένων ADFS στο σύμπλεγμα ADFS, ενώ τους άλλους διακομιστές Χρησιμοποιήστε ελκυστική αναπαραγωγής για να διατηρήσετε τις βάσεις δεδομένων τους ενημερωμένα. Χρησιμοποιώντας τον SQL Server να παράσχετε πλεονασμού πλήρη βάσεων δεδομένων και υψηλή διαθεσιμότητα χρήση ανακατεύθυνσης συμπλέγματος ή αποτελούν πιστή αναπαράσταση.

## <a name="security-considerations"></a>Ζητήματα ασφαλείας

ADFS χρησιμοποιεί το πρωτόκολλο HTTPS, επομένως, βεβαιωθείτε ότι οι κανόνες NSG για το υποδίκτυο που περιέχει το web σειρά αιτήσεις HTTPS άδεια ΣΠΣ. Αυτές οι αιτήσεις μπορεί να προέρχονται από το δίκτυο εσωτερικής εγκατάστασης, τα δευτερεύοντα δίκτυα που περιέχει η σειρά web, επιχειρήσεις επίπεδο, σειρά δεδομένων, ιδιωτικό DMZ, δημόσια DMZ και δευτερεύον που περιέχει τους διακομιστές ADFS.

Μπορείτε να χρησιμοποιήσετε ένα σύνολο εικονικού συσκευές δικτύου που συνδέεται λεπτομερείς πληροφορίες σχετικά με την κυκλοφορία αλλαγή στο άκρο του εικονικού δικτύου σας για έλεγχο.

## <a name="scalability-considerations"></a>Ζητήματα κλιμάκωση

Τα παρακάτω ζητήματα, συνοψίζονται από το έγγραφο [σχεδιασμό της ανάπτυξης ADFS][plan-your-adfs-deployment], δώστε ένα σημείο εκκίνησης για την αλλαγή μεγέθους συμπλεγμάτων ADFS:

- Εάν έχετε λιγότερες από 1000 χρήστες, μην δημιουργήσετε αποκλειστικό ADFS διακομιστές, αλλά αντί για αυτό εγκατάσταση ADFS σε κάθε έναν από τους διακομιστές ΠΡΟΣΘΈΤΕΙ στο cloud (βεβαιωθείτε ότι έχετε τουλάχιστον δύο ΠΡΟΣΘΈΤΕΙ διακομιστές, για να διατηρήσετε διαθεσιμότητα). Δημιουργήστε ένα διακομιστή WAP.

- Εάν έχετε μεταξύ 1000 και 15000 χρήστες, δημιουργήστε δύο αποκλειστικό ADFS οι διακομιστές και δύο αποκλειστικό WAP.

- Εάν έχετε μεταξύ 15000 και 60000 χρήστες, δημιουργήστε μεταξύ τρεις πέντε αποκλειστικό ADFS διακομιστές και και τουλάχιστον δύο αποκλειστικό διακομιστές WAP.

Αυτά τα ποσά θεωρείται ότι χρησιμοποιείτε διπλού πυρήνα τεσσάρων ΣΠΣ (τυπική D4_v2 ή καλύτερα) για τη φιλοξενία των διακομιστών στο Azure.

Λάβετε υπόψη ότι εάν χρησιμοποιείτε εσωτερική βάση δεδομένων των Windows για την αποθήκευση δεδομένων ρύθμισης παραμέτρων ADFS, είστε υποχρεωμένοι να οκτώ ADFS τους διακομιστές της συστοιχίας. Εάν σκοπεύετε να χρειάζεται περισσότερα, στη συνέχεια, χρησιμοποιήστε SQL Server. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Το ρόλο της βάσης δεδομένων ρύθμισης παραμέτρων ADFS][adfs-configuration-database].

## <a name="management-considerations"></a>Ζητήματα διαχείρισης

DevOps προσωπικού πρέπει να προετοιμαστείτε για να εκτελέσετε τις ακόλουθες εργασίες:

- Διαχείριση τους διακομιστές ομοσπονδίας (Διαχείριση σύμπλεγμα ADFS, τη διαχείριση της πολιτικής αξιοπιστίας στους διακομιστές ομοσπονδίας και τη Διαχείριση τα πιστοποιητικά που χρησιμοποιούνται από τις υπηρεσίες ομοσπονδίας).

- Διαχείριση των διακομιστών WAP (τη διαχείριση της συστοιχίας WAP, τη διαχείριση των πιστοποιητικών WAP).

- Διαχείριση εφαρμογών web (τη ρύθμιση των παραμέτρων υπολογιστή μέρη, μεθόδους ελέγχου ταυτότητας και αντιστοιχίσεις αξιώσεων).

- Δημιουργία αντιγράφων ασφαλείας στοιχεία ADFS.

## <a name="monitoring-considerations"></a>Παρακολούθηση ζητήματα

Το [Πακέτο διαχείρισης κέντρο συστήματος Microsoft για Active Directory Federation Services 2012 R2] [ oms-adfs-pack] παρέχει έγκαιρη αλλά και αντίδρασης παρακολούθησης της ανάπτυξης ADFS για το διακομιστή ομοσπονδίας. Αυτό το πακέτο διαχείρισης παρακολουθεί:

- Συμβάντα ότι το ADFS υπηρεσίας εγγραφών με τα αρχεία καταγραφής συμβάντων ADFS.

- Τα δεδομένα επιδόσεων που συλλογής μετρητών επιδόσεων ADFS. 

- Συνολικά την εύρυθμη λειτουργία των ADFS σύστημα και web εφαρμογών (υπηρεσία αξιοπιστίας μέρη), και παρέχει ειδοποιήσεις για κρίσιμα ζητήματα και τις προειδοποιήσεις.

## <a name="solution-components"></a>Στοιχεία λύσης

Δείγμα λύσης ενεργειών, [Ανάπτυξη ReferenceArchitecture.ps1][solution-script], είναι διαθέσιμο το οποίο μπορείτε να χρησιμοποιήσετε για την υλοποίηση της αρχιτεκτονικής που ακολουθεί τις συστάσεις που περιγράφονται σε αυτό το άρθρο. Αυτή η δέσμη ενεργειών χρησιμοποιεί πρότυπα διαχείρισης πόρων Azure. Τα πρότυπα που είναι διαθέσιμα ως ένα σύνολο θεμελιώδεις μπλοκ δόμησης, κάθε μία από τις οποίες εκτελεί μια συγκεκριμένη ενέργεια, όπως τη δημιουργία μιας VNet ή τη ρύθμιση των παραμέτρων ενός NSG. Ο σκοπός της δέσμης ενεργειών είναι να οργανώσετε ανάπτυξη προτύπου.

Τα πρότυπα που είναι με παραμέτρους, με τις παραμέτρους που θα διατηρούνται στα ξεχωριστά αρχεία JSON. Μπορείτε να τροποποιήσετε τις παραμέτρους σε αυτά τα αρχεία για τη ρύθμιση παραμέτρων ανάπτυξης να πληροί τις απαιτήσεις του δικού σας. Δεν χρειάζεται για την τροποποίηση των προτύπων τον εαυτό τους. Σημειώστε ότι δεν πρέπει να αλλάξετε τα σχήματα από τα αντικείμενα στα αρχεία παραμέτρου.

Κατά την επεξεργασία των προτύπων, δημιουργία αντικειμένων που ακολουθούν τις συμβάσεις ονομασίας περιγράφεται στο [Προτεινόμενα συμβάσεις ονομασίας παραμέτρων για τους πόρους Azure][naming-conventions].

Η λύση δείγμα δημιουργεί και ρυθμίζει τις παραμέτρους του περιβάλλοντος στο cloud που περιλαμβάνει το DMZ υποδικτύου και διακομιστές και το υποδίκτυο ADFS και διακομιστές, υποδικτύου διακομιστή μεσολάβησης ADFS και διακομιστές, ΠΡΟΣΘΈΤΕΙ, επίπεδο web, επιχειρήσεις σειρά, και στοιχεία επιπέδων πρόσβασης δεδομένων, πύλης VPN και Διαχείριση επιπέδων. Η λύση δείγμα περιλαμβάνει επίσης μια προαιρετική ρύθμιση παραμέτρων για να δημιουργήσετε ένα περιβάλλον προσομοιωμένη εσωτερικής εγκατάστασης.

Οι παρακάτω ενότητες περιγράφουν τα στοιχεία του το εσωτερικής εγκατάστασης και cloud ρυθμίσεις παραμέτρων.

### <a name="on-premises-components"></a>Στοιχεία εσωτερικής εγκατάστασης

>[AZURE.NOTE] Αυτά τα στοιχεία δεν είναι το κύριο εστίαση της αρχιτεκτονικής που περιγράφονται σε αυτό το έγγραφο και παρέχονται απλώς να σας δώσει μια ευκαιρία για να ελέγξετε το περιβάλλον cloud με ασφάλεια, αντί να χρησιμοποιήσετε ένα περιβάλλον πραγματικό παραγωγής. Για αυτόν το λόγο, αυτή η ενότητα συνοψίζει μόνο τα αρχεία παραμέτρου του κλειδιού. Μπορείτε να τροποποιήσετε τις ρυθμίσεις, όπως οι διευθύνσεις IP ή τα μεγέθη των του ΣΠΣ, αλλά συνιστάται να αφήσετε πολλές από τις άλλες παραμέτρους που δεν έχουν αλλάξει.

Αυτό το περιβάλλον αποτελείται από ένα σύμπλεγμα δομών AD για έναν τομέα με το όνομα contoso.com. Ο τομέας περιέχει δύο ΠΡΟΣΘΈΤΕΙ διακομιστές με διευθύνσεις IP 192.168.0.4 και 192.168.0.5. Αυτά τα δύο διακομιστές επίσης να εκτελέσετε την υπηρεσία DNS. Ο λογαριασμός τοπικού διαχειριστή σε δύο VM ονομάζεται `testuser` με κωδικό πρόσβασης `AweS0me@PW`. Επιπλέον, ρυθμίζει τις παραμέτρους μιας πύλης VPN για τη σύνδεση με το VNet στο cloud. Μπορείτε να τροποποιήσετε τις ρυθμίσεις παραμέτρων με την επεξεργασία του παρακάτω JSON αρχεία που βρίσκονται σε τη [**σύνδεση παράμετροι/εντός της επιχείρησης**] [ on-premises-folder] φακέλου:

- ** [virtualNetwork.parameters.json][on-premises-vnet-parameters]**. Αυτό το αρχείο Καθορίζει το χώρο διευθύνσεων δικτύου για το περιβάλλον εσωτερικής εγκατάστασης.

- ** [virtualMachines adds.parameters.json][on-premises-virtualmachines-adds-parameters]**. Αυτό το αρχείο περιέχει τη ρύθμιση παραμέτρων για το ΣΠΣ εσωτερικής ΠΡΟΣΘΈΤΕΙ υπηρεσίες φιλοξενίας. Από προεπιλογή, δημιουργούνται δύο ΣΠΣ *Τυπική-DS3-v2* .

- ** [virtualNetworkGateway.parameters.json] [ on-premises-virtualnetworkgateway-parameters] ** και ** [connection.parameters.json][on-premises-connection-parameters]**. Αυτά τα αρχεία κρατήστε τις ρυθμίσεις για τη σύνδεση VPN με την πύλη Azure VPN στο cloud, όπως το κοινόχρηστο κλειδί θα χρησιμοποιηθεί για την προστασία κίνηση αλλαγή της πύλης.

Τα υπόλοιπα αρχεία στο φάκελο περιέχει τις πληροφορίες ρύθμισης παραμέτρων που χρησιμοποιούνται για τη δημιουργία του τομέα εσωτερικής εγκατάστασης χρησιμοποιώντας αυτήν την υποδομή. Μπορείτε να τα χρησιμοποιήσετε για να εγκαταστήσετε ΠΡΟΣΘΈΤΕΙ, ρύθμιση DNS, δημιουργήστε ένα σύμπλεγμα και ρυθμίσετε τις παραμέτρους των τοποθεσιών αναπαραγωγής για το δάσος.

### <a name="cloud-components"></a>Στοιχεία του cloud

Αυτά τα στοιχεία φόρμας βασικού αυτής της αρχιτεκτονικής. Το [**παράμετροι/azure**] [ azure-folder] φακέλου περιέχει τα ακόλουθα αρχεία παραμέτρου για τη ρύθμιση αυτών των στοιχείων:

- ** [virtualNetwork.parameters.json][vnet-parameters]**. Αυτό το αρχείο καθορίζει δομή του VNet για το ΣΠΣ και άλλα στοιχεία του στο cloud. Περιλαμβάνει ρυθμίσεις, όπως το όνομα, διεύθυνση διάστημα, δευτερεύοντα δίκτυα και οι διευθύνσεις τους διακομιστές DNS που απαιτούνται. Σημειώστε ότι οι διευθύνσεις DNS που εμφανίζονται σε αυτό το παράδειγμα αναφοράς τις διευθύνσεις IP των διακομιστών DNS εσωτερικής εγκατάστασης, καθώς και τον προεπιλεγμένο διακομιστή Azure DNS. Τροποποίηση αυτές τις διευθύνσεις για αναφορά το δικό σας πρόγραμμα εγκατάστασης DNS, εάν δεν χρησιμοποιείτε το δείγμα περιβάλλον εσωτερικής εγκατάστασης:

    ```json
    {
        "virtualNetworkSettings": {
            "value": {
                "name": "ra-adfs-vnet",
                "resourceGroup": "ra-adfs-network-rg",
                "addressPrefixes": [
                    "10.0.0.0/16"
                ],
                "subnets": [
                    {
                        "name": "dmz-private-in",
                        "addressPrefix": "10.0.0.0/27"
                    },
                    {
                        "name": "dmz-private-out",
                        "addressPrefix": "10.0.0.32/27"
                    },
                    {
                        "name": "dmz-public-in",
                        "addressPrefix": "10.0.0.64/27"
                    },
                    {
                        "name": "dmz-public-out",
                        "addressPrefix": "10.0.0.96/27"
                    },
                    {
                        "name": "mgmt",
                        "addressPrefix": "10.0.0.128/25"
                    },
                    {
                        "name": "GatewaySubnet",
                        "addressPrefix": "10.0.255.224/27"
                    },
                    {
                        "name": "web",
                        "addressPrefix": "10.0.1.0/24"
                    },
                    {
                        "name": "biz",
                        "addressPrefix": "10.0.2.0/24"
                    },
                    {
                        "name": "data",
                        "addressPrefix": "10.0.3.0/24"
                    },
                    {
                        "name": "adds",
                        "addressPrefix": "10.0.4.0/27"
                    },
                    {
                        "name": "adfs",
                        "addressPrefix": "10.0.5.0/27"
                    },
                    {
                        "name": "proxy",
                        "addressPrefix": "10.0.6.0/27"
                    }
                ],
                "dnsServers": [
                    "192.168.0.4",
                    "192.168.0.5",
                    "168.63.129.16"
                ]
            }
        }
    }
    ```

- ** [virtualMachines adds.parameters.json ] [ virtualmachines-adds-parameters] **. Αυτό το αρχείο ρυθμίζει τις παραμέτρους του ΣΠΣ εκτελείται ΠΡΟΣΘΈΤΕΙ στο cloud. Η ρύθμιση παραμέτρων αποτελείται από δύο ΣΠΣ. Θα πρέπει να αλλάξετε το όνομα χρήστη του διαχειριστή και τον κωδικό πρόσβασης στο το `virtualMachineSettings` ενότητα και, μπορείτε προαιρετικά να τροποποιήσετε το μέγεθος Εικονική ώστε να ταιριάζει με τις απαιτήσεις του τομέα:

    Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Επέκταση υπηρεσίας καταλόγου Active Directory για να Azure][extending-ad-to-azure].

    ```json
            "virtualMachinesSettings": {
                "value": {
                    "namePrefix": "ra-adfs-ad",
                    "computerNamePrefix": "aad",
                    "size": "Standard_DS3_v2",
                    "osType": "Windows",
                    "adminUsername": "testuser",
                    "adminPassword": "AweS0me@PW",
                    "osAuthenticationType": "password",
                    "nics": [
                        {
                            "isPublic": "false",
                            "subnetName": "adds",
                            "privateIPAllocationMethod": "Static",
                            "startingIPAddress": "10.0.4.4",
                            "enableIPForwarding": false,
                            "dnsServers": [
                            ],
                            "isPrimary": "true"
                        }
                    ],
                    "imageReference": {
                        "publisher": "MicrosoftWindowsServer",
                        "offer": "WindowsServer",
                        "sku": "2012-R2-Datacenter",
                        "version": "latest"
                    },
                    "dataDisks": {
                        "count": 1,
                        "properties": {
                            "diskSizeGB": 127,
                            "caching": "None",
                            "createOption": "Empty"
                        }
                    },
                    "osDisk": {
                        "caching": "ReadWrite"
                    },
                    "extensions": [
                    ],
                    "availabilitySet": {
                        "useExistingAvailabilitySet": "No",
                        "name": "ra-adfs-as"
                    }
                }
            },
            "virtualNetworkSettings": {
                "value": {
                    "name": "ra-adfs-vnet",
                    "resourceGroup": "ra-adfs-network-rg"
                }
            },
            "buildingBlockSettings": {
                "value": {
                    "storageAccountsCount": 2,
                    "vmCount": 2,
                    "vmStartIndex": 1
                }
            }
        }
    ```

- ** [Προσθήκη-προσθέτει-τομέα-controller.parameters.json][add-adds-domain-controller-parameters]**. Αυτό το αρχείο περιέχει τις ρυθμίσεις για τη δημιουργία του τομέα CONTOSO που εκτείνονται σε διακομιστές ΠΡΟΣΘΈΤΕΙ. Χρησιμοποιεί προσαρμοσμένες επεκτάσεις που καθορίζει τον τομέα και να προσθέσετε τους διακομιστές ΠΡΟΣΘΈΤΕΙ σε αυτό. Εκτός εάν δημιουργήσετε πρόσθετους διακομιστές ΠΡΟΣΘΈΤΕΙ (σε αυτήν την περίπτωση που θα πρέπει να προσθέσετε το `vms` πίνακα), αλλάξτε τα ονόματά τους από την προεπιλεγμένη ή θέλετε να δημιουργήσετε έναν τομέα με διαφορετικό όνομα δεν χρειάζεται να τροποποιήσετε αυτό το αρχείο.

- ** [loadBalancer adfs.parameters.json] [loadbalancer-adfs-parameters] ** Το αρχείο περιέχει δύο σύνολα παραμέτρων. Το `virtualMachineSettings` ενότητα ορίζει το ΣΠΣ που φιλοξενεί την υπηρεσία ADFS στο cloud. Από προεπιλογή, η δέσμη ενεργειών δημιουργεί δύο από τα εξής ΣΠΣ στο ίδιο σύνολο διαθεσιμότητα:

    ```json
        "virtualMachinesSettings": {
            "value": {
                "namePrefix": "ra-adfs-adfs",
                "computerNamePrefix": "adfs",
                "size": "Standard_DS1_v2",
                "osType": "windows",
                "adminUsername": "testuser",
                "adminPassword": "AweS0me@PW",
                "osAuthenticationType": "password",
                "nics": [
                    {
                        "isPublic": "false",
                        "subnetName": "adfs",
                        "privateIPAllocationMethod": "Static",
                        "startingIPAddress": "10.0.5.4",
                        "isPrimary": "true",
                        "enableIPForwarding": false,
                        "dnsServers": [ ]
                    }
                ],
                "imageReference": {
                    "publisher": "MicrosoftWindowsServer",
                    "offer": "WindowsServer",
                    "sku": "2012-R2-Datacenter",
                    "version": "latest"
                },
                "dataDisks": {
                    "count": 1,
                    "properties": {
                        "diskSizeGB": 128,
                        "caching": "None",
                        "createOption": "Empty"
                    }
                },
                "osDisk": {
                    "caching": "ReadWrite"
                },
                "extensions": [ ],
                "availabilitySet": {
                    "useExistingAvailabilitySet": "No",
                    "name": "ra-adfs-adfs-vm-as"
                }
            }
        }
        ...
        "buildingBlockSettings": {
            "value": {
                "storageAccountsCount": 2,
                "vmCount": 2,
                "vmStartIndex": 1
            }
        }
    ```

    Το `loadBalancerSettings` η ενότητα παρέχει την περιγραφή της τη μονάδα εξισορρόπησης φόρτου για αυτές τις ΣΠΣ. Τη μονάδα εξισορρόπησης φόρτου μεταβιβάζει κίνηση που εμφανίζεται στη θύρα 443 (HTTPS) σε μία ή σε άλλες του ΣΠΣ:

    ```json
        "loadBalancerSettings": {
            "value": {
                "name": "ra-adfs-adfs-lb",
                "frontendIPConfigurations": [
                    {
                        "name": "ra-adfs-adfs-lb-fe",
                        "loadBalancerType": "internal",
                        "internalLoadBalancerSettings": {
                            "privateIPAddress": "10.0.5.30",
                            "subnetName": "adfs"
                        }
                    }
                ],
                "backendPools": [
                    {
                        "name": "ra-adfs-adfs-lb-bep",
                        "nicIndex": 0
                    }
                ],
                "loadBalancingRules": [
                    {
                        "name": "https-rule",
                        "frontendPort": 443,
                        "backendPort": 443,
                        "protocol": "Tcp",
                        "backendPoolName": "ra-adfs-adfs-lb-bep",
                        "frontendIPConfigurationName": "ra-adfs-adfs-lb-fe",
                        "probeName": "https-probe",
                        "enableFloatingIP": false
                    }
                ],
                "probes": [
                    {
                        "name": "https-probe",
                        "port": 443,
                        "protocol": "Tcp",
                        "requestPath": null
                    }
                ],
                "inboundNatRules": [ ]
            }
        },
        "virtualNetworkSettings": {
            "value": {
                "name": "ra-adfs-vnet",
                "resourceGroup": "johns-adfs-network-rg"
            }
        }
    ```

- ** [adfs-συστοιχίας-τομέα-join.parameters.json ] [ adfs-farm-domain-join-parameters] **. Αυτό το αρχείο περιέχει τις ρυθμίσεις που χρησιμοποιούνται για να προσθέσετε τους διακομιστές ADFS στον τομέα CONTOSO. Μόνο πρέπει να τροποποιήσετε αυτό το αρχείο, εάν έχετε δημιουργήσει πρόσθετους διακομιστές ADFS (ενημέρωση του `vms` πίνακα σε αυτήν την περίπτωση), ή έχετε αλλάξει το όνομα του τομέα.

- ** [gmsa.parameters.json][gmsa-parameters]**, ** [adfs-συστοιχίας-first.parameters.json][adfs-farm-first-parameters]**, και ** [adfs-συστοιχίας-rest.parameters.json][adfs-farm-rest-parameters]**. Η δέσμη ενεργειών χρησιμοποιεί τις ρυθμίσεις σε αυτά τα αρχεία για να δημιουργήσετε τη συστοιχία διακομιστών ADFS. 

    Το αρχείο *gmsa.parameters.json* περιέχει τις ρυθμίσεις για το λογαριασμό υπηρεσίας διαχειριζόμενων ομάδα χρησιμοποιούνται από την υπηρεσία ADFS. Εάν θέλετε να αλλάξετε το όνομα του λογαριασμού ή τον τομέα, μπορείτε να τροποποιήσετε αυτό το αρχείο.

    Το αρχείο *adfs-συστοιχίας-first.parameters.json* διατηρεί τις πληροφορίες που απαιτούνται για να δημιουργήσετε τη συστοιχία διακομιστών ADFS και να προσθέσετε τον πρώτο διακομιστή. Εάν έχετε αλλάξει το όνομα του λογαριασμού υπηρεσίας διαχειριζόμενων ομάδας ή τομέα, θα πρέπει να ενημερώσετε αυτό το αρχείο.

    Το αρχείο *adfs-συστοιχίας-rest.parameters.json* χρησιμοποιείται για να προσθέσετε τους υπόλοιπους ADFS διακομιστές της συστοιχίας. Ξανά, εάν έχετε αλλάξει το όνομα του λογαριασμού υπηρεσίας διαχειριζόμενων ομάδας ή τομέα, θα πρέπει να ενημερώσετε αυτό το αρχείο. Ενημέρωση του `vms` πίνακα εάν έχετε δημιουργήσει πρόσθετους διακομιστές ADFS.

- ** [loadBalancer adfsproxy.parameters.json][loadBalancer-adfsproxy-parameters]**. Αυτό το αρχείο είναι παρόμοιος σε δομή και το περιεχόμενο με το αρχείο *loadBalancer-adfs.parameters.json* . Περιέχει τα δεδομένα για τη δημιουργία τους διακομιστές μεσολάβησης ADFS και εξισορρόπηση φόρτου.

- ** [adfsproxy-συστοιχίας-first.parameters.json][adfsproxy-farm-first-parameters]**, και ** [adfsproxy-συστοιχίας-rest.parameters.json][adfsproxy-farm-rest-parameters]**. Η δέσμη ενεργειών χρησιμοποιεί τις ρυθμίσεις σε αυτά τα αρχεία για να δημιουργήσετε τη συστοιχία διακομιστών μεσολάβησης ADFS. 

- ** [virtualNetworkGateway.parameters.json][virtualnetworkgateway-parameters]**. Αυτό το αρχείο περιέχει τις ρυθμίσεις που χρησιμοποιούνται για τη δημιουργία της πύλης Azure VPN στο cloud χρησιμοποιούνται για τη σύνδεση με το δίκτυο εσωτερικής εγκατάστασης. Θα πρέπει να τροποποιήσετε το `sharedKey` τιμή του ορίσματος το `connectionsSettings` την ενότητα για να συμφωνεί με εκείνη της συσκευής VPN εσωτερικής εγκατάστασης. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [εφαρμογή μια υβριδική αρχιτεκτονική δικτύου με Azure και VPN εσωτερικής][hybrid-azure-on-prem-vpn].

- ** [dmz private.parameters.json] [ dmz-private-parameters] ** και ** [dmz public.parameters.json ] [ dmz-public-parameters] **. Αυτά τα αρχεία, ρύθμιση παραμέτρων εισερχόμενου (δημόσιας) και εξερχομένων (ιδιωτικό) πλευρές του ΣΠΣ που αποτελούν το DMZ, προστασία τους διακομιστές στο cloud. Για περισσότερες πληροφορίες σχετικά με αυτά τα στοιχεία και των παραμέτρων τους, ανατρέξτε στο θέμα [εφαρμογή μια DMZ μεταξύ Azure και του Internet][implementing-a-secure-hybrid-network-architecture-with-internet-access].

- ** [loadBalancer-web.parameters-json][loadBalancer-web-parameters]**, ** [loadBalancer-biz.parameters-json][loadBalancer-biz-parameters]**, και ** [loadBalancer-data.parameters-json][loadBalancer-data-parameters]**. Αυτά τα αρχεία παράμετροι περιέχουν οι προδιαγραφές Εικονική για τα επίπεδα πρόσβασης web, επιχειρήσεις και τα δεδομένα, και ρύθμιση παραμέτρων φόρτωσης balancers για κάθε επίπεδο. Αυτά είναι τα ΣΠΣ που φιλοξενεί τις εφαρμογές web και βάσεων δεδομένων, καθώς και να εκτελέσετε το φόρτους εργασίας του business για την εταιρεία. Μπορείτε να τροποποιήσετε το μέγεθος και αριθμό ΣΠΣ σε κάθε επίπεδο σύμφωνα με τις απαιτήσεις σας.

- ** [virtualMachines mgmt.parameters.json][virtualMachines-mgmt-parameters]**. Αυτό το αρχείο περιέχει τη ρύθμιση παραμέτρων για τη μεταπήδηση πλαίσιο/Διαχείριση ΣΠΣ. Είναι δυνατή μόνο για να αποκτήσετε σύνδεσης και δικαιώματα διαχειριστή στον του ΣΠΣ στο web, επιχειρήσεις, και τις σειρές δεδομένων από το πλαίσιο μεταπήδησης. Από προεπιλογή, η δέσμη ενεργειών δημιουργεί ένα μεμονωμένο *Standard_DS1_v2* Εικονική, αλλά μπορείτε να τροποποιήσετε αυτό το αρχείο για να δημιουργήσετε ΣΠΣ μεγαλύτερο ή επιπλέον, εάν το φόρτο εργασίας διαχείρισης είναι πιθανό να είναι σημαντική.

## <a name="solution-deployment"></a>Ανάπτυξη της λύσης

Η λύση προϋποθέτει τις ακόλουθες προϋποθέσεις:

- Έχετε μια υπάρχουσα συνδρομή Azure στο οποίο μπορείτε να δημιουργήσετε ομάδες πόρων.

- Έχετε λάβει και να εγκαταστήσει την πιο πρόσφατη δομή του Azure Powershell. Δείτε [εδώ] [ azure-powershell-download] για οδηγίες.

Για να εκτελέσετε τη δέσμη ενεργειών που αναπτύσσει τη λύση:

1. Μετακίνηση σε φάκελο εύκολη στον τοπικό σας υπολογιστή και δημιουργήστε τους παρακάτω υποφακέλους:

    - Δέσμες ενεργειών

    - Δέσμες ενεργειών/παραμέτρους

    - Δέσμες ενεργειών/παράμετροι/σύνδεση εντός της επιχείρησης

    - Παράμετροι/δέσμες ενεργειών/Azure

2. Κάντε λήψη του [Ανάπτυξη ReferenceArchitecture.ps1] [ solution-script] αρχείο στο φάκελο δέσμης ενεργειών

3. Κάντε λήψη των περιεχομένων του [παράμετροι/σύνδεση εντός επιχείρησης] [ on-premises-folder] φακέλου στο φάκελο δεσμών ενεργειών/παράμετροι/σύνδεση εντός της επιχείρησης:

4. Κάντε λήψη των περιεχομένων του [παράμετροι/azure] [ azure-folder] φακέλου στο φάκελο δεσμών ενεργειών/παράμετροι Azure.

5. Επεξεργαστείτε το αρχείο ReferenceArchitecture.ps1 ανάπτυξη στο φάκελο δεσμών ενεργειών και αλλάξτε τις ακόλουθες γραμμές για να καθορίσετε τις ομάδες πόρων που θα πρέπει να δημιουργήσει ή να χρησιμοποιούνται για τη διατήρηση των πόρων που δημιουργήθηκε από τη δέσμη ενεργειών:

    ```powershell
    # Azure Onpremise Deployments
        $onpremiseNetworkResourceGroupName = "ra-adfs-onpremise-rg"
        
        # Azure ADDS Deployments
        $azureNetworkResourceGroupName = "ra-adfs-network-rg"
        $workloadResourceGroupName = "ra-adfs-workload-rg"
        $securityResourceGroupName = "ra-adfs-security-rg"
        $addsResourceGroupName = "ra-adfs-adds-rg"
        $adfsResourceGroupName = "ra-adfs-adfs-rg"
        $adfsproxyResourceGroupName = "ra-adfs-proxy-rg"
    ```

6. Επεξεργαστείτε τα αρχεία παραμέτρου στο δέσμες ενεργειών/παράμετροι/σύνδεση εντός της επιχείρησης και δεσμών ενεργειών/παράμετροι Azure φακέλων. Ενημερώστε τις αναφορές ομάδα πόρων σε αυτά τα αρχεία για να ταιριάζουν με τα ονόματα των ομάδων πόρων στους οποίους έχουν ανατεθεί τις μεταβλητές στο αρχείο ReferenceArchitecture.ps1 ανάπτυξη. Ο παρακάτω πίνακας εμφανίζει ποια αρχεία παραμέτρου αναφορά ποια ομάδα πόρων. Σημειώστε ότι οι ομάδες *ra-adfs-φόρτο εργασίας-rg*, *ra-adfs-ασφάλεια-rg*, *ra-adfs-προσθέτει-rg*, *ra-adfs-adfs-rg*και *ra-adfs-διακομιστή μεσολάβησης-rg* χρησιμοποιούνται μόνο στη δέσμη ενεργειών PowerShell και δεν εμφανίζονται με τα αρχεία παραμέτρου.

  	|Ομάδα πόρων|Παράμετρος αρχεία|
  	|--------------|--------------|
  	|RA-adfs-σύνδεση εντός της επιχείρησης-rg|parameters\onpremise\connection.Parameters.JSON<br /> parameters\onpremise\virtualMachines-adds.Parameters.JSON<br />parameters\onpremise\virtualNetwork-adds-DNS.Parameters.JSON<br />parameters\onpremise\virtualNetwork.Parameters.JSON<br />parameters\onpremise\virtualNetworkGateway.Parameters.JSON<br />parameters\azure\virtualNetworkGateway.Parameters.JSON
  	|RA-adfs-δικτύου-rg|parameters\onpremise\connection.Parameters.JSON<br />parameters\azure\dmz-Private.Parameters.JSON<br />parameters\azure\dmz-Public.Parameters.JSON<br />parameters\azure\loadBalancer-ADFS.Parameters.JSON<br />parameters\azure\loadBalancer-adfsproxy.Parameters.JSON<br />parameters\azure\loadBalancer-Biz.Parameters.JSON<br />parameters\azure\loadBalancer-Data.Parameters.JSON<br />parameters\azure\loadBalancer-Web.Parameters.JSON<br />parameters\azure\virtualMachines-adds.Parameters.JSON<br />parameters\azure\virtualMachines-MGMT.Parameters.JSON<br />parameters\azure\virtualNetwork-with-OnPremise-and-Azure-DNS.Parameters.JSON<br />parameters\azure\virtualNetwork.Parameters.JSON<br />parameters\azure\virtualNetworkGateway.Parameters.JSON (*δύο φορές*)

    Επιπλέον, ορίστε τη ρύθμιση παραμέτρων για το εσωτερικής εγκατάστασης και στο cloud στοιχεία, όπως περιγράφεται στην ενότητα [στοιχεία λύσης] [στοιχεία λύσης].

7. Ανοίξτε ένα παράθυρο του Azure PowerShell, μετακίνηση στο φάκελο δέσμης ενεργειών και εκτελέστε την ακόλουθη εντολή:

    ```powershell
    .\Deploy-ReferenceArchitecture.ps1 <subscription id> <location> <mode>
    ```

    Αντικατάσταση `<subscription id>` με το αναγνωριστικό Azure συνδρομής.

    Για `<location>`, καθορίστε μια περιοχή Azure, όπως `eastus` ή `westus`.

    Το `<mode>` παραμέτρου μπορεί να έχετε μία από τις ακόλουθες τιμές:

    - `Onpremise`, για να δημιουργήσετε το περιβάλλον προσομοιωμένη εσωτερικής εγκατάστασης.

    - `Infrastructure`, για να δημιουργήσετε την υποδομή VNet και μεταπήδηση πλαίσιο στο cloud.

    - `CreateVpn`, για να δημιουργήσετε πύλης Azure εικονικού δικτύου και συνδέστε τη με το δίκτυο εσωτερικής εγκατάστασης.

    - `AzureADDS`, για να δημιουργήσετε το ΣΠΣ ενεργώντας ως διακομιστές ΠΡΟΣΘΈΤΕΙ, ανάπτυξης υπηρεσίας καταλόγου Active Directory για αυτά τα ΣΠΣ και δημιουργήστε τον τομέα στο cloud.

    - `AdfsVm`Για να δημιουργήσετε το ΣΠΣ ADFS και τη συμμετοχή τους στον τομέα στο cloud.

    - `ProxyVm`Για να δημιουργήσετε το διακομιστή μεσολάβησης ADFS ΣΠΣ και τη συμμετοχή τους στον τομέα στο cloud.

    - `Prepare`, που πραγματοποιεί όλες τις παραπάνω εργασίες. **Αυτή είναι η προτεινόμενη επιλογή εάν δημιουργείτε μια εντελώς νέα ανάπτυξη και δεν έχετε μια υπάρχουσα υποδομή εσωτερικής εγκατάστασης.**

    >[AZURE.NOTE] Μπορείτε επίσης να εκτελέσετε τη δέσμη ενεργειών με ένα `<mode>` παράμετρος της `Workload` για να δημιουργήσετε το web, επιχειρήσεις, και επιπέδων δεδομένων ΣΠΣ και δικτύου. Αυτό το πρόγραμμα Εγκατάστασης δεν περιλαμβάνεται ως τμήμα της το `Prepare` λειτουργία.

    Εάν χρησιμοποιείτε το `Prepare` την επιλογή, η δέσμη ενεργειών λαμβάνει μερικές ώρες για να ολοκληρωθεί και ολοκλήρωση εργασιών με το μήνυμα *προετοιμασίας έχει ολοκληρωθεί. Εγκαταστήστε το πιστοποιητικό σε όλες τις ADFS και διακομιστή μεσολάβησης ΣΠΣ.*

8.  Επανεκκινήστε το πλαίσιο μεταπήδηση (*ra-adfs-διαχείρισης-vm1* στην ομάδα *ra-adfs-ασφάλεια-rg* ) για να επιτρέψετε τις ρυθμίσεις DNS για να τεθούν σε ισχύ.

9.  [Προμηθευτείτε ένα πιστοποιητικό SSL για ADFS] [ adfs_certificates] και να εγκαταστήσετε αυτό το πιστοποιητικό σε του ΣΠΣ ADFS. Σημειώστε ότι μπορείτε να συνδεθείτε με το ΣΠΣ ADFS έως το πλαίσιο μεταπήδησης. Οι διευθύνσεις IP είναι *10.0.5.4* και *10.0.5.5*. Το προεπιλεγμένο όνομα χρήστη είναι *contoso\testuser* με κωδικό πρόσβασης *AweSome@PW*.

    >[AZURE.NOTE] Τα σχόλια στη δέσμη ενεργειών ανάπτυξης ReferenceArchitecture.ps1 σε αυτό το σημείο παρέχει λεπτομερείς οδηγίες για να δημιουργήσετε ένα δοκιμαστικό αυτο-υπογεγραμμένο πιστοποιητικό και αρχή έκδοσης πιστοποιητικών χρησιμοποιώντας το `makecert` εντολή. Ωστόσο, μην χρησιμοποιείτε τα πιστοποιητικά που δημιουργούνται με makecert σε ένα περιβάλλον παραγωγής.

10. Εκτελέστε την ακόλουθη εντολή Powershell για τη ρύθμιση παραμέτρων του συμπλέγματος διακομιστών ADFS:

    ```powershell
    .\Deploy-ReferenceArchitecture.ps1 <subscription id> <location> Adfs
    ```

11. Στο πλαίσιο μεταπήδηση, αναζητήστε *https://adfs.contoso.com/adfs/ls/idpinitiatedsignon.htm* για να ελέγξετε την εγκατάσταση ADFS (ενδέχεται να εμφανιστεί μια προειδοποίηση πιστοποιητικού, το οποίο μπορείτε να αγνοήσετε για αυτόν τον έλεγχο). Βεβαιωθείτε ότι εμφανίζεται η εταιρεία Contoso στη σελίδα εισόδου. Πραγματοποιήστε είσοδο στο ως *contoso\testuser* με κωδικό πρόσβασης *AweS0me@PW*.

12. Εγκαταστήστε το πιστοποιητικό SSL στο διακομιστή μεσολάβησης ADFS ΣΠΣ. Οι διευθύνσεις IP είναι *10.0.6.4* και *10.0.6.5*.

13. Εκτελέστε την ακόλουθη εντολή Powershell για να ρυθμίσετε τις παραμέτρους του πρώτου διακομιστή μεσολάβησης ADFS:

    ```powershell
    .\Deploy-ReferenceArchitecture.ps1 <subscription id> <location> Proxy1
    ```

14. Ακολουθήστε τις οδηγίες που εμφανίζονται από τη δέσμη ενεργειών για να ελέγξετε την εγκατάσταση του πρώτου διακομιστή μεσολάβησης ADFS.

15. Εκτελέστε την ακόλουθη εντολή Powershell για να ρυθμίσετε τις παραμέτρους του δεύτερου διακομιστή μεσολάβησης πρώτη ADFS:

    ```powershell
    .\Deploy-ReferenceArchitecture.ps1 <subscription id> <location> Proxy2
    ```

16. Ακολουθήστε τις οδηγίες που εμφανίζονται από τη δέσμη ενεργειών για να ελέγξετε την πλήρη ρύθμιση παραμέτρων διακομιστή μεσολάβησης ADFS.

## <a name="next-steps"></a>Επόμενα βήματα

- [Καταλόγου Azure Active Directory][aad].

- [B2C καταλόγου Azure Active Directory][aadb2c].

<!-- links -->

[vm-recommendations]: ./guidance-compute-single-vm.md#Recommendations
[naming-conventions]: ./guidance-naming-conventions.md
[implementing-active-directory]: ./guidance-identity-adds-extend-domain.md
[resource-manager-overview]: ../azure-resource-manager/resource-group-overview.md
[implementing-a-secure-hybrid-network-architecture]: ./guidance-iaas-ra-secure-vnet-hybrid.md
[implementing-a-secure-hybrid-network-architecture-with-internet-access]: ./guidance-iaas-ra-secure-vnet-dmz.md
[DRS]: https://technet.microsoft.com/library/dn280945.aspx
[where-to-place-an-fs-proxy]: https://technet.microsoft.com/library/dd807048.aspx
[ADDRS]: https://technet.microsoft.com/library/dn486831.aspx
[plan-your-adfs-deployment]: https://msdn.microsoft.com/library/azure/dn151324.aspx
[ad_network_recommendations]: #network_configuration_recommendations_for_AD_DS_VMs
[domain_and_forests]: https://technet.microsoft.com/library/cc759073(v=ws.10).aspx
[adfs_certificates]: https://technet.microsoft.com/library/dn781428(v=ws.11).aspx
[create_service_account_for_adfs_farm]: https://technet.microsoft.com/library/dd807078.aspx
[import_server_authentication_certificate]: https://technet.microsoft.com/library/dd807088.aspx
[adfs-configuration-database]: https://technet.microsoft.com/en-us/library/ee913581(v=ws.11).aspx
[active-directory-federation-services]: https://technet.microsoft.com/windowsserver/dd448613.aspx
[security-considerations]: #security-considerations
[recommendations]: #recommendations
[claims-aware applications]: https://msdn.microsoft.com/en-us/library/windows/desktop/bb736227(v=vs.85).aspx
[active-directory-federation-services-overview]: https://technet.microsoft.com/en-us/library/hh831502(v=ws.11).aspx
[establishing-federation-trust]: https://blogs.msdn.microsoft.com/alextch/2011/06/27/establishing-federation-trust/
[Deploying_a_federation_server_farm]: https://technet.microsoft.com/library/dn486775.aspx
[install_and_configure_the_web_application_proxy_server]: https://technet.microsoft.com/library/dn383662.aspx
[publish_applications_using_AD_FS_preauthentication]: https://technet.microsoft.com/library/dn383640.aspx
[managing-adfs-components]: https://technet.microsoft.com/library/cc759026.aspx
[oms-adfs-pack]: https://www.microsoft.com/download/details.aspx?id=41184
[azure-powershell-download]: https://azure.microsoft.com/documentation/articles/powershell-install-configure/
[aad]: https://azure.microsoft.com/documentation/services/active-directory/
[aadb2c]: https://azure.microsoft.com/documentation/services/active-directory-b2c/
[adfs-intro]: ../active-directory/active-directory-aadconnect-azure-adfs.md
[solution-script]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/Deploy-ReferenceArchitecture.ps1
[on-premises-folder]: https://github.com/mspnp/reference-architectures/tree/master/guidance-identity-adfs/parameters/onpremise
[on-premises-vnet-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/onpremise/virtualNetwork.parameters.json
[on-premises-virtualmachines-adds-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/onpremise/virtualMachines-adds.parameters.json
[on-premises-virtualnetworkgateway-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/onpremise/virtualNetworkGateway.parameters.json
[on-premises-connection-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/onpremise/connection.parameters.json
[azure-folder]: https://github.com/mspnp/reference-architectures/tree/master/guidance-identity-adfs/parameters/azure
[vnet-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/virtualNetwork.parameters.json
[dmz-private-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/dmz-private.parameters.json
[dmz-public-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/dmz-public.parameters.json
[virtualnetworkgateway-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/virtualNetworkGateway.parameters.json
[hybrid-azure-on-prem-vpn]: ./guidance-hybrid-network-vpn.md
[virtualmachines-adds-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/virtualMachines-adds.parameters.json
[extending-ad-to-azure]: ./guidance-identity-adds-extend-domain.md
[loadbalancer-adfs-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/loadBalancer-adfs.parameters.json
[add-adds-domain-controller-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/add-adds-domain-controller.parameters.json
[gmsa-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/gmsa.parameters.json
[adfs-farm-first-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/adfs-farm-first.parameters.json
[adfs-farm-rest-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/adfs-farm-rest.parameters.json
[adfs-farm-domain-join-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/adfs-farm-domain-join.parameters.json
[loadBalancer-web-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/loadBalancer-web.parameters.json
[loadBalancer-biz-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/loadBalancer-biz.parameters.json
[loadBalancer-data-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/loadBalancer-data.parameters.json
[virtualMachines-mgmt-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/virtualMachines-mgmt.parameters.json
[loadBalancer-adfsproxy-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/loadBalancer-adfsproxy.parameters.json
[adfsproxy-farm-first-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/adfsproxy-farm-first.parameters.json
[adfsproxy-farm-rest-parameters]: https://raw.githubusercontent.com/mspnp/reference-architectures/master/guidance-identity-adfs/parameters/azure/adfsproxy-farm-rest.parameters.json
[0]: ./media/guidance-iaas-ra-secure-vnet-adfs/figure1.png "Ασφαλούς υβριδική αρχιτεκτονική δικτύου με την υπηρεσία καταλόγου Active Directory"
