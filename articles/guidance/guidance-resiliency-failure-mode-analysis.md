<properties
   pageTitle="Αποτυχία λειτουργία ανάλυσης | Microsoft Azure"
   description="Οδηγίες για την εκτέλεση ανάλυσης λειτουργία αποτυχία για cloud λύσεις που βασίζονται στο Azure."
   services=""
   documentationCenter="na"
   authors="MikeWasson"
   manager="christb"
   editor=""
   tags=""/>

<tags
   ms.service="guidance"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="10/24/2016"
   ms.author="mwasson"/>

# <a name="azure-resiliency-guidance-failure-mode-analysis"></a>Καθοδήγηση Azure ανοχή: Αποτυχία λειτουργία ανάλυσης

Αποτυχία λειτουργία ανάλυσης (FMA) είναι μια διαδικασία για τη δημιουργία ανοχή σε ένα σύστημα, προσδιορίζοντας πιθανές αποτυχία σημεία στο σύστημα. Το FMA πρέπει να είναι μέρος των φάσεων αρχιτεκτονικής και σχεδίασης, ώστε να μπορείτε να δημιουργήσετε την αποτυχία αποκατάστασης στο σύστημα από την αρχή.

Ακολουθεί η γενική διαδικασία για τη διεξαγωγή μιας FMA: 

1. Προσδιορισμός όλα τα στοιχεία του συστήματος. Συμπεριλάβετε εξωτερικές εξαρτήσεις, όπως υπηρεσίες παροχής ταυτότητας, τις υπηρεσίες τρίτων κατασκευαστών και ούτω καθεξής.   

2. Για κάθε στοιχείο, προσδιορίστε δυνητικά προβλήματα που μπορεί να προκύψουν. Ένα μεμονωμένο στοιχείο μπορεί να έχει περισσότερες από μία αποτυχία λειτουργία. Για παράδειγμα, πρέπει να λάβετε υπόψη αποτυχίες ανάγνωσης και γράψτε αποτυχίες ξεχωριστά, επειδή το μετριασμοί επίδραση και δυνατόν θα είναι διαφορετικό.

3. Χαρακτηρισμός κάθε κατάσταση λειτουργίας αποτυχίας σύμφωνα με τις συνολικές κινδύνου. Εξετάστε τους παρακάτω παράγοντες:  

    - Ποια είναι η πιθανότητα της αποτυχίας. Είναι σχετικά κοινές; Extrememly σπάνιων; Δεν χρειάζεται ακριβή αριθμούς. ο σκοπός είναι για να σας βοηθήσει κατάταξη την προτεραιότητα.

    - Ποιες είναι οι επιπτώσεις από την εφαρμογή, όσον αφορά τη διαθεσιμότητα, απώλεια δεδομένων, νομισματικά κόστους και επιχειρήσεις διαταραχή; 

4. Για κάθε λειτουργία αποτυχία, καθορίζουν πώς η εφαρμογή θα αποκρίνεται και ανάκτηση. Εξετάστε το ενδεχόμενο ισορροπιών όσον αφορά την πολυπλοκότητά κόστους και εφαρμογής.   

Ως σημείο εκκίνησης για τη διαδικασία FMA, αυτό το άρθρο περιέχει έναν κατάλογο πιθανές λειτουργίες αποτυχία και τους μετριασμούς. Τον κατάλογο είναι οργανωμένες ανά τεχνολογία ή Azure service, καθώς και μια γενική κατηγορία για τη σχεδίαση επίπεδο εφαρμογής. Δεν είναι εκτεταμένη τον κατάλογο, αλλά καλύπτει πολλές από τις βασικές Azure υπηρεσίες. 


## <a name="app-service"></a>Εφαρμογή υπηρεσίας

### <a name="app-service-app-shuts-down"></a>Εφαρμογή εφαρμογής υπηρεσίας τερματίζεται.

**Εντοπισμός**. Πιθανές αιτίες:

- Αναμενόμενη τερματισμού
    
    - Έναν τελεστή τερματισμό της εφαρμογής. Για παράδειγμα, με την πύλη Azure.

    - Η εφαρμογή έχει καταργηθεί επειδή είναι σε αδράνεια. (Μόνο αν η `Always On` η ρύθμιση είναι απενεργοποιημένη.)

- Μη αναμενόμενο τερματισμό

    - Η εφαρμογή παρουσιάζει σφάλμα.

    - Μια παρουσία Εικονική εφαρμογής υπηρεσίας δεν είναι διαθέσιμο.


Καταγραφή Application_End θα εντοπίζει τον τερματισμό τομέα εφαρμογής (απαλές διαδικασία σφάλμα) και να είναι ο μόνος τρόπος για να τραβήξετε την εφαρμογή τερματισμούς τομέα.

**Ανάκτηση**

- Εάν ο τερματισμός ήταν αναμενόμενο, χρησιμοποιήστε το συμβάν τερματισμού της εφαρμογής για να τερματίσετε ομαλά. Για παράδειγμα, στο ASP.NET, χρησιμοποιήστε το `Application_End` μέθοδο.

- Εάν η εφαρμογή δεν ήταν φόρτωσης ενώ είναι σε αδράνεια, γίνεται αυτόματα επανεκκίνηση στην επόμενη αίτηση. Ωστόσο, θα υπάρξουν "ψυχρές Έναρξη" κόστος. 

- Για να αποτρέψετε την εφαρμογή από την κατάργηση φόρτωσης ενώ είναι σε αδράνεια, ενεργοποιήστε το `Always On` τη ρύθμιση στο web app. Ανατρέξτε στο θέμα [Ρύθμιση παραμέτρων web apps στο Azure εφαρμογής υπηρεσίας][app-service-configure].

- Για να αποτρέψετε έναν τελεστή από τον τερματισμό της εφαρμογής, ορίστε μια κλειδαριά πόρων με `ReadOnly` επίπεδο. Ανατρέξτε στο θέμα [πόροι κλειδώματος με τη διαχείριση πόρων Azure][rm-locks].

- Εάν η εφαρμογή παρουσιάζει σφάλμα ή μια Εικονική εφαρμογής υπηρεσίας δεν είναι διαθέσιμη, εφαρμογής υπηρεσίας κάνει αυτόματα επανεκκίνηση της εφαρμογής. 


**Διαγνωστικά**. Αρχεία καταγραφής από την εφαρμογή και αρχεία καταγραφής του διακομιστή web. Ανατρέξτε στο θέμα [Ενεργοποίηση καταγραφής για τις εφαρμογές web στην υπηρεσία εφαρμογής Azure Διαγνωστικά][app-service-logging].


### <a name="a-particular-user-repeatedly-makes-bad-requests-or-overloads-the-system"></a>Ένας συγκεκριμένος χρήστης κάνει εσφαλμένες αιτήσεις επανειλημμένα ή υπερφορτώσεις του συστήματος. 

**Εντοπισμός**. Τον έλεγχο ταυτότητας χρηστών και συμπεριλάβετε το Αναγνωριστικό χρήστη σε αρχεία καταγραφής εφαρμογών.

**Ανάκτηση**

- Χρησιμοποιήστε τη [Διαχείριση API Azure] [ api-management] σε αιτήσεις επιτάχυνσης από το χρήστη. Ανατρέξτε στην ενότητα [για προχωρημένους αίτηση περιορισμού Azure API διαχείρισης][api-management-throttling]

- Αποκλεισμός χρήστη.

**Διαγνωστικά**. Συνδεθείτε όλες τις αιτήσεις ελέγχου ταυτότητας.


### <a name="a-bad-update-was-deployed"></a>Έχει αναπτυχθεί μια εσφαλμένη ενημερωμένη έκδοση.

**Εντοπισμός**. Παρακολουθεί την εύρυθμη λειτουργία της εφαρμογής μέσω της πύλης Azure (ανατρέξτε στο θέμα [επιδόσεις εφαρμογής web Azure οθόνη][app-insights-web-apps]) ή να υλοποιήσετε το [μοτίβο παρακολούθησης τελικού σημείου εύρυθμης λειτουργίας][health-endpoint-monitoring-pattern].

**Ανάκτηση**. Χρήση πολλών [υποδοχές ανάπτυξης] [ app-service-slots] και να επαναφέρετε την τελευταία έγκυρες ανάπτυξη. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [αρχιτεκτονική αναφοράς της εφαρμογής web βασικές][ra-web-apps-basic].


## <a name="azure-active-directory"></a>Καταλόγου Azure Active Directory

### <a name="openid-connect-oidc-authentication-fails"></a>Ο έλεγχος ταυτότητας σύνδεση OpenID (OIDC) αποτυγχάνει.

**Εντοπισμός**. Αποτυχία πιθανές λειτουργίες περιλαμβάνουν τα εξής:

1. Azure AD δεν είναι διαθέσιμη ή δεν μπορείτε να αποκτήσετε πρόσβαση εξαιτίας ενός προβλήματος δικτύου. Ανακατεύθυνση στο τελικό σημείο ελέγχου ταυτότητας ενδέχεται να αποτυγχάνει και το ενδιάμεσο OIDC δημιουργεί μια εξαίρεση.
2. Δεν υπάρχει Azure AD μισθωτή. Ανακατεύθυνση στο τελικό σημείο ελέγχου ταυτότητας επιστρέφει έναν κωδικό σφάλματος HTTP και το ενδιάμεσο OIDC δημιουργεί μια εξαίρεση.
3. Δεν είναι δυνατό να ελέγχουν την ταυτότητα χρήστη. Δεν υπάρχει στρατηγική εντοπισμού είναι είναι απαραίτητο. Azure AD χειρίζεται αποτυχίες σύνδεσης.

**Ανάκτηση**

1. Ενημερωθείτε ανεπίλυτη εξαιρέσεις από το ενδιάμεσο.
2. Χειρισμός `AuthenticationFailed` συμβάντα.
3. Ανακατευθύνετε το χρήστη σε μια σελίδα σφάλματος.
4. Επαναλήψεις χρήστη.


## <a name="azure-search"></a>Azure αναζήτησης

### <a name="writing-data-to-azure-search-fails"></a>Εγγραφή δεδομένων σε αναζήτηση Azure αποτυγχάνει.

**Εντοπισμός**. Ενημερωθείτε `Microsoft.Rest.Azure.CloudException` σφάλματα.

**Ανάκτηση**

Η [Αναζήτηση .NET SDK] [ search-sdk] επαναλήψεις αυτόματα μετά από μεταβατικές αποτυχίες. Τυχόν εξαιρέσεις που ανακύπτουν από το πρόγραμμα-πελάτη SDK πρέπει να αντιμετωπίζεται ως μη μεταβατική σφάλματα.

Χρησιμοποιεί την προεπιλεγμένη πολιτική "Επανάληψη" εκθετική πίσω απενεργοποίηση. Για να χρησιμοποιήσετε μια πολιτική διαφορετικό "Επανάληψη", καλέστε `SetRetryPolicy` στην το `SearchIndexClient` ή `SearchServiceClient` τάξης. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Αυτόματη επαναλήψεις][auto-rest-client-retry].

**Διαγνωστικά**. Χρήση [αναζήτησης κίνηση ανάλυση][search-analytics].


### <a name="reading-data-from-azure-search-fails"></a>Ανάγνωση δεδομένων από την αναζήτηση Azure αποτυγχάνει.

**Εντοπισμός**. Ενημερωθείτε `Microsoft.Rest.Azure.CloudException` σφάλματα.

**Ανάκτηση**

Η [Αναζήτηση .NET SDK] [ search-sdk] επαναλήψεις αυτόματα μετά από μεταβατικές αποτυχίες. Τυχόν εξαιρέσεις που ανακύπτουν από το πρόγραμμα-πελάτη SDK πρέπει να αντιμετωπίζεται ως μη μεταβατική σφάλματα.

Χρησιμοποιεί την προεπιλεγμένη πολιτική "Επανάληψη" εκθετική πίσω απενεργοποίηση. Για να χρησιμοποιήσετε μια πολιτική διαφορετικό "Επανάληψη", καλέστε `SetRetryPolicy` στην το `SearchIndexClient` ή `SearchServiceClient` τάξης. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Αυτόματη επαναλήψεις][auto-rest-client-retry].

**Διαγνωστικά**. Χρήση [αναζήτησης κίνηση ανάλυση][search-analytics].



## <a name="cassandra"></a>Cassandra


### <a name="reading-or-writing-to-a-node-fails"></a>Ανάγνωση ή την εγγραφή σε έναν κόμβο αποτυγχάνει.

**Εντοπισμός**. Αντιμετωπίσει την εξαίρεση. Για προγράμματα-πελάτες του .NET, θα είναι συνήθως `System.Web.HttpException`. Άλλο πρόγραμμα-πελάτη μπορεί να έχει άλλους τύπους εξαίρεσης.  Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Cassandra χειρισμού σφαλμάτων έτοιμοι προς τα δεξιά](http://www.datastax.com/dev/blog/cassandra-error-handling-done-right).

**Ανάκτηση**

- Κάθε [υπολογιστής-πελάτης Cassandra](https://wiki.apache.org/cassandra/ClientOptions) έχει τη δική του "Επανάληψη" πολιτικές και δυνατότητες. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Cassandra χειρισμού σφαλμάτων έτοιμοι προς τα δεξιά][cassandra-error-handling].
- Χρησιμοποιήστε μια rack υπόψη ανάπτυξη, με δεδομένα κόμβους κατανέμεται τους τομείς σφαλμάτων.
- Ανάπτυξη σε πολλές περιοχές με την τοπική απαρτίας συνέπειας. Σε περίπτωση μη μεταβατική διακοπής, αποτύχει επάνω από μια άλλη περιοχή.

**Διαγνωστικά**. Αρχεία καταγραφής εφαρμογών


## <a name="cloud-service"></a>Υπηρεσία στο cloud

### <a name="web-or-worker-roles-are-unexpectedlybeing-shut-down"></a>Ρόλοι Web ή εργαζόμενου απροσδόκητα τερματίζονται.

**Εντοπισμός**. Το [RoleEnvironment.Stopping] [ RoleEnvironment.Stopping] ενεργοποιείται συμβάν.

**Ανάκτηση**. Παράκαμψη του [RoleEntryPoint.OnStop] [ RoleEntryPoint.OnStop] μέθοδος για την εκκαθάριση ομαλά. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Το δεξιά τρόπος για να χειριστείτε συμβάντα OnStop Azure] [ onstop-events] (ιστολόγιο).


## <a name="documentdb"></a>DocumentDB

### <a name="reading-data-from-documentdb-fails"></a>Ανάγνωση δεδομένων από DocumentDB αποτυγχάνει.

**Εντοπισμός**. Ενημερωθείτε `System.Net.Http.HttpRequestException` ή `Microsoft.Azure.Documents.DocumentClientException`. 

**Ανάκτηση**

- Το SDK επαναλήψεις αυτόματα αποτυχημένων προσπαθειών. Για να ορίσετε τον αριθμό των επαναλήψεων και το χρόνο μέγιστο αναμονής, ρυθμίστε τις παραμέτρους `ConnectionPolicy.RetryOptions`. Εξαιρέσεις που εμφανίζει το πρόγραμμα-πελάτη είναι είτε πέρα από την πολιτική "Επανάληψη" ή δεν είναι μεταβατικές σφάλματα. 

- Εάν η DocumentDB throttles το πρόγραμμα-πελάτη, επιστρέφει ένα σφάλμα HTTP 429. Μεταβίβαση ελέγχου ο κωδικός κατάστασης του `DocumentClientException`. Εάν λαμβάνετε σφάλμα 429 με συνέπεια, εξετάστε το ενδεχόμενο αύξηση της τιμής μετάδοσης της συλλογής DocumentDB.

- Αναπαραγωγή της βάσης δεδομένων DocumentDB σε δύο ή περισσότερες περιοχές. Όλα τα αντίγραφα είναι δυνατή η ανάγνωση. Χρησιμοποιώντας το πρόγραμμα-πελάτη SDK, καθορίστε το `PreferredLocations` παραμέτρου. Αυτή είναι μια ταξινομημένη λίστα Azure περιοχές. Όλα διαβάζει θα αποστέλλονται στην πρώτη διαθέσιμη περιοχή στη λίστα. Εάν η αίτηση αποτύχει, ο υπολογιστής-πελάτης θα επιχειρήσει τις άλλες περιοχές στη λίστα, με τη σειρά. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [αναπτυσσόμενες με λογαριασμούς DocumentDB πολλών περιοχών][docdb-multi-region].

**Διαγνωστικά**. Συνδεθείτε όλα τα σφάλματα στην πλευρά του προγράμματος-πελάτη.


### <a name="writing-data-to-documentdb-fails"></a>Εγγραφή δεδομένων σε DocumentDB αποτυγχάνει.

**Εντοπισμός**. Ενημερωθείτε `System.Net.Http.HttpRequestException` ή `Microsoft.Azure.Documents.DocumentClientException`. 

**Ανάκτηση**

- Το SDK επαναλήψεις αυτόματα αποτυχημένων προσπαθειών. Για να ορίσετε τον αριθμό των επαναλήψεων και το χρόνο μέγιστο αναμονής, ρυθμίστε τις παραμέτρους `ConnectionPolicy.RetryOptions`. Εξαιρέσεις που εμφανίζει το πρόγραμμα-πελάτη είναι είτε πέρα από την πολιτική "Επανάληψη" ή δεν είναι μεταβατικές σφάλματα. 

- Εάν η DocumentDB throttles το πρόγραμμα-πελάτη, επιστρέφει ένα σφάλμα HTTP 429. Μεταβίβαση ελέγχου ο κωδικός κατάστασης του `DocumentClientException`. Εάν λαμβάνετε σφάλμα 429 με συνέπεια, εξετάστε το ενδεχόμενο αύξηση της τιμής μετάδοσης της συλλογής DocumentDB.

- Αναπαραγωγή της βάσης δεδομένων DocumentDB σε δύο ή περισσότερες περιοχές. Εάν αποτύχει η κύρια περιοχή, θα προωθηθεί για να γράψετε μια άλλη περιοχή. Μπορείτε επίσης να ενεργοποιήσετε ανακατεύθυνσης με μη αυτόματο τρόπο. Το SDK κάνει αυτόματο εντοπισμό και δρομολόγηση, ώστε να κώδικα της εφαρμογής εξακολουθούν να λειτουργούν μετά ανακατεύθυνσης. Κατά την περίοδο ανακατεύθυνσης (συνήθως λεπτά), λειτουργίες εγγραφής θα έχουν υψηλότερη λανθάνοντος χρόνου, με το SDK εντοπίζει τη νέα περιοχή εγγραφής. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [αναπτυσσόμενες με λογαριασμούς DocumentDB πολλών περιοχών][docdb-multi-region].

- Ως επαναφορά, παραμένει το έγγραφο σε μια ουρά δημιουργίας αντιγράφων ασφαλείας και επεξεργαστείτε ουρά αργότερα.

**Διαγνωστικά**. Συνδεθείτε όλα τα σφάλματα στην πλευρά του προγράμματος-πελάτη.


## <a name="elasticsearch"></a>Elasticsearch

### <a name="reading-data-from-elasticsearch-fails"></a>Ανάγνωση δεδομένων από Elasticsearch αποτυγχάνει.

**Εντοπισμός**. Ενημερωθείτε την κατάλληλη εξαίρεση για το συγκεκριμένο [πρόγραμμα-πελάτη Elasticsearch] [ elasticsearch-client] που χρησιμοποιείται. 

**Ανάκτηση**

- Χρησιμοποιήστε το μηχανισμό "Επανάληψη". Κάθε υπολογιστής-πελάτης διαθέτει δικό του πολιτικές "Επανάληψη". 

- Ανάπτυξη πολλούς κόμβους Elasticsearch και χρησιμοποιήστε αναπαραγωγής για υψηλή διαθεσιμότητα.

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Elasticsearch εκτελείται σε Azure][elasticsearch-azure].

**Διαγνωστικά**. Μπορείτε να χρησιμοποιήσετε εργαλεία παρακολούθησης για Elasticsearch ή να συνδεθείτε όλα τα σφάλματα στην πλευρά του προγράμματος-πελάτη με το φορτίο. Ανατρέξτε στην ενότητα 'Παρακολούθηση' σε [Elasticsearch εκτελείται σε Azure][elasticsearch-azure].


### <a name="writing-data-to-elasticsearch-fails"></a>Εγγραφή δεδομένων σε Elasticsearch αποτυγχάνει.

**Εντοπισμός**. Ενημερωθείτε την κατάλληλη εξαίρεση για το συγκεκριμένο [πρόγραμμα-πελάτη Elasticsearch] [ elasticsearch-client] που χρησιμοποιείται.  

**Ανάκτηση**

- Χρησιμοποιήστε το μηχανισμό "Επανάληψη". Κάθε υπολογιστής-πελάτης διαθέτει δικό του πολιτικές "Επανάληψη". 
 
- Εάν η εφαρμογή μπορεί να αποδεχτεί τις επιπέδου μειωμένη συνέπειας, εξετάστε το ενδεχόμενο γραφής με `write_consistency` τη ρύθμιση της `quorum`.

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Elasticsearch εκτελείται σε Azure][elasticsearch-azure].

**Διαγνωστικά**. Μπορείτε να χρησιμοποιήσετε εργαλεία παρακολούθησης για Elasticsearch ή να συνδεθείτε όλα τα σφάλματα στην πλευρά του προγράμματος-πελάτη με το φορτίο. Ανατρέξτε στην ενότητα 'Παρακολούθηση' σε [Elasticsearch εκτελείται σε Azure][elasticsearch-azure].


## <a name="queue-storage"></a>Ουρά χώρου αποθήκευσης

### <a name="writing-a-message-to-azure-queue-storage-fails-consistently"></a>Σύνταξη ενός μηνύματος με συνέπεια σε ουρά Azure αποτυγχάνει χώρου αποθήκευσης.

**Εντοπισμός**. Μετά από *N* προσπάθειες επανάληψης, η λειτουργία εγγραφής εξακολουθεί να αποτυγχάνει.

**Ανάκτηση**

- Αποθήκευση των δεδομένων σε μια τοπική μνήμη cache και προώθηση οι εγγραφές με το χώρο αποθήκευσης αργότερα, όταν η υπηρεσία θα είναι διαθέσιμο.
- Δημιουργήστε μια δευτερεύουσα ουρά και γραφής στην ουρά αν η κύρια ουρά δεν είναι διαθέσιμη.

**Διαγνωστικά**. Χρήση [μετρικά αποθήκευσης][storage-metrics].


### <a name="the-application-cannot-process-a-particular-message-from-the-queue"></a>Η εφαρμογή δεν μπορεί να επεξεργαστεί ένα συγκεκριμένο μήνυμα από την ουρά. 

**Εντοπισμός**. Εφαρμογή συγκεκριμένα. Για παράδειγμα, το μήνυμα περιέχει μη έγκυρα δεδομένα ή της εταιρικής λογικής αποτυγχάνει για κάποιο λόγο. 

**Ανάκτηση**

Μετακίνηση του μηνύματος σε μια ξεχωριστή ουρά. Εκτελέστε μια ξεχωριστή διεργασία να εξετάσετε τα μηνύματα σε αυτήν την ουρά.

Εξετάστε το ενδεχόμενο χρήσης Azure Service Bus μηνυμάτων ουρές, που παρέχει μια [ουρά αδρανούς] [ sb-dead-letter-queue] λειτουργίες για το σκοπό.

Σημείωση: Εάν χρησιμοποιείτε ουρές χώρου αποθήκευσης με WebJobs, το SDK WebJobs παρέχει ενσωματωμένη τον χειρισμό μηνυμάτων. Δείτε [πώς μπορείτε να χρησιμοποιήσετε χώρο αποθήκευσης Azure ουρά με το SDK WebJobs][sb-poison-message].

**Διαγνωστικά**. Χρησιμοποιήστε καταγραφή από την εφαρμογή.


## <a name="redis-cache"></a>Redis Cache

### <a name="reading-from-the-cache-fails"></a>Ανάγνωση από το cache αποτυγχάνει.

**Εντοπισμός**. Ενημερωθείτε `StackExchange.Redis.RedisConnectionException`.

**Ανάκτηση**

1. Επανάληψη σε μεταβατικές αποτυχίες. Azure Redis cache υποστηρίζει ενσωματωμένη "Επανάληψη" μέσω ανατρέξτε στο θέμα [οδηγίες "Επανάληψη" Redis Cache][redis-retry].
2. Χειρισμός μη μεταβατική αποτυχίες ως ένα αποτυχημένων cache και επιστροφή στην αρχική προέλευση δεδομένων.

**Διαγνωστικά**. Χρησιμοποιήστε [Διαγνωστικά του Redis Cache][redis-monitor].


### <a name="writing-to-the-cache-fails"></a>Εγγραφή στο cache αποτυγχάνει.

**Εντοπισμός**. Ενημερωθείτε `StackExchange.Redis.RedisConnectionException`.

**Ανάκτηση**

1. Επανάληψη σε μεταβατικές αποτυχίες. Azure Redis cache υποστηρίζει ενσωματωμένη "Επανάληψη" μέσω ανατρέξτε στο θέμα [οδηγίες "Επανάληψη" Redis Cache][redis-retry].
2. Εάν το σφάλμα είναι μη μεταβατική, παραβλέψτε το και σας επιτρέπουν να άλλες συναλλαγές εγγραφής στο cache αργότερα.

**Διαγνωστικά**. Χρησιμοποιήστε [Διαγνωστικά του Redis Cache][redis-monitor].


## <a name="sql-database"></a>Βάση δεδομένων SQL

### <a name="cannot-connect-to-the-database-in-the-primary-region"></a>Δεν είναι δυνατή η σύνδεση με τη βάση δεδομένων στην κύρια περιοχή.

**Εντοπισμός**. Σύνδεση αποτυγχάνει.

**Ανάκτηση**

Προϋπόθεση: Η βάση δεδομένων πρέπει να ρυθμιστεί για την ενεργή παν-αναπαραγωγή. Ανατρέξτε στο θέμα [SQL αναπαραγωγή βάσης δεδομένων Active παν -][sql-db-replication].

- Για ερωτήματα, διαβάστε από μια δευτερεύουσα ρεπλίκα. 
- Εισάγει και ενημερωμένων εκδόσεων, με μη αυτόματο τρόπο ανακατευθύνει σε μια δευτερεύουσα ρεπλίκα. Ανατρέξτε στο θέμα [Προετοιμασία προγραμματισμένες ή μη προγραμματισμένες ανακατεύθυνσης για βάση δεδομένων SQL Azure][sql-db-failover].

Στη ρεπλίκα χρησιμοποιεί μια συμβολοσειρά σύνδεσης διαφορετικά, έτσι θα πρέπει να ενημερώσετε τη συμβολοσειρά σύνδεσης στην εφαρμογή σας.


### <a name="client-runs-out-of-connections-in-the-connection-pool"></a>Πρόγραμμα-πελάτη που εκτελείται από συνδέσεις στο χώρο συγκέντρωσης σύνδεσης.

**Εντοπισμός**. Ενημερωθείτε `System.InvalidOperationException` σφάλματα. 

**Ανάκτηση**

- Επανάληψη της λειτουργίας.
- Ως ένα σχέδιο μετριασμού, απομόνωση τα σύνολα σύνδεσης για κάθε περίπτωσης χρήσης, έτσι ώστε μία περίπτωσης χρήσης δεν μπορεί να στις όλες τις συνδέσεις.
- Αύξηση του χώρους συγκέντρωσης μέγιστη ταχύτητα σύνδεσης.

**Διαγνωστικά**. Εφαρμογή αρχείων καταγραφής.


### <a name="database-connection-limit-is-reached"></a>Βάση δεδομένων σύνδεσης όριο. 

**Εντοπισμός**. Βάση δεδομένων SQL του Azure περιορίζει τον αριθμό των εργαζομένων ταυτόχρονες, συνδέσεις και περιόδους λειτουργίας. Τα όρια εξαρτώνται από το επίπεδο υπηρεσιών. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [όρια πόρων βάση δεδομένων SQL Azure][sql-db-limits].

Για να εντοπίσετε αυτά τα σφάλματα, να ενημερωθείτε `System.Data.SqlClient.SqlException` και ελέγξτε την τιμή της `SqlException.Number` για τον κωδικό σφάλματος SQL. Για μια λίστα με τους κωδικούς σφάλματος σχετικά, ανατρέξτε στο θέμα [τους κωδικούς σφάλματος SQL για εφαρμογές προγράμματος-πελάτη βάσης δεδομένων SQL: σφάλμα σύνδεσης και άλλα θέματα της βάσης δεδομένων][sql-db-errors].

**Ανάκτηση**. Αυτά τα σφάλματα θεωρούνται μεταβατικές, ώστε να γίνεται επανάληψη μπορεί να επιλύσει το πρόβλημα. Εάν πατήσετε με συνέπεια αυτά τα σφάλματα, εξετάστε το ενδεχόμενο κλιμάκωση της βάσης δεδομένων.

**Διαγνωστικά**. -Το [sys.event_log] [ sys.event_log] ερώτημα επιστρέφει συνδέσεις επιτυχής βάσεων δεδομένων, αποτυχίες σύνδεσης και προβλήματα.

- Δημιουργία μιας [ειδοποίησης κανόνα] [ azure-alerts] για απέτυχε συνδέσεις.

- Ενεργοποιήστε [τον έλεγχο της βάσης δεδομένων SQL] [ sql-db-audit] και έλεγχος για αποτυχίας συνδέσεις.


## <a name="service-bus-messaging"></a>Λειτουργία Bus μηνυμάτων

### <a name="reading-a-message-from-a-service-bus-queue-fails"></a>Ανάγνωση ενός μηνύματος από μια υπηρεσία Bus ουρά αποτυγχάνει.

**Εντοπισμός**. Ενημερωθείτε εξαιρέσεις από το πρόγραμμα-πελάτη SDK. Η βασική κλάση για εξαιρέσεις Bus υπηρεσίας είναι [MessagingException][sb-messagingexception-class]. Εάν το σφάλμα είναι μεταβατικές, το `IsTransient` ιδιότητα είναι true. 

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Bus υπηρεσία ανταλλαγής μηνυμάτων εξαιρέσεις][sb-messaging-exceptions].

**Ανάκτηση**

1. Επανάληψη σε μεταβατικές αποτυχίες. Ανατρέξτε στο θέμα [Υπηρεσία Bus επανάληψης οδηγίες][sb-retry].

2. Τα μηνύματα που δεν είναι δυνατό να παραδοθεί στον παραλήπτη οποιαδήποτε τοποθετούνται σε *ουρά νεκρού γράμματα*. Χρησιμοποιήστε αυτήν την ουρά για να δείτε ποια μηνύματα δεν ήταν δυνατή η λήψη. Δεν υπάρχει καμία αυτόματη εκκαθάριση της ουράς νεκρού γράμματα. Τα μηνύματα παραμένουν εκεί μέχρι να τις ανακτήσετε ρητά. Ανατρέξτε στο θέμα [Επισκόπηση της υπηρεσίας Bus νεκρού γράμματα ουρές][sb-dead-letter-queue].


### <a name="writing-a-message-to-a-service-bus-queue-fails"></a>Σύνταξη ενός μηνύματος σε μια υπηρεσία Bus ουρά αποτυγχάνει.

**Εντοπισμός**. Ενημερωθείτε εξαιρέσεις από το πρόγραμμα-πελάτη SDK. Η βασική κλάση για εξαιρέσεις Bus υπηρεσίας είναι [MessagingException][sb-messagingexception-class]. Εάν το σφάλμα είναι μεταβατικές, το `IsTransient` ιδιότητα είναι true. 

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Bus υπηρεσία ανταλλαγής μηνυμάτων εξαιρέσεις][sb-messaging-exceptions].

**Ανάκτηση**

1. Ο υπολογιστής-πελάτης υπηρεσία Bus επαναλήψεις αυτόματα μετά από μεταβατικές σφάλματα. Από προεπιλογή, αυτό χρησιμοποιεί εκθετική πίσω απενεργοποίηση. Μετά την καταμέτρηση του μέγιστου αριθμού επαναλήψεων ή τον μέγιστο χρονικό όριο, ο υπολογιστής-πελάτης δημιουργεί μια εξαίρεση. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Υπηρεσία Bus επανάληψης οδηγίες][sb-retry].

2. Εάν υπάρχει υπέρβαση του ορίου ουρά, ο υπολογιστής-πελάτης παρουσιάζει [QuotaExceededException][QuotaExceededException]. Το μήνυμα εξαίρεσης παρέχει περισσότερες λεπτομέρειες. Στραγγίζεται ορισμένα μηνύματα από την ουρά πριν να επιχειρήσετε ξανά, και μπορείτε να χρησιμοποιήσετε το διακόπτη κυκλώματος μοτίβο για να αποφύγετε συνέχειας επαναλήψεις κατά την υπέρβαση του ορίου. Επίσης, βεβαιωθείτε ότι η ιδιότητα [BrokeredMessage.TimeToLive] δεν έχει οριστεί πολύ υψηλή. 

3. Μέσα σε μια περιοχή, μπορούν να βελτιωθούν ανοχή χρησιμοποιώντας [διαμερίσματα ουρές ή τα θέματα][sb-partition]. Δεν έχουν δημιουργηθεί διαμερίσματα ουρά ή το θέμα έχει αντιστοιχιστεί σε ένα χώρο αποθήκευσης μηνυμάτων. Εάν αυτός ο χώρος αποθήκευσης μηνυμάτων δεν είναι διαθέσιμη, όλες οι λειτουργίες σε αυτήν τη ουρά ή το θέμα θα αποτύχει. Διαμερίσματα ουρά ή το θέμα έχει διαμερίσματα σε πολλούς χώρους αποθήκευσης μηνυμάτων. 

4. Για πρόσθετες ανοχή, δημιουργήστε δύο πεδία ονομάτων υπηρεσίας Bus σε διαφορετικές περιοχές και αναπαραγάγετε τα μηνύματα. Μπορείτε να χρησιμοποιήσετε ενεργό αναπαραγωγής ή παθητικές αναπαραγωγής.

    - Ενεργό αναπαραγωγής: Ο υπολογιστής-πελάτης στέλνει κάθε μήνυμα σε δύο ουρές. Το ακουστικό ακρόασης για δύο ουρές. Προσθήκη ετικετών σε μηνύματα με ένα μοναδικό αναγνωριστικό, ώστε ο υπολογιστής-πελάτης να απορρίψετε διπλότυπα μηνύματα.

    - Παθητικές αναπαραγωγής: Ο υπολογιστής-πελάτης στέλνει το μήνυμα σε μία ουρά. Εάν υπάρχει ένα σφάλμα, ο υπολογιστής-πελάτης εμπίπτει πίσω στην ουρά άλλων. Το ακουστικό ακρόασης για δύο ουρές. Αυτή η προσέγγιση μειώνει τον αριθμό των διπλότυπων μηνύματα που αποστέλλονται. Ωστόσο, ο παραλήπτης εξακολουθεί να πρέπει να χειρίζεται τα διπλότυπα μηνύματα.

    Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [GeoReplication δείγμα] [ sb-georeplication-sample] και [βέλτιστες πρακτικές για μονωτικά εφαρμογές σε σχέση με την υπηρεσία Bus διακοπές και καταστροφές][sb-outages].


### <a name="duplicate-message"></a>Αναπαραγωγή μηνύματος.

**Εντοπισμός**. Εξετάστε το `MessageId` και `DeliveryCount` ιδιότητες του μηνύματος.

**Ανάκτηση**

- Εάν είναι δυνατόν, σχεδιάστε το μήνυμά σας οι επεξεργασίες να idempotent. Διαφορετικά, αποθήκευση μηνυμάτων αναγνωριστικά των μηνυμάτων που βρίσκονται ήδη επεξεργασία και ελέγξτε το Αναγνωριστικό πριν από την επεξεργασία ενός μηνύματος.

- Ενεργοποίηση εντοπισμού διπλοτύπων, δημιουργώντας ουρά με `RequiresDuplicateDetection` οριστεί στην τιμή true. Με αυτήν τη ρύθμιση, υπηρεσία Bus διαγράφει αυτόματα τα μηνύματα που αποστέλλονται με το ίδιο `MessageId` ως προηγούμενου μηνύματος.  Λάβετε υπόψη τα εξής:

    -  Αυτή η ρύθμιση αποτρέπει τη θέση της σε ουρά διπλότυπων μηνυμάτων. Δεν εμποδίζει μια ακουστικό επεξεργασίας περισσότερες από μία φορές το ίδιο μήνυμα.

    - Εντοπισμός διπλοτύπων έχει ένα παράθυρο του χρόνου. Εάν ένα διπλότυπο αποστέλλεται πέρα από αυτό το παράθυρο, δεν θα εντοπίζονται.

**Διαγνωστικά**. Διπλή μηνύματα καταγραφής.


### <a name="the-application-cannot-process-a-particular-message-from-the-queue"></a>Η εφαρμογή δεν μπορεί να επεξεργαστεί ένα συγκεκριμένο μήνυμα από την ουρά. 

**Εντοπισμός**. Εφαρμογή συγκεκριμένα. Για παράδειγμα, το μήνυμα περιέχει μη έγκυρα δεδομένα ή της εταιρικής λογικής αποτυγχάνει για κάποιο λόγο. 

**Ανάκτηση**

Υπάρχουν δύο λειτουργίες αποτυχία πρέπει να λάβετε υπόψη. 

- Το ακουστικό εντοπίζει την αποτυχία. Σε αυτήν την περίπτωση, μπορείτε να μετακινήσετε το μήνυμα στην ουρά νεκρού γράμματα. Αργότερα, εκτελέστε μια ξεχωριστή διεργασία να εξετάσετε τα μηνύματα στην ουρά νεκρού γράμματα.

- Το ακουστικό αποτυγχάνει στο μέσο επεξεργασίας του μηνύματος &mdash; για παράδειγμα, λόγω μια ανεπίλυτη εξαίρεση. Για να χειριστείτε αυτήν την περίπτωση, χρησιμοποιήστε `PeekLock` λειτουργία. Σε αυτήν τη λειτουργία, εάν λήξει το κλείδωμα, το μήνυμα θα είναι διαθέσιμο σε άλλα δέκτες. Εάν το μήνυμα υπερβαίνει το πλήθος μέγιστο παράδοσης ή το χρόνο ζωής, το μήνυμα μετακινείται αυτόματα στην ουρά νεκρού γράμματα.

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Επισκόπηση της υπηρεσίας Bus νεκρού γράμματα ουρές][sb-dead-letter-queue].

**Διαγνωστικά**. Κάθε φορά που η εφαρμογή μετακινεί ένα μήνυμα στην ουρά νεκρού γράμματα, η εγγραφή συμβάντος στα αρχεία καταγραφής εφαρμογών.


## <a name="service-fabric"></a>Υπηρεσία ύφασμα

### <a name="a-request-to-a-service-fails"></a>Μια αίτηση για μια υπηρεσία αποτυγχάνει.

**Εντοπισμός**. Η υπηρεσία επιστρέφει ένα σφάλμα.

**Ανάκτηση**

- Εντοπίστε ένα διακομιστή μεσολάβησης ξανά (`ServiceProxy` ή `ActorProxy`) και καλείτε τη μέθοδο υπηρεσίας/παράγοντα ξανά. 

- **Υπηρεσία κατάστασης**. Αναδίπλωση λειτουργίες σε αξιόπιστη συλλογές σε μια συναλλαγή. Εάν υπάρχει ένα σφάλμα, η συναλλαγή θα γίνει επαναφορά. Την αίτηση, εάν τα μηνύματα μεταφέρονται από μια ουρά, θα γίνει επεξεργασία ξανά. 
 
- **Χωρίς κατάσταση υπηρεσίας**. Εάν η υπηρεσία δεν επιλυθεί δεδομένων σε ένα εξωτερικό χώρο αποθήκευσης, όλες οι λειτουργίες πρέπει να είστε idempotent.


**Διαγνωστικά**. Αρχείο καταγραφής της εφαρμογής

### <a name="service-fabric-node-is-shut-down"></a>Υπηρεσία ύφασμα κόμβο τερματίζεται.

**Εντοπισμός**. Ένα διακριτικό ακύρωσης που του μεταβιβάστηκε η υπηρεσία `RunAsync` μέθοδο. Υπηρεσία ύφασμα ακυρώνει την εργασία πριν να τερματίσετε τον κόμβο.

**Ανάκτηση**. Χρησιμοποιήστε το διακριτικό ακύρωσης για τον εντοπισμό τερματισμού. Όταν υφάσματος υπηρεσίας ζητά ακύρωσης, λήξη οποιαδήποτε εργασία και έξοδος από το `RunAsync` συντομότερο δυνατό.

**Διαγνωστικά**. Αρχεία καταγραφής εφαρμογών


## <a name="storage"></a>Χώρος αποθήκευσης

### <a name="writing-data-to-azure-storage-fails"></a>Εγγραφή δεδομένων με το χώρο αποθήκευσης Azure αποτυγχάνει

**Εντοπισμός**. Ο υπολογιστής-πελάτης λαμβάνει σφάλματα κατά την εγγραφή.

**Ανάκτηση**

1. Επανάληψη της λειτουργίας, για να ανακτήσετε από μεταβατικές αποτυχίες. Η [Επανάληψη πολιτικής] [ Storage.RetryPolicies] στο πρόγραμμα-πελάτη SDK χειρίζεται αυτό αυτόματα.
2. Υλοποίηση το διακόπτη κυκλώματος μοτίβο για να αποφύγετε την υπερβολική χώρου αποθήκευσης.
3. Εάν N προσπάθειες αποτύχει, εκτελέστε μια φυσιολογική επιστροφή. Για παράδειγμα:

    - Αποθήκευση των δεδομένων σε μια τοπική μνήμη cache και προώθηση οι εγγραφές με το χώρο αποθήκευσης αργότερα, όταν η υπηρεσία θα είναι διαθέσιμο.
    - Εάν η ενέργεια εγγραφής ήταν σε συναλλαγών εμβέλεια, αποζημιώσει συναλλαγή.

**Διαγνωστικά**. Χρήση [μετρικά αποθήκευσης][storage-metrics].


### <a name="reading-data-from-azure-storage-fails"></a>Ανάγνωση δεδομένων από το χώρο αποθήκευσης Azure αποτυγχάνει.

**Εντοπισμός**. Ο υπολογιστής-πελάτης λαμβάνει σφάλματα κατά την ανάγνωση.

**Ανάκτηση**

1. Επανάληψη της λειτουργίας, για να ανακτήσετε από μεταβατικές αποτυχίες. Η [Επανάληψη πολιτικής] [ Storage.RetryPolicies] στο πρόγραμμα-πελάτη SDK χειρίζεται αυτό αυτόματα.
2. Για το χώρο αποθήκευσης RA Εξοπλισμό, εάν αποτύχει η ανάγνωση από το κύριο τελικό σημείο, δοκιμάστε να ανάγνωσης από το δευτερεύον τελικό σημείο. Το πρόγραμμα-πελάτη SDK μπορεί να αντιμετωπίσετε αυτό το ζήτημα αυτόματα. Ανατρέξτε στο θέμα [αναπαραγωγή αποθήκευσης Azure][storage-replication].
3. Εάν *N* προσπάθειες αποτύχει, λαμβάνουν μια εναλλακτική ενέργεια για να μειώσει ομαλά. Για παράδειγμα, εάν μια εικόνα του προϊόντος δεν μπορεί να ανακτηθεί από χώρο αποθήκευσης, εμφανίζεται ένα γενικό σύμβολο κράτησης θέσης εικόνας.

**Διαγνωστικά**. Χρήση [μετρικά αποθήκευσης][storage-metrics].


## <a name="virtual-machine"></a>Εικονική μηχανή

### <a name="connection-to-a-backend-vm-fails"></a>Σύνδεση σε έναν υπολογιστή στο παρασκήνιο Εικονική αποτυγχάνει.

**Εντοπισμός**. Σφάλματα σύνδεσης δικτύου.

**Ανάκτηση**

- Ανάπτυξη ΣΠΣ τουλάχιστον δύο παρασκηνίου σε ένα σύνολο διαθεσιμότητα, πίσω από μια μονάδα εξισορρόπησης φόρτου.

- Εάν το σφάλμα σύνδεσης είναι μεταβατικές, μερικές φορές TCP θα με επιτυχία Επανάληψη αποστολής του μηνύματος. 

- Εφαρμόσετε μια πολιτική "Επανάληψη" στην εφαρμογή. 

- Για μόνιμη ή μη-μεταβατικές σφάλματα, υλοποίηση ο [διακόπτης κυκλώματος] [ circuit-breaker] μοτίβο.

- Εάν η κλήση Εικονική υπερβαίνει το όριο εξόδου του δικτύου, εξερχομένων ουρά θα Συμπλήρωση προς τα επάνω. Εάν η ουρά εξερχομένων είναι πλήρης με συνέπεια, εξετάστε το ενδεχόμενο κλίμακα εκτός. 

**Διαγνωστικά**. Αρχείο καταγραφής συμβάντων στα όρια των υπηρεσιών.

### <a name="vm-instance-becomes-unavailable-or-unhealthy"></a>Εικονική παρουσία θα είναι διαθέσιμες ή κατεστραμμένες.

**Εντοπισμός**. Ρύθμιση παραμέτρων μια μονάδα εξισορρόπησης φόρτου [Δοκιμή εύρυθμης λειτουργίας του] [ lb-probe] που σήματα, εάν η παρουσία Εικονική είναι σε καλή κατάσταση. Η δοκιμή του πρέπει να ελέγξετε εάν κρίσιμες συναρτήσεις απαντάτε σωστά. 

**Ανάκτηση**. Για κάθε επίπεδο εφαρμογής, θέσετε πολλές παρουσίες Εικονική το ίδιο σύνολο διαθεσιμότητα και τοποθετήστε μια μονάδα εξισορρόπησης φόρτου μπροστά από το ΣΠΣ. Εάν αποτύχει η δοκιμή του εύρυθμης λειτουργίας, την εξισορρόπηση φόρτου διακόπτει την αποστολή νέες συνδέσεις για να την παρουσία κατεστραμμένες.

**Διαγνωστικά**. -Χρησιμοποιήστε μονάδα εξισορρόπησης φόρτου [ανάλυση καταγραφής][lb-monitor].
- Ρυθμίστε τις παραμέτρους του συστήματος παρακολούθησης για την παρακολούθηση όλων των την εύρυθμη λειτουργία της παρακολούθησης τελικά σημεία.


### <a name="operator-accidentally-shuts-down-a-vm"></a>Τελεστής τερματίζεται κατά λάθος μια Εικονική.

**Εντοπισμός**. Δ/Υ

**Ανάκτηση**. Ορίστε μια κλειδαριά πόρων με `ReadOnly` επίπεδο. Ανατρέξτε στο θέμα [πόροι κλειδώματος με τη διαχείριση πόρων Azure][rm-locks].

**Διαγνωστικά**. Χρήση [αρχείων καταγραφής Azure δραστηριότητας][azure-activity-logs].


## <a name="webjobs"></a>WebJobs

### <a name="continuous-job-stops-running-when-the-scm-host-is-idle"></a>Συνεχής εργασία παύει να εκτελείται όταν ο κεντρικός υπολογιστής SCM είναι σε αδράνεια.

**Εντοπισμός**. Μεταβίβαση ενός διακριτικού ακύρωσης στη συνάρτηση WebJob. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [φυσιολογική τερματισμού][web-jobs-shutdown]. 

**Ανάκτηση**. Ενεργοποίηση του `Always On` τη ρύθμιση στο web app. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [εργασίες εκτέλεση φόντου με WebJobs][web-jobs].


## <a name="application-design"></a>Σχεδίαση εφαρμογής

### <a name="application-cant-handle-a-spike-in-incoming-requests"></a>Εφαρμογή δεν μπορεί να χειριστεί ένα Συλλέκτη σε εισερχόμενες προσκλήσεις.

**Εντοπισμός**. Εξαρτάται από την εφαρμογή. Τυπικές ενδείξεις:

- Στην τοποθεσία Web αρχίζει να επιστρέφει τους κωδικούς σφάλματος 5xx HTTP.
- Ξεκινήστε εξαρτώμενες υπηρεσίες, όπως η βάση δεδομένων ή την αποθήκευση, για να επιτάχυνσης αιτήσεις. Αναζητήστε σφάλματα HTTP, όπως 429 HTTP (πάρα πολλές αιτήσεις), ανάλογα με την υπηρεσία.
- Μήκος ουράς HTTP επεκτείνεται.

**Ανάκτηση**

- Κλίμακα ανάληψη χειρισμού αυξημένη φόρτωση. 

- Μετριασμός αποτυχίες να αποφύγετε την διαδοχικές αποτυχίες διακόψει ολόκληρη την εφαρμογή. Στρατηγικές μετριασμού περιλαμβάνουν τα εξής:

    - Υλοποίηση το [Μοτίβο περιορισμού] [ throttling-pattern] για να αποφύγετε την υπερβολική συστήματα παρασκηνίου.
    - Χρήση [βάσει ουρά φόρτωσης ισοστάθμιση] [ queue-based-load-leveling] για buffer αιτήσεων και την επεξεργασία τους με μια κατάλληλη ρυθμό.
    - Ιεράρχηση ορισμένα προγράμματα-πελάτες. Για παράδειγμα, εάν η εφαρμογή έχει βαθμίδες δωρεάν και επί πληρωμή, επιτάχυνσης πελάτες στο επίπεδο δωρεάν, αλλά όχι επί πληρωμή πελάτες. Ανατρέξτε στο θέμα [προτεραιότητα ουρά μοτίβο][priority-queue-pattern].

**Διαγνωστικά**. Χρησιμοποιήστε την [Καταγραφή διαγνωστικών εφαρμογής υπηρεσίας][app-service-logging]. Χρησιμοποιήστε μια υπηρεσία όπως το [Azure καταγραφής ανάλυσης][azure-log-analytics], [Εφαρμογή ιδέες][app-insights], ή [Νέα Relic] [ new-relic] για να σας βοηθήσει να κατανοήσετε τα αρχεία καταγραφής διαγνωστικών.


### <a name="one-of-the-operations-in-a-workflow-or-distributed-transaction-fails"></a>Μία από τις λειτουργίες σε μια ροή εργασίας ή κατανεμημένων συναλλαγών αποτυγχάνει.

**Εντοπισμός**. Μετά από *N* προσπάθειες επανάληψης, αυτό εξακολουθεί να αποτυγχάνει.

**Ανάκτηση**

- Ως ένα σχέδιο μετριασμού, υλοποίηση ο [Επόπτης παράγοντας Scheduler] [ scheduler-agent-supervisor] μοτίβο για τη Διαχείριση ολόκληρη τη ροή εργασιών. 
- Δεν επανάληψης σε χρονικών ορίων. Υπάρχει μια χρέωση χαμηλής επιτυχίας για αυτό το σφάλμα. 
- Ουρά εργασίας, προκειμένου να προσπαθήστε ξανά αργότερα.

**Διαγνωστικά**. Συνδεθείτε όλες οι λειτουργίες (επιτυχής και αποτυχίας), συμπεριλαμβανομένων των παράγωγων ενέργειες. Χρησιμοποιήστε συσχέτισης αναγνωριστικά, ώστε να μπορείτε να παρακολουθείτε όλες οι λειτουργίες μέσα στην ίδια συναλλαγή.


### <a name="a-call-to-a-remote-service-fails"></a>Μια κλήση σε μια υπηρεσία απομακρυσμένης αποτυγχάνει.

**Εντοπισμός**. Κωδικός σφάλματος HTTP.

**Ανάκτηση**

1. Επανάληψη σε μεταβατικές αποτυχίες. 
2. Εάν η κλήση αποτυγχάνει μετά από *N* προσπάθειες, λαμβάνουν μια εναλλακτική ενέργεια. (Η εφαρμογή συγκεκριμένες.)
3. Υλοποίηση το [διακόπτη κυκλώματος μοτίβο] [ circuit-breaker] για να αποφύγετε διαδοχικές αποτυχίες. 

**Διαγνωστικά**. Συνδεθείτε όλες τις αποτυχίες απομακρυσμένη κλήση.


## <a name="next-steps"></a>Επόμενα βήματα

Για περισσότερες πληροφορίες σχετικά με τη διαδικασία FMA, ανατρέξτε στο θέμα [ανθεκτικότητα με σχεδίαση για τις υπηρεσίες cloud] [ resilience-by-design-pdf] (λήψη PDF).

<!-- links -->

[api-management]: https://azure.microsoft.com/documentation/services/api-management/
[api-management-throttling]: ../api-management/api-management-sample-flexible-throttling.md
[app-insights]: ../application-insights/app-insights-overview.md
[app-insights-web-apps]: ../application-insights/app-insights-azure-web-apps.md
[app-service-configure]: ../app-service-web/web-sites-configure.md
[app-service-logging]: ../app-service-web/web-sites-enable-diagnostic-log.md
[app-service-slots]: ../app-service-web/web-sites-staged-publishing.md
[auto-rest-client-retry]: https://github.com/Azure/autorest/blob/master/Documentation/clients-retry.md
[azure-activity-logs]: ../monitoring-and-diagnostics/monitoring-overview-activity-logs.md
[azure-alerts]: ../monitoring-and-diagnostics/insights-alerts-portal.md
[azure-log-analytics]: ../log-analytics/log-analytics-overview.md
[BrokeredMessage.TimeToLive]: https://msdn.microsoft.com/library/microsoft.servicebus.messaging.brokeredmessage.timetolive.aspx
[cassandra-error-handling]: http://www.datastax.com/dev/blog/cassandra-error-handling-done-right
[circuit-breaker]: https://msdn.microsoft.com/library/dn589784.aspx
[docdb-multi-region]: ../documentdb/documentdb-developing-with-multiple-regions.md
[elasticsearch-azure]: guidance-elasticsearch-running-on-azure.md
[elasticsearch-client]: https://www.elastic.co/guide/en/elasticsearch/client/index.html
[health-endpoint-monitoring-pattern]: https://msdn.microsoft.com/library/dn589789.aspx
[onstop-events]: https://azure.microsoft.com/blog/the-right-way-to-handle-azure-onstop-events/
[lb-monitor]: ../load-balancer/load-balancer-monitor-log.md
[lb-probe]: ../load-balancer/load-balancer-custom-probe-overview.md#learn-about-the-types-of-probes
[new-relic]: https://newrelic.com/
[priority-queue-pattern]: https://msdn.microsoft.com/library/dn589794.aspx
[queue-based-load-leveling]: https://msdn.microsoft.com/library/dn589783.aspx
[QuotaExceededException]: https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.quotaexceededexception.aspx
[ra-web-apps-basic]: guidance-web-apps-basic.md
[redis-monitor]: ../redis-cache/cache-how-to-monitor.md
[redis-retry]: ../best-practices-retry-service-specific.md#cache-redis-retry-guidelines
[resilience-by-design-pdf]: http://download.microsoft.com/download/D/8/C/D8C599A4-4E8A-49BF-80EE-FE35F49B914D/Resilience_by_Design_for_Cloud_Services_White_Paper.pdf
[RoleEntryPoint.OnStop]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx
[RoleEnvironment.Stopping]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleenvironment.stopping.aspx
[rm-locks]: ../resource-group-lock-resources.md
[sb-dead-letter-queue]: ../service-bus-messaging/service-bus-dead-letter-queues.md
[sb-georeplication-sample]: https://github.com/Azure-Samples/azure-servicebus-messaging-samples/tree/master/GeoReplication
[sb-messagingexception-class]: https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.messagingexception.aspx
[sb-messaging-exceptions]: ../service-bus-messaging/service-bus-messaging-exceptions.md
[sb-outages]: ../service-bus/service-bus-outages-disasters.md#protecting-queues-and-topics-against-datacenter-outages-or-disasters
[sb-partition]: ../service-bus-messaging/service-bus-partitioning.md
[sb-poison-message]: ../app-service-web/websites-dotnet-webjobs-sdk-storage-queues-how-to.md#poison
[sb-retry]: ../best-practices-retry-service-specific.md#service-bus-retry-guidelines
[search-sdk]: https://msdn.microsoft.com/library/dn951165.aspx
[scheduler-agent-supervisor]: https://msdn.microsoft.com/library/dn589780.aspx
[search-analytics]: ../search/search-traffic-analytics.md
[sql-db-audit]: ../sql-database/sql-database-auditing-get-started.md
[sql-db-errors]: ../sql-database/sql-database-develop-error-messages.md#resource-governanance-errors
[sql-db-failover]: ../sql-database/sql-database-geo-replication-failover-portal.md
[sql-db-limits]: ../sql-database/sql-database-resource-limits.md
[sql-db-replication]: ../sql-database/sql-database-geo-replication-overview.md
[storage-metrics]: https://msdn.microsoft.com/library/dn782843.aspx
[storage-replication]: ../storage/storage-redundancy.md
[Storage.RetryPolicies]: https://msdn.microsoft.com/library/microsoft.windowsazure.storage.retrypolicies.aspx
[sys.event_log]: https://msdn.microsoft.com/library/dn270018.aspx
[throttling-pattern]: https://msdn.microsoft.com/library/dn589798.aspx
[web-jobs]: ../app-service-web/web-sites-create-web-jobs.md
[web-jobs-shutdown]: ../app-service-web/websites-dotnet-webjobs-sdk-storage-queues-how-to.md#graceful

