<properties
   pageTitle="Εκτέλεση ΣΠΣ των Windows σε πολλές περιοχές για υψηλή διαθεσιμότητα | Αναφορά αρχιτεκτονική | Microsoft Azure"
   description="Μάθετε πώς μπορείτε να αναπτύξετε το ΣΠΣ σε πολλές περιοχές Azure για υψηλή διαθεσιμότητα και υποστηρίζεται."
   services=""
   documentationCenter="na"
   authors="MikeWasson"
   manager="roshar"
   editor=""
   tags=""/>

<tags
   ms.service="guidance"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="10/21/2016"
   ms.author="mwasson"/>

# <a name="running-windows-vms-in-multiple-regions-for-high-availability"></a>Εκτέλεση ΣΠΣ των Windows σε πολλές περιοχές για υψηλή διαθεσιμότητα

[AZURE.INCLUDE [pnp-header](../../includes/guidance-pnp-header-include.md)]

> [AZURE.SELECTOR]
- [Εκτέλεση ΣΠΣ Linux σε πολλές περιοχές για υψηλή διαθεσιμότητα](guidance-compute-multiple-datacenters-linux.md)
- [Εκτέλεση ΣΠΣ των Windows σε πολλές περιοχές για υψηλή διαθεσιμότητα](guidance-compute-multiple-datacenters.md)

Σε αυτό το άρθρο, συνιστάται να ένα σύνολο πρακτικές για να εκτελέσετε εικονικές μηχανές Windows (ΣΠΣ) σε πολλές περιοχές Azure, για να επιτύχετε διαθεσιμότητα και την υποδομή ένα ισχυρό καταστροφής αποκατάστασης.

> [AZURE.NOTE] Azure έχει δύο διαφορετικές ανάπτυξης μοντέλα: [Διαχείριση πόρων] [ resource groups] και κλασική. Σε αυτό το άρθρο χρησιμοποιεί διαχείριση πόρων, η οποία η Microsoft συνιστά για νέες αναπτύξεις.

Μια αρχιτεκτονική πολλών περιοχών μπορούν να παρέχουν μεγαλύτερη Διαθεσιμότητα από την ανάπτυξη σε μία μόνο περιοχή. Εάν μια μη διαθεσιμότητα τοπικές επηρεάζει την κύρια περιοχή, μπορείτε να χρησιμοποιήσετε [Την κυκλοφορία Διαχείριση] [ traffic-manager] αποτυχία επάνω από τη δευτερεύουσα περιοχή. Αυτή η αρχιτεκτονική επίσης μπορούν να σας βοηθήσουν εάν αποτύχει μια επιμέρους υποσυστήματος της εφαρμογής. 

Υπάρχουν διάφοροι τρόποι γενικά για την επίτευξη υψηλή διαθεσιμότητα σε κέντρα δεδομένων:

- Ενεργό/παθητικές με άμεσης αναμονής. Κίνηση μεταβαίνει σε μία περιοχή, ενώ τα άλλα αναμονή σε αναμονή. ΣΠΣ στη δευτερεύουσα περιοχή είναι που έχει εκχωρηθεί και εκτελούνται πάντα.

- Ενεργό/παθητικές με ψυχρές αναμονή. Το ίδιο, αλλά ΣΠΣ στη δευτερεύουσα περιοχή δεν έχουν εκχωρηθεί μέχρι να χρειαστεί για ανακατεύθυνση. Αυτή η προσέγγιση κόστους μικρότερο για να εκτελέσετε, αλλά γενικά θα έχει πλέον προς τα κάτω χρόνο κατά τη διάρκεια μιας αποτυχίας.

- Ενεργή/ενεργή. Δύο περιοχές είναι ενεργή και οι αιτήσεις είναι εξισορρόπηση μεταξύ τους. Εάν ένα κέντρο δεδομένων δεν είναι διαθέσιμη, λαμβάνεται από περιστροφής. 

Αυτή η αρχιτεκτονική εστιάζει σε ενεργό/παθητικές με άμεσης αναμονής, χρησιμοποιώντας τη Διαχείριση κίνηση για ανακατεύθυνση. Σημειώστε ότι θα μπορούσε να αναπτύξετε ένα μικρό αριθμό των ΣΠΣ για άμεσης αναμονής και, στη συνέχεια, διαβάθμιση της ανάλογα με τις ανάγκες.

## <a name="architecture-diagram"></a>Διάγραμμα αρχιτεκτονικής

Το παρακάτω διάγραμμα δημιουργεί την αρχιτεκτονική φαίνεται στην [Προσθήκη αξιοπιστία για μια αρχιτεκτονική N-επιπέδων σε Azure](guidance-compute-n-tier-vm.md).

> Ένα έγγραφο του Visio που περιλαμβάνει αυτό το διάγραμμα αρχιτεκτονική είναι διαθέσιμο για λήψη στο [Κέντρο λήψης αρχείων της Microsoft]το[visio-download]. Σε αυτό το διάγραμμα είναι ενεργοποιημένη η "υπολογισμού - σελίδα πολλούς περιοχής (Windows).

[! [0]][0]

- **Περιοχές κύριας και δευτερεύουσας**. Αυτή η αρχιτεκτονική χρησιμοποιεί δύο περιοχές για να επιτύχετε μεγαλύτερη διαθεσιμότητα. Ένα είναι η κύρια περιοχή. Κατά την κανονική λειτουργία, η κίνηση του δικτύου δρομολογείται στην κύρια περιοχή. Αλλά εάν που δεν είναι διαθέσιμη, κυκλοφορία δρομολογείται τη δευτερεύουσα περιοχή.

- ** [Manager κίνηση azure] [ traffic-manager] ** δρομολογεί εισερχόμενες αιτήσεις στην κύρια περιοχή. Εάν αυτήν την περιοχή δεν είναι διαθέσιμη, Διαχείριση κίνηση αποτυγχάνει επάνω από τη δευτερεύουσα περιοχή. Για περισσότερες πληροφορίες, ανατρέξτε στην ενότητα [Ρύθμιση παραμέτρων διαχείρισης κίνηση](#configuring-traffic-manager).

- **Ομάδες πόρων**. Να δημιουργήσετε ξεχωριστές [ομάδες πόρων] [ resource groups] για την κύρια περιοχή, τη δευτερεύουσα περιοχή, και για τη Διαχείριση κίνηση. Αυτό σας δίνει την ευελιξία να διαχειρίζεστε κάθε περιοχής ως μια ενιαία συλλογή των πόρων. Για παράδειγμα, που θα μπορούσε να αναπτύξετε εκ νέου μια περιοχή, χωρίς να χρειάζεται προς τα κάτω κάποια άλλη. [Σύνδεση τις ομάδες πόρων][resource-group-links], ώστε να μπορείτε να εκτελέσετε ένα ερώτημα για να παραθέτει όλους τους πόρους για την εφαρμογή.

- **VNets**. Δημιουργήστε μια ξεχωριστή VNet για κάθε περιοχή. Βεβαιωθείτε ότι τα διαστήματα διεύθυνση μην επικαλύπτονται. 

- **SQL Server πάντα στη διαθεσιμότητα ομάδας**. Εάν χρησιμοποιείτε SQL Server, συνιστάται να [Πάντα σε Availabilty ομάδες SQL] [ sql-always-on] για υψηλή διαθεσιμότητα. Δημιουργία μιας ομάδας μόνο διαθεσιμότητα που περιλαμβάνει τις παρουσίες του SQL Server στο δύο περιοχές. Για περισσότερες πληροφορίες, ανατρέξτε στην ενότητα [Ρύθμιση παραμέτρων στην ομάδα SQL Server πάντα στη διαθεσιμότητα](#configuring-the-sql-server-alwayson-availability-group ).

> [AZURE.NOTE] Επίσης να λάβετε υπόψη [Βάση δεδομένων SQL Azure][azure-sql-db], που παρέχει μια σχεσιακή βάση δεδομένων ως μια υπηρεσία στο cloud. Με βάση δεδομένων SQL, δεν χρειάζεται να ρυθμίσετε τις παραμέτρους μιας ομάδας διαθεσιμότητας ή να διαχειριστείτε ανακατεύθυνσης.  

- **Πύλες VPN**: δημιουργία [πύλης VPN] [ vpn-gateway] σε κάθε VNet, και να ρυθμίσετε μια [σύνδεση VNet-VNet][vnet-to-vnet], για να ενεργοποιήσετε την κίνηση του δικτύου μεταξύ του δύο VNets. Αυτό είναι απαραίτητο για την ομάδα SQL πάντα στη διαθεσιμότητα.

## <a name="recommendations"></a>Συστάσεις

Azure προσφέρει πολλές διαφορετικές πόρους και τύπους πόρων, ώστε να μπορεί να είναι αυτή η αναφορά αρχιτεκτονική παρασχεθεί πολλούς διαφορετικούς τρόπους. Παρέχουμε ένα πρότυπο από διαχειριστή πόρων Azure για να εγκαταστήσετε την αρχιτεκτονική αναφοράς που ακολουθεί αυτές τις συστάσεις. Εάν θέλετε να δημιουργήσετε τη δική σας αναφορά αρχιτεκτονική ακολουθήσετε αυτές τις συστάσεις, εκτός αν έχετε συγκεκριμένες απαιτήσεις που σύσταση υπερβαίνει το μέγεθος.

### <a name="regional-pairing"></a>Σύζευξη τοπικές ρυθμίσεις

Κάθε Azure περιοχής είναι συνδεδεμένη με μια άλλη περιοχή εντός του ίδιου Γεωγραφία. Σε γενικές γραμμές, επιλέξτε τις περιοχές από το ίδιο τοπικές ζεύγος (για παράδειγμα, Ανατολικής ΗΠΑ 2 και κεντρική ΜΑΣ). Οφέλη από αυτή την περίπτωση περιλαμβάνουν τα εξής:

- Εάν υπάρχει μια ευρεία μη διαθεσιμότητα, προτεραιότητα αποκατάστασης της περιοχής τουλάχιστον μία από κάθε ζεύγος.

- Ενημερώσεις προγραμματισμένες Azure συστήματος αναπτύσσονται στις περιοχές ζεύγη διαδοχικά, για να ελαχιστοποιήσετε πιθανά χρόνου εκτός λειτουργίας.

- Ζεύγη βρίσκονται εντός του ίδιου Γεωγραφία, ώστε να πληρούνται οι απαιτήσεις όσον αφορά τον τόπο διαμονής δεδομένων.

Ωστόσο, βεβαιωθείτε ότι και οι δύο περιοχές υποστήριξης όλων των υπηρεσιών Azure που χρειάζονται για την εφαρμογή σας (ανατρέξτε στο θέμα [υπηρεσίες ανά περιοχή][services-by-region]). Για περισσότερες πληροφορίες σχετικά με τις τοπικές ζεύγη, ανατρέξτε στο θέμα [επιχειρήσεις συνέχειας και καταστροφή ανάκτησης (BCDR): περιοχές σύζευξη του Azure][regional-pairs].

### <a name="traffic-manager-configuration"></a>Ρύθμιση παραμέτρων διαχείρισης κίνηση

Λάβετε υπόψη τα εξής σημεία όταν ρυθμίζετε τις παραμέτρους κίνηση manager για το σενάριό σας:

- **Δρομολόγηση.** Διαχείριση κίνηση υποστηρίζει πολλές [δρομολόγησης αλγόριθμους][tm-routing]. Για το σενάριο που περιγράφεται σε αυτό το άρθρο, χρησιμοποιήστε _προτεραιότητα_ δρομολόγησης (παλαιότερα γνωστές ως δρομολόγηση _ανακατεύθυνσης_ ). Με αυτήν τη ρύθμιση, η διαχείριση κίνηση αποστέλλει όλες τις αιτήσεις στην κύρια περιοχή, εκτός και εάν θα είναι δυνατή η πρόσβαση στην κύρια περιοχή. Σε αυτό το σημείο, αυτόματα αποτύχει επάνω από τη δευτερεύουσα περιοχή. Ανατρέξτε στο θέμα [Ρύθμιση παραμέτρων ανακατεύθυνσης μέθοδο δρομολόγησης][tm-configure-failover].

- **Δοκιμή του εύρυθμης λειτουργίας.** Διαχείριση κίνηση χρησιμοποιεί μια HTTP (ή HTTPS) [Δοκιμή του] [ tm-monitoring] για την παρακολούθηση της τη διαθεσιμότητα των κάθε περιοχή. Η δοκιμή του ελέγχει για μια απόκριση HTTP 200 για μια καθορισμένη διαδρομή διεύθυνσης URL. Ως βέλτιστη πρακτική, δημιουργήστε ένα τελικό σημείο που αναφέρει συνολικά την εύρυθμη λειτουργία της εφαρμογής και χρησιμοποιήστε αυτό το τελικό σημείο για τη δοκιμή του εύρυθμης λειτουργίας. Διαφορετικά, η δοκιμή του μπορεί να αναφέρει ένα τελικό σημείο "σε καλή κατάσταση", όταν στην πραγματικότητα αποτυγχάνει κρίσιμες τμήματα της εφαρμογής. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Μοτίβο παρακολούθηση εύρυθμης λειτουργίας τελικού σημείου][health-endpoint-monitoring-pattern].   

Όταν αποτύχει η κυκλοφορία Manager μέσω, υπάρχει ένα χρονικό διάστημα, όταν οι υπολογιστές-πελάτες δεν μπορούν να συνδεθούν στην εφαρμογή, η οποία μπορεί να είναι αρκετά λεπτά. Δύο παράγοντες επηρεάζουν τη συνολική διάρκεια:

- Η δοκιμή του εύρυθμης λειτουργίας πρέπει να εντοπίσει ότι το κέντρο δεδομένων πρωτεύοντος δεν είναι πλέον δυνατή η πρόσβαση.

- Οι διακομιστές DNS πρέπει να ενημερώσετε τις εγγραφές DNS στο cache για τη διεύθυνση IP, η οποία εξαρτάται από το DNS time to live (TTL). Το προεπιλεγμένο TTL είναι 300 δευτερόλεπτα (5 λεπτά), αλλά μπορείτε να ρυθμίσετε αυτή την τιμή κατά τη δημιουργία το προφίλ της διαχείρισης κίνηση.

Για λεπτομέρειες, ανατρέξτε στην ενότητα [Σχετικά με την παρακολούθηση Manager κίνηση][tm-monitoring]. 

Εάν αποτύχει η κυκλοφορία Manager μέσω, συνιστάται να εκτελεί μια μη αυτόματη αποκατάσταση μετά από, αντί να αυτόματα αποτυγχάνει ξανά. Βεβαιωθείτε ότι όλα υποσυστημάτων εφαρμογή είναι σε καλή κατάσταση πρώτα. Διαφορετικά, μπορείτε να δημιουργήσετε μια κατάσταση όπου η εφαρμογή αντιστρέφει εμπρός και πίσω μεταξύ των κέντρων των δεδομένων.

Από προεπιλογή, την κυκλοφορία Διαχείριση αυτόματα αποτύχει ξανά. Για να αποτρέψετε αυτό, κάτω με μη αυτόματο τρόπο την προτεραιότητα της στην κύρια περιοχή μετά από ένα συμβάν ανακατεύθυνσης. Για παράδειγμα, ας υποθέσουμε ότι η κύρια περιοχή είναι η προτεραιότητα 1 και στο δευτερεύον είναι η προτεραιότητα 2. Αφού ανακατεύθυνσης, ορίστε την κύρια περιοχή προτεραιότητα 3, για να αποτρέψετε την αυτόματη αποκατάσταση μετά από. Όταν είστε έτοιμοι για να επιστρέψετε, ενημερώστε την προτεραιότητα σε 1.

Η παρακάτω εντολή Azure CLI ενημερώνει την προτεραιότητα:

```bat
azure network traffic-manager  endpoint set --resource-group <resource-group> --profile-name <profile>
    --name <traffic-manager-name> --type AzureEndpoints --priority 3
```    

Ένας άλλος τρόπος για να αποφύγετε φλιπ-φλοπ είναι να απενεργοποιήσετε προσωρινά το τελικό σημείο:

```bat
azure network traffic-manager  endpoint set --resource-group <resource-group> --profile-name <profile>
    --name <traffic-manager-name> --type AzureEndpoints --status Disabled
```

Ανάλογα με την αιτία της ανακατεύθυνσης, ίσως χρειαστεί να redploy τους πόρους μέσα σε μια περιοχή. Πριν αποτυγχάνει ξανά, εκτελέστε μια δοκιμαστική Επιχειρησιακή ετοιμότητα. Η δοκιμή θα πρέπει να επαληθεύσετε στοιχεία, όπως:

- ΣΠΣ έχουν ρυθμιστεί σωστά. (Όλο το απαιτούμενο λογισμικό είναι εγκατεστημένο, των υπηρεσιών IIS εκτελείται, κ.λπ.)

- Εφαρμογή υποσυστημάτων είναι σε καλή κατάσταση. 

- Λειτουργική δοκιμές. (Για παράδειγμα, το επίπεδο βάσης δεδομένων είναι προσβάσιμος από το web επιπέδων.)

### <a name="sql-server-always-on-configuration"></a>SQL Server πάντα στη ρύθμιση των παραμέτρων

SQL Server πάντα σε ομάδες διαθεσιμότητα απαιτούν ελεγκτή τομέα. Όλοι οι κόμβοι στην ομάδα διαθεσιμότητα πρέπει να είναι στον ίδιο τομέα AD. Τα ακόλουθα σημεία παρέχουν οδηγίες σχετικά με τον τρόπο ρύθμισης παραμέτρων του SQL Server πάντα στην ομάδα διαθεσιμότητα:

- Τουλάχιστον, τοποθετήστε δύο ελεγκτές τομέα σε κάθε περιοχή. 

- Δώστε σε κάθε ελεγκτή τομέα μια στατική διεύθυνση IP.

- Δημιουργήστε μια σύνδεση VNet-VNet για να ενεργοποιήσετε την επικοινωνία μεταξύ του VNets.

- Για κάθε VNet, προσθέστε τις διευθύνσεις IP από τους ελεγκτές τομέα (από δύο περιοχές) στη λίστα διακομιστή DNS. Μπορείτε να χρησιμοποιήσετε την παρακάτω εντολή CLI. Περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Διαχείριση DNS διακομιστές που χρησιμοποιούνται από ένα εικονικό δίκτυο (VNet)][vnet-dns].

```bat
azure network vnet set --resource-group dc01-rg --name dc01-vnet --dns-servers "10.0.0.4,10.0.0.6,172.16.0.4,172.16.0.6"
```

- Δημιουργία ενός [Συμπλέγματος του Windows Server ανακατεύθυνσης] [ wsfc] σύμπλεγμα (WSFC) που περιλαμβάνει τις παρουσίες του SQL Server σε δύο περιοχές. 

- Δημιουργία SQL Server πάντα στη διαθεσιμότητα ομάδας που περιλαμβάνει τις παρουσίες του SQL Server στο τις κύριες και δευτερεύουσες περιοχές. Για τα βήματα, ανατρέξτε στο θέμα [Επέκταση πάντα στην ομάδας διαθεσιμότητας με απομακρυσμένη Azure κέντρο δεδομένων (PowerShell)](https://blogs.msdn.microsoft.com/sqlcat/2014/09/22/extending-alwayson-availability-group-to-remote-azure-datacenter-powershell/) . 

- Τοποθετήστε την κύρια ρεπλίκα στην κύρια περιοχή.

- Τοποθετήστε ένα ή περισσότερα δευτερεύοντα αντίγραφα στην κύρια περιοχή. Ρύθμιση παραμέτρων τα εξής για να χρησιμοποιήσετε Σύγχρονη ολοκλήρωση με αυτόματη ανακατεύθυνση.

- Τοποθετήστε ένα ή περισσότερα δευτερεύοντα αντίγραφα στη δευτερεύουσα περιοχή. Ρύθμιση παραμέτρων τα εξής για να χρησιμοποιήσετε *ασύγχρονης* ολοκλήρωση, για λόγους απόδοσης. (Διαφορετικά, όλες οι συναλλαγές SQL πρέπει να περιμένουν σε ένα χρόνο αποστολής και επιστροφής μέσω του δικτύου στην περιοχή δευτερεύουσα.) 

> [AZURE.NOTE] Ολοκλήρωση ασύγχρονης αντίγραφα δεν υποστηρίζουν την αυτόματη ανακατεύθυνση. 

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Εκτελεί Windows ΣΠΣ για μια αρχιτεκτονική N-επιπέδων σε Azure](guidance-compute-n-tier-vm.md#SQL-AlwaysOn-Availability-Group).

## <a name="availability-considerations"></a>Ζητήματα διαθεσιμότητας

Μια σύνθετη εφαρμογή Ν σειρών και θα δεν μπορεί να χρειαστεί να επαναλάβετε ολόκληρη την εφαρμογή στη δευτερεύουσα περιοχή. Αντί για αυτό, ενδέχεται να μπορείτε να αναπαραγάγετε απλώς μια κρίσιμη υποσυστήματος που απαιτείται για την υποστήριξη αδιάκοπη παροχή υπηρεσιών.

Διαχείριση κίνηση είναι ένα σημείο πιθανής αποτυχίας του συστήματος. Εάν αποτύχει η υπηρεσία, προγράμματα-πελάτες δεν είναι δυνατό να αποκτήσετε πρόσβαση την εφαρμογή σας κατά τη διάρκεια του χρόνου εκτός λειτουργίας. Εξετάστε την [Κίνηση Manager SLA][tm-sla], και για να καθορίσετε εάν χρησιμοποιώντας τη Διαχείριση κίνηση από μόνο του ανταποκρίνεται στις ανάγκες της επιχείρησής σας για υψηλή διαθεσιμότητα. Εάν όχι, μπορείτε να προσθέσετε μια άλλη λύση διαχείρισης κίνηση ως μια αποκατάσταση μετά από. Εάν αποτύχει η υπηρεσία διαχείρισης κίνηση Azure, αλλάξτε τις εγγραφές CNAME στο DNS στην οποία θα οδηγεί την άλλη υπηρεσία διαχείρισης κίνηση. (Αυτό το βήμα πρέπει να εκτελεστούν με μη αυτόματο τρόπο και την εφαρμογή σας θα είναι διαθέσιμη μέχρι τις αλλαγές DNS μεταβιβάζονται.) 

Για το σύμπλεγμα SQL Server, υπάρχουν δύο σενάρια ανακατεύθυνσης πρέπει να λάβετε υπόψη:

1. Όλα τα αντίγραφα SQL στην κύρια περιοχή αποτύχει. Για παράδειγμα, αυτό θα μπορούσε να συμβεί κατά τη διάρκεια μιας μη διαθεσιμότητα τοπικές ρυθμίσεις. Σε αυτή την περίπτωση, που πρέπει να με μη αυτόματο τρόπο αποτύχει επάνω από την ομάδα διαθεσιμότητα SQL, ακόμα και αν Διαχείριση κίνηση αποτύχει αυτόματα επάνω στο προσκήνιο. Ακολουθήστε τα βήματα στο θέμα [Εκτέλεση ανακατεύθυνσης μη αυτόματη αναγκαστική μιας ομάδας διαθεσιμότητα του SQL Server](https://msdn.microsoft.com/library/ff877957.aspx), που περιγράφει πώς να εκτελείτε μια εξαναγκασμένη ανακατεύθυνσης με χρήση του SQL Server Management Studio, Transact-SQL ή PowerShell στο SQL Server 2016. 

    > [AZURE.WARNING] Με εξαναγκασμένη ανακατεύθυνση, υπάρχει κίνδυνος απώλειας δεδομένων. Όταν η κύρια περιοχή είναι πάλι σε σύνδεση, να καταγράψετε ένα στιγμιότυπο της βάσης δεδομένων και χρησιμοποιήστε [tablediff] για να βρείτε τις διαφορές.

2. Διαχείριση κίνηση αποτύχει επάνω από τη δευτερεύουσα περιοχή, αλλά η κύρια ρεπλίκα SQL εξακολουθεί να είναι διαθέσιμη. Για παράδειγμα, η σειρά προσκηνίου ενδέχεται να αποτύχει, χωρίς να επηρεαστούν τα ΣΠΣ SQL. Σε αυτή την περίπτωση, η κυκλοφορία Internet δρομολογείται στην περιοχή δευτερεύουσα και αυτήν την περιοχή εξακολουθούν να μπορούν να συνδεθούν στην κύρια ρεπλίκα SQL. Ωστόσο, θα υπάρχουν αυξημένη λανθάνων χρόνος, επειδή οι συνδέσεις SQL μεταβαίνουν σε περιοχές. Σε αυτήν την περίπτωση, πρέπει να εκτελέσετε μια μη αυτόματη ανακατεύθυνση ως εξής: 

    - Προσωρινή μετάβαση ρεπλίκα SQL στη δευτερεύουσα περιοχή *σύγχρονη* ολοκλήρωσης. Αυτό εξασφαλίζει ότι δεν υπάρχει απώλεια δεδομένων κατά τη διάρκεια του εφεδρικού.

    - Ανακατεύθυνση σε συγκεκριμένη ρεπλίκα SQL. 
    
    - Όταν αποτύχει Επιστροφή στην κύρια περιοχή, επαναφέρετε τη ρύθμιση ασύγχρονης ολοκλήρωσης. 

## <a name="manageability-considerations"></a>Ζητήματα διαχειρισιμότητα

Όταν ενημερώνετε την ανάπτυξη, ενημερώστε μία περιοχή κάθε φορά, για να μειώσετε τις πιθανότητες να καθολικού αποτυχία από μια εσφαλμένη ρύθμιση παραμέτρων ή σφάλμα στην εφαρμογή.

Ελέγξτε την ανοχή του συστήματος να αποτυχίες. Ακολουθούν ορισμένα κοινά σενάρια αποτυχία για να ελέγξετε:

- Τερματισμός Εικονική παρουσίες.

- Οι πόροι πίεση όπως CPU και μνήμης.

- Αποσύνδεση καθυστέρηση δικτύου.

- Παρουσιάσει σφάλμα διεργασίες.

- Λήγουν πιστοποιητικά.

- Προσομοίωση σφάλματα υλικού.

- Τερματισμός της υπηρεσίας DNS στους ελεγκτές τομέα.

Μετρήστε τις ώρες αποκατάστασης και βεβαιωθείτε ότι πληρούν τις ανάγκες της επιχείρησής σας. Δοκιμή συνδυασμούς αποτυχία λειτουργιών, καθώς και.

## <a name="next-steps"></a>Επόμενα βήματα

Αυτή η σειρά έχει εστιασμένη σε αμιγώς cloud αναπτύξεις. Σενάρια για μεγάλες επιχειρήσεις συχνά απαιτούν δίκτυο υβριδική, τη σύνδεση σε ένα δίκτυο εσωτερικής εγκατάστασης με ένα Azure εικονικού δικτύου. Για να μάθετε πώς να δημιουργείτε τέτοιο δίκτυο υβριδική, ανατρέξτε στο θέμα [εφαρμογή μια υβριδική αρχιτεκτονική δικτύου με Azure και VPN εσωτερικής][hybrid-vpn].

<!-- Links -->

[azure-sla]: https://azure.microsoft.com/support/legal/sla/
[azure-sql-db]: https://azure.microsoft.com/en-us/documentation/services/sql-database/
[health-endpoint-monitoring-pattern]: https://msdn.microsoft.com/library/dn589789.aspx
[hybrid-vpn]: guidance-hybrid-network-vpn.md
[regional-pairs]: ../best-practices-availability-paired-regions.md
[resource groups]: ../azure-resource-manager/resource-group-overview.md
[resource-group-links]: ../resource-group-link-resources.md
[services-by-region]: https://azure.microsoft.com/en-us/regions/#services
[sql-always-on]: https://msdn.microsoft.com/en-us/library/hh510230.aspx
[tablediff]: https://msdn.microsoft.com/en-us/library/ms162843.aspx
[tm-configure-failover]: ../traffic-manager/traffic-manager-configure-failover-routing-method.md
[tm-monitoring]: ../traffic-manager/traffic-manager-monitoring.md
[tm-routing]: ../traffic-manager/traffic-manager-routing-methods.md
[tm-sla]: https://azure.microsoft.com/en-us/support/legal/sla/traffic-manager/v1_0/
[traffic-manager]: https://azure.microsoft.com/en-us/services/traffic-manager/
[visio-download]: http://download.microsoft.com/download/1/5/6/1569703C-0A82-4A9C-8334-F13D0DF2F472/RAs.vsdx
[vnet-dns]: ../virtual-network/virtual-networks-manage-dns-in-vnet.md
[vnet-to-vnet]: ../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md
[vpn-gateway]: ../vpn-gateway/vpn-gateway-about-vpngateways.md
[wsfc]: https://msdn.microsoft.com/en-us/library/hh270278.aspx
[0]: ./media/blueprints/compute-multi-dc.png "Αρχιτεκτονική δικτύου ιδιαίτερα διαθέσιμη για εφαρμογές Azure N-επιπέδων"