<properties
   pageTitle="Εκτελεί Windows ΣΠΣ για μια αρχιτεκτονική N-επιπέδων | Αναφορά αρχιτεκτονική | Microsoft Azure"
   description="Πώς να εφαρμόσετε μια αρχιτεκτονική πολλών επιπέδων στο Azure, πληρωμής ιδιαίτερη προσοχή διαθεσιμότητα, ασφαλείας, κλιμάκωση και διαχειρισιμότητα ασφαλείας."
   services=""
   documentationCenter="na"
   authors="MikeWasson"
   manager="christb"
   editor=""
   tags=""/>

<tags
   ms.service="guidance"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="10/20/2016"
   ms.author="mwasson"/>

# <a name="running-windows-vms-for-an-n-tier-architecture-on-azure"></a>Εκτέλεση ΣΠΣ Windows για μια αρχιτεκτονική N-επιπέδων σε Azure

> [AZURE.INCLUDE [pnp-header](../../includes/guidance-pnp-header-include.md)]

> [AZURE.SELECTOR]
- [Εκτέλεση ΣΠΣ Linux για μια αρχιτεκτονική N-επιπέδων σε Azure](guidance-compute-n-tier-vm-linux.md)
- [Εκτέλεση ΣΠΣ Windows για μια αρχιτεκτονική N-επιπέδων σε Azure](guidance-compute-n-tier-vm.md)

Σε αυτό το άρθρο περιγράφει ένα σύνολο αποδεδειγμένη πρακτικές για την εκτέλεση εικονικές μηχανές Windows (ΣΠΣ) για μια εφαρμογή με μια αρχιτεκτονική N-επιπέδων. Δημιουργεί στο άρθρο [εκτέλεση πολλών ΣΠΣ στην Azure][multi-vm].

> [AZURE.NOTE] Azure έχει δύο διαφορετικές ανάπτυξης μοντέλα: [Διαχείριση πόρων] [ resource-manager-overview] και κλασική. Σε αυτό το άρθρο χρησιμοποιεί διαχείριση πόρων, η οποία η Microsoft συνιστά για νέες αναπτύξεις.

## <a name="architecture-diagram"></a>Διάγραμμα αρχιτεκτονικής

Υπάρχουν παραλλαγές της αρχιτεκτονικές N επιπέδων. Κατά το μεγαλύτερο μέρος, τις διαφορές δεν πρέπει να έχει σημασία για τους σκοπούς της αυτές τις συστάσεις. Σε αυτό το άρθρο προϋποθέτει μια εφαρμογή web τυπικές επιπέδων 3:

- **Επίπεδο Web.** Χειρίζεται τις εισερχόμενες αιτήσεις HTTP. Σε αυτό το επίπεδο επιστρέφονται απαντήσεις.

- **Επίπεδο επιχειρήσεις.** Υλοποιεί επιχειρηματικών διαδικασιών και άλλες λειτουργική λογική για το σύστημα.

- **Επίπεδο βάσης δεδομένων.** Παρέχει χώρο αποθήκευσης μόνιμη δεδομένων, χρησιμοποιώντας [Ομάδες SQL Server πάντα στη διαθεσιμότητα] [ sql-alwayson] για υψηλή διαθεσιμότητα.

> Ένα έγγραφο του Visio που περιλαμβάνει αυτό το διάγραμμα αρχιτεκτονική είναι διαθέσιμο για λήψη στο [Κέντρο λήψης αρχείων της Microsoft]το[visio-download]. Σε αυτό το διάγραμμα είναι ενεργοποιημένη η "υπολογισμού - σελίδα πολλών επιπέδων (Windows).

![[0]][0]

- **Διαθεσιμότητα σύνολα.** Δημιουργήστε μια [Ρύθμιση διαθεσιμότητα] [ azure-availability-sets] για κάθε σειρά και παροχή τουλάχιστον δύο ΣΠΣ σε κάθε επίπεδο. Αυτή η προσέγγιση είναι απαιτούνται για την επίτευξη τη διαθεσιμότητα [SLA] [ vm-sla] για ΣΠΣ.

- **Δευτερεύοντα δίκτυα.** Δημιουργήστε ένα ξεχωριστό υποδίκτυο για κάθε επίπεδο. Καθορίστε τη διεύθυνση περιοχής και τη μάσκα υποδικτύου με τη χρήση σημειογραφίας [CIDR] . 

- **Η φόρτωση balancers.** Χρησιμοποιήστε μια [μονάδα εξισορρόπησης φόρτου μέσω Internet] [ load-balancer-external] για τη διανομή εισερχόμενη κυκλοφορία Internet για το επίπεδο web και μια [εσωτερική εξισορρόπηση φόρτου] [ load-balancer-internal] για τη διανομή κίνηση του δικτύου από τη σειρά web στο επίπεδο επιχειρήσεις.

- **Jumpbox**. Μια _jumpbox_, που ονομάζεται επίσης ένα [bastion κεντρικού υπολογιστή], είναι μια Εικονική στο δίκτυο στο οποίο οι διαχειριστές μπορούν να χρησιμοποιήσουν για να συνδεθείτε με τα άλλα ΣΠΣ. Το jumpbox έχει μια NSG που επιτρέπει την κυκλοφορία απομακρυσμένης μόνο από whitelisted δημόσιων διευθύνσεων IP. Το NSG πρέπει να επιτρέπουν την κυκλοφορία απομακρυσμένης επιφάνειας εργασίας (RDP).

- **Παρακολούθηση**. Παρακολούθηση λογισμικού όπως [Nagios], [Zabbix]ή [Icinga] μπορεί να σας δώσει πληροφορίες για χρόνο απόκρισης, Εικονική συνεχούς και της συνολικής εύρυθμης λειτουργίας του συστήματος. Εγκατάσταση του λογισμικού παρακολούθησης σε μια Εικονική που τοποθετείται σε ένα ξεχωριστό διαχείρισης υποδίκτυο.

- **NSGs**. Χρησιμοποιήστε [τις ομάδες ασφαλείας δικτύου] [ nsg] (NSGs) για να περιορίσετε την κίνηση του δικτύου εντός του VNet. Για παράδειγμα, στην αρχιτεκτονική 3 επιπέδων εμφανίζεται εδώ, το επίπεδο βάσης δεδομένων δεν αποδέχεται την κυκλοφορία από το web προσκηνίου, μόνο από την κλίμακα επιχειρήσεις και το υποδίκτυο διαχείρισης.

- **SQL Server πάντα στη διαθεσιμότητα ομάδας.** Παρέχει υψηλή διαθεσιμότητα στο τη σειρά δεδομένων, ενεργοποιώντας αναπαραγωγής και ανακατεύθυνσης.

- **Διακομιστές (AD DS) υπηρεσίες τομέα active Directory**. Υπηρεσίες τομέα Active Directory (AD DS) αποθηκεύει δεδομένα καταλόγου και διαχειρίζεται την επικοινωνία μεταξύ των χρηστών και τομέων, συμπεριλαμβανομένων διαδικασίες σύνδεσης χρήστη, ο έλεγχος ταυτότητας και αναζητήσεις καταλόγου. Έναν ελεγκτή τομέα της υπηρεσίας καταλόγου Active Directory είναι ένας διακομιστής που εκτελεί τις υπηρεσίες AD DS. Πριν από το Windows Server 2016, πάντα σε ομάδες διαθεσιμότητα πρέπει να συμμετέχει σε έναν τομέα. Αυτό συμβαίνει επειδή ομάδες διαθεσιμότητα εξαρτώνται από τεχνολογία σύμπλεγμα ανακατεύθυνσης διακομιστή των Windows (WSFC). Windows Server 2016 παρουσιάζει τη δυνατότητα να δημιουργήσετε ένα σύμπλεγμα ανακατεύθυνσης χωρίς υπηρεσίας καταλόγου Active Directory. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Τι είναι το νέο στο συμπλέγματος ανακατεύθυνσης στο Windows Server 2016][wsfc-whats-new]

## <a name="recommendations"></a>Συστάσεις

Azure προσφέρει πολλές διαφορετικές πόρους και τύπους πόρων, ώστε να μπορεί να είναι αυτή η αναφορά αρχιτεκτονική παρασχεθεί πολλούς διαφορετικούς τρόπους. Παρέχουμε ένα πρότυπο από διαχειριστή πόρων Azure για να εγκαταστήσετε την αρχιτεκτονική αναφοράς που ακολουθεί αυτές τις συστάσεις. Εάν θέλετε να δημιουργήσετε τη δική σας αναφορά αρχιτεκτονική ακολουθήσετε αυτές τις συστάσεις, εκτός αν έχετε συγκεκριμένες απαιτήσεις που σύσταση υπερβαίνει το μέγεθος.

### <a name="vnet--subnets"></a>VNet / δευτερεύοντα δίκτυα

Όταν δημιουργείτε την VNet, εκχώρηση αρκετό χώρο διευθύνσεων για τα δευτερεύοντα δίκτυα θα χρειαστεί. Καθορίστε το VNet περιοχή και το δευτερεύον μάσκα διεύθυνσης με τη χρήση σημειογραφίας [CIDR] . Χρησιμοποιήστε ένα χώρο διευθύνσεων που εμπίπτει η τυπική [ιδιωτικό μπλοκ διευθύνσεων IP][private-ip-space], που είναι 10.0.0.0/8, 172.16.0.0/12 και 192.168.0.0/16.

Επιλέξτε μια περιοχή διευθύνσεων που να μην επικαλύπτει με το δίκτυό σας σε εσωτερική εγκατάσταση, σε περίπτωση που χρειαστεί να ρυθμίσετε μια πύλη μεταξύ του VNet και το δίκτυο εσωτερικής αργότερα. Αφού δημιουργήσετε το VNet, δεν μπορείτε να αλλάξετε την περιοχή διευθύνσεων.

Σχεδίαση δευτερεύοντα δίκτυα, με τις απαιτήσεις λειτουργικότητα και την ασφάλεια υπόψη. Όλα ΣΠΣ μέσα στην ίδια σειρά ή ρόλο θα πρέπει να μεταβείτε στο ίδιο υποδίκτυο, που μπορεί να είναι ένα όριο ασφαλείας. Για περισσότερες πληροφορίες σχετικά με τη σχεδίαση VNets και δευτερεύοντα δίκτυα, ανατρέξτε στο θέμα [Σχεδιασμός και σχεδίαση Azure εικονικών δικτύων][plan-network].

Για κάθε υποδίκτυο, καθορίστε το χώρο διευθύνσεων για το υποδίκτυο στο CIDR σημειογραφία. Για παράδειγμα, '10.0.0.0/24' δημιουργεί μια περιοχή 256 διευθύνσεις IP. (ΣΠΣ να χρησιμοποιήσετε 251 από τα εξής, πέντε είναι δεσμευμένα. Ανατρέξτε στο θέμα [Συνήθεις Ερωτήσεις εικονικού δικτύου][vnet faq].) Βεβαιωθείτε ότι δεν επικαλύπτει τις περιοχές διευθύνσεων σε δευτερεύοντα δίκτυα.

### <a name="network-security-groups"></a>Ομάδες ασφαλείας δικτύου

Χρήση κανόνων NSG για να περιορίσετε την κίνηση μεταξύ βαθμίδες. Για παράδειγμα, στην αρχιτεκτονική 3 επιπέδων φαίνεται παραπάνω, η σειρά web δεν επικοινωνήσετε απευθείας με το επίπεδο βάσης δεδομένων. Για να επιβάλετε αυτό, το επίπεδο βάσης δεδομένων θα πρέπει να εμποδίζει την εισερχόμενη κυκλοφορία από το web υποδίκτυο επίπεδο.  

  1. Δημιουργήστε ένα NSG και συσχετίσετε στο υποδίκτυο επίπεδο βάσης δεδομένων.

  2. Προσθέστε έναν κανόνα που αποτρέπει την όλη την εισερχόμενη κυκλοφορία από το VNet. (Χρησιμοποιήστε το `VIRTUAL_NETWORK` ετικέτα στον κανόνα.) 

  3. Προσθήκη κανόνα με υψηλότερη προτεραιότητα που επιτρέπει την εισερχόμενη κυκλοφορία από το υποδίκτυο επίπεδο επιχειρήσεις. Αυτός ο κανόνας παρακάμπτει το προηγούμενο κανόνα και επιτρέπει την κλίμακα επιχειρήσεις για να συνομιλήσετε με το επίπεδο βάσης δεδομένων.

  4. Προσθέστε έναν κανόνα που επιτρέπει την εισερχόμενη κυκλοφορία από μέσα σε δευτερεύον επίπεδο βάση δεδομένων ίδιου. Αυτός ο κανόνας επιτρέπει την επικοινωνία μεταξύ του ΣΠΣ στο το επίπεδο βάσης δεδομένων, η οποία είναι απαραίτητη για αναπαραγωγή βάσης δεδομένων και ανακατεύθυνσης.

  5. Προσθέστε έναν κανόνα που επιτρέπει την κυκλοφορία RDP από το υποδίκτυο jumpbox. Αυτός ο κανόνας επιτρέπει στους διαχειριστές να συνδεθείτε με το επίπεδο βάσης δεδομένων από το jumpbox.

  > [AZURE.NOTE] Μια NSG περιλαμβάνει [προεπιλεγμένους κανόνες] [ nsg-rules] που επιτρέπουν την οποιαδήποτε εισερχόμενη κυκλοφορία από μέσα του VNet. Δεν μπορούν να διαγραφούν αυτούς τους κανόνες, αλλά μπορείτε να τα αντικαταστήσετε με τη δημιουργία κανόνων υψηλότερη προτεραιότητα.

### <a name="load-balancers"></a>Φόρτωση balancers

Η εξωτερική εξισορρόπηση φόρτου κατανέμει την κυκλοφορία Internet στο επίπεδο web. Δημιουργήστε μια δημόσια διεύθυνση IP για αυτό εξισορρόπηση φόρτου. Ανατρέξτε στο θέμα [Δημιουργία μια μονάδα εξισορρόπησης φόρτου μέσω Internet][lb-external-create].

Το εσωτερικό εξισορρόπηση φόρτου κατανέμει κίνηση του δικτύου από τη σειρά web στο επίπεδο επιχειρήσεις. Για να δώσετε αυτό εξισορρόπησης φόρτου μια ιδιωτική διεύθυνση IP, δημιουργήστε μια ρύθμιση IP frontend και συσχετίσετε με το υποδίκτυο για την κλίμακα επιχειρήσεις. Ανατρέξτε στο θέμα [Γρήγορα αποτελέσματα με τη δημιουργία μιας εσωτερικής εξισορρόπηση φόρτου][lb-internal-create].

### <a name="sql-server-always-on-availability-groups"></a>SQL Server πάντα σε ομάδες διαθεσιμότητας

Συνιστάται να [Πάντα σε ομάδες διαθεσιμότητα] [ sql-alwayson] για SQL Server υψηλή διαθεσιμότητα. Πάντα σε ομάδες διαθεσιμότητα απαιτούν ελεγκτή τομέα. Όλοι οι κόμβοι στην ομάδα διαθεσιμότητα πρέπει να είναι στον ίδιο τομέα AD.

Άλλα επίπεδα σύνδεση με τη βάση δεδομένων μέσω ενός [ακρόασης ομάδα διαθεσιμότητα][sql-alwayson-listeners]. Το ακροατήριο ενεργοποιεί ένα πρόγραμμα-πελάτη SQL για τη σύνδεση χωρίς να γνωρίζετε το όνομα της φυσικής παρουσίας του SQL Server. ΣΠΣ ότι πρόσβαση στη βάση δεδομένων πρέπει να συμμετέχει σε τομέα. Το πρόγραμμα-πελάτη (σε αυτήν την περίπτωση, ένα άλλο επίπεδο) χρησιμοποιεί DNS για να επιλύσετε το ακροατήριο εικονικού δικτύου όνομα στις διευθύνσεις IP.

Ρύθμιση παραμέτρων του SQL Server πάντα σε ως εξής:

- Δημιουργήστε ένα σύμπλεγμα Windows Server ανακατεύθυνσης συμπλέγματος (WSFC) και SQL Server πάντα στην ομάδα διαθεσιμότητα. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Γρήγορα αποτελέσματα με το πάντα σε ομάδες διαθεσιμότητα][sql-alwayson-getting-started].

- Δημιουργήστε μια εσωτερική εξισορρόπηση φόρτου με μια στατική διεύθυνση IP ιδιωτικό.

- Δημιουργήστε ένα ακροατήριο ομάδα διαθεσιμότητα και αντιστοίχιση ονόματος DNS το ακροατήριο με τη διεύθυνση IP του μια εσωτερική εξισορρόπηση φόρτου. 

- Δημιουργήστε έναν κανόνα εξισορρόπησης φόρτου για τη θύρα ακρόασης SQL Server (TCP θύρα 1433 από προεπιλογή). Ο κανόνας εξισορρόπησης φόρτου πρέπει να ενεργοποιήσετε _αιωρούμενη IP_, που ονομάζεται επίσης απευθείας επιστροφής διακομιστή. Αυτό θα κάνει την εικονική Μηχανή για να απαντήσετε απευθείας στο πρόγραμμα-πελάτη, που σας επιτρέπει μια απευθείας σύνδεση στην κύρια ρεπλίκα.

    > [AZURE.NOTE] Όταν είναι ενεργοποιημένη η αιωρούμενη IP, τον αριθμό θύρας προσκηνίου πρέπει να είναι ίδια με τον αριθμό θύρας παρασκηνίου στον κανόνα εξισορρόπησης φόρτου.

Όταν ένα πρόγραμμα-πελάτη SQL προσπαθεί να συνδεθεί, η εξισορρόπηση φόρτου δρομολογεί την αίτηση σύνδεσης στη ρεπλίκα που είναι το τρέχον πρωτεύον. Εάν υπάρχει μια ανακατεύθυνση σε μια άλλη ρεπλίκα, η εξισορρόπηση φόρτου δρομολογεί αυτόματα οι επακόλουθες απαιτήσεις για τη νέα κύρια ρεπλίκα. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Ρύθμιση παραμέτρων φόρτωση εξισορρόπησης για SQL πάντα σε][sql-alwayson-ilb].

Κατά τη διάρκεια της ανακατεύθυνσης, οι υπάρχουσες συνδέσεις προγράμματος-πελάτη είναι κλειστό. Μόλις ολοκληρωθεί η ανακατεύθυνση, νέες συνδέσεις θα δρομολογούνται στη νέα κύρια ρεπλίκα.

Εάν την εφαρμογή σας κάνει διαβάζει πολύ περισσότερες από εγγραφές, μπορείτε να μείωση φόρτου σε ορισμένα από τα ερωτήματα μόνο για ανάγνωση σε μια δευτερεύουσα ρεπλίκα. Ανατρέξτε στο θέμα [χρησιμοποιώντας ένα πρόγραμμα ακρόασης για να συνδεθείτε στο δευτερεύον μόνο για ανάγνωση (μόνο για ανάγνωση δρομολόγηση) ρεπλίκα][sql-alwayson-read-only-routing].

Για να δοκιμάσετε την ανάπτυξή σας, [να επιβάλετε μια μη αυτόματη ανακατεύθυνση][sql-alwayson-force-failover].

### <a name="jumpbox"></a>Jumpbox

Δεν επιτρέπουν την RDP πρόσβαση μέσω Internet για να το ΣΠΣ που εκτελούνται το φόρτο εργασίας εφαρμογής. Αντί για αυτό, όλα RDP/SSH πρόσβαση σε αυτά τα ΣΠΣ πρέπει να προέρχονται από το jumpbox. Ο διαχειριστής συνδέεται σε το jumpbox και, στη συνέχεια, συνδέεται σε άλλες εικονική Μηχανή από την jumpbox. Το jumpbox επιτρέπει την κυκλοφορία RDP από το Internet, αλλά μόνο από γνωστά, διευθύνσεις IP whitelisted.

Τοποθετήστε το jumpbox στο το ίδιο VNet ως τα άλλα ΣΠΣ, αλλά σε ένα ξεχωριστό διαχείρισης υποδίκτυο.

Δημιουργήστε μια [δημόσια διεύθυνση IP] για το jumpbox.

Χρησιμοποιήστε ένα μικρό μέγεθος Εικονική για το jumpbox, όπως τυπική A1.

Ρυθμίστε τις παραμέτρους του NSGs για το επίπεδο web, επιχειρήσεις επίπεδο και δευτερεύοντα δίκτυα επίπεδο βάσης δεδομένων για να επιτρέψετε διαχείρισης κίνηση (RDP) διέλευση από το υποδίκτυο διαχείρισης.

Για να προστατεύσετε το jumpbox, δημιουργήστε μια NSG και εφαρμόστε το στο υποδίκτυο jumpbox. Προσθήκη κανόνα NSG που επιτρέπει συνδέσεις RDP μόνο από ένα σύνολο whitelisted δημόσιων διευθύνσεων IP.

Μπορείτε να το επισυνάψετε το NSG στο υποδίκτυο ή να το jumpbox NIC. Σε αυτήν την περίπτωση, συνιστάται να επισυνάψει στο NIC, ώστε η κυκλοφορία RDP επιτρέπεται μόνο για το jumpbox, ακόμα και αν μπορείτε να προσθέσετε άλλα ΣΠΣ στο ίδιο υποδίκτυο.

## <a name="availability-considerations"></a>Ζητήματα διαθεσιμότητας

Τοποθετήστε κάθε Εικονική ρόλο ή επίπεδο σε ένα σύνολο διαθεσιμότητα ξεχωριστά. Μην τοποθετήσετε ΣΠΣ από διαφορετικά επίπεδα στο ίδιο σύνολο διαθεσιμότητα. 

Στο επίπεδο βάσης δεδομένων, έχουν πολλές ΣΠΣ δεν αυτόματα μετάφραση σε μια βάση δεδομένων της ιδιαίτερα διαθέσιμη. Για μια σχεσιακή βάση δεδομένων, συνήθως θα πρέπει να χρησιμοποιήσετε αναπαραγωγής και ανακατεύθυνσης για να επιτύχετε υψηλής διαθεσιμότητας. Για τον SQL Server, συνιστάται να χρησιμοποιείτε [Πάντα σε ομάδες διαθεσιμότητα][sql-alwayson]. 

Εάν χρειάζεστε μεγαλύτερη Διαθεσιμότητα από το [Azure SLA για ΣΠΣ] [ vm-sla] παρέχει, αναπαραγάγετε την εφαρμογή σε δύο περιοχές και χρήση του Azure κίνηση Manager για ανακατεύθυνση. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Εκτέλεση ΣΠΣ των Windows σε πολλές περιοχές για υψηλή διαθεσιμότητα][multi-dc].   

## <a name="security-considerations"></a>Ζητήματα ασφαλείας

Κρυπτογράφηση δεδομένων στο υπόλοιπο. Χρήση [Azure κλειδί θάλαμο] [ azure-key-vault] για να διαχειριστείτε τα πλήκτρα κρυπτογράφηση βάσης δεδομένων. Πλήκτρο θάλαμο μπορούν να αποθηκεύουν κλειδιών κρυπτογράφησης σε λειτουργικές μονάδες ασφαλείας υλικού (HSMs). Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Ρύθμιση παραμέτρων Azure κλειδί θάλαμο ενοποίησης για τον SQL Server σε VM Azure] [ sql-keyvault] συνιστάται επίσης να αποθηκεύσετε απόρρητο εφαρμογή, όπως συμβολοσειρές σύνδεσης βάσης δεδομένων, σε θάλαμο αριθμού-κλειδιού.

Μπορείτε να προσθέσετε μια συσκευή εικονικού δικτύου (NVA) για να δημιουργήσετε μια DMZ μεταξύ δημόσια στο Internet και του Azure εικονικού δικτύου. NVA είναι ένας γενικός όρος για μια εικονική συσκευή που μπορεί να εκτελεί εργασίες που σχετίζονται με το δίκτυο όπως τείχος προστασίας, επιθεώρησης πακέτων, τον έλεγχο, προσαρμοσμένες δρομολόγηση ή διάφορες άλλες λειτουργίες. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [εφαρμογή μια DMZ μεταξύ Azure και του Internet][dmz].

## <a name="scalability-considerations"></a>Ζητήματα κλιμάκωση

Η φόρτωση balancers διανομή κίνηση του δικτύου για το web και επιχειρήσεις βαθμίδες. Οριζόντια κλίμακα, προσθέτοντας νέες παρουσίες Εικονική. Σημειώστε ότι μπορεί να κλίμακα τις βαθμίδες web και επιχειρήσεις ανεξάρτητα από αυτό, με βάση φόρτωση. Για να μειώσετε την πιθανή επιπλοκές που προκαλούνται από την ανάγκη διατήρησης συσχέτισης προγράμματος-πελάτη, πρέπει να είναι χωρίς κατάσταση του ΣΠΣ στο επίπεδο web. Το ΣΠΣ φιλοξενίας της εταιρικής λογικής πρέπει επίσης να χωρίς κατάσταση.

## <a name="manageability-considerations"></a>Ζητήματα διαχειρισιμότητα

Απλοποίηση της διαχείρισης από ολόκληρο το σύστημα χρησιμοποιώντας τα εργαλεία κεντρική διαχείριση όπως [Αυτοματισμού Azure][azure-administration], [Οικογένεια προγραμμάτων του Microsoft λειτουργίες διαχείρισης][operations-management-suite], [Chef][chef], ή [Puppet][puppet]. Αυτά τα εργαλεία να συνενώσετε diagnostic και την εύρυθμη λειτουργία πληροφορίες καταγράφονται από πολλές ΣΠΣ για να παρέχουν μια γενική εικόνα του συστήματος.

## <a name="solution-deployment"></a>Ανάπτυξη της λύσης

Μια ανάπτυξη για αρχιτεκτονική αναφοράς που υλοποιεί αυτές τις συστάσεις είναι διαθέσιμη στο [Github][github-folder]. Αυτή η αρχιτεκτονική αναφορά περιλαμβάνει μια σειρά web, επιχειρήσεις επίπεδο, μια σειρά δεδομένων, καθώς και μια jumpbox ελεγκτές τομέα Εικονική και υπηρεσίας καταλόγου Active Directory.

Η αρχιτεκτονική αναφοράς μπορούν να αναπτυχθούν, ακολουθώντας τις παρακάτω οδηγίες: 

1. Κάντε κλικ στο κουμπί παρακάτω.  
[! ["Ανάπτυξη Azure"] [1]][2]

2. Όταν η σύνδεση έχει ανοίξει στην πύλη του Azure, πληκτρολογήστε τις τιμές παρακολούθηση: 
  - Το όνομα της **ομάδας πόρων** ορίζεται ήδη στο αρχείο παραμέτρων, επομένως, επιλέξτε **Δημιουργία νέου** και πληκτρολογήστε `ra-ntier-sql-network-rg` στο πλαίσιο κειμένου.
  - Επιλέξτε την περιοχή από τη **θέση** αναπτυσσόμενο πλαίσιο.
  - Επεξεργαστείτε το **Πρότυπο ριζικό Uri** ή πλαίσια κειμένου **Uri ριζικού παραμέτρων** .
  - Εξετάστε τους όρους και τις προϋποθέσεις και, στη συνέχεια, επιλέξτε το πλαίσιο ελέγχου **αποδέχομαι τους όρους και προϋποθέσεις που αναφέρονται παραπάνω** .
  - Κάντε κλικ στο κουμπί **αγοράς** .

3. Επιλέξτε Azure πύλης ειδοποίησης για ένα μήνυμα ανάπτυξης έχει ολοκληρωθεί.

4. Κάντε κλικ στο κουμπί παρακάτω.  
[! ["Ανάπτυξη Azure"] [1]][3]

5. Όταν η σύνδεση έχει ανοίξει στην πύλη του Azure, πληκτρολογήστε τις τιμές παρακολούθηση: 
  - Το όνομα της **ομάδας πόρων** ορίζεται ήδη στο αρχείο παραμέτρων, επομένως, επιλέξτε **Χρήση υπάρχουσας** και πληκτρολογήστε `ra-ntier-sql-workload-rg` στο πλαίσιο κειμένου.
  - Επιλέξτε την περιοχή από τη **θέση** αναπτυσσόμενο πλαίσιο.
  - Επεξεργαστείτε το **Πρότυπο ριζικό Uri** ή πλαίσια κειμένου **Uri ριζικού παραμέτρων** .
  - Εξετάστε τους όρους και τις προϋποθέσεις και, στη συνέχεια, επιλέξτε το πλαίσιο ελέγχου **αποδέχομαι τους όρους και προϋποθέσεις που αναφέρονται παραπάνω** .
  - Κάντε κλικ στο κουμπί **αγοράς** .

6. Επιλέξτε Azure πύλης ειδοποίησης για ένα μήνυμα ανάπτυξης έχει ολοκληρωθεί.

7. Κάντε κλικ στο κουμπί παρακάτω.  
[! ["Ανάπτυξη Azure"] [1]][4]

8. Όταν η σύνδεση έχει ανοίξει στην πύλη του Azure, πληκτρολογήστε τις τιμές παρακολούθηση: 
  - Το όνομα της **ομάδας πόρων** ορίζεται ήδη στο αρχείο παραμέτρων, επομένως, επιλέξτε **Δημιουργία νέου** και πληκτρολογήστε `ra-ntier-sql-network-rg` στο πλαίσιο κειμένου.
  - Επιλέξτε την περιοχή από τη **θέση** αναπτυσσόμενο πλαίσιο.
  - Επεξεργαστείτε το **Πρότυπο ριζικό Uri** ή πλαίσια κειμένου **Uri ριζικού παραμέτρων** .
  - Εξετάστε τους όρους και τις προϋποθέσεις και, στη συνέχεια, επιλέξτε το πλαίσιο ελέγχου **αποδέχομαι τους όρους και προϋποθέσεις που αναφέρονται παραπάνω** .
  - Κάντε κλικ στο κουμπί **αγοράς** .

9. Επιλέξτε Azure πύλης ειδοποίησης για ένα μήνυμα ανάπτυξης έχει ολοκληρωθεί.

10. Τα αρχεία παραμέτρων περιλαμβάνουν ενός σχεδιασμένου διαχειριστή ονόματα χρηστών και κωδικούς πρόσβασης και την συνιστάται ιδιαίτερα αμέσως αλλάζετε και τα δύο σε όλα τα ΣΠΣ. Κάντε κλικ σε κάθε Εικονική στην πύλη του Azure και, στη συνέχεια, κάντε κλικ στην εντολή **Επαναφορά κωδικού πρόσβασης** σε το blade **υποστήριξη + αντιμετώπισης προβλημάτων** . Επιλέξτε **Επαναφορά κωδικού πρόσβασης** στο αναπτυσσόμενο πλαίσιο **κατάσταση** και, στη συνέχεια, επιλέξτε ένα νέο **όνομα χρήστη** και **τον κωδικό πρόσβασης**. Κάντε κλικ στο κουμπί **Ενημέρωση** για να παραμένει το νέο όνομα χρήστη και κωδικό πρόσβασης. 

Για πληροφορίες σχετικά με επιπλέον τρόποι για να αναπτύξετε αυτήν την αρχιτεκτονική αναφοράς, ανατρέξτε στο θέμα στο αρχείο readme της τη [καθοδήγηση-μίας-εικονική] [ github-folder] Github φακέλου. 

## <a name="next-steps"></a>Επόμενα βήματα

Για να επιτύχετε υψηλής διαθεσιμότητας για αυτήν την αρχιτεκτονική αναφοράς, συνιστάται να [την ανάπτυξη σε πολλές περιοχές][multi-dc].

<!-- links -->

[arm-templates]: https://azure.microsoft.com/documentation/articles/resource-group-authoring-templates/
[azure-administration]: ../automation/automation-intro.md
[azure-audit-logs]: ../resource-group-audit.md
[azure-availability-sets]: ../virtual-machines/virtual-machines-windows-manage-availability.md#configure-each-application-tier-into-separate-availability-sets
[azure-cli]: ../virtual-machines-command-line-tools.md
[azure-key-vault]: https://azure.microsoft.com/services/key-vault.md
[azure-load-balancer]: ../load-balancer/load-balancer-overview.md
[κεντρικός υπολογιστής bastion]: https://en.wikipedia.org/wiki/Bastion_host
[CIDR]: https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing
[chef]: https://www.chef.io/solutions/azure/
[dmz]: guidance-iaas-ra-secure-vnet-dmz.md
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-n-tier-sql
[lb-external-create]: ../load-balancer/load-balancer-get-started-internet-portal.md
[lb-internal-create]: ../load-balancer/load-balancer-get-started-ilb-arm-portal.md
[load-balancer-external]: ../load-balancer/load-balancer-internet-overview.md
[load-balancer-internal]: ../load-balancer/load-balancer-internal-overview.md
[multi-dc]: guidance-compute-multiple-datacenters.md
[multi-vm]: guidance-compute-multi-vm.md
[n-tier]: guidance-compute-n-tier-vm.md
[naming conventions]: guidance-naming-conventions.md
[nsg]: ../virtual-network/virtual-networks-nsg.md
[nsg-rules]: ../best-practices-resource-manager-security.md#network-security-groups
[operations-management-suite]: https://www.microsoft.com/en-us/server-cloud/operations-management-suite/overview.aspx
[plan-network]: ../virtual-network/virtual-network-vnet-plan-design-arm.md
[private-ip-space]: https://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces
[δημόσια διεύθυνση IP]: ../virtual-network/virtual-network-ip-addresses-overview-arm.md
[puppet]: https://puppetlabs.com/blog/managing-azure-virtual-machines-puppet
[resource-manager-overview]: ../azure-resource-manager/resource-group-overview.md
[sql-alwayson]: https://msdn.microsoft.com/en-us/library/hh510230.aspx
[sql-alwayson-force-failover]: https://msdn.microsoft.com/en-us/library/ff877957.aspx
[sql-alwayson-getting-started]: https://msdn.microsoft.com/en-us/library/gg509118.aspx
[sql-alwayson-ilb]: https://blogs.msdn.microsoft.com/igorpag/2016/01/25/configure-an-ilb-listener-for-sql-server-alwayson-availability-groups-in-azure-arm/
[sql-alwayson-listeners]: https://msdn.microsoft.com/en-us/library/hh213417.aspx
[sql-alwayson-read-only-routing]: https://technet.microsoft.com/en-us/library/hh213417.aspx#ConnectToSecondary
[sql-keyvault]: ../virtual-machines/virtual-machines-windows-ps-sql-keyvault.md
[vm-planned-maintenance]: ../virtual-machines/virtual-machines-windows-planned-maintenance.md
[vm-sla]: https://azure.microsoft.com/en-us/support/legal/sla/virtual-machines
[vnet faq]: ../virtual-network/virtual-networks-faq.md
[wsfc-whats-new]: https://technet.microsoft.com/windows-server-docs/failover-clustering/whats-new-in-failover-clustering
[Nagios]: https://www.nagios.org/
[Zabbix]: http://www.zabbix.com/
[Icinga]: http://www.icinga.org/
[VM-sizes]: https://azure.microsoft.com/documentation/articles/virtual-machines-windows-sizes/
[solution-script]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-n-tier/Deploy-ReferenceArchitecture.ps1
[solution-script-bash]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-n-tier/deploy-reference-architecture.sh
[vnet-parameters-windows]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-n-tier/parameters/windows/virtualNetwork.parameters.json
[vnet-parameters-linux]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-n-tier/parameters/linux/virtualNetwork.parameters.json
[nsg-parameters-windows]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-n-tier/parameters/windows/networkSecurityGroups.parameters.json
[nsg-parameters-linux]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-n-tier/parameters/linux/networkSecurityGroups.parameters.json
[webtier-parameters-windows]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-n-tier/parameters/windows/webTier.parameters.json
[webtier-parameters-linux]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-n-tier/parameters/linux/webTier.parameters.json
[businesstier-parameters-windows]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-n-tier/parameters/windows/businessTier.parameters.json
[businesstier-parameters-linux]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-n-tier/parameters/linux/businessTier.parameters.json
[datatier-parameters-windows]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-n-tier/parameters/windows/dataTier.parameters.json
[datatier-parameters-linux]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-n-tier/parameters/linux/dataTier.parameters.json
[azure-powershell-download]: https://azure.microsoft.com/documentation/articles/powershell-install-configure/
[visio-download]: http://download.microsoft.com/download/1/5/6/1569703C-0A82-4A9C-8334-F13D0DF2F472/RAs.vsdx
[0]: ./media/blueprints/compute-n-tier.png "Χρήση του Microsoft Azure αρχιτεκτονική N-επιπέδων"
[1]: ./media/blueprints/deploybutton.png 
[2]: https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fguidance-compute-n-tier-sql%2FvirtualNetwork.azuredeploy.json
[3]: https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fguidance-compute-n-tier-sql%2Fworkload.azuredeploy.json
[4]: https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fguidance-compute-n-tier-sql%2Fsecurity.azuredeploy.json