<properties
   pageTitle="Εκτέλεση πολλών ΣΠΣ | Αναφορά αρχιτεκτονική | Microsoft Azure"
   description="Πώς μπορείτε να εκτελέσετε πολλές παρουσίες Εικονική σε Azure για κλιμάκωση, υποστηρίζεται, διαχειρισιμότητα και ασφάλεια."
   services=""
   documentationCenter="na"
   authors="MikeWasson"
   manager="christb"
   editor=""
   tags=""/>

<tags
   ms.service="guidance"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="10/19/2016"
   ms.author="mwasson"/>

# <a name="running-multiple-vms-on-azure-for-scalability-and-availability"></a>Εκτέλεση πολλών ΣΠΣ σε Azure για κλιμάκωση και διαθεσιμότητα 

[AZURE.INCLUDE [pnp-header](../../includes/guidance-pnp-header-include.md)]

Σε αυτό το άρθρο περιγράφει ένα σύνολο αποδεδειγμένη πρακτικές για την εκτέλεση πολλών παρουσιών εικονικές μηχανές (Εικονική) για να βελτιώσω την κλιμάκωση, διαθεσιμότητα, διαχειρισιμότητα και ασφάλεια.   

Σε αυτήν την αρχιτεκτονική, τις παρουσίες Εικονική κατανέμεται το φόρτο εργασίας. Υπάρχει μία δημόσια διεύθυνση IP και διανέμεται κυκλοφορία Internet του ΣΠΣ χρησιμοποιώντας μια μονάδα εξισορρόπησης φόρτου. Αυτή η αρχιτεκτονική μπορεί να χρησιμοποιηθεί για μια εφαρμογή ενός επιπέδου, όπως ένα σύμπλεγμα χωρίς κατάσταση web app ή χώρου αποθήκευσης. Επίσης, είναι ένα μπλοκ δόμησης για εφαρμογές N-επιπέδων. 

Σε αυτό το άρθρο δημιουργεί σχετικά με την [Εκτέλεση ένα μεμονωμένο Εικονική στην Azure][single vm]. Τις συστάσεις σε αυτό το άρθρο ισχύουν επίσης για αυτήν την αρχιτεκτονική.

## <a name="architecture-diagram"></a>Διάγραμμα αρχιτεκτονικής

ΣΠΣ στο Azure απαιτούν κοινωνικής δικτύωσης και αποθήκευσης πόρους υποστήριξης.

> Ένα έγγραφο του Visio που περιλαμβάνει αυτό το διάγραμμα αρχιτεκτονική είναι διαθέσιμο για λήψη στο [Κέντρο λήψης αρχείων της Microsoft]το[visio-download]. Σε αυτό το διάγραμμα είναι ενεργοποιημένη η "υπολογισμού - καρτέλα Εικονική πολλούς." 

![[0]][0]

Η αρχιτεκτονική περιλαμβάνει τα παρακάτω στοιχεία: 

- **Ορισμός διαθεσιμότητας.** Η [Ρύθμιση διαθεσιμότητα] [ availability set] περιέχει του ΣΠΣ και είναι απαραίτητο για την υποστήριξη τη [διαθεσιμότητα SLA για ΣΠΣ Azure][vm-sla].

- **VNet**. Κάθε Εικονική στα Azure έχει αναπτυχθεί σε ένα εικονικό δίκτυο (VNet) που διαιρείται περαιτέρω σε **δευτερεύοντα δίκτυα**.

- **Azure εξισορρόπηση φόρτου.** Η [μονάδα εξισορρόπησης φόρτου] κατανέμει εισερχόμενες αιτήσεις Internet για τις παρουσίες Εικονική σε ένα σύνολο διαθεσιμότητα. Η μονάδα εξισορρόπησης φόρτου περιλαμβάνει ορισμένες Σχετικοί πόροι:

  - **Δημόσια διεύθυνση IP.** Μια δημόσια διεύθυνση IP είναι απαραίτητο για την εξισορρόπηση φόρτου να λαμβάνετε την κυκλοφορία του Internet.

  - **Ρύθμιση παραμέτρων προσκηνίου.** Συσχετίζει στη δημόσια διεύθυνση IP με τη μονάδα εξισορρόπησης φόρτου.

  - **Χώρος συγκέντρωσης διεύθυνση παρασκηνίου.** Περιέχει τις διασυνδέσεις δικτύου (NIC) για το ΣΠΣ που θα λάβουν την εισερχόμενη κυκλοφορία.

- **Η φόρτωση εξισορρόπησης κανόνων.** Χρησιμοποιείται για τη διανομή κίνηση του δικτύου ανάμεσα σε όλα τα ΣΠΣ από το σύνολο διευθύνσεων παρασκηνίου. 

- **Κανόνες NAT.** Χρησιμοποιείται για τη δρομολόγηση κίνηση σε μια συγκεκριμένη Εικονική. Για παράδειγμα, για να ενεργοποιήσετε το πρωτόκολλο απομακρυσμένης επιφάνειας εργασίας (RDP) για να του ΣΠΣ, Δημιουργία κανόνα ξεχωριστό δίκτυο διεύθυνση μετάφραση (NAT) για κάθε Εικονική. 

- **Διασυνδέσεις δικτύου (NIC)**. Κάθε Εικονική έχει μια NIC για να συνδεθείτε στο δίκτυο.

- **Χώρος αποθήκευσης.** Λογαριασμοί χώρου αποθήκευσης κρατήστε τις εικόνες Εικονική και άλλοι πόροι που σχετίζονται με το αρχείο, όπως η Εικονική διαγνωστικών δεδομένων καταγράφονται από Azure.

## <a name="recommendations"></a>Συστάσεις

Azure προσφέρει πολλές διαφορετικές πόρους και τύπους πόρων, ώστε να μπορεί να είναι αυτή η αναφορά αρχιτεκτονική παρασχεθεί πολλούς διαφορετικούς τρόπους. Παρέχουμε ένα πρότυπο από διαχειριστή πόρων Azure για να εγκαταστήσετε την αρχιτεκτονική αναφοράς που ακολουθεί τις συστάσεις που περιγράφεται παρακάτω. Εάν επιλέξετε να δημιουργήσετε το δικό σας αρχιτεκτονική αναφορά θα πρέπει να ακολουθήσετε αυτές τις συστάσεις, εκτός αν έχετε συγκεκριμένες απαιτήσεις που δεν υποστηρίζει σύσταση. 

### <a name="availability-set-recommendations"></a>Διαθεσιμότητα Ορισμός συστάσεων

Πρέπει να δημιουργήσετε τουλάχιστον δύο ΣΠΣ στο τη διαθεσιμότητα οριστεί ώστε να υποστηρίζει τη [διαθεσιμότητα SLA για ΣΠΣ Azure][vm-sla]. Σημειώστε ότι η μονάδα εξισορρόπησης φόρτου Azure επίσης απαιτεί ότι εξισορρόπησης φόρτου ΣΠΣ ανήκει το ίδιο σύνολο διαθεσιμότητα.

### <a name="network-recommendations"></a>Συστάσεις σχετικά με δικτύου

Το ΣΠΣ πίσω από τη μονάδα εξισορρόπησης φόρτου πρέπει να τοποθετηθεί μέσα στο ίδιο υποδίκτυο. Δεν εκθέτουν του ΣΠΣ απευθείας με το Internet, αλλά αντί για αυτό να δώσει κάθε Εικονική μια ιδιωτική διεύθυνση IP. Προγράμματα-πελάτες συνδέονται χρησιμοποιώντας τη δημόσια διεύθυνση IP του τη μονάδα εξισορρόπησης φόρτου.

### <a name="load-balancer-recommendations"></a>Συστάσεις εξισορρόπησης φόρτου

Προσθήκη ΣΠΣ όλων στο τη διαθεσιμότητα ρύθμιση για το χώρο συγκέντρωσης παρασκηνίου διευθύνσεων από τη μονάδα εξισορρόπησης φόρτου.

Ορισμός κανόνων εξισορρόπησης φόρτου σε άμεση κυκλοφορία του δικτύου του ΣΠΣ. Για παράδειγμα, για να ενεργοποιήσετε την κυκλοφορία HTTP, δημιουργήστε έναν κανόνα που χαρτών θύρα 80 από τη ρύθμιση παραμέτρων προσκηνίου στη θύρα 80 στο χώρο συγκέντρωσης διεύθυνση παρασκηνίου. Όταν τη μονάδα εξισορρόπησης φόρτου λαμβάνει μια αίτηση στη θύρα 80 του στη δημόσια διεύθυνση IP, αυτό θα δρομολόγηση την αίτηση στη θύρα 80 σε μία από το NIC στο χώρο συγκέντρωσης διεύθυνση παρασκηνίου.

Ορισμός κανόνων NAT για δρομολόγηση κίνηση σε μια συγκεκριμένη Εικονική. Για παράδειγμα, για να ενεργοποιήσετε την RDP για να του ΣΠΣ δημιουργήσετε έναν νέο κανόνα NAT για κάθε Εικονική. Κάθε κανόνα θα πρέπει να αντιστοιχίσετε ένας αριθμός θύρας διακριτές στη θύρα 3389, η προεπιλεγμένη θύρα για RDP. (Για παράδειγμα, χρήση θύρας 50001 για "VM1," θύρα 50002 για "VM2", και ούτω καθεξής.) Αναθέστε τους κανόνες NAT το NIC στην του ΣΠΣ. 

### <a name="storage-account-recommendations"></a>Συστάσεις λογαριασμού χώρου αποθήκευσης

Δημιουργία λογαριασμών ξεχωριστή Azure χώρου αποθήκευσης για κάθε Εικονική για να θέσετε το εικονικό σκληρό δίσκων (VHD), για να αποφύγετε να επιτύχετε το λειτουργίες εισαγωγής/εξαγωγής ανά δεύτερο [όρια (IOP Προέλευσης)] σε[ vm-disk-limits] για λογαριασμούς του χώρου αποθήκευσης. 

Δημιουργήστε ένα λογαριασμό χώρου αποθήκευσης για αρχεία καταγραφής διαγνωστικών. Μπορεί να είναι κοινόχρηστη αυτόν το λογαριασμό χώρου αποθήκευσης από όλα του ΣΠΣ.

## <a name="scalability-considerations"></a>Ζητήματα κλιμάκωση

Υπάρχουν δύο επιλογές για την κλιμάκωση ανάληψη ΣΠΣ στο Azure: 

- Χρησιμοποιήστε μια μονάδα εξισορρόπησης φόρτου για τη διανομή κίνηση του δικτύου σε ένα σύνολο ΣΠΣ. Για να κλιμακωθεί ανάληψη, παροχή επιπλέον ΣΠΣ και να τα τοποθετήσετε πίσω από τη μονάδα εξισορρόπησης φόρτου. 

- Χρησιμοποιήστε [εικονική μηχανή κλίμακα σύνολα][vmss]. Ένα σύνολο κλίμακα περιέχει έναν αριθμό speficied πανομοιότυπες ΣΠΣ πίσω από μια μονάδα εξισορρόπησης φόρτου. Εικονική κλίμακα ορίζει autoscaling υποστήριξης που βασίζεται σε μετρικών απόδοσης. Καθώς ο φόρτος του ΣΠΣ αυξάνει, επιπλέον ΣΠΣ προστίθενται αυτόματα τη μονάδα εξισορρόπησης φόρτου. 

Οι επόμενες ενότητες συγκρίνετε αυτές τις δύο επιλογές.

### <a name="load-balancer-without-vm-scale-sets"></a>Εξισορρόπηση φόρτου χωρίς Εικονική κλίμακα σύνολα

Μια μονάδα εξισορρόπησης φόρτου λαμβάνει εισερχόμενες αιτήσεις δικτύου και κατανέμει τους το NIC στο χώρο συγκέντρωσης διεύθυνση παρασκηνίου. Για να κλιμακωθεί οριζόντια, προσθέσετε περισσότερες παρουσίες Εικονική το σύνολο διαθεσιμότητας (ή κατάργηση εκχώρησης ΣΠΣ για να κλιμακωθεί προς τα κάτω). 

Για παράδειγμα, ας υποθέσουμε ότι χρησιμοποιείτε ένα διακομιστή web. Προσθέστε έναν κανόνα εξισορρόπησης φόρτου για τη θύρα 80 ή/και τη θύρα 443 (για SSL). Όταν ένας υπολογιστής-πελάτης στέλνει μια αίτηση HTTP, την εξισορρόπηση φόρτου επιλέγει μια διεύθυνση IP παρασκηνίου χρησιμοποιώντας μια [αλγόριθμος κλειδώματος] [ load balancer hashing] που περιλαμβάνει τη διεύθυνση IP προέλευσης. Με αυτόν τον τρόπο, αιτήσεις πελάτη κατανέμονται σε όλα τα ΣΠΣ. 

> [AZURE.TIP] Όταν προσθέτετε μια νέα Εικονική διαθεσιμότητα ορίστε, βεβαιωθείτε ότι έχετε δημιουργήσει ένα NIC για την εικονική Μηχανή και προσθήκη NIC για το χώρο συγκέντρωσης παρασκηνίου διεύθυνση στις τη μονάδα εξισορρόπησης φόρτου. Διαφορετικά, κυκλοφορία Internet δεν θα δρομολογούνται τα νέα Εικονική.

Κάθε Azure συνδρομής περιέχει προεπιλεγμένα όρια, όπως ο μέγιστος αριθμός ΣΠΣ ανά περιοχή. Μπορείτε να αυξήσετε το όριο, αρχειοθέτηση μια αίτηση υποστήριξης. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Azure συνδρομής και όρια υπηρεσίας, όρια, και τους περιορισμούς][subscription-limits].  

### <a name="vm-scale-sets"></a>Εικονική κλίμακα σύνολα 

Εικονική κλίμακα σύνολα σας βοηθήσει να αναπτύξετε και να διαχειριστείτε ένα σύνολο πανομοιότυπες ΣΠΣ. Με όλους ΣΠΣ έχει ρυθμιστεί η ίδια, σύνολα κλίμακα Εικονική υποστήριξης true autoscale, χωρίς να προ-προμήθεια ΣΠΣ, καθιστώντας πιο εύκολη για τη δημιουργία ευρείας κλίμακας υπηρεσίες στόχευσης μεγάλο υπολογισμού, μεγάλο δεδομένα και περιεχόμενα φόρτους εργασίας. 

Για περισσότερες πληροφορίες σχετικά με τα σύνολα κλίμακα Εικονική, ανατρέξτε στο θέμα [Επισκόπηση ορίζει κλίμακα εικονική μηχανή][vmss].

Ζητήματα σχετικά με τη χρήση συνόλων κλίμακα Εικονική:

- Εξετάστε το ενδεχόμενο κλίμακα σύνολα εάν χρειάζεστε για να κλιμακωθεί ανάληψη ΣΠΣ, ή πρέπει να autoscale. 

- Προς το παρόν, σύνολα κλίμακα δεν υποστηρίζουν δίσκων δεδομένων. Οι επιλογές για την αποθήκευση δεδομένων είναι χώρο αποθήκευσης αρχείων στο Azure, η μονάδα δίσκου λειτουργικό σύστημα, η μονάδα δίσκου Temp ή ενός εξωτερικού χώρου αποθήκευσης, όπως το χώρο αποθήκευσης Azure. 

- Όλες τις εμφανίσεις Εικονική μέσα σε μια κλίμακα αυτόματη ρύθμιση ανήκει το ίδιο σύνολο διαθεσιμότητα, με τους τομείς 5 σφαλμάτων και 5 ενημέρωση τομείς.

- Από προεπιλογή, τα σύνολα κλίμακα Χρησιμοποιήστε "overprovisioning", που σημαίνει ότι το σύνολο κλίμακα αρχικά διατάξεις περισσότερες ΣΠΣ από ζητάτε, στη συνέχεια, διαγράφει το επιπλέον ΣΠΣ. Αυτό βελτιώνει το συνολικό ποσοστό επιτυχίας κατά την προμήθεια του ΣΠΣ. 

- Συνιστάται να μην περισσότερα και, στη συνέχεια, από 20 ΣΠΣ ανά αποθήκευσης απενεργοποιημένο λογαριασμό με overprovisioning ενεργοποιημένη ή όχι περισσότερους από 40 ΣΠΣ με overprovisioning.  

- Μπορείτε να βρείτε πρότυπα για τη διαχείριση πόρων για ανάπτυξη κλίμακα ορίζει στα [Πρότυπα γρήγορη έναρξη Azure][vmss-quickstart].

- Υπάρχουν δύο βασικοί τρόποι για να ρυθμίσετε τις παραμέτρους ΣΠΣ αναπτυχθεί σε ένα σύνολο κλίμακα: δημιουργία ενός προσαρμοσμένου ειδώλου ή χρησιμοποιήστε επεκτάσεις για να ρυθμίσετε την εικονική Μηχανή μετά την παροχή της υπηρεσίας.

    - Ένα σύνολο κλίμακα ενσωματωμένη σε μια προσαρμοσμένη εικόνα πρέπει να δημιουργήσετε όλα VHD δίσκου OS μέσα σε ένα λογαριασμό του χώρου αποθήκευσης. 

    - Με προσαρμοσμένες εικόνες, πρέπει να διατηρείτε ενημερωμένη την εικόνα.

    - Με τις επεκτάσεις, αυτό μπορεί να διαρκέσει περισσότερο χρόνο για μια Εικονική προμήθεια του φακέλου που μόλις Περιστροφή προς τα επάνω.

Για επιπλέον θέματα, ανατρέξτε στο θέμα [Σχεδίαση Εικονική κλίμακα σύνολα για κλίμακα][vmss-design].

> [AZURE.TIP]  Όταν χρησιμοποιείτε οποιαδήποτε λύση αυτόματης κλίμακας, δοκιμάστε την με εργασία επιπέδου παραγωγής φορτία καλά εκ των προτέρων. 

## <a name="availability-considerations"></a>Ζητήματα διαθεσιμότητας

Τη διαθεσιμότητα σύνολο κάνει την εφαρμογή σας πιο ευέλικτα σε προγραμματισμένες και μη προγραμματισμένη συντήρηση συμβάντα.

- _Προγραμματισμένη συντήρηση_ πραγματοποιείται όταν η Microsoft ενημερώνει τα υποκείμενα πλατφόρμα, μερικές φορές προκαλεί ΣΠΣ να γίνει επανεκκίνηση. Azure κάνει ότι του ΣΠΣ σε ένα σύνολο διαθεσιμότητα δεν είναι όλα επανεκκίνηση του την ίδια στιγμή, τουλάχιστον μία διατηρείται εκτελείται, ενώ άλλοι επανεκκίνηση.

- _Μη προγραμματισμένη συντήρηση_ συμβεί εάν υπάρχει ένα σφάλμα υλικού. Azure διασφαλίζει ότι έχουν παρασχεθεί ΣΠΣ σε ένα σύνολο διαθεσιμότητα σε περισσότερα από ένα διακομιστή rack. Αυτό σας βοηθά να μειώσετε την επίδραση των αποτυχίες υλικού, διακοπές του δικτύου, power τις διακοπές και ούτω καθεξής.

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Διαχείριση τη διαθεσιμότητα των εικονικές μηχανές][availability set]. Το βίντεο που ακολουθεί περιλαμβάνει επίσης μια επαρκής επισκόπηση των συνόλων διαθεσιμότητα: [Πώς μπορώ να ρυθμίσετε μια διαθεσιμότητα συνόλου ΣΠΣ κλίμακα][availability set ch9]. 

> [AZURE.WARNING]  Βεβαιωθείτε ότι η ρύθμιση παραμέτρων της διαθεσιμότητας ρύθμιση κατά την προμήθεια του Εικονική. Προς το παρόν, δεν υπάρχει τρόπος για να προσθέσετε μια Εικονική διαχείριση πόρων διαθεσιμότητα Ορισμός μετά την παροχή της υπηρεσίας η Εικονική.

Τη μονάδα εξισορρόπησης φόρτου χρησιμοποιεί [probes εύρυθμης λειτουργίας] για να παρακολουθείτε τη διαθεσιμότητα των παρουσιών Εικονική. Εάν μια δοκιμή του δεν είναι δυνατό να συνδεθούν με μια παρουσία μέσα σε ένα χρονικό όριο, την εξισορρόπηση φόρτου διακόπτει την αποστολή κίνηση σε συγκεκριμένη Εικονική. Ωστόσο, την εξισορρόπηση φόρτου θα συνεχίσουν να διερεύνηση και, εάν η Εικονική θα είναι διαθέσιμο ξανά, την εξισορρόπηση φόρτου συνεχίζουν στέλνει την κυκλοφορία σε συγκεκριμένη Εικονική.

Εδώ θα βρείτε ορισμένες προτάσεις σχετικά με τη καθετήρες εύρυθμης λειτουργίας εξισορρόπησης φόρτου:

- Καθετήρες να ελέγξετε HTTP ή TCP. Εάν εκτελέσετε ΣΠΣ ένα διακομιστή HTTP (των υπηρεσιών IIS, nginx, εφαρμογή Node.js και ούτω καθεξής), δημιουργήστε μια δοκιμή του HTTP. Διαφορετικά, δημιουργήστε μια δοκιμή του TCP.

- Για μια δοκιμή του HTTP, καθορίστε τη διαδρομή προς το τελικό σημείο HTTP. Η δοκιμή του ελέγχει για μια απόκριση HTTP 200 από αυτήν τη διαδικασία. Αυτό μπορεί να είναι διαδρομή του ριζικού καταλόγου ("/") ή μια παρακολούθηση εύρυθμης λειτουργίας το τελικό σημείο που υλοποιεί κάποια προσαρμοσμένη λογική για να ελέγξετε την εύρυθμη λειτουργία της εφαρμογής. Το τελικό σημείο πρέπει να επιτρέπουν ανώνυμη αιτήσεις HTTP.

- Η δοκιμή του αποστέλλεται από μια [γνωστή] [ health-probe-ip] διεύθυνση IP, 168.63.129.16. Βεβαιωθείτε ότι δεν μπορείτε να αποκλείσετε την κυκλοφορία σε ή από αυτό IP σε οποιοδήποτε πολιτικές τείχος προστασίας ή κανόνες ομάδας (NSG) ασφαλείας δικτύου.

- Χρήση [αρχείων καταγραφής εύρυθμης λειτουργίας δοκιμή του] [ health probe log] για να προβάλετε την κατάσταση του καθετήρες εύρυθμης λειτουργίας. Ενεργοποίηση καταγραφής στην πύλη του Azure για κάθε μονάδα εξισορρόπησης φόρτου. Αρχεία καταγραφής εγγράφονται στο χώρο αποθήκευσης αντικειμένων Blob του Azure. Τα αρχεία καταγραφής εμφάνιση πόσες ΣΠΣ σε παρασκηνίου δεν λαμβάνουν κίνηση του δικτύου λόγω αποτυχίας δοκιμή του απαντήσεων.

## <a name="manageability-considerations"></a>Ζητήματα διαχειρισιμότητα

Με πολλές ΣΠΣ, γίνεται σημαντικό για την αυτοματοποίηση διαδικασιών, ώστε να είναι αξιόπιστη και επαναλαμβανόμενο. Μπορείτε να χρησιμοποιήσετε την [Αυτοματοποίηση Azure] [ azure-automation] για την αυτοματοποίηση ανάπτυξης ενημερωμένων λειτουργικό σύστημα και άλλες εργασίες. Azure Αυτοματισμός είναι μια υπηρεσία αυτοματισμού που εκτελείται σε Azure και βασίζεται σε Windows PowerShell. Παράδειγμα δέσμες ενεργειών αυτοματισμού είναι διαθέσιμες από τη [Συλλογή Runbook] στο TechNet.

## <a name="security-considerations"></a>Ζητήματα ασφαλείας

Εικονικό δίκτυα είναι ένα όριο απομόνωσης κίνηση στο Azure. ΣΠΣ σε μία VNet μπορείτε να επικοινωνήσετε απευθείας με ΣΠΣ σε μια διαφορετική VNet. ΣΠΣ στην ίδια VNet μπορούν να επικοινωνούν, εκτός εάν δημιουργήσετε [ομάδες ασφαλείας δικτύου] [ nsg] (NSGs) για να περιορίσετε την κίνηση. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [υπηρεσίες cloud της Microsoft και ασφάλεια δικτύου][network-security].

Για την εισερχόμενη κυκλοφορία Internet, τους κανόνες εξισορρόπησης φόρτου ορίζουν ποια κυκλοφορία να επικοινωνήσετε μαζί του παρασκηνίου. Ωστόσο, οι κανόνες εξισορρόπησης φόρτου δεν υποστηρίζουν IP whitelisting, επομένως εάν θέλετε να whitelist ορισμένες δημόσια διευθύνσεις, προσθέστε μια NSG στο υποδίκτυο.

## <a name="solution-deployment"></a>Ανάπτυξη της λύσης

Μια ανάπτυξη για αρχιτεκτονική αναφοράς που υλοποιεί αυτές τις συστάσεις είναι διαθέσιμη στο GitHub. Αυτή η αρχιτεκτονική αναφορά περιλαμβάνει ένα εικονικό δίκτυο (VNet), ομάδα ασφαλείας δικτύου (NSG), εξισορρόπηση φόρτου και δύο εικονικές μηχανές (ΣΠΣ).

Η αρχιτεκτονική της αναφοράς μπορεί να αναπτυχθεί είτε με Windows ή Linux ΣΠΣ, ακολουθώντας τις παρακάτω οδηγίες: 

1. Κάντε δεξί κλικ στο κουμπί παρακάτω και επιλέξτε είτε "Άνοιγμα σύνδεσης σε νέα καρτέλα" ή "Άνοιγμα σύνδεσης σε νέο παράθυρο":  
[![Ανάπτυξη Azure](./media/blueprints/deploybutton.png)](https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fguidance-compute-multi-vm%2Fazuredeploy.json)

2. Όταν η σύνδεση έχει ανοίξει στην πύλη του Azure, πρέπει να εισαγάγετε τιμές για ορισμένες από τις ρυθμίσεις: 
    - Το όνομα της **ομάδας πόρων** ορίζεται ήδη στο αρχείο παραμέτρων, επομένως, επιλέξτε **Χρήση υπάρχουσας** και πληκτρολογήστε `ra-multi-vm-rg` στο πλαίσιο κειμένου.
    - Επιλέξτε την περιοχή από τη **θέση** αναπτυσσόμενο πλαίσιο.
    - Επεξεργαστείτε το **Πρότυπο ρίζας Uri** ή πλαίσια κειμένου **Uri ριζικού παραμέτρων** .
    - Επιλέξτε τον **Τύπο Os** από το αναπτυσσόμενο πλαίσιο, τα **windows** ή **linux**. 
    - Εξετάστε τους όρους και τις προϋποθέσεις και, στη συνέχεια, επιλέξτε το πλαίσιο ελέγχου **αποδέχομαι τους όρους και προϋποθέσεις που αναφέρονται παραπάνω** .
    - Κάντε κλικ στο κουμπί **αγοράς** .

3. Περιμένετε για την ανάπτυξη για να ολοκληρωθεί.

4. Τα αρχεία παραμέτρων περιλαμβάνουν σχεδιασμένου διαχειριστή όνομα χρήστη και τον κωδικό πρόσβασης και, συνιστάται να αμέσως αλλάζετε και τα δύο. Κάντε κλικ στο η Εικονική με το όνομα `ra-multi-vm1` στην πύλη του Azure. Στη συνέχεια, κάντε κλικ στο **Επαναφορά κωδικού πρόσβασης** σε το blade **υποστήριξη + αντιμετώπισης προβλημάτων** . Επιλέξτε **Επαναφορά κωδικού πρόσβασης** στο αναπτυσσόμενο πλαίσιο **κατάσταση** και, στη συνέχεια, επιλέξτε ένα νέο **όνομα χρήστη** και **τον κωδικό πρόσβασης**. Κάντε κλικ στο κουμπί " **Ενημέρωση** " για να αποθηκεύσετε το νέο όνομα χρήστη και κωδικό πρόσβασης. Επαναλάβετε τη διαδικασία για την εικονική Μηχανή με το όνομα `ra-multi-vm2`.

Για πληροφορίες σχετικά με επιπλέον τρόποι για να αναπτύξετε αυτήν την αρχιτεκτονική αναφοράς, ανατρέξτε στο θέμα στο αρχείο readme της τη [καθοδήγηση-μίας-εικονική] [ github-folder] GitHub φακέλου. 

## <a name="next-steps"></a>Επόμενα βήματα

Τοποθέτηση διάφορες ΣΠΣ πίσω από μια μονάδα εξισορρόπησης φόρτου είναι ένα μπλοκ δόμησης για τη δημιουργία αρχιτεκτονικές πολλαπλών επιπέδων. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Εκτελεί Windows ΣΠΣ για μια αρχιτεκτονική N-επιπέδων σε Azure] [ n-tier-windows] και [Εκτελεί ΣΠΣ Linux για μια αρχιτεκτονική N-επιπέδων στο Azure][n-tier-linux]

<!-- Links -->
[availability set]: ../virtual-machines/virtual-machines-windows-manage-availability.md
[availability set ch9]: https://channel9.msdn.com/Series/Microsoft-Azure-Fundamentals-Virtual-Machines/08
[azure-automation]: https://azure.microsoft.com/en-us/documentation/services/automation/
[azure-cli]: ../virtual-machines-command-line-tools.md
[bastion host]: https://en.wikipedia.org/wiki/Bastion_host
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/guidance-compute-multi-vm
[health probe log]: ../load-balancer/load-balancer-monitor-log.md
[καθετήρες εύρυθμης λειτουργίας]: ../load-balancer/load-balancer-overview.md#service-monitoring
[health-probe-ip]: ../virtual-network/virtual-networks-nsg.md#special-rules
[εξισορρόπηση φόρτου]: ../load-balancer/load-balancer-get-started-internet-arm-cli.md
[load balancer hashing]: ../load-balancer/load-balancer-overview.md#hash-based-distribution
[n-tier-linux]: guidance-compute-n-tier-vm-linux.md
[n-tier-windows]: guidance-compute-n-tier-vm.md
[naming conventions]: guidance-naming-conventions.md
[network-security]: ../best-practices-network-security.md
[nsg]: ../virtual-network/virtual-networks-nsg.md
[resource-manager-overview]: ../azure-resource-manager/resource-group-overview.md 
[Συλλογή Runbook]: ../automation/automation-runbook-gallery.md#runbooks-in-runbook-gallery
[single vm]: guidance-compute-single-vm.md
[subscription-limits]: ../azure-subscription-service-limits.md
[visio-download]: http://download.microsoft.com/download/1/5/6/1569703C-0A82-4A9C-8334-F13D0DF2F472/RAs.vsdx
[vm-disk-limits]: ../azure-subscription-service-limits.md#virtual-machine-disk-limits
[vm-sla]: https://azure.microsoft.com/en-us/support/legal/sla/virtual-machines/v1_2/
[vmss]: ../virtual-machine-scale-sets/virtual-machine-scale-sets-overview.md
[vmss-design]: ../virtual-machine-scale-sets/virtual-machine-scale-sets-design-overview.md
[vmss-quickstart]: https://azure.microsoft.com/documentation/templates/?term=scale+set
[VM-sizes]: https://azure.microsoft.com/documentation/articles/virtual-machines-windows-sizes/
[0]: ./media/blueprints/compute-multi-vm.png "Αρχιτεκτονική μιας λύσης πολλούς Εικονική στην Azure που αποτελείται από ένα σύνολο με δύο ΣΠΣ και μια μονάδα εξισορρόπησης φόρτου διαθεσιμότητα"
