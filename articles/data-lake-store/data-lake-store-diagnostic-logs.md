<properties 
   pageTitle="Προβολή αρχείων καταγραφής διαγνωστικών για το χώρο αποθήκευσης λίμνης δεδομένων Azure | Microsoft Azure" 
   description="Κατανόηση των τον τρόπο εγκατάστασης και πρόσβαση σε αρχεία καταγραφής διαγνωστικών για το χώρο αποθήκευσης λίμνης δεδομένων Azure " 
   services="data-lake-store" 
   documentationCenter="" 
   authors="nitinme" 
   manager="jhubbard" 
   editor="cgronlun"/>
 
<tags
   ms.service="data-lake-store"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="big-data" 
   ms.date="10/05/2016"
   ms.author="nitinme"/>

# <a name="accessing-diagnostic-logs-for-azure-data-lake-store"></a>Πρόσβαση σε αρχεία καταγραφής διαγνωστικών για το χώρο αποθήκευσης λίμνης δεδομένων Azure

Μάθετε πώς μπορείτε να ενεργοποιήσετε την καταγραφή διαγνωστικών για το λογαριασμό χώρου αποθήκευσης λίμνης δεδομένων σας και πώς μπορείτε να προβάλετε τα αρχεία καταγραφής που έχουν συλλεχθεί για το λογαριασμό σας.

Εταιρείες να ενεργοποιήσετε την καταγραφή διαγνωστικών για το λογαριασμό χώρου αποθήκευσης λίμνης Azure δεδομένων για τη συλλογή ίχνη ελέγχου πρόσβασης δεδομένων που παρέχει πληροφορίες όπως η λίστα των χρηστών την πρόσβαση στα δεδομένα, πόσο συχνά γίνεται τα δεδομένα, όγκο δεδομένων είναι αποθηκευμένη στο λογαριασμό, κ.λπ.

## <a name="prerequisites"></a>Προαπαιτούμενα στοιχεία

- **Azure μια συνδρομή**. Ανατρέξτε στο θέμα [λήψη Azure δωρεάν δοκιμαστικής έκδοσης](https://azure.microsoft.com/pricing/free-trial/).

- **Λογαριασμός azure δεδομένων λίμνης Store**. Ακολουθήστε τις οδηγίες στο θέμα [Γρήγορα αποτελέσματα με με την πύλη Azure χώρου αποθήκευσης λίμνης δεδομένων Azure](data-lake-store-get-started-portal.md).

## <a name="enable-diagnostic-logging-for-your-data-lake-store-account"></a>Ενεργοποιήσετε την καταγραφή διαγνωστικών για το λογαριασμό χώρου αποθήκευσης δεδομένων λίμνης

1. Πραγματοποιήστε είσοδο νέα [Πύλη Azure](https://portal.azure.com).

2. Ανοίξτε το λογαριασμό σας στο χώρο αποθήκευσης λίμνης δεδομένων και σας blade λογαριασμού χώρου αποθήκευσης λίμνης δεδομένων, κάντε κλικ στην επιλογή **Ρυθμίσεις**και, στη συνέχεια, κάντε κλικ στην επιλογή **Ρυθμίσεις διαγνωστικών**.

3. Στο το **διαγνωστικών** blade, κάντε τις ακόλουθες αλλαγές για να ρυθμίσετε τις παραμέτρους καταγραφή διαγνωστικών.

    ![Ενεργοποιήσετε την καταγραφή διαγνωστικών] (./media/data-lake-store-diagnostic-logs/enable-diagnostic-logs.png "Ενεργοποίηση αρχείων καταγραφής διαγνωστικών")

    * Ορισμός της **κατάστασής** σε **σε** για να ενεργοποιήσετε την καταγραφή διαγνωστικών.
    * Μπορείτε να επιλέξετε να/διαδικασία αποθήκευσης των δεδομένων σε δύο διαφορετικούς τρόπους.
        * Ενεργοποιήστε την επιλογή για να **εξαγάγετε στο συμβάν διανομέα** για ροή δεδομένων καταγραφής με ένα διανομέα συμβάν Azure. Πιθανώς θα χρησιμοποιήσετε αυτήν την επιλογή εάν έχετε μια διοχέτευση ροής επεξεργασίας για την ανάλυση εισερχόμενες αρχεία καταγραφής σε πραγματικό χρόνο. Εάν ενεργοποιήσετε αυτήν την επιλογή, πρέπει να παρέχετε τις λεπτομέρειες για την ενότητα συμβάντων Azure που θέλετε να χρησιμοποιήσετε.
        * Ενεργοποιήστε την επιλογή για να **εξαγάγετε με το λογαριασμό χώρου αποθήκευσης** για την αποθήκευση αρχείων καταγραφής αποθήκευσης Azure λογαριασμό. Μπορείτε να χρησιμοποιήσετε αυτήν την επιλογή εάν θέλετε να αρχειοθετήσετε τα δεδομένα που θα υποβάλλονται σε επεξεργασία δέσμης αργότερα. Εάν ενεργοποιήσετε αυτήν την επιλογή πρέπει να δώσετε ένα λογαριασμό αποθήκευσης Azure για να αποθηκεύσετε τα αρχεία καταγραφής για να.
    * Καθορίστε εάν θέλετε να λάβετε αρχεία καταγραφής ελέγχου ή αρχεία καταγραφής από την αίτηση ή και τα δύο.
    * Καθορίστε τον αριθμό των ημερών για την οποία πρέπει να διατηρούνται τα δεδομένα.
    * Κάντε κλικ στην επιλογή **Αποθήκευση**.

Αφού ενεργοποιήσετε διαγνωστικών ρυθμίσεων, μπορείτε να παρακολουθήσετε τα αρχεία καταγραφής στην καρτέλα **Αρχεία καταγραφής διαγνωστικών** .

## <a name="view-diagnostic-logs-for-your-data-lake-store-account"></a>Προβολή αρχείων καταγραφής διαγνωστικών για το λογαριασμό χώρου αποθήκευσης δεδομένων λίμνης

Υπάρχουν δύο τρόποι για να προβάλετε τα δεδομένα του αρχείου καταγραφής για το λογαριασμό χώρου αποθήκευσης λίμνης δεδομένων σας.

* Από την προβολή ρυθμίσεων λογαριασμού χώρου αποθήκευσης δεδομένων λίμνης
* Από το λογαριασμό χώρου αποθήκευσης Azure όπου αποθηκεύονται τα δεδομένα

### <a name="using-the-data-lake-store-settings-view"></a>Χρήση της προβολής δεδομένων ρυθμίσεων του χώρου αποθήκευσης λίμνης

1. Του χώρου αποθήκευσης δεδομένων λίμνης blade **Ρυθμίσεις** λογαριασμού, κάντε κλικ στην επιλογή **Αρχεία καταγραφής διαγνωστικών**.

    ![Καταγραφή διαγνωστικών προβολή] (./media/data-lake-store-diagnostic-logs/view-diagnostic-logs.png "Προβολή αρχείων καταγραφής διαγνωστικών") 

2. Στην τα **Αρχεία καταγραφής διαγνωστικών** blade, θα πρέπει να βλέπετε τα αρχεία καταγραφής Κατηγοριοποίηση κατά **Αρχεία καταγραφής ελέγχου** και **Αρχεία καταγραφής από την αίτηση**.
    * Αρχεία καταγραφής από την πρόσκληση σε κάθε αίτηση API που έγιναν στο λογαριασμό του χώρου αποθήκευσης δεδομένων λίμνης καταγραφής.
    * Αρχεία καταγραφής ελέγχου είναι παρόμοια με αίτημα αρχεία καταγραφής, αλλά παρέχουν μια πιο λεπτομερή ανάλυση των τις λειτουργίες που εκτελούνται στο λογαριασμό του χώρου αποθήκευσης δεδομένων λίμνης. Για παράδειγμα, μια κλήση API μία αποστολή στα αρχεία καταγραφής αίτηση ενδέχεται να έχει ως αποτέλεσμα πολλαπλές λειτουργίες "Προσάρτηση" στα αρχεία καταγραφής ελέγχου.

3. Κάντε κλικ στη σύνδεση **κάντε λήψη του** σε σχέση με κάθε καταχώρηση αρχείου καταγραφής για να κάνετε λήψη των αρχείων καταγραφής.

### <a name="from-the-azure-storage-account-that-contains-log-data"></a>Από το λογαριασμό χώρου αποθήκευσης Azure που περιέχει τα δεδομένα του αρχείου καταγραφής

1. Ανοίξτε το blade λογαριασμός Azure χώρου αποθήκευσης που σχετίζεται με δεδομένα λίμνης αποθήκευσης για τη σύνδεση και, στη συνέχεια, κάντε κλικ στην επιλογή αντικείμενα blob. Η **υπηρεσία Blob** blade παραθέτει δύο κοντέινερ.

    ![Καταγραφή διαγνωστικών προβολή] (./media/data-lake-store-diagnostic-logs/view-diagnostic-logs-storage-account.png "Προβολή αρχείων καταγραφής διαγνωστικών")

    * Το κοντέινερ **ιδέες-αρχεία καταγραφής ελέγχου** περιέχει τα αρχεία καταγραφής ελέγχου.
    * Το κοντέινερ **ιδέες-αρχεία καταγραφής-αιτήσεις** περιέχει τα αρχεία καταγραφής από την αίτηση.

2. Μέσα σε αυτά τα κοντέινερ, τα αρχεία καταγραφής είναι αποθηκευμένα στην περιοχή την ακόλουθη δομή.

    ![Καταγραφή διαγνωστικών προβολή] (./media/data-lake-store-diagnostic-logs/view-diagnostic-logs-storage-account-structure.png "Προβολή αρχείων καταγραφής διαγνωστικών")

    Ως παράδειγμα, μπορεί να είναι η πλήρης διαδρομή αρχείου καταγραφής ελέγχου`https://adllogs.blob.core.windows.net/insights-logs-audit/resourceId=/SUBSCRIPTIONS/<sub-id>/RESOURCEGROUPS/myresourcegroup/PROVIDERS/MICROSOFT.DATALAKESTORE/ACCOUNTS/mydatalakestore/y=2016/m=07/d=18/h=04/m=00/PT1H.json`

    Similary, θα μπορούσε να είναι η πλήρης διαδρομή σε ένα αρχείο καταγραφής αίτηση`https://adllogs.blob.core.windows.net/insights-logs-requests/resourceId=/SUBSCRIPTIONS/<sub-id>/RESOURCEGROUPS/myresourcegroup/PROVIDERS/MICROSOFT.DATALAKESTORE/ACCOUNTS/mydatalakestore/y=2016/m=07/d=18/h=14/m=00/PT1H.json`

## <a name="understand-the-structure-of-the-log-data"></a>Κατανόηση της δομής των δεδομένων αρχείου καταγραφής

Τα αρχεία καταγραφής ελέγχου και αίτηση είναι σε μορφή JSON. Σε αυτήν την ενότητα, εξετάστε τη δομή του JSON για την αίτηση και αρχεία καταγραφής ελέγχου.

### <a name="request-logs"></a>Πρόσκληση σε αρχεία καταγραφής

Ακολουθεί ένα δείγμα καταχώρησης στο αρχείο καταγραφής μορφοποίηση JSON αίτηση. Κάθε blob έχει ένα αντικείμενο ρίζας που ονομάζεται **εγγραφών** που περιέχει έναν πίνακα καταγραφής αντικειμένων.

    {
    "records": 
      [     
        . . . .
        ,
        {
             "time": "2016-07-07T21:02:53.456Z",
             "resourceId": "/SUBSCRIPTIONS/<subscription_id>/RESOURCEGROUPS/<resource_group_name>/PROVIDERS/MICROSOFT.DATALAKESTORE/ACCOUNTS/<data_lake_store_account_name>",
             "category": "Requests",
             "operationName": "GETCustomerIngressEgress",
             "resultType": "200",
             "callerIpAddress": "::ffff:1.1.1.1",
             "correlationId": "4a11c709-05f5-417c-a98d-6e81b3e29c58",
             "identity": "1808bd5f-62af-45f4-89d8-03c5e81bac30",
             "properties": {"HttpMethod":"GET","Path":"/webhdfs/v1/Samples/Outputs/Drivers.csv","RequestContentLength":0,"ClientRequestId":"3b7adbd9-3519-4f28-a61c-bd89506163b8","StartTime":"2016-07-07T21:02:52.472Z","EndTime":"2016-07-07T21:02:53.456Z"}
        }
        ,
        . . . .
      ]
    }

#### <a name="request-log-schema"></a>Αίτηση καταγραφής σχήματος

| Όνομα            | Τύπος   | Περιγραφή                                                                    |
|-----------------|--------|--------------------------------------------------------------------------------|
| ώρα            | Συμβολοσειρά | Η σήμανση χρόνου (σε UTC) του αρχείου καταγραφής                                              |
| resourceId      | Συμβολοσειρά | Τοποθετήστε το Αναγνωριστικό του πόρου που χρειάστηκαν λειτουργίας σε                            |
| κατηγορία        | Συμβολοσειρά | Η κατηγορία καταγραφής. Για παράδειγμα, **αιτήσεις**.                                   |
| operationName   | Συμβολοσειρά | Όνομα της λειτουργίας που έχει συνδεθεί. Για παράδειγμα, getfilestatus.              |
| resultType      | Συμβολοσειρά | Η κατάσταση της λειτουργίας, για παράδειγμα, 200.                                 |
| callerIpAddress | Συμβολοσειρά | Η διεύθυνση IP του προγράμματος-πελάτη που κάνει το αίτημα                                |
| correlationId   | Συμβολοσειρά | Το αναγνωριστικό του αρχείου καταγραφής που μπορεί να χρησιμοποιηθεί για να ομαδοποιήσετε ένα σύνολο σχετικών εγγραφές |
| ταυτότητα        | Αντικείμενο | Η ταυτότητα που δημιούργησε το αρχείο καταγραφής                                            |
| Ιδιότητες      | JSON   | Δείτε παρακάτω για λεπτομέρειες                                                          |

#### <a name="request-log-properties-schema"></a>Αίτηση καταγραφής ιδιότητες σχήματος

| Όνομα                 | Τύπος   | Περιγραφή                                               |
|----------------------|--------|-----------------------------------------------------------|
| HttpMethod           | Συμβολοσειρά | Η μέθοδος HTTP χρησιμοποιηθεί για τη λειτουργία. Για παράδειγμα, η ΛΉΨΗ. |
| Διαδρομή                 | Συμβολοσειρά | Η διαδρομή της λειτουργίας έχει πραγματοποιηθεί σε                   |
| RequestContentLength | Int    | Το μήκος του περιεχομένου της αίτησης HTTP                    |
| ClientRequestId      | Συμβολοσειρά | Το αναγνωριστικό που προσδιορίζει με μοναδικό τρόπο αυτήν την αίτηση              |
| Ώρα έναρξης            | Συμβολοσειρά | Την ώρα κατά την οποία ο διακομιστής έλαβε την πρόσκληση         |
| Ώρα λήξης              | Συμβολοσειρά | Την ώρα κατά την οποία ο διακομιστής αποστολή απόκρισης              |

### <a name="audit-logs"></a>Αρχεία καταγραφής ελέγχου

Ακολουθεί ένα δείγμα καταχώρησης στο αρχείο καταγραφής ελέγχου JSON μορφοποίηση. Κάθε blob περιλαμβάνει ένα αντικείμενο ρίζας που ονομάζεται **εγγραφών** που περιέχει έναν πίνακα καταγραφής αντικειμένων

    {
    "records": 
      [     
        . . . .
        ,
        {
             "time": "2016-07-08T19:08:59.359Z",
             "resourceId": "/SUBSCRIPTIONS/<subscription_id>/RESOURCEGROUPS/<resource_group_name>/PROVIDERS/MICROSOFT.DATALAKESTORE/ACCOUNTS/<data_lake_store_account_name>",
             "category": "Audit",
             "operationName": "SeOpenStream",
             "resultType": "0",
             "correlationId": "381110fc03534e1cb99ec52376ceebdf;Append_BrEKAmg;25.66.9.145",
             "identity": "A9DAFFAF-FFEE-4BB5-A4A0-1B6CBBF24355",
             "properties": {"StreamName":"adl://<data_lake_store_account_name>.azuredatalakestore.net/logs.csv"}
        }
        ,
        . . . .
      ]
    }

#### <a name="audit-log-schema"></a>Σχήμα αρχείου καταγραφής ελέγχου

| Όνομα            | Τύπος   | Περιγραφή                                                                    |
|-----------------|--------|--------------------------------------------------------------------------------|
| ώρα            | Συμβολοσειρά | Η σήμανση χρόνου (σε UTC) του αρχείου καταγραφής                                              |
| resourceId      | Συμβολοσειρά | Τοποθετήστε το Αναγνωριστικό του πόρου που χρειάστηκαν λειτουργίας σε                            |
| κατηγορία        | Συμβολοσειρά | Η κατηγορία καταγραφής. Για παράδειγμα, **ελέγχου**.                                      |
| operationName   | Συμβολοσειρά | Όνομα της λειτουργίας που έχει συνδεθεί. Για παράδειγμα, getfilestatus.              |
| resultType      | Συμβολοσειρά | Η κατάσταση της λειτουργίας, για παράδειγμα, 200.                                 |
| correlationId   | Συμβολοσειρά | Το αναγνωριστικό του αρχείου καταγραφής που μπορεί να χρησιμοποιηθεί για να ομαδοποιήσετε ένα σύνολο σχετικών εγγραφές |
| ταυτότητα        | Αντικείμενο | Η ταυτότητα που δημιούργησε το αρχείο καταγραφής                                            |
| Ιδιότητες      | JSON   | Δείτε παρακάτω για λεπτομέρειες                                                          |

#### <a name="audit-log-properties-schema"></a>Σχήμα ιδιότητες αρχείου καταγραφής ελέγχου

| Όνομα       | Τύπος   | Περιγραφή                              |
|------------|--------|------------------------------------------|
| StreamName | Συμβολοσειρά | Η διαδρομή της λειτουργίας έχει πραγματοποιηθεί σε  |


## <a name="samples-to-process-the-log-data"></a>Δείγματα για να επεξεργαστείτε τα δεδομένα του αρχείου καταγραφής

Χώρος αποθήκευσης λίμνης δεδομένων Azure παρέχει ένα δείγμα σχετικά με τον τρόπο για να επεξεργαστείτε και να αναλύσετε τα δεδομένα του αρχείου καταγραφής. Μπορείτε να βρείτε το δείγμα στο [https://github.com/Azure/AzureDataLake/tree/master/Samples/AzureDiagnosticsSample](https://github.com/Azure/AzureDataLake/tree/master/Samples/AzureDiagnosticsSample). 


## <a name="see-also"></a>Δείτε επίσης

- [Επισκόπηση του χώρου αποθήκευσης λίμνης δεδομένων Azure](data-lake-store-overview.md)
- [Διασφάλιση των δεδομένων στο χώρο αποθήκευσης δεδομένων λίμνης](data-lake-store-secure-data.md)

