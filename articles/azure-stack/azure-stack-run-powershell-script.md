<properties
    pageTitle="Ανάπτυξη Azure στοίβας POC | Microsoft Azure"
    description="Μάθετε πώς μπορείτε να προετοιμάσετε το POC στοίβας Azure και να εκτελέσετε τη δέσμη ενεργειών του PowerShell για την ανάπτυξη POC στοίβας Azure."
    services="azure-stack"
    documentationCenter=""
    authors="ErikjeMS"
    manager="byronr"
    editor=""/>

<tags
    ms.service="azure-stack"
    ms.workload="na"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="get-started-article"
    ms.date="10/20/2016"
    ms.author="erikje"/>

# <a name="deploy-azure-stack-poc"></a>Ανάπτυξη Azure στοίβας POC
Για να αναπτύξετε το POC στοίβας Azure, πρέπει πρώτα να [Προετοιμασία του υπολογιστή ανάπτυξης](#prepare-the-deployment-machine) και, στη συνέχεια, να [εκτελέσετε τη δέσμη ενεργειών ανάπτυξης PowerShell](#run-the-powershell-deployment-script).

## <a name="download-and-extract-microsoft-azure-stack-poc-tp2"></a>Λήψη και εξαγωγή Microsoft Azure στοίβας POC TP2

Πριν ξεκινήσετε, βεβαιωθείτε ότι έχετε τουλάχιστον 85 GB χώρου.

1. Η λήψη του Azure στοίβας POC TP2 αποτελείται από ένα αρχείο zip που περιέχει τα ακόλουθα αρχεία 12, άθροισμα ~ 20 GB:
    - 1 MicrosoftAzureStackPOC.EXE
2. Ελέγξτε την άδεια χρήσης οθόνης και τις πληροφορίες του οδηγού μισθωτής πρόγραμμα εξαγωγής και, στη συνέχεια, κάντε κλικ στο κουμπί **Επόμενο**.
3. Ελέγξτε την οθόνη δήλωση προστασίας προσωπικών δεδομένων και τις πληροφορίες του οδηγού μισθωτής πρόγραμμα εξαγωγής και, στη συνέχεια, κάντε κλικ στο κουμπί **Επόμενο**.
4. Επιλέξτε τον προορισμό για τα αρχεία για να γίνει εξαγωγή, κάντε κλικ στο κουμπί **Επόμενο**.
    - Η προεπιλογή είναι: <drive letter>:\<τρέχοντα φάκελο > \Microsoft POC στοίβας Azure
5. Ελέγξτε την οθόνη θέση προορισμού και τις πληροφορίες του οδηγού μισθωτής πρόγραμμα εξαγωγής και, στη συνέχεια, κάντε κλικ στην επιλογή " **Εξαγωγή** " για να εξαγάγετε τα αρχεία ThirdPartyLicenses.rtf και CloudBuilder.vhdx (~44.5 GB).

> [AZURE.NOTE] Μετά την εξαγωγή των αρχείων, μπορείτε να διαγράψετε το αρχείο zip για να ανακτήσετε χώρο στον υπολογιστή. Εναλλακτικά, μπορείτε να μετακινήσετε το αρχείο zip σε άλλη θέση, ότι αν χρειαστεί να αναπτύξετε εκ νέου που δεν χρειάζεται να επαναλάβετε τη λήψη των αρχείων zip.

## <a name="prepare-the-deployment-machine"></a>Προετοιμασία του υπολογιστή ανάπτυξης

1. Βεβαιωθείτε ότι μπορείτε να φυσική σύνδεση με τον υπολογιστή ανάπτυξης ή να έχετε πρόσβαση φυσική κονσόλα (όπως KVM). Θα χρειαστείτε πρόσβαση μετά την επανεκκίνηση του υπολογιστή ανάπτυξης στο βήμα 9.

2. Βεβαιωθείτε ότι ο υπολογιστής ανάπτυξης πληροί τις [ελάχιστες απαιτήσεις](azure-stack-deploy.md). Μπορείτε να χρησιμοποιήσετε τον [Έλεγχο ανάπτυξης για Azure στοίβας Technical Preview 2](https://gallery.technet.microsoft.com/Deployment-Checker-for-50e0f51b) για να επιβεβαιώσετε τις απαιτήσεις σας.

3. Συνδεθείτε ως τοπικού διαχειριστή στον υπολογιστή σας POC.

4. Αντιγράψτε το αρχείο CloudBuilder.vhdx C:\CloudBuilder.vhdx.

    > [AZURE.NOTE] Εάν επιλέξετε να μην χρησιμοποιήσετε την προτεινόμενη δέσμη ενεργειών για να προετοιμάσετε κεντρικό υπολογιστή POC (τα βήματα 5-βήμα 7), δεν καταχωρείτε οποιοδήποτε πλήκτρο άδεια χρήσης στη σελίδα της ενεργοποίησης. Περιλαμβάνεται μια δοκιμαστική έκδοση του Windows Server 2016 εικόνας και πληκτρολογώντας έναν αριθμό-κλειδί άδειας χρήσης προκαλεί λήξης μηνύματα προειδοποίησης.

5. Στον υπολογιστή POC, εκτελέστε την ακόλουθη δέσμη ενεργειών του PowerShell για να κάνετε λήψη των αρχείων υποστήριξης TP2 στοίβας Azure:

    ```powershell
    # Variables
    $Uri = 'https://raw.githubusercontent.com/Azure/AzureStack-Tools/master/Deployment/'
    $LocalPath = 'c:\AzureStack_TP2_SupportFiles'

    # Create folder
    New-Item $LocalPath -type directory

    # Download files
    ( 'BootMenuNoKVM.ps1', 'PrepareBootFromVHD.ps1', 'Unattend.xml', 'unattend_NoKVM.xml') | foreach { Invoke-WebRequest ($uri + $_) -OutFile ($LocalPath + '\' + $_) } 
    ```

    Αυτή η δέσμη ενεργειών η λήψη των αρχείων υποστήριξης TP2 στοίβας Azure στο φάκελο που καθορίζεται από την παράμετρο $LocalPath.
    
6. Ανοίξτε μια αναβαθμισμένα δικαιώματα κονσόλα PowerShell και να αλλάξετε τον κατάλογο όπου αντιγράψατε τα αρχεία.
    - 11 MicrosoftAzureStackPOC N.BIN (όπου N είναι 1-11)
7. Κάντε δεξί κλικ στη το MicrosoftAzureStackPOC.EXE > Εκτέλεση ως διαχειριστής.

8. Εκτελέστε τη δέσμη ενεργειών PrepareBootFromVHD.ps1. Αυτή η δέσμη ενεργειών και τα αρχεία χωρίς παρακολούθηση είναι διαθέσιμες με τις άλλες υποστήριξη δέσμες ενεργειών που παρέχεται μαζί με αυτό το build.
    Υπάρχουν πέντε παράμετροι για αυτήν τη δέσμη ενεργειών του PowerShell:
    - Το CloudBuilderDiskPath (απαιτείται) – τη διαδρομή προς το CloudBuilder.vhdx στον κεντρικό ΥΠΟΛΟΓΙΣΤΉ.
    - (Προαιρετικό) – DriverPath σάς επιτρέπει να προσθέτετε επιπλέον προγράμματα οδήγησης για τον κεντρικό υπολογιστή στο το εικονικό HD.
    - (Προαιρετικό) – ApplyUnattend ορίσετε αυτήν την παράμετρο διακόπτη για να αυτοματοποιήσετε τη ρύθμιση παραμέτρων του λειτουργικού συστήματος. Εάν καθοριστεί, ο χρήστης πρέπει να παρέχει το AdminPassword για να ρυθμίσετε το λειτουργικό σύστημα κατά την εκκίνηση (απαιτεί υπό την προϋπόθεση συνοδευτικό αρχείο unattend_NoKVM.xml).
    Εάν δεν χρησιμοποιείτε αυτήν την παράμετρο, το γενικό Unattend.XML χρησιμοποιείται χωρίς περαιτέρω προσαρμογή. KVM θα πρέπει να ολοκληρωθεί προσαρμογής μετά την επανεκκίνηση του.
    - AdminPassword (προαιρετικό) – χρησιμοποιείται μόνο όταν η παράμετρος ApplyUnattend έχει οριστεί, απαιτεί τουλάχιστον έξι χαρακτήρες.
    - (Προαιρετικό) VHDLanguage – Καθορίζει τη γλώσσα VHD, πεδίο '' "en-US".
    Η δέσμη ενεργειών που τεκμηριώνονται και περιέχει παράδειγμα χρήσης, αν και η χρήση της πιο συνηθισμένες είναι:
    
        `.\PrepareBootFromVHD.ps1 -CloudBuilderDiskPath C:\CloudBuilder.vhdx -ApplyUnattend`
    
        Εάν εκτελέσετε αυτή την εντολή ακριβές, πρέπει να εισαγάγετε το AdminPassword στη γραμμή εντολών.

9. Όταν ολοκληρωθεί η δέσμη ενεργειών, πρέπει να επιβεβαιώσετε την επανεκκίνηση. Εάν υπάρχουν άλλοι χρήστες συνδεδεμένοι, αυτή η εντολή θα αποτύχει. Εάν η εντολή αποτύχει, εκτελέστε την ακόλουθη εντολή:`Restart-Computer -force` 

10. Επανεκκίνηση του κεντρικού ΥΠΟΛΟΓΙΣΤΉ σε το λειτουργικό σύστημα του το CloudBuilder.vhdx, όπου η ανάπτυξη συνεχίζει.

> [AZURE.IMPORTANT] Azure στοίβας απαιτεί πρόσβαση στο Internet, είτε άμεσα είτε μέσω ενός διακομιστή μεσολάβησης διαφανές. Η ανάπτυξη TP2 POC υποστηρίζει ακριβώς ένα NIC για δικτύωση. Εάν έχετε πολλές NIC, βεβαιωθείτε ότι είναι ενεργοποιημένη η μόνο μία (και όλους τους άλλους είναι απενεργοποιημένες) πριν από την εκτέλεση της δέσμης ενεργειών ανάπτυξης στην επόμενη ενότητα.

## <a name="run-the-powershell-deployment-script"></a>Εκτελέστε τη δέσμη ενεργειών PowerShell ανάπτυξης

1. Συνδεθείτε ως τοπικού διαχειριστή στον υπολογιστή σας POC. Χρησιμοποιήστε τα διαπιστευτήρια που καθορίστηκαν στα προηγούμενα βήματα.

2. Ανοίξτε μια κονσόλα PowerShell αναβαθμισμένα δικαιώματα.

3. Στο PowerShell, την εκτέλεση αυτής της εντολής:`cd C:\CloudDeployment\Configuration`

4. Εκτελέστε την εντολή ανάπτυξη:`.\InstallAzureStackPOC.ps1`

5. Στη γραμμή εντολών **Enter τον κωδικό πρόσβασης** , πληκτρολογήστε έναν κωδικό πρόσβασης και, στη συνέχεια, επιβεβαιώστε τον. Πρόκειται για τον κωδικό πρόσβασης για όλες τις εικονικές μηχανές. Φροντίστε να καταγράψετε.

6. Εισαγάγετε τα διαπιστευτήρια για το λογαριασμό σας Azure Active Directory. Αυτός ο χρήστης πρέπει να είστε καθολικός διαχειριστής του μισθωτή καταλόγου.

7. Η διαδικασία ανάπτυξης μπορεί να διαρκέσει μερικές ώρες, κατά την οποία το σύστημα αυτόματα επανεκκίνηση μόνο μία φορά.

    > [AZURE.IMPORTANT] Εάν θέλετε να παρακολουθήσετε την πρόοδο ανάπτυξης, πραγματοποιήστε είσοδο ως azurestack\AzureStackAdmin. Εάν συνδεθείτε ως διαχειριστής του τοπικού μετά από τον υπολογιστή είναι συνδεδεμένος με τον τομέα, δεν θα δείτε την πρόοδο της ανάπτυξης. Μην Επανεκτέλεση ανάπτυξης, αντί για αυτό εισέλθετε ως azurestack\AzureStackAdmin για την επικύρωση που εκτελείται.

    Όταν ολοκληρωθεί με επιτυχία την ανάπτυξη, εμφανίζει την κονσόλα του PowerShell: **ΟΛΟΚΛΉΡΩΣΗΣ: ενέργεια 'Ανάπτυξη'**.

    Εάν αποτύχει η ανάπτυξη, μπορείτε να δοκιμάσετε να [εκτελέσετε ξανά το](azure-stack-rerun-deploy.md). Εναλλακτικά, μπορείτε να [αναπτύξετε ξανά](azure-stack-redeploy.md) από την αρχή.

### <a name="deployment-script-examples"></a>Παραδείγματα δέσμης ενεργειών ανάπτυξης

Εάν είναι μόνο την ταυτότητά σας AAD που σχετίζεται με ΈΝΑΝ κατάλογο AAD:

    cd C:\CloudDeployment\Configuration
    $adminpass = ConvertTo-SecureString "<LOCAL ADMIN PASSWORD>" -AsPlainText -Force
    $aadpass = ConvertTo-SecureString "<AAD GLOBAL ADMIN ACCOUNT PASSWORD>" -AsPlainText -Force
    $aadcred = New-Object System.Management.Automation.PSCredential ("<AAD GLOBAL ADMIN ACCOUNT>", $aadpass)
    .\InstallAzureStackPOC.ps1 -AdminPassword $adminpass -AADAdminCredential $aadcred

Εάν την ταυτότητά σας AAD είναι συσχετισμένες με το ΜΕΓΑΛΎΤΕΡΟ από ΜΊΑ AAD καταλόγου:

    cd C:\CloudDeployment\Configuration
    $adminpass = ConvertTo-SecureString "<LOCAL ADMIN PASSWORD>" -AsPlainText -Force
    $aadpass = ConvertTo-SecureString "<AAD GLOBAL ADMIN ACCOUNT PASSWORD>" -AsPlainText -Force
    $aadcred = New-Object System.Management.Automation.PSCredential ("<AAD GLOBAL ADMIN ACCOUNT> example: user@AADDirName.onmicrosoft.com>", $aadpass)
    .\InstallAzureStackPOC.ps1 -AdminPassword $adminpass -AADAdminCredential $aadcred -AADDirectoryTenantName "<SPECIFIC AAD DIRECTORY example: AADDirName.onmicrosoft.com>"

Εάν το περιβάλλον σας δεν έχει ενεργοποιηθεί DHCP, πρέπει να συμπεριλάβετε τις ακόλουθες ΠΡΌΣΘΕΤΕΣ παραμέτρους σε μία από τις επιλογές (παράδειγμα χρήσης που παρέχονται):

    .\InstallAzureStackPOC.ps1 -AdminPassword $adminpass -AADAdminCredential $aadcred
    -NatIPv4Subnet 10.10.10.0/24 -NatIPv4Address 10.10.10.3 -NatIPv4DefaultGateway 10.10.10.1


### <a name="installazurestackpocps1-optional-parameters"></a>Προαιρετικές παράμετροι InstallAzureStackPOC.ps1

| Παράμετρος | Απαιτούμενες/προαιρετικές | Περιγραφή |
| --------- | ----------------- | ----------- |
| AADAdminCredential | Προαιρετικό | Ορίζει το Azure Active Directory όνομα χρήστη και κωδικό πρόσβασης. Αυτά τα διαπιστευτήρια Azure μπορεί να είναι είτε ένα Αναγνωριστικό εταιρείας ή ένα λογαριασμό Microsoft. Για να χρησιμοποιήσετε τα διαπιστευτήρια λογαριασμού Microsoft, μπορείτε να παραλείψετε αυτό παράμετρο στο το cmdlet. Παράλειψη αυτή η παράμετρος ζητά από το αναδυόμενο παράθυρο έλεγχος ταυτότητας Azure κατά την ανάπτυξη. Αυτό δημιουργεί τα διακριτικά τον έλεγχο ταυτότητας και ανανέωσης χρησιμοποιείται κατά την ανάπτυξη. |
| AADDirectoryTenantName | Απαιτείται | Ορίζει τον κατάλογο μισθωτή. Χρησιμοποιήστε αυτήν την παράμετρο για να καθορίσετε ένα συγκεκριμένο κατάλογο όπου ο λογαριασμός AAD έχει δικαιώματα για τη διαχείριση πολλών καταλόγων. Πλήρες όνομα του ένα μισθωτή του καταλόγου AAD στο πλαίσιο μορφή <directoryName>. onmicrosoft.com. |
| AdminPassword | Απαιτείται | Ορίζει το λογαριασμό του τοπικού διαχειριστή και όλοι οι άλλοι λογαριασμοί χρηστών σε όλες τις εικονικές μηχανές δημιουργείται ως μέρος της ανάπτυξης POC. Αυτός ο κωδικός πρόσβασης, πρέπει να συμφωνεί με τον τρέχοντα κωδικό πρόσβασης του τοπικού διαχειριστή στον κεντρικό υπολογιστή. |
| AzureEnvironment | Προαιρετικό | Επιλέξτε το περιβάλλον Azure με την οποία θέλετε να καταχωρήσετε αυτήν την ανάπτυξη Azure στοίβας. Οι επιλογές περιλαμβάνουν *Δημόσια Azure*, *Azure - Κίνα*, *Azure - κυβέρνηση των η.π.α.*. |
| EnvironmentDNS | Προαιρετικό | Ως μέρος της ανάπτυξης Azure στοίβας δημιουργείται ένα διακομιστή DNS. Για να επιτρέψετε σε υπολογιστές εντός της λύσης για την επίλυση ονομάτων εκτός της σήμανσης, δώστε του υπάρχοντος διακομιστή DNS υποδομής. Ο διακομιστής DNS στο σήμανσης προωθεί αιτήσεις επίλυσης άγνωστο όνομα για αυτόν το διακομιστή. |
| NatIPv4Address | Απαιτείται για την υποστήριξη DHCP NAT | Ορίζει μια στατική διεύθυνση IP για το BGPNAT01 κατά ΜΆΖΑ. Χρησιμοποιήστε αυτήν την παράμετρο μόνο εάν η υπηρεσία DHCP δεν είναι δυνατό να αντιστοιχίσετε μια έγκυρη διεύθυνση IP για να αποκτήσετε πρόσβαση στο Internet. |
| NatIPv4DefaultGateway | Απαιτείται για την υποστήριξη DHCP NAT | Ορίζει την προεπιλεγμένη πύλη που χρησιμοποιείται με τη στατική διεύθυνση IP για το BGPNAT01 κατά ΜΆΖΑ. Χρησιμοποιήστε αυτήν την παράμετρο μόνο εάν η υπηρεσία DHCP δεν είναι δυνατό να αντιστοιχίσετε μια έγκυρη διεύθυνση IP για να αποκτήσετε πρόσβαση στο Internet.  |
| NatIPv4Subnet | Απαιτείται για την υποστήριξη DHCP NAT | Πρόθεμα υποδίκτυο IP που χρησιμοποιείται για DHCP μέσω NAT υποστήριξης. Χρησιμοποιήστε αυτήν την παράμετρο μόνο εάν η υπηρεσία DHCP δεν είναι δυνατό να αντιστοιχίσετε μια έγκυρη διεύθυνση IP για να αποκτήσετε πρόσβαση στο Internet.  |
| PublicVLan | Προαιρετικό | Ορίζει το αναγνωριστικό VLAN. Χρησιμοποιήστε αυτήν την παράμετρο μόνο εάν ο κεντρικός υπολογιστής και κατά ΜΆΖΑ BGPNAT01 πρέπει να ρυθμίσετε τις παραμέτρους Αναγνωριστικό εικονικού ΔΙΚΤΎΟΥ για να αποκτήσετε πρόσβαση φυσικής δίκτυο (και Internet). Για παράδειγμα,`.\InstallAzureStackPOC.ps1 –Verbose –PublicVLan 305` |
| Επανεκτέλεση | Προαιρετικό | Χρησιμοποιήστε αυτήν τη σημαία για να εκτελέσετε ξανά ανάπτυξης.  Όλα τα δεδομένα εισόδου προηγούμενη χρησιμοποιείται. Εκ νέου εισάγοντας δεδομένα προηγουμένως που παρέχονται δεν υποστηρίζεται, επειδή πολλές μοναδικές τιμές και χρησιμοποιούνται για την ανάπτυξη. |
| TimeServer | Προαιρετικό | Χρησιμοποιήστε αυτήν την παράμετρο, εάν πρέπει να καθορίσετε μια συγκεκριμένη ώρα διακομιστή. |

## <a name="next-steps"></a>Επόμενα βήματα

[Σύνδεση σε στοίβα Azure](azure-stack-connect-azure-stack.md)
