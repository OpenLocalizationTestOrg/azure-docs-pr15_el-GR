<properties
    pageTitle="Αντιμετώπιση προβλημάτων αποτυχίας εκχώρησης υπηρεσία Cloud | Microsoft Azure"
    description="Αντιμετώπιση προβλημάτων αποτυχίας εκχώρησης κατά την ανάπτυξη υπηρεσίες Cloud στο Azure"
    services="azure-service-management, cloud-services"
    documentationCenter=""
    authors="simonxjx"
    manager="felixwu"
    editor=""
    tags="top-support-issue"/>

<tags
    ms.service="cloud-services"
    ms.workload="na"
    ms.tgt_pltfrm="ibiza"
    ms.devlang="na"
    ms.topic="article"
    ms.date="10/12/2016"
    ms.author="v-six"/>



# <a name="troubleshooting-allocation-failure-when-you-deploy-cloud-services-in-azure"></a>Αντιμετώπιση προβλημάτων αποτυχίας εκχώρησης κατά την ανάπτυξη υπηρεσίες Cloud στο Azure

## <a name="summary"></a>Σύνοψη
Κατά την ανάπτυξη παρουσίες σε μια υπηρεσία Cloud ή προσθήκη νέας τοποθεσίας web ή παρουσίες ρόλο εργασίας, το Microsoft Azure εκχωρούν πόρους υπολογισμού. Κάποιες φορές ίσως λάβετε σφάλματα κατά την εκτέλεση αυτών των λειτουργιών, ακόμα και πριν να φτάσετε τα όρια Azure συνδρομής. Σε αυτό το άρθρο εξηγεί τις αιτίες με κάποιες από τις συνήθεις αποτυχίες εκχώρησης και προτείνει πιθανές αποκατάσταση εύρυθμης λειτουργίας. Οι πληροφορίες μπορεί να είναι επίσης χρήσιμο όταν σχεδιάζετε την ανάπτυξη των υπηρεσιών σας.

[AZURE.INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

### <a name="background--how-allocation-works"></a>Φόντο – πώς λειτουργεί η κατανομή
Οι διακομιστές στο Azure κέντρα δεδομένων δημιουργούνται διαμερίσματα σε συμπλεγμάτων. Νέα cloud εκχώρησης αίτησης εξυπηρέτησης επιχειρείται σε πολλές συμπλεγμάτων. Κατά την πρώτη παρουσία έχει αναπτυχθεί σε μια υπηρεσία cloud (σε είτε οργάνωσης ή παραγωγής), που υπηρεσία στο cloud λαμβάνει καρφιτσωμένη σε ένα σύμπλεγμα. Οποιαδήποτε περαιτέρω αναπτύξεων για την υπηρεσία cloud θα συμβεί στο ίδιο σύμπλεγμα. Σε αυτό το άρθρο, θα αναφέρονται στο εξής ως "καρφιτσωμένες σύμπλεγμα". Διάγραμμα 1 κάτω από το στοιχείο παρουσιάζει πεζών / κεφαλαίων σε μια κανονική κατανομή επιχειρείται σε πολλές συμπλεγμάτων; Διάγραμμα 2 απεικονίζει πεζών / κεφαλαίων σε μια ανάθεση που έχει καρφιτσωμένα στη σύμπλεγμα 2, επειδή αυτή είναι η οποία φιλοξενείται την υπάρχουσα CS_1 υπηρεσία Cloud.

![Εκχώρηση του διαγράμματος](./media/cloud-services-allocation-failure/Allocation1.png)

### <a name="why-allocation-failure-happens"></a>Γιατί συμβαίνει Αποτυχία εκχώρησης
Όταν μια αίτηση εκχώρησης είναι καρφιτσωμένα σε ένα σύμπλεγμα, υπάρχει μια μεγαλύτερη πιθανότητα αποτυγχάνει για να βρείτε δωρεάν πόρους δεδομένου ότι το χώρο συγκέντρωσης πόρων διαθέσιμη περιορίζεται σε ένα σύμπλεγμα. Επιπλέον, εάν είναι καρφιτσωμένα αίτησή σας εκχώρησης σε ένα σύμπλεγμα, αλλά τον τύπο του πόρου που ζητήθηκε δεν υποστηρίζεται από αυτό το σύμπλεγμα, την αίτησή σας θα αποτύχει ακόμη και αν το σύμπλεγμα έχει δωρεάν πόρων. Διάγραμμα 3 παρακάτω παρουσιάζει την περίπτωση όπου μια καρφιτσωμένη εκχώρησης απέτυχε επειδή το σύμπλεγμα μόνο υποψηφίου δεν διαθέτει δωρεάν πόρους. Διάγραμμα 4 παρουσιάζει την περίπτωση όπου μία καρφιτσωμένη εκχώρηση αποτυγχάνει επειδή το σύμπλεγμα μόνο υποψηφίου δεν υποστηρίζει το απαιτούμενο μέγεθος Εικονική, ακόμη και αν το σύμπλεγμα έχει δωρεάν πόρους.

![Αποτυχία καρφιτσωμένη εκχώρησης](./media/cloud-services-allocation-failure/Allocation2.png)

## <a name="troubleshooting-allocation-failure-for-cloud-services"></a>Αντιμετώπιση προβλημάτων αποτυχίας εκχώρησης για τις υπηρεσίες cloud
### <a name="error-message"></a>Μήνυμα σφάλματος
Μπορεί να εμφανιστεί το ακόλουθο μήνυμα σφάλματος:

    "Azure operation '{operation id}' failed with code Compute.ConstrainedAllocationFailed. Details: Allocation failed; unable to satisfy constraints in request. The requested new service deployment is bound to an Affinity Group, or it targets a Virtual Network, or there is an existing deployment under this hosted service. Any of these conditions constrains the new deployment to specific Azure resources. Please retry later or try reducing the VM size or number of role instances. Alternatively, if possible, remove the aforementioned constraints or try deploying to a different region."

### <a name="common-issues"></a>Συνήθη ζητήματα
Εδώ θα βρείτε τα κοινά σενάρια εκχώρησης που προκαλούν μια αίτηση εκχώρησης προκειμένου να είναι καρφιτσωμένη στη ενός μεμονωμένου συμπλέγματος.

- Για την ανάπτυξη στον υποδιαίρεση ενδιάμεσου σταδίου - εάν μια υπηρεσία cloud έχει μια ανάπτυξη σε δύο υποδοχή, στη συνέχεια, την υπηρεσία cloud ολόκληρο θα καρφιτσωθεί σε ένα συγκεκριμένο σύμπλεγμα.  Αυτό σημαίνει ότι εάν υπάρχει ήδη μια ανάπτυξη της παραγωγής υποδοχής, στη συνέχεια, μια νέα ενδιάμεσου σταδίου ανάπτυξη μπορεί μόνο να εκχωρηθεί στο ίδιο σύμπλεγμα ως την υποδοχή παραγωγής. Εάν το σύμπλεγμα είναι nearing χωρητικότητα, ενδέχεται να αποτύχει την αίτηση.

- Κλιμάκωση - Προσθήκη νέες παρουσίες σε μια υπάρχουσα υπηρεσία cloud πρέπει να εκχωρήσει στο ίδιο σύμπλεγμα.  Συνήθως μπορεί να εκχωρηθεί μικρό μέγεθος κλίμακας προσκλήσεις, αλλά όχι πάντα. Εάν το σύμπλεγμα είναι nearing χωρητικότητα, ενδέχεται να αποτύχει την αίτηση.

- Ομάδα συσχέτισης - μιας νέας ανάπτυξης σε μια υπηρεσία cloud κενή μπορεί να εκχωρηθεί από υφάσματος οποιαδήποτε συμπλέγματος στη συγκεκριμένη περιοχή, εκτός εάν η υπηρεσία cloud είναι καρφιτσωμένα σε μια ομάδα συσχέτισης. Στο ίδιο σύμπλεγμα θα εφαρμοστούν αναπτύξεις στην ίδια ομάδα συσχέτισης. Εάν το σύμπλεγμα είναι nearing χωρητικότητα, ενδέχεται να αποτύχει την αίτηση.

- Ομάδα συσχέτισης vNet - παλαιότερα εικονικού δίκτυα έχουν συνδεδεμένη με ομάδες συσχέτισης αντί για τις περιοχές και τις υπηρεσίες cloud σε αυτά τα δίκτυα εικονικού θα είναι καρφιτσωμένη στο σύμπλεγμα ομάδα συσχέτισης. Στο σύμπλεγμα καρφιτσωμένη θα εφαρμοστούν αναπτύξεις σε αυτόν τον τύπο του εικονικού δικτύου. Εάν το σύμπλεγμα είναι nearing χωρητικότητα, ενδέχεται να αποτύχει την αίτηση.

## <a name="solutions"></a>Λύσεις

1. Αναπτύξτε ξανά σε μια νέα υπηρεσία cloud - αυτή η λύση είναι πιθανό να είναι πιο επιτυχημένη καθώς επιτρέπει την πλατφόρμα για να επιλέξετε όλα συμπλεγμάτων στη συγκεκριμένη περιοχή.

    - Αναπτύξτε το φόρτο εργασίας σε μια νέα υπηρεσία cloud  

    - Ενημερώστε την εγγραφή CNAME ή μια εγγραφή στην οποία θα οδηγεί η νέα υπηρεσία cloud κίνηση

    - Μόλις μηδέν κίνηση πρόκειται να την παλιά τοποθεσία, μπορείτε να διαγράψετε την παλιά υπηρεσία cloud. Αυτή η λύση θα πρέπει να αναλαμβάνουν μηδέν χρόνου εκτός λειτουργίας.

2. Διαγραφή παραγωγής και ενδιάμεσου υποδοχές - αυτήν τη λύση θα διατηρήσει το υπάρχον όνομα DNS, αλλά θα προκαλέσει χρόνου εκτός λειτουργίας στην εφαρμογή σας.

    - Διαγραφή της παραγωγής και ενδιάμεσου υποδοχές από μια υπάρχουσα υπηρεσία cloud, ώστε να είναι κενό, η υπηρεσία στο cloud και, στη συνέχεια,

    - Δημιουργία νέας ανάπτυξης στην υπάρχουσα υπηρεσία cloud. Εκ νέου αυτό θα επιχειρήσει να εκχώρησης σε όλα συμπλεγμάτων στην περιοχή. Βεβαιωθείτε ότι η υπηρεσία cloud δεν είναι συνδεδεμένη με μια ομάδα συσχέτισης.

3. Δεσμευμένη διεύθυνση IP - αυτήν τη λύση θα διατηρεί την υπάρχουσα IP σας διεύθυνση, αλλά θα προκαλέσει χρόνου εκτός λειτουργίας στην εφαρμογή σας.  

    - Δημιουργία μιας ReservedIP για την υπάρχουσα ανάπτυξη χρήση του Powershell

    ```
    New-AzureReservedIP -ReservedIPName {new reserved IP name} -Location {location} -ServiceName {existing service name}
    ```

    - Ακολουθήστε #2 από σημείο άνωθεν, φροντίζοντας να καθορίσετε το νέο ReservedIP σε CSCFG της υπηρεσίας.

4. Κατάργηση ομάδας συσχέτισης για νέες αναπτύξεις - δεν είναι πλέον συνιστάται η συνάφεια ομάδες. Ακολουθήστε τα βήματα για το #1 παραπάνω για να αναπτύξετε μια νέα υπηρεσία στο cloud. Βεβαιωθείτε ότι η υπηρεσία cloud δεν είναι σε μια ομάδα συσχέτισης.

5. Μετατροπή σε τοπικές εικονικού δικτύου - δείτε [πώς μπορείτε να κάνετε μετεγκατάσταση από ομάδες συσχέτισης σε τοπικές εικονικό δίκτυο (VNet)](../virtual-network/virtual-networks-migrate-to-regional-vnet.md).
