<properties
pageTitle="Πώς μπορείτε να ενημερώσετε μια υπηρεσία cloud | Microsoft Azure"
description="Μάθετε πώς μπορείτε να ενημερώσετε τις υπηρεσίες cloud στο Azure. Μάθετε τον τρόπο ενημέρωσης σε μια υπηρεσία cloud εξελίσσεται για να βεβαιωθείτε ότι διαθεσιμότητα."
services="cloud-services"
documentationCenter=""
authors="Thraka"
manager="timlt"
editor=""/>
<tags
ms.service="cloud-services"
ms.workload="tbd"
ms.tgt_pltfrm="na"
ms.devlang="na"
ms.topic="article"
ms.date="08/10/2016"
ms.author="adegeo"/>

# <a name="how-to-update-a-cloud-service"></a>Πώς μπορείτε να ενημερώσετε μια υπηρεσία στο cloud

## <a name="overview"></a>Επισκόπηση
Στο 10.000 πόδια, ενημέρωση μια υπηρεσία cloud, συμπεριλαμβανομένων και των ρόλων και επισκέπτη λειτουργικό σύστημα, είναι μια διαδικασία τριών βημάτων. Αρχικά, πρέπει να αποσταλεί τα δυαδικά στοιχεία και αρχεία ρύθμισης παραμέτρων για τη νέα υπηρεσία cloud ή την έκδοση του λειτουργικού Συστήματος. Στη συνέχεια, Azure διατηρεί δικτύου και υπολογισμού πόρων για την υπηρεσία cloud, ανάλογα με τις απαιτήσεις για τη νέα έκδοση υπηρεσία cloud. Τέλος, Azure πραγματοποιήσει αναβάθμιση για να ενημερώσετε βαθμιαία μισθωτή στη νέα έκδοση ή επισκέπτη OS, διατηρώντας τη διαθεσιμότητά σας. Σε αυτό το άρθρο περιγράφει τις λεπτομέρειες της αυτό το τελευταίο βήμα – η αναβάθμιση.

## <a name="update-an-azure-service"></a>Ενημέρωση μιας υπηρεσίας της Azure

Azure οργανώνουν το ρόλο παρουσίες σε λογικές ομαδοποιήσεις που ονομάζεται αναβάθμισης τομείς (UD). Αναβάθμιση τομείς (UD) είναι λογική σύνολα παρουσίες ρόλο που έχουν ενημερωθεί ως ομάδα.  Azure ενημερώσει μια cloud υπηρεσίας UD μία κάθε φορά, που σας επιτρέπουν να παρουσίες άλλες UDs για να συνεχίσετε τη λειτουργία κίνηση.

Ο προεπιλεγμένος αριθμός αναβάθμισης τομείς είναι 5. Μπορείτε να καθορίσετε διαφορετικό αριθμό αναβάθμισης τομείς, συμπεριλαμβάνοντας το χαρακτηριστικό upgradeDomainCount στο αρχείο ορισμού της υπηρεσίας (.csdef). Για περισσότερες πληροφορίες σχετικά με το χαρακτηριστικό upgradeDomainCount, ανατρέξτε στο θέμα [WebRole σχήμα](https://msdn.microsoft.com/library/azure/gg557553.aspx) ή το [Σχήμα WorkerRole](https://msdn.microsoft.com/library/azure/gg557552.aspx).

Όταν πραγματοποιείτε μια ενημέρωση στην ίδια θέση από έναν ή περισσότερους ρόλους στην υπηρεσία, Azure ενημερώνει τα σύνολα των παρουσιών ρόλο σύμφωνα με την αναβάθμιση τομέα στην οποία ανήκουν. Azure ενημερώσεις όλων των εμφανίσεων ενός δεδομένου τομέα αναβάθμισης – διακοπή, ενημέρωση, μεταφέρετε τα πίσω ηλεκτρονικής –, στη συνέχεια, πραγματοποιεί μετακίνηση στο επόμενο τομέα. Με διακοπή μόνο το παρουσιών που εκτελούνται στον τρέχοντα τομέα αναβάθμισης, Azure διασφαλίζει ότι παρουσιάζεται μια ενημέρωση με τις ελάχιστες δυνατές επιπτώσεις στην υπηρεσία εκτελείται. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [πώς εξελίσσεται η ενημέρωση](#howanupgradeproceeds) αργότερα σε αυτό το άρθρο.

> [AZURE.NOTE] Ενώ η όρους **Ενημέρωση** και η **αναβάθμιση** έχει ελαφρώς διαφορετική έννοια στο περιβάλλον Azure, τους μπορεί να χρησιμοποιηθεί εναλλακτικά για τις διαδικασίες και τις περιγραφές των δυνατοτήτων σε αυτό το έγγραφο.

Υπηρεσία σας πρέπει να καθορίσετε τουλάχιστον δύο παρουσίες του ρόλου για τον συγκεκριμένο ρόλο να ενημερωθούν στην ίδια θέση χωρίς χρόνου εκτός λειτουργίας. Εάν η υπηρεσία αποτελείται μόνο μία παρουσία του ένα ρόλο, την υπηρεσία θα είναι διαθέσιμη, μέχρι να ολοκληρωθεί η ενημέρωση στην ίδια θέση.

Αυτό το θέμα καλύπτει τις ακόλουθες πληροφορίες σχετικά με τις ενημερώσεις Azure:

-   [Επιτρέπεται οι αλλαγές υπηρεσίας κατά τη διάρκεια της ενημέρωσης](#AllowedChanges)
-   [Πώς εξελίσσεται αναβάθμισης](#howanupgradeproceeds)
-   [Επαναφορά της ενημέρωσης](#RollbackofanUpdate)
-   [Προετοιμασία πολλές mutating λειτουργίες σε μια ανάπτυξη βρίσκεται σε εξέλιξη](#multiplemutatingoperations)
-   [Κατανομή ρόλων αναβάθμισης τομέων](#distributiondfroles)

<a name="AllowedChanges"></a>
## <a name="allowed-service-changes-during-an-update"></a>Επιτρέπεται οι αλλαγές υπηρεσίας κατά τη διάρκεια της ενημέρωσης
Ο παρακάτω πίνακας παρουσιάζει τις επιτρεπόμενων αλλαγές σε μια υπηρεσία κατά τη διάρκεια της ενημέρωσης:

|Αλλαγές που επιτρέπεται να φιλοξενίας, τις υπηρεσίες και τους ρόλους|Ενημέρωση στην ίδια θέση|Σταδιακή (VIP αντιμετάθεσης)|Διαγραφή και εκ νέου ανάπτυξη|
|---|---|---|---|
|Έκδοση λειτουργικού συστήματος|Ναι|Ναι|Ναι
|Επίπεδο αξιοπιστίας .NET|Ναι|Ναι|Ναι|
|Εικονική μηχανή μέγεθος<sup>1</sup>|Ναι,<sup>2</sup>|Ναι|Ναι|
|Ρυθμίσεις τοπικού χώρου αποθήκευσης|Αύξηση μόνο<sup>2</sup>|Ναι|Ναι|
|Προσθήκη ή κατάργηση ρόλων σε μια υπηρεσία|Ναι|Ναι|Ναι|
|Αριθμός των παρουσιών της συγκεκριμένο ρόλο|Ναι|Ναι|Ναι|
|Αριθμό ή τύπο τελικά σημεία για μια υπηρεσία|Ναι,<sup>2</sup>|Όχι|Ναι|
|Ονόματα και τις τιμές των ρυθμίσεων παραμέτρων|Ναι|Ναι|Ναι|
|Οι τιμές (αλλά όχι ονόματα) των ρυθμίσεων παραμέτρων|Ναι|Ναι|Ναι|
|Προσθήκη νέων πιστοποιητικών|Ναι|Ναι|Ναι|
|Αλλαγή υπάρχοντος πιστοποιητικών|Ναι|Ναι|Ναι|
|Ανάπτυξη νέου κώδικα|Ναι|Ναι|Ναι|
<sup>1</sup> Αλλαγή μεγέθους περιορισμένη στο υποσύνολο των μεγέθη που είναι διαθέσιμα για την υπηρεσία cloud.

<sup>2</sup> Απαιτεί 1,5 SDK Azure ή νεότερες εκδόσεις.

> [AZURE.WARNING] Αλλαγή του μεγέθους εικονική μηχανή θα καταστρέψει τοπικών δεδομένων.


Τα ακόλουθα στοιχεία δεν υποστηρίζονται κατά τη διάρκεια της ενημέρωσης:

-   Αλλαγή του ονόματος του ρόλου. Κατάργηση και, στη συνέχεια, προσθέστε το ρόλο με το νέο όνομα.
-   Αλλαγή της καταμέτρησης αναβαθμίσετε τον τομέα.
-   Μείωση του μεγέθους των τοπικών πόρων.

Εάν πραγματοποιείτε άλλες ενημερώσεις στον ορισμό της υπηρεσίας, όπως μείωση του μεγέθους του τοπικού πόρου, πρέπει να εκτελέσετε μια ενημερωμένη έκδοση αντιμετάθεσης VIP αντί για αυτό. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Εναλλαγή ανάπτυξης](https://msdn.microsoft.com/library/azure/ee460814.aspx).

<a name="howanupgradeproceeds"></a>
## <a name="how-an-upgrade-proceeds"></a>Πώς εξελίσσεται αναβάθμισης
Μπορείτε να αποφασίσετε εάν θέλετε να ενημερώσετε όλους τους ρόλους στην υπηρεσία ή ένα μεμονωμένο ρόλο στην υπηρεσία. Σε κάθε περίπτωση, όλες τις εμφανίσεις της κάθε ρόλο που αναβαθμίζεται και ανήκουν στον πρώτο τομέα αναβάθμισης έχουν διακοπεί αναβαθμιστεί και επαναφέρει ηλεκτρονικά. Όταν είναι πάλι σε σύνδεση, τις παρουσίες του δεύτερου αναβάθμισης τομέα έχουν διακοπεί αναβαθμιστεί και επαναφέρει ηλεκτρονικά. Μια υπηρεσία cloud μπορούν να έχουν πολύ μία αναβάθμιση ενεργό κάθε φορά. Η αναβάθμιση πραγματοποιείται πάντα σε σχέση με την πιο πρόσφατη έκδοση της υπηρεσίας cloud.

Το παρακάτω διάγραμμα παρουσιάζει πώς εξελίσσεται η αναβάθμιση, αν κάνετε αναβάθμιση όλους τους ρόλους στην υπηρεσία:

![Αναβάθμιση υπηρεσίας] (media/cloud-services-update-azure-service/IC345879.png "Αναβάθμιση υπηρεσίας")

Αυτό το επόμενο διάγραμμα απεικονίζει τον τρόπο η ενημέρωση εξελίσσεται αν κάνετε αναβάθμιση μόνο μία ρόλου:

![Αναβάθμιση ρόλων] (media/cloud-services-update-azure-service/IC345880.png "Αναβάθμιση ρόλων")  

> [AZURE.NOTE] Κατά την αναβάθμιση υπηρεσίας από μια μεμονωμένη εμφάνιση σε πολλές παρουσίες της υπηρεσίας γνωστοποιείται προς τα κάτω κατά την εκτέλεση της αναβάθμισης λόγω των υπηρεσιών Azure αναβαθμίσεις τρόπο. Διαθεσιμότητα υπηρεσίας την υπηρεσία επιπέδου σύμβαση εγγυοδοτικό ισχύει μόνο για τις υπηρεσίες που έχουν αναπτυχθεί με περισσότερες από μία παρουσία. Η παρακάτω λίστα περιγράφει τον τρόπο που τα δεδομένα σε κάθε μονάδα δίσκου επηρεάζεται από κάθε σενάριο αναβάθμισης Azure υπηρεσίας:
>
>Εικονική επανεκκινήστε τον υπολογιστή:
>
-   Γ: διατηρούνται
-   Δ: διατηρούνται
-   Ε: διατηρούνται
>
>Πύλης επανεκκινήστε τον υπολογιστή:
>
-   Γ: διατηρούνται
-   Δ: διατηρούνται
-   Ε: καταστρέφονται
>
>Πύλη Reimage:
>
-   Γ: διατηρούνται
-   Δ: καταστρέφονται
-   Ε: καταστρέφονται

>Αναβάθμιση στην ίδια θέση:
>
-   Γ: διατηρούνται
-   Δ: διατηρούνται
-   Ε: καταστρέφονται
>
>Μετεγκατάσταση κόμβου:
>
-   Γ: καταστρέφονται
-   Δ: καταστρέφονται
-   Ε: καταστρέφονται

>Σημειώστε ότι, στην παραπάνω λίστα, η μονάδα δίσκου ε: αντιπροσωπεύει το ρόλο ριζική μονάδα δίσκου και δεν πρέπει να σχεδιασμένου. Αντί για αυτό, μπορείτε να χρησιμοποιήσετε τη μεταβλητή περιβάλλοντος % RoleRoot % για να αντιπροσωπεύει τη μονάδα δίσκου.

>Για να ελαχιστοποιήσετε το χρόνο εκτός λειτουργίας κατά την αναβάθμιση υπηρεσίας μίας μόνο παρουσίας, αναπτύξετε μια νέα υπηρεσία πολλών παρουσιών διακομιστή δοκιμής και εκτελέστε μια ανταλλαγή VIP.

Κατά τη διάρκεια μιας αυτόματης ενημέρωσης, του ελεγκτή ύφασμα Azure αξιολογεί περιοδικά την εύρυθμη λειτουργία της υπηρεσίας cloud για να καθορίσετε πότε είναι ασφαλείς για να καθοδηγήσετε το επόμενο UD. Αυτή η αξιολόγηση εύρυθμης λειτουργίας εκτελείται σε βάση ανά ρόλο και θεωρεί μόνο παρουσίες στην πιο πρόσφατη έκδοση (δηλαδή παρουσίες από UDs που έχετε ήδη έχουν περπάτησαν). Που επιβεβαιώνει έναν ελάχιστο αριθμό περιόδων ρόλο, για κάθε ρόλο, έχουν επιτύχει καλή κατάσταση τερματικού.

### <a name="role-instance-start-timeout"></a>Το χρονικό όριο Έναρξη παρουσία ρόλων
Στον ελεγκτή ύφασμα θα Περιμένετε 30 λεπτά για κάθε παρουσία ρόλο για την επίτευξη κατάσταση αποτελέσματα. Εάν η διάρκεια χρονικού ορίου παρέλθει, του ελεγκτή υφάσματος θα συνεχίσουν παρουσίαση μερικών στο επόμενο εμφανιζόμενο ρόλο.

<a name="RollbackofanUpdate"></a>
## <a name="rollback-of-an-update"></a>Επαναφορά της ενημέρωσης
Azure παρέχει ευελιξία στη Διαχείριση υπηρεσιών στη διάρκεια μιας ενημέρωσης, επιτρέποντάς σας να ξεκινήσετε πρόσθετες λειτουργίες σε μια υπηρεσία, μετά την αρχική ενημερωμένη αίτηση γίνει αποδεκτή από τον ελεγκτή ύφασμα Azure. Μια επαναφορά μπορεί να εκτελεστεί μόνο όταν μια ενημερωμένη έκδοση (αλλαγή ρύθμισης παραμέτρων) ή αναβάθμιση βρίσκεται σε κατάσταση **σε εξέλιξη** στην ανάπτυξη. Μια ενημερωμένη έκδοση ή αναβάθμιση θεωρείται σε εξέλιξη με την προϋπόθεση ότι υπάρχει τουλάχιστον μία παρουσία της υπηρεσίας που δεν έχει ενημερωθεί ακόμα στη νέα έκδοση. Για να ελέγξετε αν επιτρέπεται μια επαναφορά, ελέγξτε την τιμή της σημαίας RollbackAllowed, επιστρέφεται από λειτουργίες [Γρήγορα ανάπτυξης](https://msdn.microsoft.com/library/azure/ee460804.aspx) και [Λήψη ιδιοτήτων υπηρεσία Cloud](https://msdn.microsoft.com/library/azure/ee460806.aspx) , έχει οριστεί στην τιμή true.

> [AZURE.NOTE] Μόνο έχει νόημα για να καλέσετε επαναφοράς για μια ενημερωμένη έκδοση **στην ίδια θέση** ή αναβάθμιση, επειδή VIP αντιμετάθεσης αναβαθμίσεις περιλαμβάνουν αντικαθιστώντας μία ολόκληρη παρουσία εκτέλεση της υπηρεσίας σας με μια άλλη.

Επαναφορά της ενημέρωσης σε εξέλιξη περιλαμβάνει τα παρακάτω εφέ στην ανάπτυξη:

-   Όλες τις εμφανίσεις ρόλο που είχαν δεν έχουν ενημερωθεί ή ακόμα αναβαθμιστεί στη νέα έκδοση δεν είναι ενημερωμένο ή αναβαθμιστεί, επειδή αυτές τις παρουσίες ήδη χρησιμοποιείτε την έκδοση προορισμού της υπηρεσίας.
-   Όλες τις εμφανίσεις ρόλο που είχε ήδη ενημερωθεί ή αναβαθμιστεί στη νέα έκδοση του πακέτου του service (\*.cspkg) αρχείο ή η ρύθμιση παραμέτρων της υπηρεσίας (\*.cscfg) αρχείο (ή και τα δύο αρχεία) είναι αναστροφή στην έκδοση πριν από την αναβάθμιση από αυτά τα αρχεία.

Αυτό λειτουργικά παρέχεται από τις ακόλουθες δυνατότητες:

-   Η [Επαναφορά ενημέρωση ή αναβάθμιση](https://msdn.microsoft.com/library/azure/hh403977.aspx) λειτουργία, που μπορεί να ονομάζεται στην ενημέρωση της ρύθμισης παραμέτρων (που ενεργοποιείται κάνοντας κλήσης [Αλλαγή ρύθμισης παραμέτρων ανάπτυξης](https://msdn.microsoft.com/library/azure/ee460809.aspx)) ή αναβάθμισης (που ενεργοποιείται κάνοντας κλήσης [Αναβάθμιση ανάπτυξης](https://msdn.microsoft.com/library/azure/ee460793.aspx)), με την προϋπόθεση ότι υπάρχει τουλάχιστον μία παρουσία του στην υπηρεσία η οποία δεν έχει ενημερωθεί ακόμα στη νέα έκδοση.
-   Το στοιχείο κλειδωμένο και το στοιχείο RollbackAllowed, που επιστρέφονται ως μέρος του σώματος απόκρισης τις λειτουργίες [Γρήγορα ανάπτυξης](https://msdn.microsoft.com/library/azure/ee460804.aspx) και [Λήψη ιδιοτήτων υπηρεσία Cloud](https://msdn.microsoft.com/library/azure/ee460806.aspx) :
    1.  Το στοιχείο κλειδωμένο σάς επιτρέπει να εντοπίσουν όταν μια λειτουργία mutating μπορεί να ενεργοποιηθεί σε μια δεδομένη ανάπτυξη.
    2.  Το στοιχείο RollbackAllowed σάς επιτρέπει να εντοπίσουν όταν η λειτουργία [Επαναφοράς ενημέρωση ή αναβάθμιση](https://msdn.microsoft.com/library/azure/hh403977.aspx) , μπορεί να είναι ονομάζεται σε μια δεδομένη ανάπτυξη.

    Για να εκτελέσετε μια επαναφορά, δεν χρειάζεται να ελέγξετε το κλειδωμένο και τα στοιχεία RollbackAllowed. Αρκεί να επιβεβαιώσετε ότι RollbackAllowed έχει οριστεί στην τιμή true. Αυτά τα στοιχεία επιστρέφονται μόνο εάν αυτές οι μέθοδοι καλούνται, χρησιμοποιώντας την κεφαλίδα αίτησης οριστεί σε "x-ms-έκδοση: 2011-10-01" ή νεότερη έκδοση. Για περισσότερες πληροφορίες σχετικά με τις κεφαλίδες τήρηση ιστορικού εκδόσεων, ανατρέξτε στο θέμα [Διαχείριση υπηρεσίας διαχείρισης εκδόσεων](https://msdn.microsoft.com/library/azure/gg592580.aspx).

Υπάρχουν ορισμένες περιπτώσεις όπου μια επαναφορά της ενημέρωσης ή δεν υποστηρίζεται αναβάθμιση, αυτά είναι τα εξής:

-   Μείωση τοπικούς πόρους - εάν η ενημέρωση αυξάνει την τοπικούς πόρους για ένα ρόλο της πλατφόρμας Azure δεν επιτρέπει την κατάργηση της εγκατάστασης. 
-   Περιορισμοί ορίου - εάν η ενημέρωση ολοκληρώθηκε με μια κλίμακα προς τα κάτω τη λειτουργία ενδέχεται να μην έχετε επαρκή ορίου υπολογισμού για να ολοκληρωθεί η λειτουργία επαναφοράς. Κάθε Azure συνδρομή έχει ένα όριο που σχετίζονται με αυτό που καθορίζει το μέγιστο αριθμό πυρήνων που μπορεί να χρησιμοποιηθεί από όλες τις υπηρεσίες φιλοξενούμενη που ανήκουν σε αυτήν τη συνδρομή. Εάν η εκτέλεση μιας επαναφοράς μιας δεδομένης ενημέρωσης θα τοποθετήσετε τη συνδρομή σας μέσω ορίου, στη συνέχεια, που δεν θα είναι ενεργοποιημένες μιας επαναφοράς.
-   Κατάσταση ανταγωνισμού - εάν η αρχική ενημέρωση έχει ολοκληρωθεί, μια επαναφορά δεν είναι δυνατό.

Παράδειγμα όταν μπορεί να είναι χρήσιμη η ανάκληση της ενημέρωσης είναι εάν χρησιμοποιείτε τη λειτουργία [Ανάπτυξη αναβάθμιση](https://msdn.microsoft.com/library/azure/ee460793.aspx) σε μη αυτόματη λειτουργία σε στοιχείο ελέγχου είναι ανάπτυξης των το ρυθμό με τον οποίο μια κύρια αναβάθμιση στην ίδια θέση για να σας Azure φιλοξενούνται υπηρεσίας.

Κατά την υλοποίηση της αναβάθμισης καλέσετε [Αναβάθμιση ανάπτυξης](https://msdn.microsoft.com/library/azure/ee460793.aspx) σε λειτουργία μη αυτόματου και ξεκινήστε να σας καθοδηγήσει σχετικά αναβάθμισης τομείς. Εάν κάποια στιγμή, καθώς κάνετε την παρακολούθηση της αναβάθμισης, σημειώστε κάποιες περιπτώσεις ρόλο σε την πρώτη αναβάθμισης τομείς που εξετάζετε πρέπει να σταματήσει να ανταποκρίνεται, μπορείτε να καλέσετε τη λειτουργία [Επαναφοράς Update ή να κάνετε αναβάθμιση](https://msdn.microsoft.com/library/azure/hh403977.aspx) στην ανάπτυξη, το οποίο θα αφήσει ανέπαφος το εμφανίσεις που είχαν δεν έχει αναβαθμιστεί ακόμα και επαναφορά εμφανίσεις που είχαν αναβαθμιστεί στην προηγούμενη πακέτου service και ρύθμισης παραμέτρων.

<a name="multiplemutatingoperations"></a>
## <a name="initiating-multiple-mutating-operations-on-an-ongoing-deployment"></a>Προετοιμασία πολλές mutating λειτουργίες σε μια ανάπτυξη βρίσκεται σε εξέλιξη
Σε ορισμένες περιπτώσεις που μπορεί να θέλετε να ξεκινήσετε πολλαπλές ταυτόχρονη mutating λειτουργίες σε μια ανάπτυξη βρίσκεται σε εξέλιξη. Για παράδειγμα, μπορείτε να εκτελέσετε μια ενημέρωση της υπηρεσίας και, ενώ αυτήν την ενημερωμένη έκδοση είναι να ανάπτυξης κατά μήκος της υπηρεσίας, που θέλετε να κάνετε κάποια αλλαγή, π.χ. για να φέρετε ξανά την ενημερωμένη έκδοση, εφαρμόστε μια διαφορετική ενημερωμένη έκδοση ή ακόμη και να διαγράψετε την ανάπτυξη. Μια υπόθεση στην οποία αυτό μπορεί να χρειαστεί είναι εάν μια αναβάθμιση υπηρεσίας περιέχει buggy κώδικα που έχει ως αποτέλεσμα μια παρουσία αναβαθμισμένη ρόλο να επανειλημμένα παρουσιάζει σφάλμα. Σε αυτήν την περίπτωση, του ελεγκτή υφάσματος Azure δεν θα μπορείτε να κάνετε την πρόοδο για την εφαρμογή που αναβάθμιση, επειδή ένα ανεπαρκές αριθμός των παρουσιών στον αναβαθμισμένο τομέα είναι σε καλή κατάσταση. Αυτή η κατάσταση είναι αναφέρονται ως ένα *κολλήσει ανάπτυξης*. Μπορείτε να ξεκολλήστε ανάπτυξης προστατεύοντάς επαναφορά της ενημερωμένης έκδοσης ή χρησιμοποιώντας μια νέα ενημερωμένη έκδοση πάνω από το επάνω μέρος του παρουσιάζει σφάλμα μία.

Όταν η αρχική αίτηση για να ενημερώσετε ή να αναβαθμίσετε την υπηρεσία έχει ληφθεί από τον ελεγκτή υφάσματος Azure, μπορείτε να ξεκινήσετε διαδοχικές λειτουργίες η μετάλλαξη. Αυτό σημαίνει ότι δεν χρειάζεται να περιμένετε να ολοκληρωθεί πριν μπορέσετε να ξεκινήσετε μια άλλη mutating λειτουργία η αρχική λειτουργία.

Προετοιμασία μια δεύτερη λειτουργία ενημέρωσης ενώ βρίσκεται σε εξέλιξη την πρώτη ενημερωμένη έκδοση θα εκτελέσει παρόμοια με τη λειτουργία επαναφοράς. Εάν η δεύτερη ενημερωμένη έκδοση είναι σε κατάσταση αυτόματης, ο πρώτος τομέας αναβάθμισης θα αναβαθμιστούν αμέσως, πιθανώς αποτέλεσμα παρουσίες από πολλούς τομείς αναβάθμισης που είναι συνδεδεμένος στο ίδιο σημείο στο χρόνο.

Οι λειτουργίες mutating είναι ως εξής: [Αλλαγή ρύθμισης παραμέτρων ανάπτυξης](https://msdn.microsoft.com/library/azure/ee460809.aspx), [Αναβάθμιση ανάπτυξης](https://msdn.microsoft.com/library/azure/ee460793.aspx), [Κατάσταση ανάπτυξης ενημέρωση](https://msdn.microsoft.com/library/azure/ee460808.aspx), [Διαγραφή ανάπτυξης](https://msdn.microsoft.com/library/azure/ee460815.aspx)και [Επαναφορά ενημέρωση ή αναβάθμιση](https://msdn.microsoft.com/library/azure/hh403977.aspx).

Δύο εργασίες, [Λάβετε ανάπτυξης](https://msdn.microsoft.com/library/azure/ee460804.aspx) και [Λήψη ιδιοτήτων υπηρεσία Cloud](https://msdn.microsoft.com/library/azure/ee460806.aspx), Επιστροφή τη σημαία κλειδωμένο, η οποία μπορεί να εξετάζονται για να προσδιορίσετε εάν μια λειτουργία mutating μπορεί να ενεργοποιηθεί σε μια δεδομένη ανάπτυξη.

Για να καλέσετε την έκδοση από τις παρακάτω μεθόδους η οποία επιστρέφει τη σημαία κλειδωμένο, πρέπει να ορίσετε αίτηση κεφαλίδα "x-ms-έκδοση: 2011-10-01" ή μια νεότερη έκδοση. Για περισσότερες πληροφορίες σχετικά με τις κεφαλίδες τήρηση ιστορικού εκδόσεων, ανατρέξτε στο θέμα [Διαχείριση υπηρεσίας διαχείρισης εκδόσεων](https://msdn.microsoft.com/library/azure/gg592580.aspx).

<a name="distributiondfroles"></a>
## <a name="distribution-of-roles-across-upgrade-domains"></a>Κατανομή ρόλων αναβάθμισης τομέων
Azure κατανέμει παρουσίες του ρόλου ομοιόμορφα έναν ορισμένο αριθμό αναβάθμισης τομείς, οι οποίοι μπορούν να ρυθμιστούν ως μέρος του αρχείο ορισμού (.csdef) της υπηρεσίας. Τον μέγιστο αριθμό αναβάθμισης τομείς είναι 20 και η προεπιλογή είναι 5. Για περισσότερες πληροφορίες σχετικά με τον τρόπο για να τροποποιήσετε το αρχείο ορισμού υπηρεσίας, ανατρέξτε στο θέμα [Σχήμα ορισμού υπηρεσίας Azure (.csdef αρχείου)](cloud-services-model-and-package.md#csdef).

Για παράδειγμα, εάν ο ρόλος σας έχει δέκα παρουσίες, από προεπιλογή κάθε αναβάθμισης τομέα περιέχει δύο παρουσίες. Εάν ο ρόλος σας έχει 14 παρουσίες, στη συνέχεια, τέσσερις από τους τομείς αναβάθμισης περιέχουν τρεις παρουσίες και πέμπτο τομέα περιέχει δύο.

Αναβάθμιση τομείς προσδιορίζονται με έναν δείκτη με: ο πρώτος αναβάθμισης τομέας έχει Αναγνωριστικό 0 και ο τομέας δεύτερου αναβάθμισης έχει Αναγνωριστικό 1, και ούτω καθεξής.

Το παρακάτω διάγραμμα παρουσιάζει πώς διανέμονται όταν η υπηρεσία ορίζει δύο τομείς αναβάθμισης υπηρεσίας από περιέχει δύο ρόλους. Εκτελείται η υπηρεσία οκτώ παρουσίες του ρόλου web και εννέα παρουσίες του ρόλου εργασίας.

![Κατανομή των τομέων αναβάθμισης] (media/cloud-services-update-azure-service/IC345533.png "Κατανομή των τομέων αναβάθμισης")

> [AZURE.NOTE] Σημειώστε ότι Azure ελέγχει πώς παρουσίες έχουν εκχωρηθεί σε αναβάθμισης τομείς. Δεν είναι δυνατό να καθορίσετε ποια παρουσίες έχουν εκχωρηθεί σε ποια τομέα.

## <a name="next-steps"></a>Επόμενα βήματα
[Πώς μπορείτε να διαχειριστείτε τις υπηρεσίες Cloud](cloud-services-how-to-manage.md)  
[Πώς μπορείτε να παρακολουθείτε τις υπηρεσίες Cloud](cloud-services-how-to-monitor.md)  
[Πώς μπορείτε να ρυθμίσετε τις υπηρεσίες Cloud](cloud-services-how-to-configure.md)  
