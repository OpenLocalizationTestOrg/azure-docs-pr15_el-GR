<properties
   pageTitle="Χρήση Hadoop γουρούνι με σύνδεση απομακρυσμένης επιφάνειας εργασίας σε HDInsight | Microsoft Azure"
   description="Μάθετε πώς μπορείτε να χρησιμοποιήσετε την εντολή γουρούνι για να εκτελέσετε δηλώσεις Λατινικά γουρούνι από μια σύνδεση απομακρυσμένης επιφάνειας εργασίας σε ένα σύμπλεγμα βασίζεται σε Windows Hadoop στο HDInsight."
   services="hdinsight"
   documentationCenter=""
   authors="Blackmist"
   manager="jhubbard"
   editor="cgronlun"
    tags="azure-portal"/>

<tags
   ms.service="hdinsight"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="big-data"
   ms.date="10/11/2016"
   ms.author="larryfr"/>

#<a name="run-pig-jobs-from-a-remote-desktop-connection"></a>Εκτέλεση εργασιών γουρούνι από μια σύνδεση απομακρυσμένης επιφάνειας εργασίας

[AZURE.INCLUDE [pig-selector](../../includes/hdinsight-selector-use-pig.md)]

Αυτό το έγγραφο παρέχει αναλυτικές οδηγίες για τη χρήση της εντολής γουρούνι για να εκτελέσετε δηλώσεις Λατινικά γουρούνι από μια σύνδεση απομακρυσμένης επιφάνειας εργασίας σε ένα σύμπλεγμα HDInsight που βασίζεται στα Windows. Γουρούνι Λατινικά σάς επιτρέπει να δημιουργήσετε εφαρμογές MapReduce, που περιγράφει μετασχηματισμοί δεδομένων, αντί για αντιστοίχιση και μείωση συναρτήσεις.

Σε αυτό το έγγραφο, μάθετε πώς μπορείτε να

##<a id="prereq"></a>Προαπαιτούμενα στοιχεία

Για να ολοκληρώσετε τα βήματα σε αυτό το άρθρο, θα χρειαστείτε τα εξής.

* Ένα σύμπλεγμα HDInsight που βασίζεται σε Windows (Hadoop σε HDInsight)

* Πρόγραμμα-πελάτη υπολογιστή που εκτελεί Windows 10, Windows 8 ή Windows 7

##<a id="connect"></a>Σύνδεση με απομακρυσμένη επιφάνεια εργασίας

Ενεργοποίηση της απομακρυσμένης επιφάνειας εργασίας για το σύμπλεγμα HDInsight και, στη συνέχεια, συνδεθείτε, ακολουθώντας τις οδηγίες στην ενότητα [σύνδεση με χρήση RDP συμπλεγμάτων HDInsight](hdinsight-administer-use-management-portal.md#rdp).

##<a id="pig"></a>Χρησιμοποιήστε την εντολή γουρούνι

2. Αφού δημιουργήσετε μια σύνδεση απομακρυσμένης επιφάνειας εργασίας, ξεκινήστε τη **γραμμή εντολών Hadoop** , χρησιμοποιώντας το εικονίδιο στην επιφάνεια εργασίας.

2. Χρησιμοποιήστε τα ακόλουθα για να ξεκινήσετε την εντολή γουρούνι:

        %pig_home%\bin\pig

    Θα εμφανιστεί με ένα `grunt>` ερώτηση.

3. Εισαγάγετε την ακόλουθη πρόταση:

        LOGS = LOAD 'wasbs:///example/data/sample.log';

    Αυτή η εντολή φορτώνει τα περιεχόμενα του αρχείου sample.log στο αρχείο αρχεία ΚΑΤΑΓΡΑΦΉΣ. Μπορείτε να προβάλετε τα περιεχόμενα του αρχείου, χρησιμοποιώντας την ακόλουθη εντολή:

        DUMP LOGS;

4. Μετασχηματισμός των δεδομένων με την εφαρμογή μια κανονική έκφραση για να εξαγάγετε μόνο το επίπεδο καταγραφής από κάθε εγγραφή:

        LEVELS = foreach LOGS generate REGEX_EXTRACT($0, '(TRACE|DEBUG|INFO|WARN|ERROR|FATAL)', 1)  as LOGLEVEL;

    Μπορείτε να χρησιμοποιήσετε την **ΈΝΔΕΙΞΗ** για να προβάλετε τα δεδομένα μετά το μετασχηματισμό. Σε αυτήν την περίπτωση, `DUMP LEVELS;`.

5. Συνεχίστε με την εφαρμογή μετασχηματισμοί, χρησιμοποιώντας τις παρακάτω προτάσεις. Χρήση `DUMP` για να δείτε το αποτέλεσμα του μετασχηματισμού μετά από κάθε βήμα.

    <table>
    <tr>
    <th>Δήλωση</th><th>Τι κάνει</th>
    </tr>
    <tr>
    <td>FILTEREDLEVELS = ΕΠΊΠΕΔΑ από ΜΌΝΟ του ΦΊΛΤΡΟΥ δεν είναι null.</td><td>Καταργεί τις γραμμές που περιέχουν τιμή null για το επίπεδο καταγραφής και αποθηκεύει τα αποτελέσματα σε FILTEREDLEVELS.</td>
    </tr>
    <tr>
    <td>GROUPEDLEVELS = FILTEREDLEVELS ΟΜΆΔΑ με ΜΌΝΟ;</td><td>Ομαδοποιεί τις γραμμές από το επίπεδο καταγραφής και αποθηκεύει τα αποτελέσματα σε GROUPEDLEVELS.</td>
    </tr>
    <tr>
    <td>ΣΥΧΝΌΤΗΤΑ = foreach GROUPEDLEVELS Δημιουργία ομάδας ως ΜΌΝΟ, COUNT (FILTEREDLEVELS. ΜΌΝΟ) κατά την ΚΑΤΑΜΈΤΡΗΣΗ;</td><td>Δημιουργεί ένα νέο σύνολο δεδομένων που περιέχει κάθε μοναδικό αρχείο καταγραφής τιμή επιπέδου και πόσες φορές αυτό συμβαίνει. Αυτό είναι αποθηκευμένο σε ΣΥΧΝΌΤΗΤΑΣ</td>
    </tr>
    <tr>
    <td>ΑΠΟΤΈΛΕΣΜΑ = σειρά ΣΥΧΝΌΤΗΤΑΣ από την ένδειξη desc COUNT;</td><td>Τα επίπεδα καταγραφής τις παραγγελίες κατά count (φθίνουσα) και αποθηκεύει σε ΑΠΟΤΈΛΕΣΜΑ</td>
    </tr>
    </table>

6. Μπορείτε, επίσης, να αποθηκεύσετε τα αποτελέσματα ενός μετασχηματισμού χρησιμοποιώντας το `STORE` δήλωση. Για παράδειγμα, την ακόλουθη εντολή αποθηκεύει το `RESULT` στον κατάλογο **/example/data/pigout** σε το προεπιλεγμένο κοντέινερ χώρου αποθήκευσης για το σύμπλεγμά σας:

        STORE RESULT into 'wasbs:///example/data/pigout'

    > [AZURE.NOTE] Τα δεδομένα αποθηκεύονται στον καθορισμένο κατάλογο στα αρχεία που ονομάζονται **nnnnn τμήμα**. Εάν ο κατάλογος υπάρχει ήδη, θα λάβετε ένα μήνυμα σφάλματος.

7. Για να εξέλθετε από το προτρεπτικό μήνυμα grunt, εισαγάγετε την ακόλουθη πρόταση.

        QUIT;

###<a name="pig-latin-batch-files"></a>Αρχεία δέσμης γουρούνι Λατινικά

Μπορείτε επίσης να χρησιμοποιήσετε την εντολή γουρούνι για να εκτελέσετε Λατινικά γουρούνι που περιέχεται σε ένα αρχείο.

3. Μετά την έξοδο στην ερώτηση grunt, ανοίξτε **το Σημειωματάριο** και δημιουργήστε ένα νέο αρχείο με το όνομα **pigbatch.pig** στον κατάλογο **% PIG_HOME %** .

4. Πληκτρολογήστε ή επικολλήστε τις ακόλουθες γραμμές στο αρχείο **pigbatch.pig** και, στη συνέχεια, αποθηκεύστε το:

        LOGS = LOAD 'wasbs:///example/data/sample.log';
        LEVELS = foreach LOGS generate REGEX_EXTRACT($0, '(TRACE|DEBUG|INFO|WARN|ERROR|FATAL)', 1)  as LOGLEVEL;
        FILTEREDLEVELS = FILTER LEVELS by LOGLEVEL is not null;
        GROUPEDLEVELS = GROUP FILTEREDLEVELS by LOGLEVEL;
        FREQUENCIES = foreach GROUPEDLEVELS generate group as LOGLEVEL, COUNT(FILTEREDLEVELS.LOGLEVEL) as COUNT;
        RESULT = order FREQUENCIES by COUNT desc;
        DUMP RESULT;

5. Χρησιμοποιήστε τα ακόλουθα για να εκτελέσετε το αρχείο **pigbatch.pig** χρησιμοποιώντας την εντολή γουρούνι.

        pig %PIG_HOME%\pigbatch.pig

    Όταν ολοκληρωθεί η μαζική εργασία, θα πρέπει να δείτε το παρακάτω αποτέλεσμα, που πρέπει να είναι ίδια με όταν χρησιμοποιήσατε `DUMP RESULT;` στα προηγούμενα βήματα:

        (TRACE,816)
        (DEBUG,434)
        (INFO,96)
        (WARN,11)
        (ERROR,6)
        (FATAL,2)

##<a id="summary"></a>Σύνοψη

Όπως μπορείτε να δείτε, η εντολή γουρούνι σας επιτρέπει να εκτελέσετε λειτουργίες MapReduce αλληλεπιδραστικά ή να εκτελέσετε εργασίες Λατινικά γουρούνι που είναι αποθηκευμένα σε ένα αρχείο δέσμης.

##<a id="nextsteps"></a>Επόμενα βήματα

Για γενικές πληροφορίες σχετικά με γουρούνι στο HDInsight:

* [Χρήση γουρούνι με Hadoop σε HDInsight](hdinsight-use-pig.md)

Για πληροφορίες σχετικά με άλλους τρόπους μπορείτε να εργαστείτε με Hadoop σε HDInsight:

* [Χρήση της ομάδας με Hadoop σε HDInsight](hdinsight-use-hive.md)

* [Χρήση MapReduce με Hadoop σε HDInsight](hdinsight-use-mapreduce.md)
