<properties
   pageTitle="Ανάπτυξη και διαχείριση τοπολογίες καταιγίδας Apache στην βάσει Linux HDInsight | Microsoft Azure"
   description="Μάθετε πώς μπορείτε να αναπτύξετε, παρακολούθηση και διαχείριση τοπολογίες καταιγίδας Apache χρησιμοποιώντας τον πίνακα εργαλείων καταιγίδας στην βάσει Linux HDInsight. Χρησιμοποιήστε Hadoop εργαλεία για το Visual Studio."
   services="hdinsight"
   documentationCenter=""
   authors="Blackmist"
   manager="jhubbard"
   editor="cgronlun"/>

<tags
   ms.service="hdinsight"
   ms.devlang="java"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="big-data"
   ms.date="09/07/2016"
   ms.author="larryfr"/>

# <a name="deploy-and-manage-apache-storm-topologies-on-linux-based-hdinsight"></a>Ανάπτυξη και διαχείριση τοπολογίες καταιγίδας Apache στην βάσει Linux HDInsight

Σε αυτό το έγγραφο, μάθετε τα βασικά στοιχεία για τη διαχείριση και την παρακολούθηση τοπολογίες καταιγίδας εκτελείται σε βάσει Linux καταιγίδας στην συμπλεγμάτων HDInsight.

> [AZURE.IMPORTANT] Τα βήματα σε αυτό το άρθρο απαιτούν μιας καταιγίδας Linux βασίζεται σε σύμπλεγμα HDInsight. Για πληροφορίες σχετικά με την ανάπτυξη και παρακολούθηση τοπολογίες σε HDInsight που βασίζεται στα Windows, ανατρέξτε στο θέμα [ανάπτυξη και διαχείριση τοπολογίες καταιγίδας Apache σε HDInsight που βασίζεται σε Windows](hdinsight-storm-deploy-monitor-topology.md)

## <a name="prerequisites"></a>Προαπαιτούμενα στοιχεία

* **Με βάση μια Linux καταιγίδας σε σύμπλεγμα HDInsight**: ανατρέξτε στο θέμα [Γρήγορα αποτελέσματα με το καταιγίδας Apache στην HDInsight](hdinsight-apache-storm-tutorial-get-started-linux.md) για οδηγίες σχετικά με τη δημιουργία ενός συμπλέγματος

* **Εξοικείωση με SSH και SCP**: για περισσότερες πληροφορίες σχετικά με τη χρήση SSH και SCP με το HDInsight, ανατρέξτε στο θέμα τα εξής:

    * **Προγράμματα-πελάτες του Linux, Unix ή OS X**: ανατρέξτε στο θέμα [Χρήση SSH με βάσει Linux Hadoop σε HDInsight από Linux, OS X ή Unix](hdinsight-hadoop-linux-use-ssh-unix.md)

    * **Προγράμματα-πελάτες των Windows**: ανατρέξτε στο θέμα [Χρήση SSH με βάσει Linux Hadoop σε HDInsight από το Windows](hdinsight-hadoop-linux-use-ssh-windows.md)

* **SCP του προγράμματος-πελάτη**: αυτό παρέχεται με όλα τα συστήματα Linux, Unix και OS X. Για προγράμματα-πελάτες των Windows, συνιστάται να PSCP, που είναι διαθέσιμη από τη [σελίδα λήψης PuTTY](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html).

## <a name="start-a-storm-topology"></a>Ξεκινήστε μια τοπολογία καταιγίδας

### <a name="using-ssh-and-the-storm-command"></a>Χρήση SSH και την εντολή καταιγίδας

1. Χρησιμοποιήστε SSH για να συνδεθείτε με το σύμπλεγμα HDInsight. Αντικαταστήστε το **όνομα ΧΡΉΣΤΗ** του το όνομα της σύνδεσής σας SSH. Αντικαταστήστε το **CLUSTERNAME** με το όνομα συμπλέγματος HDInsight σας:

        ssh USERNAME@CLUSTERNAME-ssh.azurehdinsight.net

    Για περισσότερες πληροφορίες σχετικά με τη χρήση SSH για να συνδεθείτε με το σύμπλεγμά σας HDInsight, ανατρέξτε στο θέμα τα ακόλουθα έγγραφα:
    
    * **Προγράμματα-πελάτες του Linux, Unix ή OS X**: ανατρέξτε στο θέμα [Χρήση SSH με βάσει Linux Hadoop σε HDInsight από Linux, OS X ή Unix](hdinsight-hadoop-linux-use-ssh-unix.md)
    
    * **Προγράμματα-πελάτες των Windows**: ανατρέξτε στο θέμα [Χρήση SSH με βάσει Linux Hadoop σε HDInsight από το Windows](hdinsight-hadoop-linux-use-ssh-windows.md)

2. Χρησιμοποιήστε την ακόλουθη εντολή για να ξεκινήσετε μια τοπολογία παράδειγμα:

        storm jar /usr/hdp/current/storm-client/contrib/storm-starter/storm-starter-topologies-0.9.3.2.2.4.9-1.jar storm.starter.WordCountTopology WordCount

    Αυτό θα ξεκινήσει η τοπολογία WordCount παράδειγμα στο σύμπλεγμα. Το τυχαία θα δημιουργήσει προτάσεων και να μετρήσετε την εμφάνιση κάθε λέξης σε τις προτάσεις.

    > [AZURE.NOTE] Κατά την υποβολή τοπολογία στο σύμπλεγμα, πρέπει πρώτα να αντιγράψετε το αρχείο βάζο που περιέχει το σύμπλεγμα πριν από τη χρήση του `storm` εντολή. Αυτό μπορεί να πραγματοποιηθεί χρησιμοποιώντας το `scp` εντολής από το πρόγραμμα-πελάτη όπου βρίσκεται το αρχείο. Για παράδειγμα,`scp FILENAME.jar USERNAME@CLUSTERNAME-ssh.azurehdinsight.net:FILENAME.jar`
    >
    > Το παράδειγμα WordCount και άλλα παραδείγματα starter καταιγίδας, περιλαμβάνονται ήδη στη το σύμπλεγμά σας στο `/usr/hdp/current/storm-client/contrib/storm-starter/`.

### <a name="programmatically"></a>Μέσω προγραμματισμού

Μέσω προγραμματισμού, μπορείτε να αναπτύξετε μια τοπολογία να καταιγίδας στην HDInsight, επικοινωνία με την υπηρεσία Nimbus που βρίσκεται στο σύμπλεγμά σας. [https://github.com/Azure-Samples/hdinsight-Java-Deploy-Storm-Topology](https://github.com/Azure-Samples/hdinsight-java-deploy-storm-topology) παρέχει ένα παράδειγμα εφαρμογής Java που δείχνει πώς μπορείτε να αναπτύξετε και να ξεκινήσετε μια τοπολογία μέσω της υπηρεσίας Nimbus.

## <a name="monitor-and-manage-using-the-storm-command"></a>Παρακολούθηση και διαχείριση χρησιμοποιώντας την εντολή καταιγίδας

Το `storm` βοηθητικό πρόγραμμα σας επιτρέπει να εργάζεστε με τοπολογίες που εκτελούνται από τη γραμμή εντολών. Ακολουθεί μια λίστα με εντολές που χρησιμοποιούνται συχνά. Χρήση `storm -h` για μια πλήρη λίστα των εντολών.

### <a name="list-topologies"></a>Λίστα τοπολογίες

Χρησιμοποιήστε την ακόλουθη εντολή λίστας όλων εκτελείται τοπολογίες:

    storm list
    
Αυτό θα επιστρέψει πληροφορίες παρόμοιο με το εξής:

    Topology_name        Status     Num_tasks  Num_workers  Uptime_secs
    -------------------------------------------------------------------
    WordCount            ACTIVE     29         2            263

### <a name="deactivate-and-reactivate"></a>Απενεργοποιήστε και εκ νέου ενεργοποίηση

Η απενεργοποίηση μιας τοπολογίας διακόπτει προσωρινά το μέχρι να θανατωθούν ή να ενεργοποιηθεί ξανά. Χρησιμοποιήστε τα ακόλουθα για να απενεργοποιήσετε και ενεργοποιήσετε ξανά:

    storm Deactivate TOPOLOGYNAME
    
    storm Activate TOPOLOGYNAME

### <a name="kill-a-running-topology"></a>Τερματισμός μιας ενσωματωμένης τοπολογίας

Τοπολογίες καταιγίδας, όταν ξεκινήσει, θα εξακολουθήσει εκτελείται μέχρι τη διακοπή. Για να σταματήσετε μια τοπολογία, χρησιμοποιήστε την ακόλουθη εντολή:

    storm stop TOPOLOGYNAME

### <a name="rebalance"></a>Νέα εξισορρόπηση

Εξισορρόπηση μια τοπολογία επιτρέπει στο σύστημα να αναθεωρήσετε τον παραλληλισμό των της τοπολογίας. Για παράδειγμα, εάν έχετε αλλάξει μέγεθος του συμπλέγματος για να προσθέσετε περισσότερες σημειώσεις, εξισορρόπηση επιτρέπει μια τοπολογία εκτελείται για να κάνετε χρήση νέου κόμβο.

> [AZURE.WARNING] Εξισορρόπηση πρώτα μια τοπολογία απενεργοποιεί την τοπολογία, στη συνέχεια, αναδιανέμει εργαζομένων ομοιόμορφα κατά μήκος του συμπλέγματος, στη συνέχεια, τέλος επιστρέφει την τοπολογία στην κατάσταση που ήταν πριν από την εξισορρόπηση Παρουσιάστηκε. Επομένως, εάν η τοπολογία έχει ενεργοποιηθεί, αυτό θα μετατραπεί σε ενεργό ξανά. Εάν απενεργοποιήθηκε, θα παραμείνει απενεργοποιημένος.

    storm rebalance TOPOLOGYNAME

## <a name="monitor-and-manage-using-the-storm-ui"></a>Παρακολούθηση και διαχείριση χρησιμοποιώντας το περιβάλλον εργασίας Χρήστη καταιγίδας

Περιβάλλον εργασίας Χρήστη του καταιγίδας παρέχει μια διασύνδεση web για την εργασία με εκτελούνται τοπολογίες και περιλαμβάνεται στην το σύμπλεγμά σας HDInsight. Για να προβάλετε το περιβάλλον εργασίας Χρήστη καταιγίδας, χρησιμοποιήστε ένα πρόγραμμα περιήγησης web για να ανοίξετε __https://CLUSTERNAME.azurehdinsight.net/stormui__, όπου __CLUSTERNAME__ είναι το όνομα του συμπλέγματος.

> [AZURE.NOTE] Εάν σας ζητηθεί να δώσετε ένα όνομα χρήστη και τον κωδικό πρόσβασης, πληκτρολογήστε τη Διαχείριση συμπλέγματος (διαχειριστές) και τον κωδικό πρόσβασης που χρησιμοποιήσατε κατά τη δημιουργία του συμπλέγματος.


### <a name="main-page"></a>Κύρια σελίδα

Κύρια σελίδα του περιβάλλοντος εργασίας Χρήστη του καταιγίδας παρέχει τις ακόλουθες πληροφορίες:

* **Σύμπλεγμα σύνοψης**: βασικές πληροφορίες για το σύμπλεγμα καταιγίδας.

* **Τοπολογία σύνοψης**: μια λίστα εκτελούνται τοπολογίες. Χρησιμοποιήστε τις συνδέσεις σε αυτήν την ενότητα για να δείτε περισσότερες πληροφορίες σχετικά με συγκεκριμένες τοπολογίες.

* **Επόπτη σύνοψης**: πληροφορίες σχετικά με τον επόπτη καταιγίδας.

* **Ρύθμιση παραμέτρων nimbus**: Nimbus ρύθμισης παραμέτρων για το σύμπλεγμα.

### <a name="topology-summary"></a>Τοπολογία σύνοψης

Επιλέξετε μια σύνδεση από την ενότητα **τοπολογία σύνοψης** εμφανίζει τις ακόλουθες πληροφορίες σχετικά με την τοπολογία:

* **Τοπολογία σύνοψης**: βασικές πληροφορίες σχετικά με την τοπολογία.

* **Ενέργειες τοπολογίας**: Διαχείριση ενέργειες που μπορείτε να εκτελέσετε για της τοπολογίας.

  * **Ενεργοποίηση**: επεξεργασία βιογραφικά σημειώματα μια τοπολογία απενεργοποιημένη.

  * **Απενεργοποίηση**: διακόπτει προσωρινά μια τοπολογία εκτελείται.

  * **Νέα εξισορρόπηση**: προσαρμόζει τον παραλληλισμό των της τοπολογίας. Θα πρέπει να νέα εξισορρόπηση εκτελείται τοπολογίες, αφού έχετε αλλάξει τον αριθμό των κόμβους του συμπλέγματος. Αυτό σας επιτρέπει την τοπολογία για να προσαρμόσετε παραλληλισμό να αποζημιώσει για τον αριθμό αύξηση ή μείωση των κόμβους του συμπλέγματος.

    Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα <a href="http://storm.apache.org/documentation/Understanding-the-parallelism-of-a-Storm-topology.html" target="_blank">Κατανόηση τον παραλληλισμό των μια τοπολογία καταιγίδας</a>.

  * **Τερματισμός**: τερματίζει μια τοπολογία καταιγίδας μετά το καθορισμένο χρονικό όριο.

* **Στατιστικές τοπολογίας**: στατιστικά στοιχεία σχετικά με την τοπολογία. Χρησιμοποιήστε τις συνδέσεις στη στήλη **παράθυρο** για να ορίσετε το χρονικό πλαίσιο για τις υπόλοιπες καταχωρήσεις στη σελίδα.

* **Spouts**: το spouts χρησιμοποιούνται από της τοπολογίας. Χρησιμοποιήστε τις συνδέσεις σε αυτήν την ενότητα για να δείτε περισσότερες πληροφορίες σχετικά με συγκεκριμένα spouts.

* **Μπουλονιών**: τα στοιχεία που χρησιμοποιούνται από την τοπολογία. Χρησιμοποιήστε τις συνδέσεις σε αυτήν την ενότητα για να δείτε περισσότερες πληροφορίες σχετικά με συγκεκριμένα στοιχεία.

* **Ρύθμιση παραμέτρων τοπολογίας**: τη ρύθμιση παραμέτρων του επιλεγμένου της τοπολογίας.

### <a name="spout-and-bolt-summary"></a>Στομίου και σύνοψη κεραυνό

Επιλογή ενός στομίου από τις ενότητες **Spouts** ή **μπουλονιών** εμφανίζει τις ακόλουθες πληροφορίες σχετικά με το επιλεγμένο στοιχείο:

* **Στοιχείο σύνοψης**: βασικές πληροφορίες σχετικά με την στομίου ή κεραυνό.

* **Στατιστικές στομίου/κεραυνό**: στατιστικά στοιχεία σχετικά με την στομίου ή κεραυνό. Χρησιμοποιήστε τις συνδέσεις στη στήλη **παράθυρο** για να ορίσετε το χρονικό πλαίσιο για τις υπόλοιπες καταχωρήσεις στη σελίδα.

* **Στατιστικές εισαγωγής** (βίδας μόνο): πληροφορίες σχετικά με τις ροές εισόδου που καταναλώνεται από η ράβδος.

* **Στατιστικές εξόδου**: πληροφορίες σχετικά με τις ροές που εκπέμπει αυτό spout ή βίδας.

* **Executors**: πληροφορίες σχετικά με τις παρουσίες του στομίου ή κεραυνό. Επιλέξτε την καταχώρηση **θύρα** για ένα συγκεκριμένο executor για να προβάλετε ένα αρχείο καταγραφής διαγνωστικών πληροφοριών που παράγεται για αυτήν την παρουσία.

* **Σφάλματα**: οποιαδήποτε πληροφοριών σφάλματος για αυτό spout ή βίδας.

## <a name="rest-api"></a>REST API

Περιβάλλον εργασίας Χρήστη του καταιγίδας είναι ενσωματωμένη επάνω από το REST API, ώστε να μπορείτε να εκτελέσετε παρόμοια διαχείριση και την παρακολούθηση λειτουργικότητα χρησιμοποιώντας το REST API. Μπορείτε να χρησιμοποιήσετε το REST API για να δημιουργήσετε προσαρμοσμένα εργαλεία για τη διαχείριση και την παρακολούθηση τοπολογίες καταιγίδας.

Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Καταιγίδας περιβάλλοντος εργασίας Χρήστη REST API](http://storm.apache.org/releases/0.9.6/STORM-UI-REST-API.html). Οι ακόλουθες πληροφορίες είναι συγκεκριμένη για χρήση το REST API με καταιγίδας Apache στην HDInsight.

> [AZURE.IMPORTANT] Το REST API καταιγίδας δεν είναι διαθέσιμη στο κοινό μέσω του internet και πρέπει να είναι δυνατή η πρόσβαση χρησιμοποιώντας μια διοχέτευση SSH στον κόμβο κεφαλής σύμπλεγμα HDInsight. Για πληροφορίες σχετικά με τη δημιουργία και χρήση διοχέτευση SSH, ανατρέξτε στο θέμα [Χρήση SSH διοχέτευση για πρόσβαση στο web Ambari περιβάλλοντος εργασίας Χρήστη, ResourceManager, JobHistory, NameNode, Oozie, και άλλη τοποθεσία web του περιβάλλοντος εργασίας Χρήστη](hdinsight-linux-ambari-ssh-tunnel.md).

### <a name="base-uri"></a>Βάση URI

Το βασικό URI για το REST API σε βάσει Linux HDInsight συμπλεγμάτων είναι διαθέσιμο στον κόμβο κεφαλίδας στο **api/https://HEADNODEFQDN:8744/v1/**; Ωστόσο, το όνομα του τομέα στον κόμβο κεφαλής δημιουργείται κατά τη δημιουργία συμπλέγματος και δεν είναι στατική.

Μπορείτε να βρείτε το πλήρως προσδιορισμένο όνομα τομέα (FQDN) για τον κόμβο κεφαλής σύμπλεγμα με διάφορους τρόπους:

* __Από μια SSH την περίοδο λειτουργίας__: Χρησιμοποιήστε την εντολή `headnode -f` από μια περίοδο λειτουργίας SSH στο σύμπλεγμα.

* __Από το Ambari Web__: Επιλέξτε __υπηρεσιών__ από το επάνω μέρος της σελίδας και, στη συνέχεια, επιλέξτε __καταιγίδας__. Από την καρτέλα __Σύνοψη__ , επιλέξτε __Καταιγίδας διακομιστή περιβάλλοντος εργασίας Χρήστη__. Το FQDN του κόμβου που του περιβάλλοντος Εργασίας καταιγίδας και REST API εκτελείται σε θα είναι στο επάνω μέρος της σελίδας.

* __Από το Ambari REST API__: Χρησιμοποιήστε την εντολή `curl -u admin:PASSWORD -G "https://CLUSTERNAME.azurehdinsight.net/api/v1/clusters/CLUSTERNAME/services/STORM/components/STORM_UI_SERVER"` για να ανακτήσετε πληροφορίες σχετικά με τον κόμβο που του περιβάλλοντος Εργασίας καταιγίδας και REST API εκτελούνται στον. Αντικαταστήστε __τον κωδικό ΠΡΌΣΒΑΣΗΣ__ με τον κωδικό πρόσβασης διαχειριστή για το σύμπλεγμα. Αντικαταστήστε __CLUSTERNAME__ με το όνομα του συμπλέγματος. Στην απάντηση, η καταχώρηση "όνομα_κεντρικού_υπολογιστή" περιέχει το FQDN του κόμβου.

### <a name="authentication"></a>Έλεγχος ταυτότητας

Αιτήσεις για το REST API πρέπει να χρησιμοποιήσετε το **βασικό έλεγχο ταυτότητας**, ώστε να μπορείτε να χρησιμοποιήσετε το όνομα του διαχειριστή συμπλέγματος HDInsight και τον κωδικό πρόσβασης.

> [AZURE.NOTE] Επειδή το βασικό έλεγχο ταυτότητας αποστέλλεται χρησιμοποιώντας απλό κείμενο, θα πρέπει να χρησιμοποιείται **πάντα** HTTPS για την ασφάλιση επικοινωνίες με το σύμπλεγμα.

### <a name="return-values"></a>Τιμές επιστροφής

Πληροφορίες που επιστρέφονται από το REST API μόνο ίσως να χρησιμοποιηθεί από μέσα στο σύμπλεγμα ή εικονικές μηχανές στο ίδιο δίκτυο εικονικού Azure ως το σύμπλεγμα. Για παράδειγμα, το πλήρως προσδιορισμένο όνομα τομέα (FQDN) επιστρέφεται για τους διακομιστές Zookeeper δεν θα είναι προσβάσιμη από το Internet.

## <a name="next-steps"></a>Επόμενα βήματα

Τώρα που μάθατε πώς μπορείτε να αναπτύξετε και να παρακολουθείτε τοπολογίες χρησιμοποιώντας τον πίνακα εργαλείων καταιγίδας, θα μάθετε πώς να [βασίζεται σε ανάπτυξη Java τοπολογίες χρησιμοποιώντας Maven](hdinsight-storm-develop-java-topology.md).

Για μια λίστα των περισσότερων τοπολογίες παράδειγμα, ανατρέξτε στο θέμα [τοπολογίες παράδειγμα για καταιγίδας στην HDInsight](hdinsight-storm-example-topology.md).
