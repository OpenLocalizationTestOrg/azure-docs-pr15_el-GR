<properties 
    pageTitle="Μηχανικής εκμάθησης συστάσεις: Ενοποίηση JavaScript | Microsoft Azure" 
    description="Azure τεκμηρίωση μηχανικής εκμάθησης συστάσεις - JavaScript ενοποίησης-" 
    services="machine-learning" 
    documentationCenter="" 
    authors="LuisCabrer" 
    manager="jhubbard" 
    editor="cgronlun"/>

<tags 
    ms.service="machine-learning" 
    ms.workload="data-services" 
    ms.tgt_pltfrm="na" 
    ms.devlang="javascript" 
    ms.topic="article" 
    ms.date="09/08/2016" 
    ms.author="luisca"/>

# <a name="azure-machine-learning-recommendations---javascript-integration"></a>Azure μηχανικής εκμάθησης συστάσεις - ενοποίησης JavaScript

>[AZURE.NOTE]Που θα πρέπει να ξεκινήσετε να χρησιμοποιείτε την υπηρεσία γνωστική API συστάσεις αντί για αυτήν την έκδοση. Η υπηρεσία γνωστική συστάσεις θα αντικατάστασης αυτήν την υπηρεσία και όλες τις νέες δυνατότητες θα αναπτυχθούν εκεί. Έχει νέες δυνατότητες όπως δέσμης για υποστήριξη, καλύτερη API Explorer, μια πιο καθαρή εμπειρία επιφάνειας, πιο συνεπείς signup/χρέωση API, κ.λπ.
> Μάθετε περισσότερα σχετικά με [τη μετεγκατάσταση για τη νέα υπηρεσία γνωστική](http://aka.ms/recomigrate)


Αυτό το έγγραφο απεικονίζουν πώς μπορείτε να ενοποιήσετε τοποθεσία σας χρησιμοποιώντας JavaScript. Το JavaScript σας δίνει τη δυνατότητα να στείλετε συμβάντα απόκτηση δεδομένων και για την εκμετάλλευση συστάσεις, όταν δημιουργείτε ένα μοντέλο σύσταση. Όλες οι λειτουργίες μέσω του JS μπορεί να γίνει επίσης από την πλευρά του διακομιστή.

[AZURE.INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

##<a name="1-general-overview"></a>1. επισκόπηση γενικά
Ενοποίηση την τοποθεσία σας με το Azure ML συστάσεις αποτελείται σε φάσεις 2:

1.  Αποστολή συμβάντα σε Azure ML συστάσεις. Αυτό θα σας επιτρέψει να δημιουργήσετε ένα μοντέλο σύσταση.
2.  Χρήση τις συστάσεις. Αφού δημιουργηθεί το μοντέλο μπορεί να εκμετάλλευση τις συστάσεις. (Αυτό το έγγραφο εξηγεί τον τρόπο για να δημιουργήσετε ένα μοντέλο, η ανάγνωση του Οδηγού γρήγορης εκκίνησης για να λάβετε περισσότερες πληροφορίες σχετικά με τον τρόπο).


<ins>Φάση I</ins>

Κατά την πρώτη φάση τοποθετείτε σε σελίδες html μια μικρή βιβλιοθήκη JavaScript που επιτρέπει τη σελίδα για να στείλετε συμβάντα καθώς προκύπτουν στη σελίδα html σε διακομιστές συστάσεις ML Azure (μέσω αγορά δεδομένων):

![Drawing1][1]

<ins>Φάση II</ins>

Κατά το δεύτερο στάδιο όταν θέλετε να εμφανίσετε τις συστάσεις στη σελίδα επιλέξετε μία από τις ακόλουθες επιλογές:

1ο διακομιστή (σε η φάση της απόδοσης της σελίδας) καλεί Azure ML συστάσεις διακομιστή (μέσω αγορά δεδομένων) για να δείτε προτάσεις. Τα αποτελέσματα περιλαμβάνουν μια λίστα των στοιχείων αναγνωριστικό. Ο διακομιστής πρέπει να εμπλουτίσετε τα αποτελέσματα με τα στοιχεία μετα-δεδομένα (π.χ., εικόνες, περιγραφή) και να στείλετε τη σελίδα που έχουν δημιουργηθεί στο πρόγραμμα περιήγησης.

![Drawing2][2]

2 η άλλη επιλογή είναι να χρησιμοποιήσετε το μικρό αρχείο JavaScript από φάση μία για να λάβετε μια απλή λίστα προτεινόμενων στοιχείων. Τα δεδομένα που λαμβάνονται εδώ είναι προσαρμόσιμο από εκείνη στην την πρώτη επιλογή.

![Drawing3][3]

##<a name="2-prerequisites"></a>2. προαπαιτούμενα στοιχεία

1. Δημιουργήστε ένα νέο μοντέλο χρησιμοποιώντας τα API. Ανατρέξτε στον οδηγό γρήγορης εκκίνησης σχετικά με τον τρόπο για να το κάνετε.
2. Κωδικοποίηση σας &lt;dataMarketUser&gt;:&lt;dataMarketKey&gt; με base64. (Αυτό θα χρησιμοποιηθεί για το βασικό έλεγχο ταυτότητας για να ενεργοποιήσετε τον κώδικα JS για να καλέσετε τα API).


##<a name="3-send-data-acquisition-events-using-javascript"></a>3. αποστολή συμβάντα απόκτηση δεδομένων χρησιμοποιώντας JavaScript
Ακολουθήστε τα παρακάτω βήματα διευκολυνθεί η αποστολή συμβάντα:

1.  Συμπεριλάβετε βιβλιοθήκη JQuery στον κώδικά σας. Μπορείτε να κάνετε λήψη του από το nuget στο την παρακάτω διεύθυνση URL.

        http://www.nuget.org/packages/jQuery/1.8.2
2.  Συμπεριλάβετε τη δέσμη ενεργειών Java συστάσεις βιβλιοθήκη από την παρακάτω διεύθυνση URL: http://aka.ms/RecoJSLib1

3.  Προετοιμασία της βιβλιοθήκης Azure ML συστάσεις με τις κατάλληλες παραμέτρους.

        <script>
            AzureMLRecommendationsStart("<base64encoding of username:key>",
            "<model_id>");
        </script>

4.  Στείλτε το κατάλληλο συμβάν. Ανατρέξτε στην ενότητα λεπτομερείς κάτω από το στοιχείο στον τύπο όλων των συμβάντων (παράδειγμα κάντε κλικ στο συμβάν)

        <script>
            if (typeof AzureMLRecommendationsEvent=="undefined") {      
                        AzureMLRecommendationsEvent = [];
                    }
            AzureMLRecommendationsEvent.push({ event: "click", item: "18321116" });
        </script>


###<a name="31-limitations-and-browser-support"></a>3.1. Περιορισμοί και υποστήριξη προγράμματος περιήγησης
Αυτή είναι μια αναφορά υλοποίηση και δίνεται ως έχει. Θα πρέπει να υποστηρίζει όλα τα κύρια προγράμματα περιήγησης.

###<a name="32-type-of-events"></a>3.2. Τύπος συμβάντων
Υπάρχουν 5 τύποι συμβάντων που υποστηρίζει τη βιβλιοθήκη: κάντε κλικ στην επιλογή, επιλέξτε σύσταση, προσθήκη στο καλάθι καταστήματος, κατάργηση από καταστήματος αγορών και αγορά. Υπάρχει ένα επιπλέον συμβάν που χρησιμοποιείται για να ρυθμίσετε το περιβάλλον χρήστη που ονομάζεται Login.

####<a name="321-click-event"></a>3.2.1. Κάντε κλικ στο συμβάν
Αυτό το συμβάν πρέπει να χρησιμοποιείται κάθε φορά που κάποιος χρήστης κάνει κλικ σε ένα στοιχείο. Συνήθως όταν ο χρήστης κάνει κλικ σε ένα στοιχείο ανοίγει μια νέα σελίδα με τις λεπτομέρειες του στοιχείου σε αυτήν τη σελίδα, πρέπει να ενεργοποιείται αυτό το συμβάν.

Παράμετροι:
- συμβάν (συμβολοσειρά, υποχρεωτικό) - "κάντε κλικ στην επιλογή"
- στοιχείο (συμβολοσειρά, υποχρεωτικό) - μοναδικό αναγνωριστικό του στοιχείου
- όνομα στοιχείου (συμβολοσειρά, προαιρετικό) - στο όνομα του στοιχείου
- itemDescription (συμβολοσειρά, προαιρετικό) - η περιγραφή του στοιχείου
- itemCategory (συμβολοσειρά, προαιρετικό) - στην κατηγορία του στοιχείου
        
        <script>
            if (typeof AzureMLRecommendationsEvent == "undefined") { AzureMLRecommendationsEvent = []; }
            AzureMLRecommendationsEvent.push({ event: "click", item: "3111718" });
        </script>

Ή με προαιρετικά δεδομένα:

        <script>
            if (typeof AzureMLRecommendationsEvent === "undefined") { AzureMLRecommendationsEvent = []; }
            AzureMLRecommendationsEvent.push({event: "click", item: "3111718", itemName: "Plane", itemDescription: "It is a big plane", itemCategory: "Aviation"});
        </script>


####<a name="322-recommendation-click-event"></a>3.2.2. Σύσταση, κάντε κλικ στην επιλογή συμβάντος
Αυτό το συμβάν πρέπει να χρησιμοποιείται κάθε φορά που κάποιος χρήστης κάνει κλικ σε ένα στοιχείο που έχει ληφθεί από Azure ML συστάσεις ως προτεινόμενες στοιχείο. Συνήθως όταν ο χρήστης κάνει κλικ σε ένα στοιχείο ανοίγει μια νέα σελίδα με τις λεπτομέρειες του στοιχείου σε αυτήν τη σελίδα, πρέπει να ενεργοποιείται αυτό το συμβάν.

Παράμετροι:
- συμβάν (συμβολοσειρά, υποχρεωτικό) - "recommendationclick"
- στοιχείο (συμβολοσειρά, υποχρεωτικό) - μοναδικό αναγνωριστικό του στοιχείου
- όνομα στοιχείου (συμβολοσειρά, προαιρετικό) - στο όνομα του στοιχείου
- itemDescription (συμβολοσειρά, προαιρετικό) - η περιγραφή του στοιχείου
- itemCategory (συμβολοσειρά, προαιρετικό) - στην κατηγορία του στοιχείου
- Σπέρματα (συμβολοσειρά πίνακας, προαιρετικό) - οι σπόροι που δημιούργησε το ερώτημα σύσταση.
- recoList (συμβολοσειρά πίνακας, προαιρετικό) - το αποτέλεσμα της αίτησης σύσταση που δημιούργησε το στοιχείο που έχει ενεργοποιηθεί.
        
        <script>
            if (typeof AzureMLRecommendationsEvent=="undefined") { AzureMLRecommendationsEvent = []; }
            AzureMLRecommendationsEvent.push({event: "recommendationclick", item: "18899918" });
        </script>

Ή με προαιρετικά δεδομένα:

        <script>
            if (typeof AzureMLRecommendationsEvent == "undefined") { AzureMLRecommendationsEvent = []; }
            AzureMLRecommendationsEvent.push({ event: eventName, item: "198", itemName: "Plane2", itemDescription: "It is a big plane2", itemCategory: "Default2", seeds: ["Seed1", "Seed2"], recoList: ["199", "198", "197"]               });
        </script>


####<a name="323-add-shopping-cart-event"></a>3.2.3. Προσθήκη συμβάντος καλάθι αγορών
Αυτό το συμβάν πρέπει να χρησιμοποιούνται όταν ο χρήστης Προσθήκη ενός στοιχείου στο καλάθι.
Παράμετροι:
* συμβάν (συμβολοσειρά, υποχρεωτικό) - "addshopcart"
* στοιχείο (συμβολοσειρά, υποχρεωτικό) - μοναδικό αναγνωριστικό του στοιχείου
* όνομα στοιχείου (συμβολοσειρά, προαιρετικό) - στο όνομα του στοιχείου
* itemDescription (συμβολοσειρά, προαιρετικό) - η περιγραφή του στοιχείου
* itemCategory (συμβολοσειρά, προαιρετικό) - στην κατηγορία του στοιχείου
        
        <script>
            if (typeof AzureMLRecommendationsEvent == "undefined") { AzureMLRecommendationsEvent = []; }
            AzureMLRecommendationsEvent.push({event: "addshopcart", item: "13221118" });
        </script>

####<a name="324-remove-shopping-cart-event"></a>3.2.4. Κατάργηση συμβάν Καρότσι αγορών
Αυτό το συμβάν πρέπει να χρησιμοποιείται όταν ο χρήστης καταργεί ένα στοιχείο στο καλάθι.

Παράμετροι:
* συμβάν (συμβολοσειρά, υποχρεωτικό) - "removeshopcart"
* στοιχείο (συμβολοσειρά, υποχρεωτικό) - μοναδικό αναγνωριστικό του στοιχείου
* όνομα στοιχείου (συμβολοσειρά, προαιρετικό) - στο όνομα του στοιχείου
* itemDescription (συμβολοσειρά, προαιρετικό) - η περιγραφή του στοιχείου
* itemCategory (συμβολοσειρά, προαιρετικό) - στην κατηγορία του στοιχείου
        
        <script>
            if (typeof AzureMLRecommendationsEvent=="undefined") { AzureMLRecommendationsEvent = []; }
            AzureMLRecommendationsEvent.push({ event: "removeshopcart", item: "111118" });
        </script>

####<a name="325-purchase-event"></a>3.2.5. Αγορά συμβάντος
Αυτό το συμβάν πρέπει να χρησιμοποιείται όταν ο χρήστης αγοράσει το καλάθι αγορών.

Παράμετροι:
* συμβάν (συμβολοσειρά) - "αγορά"
* τα στοιχεία (αγοράσει []) - πίνακα κρατώντας πατημένο το μια καταχώρηση για κάθε στοιχείο αγοράσει.<br><br>
Αγορά μορφή:
    * στοιχείο (συμβολοσειρά) - μοναδικό αναγνωριστικό του στοιχείου.
    * Count (int ή string) - αριθμός των στοιχείων που έχουν αγοράσει.
    * price (αιώρηση ή συμβολοσειρά) - προαιρετικό πεδίο - την τιμή του στοιχείου.

Το παρακάτω παράδειγμα εμφανίζει την αγορά του 3 στοιχείων (33, 34, 35), δύο με όλα τα πεδία συμπληρωμένο (στοιχείου, πλήθος, τιμή) και ένα (στοιχείο 34) χωρίς μια τιμή.

        <script>
            if ( typeof AzureMLRecommendationsEvent == "undefined"){ AzureMLRecommendationsEvent = []; }
            AzureMLRecommendationsEvent.push({ event: "purchase", items: [{ item: "33", count: "1", price: "10" }, { item: "34", count: "2" }, { item: "35", count: "1", price: "210" }] });
        </script>

####<a name="326-user-login-event"></a>3.2.6. Χρήστη σύνδεσης συμβάντος
Azure βιβλιοθήκη συμβάν συστάσεις ML δημιουργεί και χρησιμοποιήστε ένα cookie για να προσδιορίσετε τα συμβάντα που προέρχονται από το ίδιο πρόγραμμα περιήγησης. Προκειμένου να βελτίωση των αποτελεσμάτων του μοντέλου συστάσεις ML Azure δίνει τη δυνατότητα να ορίσετε ένα μοναδικό αναγνωριστικό χρήστη που θα αντικαταστήσει τη χρήση cookie.

Αυτό το συμβάν πρέπει να χρησιμοποιούνται μετά τη σύνδεση χρήστη στην τοποθεσία σας.

Παράμετροι:
* συμβάν (συμβολοσειρά) - "userlogin"
* χρήστης (συμβολοσειρά) - μοναδικό αναγνωριστικό του χρήστη.
        <script>
  Εάν (typeof AzureMLRecommendationsEvent == "απροσδιόριστο") {AzureMLRecommendationsEvent = [];} AzureMLRecommendationsEvent.push ({συμβάν: "userlogin", χρήστη: "ABCD10AA"});      </script>

##<a name="4-consume-recommendations-via-javascript"></a>4. εκμετάλλευση συστάσεις μέσω JavaScript
Ο κώδικας που χρησιμοποιεί τη σύσταση ενεργοποιείται από κάποιο συμβάν JavaScript από το πρόγραμμα-πελάτη ιστοσελίδα. Η απόκριση σύσταση περιλαμβάνει τα αναγνωριστικά προτεινόμενα στοιχεία, τα ονόματά τους και τους χαρακτηρισμούς. Είναι καλύτερα να χρησιμοποιήσετε αυτήν την επιλογή μόνο για μια λίστα Εμφάνιση των προτεινόμενων στοιχείων - πιο σύνθετες χειρισμού (όπως η προσθήκη του στοιχείου μετα-δεδομένα) θα πρέπει να γίνει η ενοποίηση πλευρά του διακομιστή.

###<a name="41-consume-recommendations"></a>4.1 εκμετάλλευση συστάσεων
Για την εκμετάλλευση συστάσεις πρέπει να περιλαμβάνουν τις απαιτούμενες βιβλιοθήκες JavaScript στη σελίδα σας και να καλέσετε AzureMLRecommendationsStart. Ανατρέξτε στην ενότητα 2.

Για την εκμετάλλευση συστάσεις για ένα ή περισσότερα στοιχεία που πρέπει να καλέσετε μια μέθοδο που ονομάζεται: AzureMLRecommendationsGetI2IRecommendation.

Παράμετροι:
* στοιχεία (πίνακας συμβολοσειρών) - ένα ή περισσότερα στοιχεία για να δείτε προτάσεις για. Εάν ένα build Fbt εκμετάλλευση, στη συνέχεια, μπορείτε να ορίσετε εδώ μόνο σε ένα στοιχείο.
* numberOfResults (int) - αριθμός απαιτείται αποτελεσμάτων.
* includeMetadata (boolean, προαιρετικό) - Εάν οριστεί στην τιμή "true" υποδηλώνει ότι το πεδίο μετα-δεδομένων πρέπει να συμπληρωθεί στο αποτέλεσμα.
* Λειτουργία επεξεργασίας - μια συνάρτηση που θα χειρίζεται τις συστάσεις που επιστρέφονται. Τα δεδομένα που επιστρέφονται ως ένας πίνακας με:
    * Ειδών - στοιχείο μοναδικό αναγνωριστικό
    * όνομα - στοιχείο όνομα (εάν υπάρχουν στον κατάλογο)
    * χαρακτηρισμός - σύσταση χαρακτηρισμού
    * μετα-δεδομένων - μια συμβολοσειρά που αντιπροσωπεύει τα μετα-δεδομένα του στοιχείου

Παράδειγμα: Ο ακόλουθος κώδικας αιτήσεις 8 συστάσεις για το στοιχείο "64f6eb0d-947a-4c18-a16c-888da9e228ba" (και όχι καθορίζοντας includeMetadata - μη ρητά εμφανίζεται η ένδειξη ότι απαιτείται καμία μετα-δεδομένα), concatenate, στη συνέχεια, τα αποτελέσματα σε ένα buffer.

        <script>
            var reco = AzureMLRecommendationsGetI2IRecommendation(["64f6eb0d-947a-4c18-a16c-888da9e228ba"], 8, false, function (reco) {
                var buff = "";
                for (var ii = 0; ii < reco.length; ii++) {
                    buff += reco[ii].item + "," + reco[ii].name + "," + reco[ii].rating + "\n";
                }
                alert(buff);
            });
        </script>


[1]: ./media/machine-learning-recommendation-api-javascript-integration/Drawing1.png
[2]: ./media/machine-learning-recommendation-api-javascript-integration/Drawing2.png
[3]: ./media/machine-learning-recommendation-api-javascript-integration/Drawing3.png
 
