<properties
    pageTitle="Για την ανάπτυξη υπηρεσιών web Azure ML που χρησιμοποιούν δεδομένα εισαγωγής και εξαγωγής δεδομένων λειτουργικές μονάδες | Microsoft Azure"
    description="Μάθετε πώς μπορείτε να χρησιμοποιήσετε τις λειτουργικές μονάδες δεδομένων εισαγωγής και εξαγωγής δεδομένων για αποστολή και λήψη δεδομένων από μια υπηρεσία web."
    services="machine-learning"
    documentationCenter=""
    authors="vDonGlover"
    manager="raymondlaghaeian"
    editor=""/>

<tags
    ms.service="machine-learning"
    ms.workload="data-services"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="08/12/2016"
    ms.author="v-donglo"/>



# <a name="deploying-azure-ml-web-services-that-use-data-import-and-data-export-modules"></a>Ανάπτυξη υπηρεσιών web Azure ML που χρησιμοποιούν λειτουργικές μονάδες δεδομένων εισαγωγής και εξαγωγής δεδομένων 

Όταν δημιουργείτε μια πρόβλεψης έρευνας, συνήθως προσθέτετε ένα web υπηρεσίας εισόδου και εξόδου. Κατά την ανάπτυξη την έρευνα, τους καταναλωτές να στέλνετε και να λαμβάνετε δεδομένα από την υπηρεσία web τις εισροές και εκροές. Για ορισμένες εφαρμογές, δεδομένα του καταναλωτή μπορεί να είναι διαθέσιμη από τροφοδοσία δεδομένων ή που βρίσκονται ήδη σε μια εξωτερική προέλευση δεδομένων όπως το χώρο αποθήκευσης αντικειμένων Blob του Azure. Σε αυτές τις περιπτώσεις, που δεν χρειάζονται ανάγνωση και εγγραφή δεδομένων με χρήση εισόδων υπηρεσίας web και των εξόδων. Αντί για αυτό, τους να χρησιμοποιήσετε την υπηρεσία εκτέλεσης δέσμης (BES) για την ανάγνωση δεδομένων από την προέλευση δεδομένων χρησιμοποιώντας μια λειτουργική μονάδα εισαγωγή δεδομένων και να γράφετε βαθμολογίας τα αποτελέσματα σε μια θέση διαφορετικά δεδομένα χρησιμοποιώντας μια λειτουργική μονάδα εξαγωγή δεδομένων.

Τα δεδομένα εισαγωγής και εξαγωγής δεδομένων λειτουργικές μονάδες, μπορεί να ανάγνωσης και εγγραφής σε έναν αριθμό δεδομένων παρέχουν θέσεις, όπως μια διεύθυνση URL Web μέσω HTTP Hive ερώτημα, μια βάση δεδομένων Azure SQL, χώρος αποθήκευσης πινάκων του Azure, χώρο αποθήκευσης αντικειμένων Blob του Azure, μια τροφοδοσία δεδομένων ή μια βάση δεδομένων SQL εσωτερικής εγκατάστασης.

Χρησιμοποιεί αυτό το θέμα η "δείγμα 5: αξιολόγηση τρένο, δοκιμή, για την ταξινόμηση δυαδικό: ενηλίκους συνόλου δεδομένων" δείγμα και προϋποθέτει έχει φορτωθεί ήδη του συνόλου δεδομένων σε πίνακα του Azure SQL με το όνομα censusdata.

## <a name="create-the-training-experiment"></a>Δημιουργία έρευνας την εκπαίδευση 
 
Όταν ανοίγετε το "δείγμα 5: αξιολόγηση τρένο, δοκιμή, για την ταξινόμηση δυαδικό: ενηλίκους συνόλου δεδομένων" δείγμα χρησιμοποιεί το δείγμα dataset ενηλίκους απογραφή εισοδήματος δυαδικό ταξινόμηση. Και την έρευνα στον καμβά πρέπει να μοιάζει με την ακόλουθη εικόνα.

![Αρχική ρύθμιση παραμέτρων του την έρευνα.](./media/machine-learning-web-services-that-use-import-export-modules/initial-look-of-experiment.png)
  

Για να διαβάσετε τα δεδομένα από τον πίνακα Azure SQL:

1.  Διαγραφή της λειτουργικής μονάδας συνόλου δεδομένων.
2.  Στο πλαίσιο Αναζήτηση στοιχείων, πληκτρολογήστε εισαγωγής.
3.  Από τη λίστα αποτελεσμάτων, προσθέστε μια λειτουργική μονάδα *Εισαγωγή δεδομένων* στον καμβά έρευνας.
4.  Σύνδεση εξόδου της λειτουργικής μονάδας *Εισαγωγή δεδομένων* η είσοδος της λειτουργικής μονάδας *Clean δεδομένα λείπουν* .
5.  Στο παράθυρο Ιδιότητες, επιλέξτε **Βάση δεδομένων SQL Azure** στο αναπτυσσόμενο μενού του **Αρχείου προέλευσης δεδομένων** .
6.  Στο πλαίσιο **όνομα διακομιστή βάσης δεδομένων**, **όνομα βάσης δεδομένων**, **όνομα χρήστη**και **τον κωδικό πρόσβασης** πεδία, εισαγάγετε τις κατάλληλες πληροφορίες για τη βάση δεδομένων.
7.  Στο πεδίο ερώτημα βάσης δεδομένων, εισαγάγετε το παρακάτω ερώτημα.

        select [age],
           [workclass],
           [fnlwgt],
           [education],
           [education-num],
           [marital-status],
           [occupation],
           [relationship],
           [race],
           [sex],
           [capital-gain],
           [capital-loss],
           [hours-per-week],
           [native-country],
           [income]
        from dbo.censusdata;

8.  Στο κάτω μέρος του έρευνας καμβά, κάντε κλικ στην επιλογή **Εκτέλεση**.

## <a name="create-the-predictive-experiment"></a>Δημιουργία του πρόβλεψης έρευνας

Στη συνέχεια ορίστε το πρόβλεψης έρευνας από την οποία θα αναπτύξετε την υπηρεσία web.

1.  Στο κάτω μέρος του καμβά έρευνας, κάντε κλικ στην επιλογή **Ορισμός υπηρεσίας Web** και επιλέξτε **Πρόβλεψης υπηρεσίας Web [Recommended]**.
2.  Καταργήστε την *Εισαγωγή δεδομένων υπηρεσίας Web* και οι *λειτουργικές μονάδες εξόδου υπηρεσίας Web* από την έρευνα πρόβλεψης. 
3.  Στο πλαίσιο Αναζήτηση στοιχείων, πληκτρολογήστε εξαγωγή.
4.  Από τη λίστα αποτελεσμάτων, προσθέστε μια λειτουργική μονάδα *Εξαγωγή δεδομένων* στον καμβά έρευνας.
5.  Σύνδεση εξόδου της λειτουργικής μονάδας *Μοντέλο βαθμολογία* η είσοδος της λειτουργικής μονάδας *Εξαγωγή δεδομένων* . 
6.  Στο παράθυρο Ιδιότητες, επιλέξτε **Βάση δεδομένων SQL Azure** στην αναπτυσσόμενη λίστα προορισμού δεδομένων.
7.  Στο πλαίσιο **όνομα διακομιστή βάσης δεδομένων**, **όνομα βάσης δεδομένων**, **όνομα διακομιστή του λογαριασμού χρήστη**και **κωδικό πρόσβασης του λογαριασμού χρήστη διακομιστή** πεδία, εισαγάγετε τις κατάλληλες πληροφορίες για τη βάση δεδομένων.
8.  Στο πεδίο **λίστα των στηλών για να αποθηκευτούν διαχωρισμένες με κόμμα** , πληκτρολογήστε έχει βαθμολογηθεί με ετικέτες.
9.  Στο πλαίσιο του που **το πεδίο Όνομα πίνακα δεδομένων**, πληκτρολογήστε dbo. ScoredLabels. Εάν δεν υπάρχει στον πίνακα, δημιουργείται όταν εκτελείται το έρευνας ή ονομάζεται την υπηρεσία web.
10. Στο πεδίο **λίστας στηλών datatable διαχωρισμένες με κόμμα** , πληκτρολογήστε ScoredLabels.

Όταν γράφετε μια εφαρμογή που καλεί την υπηρεσία web τελικό, μπορείτε να καθορίσετε μια διαφορετική εισαγωγής ερωτήματος ή πίνακα προορισμού κατά το χρόνο εκτέλεσης. Για να ρυθμίσετε αυτές τις εισροές και εκροές, μπορείτε να χρησιμοποιήσετε τη δυνατότητα των παραμέτρων της υπηρεσίας Web για να ορίσετε την ιδιότητα *προέλευση δεδομένων* λειτουργική μονάδα *Εισαγωγή δεδομένων* και την ιδιότητα *Εξαγωγή δεδομένων* λειτουργίας δεδομένων προορισμού.  Για περισσότερες πληροφορίες σχετικά με τις παραμέτρους υπηρεσίας Web, ανατρέξτε στην [καταχώρηση AzureML των παραμέτρων της υπηρεσίας Web](https://blogs.technet.microsoft.com/machinelearning/2014/11/25/azureml-web-service-parameters/) για την Cortana πληροφοριών και ιστολόγιο μηχανικής εκμάθησης.

Για να ρυθμίσετε τις παραμέτρους της υπηρεσίας Web για το ερώτημα εισαγωγής και ο πίνακας προορισμού:

1.  Στο παράθυρο "Ιδιότητες" για τη λειτουργική μονάδα *Εισαγωγή δεδομένων* , κάντε κλικ στο εικονίδιο στην επάνω δεξιά γωνία του πεδίου **ερώτημα βάσης δεδομένων** και επιλέξτε **Ορισμός ως παράμετρο υπηρεσίας web**.
2.  Στο παράθυρο "Ιδιότητες" για τη λειτουργική μονάδα *Εξαγωγή δεδομένων* , κάντε κλικ στο εικονίδιο στην επάνω δεξιά γωνία της στο πεδίο **όνομα πίνακα δεδομένων** και επιλέξτε **Ορισμός ως παράμετρο υπηρεσίας web**.
3.  Στο κάτω μέρος του παραθύρου ιδιοτήτων λειτουργική μονάδα *Εξαγωγή δεδομένων* , στην ενότητα **Των παραμέτρων της υπηρεσίας Web** , κάντε κλικ στο ερώτημα βάσης δεδομένων και μετονομάστε το ερώτημα.
4.  Κάντε κλικ στο **όνομα πίνακα δεδομένων** και μετονομάστε την σε **πίνακα**.

Όταν ολοκληρώσετε, σας έρευνας θα πρέπει να μοιάζει με την παρακάτω εικόνα.
 
![Τελική εμφάνισης της έρευνας.](./media/machine-learning-web-services-that-use-import-export-modules/experiment-with-import-data-added.png)

Τώρα μπορείτε να αναπτύξετε την έρευνα ως υπηρεσία web.

## <a name="deploy-the-web-service"></a>Ανάπτυξη της υπηρεσίας web 
Μπορείτε να αναπτύξετε σε κλασική ή νέα υπηρεσία web.

### <a name="deploy-a-classic-web-service"></a>Ανάπτυξη μιας υπηρεσίας Web κλασική

Για να αναπτύξετε ως κλασική υπηρεσία Web και να δημιουργήσετε μια εφαρμογή για την εκμετάλλευση του:

1.  Στο κάτω μέρος του καμβά έρευνας, κάντε κλικ στην επιλογή Εκτέλεση.
2.  Όταν ολοκληρωθεί η εκτέλεση, κάντε κλικ στην επιλογή **Ανάπτυξη υπηρεσίας Web** και επιλέξτε **Ανάπτυξη υπηρεσίας Web [κλασική]**.
3.  Στον πίνακα εργαλείων υπηρεσίας web, εντοπίστε τον αριθμό-κλειδί API. Αντιγραφή και αποθηκεύστε το να χρησιμοποιήσετε αργότερα.
4.  **Προεπιλεγμένη τελικό σημείο** του πίνακα, κάντε κλικ στη σύνδεση **Εκτέλεσης δέσμη** για να ανοίξετε τη σελίδα Βοήθεια API.
5.  Στο Visual Studio, δημιουργήστε μια εφαρμογή κονσόλας C#.
6.  Στη σελίδα Βοήθειας API, βρείτε την ενότητα **Δείγμα κώδικα** στο κάτω μέρος της σελίδας.
7.  Αντιγράψτε και επικολλήστε το δείγμα κώδικα C# στο αρχείο σας Program.cs και καταργήστε όλες τις αναφορές για το χώρο αποθήκευσης αντικειμένων blob.
8.  Ενημερώστε την τιμή της μεταβλητής *apiKey* με τον αριθμό-κλειδί API αποθηκεύσατε νωρίτερα.
9.  Εντοπίστε τη δήλωση της αίτησης και ενημερώστε τις τιμές των παραμέτρων της υπηρεσίας Web που περνούν τις λειτουργικές μονάδες *Δεδομένων Εισαγωγή* και *Εξαγωγή δεδομένων* . Σε αυτήν την περίπτωση, που θα χρησιμοποιήσετε το αρχικό ερώτημα, αλλά να καθορίσετε ένα νέο όνομα πίνακα.

        var request = new BatchExecutionRequest() 
        {   
            GlobalParameters = new Dictionary<string, string>() {
            { "Query", @"select [age], [workclass], [fnlwgt], [education], [education-num], [marital-status], [occupation], [relationship], [race], [sex], [capital-gain], [capital-loss], [hours-per-week], [native-country], [income] from dbo.censusdata" },
            { "Table", "dbo.ScoredTable2" },
            }
        };

10. Εκτελέστε την εφαρμογή. 

Μετά την ολοκλήρωση της εκτέλεσης, προστίθεται ένα νέο πίνακα στη βάση δεδομένων που περιέχει τα αποτελέσματα βαθμολογίας.

### <a name="deploy-a-new-web-service"></a>Ανάπτυξη μιας νέας υπηρεσίας Web

Για να αναπτύξετε ως νέα υπηρεσία Web και να δημιουργήσετε μια εφαρμογή για την εκμετάλλευση του:

1.  Στο κάτω μέρος του έρευνας καμβά, κάντε κλικ στην επιλογή **Εκτέλεση**.
2.  Όταν ολοκληρωθεί η εκτέλεση, κάντε κλικ στην επιλογή **Ανάπτυξη υπηρεσίας Web** και επιλέξτε **Ανάπτυξη υπηρεσίας Web [νέο]**.
3.  Στη σελίδα ανάπτυξη έρευνας, πληκτρολογήστε ένα όνομα για την υπηρεσία web και επιλέξτε ένα πρόγραμμα τιμολόγησης και κατόπιν κάντε κλικ στην επιλογή **Ανάπτυξη**.
4.  Στη σελίδα **Γρήγορη εκκίνηση** , κάντε κλικ στην επιλογή **ανάλωση**.
5.  Στην ενότητα **Δείγμα κώδικα** , κάντε κλικ στην επιλογή **δέσμης**.
6.  Στο Visual Studio, δημιουργήστε μια εφαρμογή κονσόλας C#.
7.  Αντιγράψτε και επικολλήστε το δείγμα κώδικα C# στο αρχείο σας Program.cs.
8.  Ενημερώστε την τιμή της μεταβλητής *apiKey* με το **Πρωτεύον κλειδί** που βρίσκεται στην ενότητα **κατανάλωση βασικές πληροφορίες** .
9.  Εντοπίστε τη δήλωση *scoreRequest* και ενημερώστε τις τιμές των παραμέτρων της υπηρεσίας Web που περνούν τις λειτουργικές μονάδες *Δεδομένων Εισαγωγή* και *Εξαγωγή δεδομένων* . Σε αυτήν την περίπτωση, που θα χρησιμοποιήσετε το αρχικό ερώτημα, αλλά να καθορίσετε ένα νέο όνομα πίνακα.

        var scoreRequest = new
        {
            Inputs = new Dictionary<string, StringTable>()
            {
            },
            GlobalParameters = new Dictionary<string, string>() {
                 { "Query", @"select [age], [workclass], [fnlwgt], [education], [education-num], [marital-status], [occupation], [relationship], [race], [sex], [capital-gain], [capital-loss], [hours-per-week], [native-country], [income] from dbo.censusdata" },
                { "Table", "dbo.ScoredTable3" },
            }
        };

10. Εκτελέστε την εφαρμογή. 
 

