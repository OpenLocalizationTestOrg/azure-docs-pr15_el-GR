<properties
    pageTitle="Επαναρύθμιση μηχανικής εκμάθησης μοντέλων μέσω προγραμματισμού | Microsoft Azure"
    description="Μάθετε πώς να μέσω προγραμματισμού Επαναρύθμιση μοντέλου και ενημέρωση της υπηρεσίας web για τη χρήση του μοντέλου που μόλις εκπαιδευμένο στο Azure μηχανικής εκμάθησης."
    services="machine-learning"
    documentationCenter=""
    authors="raymondlaghaeian"
    manager="jhubbard"
    editor="cgronlun"/>

<tags
    ms.service="machine-learning"
    ms.workload="data-services"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="10/10/2016"
    ms.author="raymondl;garye;v-donglo"/>


# <a name="retrain-machine-learning-models-programmatically"></a>Επαναρύθμιση μηχανικής εκμάθησης μοντέλων μέσω προγραμματισμού  

Σε αυτές τις οδηγίες, θα μάθετε πώς να μέσω προγραμματισμού Επαναρύθμιση μιας Azure μηχανικής εκμάθησης υπηρεσίας Web χρησιμοποιώντας C# και την υπηρεσία μηχανικής εκμάθησης δέσμη εκτέλεσης.

Αφού έχετε retrained στο μοντέλο, οι ακόλουθες αναλυτικές παρουσιάσεις δείχνουν πώς μπορείτε να ενημερώσετε το μοντέλο στην υπηρεσία web πρόβλεψης:

- Εάν αναπτύξει μια υπηρεσία web κλασική στην πύλη του υπολογιστή υπηρεσιών Web εκμάθησης, ανατρέξτε στο θέμα [Επαναρύθμιση μια υπηρεσία web κλασική](machine-learning-retrain-a-classic-web-service.md). 
- Εάν αναπτύξει μια νέα υπηρεσία web, ανατρέξτε στο θέμα [Επαναρύθμιση μια νέα υπηρεσία web, χρησιμοποιώντας το cmdlet διαχείρισης μηχανικής εκμάθησης](machine-learning-retrain-new-web-service-using-powershell.md).

Για μια επισκόπηση της διαδικασίας επαναπροσαρμογής, ανατρέξτε στο θέμα [Επαναρύθμιση μοντέλου μηχανικής εκμάθησης](machine-learning-retrain-machine-learning-model.md).

Εάν θέλετε να ξεκινήσετε με σας υπάρχουσα υπηρεσία νέας διαχείρισης πόρων Azure που βασίζονται στο web, ανατρέξτε στο θέμα [Επαναρύθμιση μια υπάρχουσα υπηρεσία web πρόβλεψης](machine-learning-retrain-existing-resource-manager-based-web-service.md).

## <a name="create-a-training-experiment"></a>Δημιουργία μιας έρευνας εκπαίδευσης
 
Για αυτό το παράδειγμα, θα χρησιμοποιήσετε "δείγμα 5: αξιολόγηση τρένο, δοκιμή, για την ταξινόμηση δυαδικό: ενηλίκους συνόλου δεδομένων" από τα δείγματα Microsoft Azure μηχανικής εκμάθησης. 
    
Για να δημιουργήσετε την έρευνα:

1.  Πραγματοποιήστε είσοδο στο Microsoft Azure υπολογιστή εκμάθησης Studio. 
2.  Στην κάτω δεξιά γωνία του πίνακα εργαλείων, κάντε κλικ στην επιλογή **Δημιουργία**.
3.  Από τα δείγματα της Microsoft, επιλέξτε δείγμα 5.
4.  Για να μετονομάσετε την έρευνα, στο επάνω μέρος του καμβά έρευνας, επιλέξτε το όνομα της έρευνας "δείγμα 5: αξιολόγηση τρένο, δοκιμή, για την ταξινόμηση δυαδικό: ενηλίκους συνόλου δεδομένων".
5.  Τύπος απογραφή μοντέλο.
6.  Στο κάτω μέρος του έρευνας καμβά, κάντε κλικ στην επιλογή **Εκτέλεση**.
7.  Κάντε κλικ στην επιλογή **ρύθμιση υπηρεσίας web** και επιλέξτε **Retraining υπηρεσία web**. 

    ![Αρχικό έρευνας.][2]

Διάγραμμα 2: Αρχικής έρευνας.

## <a name="create-a-predictive-experiment-and-publish-as-a-web-service"></a>Δημιουργία μιας έρευνας πρόβλεψης και δημοσίευση ως υπηρεσία web  

Στη συνέχεια δημιουργείτε μια έρευνα Predicative.

1.  Στο κάτω μέρος του καμβά έρευνας, κάντε κλικ στην επιλογή **Ορισμός υπηρεσίας Web** και επιλέξτε **Πρόβλεψης υπηρεσία Web**. Αυτό αποθηκεύει το μοντέλο ως μοντέλου εκπαιδευμένο και προσθέτει web υπηρεσίας εισόδου και εξόδου λειτουργικές μονάδες. 
2.  Κάντε κλικ στην επιλογή **Εκτέλεση**. 
3.  Αφού ολοκληρωθεί η εκτέλεση του έρευνας, κάντε κλικ στην επιλογή **Ανάπτυξη υπηρεσίας Web [κλασική]** ή **Ανάπτυξη υπηρεσίας Web [νέο]**.

## <a name="deploy-the-training-experiment-as-a-training-web-service"></a>Ανάπτυξη του εκπαιδευτικού έρευνας ως μια υπηρεσία web εκπαίδευσης

Για να Επαναρύθμιση εκπαιδευμένο μοντέλο, πρέπει να αναπτύξετε την έρευνα εκπαίδευσης που δημιουργήσατε ως υπηρεσία web Retraining. Αυτή η υπηρεσία web χρειάζεται μια λειτουργική μονάδα *Εξόδου υπηρεσίας Web* συνδεδεμένο με το * [Μοντέλο τρένο] [ train-model] * λειτουργική μονάδα, να μπορούν να δημιουργήσουν νέες εκπαιδευμένο μοντέλα.

1. Για να επιστρέψετε το έρευνας εκπαίδευση, κάντε κλικ στο εικονίδιο δοκιμών στο αριστερό τμήμα του παραθύρου και, στη συνέχεια, κάντε κλικ στην επιλογή την έρευνα που ονομάζεται απογραφή μοντέλο.  
2. Στο πλαίσιο αναζήτησης στοιχεία έρευνας αναζήτησης, πληκτρολογήστε υπηρεσία web. 
3. Σύρετε μια λειτουργική μονάδα *Εισόδου δεδομένων υπηρεσίας Web* στη τον καμβά έρευνας και συνδέστε τα αποτελέσματά στη λειτουργική μονάδα *Clean δεδομένα λείπουν* .  Αυτό εξασφαλίζει ότι τα δεδομένα σας επαναπροσαρμογής υποβάλλεται σε επεξεργασία τον ίδιο τρόπο όπως τα αρχικά δεδομένα εκπαίδευσης.
4. Λειτουργικές μονάδες *υπηρεσίας web εξόδου* σύρετε στον καμβά έρευνας. Συνδέστε το αποτέλεσμα της λειτουργικής μονάδας *Τρένο μοντέλο* σε αυτήν και το αποτέλεσμα της λειτουργικής μονάδας *Αξιολόγηση μοντέλο* με το άλλο. Το αποτέλεσμα της υπηρεσίας web για **Μοντέλο τρένο** μας παρέχει το νέο μοντέλο εκπαιδευμένο. Το αποτέλεσμα που έχουν επισυναφθεί σε **Αξιολόγηση μοντέλο** εμφανίζει της λειτουργικής μονάδας, που είναι τα αποτελέσματα επιδόσεων.
5. Κάντε κλικ στην επιλογή **Εκτέλεση**. 

Στη συνέχεια πρέπει να αναπτύξετε την εκπαίδευση έρευνας με μια υπηρεσία web που παράγει μοντέλου εκπαιδευμένο και μοντέλο αξιολόγησης αποτελέσματα. Για να γίνει αυτό, το επόμενο σύνολο ενεργειών εξαρτώνται από αν εργάζεστε με μια υπηρεσία web κλασική ή μια νέα υπηρεσία web.  
  
**Υπηρεσία web κλασική**

Στο κάτω μέρος του καμβά έρευνας, κάντε κλικ στην επιλογή **Ορισμός υπηρεσίας Web** και επιλέξτε **Ανάπτυξη υπηρεσίας Web [κλασική]**. Η υπηρεσία Web **πίνακα εργαλείων** εμφανίζεται με τον αριθμό-κλειδί API και τη σελίδα Βοήθεια API για εκτέλεση ενεργειών δέσμης. Μόνο η μέθοδος εκτέλεσης δέσμη μπορεί να χρησιμοποιηθεί για τη δημιουργία εκπαιδευμένο μοντέλα.

**Νέα υπηρεσία web**

Στο κάτω μέρος του καμβά έρευνας, κάντε κλικ στην επιλογή **Ορισμός υπηρεσίας Web** και επιλέξτε **Ανάπτυξη υπηρεσίας Web [νέο]**. Πύλη του Web υπηρεσίας Azure μηχανικής εκμάθησης υπηρεσίες Web ανοίγει στη σελίδα της υπηρεσίας web ανάπτυξη. Πληκτρολογήστε ένα όνομα για την υπηρεσία web και επιλέξτε ένα σχέδιο πληρωμής και, στη συνέχεια, κάντε κλικ στην επιλογή **Ανάπτυξη**. Μόνο η μέθοδος εκτέλεσης δέσμη μπορεί να χρησιμοποιηθεί για τη δημιουργία εκπαιδευμένο μοντέλα

Σε κάθε περίπτωση, μετά την ολοκλήρωση της έρευνας εκτελείται, η ροή εργασίας που προκύπτει πρέπει να μοιάζει ως εξής:

![Που προκύπτει ροής εργασιών αφού ολοκληρωθεί η εκτέλεση.][4]

Διάγραμμα 3: Που προκύπτει μετά την εκτέλεση της ροής εργασίας.

## <a name="retrain-the-model-with-new-data-using-bes"></a>Επαναρύθμιση το μοντέλο με νέα δεδομένα χρησιμοποιώντας BES

Για αυτό το παράδειγμα, χρησιμοποιείτε C# για να δημιουργήσετε την εφαρμογή επαναπροσαρμογής. Μπορείτε επίσης να χρησιμοποιήσετε το δείγμα κώδικα Python ή R για να εκτελέσετε αυτήν την εργασία.

Για να καλέσετε τα API επιμόρφωση:

1. Δημιουργία μιας εφαρμογής κονσόλας C# στο Visual Studio (New -> έργου -> Windows για υπολογιστή -> εφαρμογής κονσόλας).
2.  Είσοδος στην πύλη υπηρεσίας Web μηχανικής εκμάθησης.
3.  Εάν εργάζεστε με μια υπηρεσία web κλασική, κάντε κλικ στην επιλογή **Κλασική υπηρεσιών Web**.
    1.  Κάντε κλικ στην υπηρεσία web με την οποία εργάζεστε.
    2.  Κάντε κλικ στην επιλογή το προεπιλεγμένο τελικό σημείο.
    3.  Κάντε κλικ στην επιλογή **Χρήση**.
    4.  Στο κάτω μέρος της σελίδας **ανάλωση** , στην ενότητα **Δείγμα κώδικα** , κάντε κλικ στην επιλογή **δέσμης**.
    5.  Συνεχίστε με το βήμα 5 της διαδικασίας.
4.  Εάν εργάζεστε με μια νέα υπηρεσία web, κάντε κλικ στην επιλογή **Υπηρεσίες Web**.
    1.  Κάντε κλικ στην υπηρεσία web με την οποία εργάζεστε.
    2.  Κάντε κλικ στην επιλογή **Χρήση**.
    3.  Στο κάτω μέρος της σελίδας ανάλωση, στην ενότητα **Δείγμα κώδικα** , κάντε κλικ στην επιλογή **δέσμης**.
5.  Αντιγράψτε τον κώδικα C# δείγμα για εκτέλεση ενεργειών δέσμης και επικολλήστε το στο αρχείο Program.cs, και βεβαιωθείτε ότι ο χώρος ονομάτων παραμένει ανέπαφο.

Προσθέστε το πακέτο Nuget Microsoft.AspNet.WebApi.Client όπως καθορίζεται στα σχόλια. Για να προσθέσετε την αναφορά σε Microsoft.WindowsAzure.Storage.dll, ενδέχεται να πρέπει πρώτα να εγκαταστήσετε τη βιβλιοθήκη προγράμματος-πελάτη για τις υπηρεσίες του Microsoft Azure χώρου αποθήκευσης. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Υπηρεσίες αποθήκευσης των Windows](https://www.nuget.org/packages/WindowsAzure.Storage).

### <a name="update-the-apikey-declaration"></a>Ενημερώστε τη δήλωση apikey

Εντοπίστε τη δήλωση **apikey** .

    const string apiKey = "abc123"; // Replace this with the API key for the web service

Στην ενότητα **κατανάλωση βασικές πληροφορίες** από τη σελίδα **ανάλωση** , εντοπίστε το πρωτεύον κλειδί και αντιγράψτε την στη δήλωση **apikey** .

### <a name="update-the-azure-storage-information"></a>Ενημερώστε τις πληροφορίες της αποθήκευσης Azure

Το δείγμα κώδικα BES αποστέλλει ένα αρχείο από μια τοπική μονάδα δίσκου (για παράδειγμα "C:\temp\CensusIpnput.csv") με το χώρο αποθήκευσης Azure, επεξεργάζεται και γράφει τα αποτελέσματα με το χώρο αποθήκευσης Azure.  

Για να εκτελέσετε αυτήν την εργασία, πρέπει να ανακτήσετε τις πληροφορίες όνομα, αριθμό-κλειδί και κοντέινερ λογαριασμού του χώρου αποθήκευσης για το λογαριασμό χώρου αποθήκευσης από την πύλη κλασική Azure και τις αντίστοιχες τιμές ενημέρωσης του κωδικού. 

1. Είσοδος στην πύλη του κλασική Azure.
1. Στη στήλη αριστερό παράθυρο περιήγησης, κάντε κλικ στην επιλογή **Αποθήκευση**.
1. Από τη λίστα λογαριασμών χώρου αποθήκευσης, επιλέξτε έναν για να αποθηκεύσετε το μοντέλο retrained.
1. Στο κάτω μέρος της σελίδας, κάντε κλικ στην επιλογή **Διαχείριση πλήκτρων πρόσβασης**.
1. Αντιγραφή και αποθηκεύσετε το **Πρωτεύον κλειδί πρόσβασης** και κλείστε το παράθυρο διαλόγου. 
1. Στο επάνω μέρος της σελίδας, κάντε κλικ στο **κοντέινερ**.
1. Επιλέξτε ένα υπάρχον κοντέινερ ή δημιουργήστε ένα νέο και αποθηκεύστε το όνομα.

Εντοπίστε το δηλώσεων *StorageAccountName*, *StorageAccountKey*και *StorageContainerName* και ενημερώστε τις τιμές που έχετε αποθηκεύσει από την πύλη του Azure.

    const string StorageAccountName = "mystorageacct"; // Replace this with your Azure Storage Account name
    const string StorageAccountKey = "a_storage_account_key"; // Replace this with your Azure Storage Key
    const string StorageContainerName = "mycontainer"; // Replace this with your Azure Storage Container name
            
Πρέπει επίσης να εξασφαλίσετε το αρχείο εισόδου είναι διαθέσιμες στη θέση που καθορίζετε τον κώδικα. 

### <a name="specify-the-output-location"></a>Καθορίστε τη θέση εξόδου

Κατά τον καθορισμό της θέσης εξόδου στο φορτίο αίτηση, την επέκταση του αρχείου που καθορίζεται στο *RelativeLocation* πρέπει να έχει καθοριστεί ως ilearner. 

Δείτε το παρακάτω παράδειγμα:

    Outputs = new Dictionary<string, AzureBlobDataReference>() {
        {
            "output1",
            new AzureBlobDataReference()
            {
                ConnectionString = storageConnectionString,
                RelativeLocation = string.Format("{0}/output1results.ilearner", StorageContainerName) /*Replace this with the location you would like to use for your output file, and valid file extension (usually .csv for scoring results, or .ilearner for trained models)*/
            }
        },

>[AZURE.NOTE] Τα ονόματα των τις θέσεις εξόδου σας μπορεί να διαφέρουν από αυτά σε αυτές τις οδηγίες με βάση τη σειρά με την οποία έχετε προσθέσει τις λειτουργικές μονάδες εξόδου υπηρεσία web. Αφού ρυθμίσετε αυτή εκπαίδευση πειραματιστείτε με τις δύο εξόδους, τα αποτελέσματα περιλαμβάνουν πληροφορίες θέση αποθήκευσης και για τους δύο.  

![Επαναπροσαρμογής εξόδου][6]

Διάγραμμα 4: Επιμόρφωση εξόδου.

## <a name="evaluate-the-retraining-results"></a>Αξιολογεί τα αποτελέσματα επαναπροσαρμογής
 
Όταν εκτελείτε την εφαρμογή, το αποτέλεσμα περιλαμβάνει το διακριτικό διεύθυνση URL και συσχετισμούς Ασφαλείας που είναι απαραίτητο για να αποκτήσετε πρόσβαση τα αποτελέσματα του υπολογισμού.

Μπορείτε να δείτε τα αποτελέσματα επιδόσεων του μοντέλου retrained, συνδυάζοντας τις τιμές του *BaseLocation* *RelativeLocation*και *SasBlobToken* από τα αποτελέσματα εξόδου για *output2* (όπως φαίνεται στην προηγούμενη εικόνα επαναπροσαρμογής εξόδου) και επικολλώντας την πλήρη διεύθυνση URL στη γραμμή διευθύνσεων του προγράμματος περιήγησης.  

Εξετάστε τα αποτελέσματα για να προσδιορίσετε αν το μοντέλο που μόλις εκπαιδευμένο εκτελεί επίσης αρκετά για να αντικαταστήσετε το υπάρχον.

Αντιγράψτε το *BaseLocation* *RelativeLocation*και *SasBlobToken* από τα αποτελέσματα εξόδου, θα μπορείτε να τις χρησιμοποιήσετε κατά τη διαδικασία επαναπροσαρμογής.

## <a name="next-steps"></a>Επόμενα βήματα

Εάν η υπηρεσία web πρόβλεψης αναπτύξει κάνοντας κλικ στην επιλογή **Ανάπτυξη υπηρεσίας Web [κλασική]**, ανατρέξτε στο θέμα [Επαναρύθμιση μια υπηρεσία web κλασική](machine-learning-retrain-a-classic-web-service.md).

Εάν η υπηρεσία web πρόβλεψης αναπτύξει κάνοντας κλικ στην επιλογή **Ανάπτυξη υπηρεσίας Web [νέο]**, ανατρέξτε στο θέμα [Επαναρύθμιση μια νέα υπηρεσία web, χρησιμοποιώντας το cmdlet διαχείρισης μηχανικής εκμάθησης](machine-learning-retrain-new-web-service-using-powershell.md).

<!-- Retrain a New web service using the Machine Learning Management REST API -->


[1]: ./media/machine-learning-retrain-models-programmatically/machine-learning-retrain-models-programmatically-IMAGE01.png
[2]: ./media/machine-learning-retrain-models-programmatically/machine-learning-retrain-models-programmatically-IMAGE02.png
[3]: ./media/machine-learning-retrain-models-programmatically/machine-learning-retrain-models-programmatically-IMAGE03.png
[4]: ./media/machine-learning-retrain-models-programmatically/machine-learning-retrain-models-programmatically-IMAGE04.png
[5]: ./media/machine-learning-retrain-models-programmatically/machine-learning-retrain-models-programmatically-IMAGE05.png
[6]: ./media/machine-learning-retrain-models-programmatically/machine-learning-retrain-models-programmatically-IMAGE06.png
[7]: ./media/machine-learning-retrain-models-programmatically/machine-learning-retrain-models-programmatically-IMAGE07.png


<!-- Module References -->
[train-model]: https://msdn.microsoft.com/library/azure/5cc7053e-aa30-450d-96c0-dae4be720977/