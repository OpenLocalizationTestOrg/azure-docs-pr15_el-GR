<properties
 pageTitle="Οδηγός για προγραμματιστές - άμεσες μεθόδους | Microsoft Azure"
 description="Οδηγός Azure προγραμματιστής διανομέα IoT - χρήση άμεσες μεθόδους για να καλέσετε κώδικα στις συσκευές σας"
 services="iot-hub"
 documentationCenter=".net"
 authors="nberdy"
 manager="timlt"
 editor=""/>

<tags
 ms.service="iot-hub"
 ms.devlang="multiple"
 ms.topic="article"
 ms.tgt_pltfrm="na"
 ms.workload="na"
 ms.date="09/30/2016" 
 ms.author="nberdy"/>

# <a name="invoke-a-direct-method-on-a-device-preview"></a>Κλήση μιας μεθόδου απευθείας σε μια συσκευή (έκδοση preview)

## <a name="overview"></a>Επισκόπηση

Ενότητα IoT παρέχει δυνατότητα για να καλέσετε μεθόδους σε συσκευές από το cloud. Μέθοδοι αντιπροσωπεύει μια αίτηση απάντησης επικοινωνία με μια συσκευή που είναι παρόμοια με μια κλήση HTTP σε που να επιτύχει ή αποτύχει αμέσως (μετά από ένα χρονικό όριο που καθορίζεται από το χρήστη) για να επιτρέψετε στο χρήστη να γνωρίζει την κατάσταση της κλήσης. Αυτό είναι χρήσιμο για σενάρια όπου η άμεση ενέργεια είναι διαφορετικά, ανάλογα με το εάν η συσκευή ήταν μπορείτε να απαντήσετε, όπως η αποστολή ενός SMS ενεργοποίησης προς τα επάνω σε μια συσκευή, εάν μια συσκευή είναι χωρίς σύνδεση (που κοστίζει περισσότερο από μια κλήση μεθόδου SMS).

Μπορείτε να θεωρήσετε μια μέθοδο ως μια κλήση απομακρυσμένης διαδικασίας απευθείας στη συσκευή. Μπορεί να ονομάζεται μόνο τις μεθόδους που έχουν εφαρμοστεί σε μια συσκευή από το cloud. Εάν το cloud προσπαθήσει να ενεργοποιήσει μια μέθοδο σε μια συσκευή που δεν έχει οριστεί αυτή τη μέθοδο, η κλήση μέθοδος αποτυγχάνει.

Κάθε μέθοδο συσκευή ως προορισμό μία μόνο συσκευή. [Εργασίες] [ lnk-devguide-jobs] παρέχει κάποιο τρόπο για να καλέσετε μεθόδους σε πολλές συσκευές και ουρά κλήσης της μεθόδου για συσκευές αποσύνδεσης.

Οποιοσδήποτε χρήστης με δικαιώματα **σύνδεση υπηρεσίας** στην ενότητα IoT μπορεί να ενεργοποιήσει μια μέθοδο σε μια συσκευή.

### <a name="when-to-use"></a>Πότε να χρησιμοποιήσετε

Μέθοδοι συσκευή είναι παρόμοια με [τα μηνύματα cloud-σε-συσκευή] [ lnk-devguide-messages] σε που και τα δύο ενεργοποιήσετε το cloud παρασκηνίου για τη μεταβίβαση πληροφοριών σε μια συσκευή, αλλά διαφέρουν βασικοί τρόποι με τους. Εννοιολογικά, μεθόδους είναι σύγχρονη και δεν διαρκή, ενώ τα μηνύματα cloud-σε-συσκευή είναι ασύγχρονης με έως 48 ωρών από διάρκεια ζωής.

Μέθοδοι ακολουθήστε ένα μοτίβο αίτησης-απάντησης και δεν είναι διαρκή. Η έλλειψη διάρκεια ζωής παρέχει δύο άμεση πλεονεκτήματα όταν εντυπωσιακή συσκευές:

- **Άμεση ενημέρωση σχετικά με τη μέθοδο εκτέλεσης** σημαίνει ότι δεν χρειάζεται να διαχειριστείτε το συσχέτισης μεταξύ αίτησης και απόκρισης.
- **Υψηλότερη μεταγωγή** σημαίνει ότι οι λειτουργίες μπορεί να εκτελεστεί πιο γρήγορα επειδή IoT διανομέα δεν παρέχει οποιαδήποτε διάρκεια ζωής. Διανομέα IoT επιτρέπει περισσότερων μέθοδο κλήσεων ανά μονάδα από το cloud-σε-συσκευή μηνύματα.

Μηνύματα cloud-σε-συσκευή δεν είναι απαραίτητα εντολές στη συσκευή, αλλά προτιμάτε να αντιπροσωπεύει μια υπηρεσία cloud που περνά μέσα ορισμένες bit των πληροφοριών στη συσκευή για να σηκώστε στο το ψυχαγωγίας και στις οποίες η συσκευή μπορεί να ή μπορεί να μην ανταποκρίνεται. Τα μηνύματα cloud-σε-συσκευή έχουν περισσότερο χρονικού ορίου χρόνο (έως 48 ώρες) ενώ μεθόδους λήξει πολύ πιο γρήγορα.

Χρησιμοποιήστε τη συσκευή μεθόδους για την ενεργοποίηση εντολή immediate σε μια συσκευή και εργασίες για προγραμματισμένη κλήση μιας εντολής σε μια συσκευή.

## <a name="method-lifecycle"></a>Μέθοδος κύκλου ζωής

Μέθοδοι σχετικά με την εφαρμογή στη συσκευή και μπορεί να απαιτεί κανέναν ή περισσότερους εισόδων στο φορτίο μέθοδο για να ξεκινήσει ο σωστά. Καλείτε μια μέθοδο απευθείας μέσω μιας υπηρεσίας τοποθεσία URI (`{iot hub}/twins/{device id}/methods/`). Μια συσκευή λαμβάνει άμεσες μεθόδους μέσα σε ένα θέμα MQTT ειδικά για τη συσκευή (`$iothub/methods/POST/{method name}/`). Ενδέχεται να υποστηρίζουμε μεθόδους σε επιπλέον πρωτοκόλλων δικτύου συσκευή πλευρά στο μέλλον.

> [AZURE.NOTE] Όταν καλείτε μια μέθοδο απευθείας σε μια συσκευή, τα ονόματα των ιδιοτήτων και τις τιμές μπορεί να περιέχει μόνο US-ASCII εκτυπώσιμη αλφαριθμητικό, εκτός από οποιαδήποτε στο εξής σύνολο: ``{'$', '(', ')', '<', '>', '@', ',', ';', ':', '\', '"', '/', '[', ']', '?', '=', '{', '}', SP, HT}``.

Μέθοδοι είναι σύγχρονη και είτε επιτύχει ή αποτύχει μετά το χρονικό όριο (προεπιλογή: 30 δευτερόλεπτα, μπορεί να οριστεί προς τα επάνω σε 3.600 δευτερόλεπτα). Μέθοδοι είναι χρήσιμη σε αλληλεπιδραστικών σενάρια όπου θέλετε να λειτουργούν μόνο εάν η συσκευή είναι online και λήψη εντολές, όπως η ενεργοποίηση φως από ένα τηλέφωνο μια συσκευή. Σε αυτά τα σενάρια, που θέλετε να δείτε μια άμεση επιτυχίας ή αποτυχίας, ώστε να την υπηρεσία cloud μπορεί να λειτουργήσει στο αποτέλεσμα όσο το δυνατόν πιο σύντομα. Η συσκευή ενδέχεται να επιστρέψει ορισμένες σώμα του μηνύματος ως αποτέλεσμα της μεθόδου, αλλά δεν είναι απαραίτητη για τη μέθοδο για να το κάνετε. Υπάρχει εγγυημένη στην ταξινόμηση ή οποιαδήποτε σημασιολογία ταυτόχρονης εκτέλεσης μέθοδο κλήσεων.

Κλήσεις μέθοδο συσκευή είναι HTTP μόνο από την πλευρά του cloud και MQTT μόνο από την πλευρά συσκευή.

## <a name="reference-topics"></a>Αναφορά θέματα:

Τα παρακάτω θέματα αναφοράς παρέχει περισσότερες πληροφορίες σχετικά με τη χρήση άμεσες μεθόδους.

## <a name="invoke-a-direct-method-from-a-back-end-app"></a>Κλήση μιας μεθόδου απευθείας από μια εφαρμογή παρασκηνίου

### <a name="method-invocation"></a>Κλήσης της μεθόδου

Άμεση μέθοδος κλήσεων σε μια συσκευή είναι κλήσεις HTTP, οι οποίες περιλαμβάνουν τα εξής:

- Το *URI* ειδικά για τη συσκευή (`{iot hub}/twins/{device id}/methods/`)
- Η ΔΗΜΟΣΊΕΥΣΗ *μέθοδο*
- Αίτηση για *κεφαλίδες* που περιέχουν άδειας, Αναγνωριστικό, τύπος περιεχομένου και κωδικοποίηση περιεχομένου
- Μια διαφανή JSON *σώμα* με την εξής μορφή:

```
{
    "methodName": "reboot",
    "timeoutInSeconds": 200,
    "payload": {
        "input1": "someInput",
        "input2": "anotherInput"
    }
}
```

  Λήξη χρονικού ορίου είναι σε δευτερόλεπτα. Εάν δεν έχει οριστεί χρονικό όριο, από προεπιλογή επιλέγεται 30 δευτερόλεπτα.
  
### <a name="response"></a>Απόκριση

Το παρασκηνίου λαμβάνει μια απάντηση που περιλαμβάνει:

- *Κωδικός κατάστασης HTTP*, ο οποίος χρησιμοποιείται για σφάλματα που προέρχονται από την ενότητα IoT, όπως ένα σφάλμα 404 για τη δεδομένη στιγμή δεν συνδεδεμένες συσκευές
- Αίτηση για *κεφαλίδες* που περιέχουν το etag, Αναγνωριστικό, τύπος περιεχομένου και κωδικοποίηση περιεχομένου
- Μια JSON *σώμα* με την εξής μορφή:

```
{
    "status" : 201,
    "payload" : {...}
}
```
  
   Και τα δύο `status` και `body` είναι που παρέχεται από τη συσκευή και να χρησιμοποιηθούν για να απαντήσετε με το Κωδικός κατάστασης της συσκευής ή/και περιγραφή.

## <a name="handle-a-direct-method-on-a-devcie"></a>Λαβή μεθόδου απευθείας σε μια devcie

### <a name="method-invocation"></a>Κλήσης της μεθόδου

Συσκευές λαμβάνει αιτήσεις άμεση μέθοδος σχετικά με το θέμα MQTT:`$iothub/methods/POST/{method name}/?$rid={request id}`

Ο οργανισμός που λαμβάνει η συσκευή είναι με την εξής μορφή:

```
{
    "input1": "someInput",
    "input2": "anotherInput"
}
```

Οι αιτήσεις μέθοδος είναι ποιότητας υπηρεσίας 0.

### <a name="response"></a>Απόκριση

Η συσκευή αποστέλλει απαντήσεις για συσκέψεις `$iothub/methods/res/{status}/?$rid={request id}`, όπου:

 - Το `status` ιδιότητα είναι η κατάσταση εκτέλεσης μέθοδο που παρέχεται από τη συσκευή.
 - Το `$rid` ιδιότητα είναι το Αναγνωριστικό αίτησης από το λάβατε από διανομέα IoT κλήσης της μεθόδου.

Ο οργανισμός έχει οριστεί από τη συσκευή και μπορεί να είναι οποιαδήποτε κατάσταση.

## <a name="additional-reference-material"></a>Υλικό επιπλέον αναφοράς

Άλλα θέματα αναφοράς στον οδηγό για προγραμματιστές περιλαμβάνουν τα εξής:

- [Τα τελικά σημεία διανομέα IoT] [ lnk-endpoints] περιγράφει τα διάφορα τελικά σημεία που κάθε ενότητα IoT εκθέτει για διαχείριση χρόνου εκτέλεσης και λειτουργίες.
- [Περιορισμού και του ορίου] [ lnk-quotas] περιγράφει τα όρια που ισχύουν για την υπηρεσία IoT διανομέας και τη συμπεριφορά επιτάχυνσης να περιμένει όταν χρησιμοποιείτε την υπηρεσία.
- [SDK συσκευής και της υπηρεσίας διανομέα IoT] [ lnk-sdks] παραθέτει τα διάφορα γλώσσας SDK που μη χρήση κατά την ανάπτυξη και συσκευή και υπηρεσία εφαρμογές που αλληλεπιδρούν με IoT διανομέα.
- [Το ερώτημα γλώσσα για twins, μεθόδους και εργασίες] [ lnk-query] περιγράφει τη γλώσσα ερωτήματος που μπορείτε να χρησιμοποιήσετε για να ανακτήσετε πληροφορίες από διανομέα IoT σχετικά με τη συσκευή twins, μεθόδους και εργασίες.
- [Υποστήριξη IoT διανομέα MQTT] [ lnk-devguide-mqtt] παρέχει περισσότερες πληροφορίες σχετικά με την υποστήριξη IoT διανομέα για το πρωτόκολλο MQTT.

## <a name="next-steps"></a>Επόμενα βήματα

Τώρα έχετε μάθει πώς μπορείτε να χρησιμοποιήσετε απευθείας μεθόδους, μπορεί να σας ενδιαφέρουν το παρακάτω θέμα Οδηγός για προγραμματιστές:

- [Προγραμματισμός εργασιών σε πολλές συσκευές][lnk-devguide-jobs]

Εάν θέλετε να δοκιμάσετε μερικά από τα θέματα που περιγράφονται σε αυτό το άρθρο, μπορεί να σας ενδιαφέρουν στην παρακάτω ενότητα IoT εκμάθηση:

- [Χρησιμοποιήστε μεθόδους cloud-σε-συσκευή][lnk-methods-tutorial]

<!-- links and images -->

[lnk-endpoints]: iot-hub-devguide-endpoints.md
[lnk-quotas]: iot-hub-devguide-quotas-throttling.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-query]: iot-hub-devguide-query-language.md
[lnk-devguide-mqtt]: iot-hub-mqtt-support.md

[lnk-devguide-jobs]: iot-hub-devguide-jobs.md
[lnk-methods-tutorial]: iot-hub-c2d-methods.md
[lnk-devguide-messages]: iot-hub-devguide-messaging.md
