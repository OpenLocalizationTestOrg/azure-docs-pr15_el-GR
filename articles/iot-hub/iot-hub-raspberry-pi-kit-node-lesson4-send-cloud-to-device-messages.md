<properties
 pageTitle="Εκτελέστε το δείγμα εφαρμογής για να λάβετε μηνύματα cloud-σε-συσκευή | Microsoft Azure"
 description="Το δείγμα εφαρμογής στο Μάθημα 4 εκτελείται σε το π και παρακολουθεί την εισερχόμενων μηνυμάτων από το Κέντρο IoT σας. Μια νέα εργασία gulp στέλνει μηνύματα σε π σας από το Κέντρο IoT σας να αναβοσβήνει η Ένδειξη."
 services="iot-hub"
 documentationCenter=""
 authors="shizn"
 manager="timlt"
 tags=""
 keywords=""/>

<tags
 ms.service="iot-hub"
 ms.devlang="multiple"
 ms.topic="article"
 ms.tgt_pltfrm="na"
 ms.workload="na"
 ms.date="10/21/2016"
 ms.author="xshi"/>

# <a name="41-run-the-sample-application-to-receive-cloud-to-device-messages"></a>4.1 εκτελέσετε το δείγμα εφαρμογής για να λάβετε μηνύματα cloud-σε-συσκευή

Σε αυτήν την ενότητα, μπορείτε να αναπτύξετε ένα δείγμα εφαρμογής στην σας Raspberry π 3. Το δείγμα εφαρμογής παρακολουθεί εισερχόμενων μηνυμάτων από το Κέντρο IoT σας. Μπορείτε επίσης να εκτελέσετε μια εργασία gulp στον υπολογιστή σας για την αποστολή μηνυμάτων για να σας π από το Κέντρο IoT σας. Κατά τη λήψη των μηνυμάτων, το δείγμα εφαρμογής αναβοσβήνει η Ένδειξη. Εάν πληροίτε τυχόν προβλήματα, αναζήτηση λύσεις με την [Αντιμετώπιση προβλημάτων σελίδας](iot-hub-raspberry-pi-kit-node-troubleshooting.md).

## <a name="411-what-you-will-do"></a>4.1.1 τι θα το κάνετε

- Συνδέστε το δείγμα εφαρμογής για το Κέντρο IoT σας.
- Ανάπτυξη και να εκτελέσετε το δείγμα εφαρμογής.
- Αποστολή μηνυμάτων από το Κέντρο IoT σας για να σας π να αναβοσβήνει η Ένδειξη.

## <a name="412-what-you-will-learn"></a>4.1.2 τι θα μάθετε

- Μάθετε πώς μπορείτε να παρακολουθείτε εισερχόμενων μηνυμάτων από το Κέντρο IoT σας.
- Πώς μπορείτε να στείλετε μηνύματα cloud-σε-συσκευή από το Κέντρο IoT σας σε το π. 

## <a name="413-what-do-you-need"></a>4.1.3 τι χρειάζεστε

- 3 π Raspberry που έχει ρυθμιστεί για χρήση. Για να μάθετε πώς μπορείτε να ρυθμίσετε το π, ανατρέξτε στο θέμα [Μάθημα 1: γρήγορα αποτελέσματα με τη συσκευή Raspberry π 3](iot-hub-raspberry-pi-kit-node-get-started.md)
- Ένα διανομέα IoT που δημιουργείται με τη συνδρομή σας στο Azure. Για να μάθετε πώς μπορείτε να δημιουργήσετε το Κέντρο IoT Azure σας, ανατρέξτε στο θέμα [Μάθημα 2: δημιουργία του διανομέα IoT Azure](iot-hub-raspberry-pi-kit-node-get-started.md)

## <a name="414-connect-the-sample-application-to-your-iot-hub"></a>4.1.4 σύνδεση το δείγμα εφαρμογής για το Κέντρο IoT σας

1. Βεβαιωθείτε ότι είστε στο φάκελο repo `iot-hub-node-raspberrypi-getting-started`. Ανοίξτε το δείγμα εφαρμογής στον κώδικα Visual Studio, εκτελώντας τις παρακάτω εντολές:

    ```bash
    cd Lesson4
    code .
    ```

    Ειδοποίηση του `app.js` το αρχείο του `app` υποφάκελο. Το `app.js` το αρχείο είναι το αρχείο προέλευσης κλειδιού που περιέχει τον κωδικό για την παρακολούθηση των εισερχόμενων μηνυμάτων από το Κέντρο IoT. Το `blinkLED` συνάρτηση αναβοσβήνει η Ένδειξη.

    ![Δομή repo](media/iot-hub-raspberry-pi-lessons/lesson4/repo_structure.png)

2. Προετοιμασία του αρχείου ρύθμισης παραμέτρων με τις παρακάτω εντολές:

    ```bash
    npm install
    gulp init
    ```

    Εάν έχετε ολοκληρώσει Μάθημα 3 σε αυτόν τον υπολογιστή, όλες τις ρυθμίσεις παραμέτρων μεταβιβάζονται, ώστε να μπορείτε να μεταβείτε στο βήμα 4.1.5. Εάν έχετε ολοκληρώσει Μάθημα 3 σε διαφορετικό υπολογιστή, πρέπει να αντικαταστήσετε τους χαρακτήρες κράτησης θέσης στο το `config-raspberrypi.json` αρχείου. Το `config-raspberrypi.json` αρχείο βρίσκεται στον υποφάκελο του κεντρικό σας φάκελο.

    ![Ρύθμιση παραμέτρων](media/iot-hub-raspberry-pi-lessons/lesson4/config_raspberrypi.png)

- Αντικατάσταση **[συσκευή όνομα κεντρικού υπολογιστή ή τη διεύθυνση IP]** με τη διεύθυνση IP ή όνομα κεντρικού υπολογιστή που λαμβάνετε, εκτελέστε την εντολή του π`devdisco list --eth`
- Αντικατάσταση **[συμβολοσειρά σύνδεσης συσκευή IoT]** με τη συμβολοσειρά σύνδεσης συσκευή που λαμβάνετε, εκτελέστε την εντολή `az iot hub show-connection-string --name {my hub name} --resource-group {resource group name}`.
- Αντικατάσταση **[συμβολοσειρά σύνδεσης διανομέα IoT]** με τη συμβολοσειρά σύνδεσης για την ενότητα IoT που λαμβάνετε, εκτελέστε την εντολή `az iot device show-connection-string --hub {my hub name} --device-id {device id} --resource-group {resource group name}`.

## <a name="415-deploy-and-run-the-sample-application"></a>4.1.5 αναπτύξετε και να εκτελέσετε το δείγμα εφαρμογής

Ανάπτυξη και να εκτελέσετε το δείγμα εφαρμογής σε του π, εκτελώντας τις παρακάτω εντολές:
  
```
gulp
```

Η εντολή gulp εκτελεί την εργασία εγκατάσταση εργαλεία πρώτα. Στη συνέχεια, αναπτύσσει το δείγμα εφαρμογής για το π. Τέλος, εκτελείται η εφαρμογή σας π και μια ξεχωριστή εργασία στον κεντρικό υπολογιστή για την αποστολή μηνυμάτων 20 εναλλαγής φωτεινότητας για το π από το Κέντρο IoT σας.

Όταν εκτελείται το δείγμα εφαρμογής, ξεκινά ακρόαση μηνύματα από το Κέντρο IoT σας. Στο μεταξύ, η εργασία gulp αποστέλλει πολλά μηνύματα "εναλλαγής φωτεινότητας" από την ενότητα IoT το π. Για κάθε του ληφθέντος μηνύματος εναλλαγής φωτεινότητας, το δείγμα εφαρμογής καλεί τη συνάρτηση blinkLED να αναβοσβήνει η Ένδειξη.

Θα πρέπει να δείτε την Ένδειξη αναβοσβήνει κάθε δύο δευτερόλεπτα, όπως η εργασία gulp είναι στέλνει μηνύματα 20 από την ενότητα IoT σε το π. Τελευταία αυτό είναι ένα μήνυμα "Διακοπή" που σας ενημερώνει για την εφαρμογή για να διακόψετε την εκτέλεση.

![Gulp](media/iot-hub-raspberry-pi-lessons/lesson4/gulp_blink.png)

## <a name="416-summary"></a>4.1.6 σύνοψη

Με επιτυχία έχετε στείλει μηνύματα από το Κέντρο IoT σας για να σας π να αναβοσβήνει η Ένδειξη. Επόμενη ενότητα είναι προαιρετική ενότητα που δείχνει πώς μπορείτε να αλλάξετε την ενεργοποίηση και απενεργοποίηση συμπεριφορά την Ένδειξη.

## <a name="next-steps"></a>Επόμενα βήματα

[Προαιρετική ενότητα: Αλλάξτε την ενεργοποίηση και απενεργοποίηση συμπεριφορά την Ένδειξη](iot-hub-raspberry-pi-kit-node-lesson4-change-led-behavior.md)