<properties
 pageTitle="HA IoT διανομέας και DR | Microsoft Azure"
 description="Περιγράφει τις δυνατότητες που σας βοηθούν να δημιουργήσουν ιδιαίτερα διαθέσιμες λύσεις IoT με καταστροφής δυνατότητες για ανάκτηση."
 services="iot-hub"
 documentationCenter=""
 authors="fsautomata"
 manager="timlt"
 editor=""/>

<tags
 ms.service="iot-hub"
 ms.devlang="na"
 ms.topic="article"
 ms.tgt_pltfrm="na"
 ms.workload="na"
 ms.date="02/03/2016"
 ms.author="elioda"/>

# <a name="iot-hub-high-availability-and-disaster-recovery"></a>Ανάκτηση διανομέα IoT υψηλή διαθεσιμότητα και την καταστροφή

Ως υπηρεσία Azure, διανομέα IoT παρέχει υψηλής διαθεσιμότητας (HA) χρησιμοποιώντας επαναλήψεις στο επίπεδο Azure περιοχή, χωρίς πρόσθετη εργασία απαιτείται από τη λύση. Επιπλέον, Azure προσφέρει πολλές δυνατότητες που σας βοηθούν να δημιουργήσουν λύσεις με δυνατότητες ανάκτησης (DR) από καταστροφή ή περιοχή σταυρό διαθεσιμότητα εάν απαιτείται. Πρέπει να σχεδιάσετε και να προετοιμασία σας λύσεις για να επωφεληθείτε από αυτές τις δυνατότητες DR εάν θέλετε να παρέχετε καθολικού, σταυρό περιοχή υψηλής διαθεσιμότητας για συσκευές ή χρήστες. Το άρθρο [Azure επιχειρήσεις συνέχειας τεχνική καθοδήγηση](../resiliency/resiliency-technical-guidance.md) περιγράφει τις ενσωματωμένες δυνατότητες του Azure για αδιάκοπη και DR. [Αποκατάσταση και υψηλή διαθεσιμότητα για τις εφαρμογές του Azure][] χαρτιού παρέχει οδηγίες αρχιτεκτονική στρατηγικές για την επίτευξη HA και DR Azure εφαρμογές.

## <a name="azure-iot-hub-dr"></a>Azure DR IoT διανομέα
Εκτός από την περιοχή εντός HA, διανομέα IoT υλοποιεί μηχανισμούς ανακατεύθυνσης για την αποκατάσταση που απαιτούν χωρίς την παρέμβαση του χρήστη. DR διανομέα IoT αυτο-ξεκινά και έχει μια ώρα στόχο ανάκτησης (RTO) των ωρών 2-26 και τους ακόλουθους στόχους σημείου αποκατάστασης (RPOs).

| Λειτουργίες | RPO |
| ------------- | --- |
| Υπηρεσία διαθεσιμότητας για λειτουργίες μητρώου και επικοινωνία | Ενδεχόμενη απώλεια CName |
| Ταυτότητα δεδομένα στο μητρώο ταυτότητα συσκευής | 0-5 λεπτά απώλεια δεδομένων |
| Μηνύματα συσκευής στο cloud | Όλα τα μη αναγνωσμένα μηνύματα θα χαθούν |
| Λειτουργίες Εποπτεία μηνυμάτων | Όλα τα μη αναγνωσμένα μηνύματα θα χαθούν |
| Μηνύματα cloud-σε-συσκευή | 0-5 λεπτά απώλεια δεδομένων |
| Ουρά cloud-σε-συσκευή σχολίων | Όλα τα μη αναγνωσμένα μηνύματα θα χαθούν |

## <a name="regional-failover-with-iot-hub"></a>Τοπικές ανακατεύθυνσης με διανομέα IoT

Σε πλήρη επεξεργασία τοπολογίες ανάπτυξης στις λύσεις IoT είναι εκτός του αντικειμένου αυτού του άρθρου, αλλά για την υψηλή διαθεσιμότητα και αποκατάσταση θα σας θα μπορείτε να το μοντέλο ανάπτυξης *Τοπικές ανακατεύθυνσης* .

Σε ένα μοντέλο τοπικές ανακατεύθυνσης, λύση παρασκηνίου λειτουργεί κυρίως σε μια τοποθεσία κέντρου δεδομένων, αλλά μια επιπλέον IoT διανομέας και παρασκηνίου έχουν αναπτυχθεί σε άλλη θέση του κέντρου δεδομένων για σκοπούς ανακατεύθυνσης, σε περίπτωση που ο διανομέας IoT στο κέντρο δεδομένων πρωτεύοντος υφίσταται ένα μη διαθεσιμότητα ή με κάποιον τρόπο διακοπεί η σύνδεση δικτύου από τη συσκευή με το κέντρο δεδομένων του πρωτεύοντος. Συσκευές χρησιμοποιούν ένα τελικό σημείο υπηρεσία δευτερεύουσας κάθε φορά που η κύρια πύλη δεν είναι προσβάσιμος. Με μια δυνατότητα ανακατεύθυνσης σταυρό περιοχής, μπορούν να βελτιωθούν τη διαθεσιμότητα λύση πέρα από την υψηλή διαθεσιμότητα από μία μόνο περιοχή.

Σε υψηλό επίπεδο, για να υλοποιήσετε ένα μοντέλο τοπικές ανακατεύθυνσης με IoT διανομέα, θα πρέπει τα εξής.

* **Μια δευτερεύουσα IoT διανομέα και συσκευή δρομολόγηση λογικής**: στην περίπτωση διαταραχή υπηρεσίας στην κύρια περιοχή σας, συσκευές πρέπει να ξεκινήσετε τη σύνδεση με τη δευτερεύουσα περιοχή. Δεδομένης της κατάστασης γνωρίζουν οι περισσότερες υπηρεσίες που περιλαμβάνονται, είναι κοινά για τους διαχειριστές λύση για να ενεργοποιηθεί η διαδικασία ανακατεύθυνσης μεταξύ περιοχής. Ο καλύτερος τρόπος για να επικοινωνήσετε το νέο τελικό σημείο για συσκευές, διατηρώντας παράλληλα τον έλεγχο της διαδικασίας, είναι να ελέγχουν τακτικά *concierge* υπηρεσίας για το τρέχον ενεργό τελικό σημείο. Η υπηρεσία concierge μπορεί να είναι μια εφαρμογή web απλό που είναι αναπαραχθούν και διατηρούνται προσβάσιμος χρησιμοποιώντας τεχνικές ανακατεύθυνση DNS (για παράδειγμα, χρησιμοποιώντας τη [Διαχείριση κίνηση Azure][]).
* **Αναπαραγωγή μητρώου ταυτότητα** - προκειμένου να μπορεί να χρησιμοποιηθεί, τα δευτερεύοντα IoT διανομέα πρέπει να περιέχει όλες τις ταυτότητες συσκευή με δυνατότητα σύνδεσης στη λύση. Η λύση θα πρέπει να διατηρήσετε αναπαραχθούν παν αντίγραφα ασφαλείας των ταυτοτήτων συσκευή και, αποστολή στο δευτερεύοντα διανομέα IoT πριν από την αλλαγή του ενεργού τελικό σημείο για τις συσκευές. Τη λειτουργικότητα εξαγωγή ταυτότητας συσκευή IoT διανομέα είναι πολύ χρήσιμο σε αυτό το περιβάλλον. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Οδηγός για προγραμματιστές διανομέα IoT - ταυτότητας μητρώου][].
* **Συγχώνευση λογικής** - όταν η κύρια περιοχή γίνεται διαθέσιμη ξανά, όλα τα κατάσταση και τα δεδομένα που έχουν δημιουργηθεί σε δευτερεύουσα τοποθεσία πρέπει να μετεγκατασταθούν πίσω στην κύρια περιοχή. Αυτό κυρίως σχετίζονται με ταυτότητες συσκευή και εφαρμογής μετα-δεδομένα, τα οποία πρέπει να συγχωνευτούν με την κύρια ενότητα IoT και τυχόν άλλες συγκεκριμένη εφαρμογή αποθηκεύει στην κύρια περιοχή. Για να απλοποιήσετε αυτό το βήμα, συνήθως συνιστάται να χρησιμοποιήσετε λειτουργίες idempotent. Αυτό ελαχιστοποιεί επιπτώσεις όχι μόνο από ενδεχόμενη συνεπή κατανομή των συμβάντων, αλλά επίσης από διπλότυπες τιμές ή εκτός σειράς παράδοσης συμβάντων. Επιπλέον, της λογικής εφαρμογή θα πρέπει να έχει σχεδιαστεί για να αποδεχτεί τις πιθανές ασυνέπειες ή "ελαφρώς" Έξοδος από την ημερομηνία κατάστασης. Αυτό λόγω ο επιπλέον χρόνος που απαιτείται για το σύστημα να "διορθώσετε" βασίζεται σε στόχους σημείου αποκατάστασης (RPO).

## <a name="next-steps"></a>Επόμενα βήματα

Ακολουθήστε αυτές τις συνδέσεις για να μάθετε περισσότερα σχετικά με την ενότητα IoT Azure:

- [Γρήγορα αποτελέσματα με το IoT διανομείς (εκμάθηση)][lnk-get-started]
- [Τι είναι το Κέντρο IoT Azure;][]

[Αποκατάσταση και υψηλή διαθεσιμότητα για τις εφαρμογές του Azure]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Διαχείριση Azure κίνηση]: https://azure.microsoft.com/documentation/services/traffic-manager/
[Οδηγός για προγραμματιστές διανομέα IoT - ταυτότητας μητρώου]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[Τι είναι το Κέντρο IoT Azure;]: iot-hub-what-is-iot-hub.md
