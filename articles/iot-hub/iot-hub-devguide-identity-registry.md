<properties
 pageTitle="Οδηγός για προγραμματιστές - μητρώου ταυτότητα συσκευής | Microsoft Azure"
 description="Οδηγός Azure προγραμματιστής διανομέα IoT - περιγραφή για το μητρώο ταυτότητα συσκευής και πώς μπορείτε να το χρησιμοποιήσετε για να διαχειριστείτε τις συσκευές σας"
 services="iot-hub"
 documentationCenter=".net"
 authors="dominicbetts"
 manager="timlt"
 editor=""/>

<tags
 ms.service="iot-hub"
 ms.devlang="multiple"
 ms.topic="article"
 ms.tgt_pltfrm="na"
 ms.workload="na"
 ms.date="09/30/2016" 
 ms.author="dobett"/>

# <a name="manage-device-identities-in-iot-hub"></a>Διαχείριση ταυτοτήτων συσκευή στο διανομέα IoT

## <a name="overview"></a>Επισκόπηση

Κάθε ενότητα IoT έχει ένα μητρώο ταυτότητα συσκευής που αποθηκεύει πληροφορίες σχετικά με τις συσκευές που επιτρέπονται για να συνδεθείτε με την ενότητα. Πριν από μια συσκευή μπορεί να συνδεθεί με ένα διανομέα, πρέπει να υπάρχει μια εγγραφή για τη συγκεκριμένη συσκευή στο μητρώο ταυτότητα συσκευής την ενότητα. Μια συσκευή επίσης απαιτείται έλεγχος ταυτότητας από την ενότητα που βασίζεται σε διαπιστευτήρια που είναι αποθηκευμένα στο μητρώο ταυτότητας συσκευή.

Σε υψηλό επίπεδο, το μητρώο ταυτότητας συσκευή είναι μια συλλογή με δυνατότητα ΥΠΌΛΟΙΠΑ συσκευή ταυτότητας πόρων. Όταν προσθέτετε μια καταχώρηση στο μητρώο, διανομέα IoT δημιουργεί ένα σύνολο πόρων ανά συσκευών στην υπηρεσία όπως ουρά που περιέχει εν πτήσει cloud-σε-συσκευή μηνύματα.

### <a name="when-to-use"></a>Πότε να χρησιμοποιήσετε

Χρησιμοποιήστε το μητρώο ταυτότητα συσκευής όταν πρέπει να παρέχετε τις συσκευές που σύνδεση με IoT διανομέα και πότε πρέπει να ελέγχετε την πρόσβαση ανά συσκευή για να τα τελικά σημεία άμεσα προσβάσιμη από τη συσκευή, από την ενότητα.

> [AZURE.NOTE] Το μητρώο ταυτότητα συσκευής δεν περιέχει μετα-δεδομένα συγκεκριμένη εφαρμογή.

## <a name="device-identity-registry-operations"></a>Λειτουργίες μητρώου ταυτότητα συσκευής

Το μητρώο διανομέα IoT συσκευή ταυτότητας εκθέτει τις ακόλουθες λειτουργίες:

* Δημιουργία συσκευής ταυτότητας
* Ενημέρωση συσκευής ταυτότητας
* Ανάκτηση συσκευής ταυτότητας κατά Αναγνωριστικό
* Διαγραφή ταυτότητας συσκευή
* Λίστα έως 1000 ταυτότητες
* Εξαγωγή όλων των ταυτοτήτων με το χώρο αποθήκευσης αντικειμένων blob του Azure
* Εισαγάγετε τις ταυτότητες από το χώρο αποθήκευσης αντικειμένων blob του Azure

Όλες αυτές οι λειτουργίες να χρησιμοποιήσετε βέλτιστου, όπως καθορίζονται στο [RFC7232][lnk-rfc7232].

> [AZURE.IMPORTANT] Ο μόνος τρόπος για την ανάκτηση όλων των ταυτοτήτων στο μητρώο ταυτότητας ένα διανομέα είναι να χρησιμοποιήσετε την [Εξαγωγή] [ lnk-export] λειτουργίες.

Ένα διανομέα IoT συσκευή ταυτότητας μητρώου:

- Δεν περιέχει οποιαδήποτε μετα-δεδομένα εφαρμογής.
- Είναι δυνατή η πρόσβαση όπως λεξικό, χρησιμοποιώντας το **deviceId** ως το κλειδί.
- Δεν υποστηρίζει εκφραστικές ερωτήματα.

Μια λύση IoT συνήθως έχει μια ξεχωριστή χώρου αποθήκευσης συγκεκριμένης λύσης που περιέχει συγκεκριμένη εφαρμογή μετα-δεδομένων. Για παράδειγμα, ο χώρος αποθήκευσης λύσης ειδικά σε μια λύση έξυπνη δόμησης θα καταγράψει το κανάλι στο οποίο έχει αναπτυχθεί αισθητήρα θερμοκρασίας.

> [AZURE.IMPORTANT] Χρησιμοποιείτε μόνο το μητρώο ταυτότητας συσκευή για διαχείριση συσκευών και την προμήθεια λειτουργίες. Λειτουργίες υψηλής απόδοσης κατά το χρόνο εκτέλεσης δεν πρέπει να εξαρτάται εκτέλεση λειτουργιών στο μητρώο ταυτότητας συσκευή. Για παράδειγμα, ο έλεγχος της κατάστασης σύνδεσης μιας συσκευής πριν να στείλετε μια εντολή δεν είναι μια υποστηριζόμενη μοτίβο. Βεβαιωθείτε ότι για να ελέγξετε το [περιορισμού χρεώσεις] [ lnk-quotas] για το μητρώο ταυτότητας συσκευή και το [συγχρονισμό των συσκευών] [ lnk-guidance-heartbeat] μοτίβο.

## <a name="disable-devices"></a>Απενεργοποιήστε τις συσκευές

Μπορείτε να απενεργοποιήσετε τις συσκευές, ενημερώνοντας την ιδιότητα **status** με μια ταυτότητα στο μητρώο. Συνήθως, μπορείτε να χρησιμοποιήσετε αυτήν την ιδιότητα σε δύο σενάρια:

- Κατά τη διαδικασία προετοιμασίας ενορχήστρωσης. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Προμήθεια συσκευή][lnk-guidance-provisioning].
- Εάν, για οποιονδήποτε λόγο, μπορείτε να μια συσκευή έχει παραβιαστεί ή έχει γίνει μη εξουσιοδοτημένη.

## <a name="import-and-export-device-identities"></a>Εισαγωγή και εξαγωγή συσκευή ταυτότητες

Μπορείτε να εξαγάγετε τις ταυτότητες συσκευή μαζικά από το μητρώο του διανομέα IoT μια ταυτότητα, με τη χρήση ασύγχρονων λειτουργιών σε του [τελικού σημείου υπηρεσίας παροχής πόρων διανομέα IoT][lnk-endpoints]. Εξαγωγές είναι μεγάλη διάρκεια εκτέλεσης εργασίες που χρησιμοποιούν ένα κοντέινερ blob που παρέχονται από τον πελάτη για να αποθηκεύσετε δεδομένα ταυτότητας συσκευή ανάγνωση από το μητρώο ταυτότητα.

Μπορείτε να εισαγάγετε τις ταυτότητες συσκευή μαζικά στο μητρώο του διανομέα IoT μια ταυτότητα, με τη χρήση ασύγχρονων λειτουργιών σε του [τελικού σημείου υπηρεσίας παροχής πόρων διανομέα IoT][lnk-endpoints]. Εισαγωγές είναι μεγάλη διάρκεια εκτέλεσης εργασίες που χρησιμοποιούν δεδομένα σε ένα κοντέινερ blob που παρέχονται από τον πελάτη για την εγγραφή δεδομένων ταυτότητας συσκευής στο μητρώο ταυτότητας συσκευή.

- Για λεπτομερείς πληροφορίες σχετικά με την εισαγωγή και εξαγωγή APIs, ανατρέξτε στο θέμα [υπηρεσίας παροχής πόρων διανομέα IoT ΥΠΌΛΟΙΠΑ APIs][lnk-resource-provider-apis].
- Για να μάθετε περισσότερα σχετικά με την εκτέλεση εισαγωγής και εξαγωγής εργασίες, ανατρέξτε στο θέμα [μαζική διαχείρισης ταυτοτήτων συσκευή διανομέα IoT][lnk-bulk-identity].

## <a name="device-provisioning"></a>Προμήθεια συσκευή

Τα δεδομένα της συσκευής που αποθηκεύει μια δεδομένη λύση IoT εξαρτάται από τις συγκεκριμένες απαιτήσεις της αυτήν τη λύση. Ωστόσο, τουλάχιστον, πρέπει να αποθηκεύσετε μια λύση ταυτότητες συσκευής και έλεγχος ταυτότητας κλειδιά. Azure διανομέα IoT περιλαμβάνει ένα μητρώο ταυτότητας που μπορούν να αποθηκεύουν τιμές για κάθε συσκευή, όπως αναγνωριστικά κλειδιά ελέγχου ταυτότητας και τους κωδικούς κατάστασης. Μια λύση είναι να χρησιμοποιήσετε άλλες Azure υπηρεσίες όπως το χώρο αποθήκευσης πινάκων του Azure, χώρος αποθήκευσης αντικειμένων blob του Azure ή Azure DocumentDB για την αποθήκευση δεδομένων οποιαδήποτε πρόσθετη συσκευή.

*Προμήθεια συσκευή* είναι η διαδικασία προσθήκης τα δεδομένα του αρχικού συσκευή για τους χώρους αποθήκευσης στη λύση σας. Για να ενεργοποιήσετε μια νέα συσκευή για να συνδεθείτε με το Κέντρο σας, πρέπει να προσθέσετε ένα νέο Αναγνωριστικό συσκευής και κλειδιά μητρώου ταυτότητας IoT διανομέα. Ως μέρος της διαδικασίας παροχής, ίσως χρειαστεί να προετοιμασία των δεδομένων ειδικά για τη συσκευή από άλλα καταστήματα λύση.

## <a name="device-heartbeat"></a>Συγχρονισμό των συσκευών

Το μητρώο ταυτότητας διανομέα IoT περιέχει ένα πεδίο που ονομάζεται **connectionState**. Θα πρέπει να χρησιμοποιείτε μόνο το πεδίο **connectionState** κατά την ανάπτυξη και τον εντοπισμό σφαλμάτων IoT λύσεις πρέπει να δεν ερωτήματος στο πεδίο κατά το χρόνο εκτέλεσης (για παράδειγμα, για να ελέγξετε εάν μια συσκευή είναι συνδεδεμένη προκειμένου να αποφασίσετε εάν θα στείλετε ένα μήνυμα cloud-σε-συσκευή ή μια SMS).

Εάν η λύση IoT πρέπει να γνωρίζω εάν μια συσκευή είναι συνδεδεμένη (κατά το χρόνο εκτέλεσης, ή με περισσότερη ακρίβεια από αυτήν την ιδιότητα **connectionState** παρέχει), τη λύση σας θα πρέπει να υλοποιήσετε το *συγχρονισμό των μοτίβο*.

Από το συγχρονισμό των μοτίβο, η συσκευή στέλνει μηνύματα συσκευή-cloud τουλάχιστον μία φορά κάθε σταθερό χρονικό διάστημα (για παράδειγμα, τουλάχιστον μία φορά κάθε ώρα). Αυτό σημαίνει ότι ακόμα και αν δεν έχει δεδομένα για να στείλετε μια συσκευή, εξακολουθεί να στέλνει ένα κενό συσκευή-cloud μήνυμα (συνήθως με μια ιδιότητα που προσδιορίζει ως ένα συγχρονισμό). Στην πλευρά της υπηρεσίας, η λύση διατηρεί ένα χάρτη με το τελευταίο συγχρονισμό λάβατε για κάθε συσκευή και προϋποθέτει ότι υπάρχει πρόβλημα με μια συσκευή Εάν λάβετε ένα μήνυμα συγχρονισμό των εντός του χρόνου αναμενόμενο.

Μια πιο σύνθετη υλοποίηση ενδέχεται να περιλαμβάνουν τις πληροφορίες από την [Παρακολούθηση Λειτουργίες] [ lnk-devguide-opmon] για τον προσδιορισμό συσκευές που προσπαθείτε να συνδεθείτε ή να επικοινωνήσετε αλλά αποτυγχάνει. Όταν εφαρμόζετε το μοτίβο συγχρονισμό, φροντίστε να ρίξετε [IoT διανομέα όρια και περιορισμοί][lnk-quotas].

> [AZURE.NOTE] Εάν μια λύση IoT τις ανάγκες της κατάστασης σύνδεσης συσκευή αποκλειστικά για να καθορίσετε εάν θέλετε να στείλετε μηνύματα cloud-σε-συσκευή και μηνύματα δεν έχουν μεταδώστε σε μεγάλα σύνολα των συσκευών, ένα πολύ πιο απλά μοτίβο για να λάβετε υπόψη σας είναι να χρησιμοποιήσετε μια σύντομη ώρα λήξης. Αυτό επιτυγχάνει το ίδιο αποτέλεσμα με τη διατήρηση ένα μητρώο κατάσταση σύνδεσης συσκευής χρησιμοποιώντας το συγχρονισμό των μοτίβο, κατά τη διαδικασία πολύ πιο αποτελεσματική. Είναι επίσης πιθανό, ζητώντας επιβεβαίωση μήνυμα, να λαμβάνετε ειδοποιήσεις από διανομέα IoT από τις συσκευές που έχουν τη δυνατότητα να λαμβάνετε μηνύματα και τα οποία δεν είναι σε σύνδεση ή είναι απέτυχε.

## <a name="reference-topics"></a>Αναφορά θέματα:

Τα παρακάτω θέματα αναφοράς παρέχει περισσότερες πληροφορίες σχετικά με το μητρώο ταυτότητας devcie.

## <a name="device-identity-properties"></a>Ιδιότητες των συσκευών ταυτότητας

Συσκευή ταυτότητες αναπαριστώνται ως JSON εγγράφων με τις ακόλουθες ιδιότητες.

| Ιδιότητα | Επιλογές | Περιγραφή |
| -------- | ------- | ----------- |
| deviceId | απαιτείται, μόνο για ανάγνωση ενημερώσεις | Μια συμβολοσειρά διάκριση πεζών-κεφαλαίων (έως 128 χαρακτήρες) αλφαριθμητικών χαρακτήρων ASCII 7-bit + `{'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`. |
| generationId | απαιτείται, μόνο για ανάγνωση | Μια συμβολοσειρά που δημιουργείται από το διανομέα, διάκριση πεζών-κεφαλαίων έως 128 χαρακτήρες. Χρησιμοποιείται για να διακρίνετε συσκευές με το ίδιο **deviceId**, όταν έχουν διαγραφεί και εκ νέου δημιουργία. |
| ETag | απαιτείται, μόνο για ανάγνωση | Μια συμβολοσειρά που αναπαριστά ένα αδύναμους etag για την ταυτότητα της συσκευής, σύμφωνα με [RFC7232][lnk-rfc7232].|
| έλεγχος ταυτότητας | προαιρετικό | Μια σύνθετη αντικείμενο περιέχει πληροφορίες και την ασφάλεια υλικά ελέγχου ταυτότητας. |
| auth.symkey | προαιρετικό | Μια σύνθετη αντικείμενο περιέχει ένα πρωτεύον και ένα δευτερεύον κλειδί, που είναι αποθηκευμένα σε μορφή base64. |
| κατάσταση | απαιτείται | Ένας δείκτης πρόσβασης. Μπορεί να είναι **ενεργοποιημένη** ή **απενεργοποιημένη**. Εάν **ενεργοποιημένο**, η συσκευή επιτρέπεται η σύνδεση. Εάν **απενεργοποίησης**, αυτή η συσκευή δεν έχουν πρόσβαση οποιαδήποτε τελικού σημείου άμεσα προσβάσιμη από τη συσκευή. |
| statusReason | προαιρετικό | Μια 128 συμβολοσειρά χαρακτήρων και μήκους που αποθηκεύει το λόγο για την κατάσταση ταυτότητας συσκευή. Επιτρέπονται όλους τους χαρακτήρες UTF-8. |
| statusUpdateTime | μόνο για ανάγνωση | Ένα χρονικό ένδειξη, που εμφανίζει την ημερομηνία και την ώρα της τελευταίας ενημέρωσης κατάστασης. |
| connectionState | μόνο για ανάγνωση | Ένα πεδίο που υποδεικνύει ότι η κατάσταση σύνδεσης: **σύνδεση** ή **Αποσύνδεση**. Αυτό το πεδίο αντιπροσωπεύει την προβολή διανομέα IoT την κατάσταση της συσκευής σύνδεσης. **ΣΗΜΑΝΤΙΚΟ**: αυτό το πεδίο πρέπει να χρησιμοποιούνται μόνο για σκοπούς ανάπτυξης/εντοπισμού. Η κατάσταση σύνδεσης είναι ενημερωθεί μόνο για τις συσκευές με τη χρήση MQTT ή AMQP. Επίσης, βασίζεται σε επίπεδο πρωτοκόλλου ping (ping που MQTT ή ping που AMQP) και μπορεί να έχει μια μέγιστη καθυστέρηση μόνο 5 λεπτά. Για αυτούς τους λόγους, μπορεί να υπάρχει false θετικές, όπως συσκευές που αναφέρθηκε ως συνδεδεμένο αλλά που είναι στην πραγματικότητα αποσυνδεθεί. |
| connectionStateUpdatedTime | μόνο για ανάγνωση | Μια ένδειξη χρονικό, που εμφανίζει την ημερομηνία και την τελευταία φορά που η κατάσταση σύνδεσης έχει ενημερωθεί. |
| lastActivityTime  | μόνο για ανάγνωση | Μια ένδειξη χρονικό, που εμφανίζει την ημερομηνία και την τελευταία φορά που η συσκευή συνδεδεμένοι, λάβατε ή στείλατε ένα μήνυμα. |

> [AZURE.NOTE] Κατάσταση σύνδεσης μόνο μπορεί να αντιπροσωπεύει την προβολή διανομέα IoT την κατάσταση της σύνδεσης. Ενημερώσεις για αυτήν την κατάσταση μπορεί να καθυστερήσει, ανάλογα με τις προϋποθέσεις δικτύου και ρυθμίσεις παραμέτρων.

## <a name="additional-reference-material"></a>Υλικό επιπλέον αναφοράς

Άλλα θέματα αναφοράς στον οδηγό για προγραμματιστές περιλαμβάνουν τα εξής:

- [Τα τελικά σημεία διανομέα IoT] [ lnk-endpoints] περιγράφει τα διάφορα τελικά σημεία που κάθε ενότητα IoT εκθέτει για διαχείριση χρόνου εκτέλεσης και λειτουργίες.
- [Περιορισμού και του ορίου] [ lnk-quotas] περιγράφει τα όρια που ισχύουν για την υπηρεσία IoT διανομέας και τη συμπεριφορά επιτάχυνσης να περιμένει όταν χρησιμοποιείτε την υπηρεσία.
- [SDK συσκευής και της υπηρεσίας διανομέα IoT] [ lnk-sdks] παραθέτει τα διάφορα γλώσσας SDK που μη χρήση κατά την ανάπτυξη και συσκευή και υπηρεσία εφαρμογές που αλληλεπιδρούν με IoT διανομέα.
- [Το ερώτημα γλώσσα για twins, μεθόδους και εργασίες] [ lnk-query] περιγράφει τη γλώσσα ερωτήματος που μπορείτε να χρησιμοποιήσετε για να ανακτήσετε πληροφορίες από διανομέα IoT σχετικά με τη συσκευή twins, μεθόδους και εργασίες.
- [Υποστήριξη IoT διανομέα MQTT] [ lnk-devguide-mqtt] παρέχει περισσότερες πληροφορίες σχετικά με την υποστήριξη IoT διανομέα για το πρωτόκολλο MQTT.

## <a name="next-steps"></a>Επόμενα βήματα

Τώρα έχετε μάθει πώς μπορείτε να χρησιμοποιήσετε το μητρώο ταυτότητας συσκευή IoT διανομέα, μπορεί να σας ενδιαφέρουν τα παρακάτω θέματα Οδηγός για προγραμματιστές:

- [Έλεγχος της πρόσβασης σε διανομέα IoT][lnk-devguide-security]
- [Χρησιμοποιήστε twins συσκευή για να συγχρονίσετε κατάσταση και ρυθμίσεις παραμέτρων][lnk-devguide-device-twins]
- [Κλήση μιας μεθόδου απευθείας σε μια συσκευή][lnk-devguide-directmethods]
- [Προγραμματισμός εργασιών σε πολλές συσκευές][lnk-devguide-jobs]

Εάν θέλετε να δοκιμάσετε μερικά από τα θέματα που περιγράφονται σε αυτό το άρθρο, μπορεί να σας ενδιαφέρουν στην παρακάτω ενότητα IoT εκμάθηση:

- [Γρήγορα αποτελέσματα με το Κέντρο IoT Azure][lnk-getstarted-tutorial]


<!-- Links and images -->

[lnk-endpoints]: iot-hub-devguide-endpoints.md
[lnk-quotas]: iot-hub-devguide-quotas-throttling.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-query]: iot-hub-devguide-query-language.md
[lnk-devguide-mqtt]: iot-hub-mqtt-support.md
[lnk-resource-provider-apis]: https://msdn.microsoft.com/library/mt548492.aspx
[lnk-guidance-provisioning]: iot-hub-devguide-identity-registry.md#device-provisioning
[lnk-guidance-heartbeat]: iot-hub-devguide-identity-registry.md#device-heartbeat
[lnk-rfc7232]: https://tools.ietf.org/html/rfc7232
[lnk-bulk-identity]: iot-hub-bulk-identity-mgmt.md
[lnk-export]: iot-hub-devguide-identity-registry.md#import-and-export-device-identities
[lnk-devguide-opmon]: iot-hub-operations-monitoring.md

[lnk-devguide-security]: iot-hub-devguide-security.md
[lnk-devguide-device-twins]: iot-hub-devguide-device-twins.md
[lnk-devguide-directmethods]: iot-hub-devguide-direct-methods.md
[lnk-devguide-jobs]: iot-hub-devguide-jobs.md

[lnk-getstarted-tutorial]: iot-hub-csharp-csharp-getstarted.md