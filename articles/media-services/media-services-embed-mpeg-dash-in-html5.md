<properties 
    pageTitle="Ενσωμάτωση βίντεο προσαρμόσιμη ροή MPEG-ΔΙΑΚΕΚΟΜΜΈΝΗ σε μια εφαρμογή HTML5 με DASH.js | Microsoft Azure" 
    description="Αυτό το θέμα παρουσιάζει πώς μπορείτε να ενσωματώσετε ένα βίντεο MPEG-ΔΙΑΚΕΚΟΜΜΈΝΗ προσαρμόσιμη ροής σε μια εφαρμογή HTML5 με DASH.js." 
    authors="Juliako" 
    manager="erikre" 
    editor="" 
    services="media-services" 
    documentationCenter=""/>

<tags 
    ms.service="media-services" 
    ms.workload="media" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="09/26/2016" 
    ms.author="juliako"/>


#<a name="embedding-a-mpeg-dash-adaptive-streaming-video-in-an-html5-application-with-dashjs"></a>Ενσωμάτωση βίντεο προσαρμόσιμη ροή MPEG-ΔΙΑΚΕΚΟΜΜΈΝΗ σε μια εφαρμογή HTML5 με DASH.js

##<a name="overview"></a>Επισκόπηση

MPEG-ΔΙΑΚΕΚΟΜΜΈΝΗ είναι ένα πρότυπο ISO για την προσαρμόσιμη ροή βίντεο περιεχομένου, το οποίο προσφέρει σημαντικά οφέλη για τα άτομα που θέλετε για την αναπαραγωγή βίντεο υψηλής ποιότητας, προσαρμόσιμη ροή εξόδου. Με MPEG-ΠΑΎΛΑ, τη ροή βίντεο θα απόθεση αυτόματα σε χαμηλότερη ορισμό όταν γίνεται συμφόρηση του δικτύου. Αυτό μειώνει την πιθανότητα του προγράμματος προβολής βλέπετε βίντεο "Παύση" όσο το πρόγραμμα αναπαραγωγής λαμβάνει την επόμενη μερικά δευτερόλεπτα για την αναπαραγωγή (γνωστά και ως προσωρινή αποθήκευση). Καθώς μειώνει συμφόρηση δικτύου, το πρόγραμμα αναπαραγωγής βίντεο θα επιστρέψει με τη σειρά σε υψηλότερη ποιότητα ροή. Αυτή η δυνατότητα για να προσαρμόσετε το εύρος ζώνης που απαιτείται αποτέλεσμα επίσης ταχύτερη ώρα έναρξης για το βίντεο. Αυτό σημαίνει ότι η πρώτη μερικά δευτερόλεπτα μπορεί να γίνει σε ένα τμήμα κάτω ποιότητα γρήγορα για να κάνετε λήψη και, στη συνέχεια, έχει τεθεί σε buffer βήμα έως και μια υψηλότερη ποιότητα μία φορά αρκετό περιεχόμενο.

Dash.js είναι ένα άνοιγμα αρχείου προέλευσης αναπαραγωγής βίντεο MPEG-ΔΙΑΚΕΚΟΜΜΈΝΗ γραμμένο σε JavaScript. Το στόχος είναι να παρέχουν μια ισχυρή, πλατφόρμες αναπαραγωγής που μπορεί να ελεύθερα χρησιμοποιηθεί ξανά σε εφαρμογές που απαιτούν την αναπαραγωγή του βίντεο. Παρέχει MPEG-ΔΙΑΚΕΚΟΜΜΈΝΗ αναπαραγωγή σε οποιοδήποτε πρόγραμμα περιήγησης που υποστηρίζει σήμερα το W3C πολυμέσων προέλευσης επεκτάσεις (MSE), που είναι το Chrome, Microsoft Edge και IE11 (άλλα προγράμματα περιήγησης έχετε δηλώσει τους πρόθεσης για την υποστήριξη MSE). Για περισσότερες πληροφορίες σχετικά με την DASH.js, js ανατρέξτε στο θέμα του αποθετηρίου dash.js GitHub.


##<a name="creating-a-browser-based-streaming-video-player"></a>Δημιουργία μιας βασίζονται σε πρόγραμμα περιήγησης ροής προγράμματος αναπαραγωγής βίντεο

Για να δημιουργήσετε μια απλή σελίδα web που εμφανίζει ένα πρόγραμμα αναπαραγωγής βίντεο με τα αναμενόμενα στοιχεία ελέγχου όπως μια αναπαραγωγή, παύση, επαναφορά κ.λπ., θα πρέπει να:

1. Δημιουργήστε μια σελίδα HTML
1. Μπορείτε να προσθέσετε το βίντεο ετικέτα
1. Προσθέστε το πρόγραμμα αναπαραγωγής dash.js
1. Προετοιμασία του προγράμματος αναπαραγωγής
1. Προσθήκη στυλ CSS
1. Προβάλετε τα αποτελέσματα σε ένα πρόγραμμα περιήγησης που υλοποιεί MSE

Προετοιμασία του προγράμματος αναπαραγωγής μπορεί να ολοκληρωθεί σε απλώς λίγοι γραμμές κώδικα JavaScript. Χρήση dash.js, πραγματικά είναι ότι απλή η ενσωμάτωση βίντεο MPEG-ΔΙΑΚΕΚΟΜΜΈΝΗ στις εφαρμογές σας προγράμματος περιήγησης με βάση.

##<a name="creating-the-html-page"></a>Δημιουργία σελίδας HTML

Το πρώτο βήμα είναι να δημιουργήσετε μια τυπική σελίδα HTML που περιέχει το στοιχείο **βίντεο** , αποθήκευση αυτού του αρχείου ως basicPlayer.html, όπως το παρακάτω παράδειγμα:

    <!DOCTYPE html>
    <html>
      <head><title>Adaptive Streaming in HTML5</title></head>
      <body>
        <h1>Adaptive Streaming with HTML5</h1>
        <video id="videoplayer" controls></video>
      </body>
    </html>

##<a name="adding-the-dashjs-player"></a>Προσθήκη του προγράμματος αναπαραγωγής DASH.js

Για να προσθέσετε την εφαρμογή dash.js αναφορά στην εφαρμογή, θα χρειαστεί για να καταγράψετε το αρχείο dash.all.js από την έκδοση 1.0 του dash.js έργου. Αυτό πρέπει να αποθηκεύονται στο φάκελο JavaScript της εφαρμογής σας. Αυτό το αρχείο είναι ένα αρχείο ευκολία που χρησιμοποιεί τα μαζί όλος ο κώδικας είναι απαραίτητο dash.js σε ένα αρχείο. Εάν έχετε μια ματιά γύρω από το χώρο αποθήκευσης dash.js, θα βρείτε τα μεμονωμένα αρχεία, να δοκιμάσετε κώδικα και πολλά άλλα, αλλά εάν όλα που θέλετε να κάνετε είναι χρήση dash.js, τότε το αρχείο dash.all.js είναι ό, τι χρειάζεστε.

Για να προσθέσετε το πρόγραμμα αναπαραγωγής dash.js τις εφαρμογές σας, προσθέστε μια ετικέτα δέσμης ενεργειών σε ενότητα κεφαλίδας basicPlayer.html:

    <!-- DASH-AVC/265 reference implementation -->
    < script src="js/dash.all.js"></script>


Στη συνέχεια, δημιουργήστε μια συνάρτηση για να προετοιμάσετε το πρόγραμμα αναπαραγωγής όταν φορτώνεται η σελίδα. Προσθέστε την ακόλουθη δέσμη ενεργειών μετά τη γραμμή στην οποία θα φορτώσετε dash.all.js:

    <script>
    // setup the video element and attach it to the Dash player
    function setupVideo() {
      var url = "http://wams.edgesuite.net/media/MPTExpressionData02/BigBuckBunny_1080p24_IYUV_2ch.ism/manifest(format=mpd-time-csf)";
      var context = new Dash.di.DashContext();
      var player = new MediaPlayer(context);
                      player.startup();
                      player.attachView(document.querySelector("#videoplayer"));
                      player.attachSource(url);
    }
    </script>

Αυτή η συνάρτηση δημιουργεί πρώτα μια DashContext. Χρησιμοποιείται για τη ρύθμιση παραμέτρων της εφαρμογής για ένα συγκεκριμένο χρόνο εκτέλεσης περιβάλλον. Από μια τεχνική άποψη, που ορίζει τις κατηγορίες που πρέπει να χρησιμοποιήσετε το πλαίσιο εισαγωγής εξάρτηση κατά την κατασκευή της εφαρμογής. Στις περισσότερες περιπτώσεις, θα χρησιμοποιήσετε Dash.di.DashContext.

Στη συνέχεια, δημιουργία πρωτεύοντος τάξη του πλαισίου dash.js, MediaPlayer. Αυτή η κλάση περιέχει το μέγεθος των κύριων μεθόδους όπως χρειάζεται αναπαραγωγή και παύση, διαχειρίζεται τη σχέση με το στοιχείο βίντεο και επίσης διαχειρίζεται την ερμηνεία του αρχείου πολυμέσων παρουσίασης περιγραφή (MPD) το οποίο περιγράφει το βίντεο θα αναπαράγεται.

Η συνάρτηση startup() της κλάσης MediaPlayer ονομάζεται για να βεβαιωθείτε ότι το πρόγραμμα αναπαραγωγής είναι έτοιμο για αναπαραγωγή βίντεο. Μεταξύ άλλων αυτή η συνάρτηση εξασφαλίζει ότι όλες τις απαραίτητες κλάσεις (όπως καθορίζεται από το περιβάλλον) έχουν φορτωθεί. Όταν είστε έτοιμοι το πρόγραμμα αναπαραγωγής, μπορείτε να επισυνάψετε το στοιχείο βίντεο χρησιμοποιώντας τη συνάρτηση attachView(). Αυτή η δυνατότητα επιτρέπει την MediaPlayer για να εισαγάγει τη ροή βίντεο στην το στοιχείο και να ελέγξετε επίσης αναπαραγωγή ανάλογα με τις ανάγκες.

Περάσετε τη διεύθυνση URL του αρχείου MPD το MediaPlayer ώστε να μάθει σχετικά με το βίντεο αναμένεται για την αναπαραγωγή. Η συνάρτηση setupVideo() που μόλις δημιουργήσατε θα πρέπει να εκτελεστεί όταν έχει πλήρως φορτώνεται η σελίδα. Αυτό γίνεται με χρήση του συμβάντος με φόρτωση του στοιχείου σώμα. Αλλαγή του <body> στοιχείου για:

    <body onload="setupVideo()">

Τέλος, ορίστε το μέγεθος του στοιχείου βίντεο με τη χρήση CSS. Σε περιβάλλον προσαρμόσιμη ροής, αυτό είναι ιδιαίτερα σημαντικό επειδή ενδέχεται να αλλάξουν το μέγεθος του βίντεο που αναπαράγεται κατά την αναπαραγωγή προσαρμόζεται αλλαγή συνθήκες δικτύου. Σε αυτή την απλή επίδειξη απλώς να επιβάλετε το στοιχείο βίντεο θα είναι 80% του παραθύρου του προγράμματος περιήγησης διαθέσιμες, προσθέτοντας την εξής CSS στην ενότητα κεφαλίδας της σελίδας:
    
    <style>
    video {
      width: 80%;
      height: 80%;
    }
    </style>

##<a name="playing-a-video"></a>Αναπαραγωγή του βίντεο

Για την αναπαραγωγή βίντεο, τοποθετήστε το δείκτη του προγράμματος περιήγησης το αρχείο basicPlayback.html και επιλέξτε αναπαραγωγή σε το πρόγραμμα αναπαραγωγής βίντεο που εμφανίζεται.


##<a name="media-services-learning-paths"></a>Διαδικασίες εκμάθησης Media Services

[AZURE.INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

##<a name="provide-feedback"></a>Παροχή σχολίων

[AZURE.INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

##<a name="see-also"></a>Δείτε επίσης

[Ανάπτυξη εφαρμογών προγράμματος αναπαραγωγής βίντεο](media-services-develop-video-players.md)

[Αποθετήριο dash.js GitHub](https://github.com/Dash-Industry-Forum/dash.js) 
