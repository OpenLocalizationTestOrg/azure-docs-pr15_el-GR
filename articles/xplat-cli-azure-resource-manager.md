
<properties
    pageTitle="Διαχείριση πόρων με το Azure CLI | Microsoft Azure"
    description="Χρησιμοποιήστε το περιβάλλον γραμμής εντολών Azure (CLI) για να διαχειριστείτε Azure πόρους και τις ομάδες"
    editor=""
    manager="timlt"
    documentationCenter=""
    authors="dlepow"
    services="azure-resource-manager"/>

<tags
    ms.service="azure-resource-manager"
    ms.workload="multiple"
    ms.tgt_pltfrm="vm-multiple"
    ms.devlang="na"
    ms.topic="article"
    ms.date="08/22/2016"
    ms.author="danlep"/>

# <a name="use-the-azure-cli-to-manage-azure-resources-and-resource-groups"></a>Χρήση του Azure CLI για τη Διαχείριση Azure τους πόρους και τις ομάδες πόρων


> [AZURE.SELECTOR]
- [Πύλη](azure-portal/resource-group-portal.md) 
- [Azure CLI](xplat-cli-azure-resource-manager.md)
- [Azure PowerShell](powershell-azure-resource-manager.md)
- [REST API](resource-manager-rest-api.md)


Περιβάλλον γραμμής εντολών του Azure (Azure CLI) είναι μία από διάφορα εργαλεία που μπορείτε να χρησιμοποιήσετε για να αναπτύξετε και να διαχειριστείτε πόρους με τη διαχείριση πόρων. Σε αυτό το άρθρο παρουσιάζει Συνηθισμένοι τρόποι διαχείρισης Azure τους πόρους και τις ομάδες πόρων χρησιμοποιώντας το Azure CLI στη λειτουργία διαχείρισης πόρων. Για πληροφορίες σχετικά με τη χρήση του CLI για να αναπτύξετε τους πόρους, ανατρέξτε στο θέμα [Ανάπτυξη πόρους με πρότυπα διαχείρισης πόρων και Azure CLI](resource-group-template-deploy-cli.md). Για το φόντο σχετικά με πόρους Azure και διαχείριση πόρων, επισκεφθείτε την [Επισκόπηση της διαχείρισης πόρων Azure](azure-resource-manager/resource-group-overview.md).

>[AZURE.NOTE] Για να διαχειριστείτε Azure πόρους με το CLI Azure, πρέπει να [εγκαταστήσετε το CLI Azure](xplat-cli-install.md)και να [συνδεθείτε στο Azure](xplat-cli-connect.md) χρησιμοποιώντας το `azure login` εντολή. Βεβαιωθείτε ότι το CLI είναι σε λειτουργία διαχείρισης πόρων (εκτέλεση `azure config mode arm`). Εάν έχετε τις παρακάτω ενέργειες, είστε έτοιμοι για να μεταβείτε.



## <a name="get-resource-groups-and-resources"></a>Λήψη πόρων ομάδων και πόρων

### <a name="resource-groups"></a>Ομάδες πόρων

Για να λάβετε μια λίστα με όλες τις ομάδες πόρων σε συνδρομή σας και τις θέσεις, εκτέλεση αυτής της εντολής.

    azure group list
    

### <a name="resources"></a>Πόροι
 Για μια λίστα όλων των πόρων σε μια ομάδα, όπως μία με όνομα *testRG*, χρησιμοποιήστε την ακόλουθη εντολή.

    azure resource list testRG

Για να προβάλετε ένας μεμονωμένος πόρος εντός της ομάδας, όπως μια Εικονική με το όνομα *MyUbuntuVM*, χρησιμοποιήστε μια εντολή όπως το εξής.

    azure resource show testRG MyUbuntuVM Microsoft.Compute/virtualMachines -o "2015-06-15"
    
Παρατηρήστε ότι η παράμετρος **Microsoft.Compute/virtualMachines** . Αυτή η παράμετρος υποδεικνύει τον τύπο του πόρου που ζητάτε πληροφορίες.
    
>[AZURE.NOTE]Όταν χρησιμοποιείτε τις εντολές **azure πόρων** εκτός από την εντολή **λίστας** , πρέπει να καθορίσετε την έκδοση API του πόρου με την παράμετρο **-o** . Εάν δεν είστε βέβαιοι σχετικά με την έκδοση API, συμβουλευτείτε το αρχείο προτύπου και βρείτε το πεδίο apiVersion για τον πόρο. Για περισσότερες πληροφορίες σχετικά με τις εκδόσεις API στη Διαχείριση πόρων, ανατρέξτε στο θέμα [Διαχείριση πόρων υπηρεσίες παροχής, περιοχές, εκδόσεις API, και οι διατάξεις](resource-manager-supported-services.md).

Κατά την προβολή λεπτομερειών σε έναν πόρο, συχνά είναι χρήσιμο να χρησιμοποιήσετε το `--json` παραμέτρου. Αυτή η παράμετρος σας επιτρέπει την έξοδο πιο ευανάγνωστο, επειδή ορισμένες τιμές είναι ένθετες δομές ή συλλογές. Το παρακάτω παράδειγμα παρουσιάζει επιστρέφει τα αποτελέσματα της εντολής **εμφανίζεται** ως έγγραφο JSON.

    azure resource show testRG MyUbuntuVM Microsoft.Compute/virtualMachines -o "2015-06-15" --json

>[AZURE.NOTE] Εάν θέλετε, αποθήκευση των δεδομένων JSON αρχείο χρησιμοποιώντας το &gt; χαρακτήρα για να κατευθύνετε το αποτέλεσμα σε ένα αρχείο. Για παράδειγμα:
>
> `azure resource show testRG MyUbuntuVM Microsoft.Compute/virtualMachines -o "2015-06-15" --json > myfile.json`

### <a name="tags"></a>Ετικέτες

[AZURE.INCLUDE [resource-manager-tag-resources-cli](../includes/resource-manager-tag-resources-cli.md)]

## <a name="manage-resources"></a>Διαχείριση πόρων


Για να προσθέσετε έναν πόρο, όπως ένα λογαριασμό χώρου αποθήκευσης σε μια ομάδα πόρων, εκτελέστε μια εντολή παρόμοια με:

    azure resource create testRG MyStorageAccount "Microsoft.Storage/storageAccounts" "westus" -o "2015-06-15" -p "{\"accountType\": \"Standard_LRS\"}"
    
Εκτός από τον καθορισμό της έκδοσης API του πόρου με την παράμετρο **-o** , χρησιμοποιήστε την παράμετρο **-p** για τη μεταβίβαση μια συμβολοσειρά JSON μορφοποίηση με οποιαδήποτε απαιτείται ή πρόσθετες ιδιότητες.
    
    
Για να διαγράψετε έναν υπάρχοντα πόρο, όπως ένας πόρος εικονική μηχανή, χρησιμοποιήστε μια εντολή όπως το εξής.

    azure resource delete testRG MyUbuntuVM Microsoft.Compute/virtualMachines -o "2015-06-15"

Για να μετακινήσετε υπαρχόντων πόρων σε άλλη ομάδα πόρων ή τη συνδρομή, χρησιμοποιήστε την εντολή **Μετακίνηση azure πόρων** . Το παρακάτω παράδειγμα δείχνει πώς μπορείτε να μετακινήσετε ένα Cache Redis σε μια νέα ομάδα πόρων. Στην παράμετρο **-i** , παρέχουν μια λίστα διαχωρισμένες με κόμματα με το αναγνωριστικό πόρου του για να μετακινήσετε.


    azure resource move -i "/subscriptions/{guid}/resourceGroups/OldRG/providers/Microsoft.Cache/Redis/examplecache" -d "NewRG"

## <a name="control-access-to-resources"></a>Έλεγχος της πρόσβασης σε πόρους

Μπορείτε να χρησιμοποιήσετε το CLI Azure για να δημιουργήσετε και να διαχειριστείτε πολιτικές για τον έλεγχο της πρόσβασης σε πόρους Azure. Για φόντο σχετικά με την πολιτική ορισμούς και εκχώρηση πολιτικών για τους πόρους, ανατρέξτε στο θέμα [Χρήση πολιτικής για να διαχειριστείτε τους πόρους και να ελέγχετε την πρόσβαση](resource-manager-policy.md).

Για παράδειγμα, καθορίστε την ακόλουθη πολιτική για να απορρίψετε όλες τις αιτήσεις όπου η θέση δεν είναι Δυτική ΗΠΑ ή Βόρεια κεντρική ΜΑΣ και αποθηκεύστε το για να το policy.json αρχείο ορισμού πολιτικής:

    {
    "if" : {
        "not" : {
        "field" : "location",
        "in" : ["westus" ,  "northcentralus"]
        }
    },
    "then" : {
        "effect" : "deny"
    }
    }

Στη συνέχεια, εκτελέστε την εντολή **Δημιουργία ενός ορισμού πολιτικής** :

    azure policy definition create MyPolicy -p c:\temp\policy.json
    
Αυτή η εντολή εμφανίζει το αποτέλεσμα της παρόμοιο με το ακόλουθο.

    + Δημιουργία πολιτικής ορισμού δεδομένων MyPolicy: Όνομα_πολιτικής: MyPolicy δεδομένων: PolicyDefinitionId: /subscriptions/###-###-###-###-###/providers/Microsoft.Authorization/policyDefinitions/MyPolicy

    δεδομένα: τύπος πολιτικής: προσαρμοσμένα δεδομένα: εμφανιζόμενο όνομα: Απροσδιόριστη δεδομένων: Περιγραφή: Απροσδιόριστη δεδομένων: PolicyRule: πεδίο = θέση, σε = [westus, northcentralus], εφέ = απόρριψη

 Για να αντιστοιχίσετε μια πολιτική στο εύρος που θέλετε, χρησιμοποιήστε το **PolicyDefinitionId** που επιστρέφονται από την προηγούμενη εντολή. Στο παρακάτω παράδειγμα, αυτό το εύρος είναι η συνδρομή, αλλά μπορείτε να εύρος σε πόρων ομάδες ή μεμονωμένους πόρους:

    αντιστοίχιση πολιτικής Azure δημιουργία MyPolicyAssignment -p /subscriptions/###-###-###-###-###/providers/Microsoft.Authorization/policyDefinitions/MyPolicy -s /subscriptions/###-###-###-###-### /

Μπορείτε να λάβετε, αλλαγή ή κατάργηση ορισμοί πολιτικής, χρησιμοποιώντας τις εντολές **Εμφάνιση ορισμού πολιτικής**, **Ορισμός πολιτικής definition**και **Διαγραφή ορισμού πολιτικής** .

Ομοίως, μπορείτε να γρήγορα, να αλλάξετε ή να καταργήσετε αναθέσεις πολιτικής, χρησιμοποιώντας τις εντολές **Εμφάνιση αντιστοίχιση πολιτικής**, **ρύθμιση πολιτικής ανάθεσης**και **ανάθεσης πολιτικής διαγραφή** .


## <a name="export-a-resource-group-as-a-template"></a>Εξαγωγή μιας ομάδας πόρων ως προτύπου

Για μια υπάρχουσα ομάδα πόρων, μπορείτε να προβάλετε το πρότυπο διαχείρισης πόρων για την ομάδα πόρων. Εξαγωγή του προτύπου προσφέρει δύο πλεονεκτήματα:

1. Μπορείτε εύκολα να αυτοματοποιήσετε μελλοντικές αναπτύξεις της λύσης επειδή όλα τα υποδομή ορίζεται στο πρότυπο.

2. Μπορείτε να εξοικειωθείτε με σύνταξης προτύπου, εξετάζοντας το JSON που αντιπροσωπεύει τη λύση σας.

Χρησιμοποιώντας το Azure CLI, μπορείτε να είτε εξαγάγετε ένα πρότυπο που αντιπροσωπεύει την τρέχουσα κατάσταση της ομάδας σας πόρων ή να κάνετε λήψη του προτύπου που χρησιμοποιήθηκε για μια συγκεκριμένη ανάπτυξη.

* **Εξαγάγετε το πρότυπο για μια ομάδα πόρων** - αυτό είναι χρήσιμο όταν γίνονται αλλαγές σε μια ομάδα πόρων και πρέπει να ανακτήσετε την αναπαράσταση JSON τρέχουσα κατάστασή. Ωστόσο, το πρότυπο που δημιουργήθηκε περιέχει μόνο έναν ελάχιστο αριθμό των παραμέτρων και δεν υπάρχουν μεταβλητές. Οι περισσότερες από τις τιμές στο πρότυπο είναι σχεδιασμένο. Πριν από την ανάπτυξη του προτύπου που δημιουργήθηκε, ίσως θελήσετε να μετατρέψετε περισσότερες από τις τιμές σε παραμέτρους, ώστε να μπορείτε να προσαρμόσετε την ανάπτυξη για διαφορετικά περιβάλλοντα.

    Για να εξαγάγετε το πρότυπο για μια ομάδα πόρων σε έναν τοπικό κατάλογο, εκτελέστε το `azure group export` εντολή όπως φαίνεται στο παρακάτω παράδειγμα. (Αντικαταστήστε έναν τοπικό κατάλογο κατάλληλο για το περιβάλλον του λειτουργικού συστήματος.)

        azure group export testRG ~/azure/templates/

* **Λήψη του προτύπου για μια συγκεκριμένη ανάπτυξη** --αυτό είναι χρήσιμο όταν θέλετε να προβάλετε την πραγματική πρότυπο που χρησιμοποιήθηκε για την ανάπτυξη των πόρων. Το πρότυπο περιλαμβάνει όλες τις παραμέτρους και μεταβλητές που καθορίζονται για το αρχικό ανάπτυξη. Ωστόσο, εάν κάποιον στην εταιρεία σας να κάνει αλλαγές στην ομάδα πόρων εκτός τον ορισμό στο πρότυπο, αυτό το πρότυπο δεν αντιπροσωπεύει την τρέχουσα κατάσταση της ομάδας πόρων.

    Για να κάνετε λήψη του προτύπου που χρησιμοποιείται για μια συγκεκριμένη ανάπτυξη σε έναν τοπικό κατάλογο, εκτελέστε το `azure group deployment template download` εντολή. Για παράδειγμα:

        azure group deployment template download TestRG testRGDeploy ~/azure/templates/downloads/
 
>[AZURE.NOTE] Εξαγωγή προτύπου είναι σε προεπισκόπηση και δεν όλους τους τύπους πόρων υποστηρίζεται επί του παρόντος εξαγωγή ενός προτύπου. Όταν επιχειρείτε να εξαγάγετε ένα πρότυπο, μπορείτε να δείτε ένα μήνυμα σφάλματος που αναφέρει δεν είχαν εξαχθεί ορισμένους πόρους. Εάν είναι απαραίτητο, να καθορίσετε με μη αυτόματο τρόπο αυτούς τους πόρους στο πρότυπό σας μετά τη λήψη της.



## <a name="next-steps"></a>Επόμενα βήματα

* Για να μάθετε λεπτομέρειες λειτουργιών για ανάπτυξη και αντιμετώπιση σφαλμάτων ανάπτυξη με το Azure CLI, ανατρέξτε στο θέμα [Προβολή ανάπτυξης λειτουργιών με Azure CLI](resource-manager-troubleshoot-deployments-cli.md).
* Εάν θέλετε να χρησιμοποιήσετε το CLI για να ρυθμίσετε μια εφαρμογή ή μια δέσμη ενεργειών για να αποκτήσετε πρόσβαση σε πόρους, ανατρέξτε στο θέμα [Χρήση CLI Azure για να δημιουργήσετε μια υπηρεσία κεφαλαίου για να αποκτήσετε πρόσβαση σε πόρους](resource-group-authenticate-service-principal-cli.md).


