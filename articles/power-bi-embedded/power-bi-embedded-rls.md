<properties
   pageTitle="Ασφάλεια σε επίπεδο γραμμής με ενσωματωμένο Power BI"
   description="Λεπτομέρειες σχετικά με την ασφάλεια σε επίπεδο γραμμής με ενσωματωμένο Power BI"
   services="power-bi-embedded"
   documentationCenter=""
   authors="guyinacube"
   manager="erikre"
   editor=""
   tags=""/>
<tags
   ms.service="power-bi-embedded"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="powerbi"
   ms.date="10/04/2016"
   ms.author="asaxton"/>

# <a name="row-level-security-with-power-bi-embedded"></a>Ασφάλεια σε επίπεδο γραμμής με ενσωματωμένο Power BI

Ασφάλεια σε επίπεδο γραμμής (RLS) μπορεί να χρησιμοποιηθεί για να περιορίσετε την πρόσβαση των χρηστών σε συγκεκριμένο δεδομένα μέσα σε μια αναφορά ή ένα σύνολο δεδομένων, επιτρέποντάς για πολλούς διαφορετικούς χρήστες για να χρησιμοποιήσετε την ίδια αναφορά ενώ όλα τα δεδομένα διαφορετική εμφάνιση. Power BI ενσωματωμένου υποστηρίζει πλέον συνόλων δεδομένων που έχουν ρυθμιστεί με RLS.

![](media\power-bi-embedded-rls\pbi-embedded-rls-flow-1.png)

Για να επωφεληθείτε από RLS, είναι σημαντικό να κατανοήσετε τις έννοιες τρεις κύριο; Οι χρήστες, ρόλους και κανόνες. Ας ρίξουμε μια ματιά σε κάθε:

**Οι χρήστες** – αυτές είναι οι τελικοί χρήστες πραγματική προβολή αναφορών. Στο Power BI ενσωματωμένο, οι χρήστες αναγνωρίζονται από την ιδιότητα όνομα χρήστη σε μια εφαρμογή διακριτικό.

**Ρόλοι** – ανήκουν οι χρήστες σε ρόλους. Ένα ρόλο είναι ένα κοντέινερ για κανόνες και μπορείτε να δώσετε όνομα κάτι όπως "Διαχείριση πωλήσεων" ή "Πωλητής". Στο Power BI ενσωματωμένο, οι χρήστες αναγνωρίζονται από της ιδιότητας ρόλους σε ένα διακριτικό εφαρμογής.

**Κανόνες** – ρόλοι έχουν κανόνες και αυτούς τους κανόνες είναι η πραγματική φίλτρα που πρόκειται να εφαρμοστεί στα δεδομένα. Αυτό θα μπορούσε να είναι τόσο απλή όσο η "χώρα = ΗΠΑ" ή κάτι πολύ πιο δυναμική.

### <a name="example"></a>Παράδειγμα

Στη συνέχεια αυτού του άρθρου, θα παρέχουμε ένα παράδειγμα της σύνταξης RLS και, στη συνέχεια, κατανάλωση που μέσα σε μια ενσωματωμένη εφαρμογή. Παράδειγμά μας χρησιμοποιεί το αρχείο PBIX [Δείγμα δεδομένων λιανικών ανάλυσης](http://go.microsoft.com/fwlink/?LinkID=780547) .

![](media\power-bi-embedded-rls\pbi-embedded-rls-scenario-2.png)

Δείγμα μας ανάλυσης λιανικής πώλησης εμφανίζει τις πωλήσεις για όλους τους χώρους αποθήκευσης σε μια συγκεκριμένη λιανικής πώλησης αλυσίδα. Χωρίς RLS, ανεξάρτητα από το ποια περιφέρεια manager πραγματοποιεί είσοδο και προβολών της έκθεσης, βλέπετε τα ίδια δεδομένα. Διαχείριση εκδρομή όρισε κάθε διαχειριστή περιφέρεια πρέπει να βλέπετε μόνο τις πωλήσεις για τους χώρους αποθήκευσης που διαχειρίζονται και να το κάνετε αυτό, μπορούμε να χρησιμοποιήσουμε RLS.

RLS έχει συνταχθεί στο Power BI Desktop. Όταν ανοίξει η αναφορά και σύνολο δεδομένων, θα σας να μεταβείτε σε προβολή διαγράμματος για να δείτε το σχήμα:

![](media\power-bi-embedded-rls\pbi-embedded-rls-diagram-view-3.png)

Εδώ θα βρείτε μερικά πράγματα που πρέπει να παρατηρήσετε με αυτό το σχήμα:

-   Όλα τα μέτρα, όπως το **Σύνολο των πωλήσεων**, αποθηκεύονται στον πίνακα fact **πωλήσεων** .
-   Υπάρχουν τέσσερις πρόσθετες σχετικές διάσταση πίνακες: **στοιχείου**, **ώρα**, **αποθήκευσης**και **περιφέρεια**.
-   Τα βέλη στις γραμμές σχέσης υποδεικνύουν ποιον τρόπο φίλτρα μπορεί να ρέει από έναν πίνακα σε κάποιον άλλο. Για παράδειγμα, εάν ένα φίλτρο τοποθετείται στην **ώρα [ημερομηνία]**, στο τρέχον σχήμα αυτό θα μόνο φιλτράρετε προς τα κάτω τιμές στον πίνακα **πωλήσεων** . Δεν υπάρχει άλλους πίνακες θα επηρεάζονται από αυτό το φίλτρο δεδομένου ότι όλα τα βέλη στις γραμμές σχέσης σημείο στον πίνακα πωλήσεων και δεν δεν βρίσκομαι στον υπολογιστή.
-   Ο πίνακας **περιφέρεια** υποδεικνύει ποιος είναι ο διαχειριστής για κάθε περιφέρεια:

    ![](media\power-bi-embedded-rls\pbi-embedded-rls-district-table-4.png)

Με βάση αυτό το σχήμα, εάν θα σας εφαρμογή φίλτρου στη στήλη **Περιφέρεια Manager** στον πίνακα περιφέρεια και εάν που φιλτράρετε συμφωνίες στο χρήστη την προβολή της αναφοράς, το φίλτρο θα φιλτράρετε επίσης προς τα κάτω τους πίνακες **χώρου αποθήκευσης** και τις **Πωλήσεις** για εμφάνιση μόνο των δεδομένων για το συγκεκριμένο συγκεκριμένη περιφέρεια manager.

Δείτε πώς:

1.  Στην καρτέλα μοντελοποίηση, κάντε κλικ στην επιλογή **Διαχείριση ρόλων**.  
![](media\power-bi-embedded-rls\pbi-embedded-rls-modeling-tab-5.png)

2.  Δημιουργήστε ένα νέο ρόλο που ονομάζεται **Manager**.  
![](media\power-bi-embedded-rls\pbi-embedded-rls-manager-role-6.png)

3.  Στον πίνακα **περιφέρεια** , εισαγάγετε την ακόλουθη παράσταση DAX: **[περιφέρεια Manager] = USERNAME()**  
![](media\power-bi-embedded-rls\pbi-embedded-rls-manager-role-7.png)

4.  Για να βεβαιωθείτε ότι λειτουργούν οι κανόνες, στην καρτέλα **μοντελοποίησης** , κάντε κλικ στην επιλογή **Προβολή ως τους ρόλους**και, στη συνέχεια, πληκτρολογήστε τα εξής:  
![](media\power-bi-embedded-rls\pbi-embedded-rls-view-as-roles-8.png)

    Οι αναφορές τώρα θα εμφανίζουν δεδομένα όπως αν έχουν πραγματοποιήσει είσοδο ως **Ανδρέας κυλιόμενος μέσος όρος**.

Εφαρμογή του φίλτρου, τον τρόπο κάναμε εδώ, θα φιλτράρετε προς τα κάτω όλες τις εγγραφές στους πίνακες **περιφέρεια**, **αποθήκευσης**και **πωλήσεων** . Ωστόσο, λόγω της κατεύθυνσης φίλτρο στις σχέσεις μεταξύ των **πωλήσεων** και την **ώρα**, πίνακες και **στοιχείου**, και **πωλήσεων** και **στοιχείο** **χρόνου** δεν θα φιλτράρεται προς τα κάτω.

![](media\power-bi-embedded-rls\pbi-embedded-rls-diagram-view-9.png)

Που μπορεί να είναι ok για αυτήν την απαίτηση, ωστόσο, εάν δεν θέλουμε διαχειριστών για να δείτε στοιχεία για τα οποία δεν έχει όλες τις πωλήσεις, θα μπορούσε να ενεργοποιήσετε διπλής κατεύθυνσης διασταυρούμενο φιλτράρισμα για τη σχέση και ροής στο φίλτρο ασφαλείας και στις δύο κατευθύνσεις. Αυτό μπορεί να γίνει με την επεξεργασία τη σχέση μεταξύ των **πωλήσεων** και **στοιχείο**, ως εξής:

![](media\power-bi-embedded-rls\pbi-embedded-rls-edit-relationship-10.png)

Τώρα, τα φίλτρα να επίσης ροής από τον πίνακα των πωλήσεων στον πίνακα **στοιχείων** :

![](media\power-bi-embedded-rls\pbi-embedded-rls-diagram-view-11.png)

**Σημείωση** Εάν χρησιμοποιείτε τη λειτουργία DirectQuery για τα δεδομένα σας, θα πρέπει να ενεργοποιήσετε διπλής κατεύθυνσης διασταυρούμενο φιλτράρισμα από αυτές τις δύο επιλογές:

1.  **Αρχείο** -> **ρυθμίσεις και επιλογές** -> **Δυνατότητες Preview** -> **Ενεργοποίηση διασταύρωσης φιλτράρισμα και στις δύο κατευθύνσεις για DirectQuery**.
2.  **Αρχείο** -> **ρυθμίσεις και επιλογές** -> **DirectQuery** -> **επιτρέπει απεριόριστη μέτρησης στη λειτουργία DirectQuery**.


Για να μάθετε περισσότερα σχετικά με την διπλής κατεύθυνσης διασταυρούμενο φιλτράρισμα, κάντε λήψη του λευκή βίβλος [διπλής κατεύθυνσης διασταυρούμενο φιλτράρισμα στο SQL Server Analysis Services 2016 και το Power BI Desktop](http://download.microsoft.com/download/2/7/8/2782DF95-3E0D-40CD-BFC8-749A2882E109/Bidirectional cross-filtering in Analysis Services 2016 and Power BI.docx) .

Αυτό ολοκληρώνει την όλες τις εργασίες που πρέπει να γίνουν στο Power BI Desktop, αλλά υπάρχει ένα περισσότερες δουλειά που πρέπει να γίνει για να κάνετε το RLS κανόνες ορίσαμε εργασίας στο Power BI ενσωματωμένο. Οι χρήστες έχουν ελεγχθεί η ταυτότητά εξουσιοδοτημένοι από την εφαρμογή σας και εφαρμογή διακριτικά που χρησιμοποιούνται για την εκχώρηση που πρόσβασης χρήστη σε μια συγκεκριμένη αναφορά Power BI ενσωματωμένο. Power BI ενσωματωμένου δεν διαθέτει οποιαδήποτε συγκεκριμένων πληροφοριών σε άτομα που είναι χρήστη σας. Για RLS ώστε να λειτουργεί, θα πρέπει να μεταβιβάζουν ορισμένες επιπλέον περιβάλλοντος ως μέρος του διακριτικού εφαρμογή:
-   **όνομα χρήστη** (προαιρετικό) – χρησιμοποιείται με RLS αυτή είναι μια συμβολοσειρά που μπορεί να χρησιμοποιηθεί για να προσδιορίσετε το χρήστη κατά την εφαρμογή κανόνων RLS. Ανατρέξτε στο θέμα χρήση γραμμής ενσωματωμένη ασφάλεια σε επίπεδο με το Power BI
-   **Ρόλοι** – μια συμβολοσειρά που περιέχει τους ρόλους για να επιλέξετε κατά την εφαρμογή κανόνων ασφάλειας σε επίπεδο γραμμής. Εάν που περνά μέσα σε περισσότερα από ένα ρόλο, πρέπει να δώσετε ως πίνακας συμβολοσειρά.

Εάν υπάρχει η ιδιότητα username, πρέπει να μεταβιβάσετε επίσης τουλάχιστον μία τιμή σε ρόλους.

Το διακριτικό πλήρη εφαρμογή θα μοιάζει κάπως έτσι:

![](media\power-bi-embedded-rls\pbi-embedded-rls-app-token-string-12.png)

Τώρα, με όλα τα στοιχεία μαζί, όταν κάποιος συνδέεται στην εφαρμογή για να δείτε αυτήν την έκθεση, αυτά θα μόνο έχετε τη δυνατότητα να δείτε τα δεδομένα που θα επιτρέπεται για να δείτε, όπως καθορίζεται από την ασφάλεια σε επίπεδο γραμμής.

![](media\power-bi-embedded-rls\pbi-embedded-rls-dashboard-13.png)

## <a name="see-also"></a>Δείτε επίσης
[Ασφάλεια σε επίπεδο γραμμής (RLS) με το Power](https://powerbi.microsoft.com/en-us/documentation/powerbi-admin-rls/)
