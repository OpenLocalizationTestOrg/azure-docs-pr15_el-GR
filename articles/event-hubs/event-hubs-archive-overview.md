<properties
    pageTitle="Αρχειοθέτηση διανομείς Azure συμβάν | Microsoft Azure"
    description="Επισκόπηση της δυνατότητας αρχειοθέτησης διανομείς Azure συμβάν."
    services="event-hubs"
    documentationCenter=""
    authors="djrosanova"
    manager="timlt"
    editor=""/>

<tags
    ms.service="event-hubs"
    ms.workload="na"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="09/13/2016"
    ms.author="darosa;sethm"/>

# <a name="azure-event-hubs-archive"></a>Αρχειοθέτηση διανομείς Azure συμβάντος

Αρχειοθέτηση διανομείς Azure συμβάν σάς επιτρέπει να παρέχουν αυτόματα η ροή δεδομένων σε σας διανομείς συμβάν σε ένα λογαριασμό του χώρου αποθήκευσης αντικειμένων Blob της επιλογής σας με μεγαλύτερη ευελιξία για να καθορίσετε μια ώρα ή του μεγέθους διάστημα της επιλογής σας. Ρύθμιση αρχειοθέτησης είναι γρήγορη, υπάρχουν χωρίς διοικητικού κόστους για να το εκτελέσετε και κλιμακώνει αυτόματα με το συμβάν διανομείς [μετάδοσης μονάδες](event-hubs-overview.md#capacity-and-security). Αρχειοθέτηση διανομείς συμβάν είναι ο ευκολότερος τρόπος για τη φόρτωση ροής δεδομένων στο Azure και σας επιτρέπει να εστιάσετε σε επεξεργασίας δεδομένων αντί για συλλογή πληροφοριών.

Αρχειοθέτηση διανομείς Azure συμβάν σάς επιτρέπει να επεξεργαστεί σε πραγματικό χρόνο και βασίζονται σε δέσμη αγωγούς στη ίδια ροή. Αυτό σας επιτρέπει να δημιουργείτε λύσεις που μπορούν να αναπτυχθούν με τις ανάγκες σας μέσα στο χρόνο. Εάν δημιουργείτε δέσμη συστήματα σήμερα, με παρακολουθείτε προς μελλοντική σε πραγματικό χρόνο επεξεργασίας ή που θέλετε να προσθέσετε μια αποτελεσματική ψυχρές διαδρομή σε μια υπάρχουσα λύση σε πραγματικό χρόνο, αρχειοθέτηση διανομείς συμβάν κάνει την εργασία με ροή δεδομένων.

## <a name="how-event-hubs-archive-works"></a>Πώς λειτουργεί η αρχειοθέτηση διανομείς συμβάντος

Διανομείς συμβάν είναι ένα buffer διαρκή χρόνο διατήρησης για τηλεμετρίας εισόδου, παρόμοια με ένα αρχείο καταγραφής κατανέμεται. Το κλειδί για να κλιμακωθεί στο συμβάν διανομείς είναι το [μοντέλο διαμερίσματα καταναλωτών](event-hubs-overview.md#partition-key). Κάθε διαμερίσματα είναι μια ανεξάρτητη τμήμα των δεδομένων και καταναλώνεται ανεξάρτητα. Διάρκεια του χρόνου αυτών των δεδομένων παλαιώνει απενεργοποίηση, με βάση την περίοδο με δυνατότητα ρύθμισης παραμέτρων διατήρησης. Ως αποτέλεσμα, διανομέα δεδομένο συμβάν ποτέ γεμίσει "πολύ."

Αρχειοθέτηση διανομείς συμβάν σάς επιτρέπει να καθορίσετε το δικό σας λογαριασμό χώρο αποθήκευσης Blob του Azure και κοντέινερ που θα χρησιμοποιηθεί για την αποθήκευση των αρχειοθετημένων δεδομένων. Αυτός ο λογαριασμός μπορεί να είναι στην ίδια περιοχή ως κέντρο σας συμβάν ή σε μια άλλη περιοχή, η προσθήκη για να την ευελιξία της δυνατότητας αρχειοθέτησης διανομείς συμβάν.

Αρχειοθετημένα δεδομένα είναι γραμμένο σε μορφή [Apache Avro][] . μια συμπαγή, γρήγορη δυαδική μορφή που παρέχει δομές δεδομένων Εμπλουτισμένο ενσωματωμένο σχήμα. Αυτή η μορφή χρησιμοποιείται ευρέως στο στο περιβάλλον εμπορικής προσαρμογής Hadoop, καθώς και με ροή ανάλυση και Azure εργοστασίου δεδομένων. Περισσότερες πληροφορίες σχετικά με την εργασία με Avro είναι διαθέσιμη παρακάτω σε αυτό το άρθρο.

### <a name="archive-windowing"></a>Άνοιγμα παραθύρου αρχειοθέτησης

Αρχειοθέτηση διανομείς συμβάν σάς επιτρέπει να ρυθμίσετε ένα παράθυρο για να ελέγξετε αρχειοθέτηση. Αυτό το παράθυρο είναι ένα ελάχιστο μέγεθος και τη ρύθμιση παραμέτρων χρόνου με "πρώτη wins πολιτική," σημαίνει ότι το πρώτο έναυσμα αντιμετώπισε θα προκαλέσει μια λειτουργία αρχειοθέτησης. Εάν έχετε ένα παράθυρο δεκαπέντε λεπτά/100 MB αρχειοθέτησης και αποστολή 1 MB/s, το παράθυρο "μέγεθος" θα ενεργοποιήσει πριν του χρονικού διαστήματος. Κάθε partition αρχειοθετεί ανεξάρτητα και καταγράφει ένα ολοκληρωμένο μπλοκ blob τη στιγμή της αρχειοθέτησης, με το όνομα για την περίοδο λειτουργίας όταν παρουσιάστηκε το χρονικό διάστημα αρχειοθέτησης. Τους κανόνες ονοματοθεσίας είναι ως εξής:

```
<Namespace>/<EventHub>/<Partition>/<YYYY>/<MM>/<DD>/<HH>/<mm>/<ss>
```

### <a name="scaling-to-throughput-units"></a>Κλιμάκωση για μονάδες μετάδοσης

Κίνηση διανομείς συμβάν ελέγχεται από [μονάδες μετάδοσης](event-hubs-overview.md#capacity-and-security). Μια μονάδα μία μετάδοσης επιτρέπει 1 MB/s ή 1000 συμβάντα ανά δευτερόλεπτο της εισόδου και δύο φορές το ποσό της εξόδου. Τυπική συμβάν διανομείς μπορούν να ρυθμιστούν με 1-20 μετάδοσης μονάδες και περισσότερα μπορεί να αγοραστεί μέσω ενός ορίου αύξηση [αίτηση υποστήριξης][]. Χρήση εκτός από την αγορά μετάδοσης μονάδες είναι επιβραδύνει. Αρχειοθέτηση διανομείς συμβάν αντιγράφει δεδομένα απευθείας από την εσωτερική αποθήκευση συμβάντος διανομείς, παράκαμψη μετάδοσης μονάδα εξόδου ορίων και αποθήκευση σας εξόδου για άλλα προγράμματα ανάγνωσης επεξεργασίας όπως Analytics ροής ή τους.

Μόλις ρυθμιστεί, συμβάν διανομείς αρχειοθέτησης εκτελείται αυτόματα μόλις στέλνετε το πρώτο συμβάν. Εξακολουθεί εκτελείται πάντα. Για να κάνετε πιο για σας ροής επεξεργασίας να γνωρίζετε ότι λειτουργεί η διαδικασία, διανομείς συμβάν συντάσσει κενών αρχείων όταν υπάρχει χωρίς δεδομένα. Αυτό παρέχει μια προβλέψιμα cadence και δείκτη που μπορεί να τροφοδοσία σας επεξεργαστές δέσμης.

## <a name="setting-up-event-hubs-archive"></a>Ρύθμιση συμβάντος διανομείς αρχειοθέτησης

Αρχειοθέτηση διανομείς συμβάν μπορεί να ρυθμιστεί κατά τη δημιουργία συμβάντος διανομέα μέσω της πύλης ή της διαχείρισης πόρων Azure. Μπορείτε απλώς να ενεργοποιήσετε αρχειοθέτησης κάνοντας κλικ στο κουμπί **στην** . Μπορείτε να ρυθμίσετε ένα λογαριασμό χώρου αποθήκευσης και κοντέινερ, κάνοντας κλικ στην ενότητα **κοντέινερ** του το blade. Επειδή το συμβάν διανομείς αρχειοθέτησης χρησιμοποιεί έλεγχο ταυτότητας υπηρεσίας εξυπηρέτησης με το χώρο αποθήκευσης, δεν χρειάζεται να καθορίσετε μια συμβολοσειρά σύνδεσης του χώρου αποθήκευσης. Η επιλογή πόρων επιλέγει αυτόματα το URI πόρου για το λογαριασμό χώρου αποθήκευσης. Εάν χρησιμοποιείτε το Azure διαχείριση πόρων, θα πρέπει να δώσετε αυτό URI ρητά ως συμβολοσειρά.

Το παράθυρο χρόνου προεπιλογή είναι πέντε λεπτά. Η ελάχιστη τιμή είναι 1, το μέγιστο 15. Το παράθυρο " **μέγεθος** " διαθέτει μια περιοχή 10-500 MB.

![][1]

## <a name="adding-archive-to-an-existing-event-hub"></a>Προσθήκη αρχειοθέτησης σε ένα υπάρχον συμβάν διανομέα

Μπορεί να ρυθμιστεί αρχειοθηκών στην υπάρχουσα διανομείς συμβάντων που βρίσκονται σε ένα χώρο ονομάτων συμβάν διανομείς. Η δυνατότητα δεν είναι διαθέσιμη στην παλαιότερη μηνυμάτων ή μεικτή τύπος πεδία ονομάτων. Για να ενεργοποιήσετε την αρχειοθέτηση σε ένα υπάρχον συμβάν διανομέα ή να αλλάξετε τις ρυθμίσεις αρχειοθέτησης, κάντε κλικ στην επιλογή το χώρο ονομάτων για να φορτώσετε το blade **βασικά στοιχεία** και, στη συνέχεια, κάντε κλικ στην ενότητα συμβάντων για την οποία θέλετε να ενεργοποιήσετε ή να αλλάξετε τη ρύθμιση αρχειοθέτησης. Τέλος, κάντε κλικ στην ενότητα **Ιδιότητες** από την ανοιχτή blade όπως φαίνεται στην παρακάτω εικόνα.

![][2]

Μπορείτε επίσης να ρυθμίσετε το συμβάν διανομείς αρχειοθέτησης μέσω πρότυπα διαχείρισης πόρων Azure. Για περισσότερες πληροφορίες, ανατρέξτε [σε αυτό το άρθρο](event-hubs-resource-manager-namespace-event-hub-enable-archive.md).

## <a name="exploring-the-archive-and-working-with-avro"></a>Εξερεύνηση της αρχειοθέτησης και την εργασία με Avro

Μόλις ρυθμιστεί, αρχειοθέτηση διανομείς συμβάν δημιουργεί αρχεία στο χώρο αποθήκευσης Azure λογαριασμού και κοντέινερ που παρέχονται στο παράθυρο του καθορισμένου χρόνου. Μπορείτε να προβάλετε αυτά τα αρχεία σε οποιοδήποτε εργαλείο όπως [Azure Εξερεύνηση χώρου αποθήκευσης][]. Μπορείτε να κάνετε λήψη των αρχείων τοπικά, για να εργαστείτε με αυτά.

Τα αρχεία που παράγονται από αρχειοθήκη διανομείς συμβάν έχουν το σχήμα Avro παρακάτω:

![][3]

Είναι ένας εύκολος τρόπος για να εξερευνήσετε Avro αρχεία χρησιμοποιώντας τα [Εργαλεία Avro][] βάζο από Apache. Μετά τη λήψη βάζο αυτό, μπορείτε να δείτε το σχήμα ενός συγκεκριμένου αρχείου Avro, εκτελώντας την ακόλουθη εντολή:

```
java -jar avro-tools-1.8.1.jar getschema \<name of archive file\>
```

Αυτή η εντολή επιστρέφει

```
{

    "type":"record",
    "name":"EventData",
    "namespace":"Microsoft.ServiceBus.Messaging",
    "fields":[
                 {"name":"SequenceNumber","type":"long"},
                 {"name":"Offset","type":"string"},
                 {"name":"EnqueuedTimeUtc","type":"string"},
                 {"name":"SystemProperties","type":{"type":"map","values":["long","double","string","bytes"]}},
                 {"name":"Properties","type":{"type":"map","values":["long","double","string","bytes"]}},
                 {"name":"Body","type":["null","bytes"]}
             ]
}
```

Μπορείτε επίσης να χρησιμοποιήσετε εργαλεία Avro να μετατρέψετε το αρχείο σε μορφή JSON και να εκτελέσετε άλλες επεξεργασίας.

Για να εκτελέσετε πιο σύνθετη επεξεργασία, κάντε λήψη και εγκατάσταση Avro για την επιλογή σας της πλατφόρμας. Προς το παρόν, δεν υπάρχουν υλοποιήσεις διαθέσιμες για C, C++, C\#, Java, NodeJS, Perl, PHP, Python και φωνητικής γραφής.

Apache Avro έχει ολοκληρωθεί οδηγοί γρήγορα αποτελέσματα για [Java][] και [Python][]. Μπορείτε επίσης να διαβάσετε στο άρθρο [Γρήγορα αποτελέσματα με το συμβάν διανομείς αρχειοθέτησης](event-hubs-archive-python.md) .

## <a name="how-event-hubs-archive-is-charged"></a>Πώς θα χρεωθεί αρχειοθέτησης διανομείς συμβάντος

Αρχειοθέτηση διανομείς συμβάν είναι με βάση τη χρήση ομοίως στο πλαίσιο μονάδες μετάδοσης, ως την ωριαία χρέωση. Η χρέωση είναι ανάλογο απευθείας με τον αριθμό των μονάδων μετάδοσης αγοράσει για το χώρο ονομάτων. Καθώς μονάδες μετάδοσης είναι μεγαλύτερη και να σμικρύνετε, αρχειοθέτηση διανομείς συμβάν αυξάνεται και μειώνεται για την παροχή που ταιριάζει επιδόσεων. Τα μέτρα συμβεί σε συνδυασμό. Η χρέωση για αρχειοθέτηση διανομείς συμβάν είναι 0.10 $ ανά ώρα ανά μονάδα μετάδοσης, παρέχεται με έκπτωση 50% κατά την περίοδο preview.

Αρχειοθέτηση διανομείς συμβάν είναι πραγματικά ο ευκολότερος τρόπος για να λάβετε δεδομένα στο Azure. Χρήση λίμνης δεδομένων Azure, εργοστασίου δεδομένων Azure και Azure HDInsight, μπορείτε να πραγματοποιήσετε μαζική επεξεργασία και άλλες ανάλυση της επιλογής σας χρησιμοποιώντας οικεία εργαλεία και πλατφόρμες από οποιαδήποτε κλίμακα που χρειάζεστε.

## <a name="next-steps"></a>Επόμενα βήματα

Μπορείτε να μάθετε περισσότερα σχετικά με το συμβάν διανομείς, επισκεφθείτε τις παρακάτω συνδέσεις:

- Μια ολοκληρωμένη [δείγμα εφαρμογής που χρησιμοποιεί το συμβάν διανομείς][].
- Το δείγμα [κλίμακα ανάληψη συμβάν επεξεργασίας με διανομείς συμβάν][] .
- [Επισκόπηση διανομείς συμβάντων][]

[Apache Avro]: http://avro.apache.org/
[αίτηση υποστήριξης]: https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade
[1]: ./media/event-hubs-archive-overview/event-hubs-archive1.png
[2]: media/event-hubs-archive-overview/event-hubs-archive2.png
[Εξερεύνηση Azure χώρου αποθήκευσης]: http://azurestorageexplorer.codeplex.com/
[3]: ./media/event-hubs-archive-overview/event-hubs-archive3.png
[Εργαλεία Avro]: http://www-us.apache.org/dist/avro/avro-1.8.1/java/avro-tools-1.8.1.jar
[Java]: http://avro.apache.org/docs/current/gettingstartedjava.html
[Python]: http://avro.apache.org/docs/current/gettingstartedpython.html
[Επισκόπηση διανομείς συμβάντων]: event-hubs-overview.md
[δείγμα εφαρμογής που χρησιμοποιεί το συμβάν διανομείς]: https://code.msdn.microsoft.com/Service-Bus-Event-Hub-286fd097
[Διαβάθμιση της εκδήλωσης επεξεργασίας με διανομείς συμβάντος]: https://code.msdn.microsoft.com/Service-Bus-Event-Hub-45f43fc3