<properties
    pageTitle="Έλξη δημόσιων δεδομένων σε διανομείς συμβάν Azure | Microsoft Azure"
    description="Επισκόπηση των οι διανομείς συμβάν εισαγωγή από το δείγμα web"
    services="event-hubs"
    documentationCenter="na"
    authors="spyrossak"
    manager="timlt"
    editor=""/>

<tags 
    ms.service="event-hubs"
    ms.devlang="na"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="na"
    ms.date="08/25/2016"
    ms.author="spyros;sethm" />

# <a name="pulling-public-data-into-azure-event-hubs"></a>Έλξη δημόσιων δεδομένων σε διανομείς συμβάν Azure

Σε τυπικές Internet πράγματα (IoT) σενάρια, έχετε τις συσκευές που μπορείτε να προγραμματίσετε σε δεδομένα push για Azure, είτε με ένα διανομέα συμβάν Azure ή μια ενότητα IoT. Και οι δύο αυτές τις διανομείς είναι σημεία εισόδου στο Azure για την αποθήκευση, την ανάλυση και οπτικοποίηση με άπειρα εργαλεία που καθίστανται διαθέσιμες στο Microsoft Azure. Ωστόσο, και οι δύο απαιτούν push δεδομένα σε αυτά, μορφοποιημένο ως JSON και ασφαλές με συγκεκριμένους τρόπους. Αυτόν τον τρόπο εμφανίζεται το ακόλουθο ερώτημα. Τι να κάνω εάν θέλετε να εισαγάγετε δεδομένα από προελεύσεις δημόσιο ή ιδιωτικό όπου τα δεδομένα εκτίθεται ως υπηρεσία web ή τροφοδοσία κάποια λειτουργία, αλλά δεν έχετε τη δυνατότητα να αλλάξετε τον τρόπο δημοσίευσης τα δεδομένα; Εξετάστε το ενδεχόμενο του καιρού ή κίνηση ή τιμές μετοχών - δεν είναι δυνατό να ενημερώνετε το NOAA, ή WSDOT ή NASDAQ για να ρυθμίσετε μια push για το κέντρο του συμβάντος σας. Για να επιλύσετε αυτό το πρόβλημα, χρησιμοποιούμε έχετε γράψει και άνοιγμα-φορολόγησης που προέρχονται από ένα δείγμα μικρές cloud που μπορείτε να τροποποιήσετε και να υλοποιήσετε που θα έλξη δεδομένων από ορισμένες όπως προέλευσης και push του με το συμβάν διανομέα. Από εδώ, μπορείτε να κάνετε ό, τι θέλετε, θέμα, φυσικά, με τους όρους άδειας χρήσης από το πρόγραμμα παραγωγής των. Μπορείτε να βρείτε την εφαρμογή [εδώ](https://azure.microsoft.com/documentation/samples/event-hubs-dotnet-importfromweb/).

Σημειώστε ότι ο κώδικας σε αυτό το δείγμα μόνο παρουσιάζει πώς μπορείτε να εξαγάγετε δεδομένα από το web τυπικές τροφοδοσίες και πώς να συντάξετε με ένα διανομέα συμβάν Azure. ΔΕΝ πρόκειται να είναι μια εφαρμογή παραγωγής, και έχουν γίνει χωρίς προσπάθειες ώστε να είναι κατάλληλες για χρήση σε ένα περιβάλλον όπως - είναι strictfly μια DIY, εστίαση προγραμματιστής παράδειγμα μόνο. Επιπλέον, η ύπαρξη αυτού του δείγματος δεν είναι ισοδυναμεί με σύσταση ότι πρέπει να **αντλήσει** δεδομένα στο Azure αντί να **push** αυτό. Που θα πρέπει να αναθεώρηση ασφαλείας, επιδόσεων, Λειτουργίες και κόστους παράγοντες πριν από την εκκαθάριση του σε μια αρχιτεκτονική για ολοκληρωμένες.

## <a name="application-structure"></a>Δομή εφαρμογής

Η εφαρμογή είναι γραμμένο σε C# και την [Περιγραφή δείγμα](https://azure.microsoft.com/documentation/samples/event-hubs-dotnet-importfromweb/) περιέχει όλες τις πληροφορίες που χρειάζεστε για να τροποποιήσετε, να δημιουργήσετε και να δημοσιεύσετε την εφαρμογή. Οι παρακάτω ενότητες παρέχουν μια επισκόπηση υψηλού επιπέδου του τι κάνει η εφαρμογή.

Θα σας Ξεκινήστε με την προϋπόθεση ότι έχετε πρόσβαση σε μια τροφοδοσία δεδομένων. Για παράδειγμα, μπορεί να θέλετε να έλκει των δεδομένων κίνησης από τη Washington κατάσταση τμήμα των μεταφορών ή τα δεδομένα καιρού από NOAA, είτε για να εμφανίσετε προσαρμοσμένες αναφορές ή για να συνδυάσετε δεδομένα με άλλα δεδομένα στην εφαρμογή σας. Θα χρειαστεί επίσης να έχετε ρυθμίσει ένα διανομέα συμβάν Azure και γνωρίζετε τη σύνδεση συμβολοσειράς που απαιτείται για την πρόσβαση σε αυτό.

Κατά την εκκίνηση της λύσης GenericWebToEH, διαβάζει ένα αρχείο ρύθμισης παραμέτρων (App.config) για να λάβετε ένα πλήθος αιτιών:

1. Η διεύθυνση URL ή μια λίστα διευθύνσεων URL, για την τοποθεσία δημοσίευσης τα δεδομένα. Ιδανικά, αυτή είναι μια τοποθεσία που δημοσιεύει δεδομένων στο JSON, όπως αυτές στα οποία γίνεται αναφορά από WSDOT [εδώ](http://www.wsdot.wa.gov/Traffic/api/). 
2. Διαπιστευτήρια για τη διεύθυνση URL, εάν είναι απαραίτητο. Πολλές προελεύσεις δημόσιων δεν χρειάζονται διαπιστευτήρια ή μπορείτε να τοποθετήσετε τα διαπιστευτήρια στη συμβολοσειρά URL. Άλλοι χρειάζονται ότι πρέπει να παράσχετε ξεχωριστά. (Σημειώστε ότι μπορείτε να καθορίσετε μόνο ένα σύνολο διαπιστευτηρίων σε αυτήν την εφαρμογή, ώστε να λειτουργεί μόνο εάν καθορίσετε μόνο μία διεύθυνση URL, όχι μια λίστα διευθύνσεων URL).
3. Συμβολοσειρά σύνδεσης και το όνομα του διανομέα συμβάντος σε αυτό το πεδίο συμβάν διανομείς ονομάτων, στο οποίο θα μεταφέρει τα δεδομένα. Μπορείτε να βρείτε αυτές τις πληροφορίες στην πύλη του Azure.
4. Ένα ύπνου των χρονικό διάστημα, σε χιλιοστά του δευτερολέπτου, για το διάστημα μεταξύ σταθμοσκόπησης της τοποθεσίας δημόσιων δεδομένων. Ρύθμιση αυτής της πολιτικής απαιτεί ορισμένες σκέψης. Εάν ψηφοφορία πολύ συχνά, ενδέχεται να χάσετε δεδομένα. από την άλλη πλευρά, εάν ψηφοφορία πολύ συχνά, ενδέχεται να λάβετε πολλά δεδομένα επαναλαμβανόμενες ή Χειρότερο ακόμα, που ενδέχεται να έχει αποκλειστεί ως μια nefarious bot. Εξετάστε το ενδεχόμενο να πόσο συχνά ενημερώνεται το αρχείο προέλευσης δεδομένων - καιρού ή κίνηση μπορεί να γίνεται ανανέωση των δεδομένων κάθε 15 λεπτά, αλλά μετοχών μήπως κάθε μερικά δευτερόλεπτα, ανάλογα με το πού μπορείτε να τις αποκτήσω. 
5. Μια σημαία για να υποδείξετε την εφαρμογή εάν τα δεδομένα έρχεται ως JSON ή XML. Επειδή το χρειάζεστε για να προωθήσετε τα δεδομένα σε ένα συμβάν διανομέα, η εφαρμογή έχει μια λειτουργική μονάδα για να μετατρέψετε XML σε JSON πριν από την αποστολή.

Μετά την ανάγνωση του αρχείου ρύθμισης παραμέτρων, η εφαρμογή τίθεται σε ένα βρόχο - πρόσβαση σε δημόσια τοποθεσία web, τη μετατροπή των δεδομένων, εάν είναι απαραίτητο, την εγγραφή στο κέντρο σας συμβάν και, στη συνέχεια, αναμονή για το χρονικό διάστημα αναμονής πριν από την αρχή ξανά. Συγκεκριμένα:

  * Ανάγνωση στη δημόσια τοποθεσία Web. Για λήψη δεδομένων έτοιμη για να στείλετε την παρουσία της κλάσης RawXMLWithHeaderToJsonReader χρησιμοποιείται από Azure/GenericWebToEH/ApiReaders/RawXMLWithHeaderToJsonReader.cs. Διαβάζει ροή προέλευσης στη μέθοδο GetData() και, στη συνέχεια, διαιρείται ώστε να μικρότερα τμήματα (δηλαδή εγγραφές) χρησιμοποιώντας GetXmlFromOriginalText. 
  Αυτή η μέθοδος θα διαβάσει XML καθώς και μορφοποιηθεί σωστά JSON ή JSON πίνακα. Στη συνέχεια, επεξεργασίας είναι αποτελέσματα με τη χρήση των παραμέτρων MergeToXML App.config (προεπιλογή = κενά).
  * Η λήψη και αποστολή δεδομένων έχει υλοποιηθεί ως ένα βρόχο στη μέθοδο Process() στο Program.cs. 
  Μετά τη λήψη αποτελεσμάτων εξόδου από GetData(), η μέθοδος enqueues διαχωρισμένες τιμών για την ενότητα συμβάντων.

## <a name="next-steps"></a>Επόμενα βήματα

Για να αναπτύξετε τη λύση, κλωνοποίηση ή να κάνετε λήψη της εφαρμογής [GenericWebToEH](https://azure.microsoft.com/documentation/samples/event-hubs-dotnet-importfromweb/) , επεξεργαστείτε το αρχείο App.config, το δημιουργούν και τέλος δημοσιεύστε το. Αφού έχετε δημοσιεύσει την εφαρμογή, μπορείτε να δείτε την λειτουργία στην πύλη του Azure κλασική κάτω από τις υπηρεσίες Cloud και μπορείτε να αλλάξετε ορισμένες από τις ρυθμίσεις παραμέτρων (όπως το συμβάν διανομέα προορισμού και το χρονικό διάστημα αναμονής) στην καρτέλα **Ρύθμιση παραμέτρων** .

Ανατρέξτε στο θέμα περισσότερα δείγματα διανομείς συμβάν στη [συλλογή Azure δειγμάτων](https://azure.microsoft.com/documentation/samples/?service=event-hubs) και στο [MSDN](https://code.msdn.microsoft.com/site/search?query=event%20hubs&f%5B0%5D.Value=event%20hubs&f%5B0%5D.Type=SearchText&ac=5).
