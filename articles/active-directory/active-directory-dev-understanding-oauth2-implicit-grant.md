<properties
   pageTitle="Κατανόηση του έμμεσα OAuth2 εκχώρηση ροής στο Azure Active Directory | Microsoft Azure"
   description="Μάθετε περισσότερα σχετικά με την εφαρμογή Azure Active Directory του από το OAuth2 έμμεσα εκχώρηση ροής, και αν είναι κατάλληλο για την εφαρμογή σας."
   services="active-directory"
   documentationCenter="dev-center-name"
   authors="vibronet"
   manager="mbaldwin"
   editor=""/>

<tags
   ms.service="active-directory"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="identity"
   ms.date="08/17/2016"
   ms.author="vittorib;bryanla"/>

# <a name="understanding-the-oauth2-implicit-grant-flow-in-azure-active-directory-ad"></a>Κατανόηση της ροής έμμεσα εκχώρηση OAuth2 στο Azure Active Directory (AD)

Η εκχώρηση έμμεσα OAuth2 είναι notorious για να την εκχώρηση με τη λίστα μεγαλύτερου των ζητήματα ασφαλείας στην προδιαγραφή OAuth2. Και ακόμη, που είναι η προσέγγιση υλοποιηθεί ADAL JS και αυτό συνιστάται κατά τη σύνταξη SPA εφαρμογές. Τι παρέχει; Είναι όλα θέμα ισορροπιών: και καθώς προκύψει, την μη ρητή εκχώρηση είναι η καλύτερη προσέγγιση, μπορείτε να αναζητήσετε για τις εφαρμογές που εκμετάλλευση ένα API Web μέσω JavaScript από ένα πρόγραμμα περιήγησης.

## <a name="what-is-the-oauth2-implicit-grant"></a>Τι είναι η εκχώρηση έμμεσα OAuth2;

Το quintessential [Εκχώρηση κωδικό εξουσιοδότησης OAuth2](https://tools.ietf.org/html/rfc6749#section-1.3.1) είναι η εκχώρηση άδειας που χρησιμοποιεί δύο ξεχωριστές τελικά σημεία. Το τελικό σημείο εξουσιοδότησης χρησιμοποιείται για τη φάση αλληλεπίδραση χρήστη, η οποία έχει ως αποτέλεσμα έναν κωδικό εξουσιοδότησης. Το διακριτικό τελικό σημείο χρησιμοποιείται, στη συνέχεια, από το πρόγραμμα-πελάτη για την ανταλλαγή τον κώδικα για ένα διακριτικό πρόσβασης και συχνά καθώς και ενός διακριτικού ανανέωση. Εφαρμογές Web απαιτούνται για να παρουσιάσετε τις δικές τους πιστοποιήσεις εφαρμογών για το τελικό σημείο διακριτικού, ώστε ο διακομιστής εξουσιοδότησης μπορούν να ελέγχουν την ταυτότητα του προγράμματος-πελάτη.

Η [Εκχώρηση OAuth2 έμμεσα](https://tools.ietf.org/html/rfc6749#section-1.3.2) είναι μια παραλλαγή παρέχει ένα πρόγραμμα-πελάτη για να αποκτήσετε ένα διακριτικό πρόσβασης (και id_token, στην περίπτωση [OpenId σύνδεση](http://openid.net/specs/openid-connect-core-1_0.html)) απευθείας από το τελικό σημείο εξουσιοδότησης, χωρίς να επικοινωνήσετε με το τελικό σημείο διακριτικού ούτε τον έλεγχο ταυτότητας την εφαρμογή-πελάτη. Αυτή η μεταβλητή σχεδιάστηκε ειδικά για JavaScript, ανάλογα με τις εφαρμογές που εκτελούνται σε ένα πρόγραμμα περιήγησης Web: με την αρχική προδιαγραφή OAuth2, τα διακριτικά επιστρέφονται στο τμήμα URI. Που διαθέτει τα bit διακριτικού σε τον κώδικα JavaScript στο πρόγραμμα-πελάτη, αλλά εγγυάται αυτές δεν θα περιλαμβάνονται στο ανακατευθύνσεων προς το διακομιστή. Επιστρέφει τα διακριτικά μέσω του προγράμματος περιήγησης ανακατευθύνει απευθείας από το τελικό σημείο εξουσιοδότησης. Διαθέτει επίσης το πλεονέκτημα της εξάλειψη τις απαιτήσεις για διασταύρωσης origin κλήσεις, οι οποίες είναι απαραίτητο, εάν η εφαρμογή JavaScript απαιτείται να επικοινωνήσετε με το διακριτικό τελικό σημείο.

Ένα σημαντικό χαρακτηριστικό του την εκχώρηση έμμεσα OAuth2 είναι το γεγονός ότι όπως ρέει διακριτικά ποτέ επιστροφής ανανέωση στο πρόγραμμα-πελάτη. Όπως θα εμφανίζεται στην επόμενη ενότητα, που δεν χρειάζεται πραγματικά και θα είναι στην πραγματικότητα ένα ζήτημα ασφαλείας.

## <a name="suitable-scenarios-for-the-oauth2-implicit-grant"></a>Κατάλληλη σενάρια για την εκχώρηση έμμεσα OAuth2

Καθώς η προδιαγραφή OAuth2 ίδια δηλώνει, την μη ρητή εκχώρηση έχει έχουν προκύπτουν για να ενεργοποιήσετε την εφαρμογές παράγοντα χρήστη – αυτό σημαίνει ότι, εφαρμογές JavaScript εκτέλεση μέσα σε ένα πρόγραμμα περιήγησης. Το χαρακτηριστικό ορισμός αυτών των αιτήσεων είναι ότι χρησιμοποιείται κώδικα JavaScript για πρόσβαση σε πόρους διακομιστή (συνήθως API Web), καθώς και για την ενημέρωση της εφαρμογής UX αντίστοιχα. Σκεφτείτε την εφαρμογές όπως Gmail ή το Outlook Web Access: Όταν επιλέγετε ένα μήνυμα από τα Εισερχόμενά σας, μόνο ο πίνακας απεικόνιση μηνύματος αλλάζει για να εμφανιστεί η νέα επιλογή, ενώ το υπόλοιπο της σελίδας παραμένει έχουν τροποποιηθεί. Αυτό είναι σε αντίθεση με αυτό παραδοσιακή βάσει redirect εφαρμογές Web, όπου κάθε αλληλεπίδραση χρήστη αποτελέσματα σε μια καταχώρηση πλήρους σελίδας προς τα πίσω και μια πλήρη σελίδα απόδοση της νέας απόκρισης σε διακομιστή.

Εφαρμογές που τραβάτε η προσέγγιση JavaScript που βασίζεται στο τις εξαιρετικά ονομάζονται μία μόνο σελίδα εφαρμογές ή ιαματικές πηγές: η ιδέα είναι ότι αυτές τις εφαρμογές λειτουργήσει μόνο μια αρχική σελίδα HTML και σχετικές JavaScript, με όλες τις επόμενες αλληλεπιδράσεις κινείται από κλήσεις Web API που εκτελούνται μέσω JavaScript. Ωστόσο, υβριδική προσεγγίσεων, όπου η εφαρμογή είναι κυρίως βάσει καταχώρηση προς τα πίσω, αλλά εκτελεί περιστασιακές JS κλήσεις, δεν είναι ασυνήθιστο – τη συζήτηση σχετικά με τη χρήση έμμεσα ροής είναι σχετικό για αυτούς καθώς και.

Εφαρμογές που βασίζονται σε Redirect ασφαλή συνήθως τις αιτήσεις τους μέσω cookies, ωστόσο, ότι η προσέγγιση δεν λειτουργεί καθώς και για τις εφαρμογές του JavaScript. Τα cookies λειτουργούν μόνο σε σχέση με τον τομέα δημιουργίας, ενώ JavaScript κλήσεις μπορεί να κατευθύνεται προς άλλους τομείς. Στην πραγματικότητα, που θα είναι συχνά πεζών και κεφαλαίων γραμμάτων: φανταστείτε ότι η κλήση API Azure API του Microsoft Graph, API, το Office-όλα που βρίσκονται εκτός του τομέα από το πού χρησιμοποιείται η εφαρμογή εφαρμογές. Μια αυξανόμενη τάση για εφαρμογές JavaScript είναι να έχετε παρασκηνίου δεν υπάρχει καθόλου, βασίζεστε 100% σε άλλων κατασκευαστών API Web για την υλοποίηση τους επιχειρηματική λειτουργία.

Προς το παρόν, η προτιμώμενη μέθοδος προστασίας των κλήσεων σε ένα API Web είναι να χρησιμοποιήσετε το OAuth2 φορέα διακριτικού την προσέγγιση, όπου κάθε κλήση συνοδεύεται από ένα διακριτικό πρόσβασης OAuth2. Το API Web εξετάζει το διακριτικό πρόσβασης εισερχόμενα και, εάν βρεθούν σε αυτό το εύρος είναι απαραίτητο, θα σας εκχωρήσει πρόσβαση σε λειτουργία που ζητήθηκε. Μη ρητή ροής της παρέχει ιδανικό μέσο για εφαρμογές JavaScript για να αποκτήσετε διακριτικά πρόσβασης για ένα API Web, σας δίνει τη δυνατότητα πολλά πλεονεκτήματα σε σχέση με τα cookies:

- Διακριτικά μπορεί να ληφθεί αξιόπιστα χωρίς να χρειάζεται διασταύρωσης κλήσεις origin – υποχρεωτική καταχώρηση από την ανακατεύθυνση στην οποία είναι επιστροφής διακριτικά URI εγγυάται ότι δεν έχουν μεταφερθεί διακριτικά
- Εφαρμογές JavaScript μπορούν να αποκτήσουν όσες διακριτικά πρόσβασης σύμφωνα με τις ανάγκες, για όσο το δυνατόν περισσότερες API Web που προσπαθήσουν – με χωρίς περιορισμούς σε τομείς
- HTML5 δυνατότητες, όπως η περίοδος λειτουργίας ή τοπικού χώρου αποθήκευσης εκχωρήσετε πλήρη έλεγχο διακριτικού σε cache και διάρκεια ζωής διαχείρισης, ενώ τα cookies διαχείρισης είναι αδιαφανές στην εφαρμογή
- Δεν είναι ευαίσθητο σε επιθέσεις πλαστογράφησης (CSRF) αίτηση διατοποθεσιακή διακριτικά πρόσβασης

Η ροή έμμεσα εκχώρηση δεν εκδίδει διακριτικά ανανέωσης, κυρίως για λόγους ασφαλείας. Ένα διακριτικό ανανέωσης δεν ως στενά εύρος ως διακριτικά πρόσβασης, εκχώρηση πολύ πιο power ως εκ τούτου inflicting πολύ πιο ζημιά, σε περίπτωση που το είναι διαρροής. Της έμμεσα ροής, τα διακριτικά παραδίδονται στη διεύθυνση URL, ως εκ τούτου τον κίνδυνο υποκλοπής είναι υψηλότερα από σε χορήγηση κώδικα εξουσιοδότησης.

Ωστόσο, σημειώστε ότι μια εφαρμογή JavaScript έχει ένας άλλος μηχανισμός στη διάθεσή για ανανέωση διακριτικά πρόσβασης χωρίς επανειλημμένα ερώτηση στο χρήστη για τα διαπιστευτήρια. Η εφαρμογή μπορεί να χρησιμοποιήσει ένα κρυφό iframe για να εκτελέσετε νέα διακριτικών προσκλήσεις σε σχέση με το τελικό σημείο εξουσιοδότησης του Azure AD: με την προϋπόθεση ότι το πρόγραμμα περιήγησης εξακολουθεί να έχει μια ενεργή περίοδο λειτουργίας (Διαβάστε: περιλαμβάνει ένα cookie περιόδου λειτουργίας) σε σχέση με τον τομέα Azure AD, αίτησης για έλεγχο ταυτότητας με επιτυχία μπορεί να προκύψουν χωρίς να χρειάζεται για αλληλεπίδραση με το χρήστη. 

Αυτό το μοντέλο εκχωρεί την εφαρμογή JavaScript τη δυνατότητα να ανεξάρτητη ανανέωση διακριτικά πρόσβασης και ακόμα και να αποκτάτε νέους για ένα νέο API (υπό την προϋπόθεση ότι ο χρήστης δεχθεί προηγουμένως τους. Αποφεύγετε έτσι το προστέθηκε βάρος κατά τη λήψη, λαμβάνοντας υπόψη και προστασία σε ένα αντικείμενο υψηλή τιμή, όπως ενός διακριτικού ανανέωσης. Το αντικείμενο που κάνει την σιωπηρή ανανέωση είναι δυνατόν, cookie της περιόδου λειτουργίας Azure AD, γίνεται εκτός της εφαρμογής. Ένα άλλο πλεονέκτημα αυτής της προσέγγισης είναι ένας χρήστης μπορεί να αποσυνδεθείτε από το Azure AD, χρησιμοποιώντας οποιαδήποτε από τις εφαρμογές που έχετε συνδεθεί στο Azure AD, εκτελείται σε οποιαδήποτε από τις καρτέλες του προγράμματος περιήγησης. Το αποτέλεσμα είναι η διαγραφή των cookie της περιόδου λειτουργίας Azure AD και την εφαρμογή JavaScript αυτόματα θα χάσετε τη δυνατότητα να ανανεώσετε τα διακριτικά για το υπογεγραμμένο ανάληψη χρήστη.

## <a name="is-the-implicit-grant-suitable-for-my-app"></a>Είναι η εκχώρηση έμμεσα κατάλληλη για εφαρμογή μου;

Η εκχώρηση έμμεσα παρουσιάζει κινδύνους περισσότερες από τις άλλες επιχορηγήσεις. Τεκμηριώνονται επίσης και τις περιοχές που πρέπει να πληρώσετε την προσοχή σε (για παράδειγμα δείτε [Γίνεται εσφαλμένη χρήση της Access διακριτικού στον κάτοχο πόρων μίμηση έμμεσα ροής] [ OAuth2-Spec-Implicit-Misuse] και [OAuth 2.0 απειλή μοντέλο και ζητήματα ασφαλείας][OAuth2-Threat-Model-And-Security-Implications]). Ωστόσο, το ανώτερο προφίλ κινδύνου είναι σε μεγάλο βαθμό οφείλεται στο γεγονός ότι αυτό προορίζεται για να ενεργοποιήσετε τις εφαρμογές που η εκτέλεση ενεργού κώδικα, που σερβιρίστηκε από έναν απομακρυσμένο πόρο σε ένα πρόγραμμα περιήγησης. Εάν σχεδιάζετε μια αρχιτεκτονική SPA, έχουν χωρίς στοιχεία παρασκηνίου ή σκοπεύετε να καλέσετε μια API Web μέσω JavaScript, συνιστάται η χρήση της ροής της έμμεσα για διακριτικού απόκτηση.

Εάν η εφαρμογή σας είναι ένα εγγενές πρόγραμμα-πελάτη, την μη ρητή ροής δεν είναι μια εξαιρετική προσαρμογή. Απουσία cookie της περιόδου λειτουργίας Azure AD στο περιβάλλον ενός πελάτη εγγενής αφαιρεί την εφαρμογή από το μέσο διατήρησης χρόνο χρόνο ζωής περιόδου λειτουργίας. Που σημαίνει ότι η εφαρμογή σας θα επανειλημμένα γίνεται ερώτηση στο χρήστη κατά την απόκτηση κωδικοί πρόσβασης για νέους πόρους.

Εάν κάνετε ανάπτυξη μιας εφαρμογής Web που περιλαμβάνει έναν υπολογιστή στο παρασκήνιο και κατανάλωση API από τον κώδικά παρασκηνίου, της έμμεσα ροής δεν είναι επίσης καλή προσαρμογή. Άλλες επιχορηγήσεις δώσει πολύ πιο power. Για παράδειγμα, η εκχώρηση διαπιστευτήρια προγράμματος-πελάτη OAuth2 παρέχει τη δυνατότητα για τη λήψη των διακριτικών που αντικατοπτρίζουν τα δικαιώματα που έχουν εκχωρηθεί σε την ίδια την εφαρμογή, σε αντίθεση με αναθέσεις χρήστη. Αυτό σημαίνει ότι ο υπολογιστής-πελάτης έχει τη δυνατότητα για να διατηρήσετε πρόσβαση μέσω προγραμματισμού σε πόρους ακόμα και όταν ένας χρήστης δεν έχει αναλάβει ενεργά σε περίοδο λειτουργίας και ούτω καθεξής. Όχι μόνο που, αλλά οι επιχορηγήσεις δώσει τις εγγυήσεις μεγαλύτερη ασφάλεια. Για παράδειγμα, διέλευση ποτέ διακριτικά πρόσβασης μέσω του προγράμματος περιήγησης του χρήστη, αυτές δεν υπάρχει κίνδυνος που αποθηκεύονται στο ιστορικό περιήγησης και ούτω καθεξής. Η εφαρμογή προγράμματος-πελάτη μπορεί επίσης να εκτελέσει αυστηρό έλεγχο ταυτότητας κατά την αίτηση ενός διακριτικού.

## <a name="next-steps"></a>Επόμενα βήματα

- Για μια πλήρη λίστα των πόρων για προγραμματιστές, συμπεριλαμβανομένων των πληροφορίες αναφοράς για τα πρωτόκολλα και το OAuth2 εξουσιοδότησης εκχώρηση ροών υποστήριξης από Azure AD, ανατρέξτε στο το [Azure AD για προγραμματιστές του οδηγού][AAD-Developers-Guide]
- Δείτε [πώς μπορείτε να ενσωματώσετε μια εφαρμογή με το Azure AD]  [ ACOM-How-To-Integrate] για επιπλέον βάθος στη διαδικασία ενοποίησης της εφαρμογής.

<!--Image references-->

<!--Reference style links in use-->
[AAD-Developers-Guide]: active-directory-developers-guide.md
[ACOM-How-And-Why-Apps-Added-To-AAD]: active-directory-how-applications-are-added.md
[ACOM-How-To-Integrate]: active-directory-how-to-integrate.md
[OAuth2-Spec-Implicit-Misuse]: https://tools.ietf.org/html/rfc6749#section-10.16 
[OAuth2-Threat-Model-And-Security-Implications]: https://tools.ietf.org/html/rfc6819

