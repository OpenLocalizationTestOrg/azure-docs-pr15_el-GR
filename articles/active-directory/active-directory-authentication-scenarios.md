
<properties
   pageTitle="Έλεγχος ταυτότητας σενάρια για Azure AD | Microsoft Azure"
   description="Επισκόπηση τα πέντε πιο συνηθισμένα σενάρια ελέγχου ταυτότητας για το Azure Active Directory (AAD)"
   services="active-directory"
   documentationCenter="dev-center-name"
   authors="bryanla"
   manager="mbaldwin"
   editor=""/>

<tags
   ms.service="active-directory"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="identity"
   ms.date="09/16/2016"
   ms.author="mbaldwin"/>

# <a name="authentication-scenarios-for-azure-ad"></a>Έλεγχος ταυτότητας σενάρια για Azure AD

Azure Active Directory (Azure AD) απλοποιεί ελέγχου ταυτότητας για τους προγραμματιστές, παρέχοντας ταυτότητας ως προέλευση υπηρεσίας, με την υποστήριξη για τα πρωτόκολλα βιομηχανικών προτύπων όπως το διακριτικό 2.0 και συνδέστε OpenID, καθώς και άνοιγμα βιβλιοθήκες για διαφορετικές πλατφόρμες θα σας βοηθήσουν να ξεκινήσετε γρήγορα κωδικοποίησης. Αυτό το έγγραφο θα σας βοηθήσει να κατανοήσετε το υποστηρίζει διάφορα σενάρια Azure AD και θα σας δείξει πώς να επιτύχετε γρήγορα αποτελέσματα. Διαιρείται σε ενότητες που ακολουθούν:

- [Βασικά στοιχεία για τον έλεγχο ταυτότητας στο Azure AD](#basics-of-authentication-in-azure-ad)

- [Αξιώσεις στο Azure AD διακριτικά ασφαλείας](#claims-in-azure-ad-security-tokens)

- [Βασικά στοιχεία για την καταχώρηση μιας εφαρμογής στο Azure AD](#basics-of-registering-an-application-in-azure-ad)

- [Τύποι εφαρμογών και σενάρια](#application-types-and-scenarios)

  - [Πρόγραμμα περιήγησης Web σε εφαρμογή Web](#web-browser-to-web-application)

  - [Μεμονωμένη σελίδα εφαρμογής (SPA)](#single-page-application-spa)

  - [Εγγενή εφαρμογή για να API Web](#native-application-to-web-api)

  - [Εφαρμογή Web στο Web API](#web-application-to-web-api)

  - [Μονού ή εφαρμογή διακομιστή για API Web](#daemon-or-server-application-to-web-api)



## <a name="basics-of-authentication-in-azure-ad"></a>Βασικά στοιχεία για τον έλεγχο ταυτότητας στο Azure AD

Εάν είστε εξοικειωμένοι με τις βασικές έννοιες του ελέγχου ταυτότητας σε Azure AD, διαβάστε αυτήν την ενότητα. Διαφορετικά, μπορείτε να παραλείψετε προς τα κάτω σε [τύπους εφαρμογών και σενάρια](#application-types-and-scenarios).

Ας δούμε το πιο βασικές σενάριο όπου απαιτείται ταυτότητας: ο χρήστης σε ένα πρόγραμμα περιήγησης web πρέπει να ελέγχουν την ταυτότητα μιας εφαρμογής web. Αυτό το σενάριο περιγράφεται αναλυτικότερα στην ενότητα [Πρόγραμμα περιήγησης Web σε εφαρμογή Web](#web-browser-to-web-application) , αλλά είναι χρήσιμο σημείο εκκίνησης για την απεικόνιση τις δυνατότητες του Azure AD και conceptualize πώς λειτουργεί το σενάριο. Εξετάστε το ακόλουθο διάγραμμα για αυτό το σενάριο:

![Επισκόπηση της καθολικής σύνδεσης στην εφαρμογή web](./media/active-directory-authentication-scenarios/basics_of_auth_in_aad.png)

Με το διάγραμμα παραπάνω υπόψη, ακολουθεί τι πρέπει να γνωρίζετε σχετικά με τα διάφορα στοιχεία:

- Azure AD είναι η υπηρεσία παροχής ταυτότητας, υπεύθυνος για την επαλήθευση της ταυτότητας των χρηστών και των εφαρμογών που υπάρχουν στον κατάλογο του οργανισμού και ο τελικός εκδίδει διακριτικά ασφαλείας κατά την επιτυχή έλεγχο ταυτότητας αυτών των χρηστών και εφαρμογές.


- Μια εφαρμογή η οποία θέλει να αναθέσει Azure AD του ελέγχου ταυτότητας σε πρέπει να έχει εγγραφεί στο Azure AD, το οποίο καταχωρεί και προσδιορίζει με μοναδικό τρόπο της εφαρμογής στον κατάλογο.


- Προγραμματιστές να χρησιμοποιήσετε τις βιβλιοθήκες Άνοιγμα αρχείου προέλευσης Azure AD ελέγχου ταυτότητας για τον έλεγχο ταυτότητας εύκολη μέσω του χειρισμού τις λεπτομέρειες πρωτοκόλλου για εσάς. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Azure Active Directory ελέγχου ταυτότητας βιβλιοθήκες](active-directory-authentication-libraries.md) .


• Όταν έχει γίνει έλεγχος ταυτότητας χρήστη, η εφαρμογή πρέπει να επικυρώσετε διακριτικού ασφαλείας του χρήστη για να βεβαιωθείτε ότι ο έλεγχος ταυτότητας ολοκληρώθηκε με επιτυχία για το οποίο προορίζεται μέρη. Προγραμματιστές να χρησιμοποιήσετε τις βιβλιοθήκες που παρέχεται ελέγχου ταυτότητας για το χειρισμό επικύρωσης οποιαδήποτε διακριτικού από το Azure AD, συμπεριλαμβανομένης της διακριτικά Web JSON (JWT) ή SAML 2.0. Εάν θέλετε να εκτελέσετε με μη αυτόματο τρόπο επικύρωσης, ανατρέξτε στην τεκμηρίωση [JWT διακριτικού πρόγραμμα χειρισμού](https://msdn.microsoft.com/library/dn205065.aspx) .


> [AZURE.IMPORTANT] Azure AD χρησιμοποιεί κρυπτογράφηση δημόσιου κλειδιού για να συνδεθείτε διακριτικά και βεβαιωθείτε ότι είναι έγκυρες. Ανατρέξτε στο θέμα [Σημαντικές πληροφορίες σχετικά με την είσοδο κλειδί κατάδειξης στο Azure AD](active-directory-signing-key-rollover.md) για περισσότερες πληροφορίες σχετικά με τη λογική είναι απαραίτητο, πρέπει να έχετε στην εφαρμογή σας για να βεβαιωθείτε ότι είναι πάντα ενημερωμένο με τα πλήκτρα με τα πιο πρόσφατα.


• Τη ροή των προσκλήσεων και απαντήσεων για τη διαδικασία ελέγχου ταυτότητας προσδιορίζεται από το πρωτόκολλο ελέγχου ταυτότητας που χρησιμοποιήθηκε, όπως το διακριτικό 2.0, συνδεθείτε OpenID, WS Ομοσπονδία ή SAML 2.0. Με περισσότερες λεπτομέρειες στο θέμα [Πρωτόκολλα ελέγχου ταυτότητας Active Directory Azure](active-directory-authentication-protocols.md) και στις παρακάτω ενότητες περιγράφονται αυτά τα πρωτόκολλα.

> [AZURE.NOTE] Azure AD υποστηρίζει το διακριτικό 2.0 και σύνδεση OpenID πρότυπα που κάνετε εκτεταμένη χρήση των διακριτικά φορέα, όπως τα διακριτικά φορέα αναπαριστώνται ως JWTs. Διακριτικό φορέα είναι διακριτικό ελαφριά ασφαλείας που εκχωρεί πρόσβαση "φορέα" σε ένα προστατευμένο πόρο. Με αυτήν την έννοια, "φορέα" είναι οποιοδήποτε μέρος που μπορεί να παρουσιάζουν το διακριτικό. Αν και ένα πάρτι πρέπει να πρώτα τον έλεγχο ταυτότητας με Azure AD για να λάβετε το διακριτικό φορέα, εάν δεν έχουν ληφθεί τα απαραίτητα βήματα για την ασφάλιση το διακριτικό στο μετάδοση και το χώρο αποθήκευσης, μπορεί να υποκλοπής και να χρησιμοποιούνται από ένα ανεπιθύμητα μέρη. Ενώ ορισμένες διακριτικά ασφαλείας έχει ένα ενσωματωμένο μηχανισμό για την αποτροπή μη εξουσιοδοτημένα άτομα από τη χρήση τους, τα διακριτικά φορέα δεν έχουν αυτός ο μηχανισμός και πρέπει να μεταφέρονται σε ασφαλούς καναλιού όπως ασφάλεια επιπέδου μεταφοράς (HTTPS). Εάν ένα διακριτικό φορέα μεταδίδονται στο Απαλοιφή, μια Άντρας στο το μεσαίο επίθεση μπορεί να χρησιμοποιηθεί από ένα κακόβουλο μέρος για να αποκτήσετε το διακριτικό και να το χρησιμοποιήσετε για μια μη εξουσιοδοτημένη πρόσβαση σε ένα προστατευμένο πόρο. Τις ίδιες βασικές αρχές ασφαλείας εφαρμογή κατά την αποθήκευση ή την προσωρινή αποθήκευση διακριτικά φορέα για μελλοντική χρήση. Πάντα βεβαιωθείτε ότι η εφαρμογή σας μεταδίδει και αποθηκεύει τα διακριτικά φορέα με ασφαλή τρόπο. Για περισσότερες ζητήματα ασφαλείας στην διακριτικά φορέα, ανατρέξτε στο θέμα [RFC 6750 τμήμα 5](http://tools.ietf.org/html/rfc6750).


Τώρα που έχετε μια επισκόπηση των τα βασικά στοιχεία, διαβάστε παρακάτω για να κατανοήσετε τον τρόπο παροχής λειτουργεί στο Azure AD και υποστηρίζει τα κοινά σενάρια Azure AD ενότητες.


## <a name="claims-in-azure-ad-security-tokens"></a>Αξιώσεις στο Azure AD διακριτικά ασφαλείας

Κωδικοί ασφαλείας εκδοθεί από Azure AD περιέχουν αξιώσεις ή διεκδικήσεων πληροφοριών σχετικά με το θέμα που έχει γίνει έλεγχος ταυτότητας. Αυτές οι αξιώσεις μπορεί να χρησιμοποιηθεί από την εφαρμογή για διάφορες εργασίες. Για παράδειγμα, μπορεί να χρησιμοποιηθεί για να επικυρώσει το διακριτικό, προσδιορίστε το θέμα καταλόγου μισθωτή, εμφάνιση πληροφοριών χρήστη, προσδιορίστε το θέμα εξουσιοδότηση και ούτω καθεξής. Η παρουσίαση σε οποιονδήποτε κωδικό ασφαλείας που δίνεται αξιώσεων εξαρτώνται από τον τύπο του διακριτικό, τον τύπο των διαπιστευτηρίων που χρησιμοποιούνται για τον έλεγχο ταυτότητας χρήστη και τις ρυθμίσεις της εφαρμογής. Μια σύντομη περιγραφή κάθε τύπο διεκδίκηση εκπέμπει Azure AD παρέχεται στον παρακάτω πίνακα. Για περισσότερες πληροφορίες, ανατρέξτε στο [υποστηρίζονται διακριτικού και τύπους διεκδίκηση](active-directory-token-and-claims.md).


| Διεκδίκηση | Περιγραφή |
|-------|-------------|
| Αναγνωριστικό εφαρμογής | Προσδιορίζει την εφαρμογή που χρησιμοποιεί το διακριτικό.
| Ακροατηρίου | Προσδιορίζει τον παραλήπτη πόρο προορίζεται για το διακριτικό. |
| Αναφορά κλάσης περιβάλλον εφαρμογής ελέγχου ταυτότητας | Υποδεικνύει πώς το πρόγραμμα-πελάτη ήταν με έλεγχο ταυτότητας (δημόσια προγράμματος-πελάτη έναντι εμπιστευτικές προγράμματος-πελάτη). |
| Έλεγχος ταυτότητας άμεσων | Καταγράφει την ημερομηνία και την ώρα που παρουσιάστηκε τον έλεγχο ταυτότητας. |
| Μέθοδος ελέγχου ταυτότητας | Υποδεικνύει πώς το θέμα του διακριτικού έγινε έλεγχος ταυτότητας (κωδικός πρόσβασης, πιστοποιητικό, κλπ.). |
| Όνομα | Παρέχει το συγκεκριμένο όνομα του χρήστη ως σύνολο στο Azure AD. |
| Ομάδες | Περιέχει ομάδες αναγνωριστικά Azure AD αντικειμένων ο χρήστης είναι μέλος της. |
| Υπηρεσία παροχής ταυτότητας | Καταγράφει την υπηρεσία παροχής ταυτότητας που ελεγχθεί η ταυτότητά το θέμα του διακριτικού. |
| Εκδοθεί στο | Καταγράφει το χρόνο κατά την οποία έχει εκδοθεί το διακριτικό, χρησιμοποιείται συχνά για διακριτικού ενημέρωση. |
| Εκδότης | Προσδιορίζει το STS που που εκπέμπει το διακριτικό, καθώς και ο μισθωτής Azure AD. |
| Επώνυμο | Παρέχει το "Επώνυμο" από το χρήστη ως σύνολο στο Azure AD. |
| Όνομα | Παρέχει μια human αναγνώσιμο τιμή που προσδιορίζει το θέμα του διακριτικού. |
| Αναγνωριστικό αντικειμένου | Περιέχει μια αμετάβλητες, μοναδικό αναγνωριστικό του θέματος σε Azure AD. |
| Ρόλοι | Περιέχει φιλικό ονόματα Azure AD ρόλοι της εφαρμογής που έχει εκχωρηθεί στο χρήστη. |
| Πεδίο εφαρμογής | Υποδεικνύει τα δικαιώματα που έχουν εκχωρηθεί στην εφαρμογή-πελάτη. |
| Θέμα | Υποδεικνύει το κεφάλαιο σχετικά με την οποία το διακριτικό διεκδικήσεις πληροφορίες. |
| Αναγνωριστικό μισθωτή | Περιέχει μια αμετάβλητες, μοναδικό αναγνωριστικό του μισθωτή του καταλόγου που εξέδωσε το διακριτικό. |
| Διάρκεια ζωής διακριτικού | Καθορίζει το χρονικό διάστημα μέσα στην οποία διακριτικό είναι έγκυρη. |
| Κύριο όνομα χρήστη | Περιέχει το κύριο όνομα χρήστη του θέματος. |
| Έκδοση | Περιέχει τον αριθμό έκδοσης του διακριτικού. |


## <a name="basics-of-registering-an-application-in-azure-ad"></a>Βασικά στοιχεία για την καταχώρηση μιας εφαρμογής στο Azure AD

Οποιαδήποτε εφαρμογή που outsources Azure AD του ελέγχου ταυτότητας πρέπει να έχει εγγραφεί σε έναν κατάλογο. Αυτό το βήμα περιλαμβάνει που σας ενημερώνει Azure AD σχετικά με την εφαρμογή σας, όπως η διεύθυνση URL του έχει θέση, τη διεύθυνση URL για την αποστολή απαντήσεων μετά τον έλεγχο ταυτότητας, το URI για να προσδιορίσετε την εφαρμογή σας και πολλά άλλα. Αυτές οι πληροφορίες είναι απαιτείται για κλειδιού λόγους:

- Azure AD ανάγκες συντεταγμένες για να επικοινωνήσετε με την εφαρμογή κατά την επεξεργασία της καθολικής σύνδεσης ή ανταλλαγή διακριτικά. Περιλαμβάνονται τα εξής:

  - URI Αναγνωριστικό εφαρμογής: Το αναγνωριστικό για μια εφαρμογή. Αυτή η τιμή αποστέλλεται Azure AD κατά τον έλεγχο ταυτότητας για να υποδείξετε την εφαρμογή με τον καλούντα θέλει ενός διακριτικού για. Επιπλέον, αυτή η τιμή περιλαμβάνει το διακριτικό έτσι ώστε η εφαρμογή να γνωρίζει ήταν στον προβλεπόμενο προορισμό.


  - Απάντηση σε διεύθυνση URL και ανακατεύθυνση URI: στην περίπτωση μιας web API ή την εφαρμογή web, η διεύθυνση URL απάντηση είναι στη θέση στην οποία Azure AD θα στείλετε την απάντηση ελέγχου ταυτότητας, συμπεριλαμβανομένων των ενός διακριτικού εάν ο έλεγχος ταυτότητας ολοκληρώθηκε με επιτυχία. Στην περίπτωση μιας εγγενούς εφαρμογής, το URI ανακατεύθυνση είναι ένα μοναδικό αναγνωριστικό στο οποίο Azure AD θα σας ανακατευθύνει τον παράγοντα χρήστη σε μια πρόσκληση σε διακριτικό 2.0.


  - Αναγνωριστικό υπολογιστή-πελάτη: Το Αναγνωριστικό για μια εφαρμογή, η οποία δημιουργείται από το Azure AD όταν η εφαρμογή έχει καταχωρηθεί. Κατά την αίτηση έναν κωδικό εξουσιοδότησης ή διακριτικό, το Αναγνωριστικό υπολογιστή-πελάτη και το κλειδί στην οποία αποστέλλονται Azure AD κατά τον έλεγχο ταυτότητας.


  - Κλειδί: Το κλειδί που αποστέλλεται μαζί με ένα Αναγνωριστικό πελάτη κατά τον έλεγχο ταυτότητας Azure AD για να καλέσετε μια API web.


- Azure AD πρέπει να διασφαλίσετε ότι η εφαρμογή έχει τα απαραίτητα δικαιώματα για πρόσβαση στα δεδομένα σας καταλόγου, άλλες εφαρμογές στην εταιρεία σας, και ούτω καθεξής

Προμήθεια γίνεται πιο σαφείς όταν γνωρίζετε ότι υπάρχουν δύο κατηγορίες με τις εφαρμογές που μπορούν να αναπτυχθούν και ενσωματωμένο με το Azure AD:

- Ενιαία αίτηση μισθωτή: μια εφαρμογή μία μισθωτή προορίζονται για χρήση σε έναν οργανισμό. Αυτά είναι συνήθως γραμμής επιχειρηματικές εφαρμογές (LoB) από έναν προγραμματιστή για μεγάλες επιχειρήσεις. Μια εφαρμογή μία μισθωτή μόνο πρέπει να είναι προσβάσιμη από τους χρήστες σε έναν κατάλογο και ως αποτέλεσμα, μόνο προκειμένου να παρασχεθεί σε έναν κατάλογο. Αυτές οι εφαρμογές συνήθως καταχωρούνται από έναν προγραμματιστή στην εταιρεία.


- Εφαρμογή πολλών μισθωτή: μια εφαρμογή πολλών μισθωτών προορίζεται για χρήση σε πολλούς οργανισμούς, όχι μόνο μία εταιρεία. Αυτά είναι συνήθως-ως-a-υπηρεσία λογισμικού (ΑΠΑ) εφαρμογές που έχουν δημιουργηθεί με έναν προμηθευτή ανεξάρτητη λογισμικού (ISV). Εφαρμογές πολλαπλών μισθωτή πρέπει να γίνει παροχή σε κάθε κατάλογο όπου θα χρησιμοποιηθούν, που απαιτεί τη συγκατάθεσή χρήστη ή διαχειριστή για να καταχωρήσετε τις. Αυτή η διαδικασία συγκατάθεση ξεκινά όταν μια εφαρμογή έχει καταχωρηθεί στον κατάλογο και δίνεται πρόσβαση για το API Graph ή ίσως κάποιον άλλο API web. Όταν ένα χρήστη ή διαχειριστή από ένα διαφορετικό οργανισμό εγγράφεται για να χρησιμοποιήσετε την εφαρμογή, εμφανίζεται ένα παράθυρο διαλόγου που εμφανίζει τα δικαιώματα που απαιτεί την εφαρμογή. Ο χρήστης ή ο διαχειριστής μπορεί να συγκατάθεση, στη συνέχεια, με την εφαρμογή, η οποία παρέχει πρόσβαση εφαρμογής αναφέρεται στα δεδομένα και, τέλος, η εφαρμογή καταχωρείται στον κατάλογο τους. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Επισκόπηση πλαίσιο τη συγκατάθεσή σας](active-directory-integrating-applications.md#overview-of-the-consent-framework).

Ορισμένα πρόσθετα ζητήματα προκύψουν κατά την ανάπτυξη μιας εφαρμογής πολλών μισθωτών αντί για μια εφαρμογή μία μισθωτή. Για παράδειγμα, εάν πραγματοποιείτε την εφαρμογή σας διαθέσιμη σε χρήστες σε πολλούς καταλόγους, χρειάζεστε ένα μηχανισμό για να προσδιορίσετε ποιο μισθωτή βρίσκονται στο. Μια εφαρμογή μία μισθωτή μόνο πρέπει να ανατρέξετε σε δικό του καταλόγου για ένα χρήστη, ενώ μια εφαρμογή πολλών μισθωτή πρέπει να προσδιορίσετε έναν συγκεκριμένο χρήστη από όλους τους καταλόγους στο Azure AD. Για να εκτελέσετε αυτήν την εργασία, Azure AD παρέχει ένα κοινό τελικό σημείο ελέγχου ταυτότητας, όπου οποιαδήποτε εφαρμογή πολλών μισθωτών μπορούν να κατευθύνετε αιτήσεις εισόδου, αντί για ένα συγκεκριμένο μισθωτή τελικό σημείο. Αυτό το τελικό σημείο είναι https://login.microsoftonline.com/common για όλους τους φακέλους στο Azure AD, ενώ ένα τελικό σημείο συγκεκριμένο μισθωτή μπορεί να είναι https://login.microsoftonline.com/contoso.onmicrosoft.com. Το τελικό σημείο κοινές είναι ιδιαίτερα σημαντικό να λάβετε υπόψη κατά την ανάπτυξη την εφαρμογή σας, επειδή θα πρέπει η λογική είναι απαραίτητο να χειρίζεται πολλούς μισθωτές κατά την είσοδο, sign-out, και το διακριτικό επικύρωσης.

Εάν προς το παρόν ανάπτυξη μιας εφαρμογής μία μισθωτή, αλλά θέλετε να την κάνετε διαθέσιμη για πολλές εταιρείες, μπορείτε να εύκολα κάνετε αλλαγές στην εφαρμογή και τη ρύθμιση παραμέτρων στο Azure AD ώστε να είναι πολλών μισθωτή με δυνατότητα. Επιπλέον, Azure AD χρησιμοποιεί το ίδιο κλειδί υπογραφής για όλα τα διακριτικά σε όλους τους καταλόγους, εάν δίνετε ελέγχου ταυτότητας σε ένα μεμονωμένο μισθωτή ή εφαρμογή πολλών μισθωτή.

Κάθε σενάριο που αναφέρονται σε αυτό το έγγραφο περιλαμβάνει μια δευτερεύουσα ενότητα που περιγράφει τις απαιτήσεις παροχής. Για πιο λεπτομερείς πληροφορίες σχετικά με τη δημιουργία μιας εφαρμογής στο Azure AD και τις διαφορές μεταξύ των μεμονωμένων και πολλαπλών μισθωτή εφαρμογών, ανατρέξτε στο θέμα [Ενσωμάτωση εφαρμογών με το Azure Active Directory](active-directory-integrating-applications.md) για περισσότερες πληροφορίες. Συνεχίστε να διαβάζετε για να κατανοήσετε τα κοινά σενάρια εφαρμογής στο Azure AD.

## <a name="application-types-and-scenarios"></a>Τύποι εφαρμογών και σενάρια

Κάθε ένα από τα σενάρια που περιγράφονται σε αυτό το έγγραφο μπορούν να αναπτυχθούν χρησιμοποιώντας διάφορες γλώσσες και πλατφόρμες. Αυτά είναι όλα αντίγραφα ασφαλείας των δείγματα κώδικα ολοκλήρωσης, τα οποία είναι διαθέσιμα σε μας [Οδηγό δείγματα κώδικα](active-directory-code-samples.md)ή απευθείας από το αντίστοιχο [αποθετήρια δείγμα Github](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory). Επιπλέον, εάν χρειάζεται η εφαρμογή σας ένα συγκεκριμένο τμήμα ή το τμήμα του ένα σενάριο για ολοκληρωμένες, στις περισσότερες περιπτώσεις αυτή τη λειτουργικότητα μπορούν να προστεθούν ανεξάρτητα. Για παράδειγμα, εάν έχετε μια εφαρμογή εγγενούς που καλεί μια API web, μπορείτε εύκολα να προσθέσετε μια εφαρμογή web που επίσης καλεί το API web. Το παρακάτω διάγραμμα παρουσιάζει αυτά τα σενάρια και τύπους εφαρμογών, και πώς μπορείτε να προσθέσετε διάφορα στοιχεία:

![Τύποι εφαρμογών και σενάρια](./media/active-directory-authentication-scenarios/application_types_and_scenarios.png)

Αυτά είναι τα πέντε κύρια εφαρμογή σενάρια που υποστηρίζονται από το Azure AD:

- [Πρόγραμμα περιήγησης Web σε εφαρμογή Web](#web-browser-to-web-application): ο χρήστης πρέπει να εισέλθετε σε μια εφαρμογή web που προστατεύεται από Azure AD.

- [Εφαρμογή μία μόνο σελίδα (SPA)](#single-page-application-spa): ο χρήστης πρέπει να εισέλθετε σε μια εφαρμογή μεμονωμένης σελίδας που προστατεύεται από Azure AD.

- [Εγγενή εφαρμογή για να το API Web](#native-application-to-web-api): μιας εγγενούς εφαρμογής που εκτελείται σε ένα τηλέφωνο, tablet ή Υπολογιστή πρέπει να τον έλεγχο ταυτότητας χρήστη για να λάβετε πόρους από το web API που προστατεύεται από Azure AD.

- [Εφαρμογή Web για το API Web](#web-application-to-web-api): μια εφαρμογή web πρέπει να λάβετε πόρους από το web API ασφαλές από Azure AD.

- [Μονού ή εφαρμογή διακομιστή για το API Web](#daemon-or-server-application-to-web-api): πρέπει να λάβετε πόρους από το web API ασφαλές από Azure AD μια εφαρμογή υπηρεσίας ή μια εφαρμογή διακομιστή με χωρίς περιβάλλον εργασίας χρήστη web.

### <a name="web-browser-to-web-application"></a>Πρόγραμμα περιήγησης Web σε εφαρμογή Web

Αυτή η ενότητα περιγράφει μια εφαρμογή που πραγματοποιεί έλεγχο ταυτότητας χρήστη σε ένα πρόγραμμα περιήγησης web σε μια εφαρμογή web. Σε αυτό το σενάριο, η εφαρμογή web κατευθύνει περιήγησης του χρήστη για να πραγματοποιήσετε είσοδο στο Azure AD. Azure AD επιστρέφει μια απόκριση εισόδου μέσω προγράμματος περιήγησης του χρήστη, η οποία περιέχει αξιώσεων σχετικά με το χρήστη σε έναν κωδικό ασφαλείας. Αυτό το σενάριο υποστηρίζει καθολικής σύνδεσης χρησιμοποιώντας τα πρωτόκολλα WS ομοσπονδίας, SAML 2.0 και συνδέστε OpenID.


#### <a name="diagram"></a>Διάγραμμα
![Ροή ελέγχου ταυτότητας για το πρόγραμμα περιήγησης για να την εφαρμογή web](./media/active-directory-authentication-scenarios/web_browser_to_web_api.png)


#### <a name="description-of-protocol-flow"></a>Περιγραφή της ροής πρωτοκόλλου


1. Όταν ένας χρήστης επισκεφθεί της εφαρμογής και τις ανάγκες για να πραγματοποιήσετε είσοδο, θα ανακατευθύνεται μέσω μια αίτηση εισόδου για το τελικό σημείο ελέγχου ταυτότητας σε Azure AD.


2. Ο χρήστης που πραγματοποιεί είσοδο στη σελίδα εισόδου.


3. Εάν ο έλεγχος ταυτότητας είναι επιτυχής, Azure AD δημιουργεί ένα διακριτικό έλεγχο ταυτότητας και επιστρέφει μια απόκριση εισόδου στη διεύθυνση URL απάντηση της εφαρμογής που έχει ρυθμιστεί στην πύλη διαχείρισης του Azure. Για μια εφαρμογή παραγωγής, αυτή η διεύθυνση URL απάντηση πρέπει να είναι HTTPS. Το επιστρεφόμενο διακριτικό περιλαμβάνει αξιώσεων σχετικά με το χρήστη και Azure AD που απαιτούνται από την εφαρμογή για να επικυρώσει το διακριτικό.


4. Η εφαρμογή επικυρώσει το διακριτικό, χρησιμοποιώντας ένα δημόσιο κλειδί υπογραφής και πληροφορίες εκδότη διαθέσιμα από το έγγραφο Ομοσπονδία μετα-δεδομένων για Azure AD. Μετά την εφαρμογή επικυρώσει το διακριτικό, Azure AD ξεκινά μια νέα περίοδο λειτουργίας με το χρήστη. Αυτήν την περίοδο λειτουργίας επιτρέπει στο χρήστη για να αποκτήσετε πρόσβαση στην εφαρμογή μέχρι τη λήξη.


#### <a name="code-samples"></a>Δείγματα κώδικα


Ανατρέξτε στο θέμα δείγματα κώδικα για το πρόγραμμα περιήγησης Web σενάρια εφαρμογής Web. Και να τις ελέγχετε συχνά--προσθέτουμε νέες δείγματα πάντα. [Πρόγραμμα περιήγησης web σε εφαρμογή Web](active-directory-code-samples.md#web-browser-to-web-application).


#### <a name="registering"></a>Καταχώρηση


- Μία μισθωτή: Εάν δημιουργείτε μια εφαρμογή του μόνο για την εταιρεία σας, αυτό πρέπει να καταχωρούνται στον κατάλογο της εταιρείας σας, χρησιμοποιώντας την πύλη διαχείρισης του Azure.


- Πολλαπλή μισθωτή: Εάν δημιουργείτε μια εφαρμογή η οποία μπορεί να χρησιμοποιηθεί από χρήστες εκτός της εταιρείας σας, πρέπει να έχει εγγραφεί στο καταλόγου της εταιρείας σας, αλλά επίσης πρέπει να έχει εγγραφεί σε κατάλογο κάθε της εταιρείας που θα χρησιμοποιούν την εφαρμογή. Για να κάνετε την εφαρμογή σας διαθέσιμη στον κατάλογο τους, μπορείτε να συμπεριλάβετε μια διαδικασία εγγραφής για τους πελάτες σας που σας επιτρέπει να τη συγκατάθεσή σας για την εφαρμογή σας. Όταν κάνουν εγγραφή για την εφαρμογή σας, θα εμφανιστεί με ένα παράθυρο διαλόγου που εμφανίζει τα δικαιώματα που απαιτεί την εφαρμογή και, στη συνέχεια, την επιλογή για να δώσετε τη συγκατάθεσή σας. Ανάλογα με τα απαιτούμενα δικαιώματα, ο διαχειριστής στην εταιρεία άλλα ενδέχεται να απαιτείται για να σας δώσει τη συγκατάθεσή. Όταν συγκατάθεση του χρήστη ή διαχειριστή, η εφαρμογή έχει καταχωρηθεί στον κατάλογο τους. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Ενσωμάτωση εφαρμογών με το Azure Active Directory](active-directory-integrating-applications.md).


#### <a name="token-expiration"></a>Λήξη διακριτικού

Όταν λήξει η διάρκεια ζωής του διακριτικού εκδοθεί από Azure AD λήξη της περιόδου λειτουργίας του χρήστη. Η εφαρμογή σας μπορεί να συντομεύσετε αυτήν τη χρονική περίοδο, εάν θέλετε, όπως η έξοδος χρήστες με βάση μια περίοδο αδράνειας. Όταν λήξει η περίοδος λειτουργίας, ο χρήστης θα σας ζητηθεί να εισέλθετε ξανά.





### <a name="single-page-application-spa"></a>Μεμονωμένη σελίδα εφαρμογής (SPA)

Αυτή η ενότητα περιγράφει ελέγχου ταυτότητας για μια μεμονωμένη εφαρμογή σελίδας, που χρησιμοποιεί το Azure AD και την μη ρητή άδεια 2.0 διακριτικό εκχωρούν για την ασφάλιση του web Τερματισμός API ξανά. Συνήθως, μία μόνο σελίδα εφαρμογές είναι δομημένα ως επίπεδο παρουσίασης JavaScript (προσκηνίου) που εκτελείται στο πρόγραμμα περιήγησης και το ένα άκρο πίσω Web API που εκτελείται σε ένα διακομιστή και υλοποιεί επιχειρηματικής λογικής της εφαρμογής. Για να μάθετε περισσότερα σχετικά με την μη ρητή άδεια εκχώρηση και τη Βοήθεια, μπορείτε να αποφασίσετε αν είναι κατάλληλο για το σενάριό σας εφαρμογή, ανατρέξτε στο θέμα [Κατανόηση της ροής έμμεσα εκχώρηση OAuth2 στο Azure Active Directory](active-directory-dev-understanding-oauth2-implicit-grant.md).

Σε αυτό το σενάριο, όταν ο χρήστης που πραγματοποιεί είσοδο, την JavaScript εμπρός τελικές χρήσεις [βιβλιοθήκη ελέγχου ταυτότητας Active Directory για JavaScript (ADAL. JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) και την εκχώρηση μη ρητή άδεια για να αποκτήσετε ένα Αναγνωριστικό διακριτικό (id_token) από το Azure AD. Cached το διακριτικό και το πρόγραμμα-πελάτη επισυνάπτει στην πρόσκληση σε όπως και το διακριτικό φορέα κατά την πραγματοποίηση κλήσεων για το API Web πίσω τέλος, που προστατεύεται με χρήση του ενδιάμεσου λογισμικού OWIN. 
#### <a name="diagram"></a>Διάγραμμα

![Διάγραμμα μία μόνο σελίδα εφαρμογής](./media/active-directory-authentication-scenarios/single_page_app.png)

#### <a name="description-of-protocol-flow"></a>Περιγραφή της ροής πρωτοκόλλου

1. Ο χρήστης μεταβαίνει στην εφαρμογή web.


2. Η εφαρμογή επιστρέφει JavaScript προσκηνίου (επίπεδο παρουσίαση) στο πρόγραμμα περιήγησης.


3. Ο χρήστης ξεκινάει εισόδου, για παράδειγμα, κάνοντας κλικ σε ένα σύμβολο σε σύνδεση. Το πρόγραμμα περιήγησης αποστέλλει ΔΕΊΤΕ το τελικό σημείο εξουσιοδότησης Azure AD για να ζητήσετε από ένα διακριτικό Αναγνωριστικό. Αυτή η αίτηση περιλαμβάνει τη διεύθυνση URL Αναγνωριστικό και να απαντήσετε προγράμματος-πελάτη σε τις παραμέτρους ερωτήματος.


4. Azure AD επαληθεύει τη διεύθυνση URL απάντηση σε σχέση με καταχωρημένες απάντηση διεύθυνσης URL που έχει ρυθμιστεί στην πύλη διαχείρισης του Azure.


5. Ο χρήστης που πραγματοποιεί είσοδο στη σελίδα εισόδου.


6. Εάν ο έλεγχος ταυτότητας είναι επιτυχής, Azure AD δημιουργεί ένα διακριτικό Αναγνωριστικό και επιστρέφει ως τμήμα μιας διεύθυνσης URL (#) σε διεύθυνση URL της εφαρμογής απάντηση. Για μια εφαρμογή παραγωγής, αυτή η διεύθυνση URL απάντηση πρέπει να είναι HTTPS. Το επιστρεφόμενο διακριτικό περιλαμβάνει αξιώσεων σχετικά με το χρήστη και Azure AD που απαιτούνται από την εφαρμογή για να επικυρώσει το διακριτικό.


7. Ο κωδικός προγράμματος-πελάτη JavaScript που εκτελείται στο πρόγραμμα περιήγησης εξάγει το διακριτικό από την απάντηση για να χρησιμοποιήσετε στην ασφάλεια των κλήσεων για την εφαρμογή web Τερματισμός API ξανά.


8. Το πρόγραμμα περιήγησης κλήσεις της εφαρμογής web API πίσω τελειώνει με το διακριτικό πρόσβασης στην κεφαλίδα της εξουσιοδότησης.

#### <a name="code-samples"></a>Δείγματα κώδικα


Δείτε τα δείγματα κώδικα για μία μόνο σελίδα εφαρμογής (SPA) σενάρια. Φροντίστε να ελέγχετε συχνά--προσθέτουμε νέες δείγματα πάντα. [Μεμονωμένη σελίδα εφαρμογής (SPA)](active-directory-code-samples.md#single-page-application-spa).


#### <a name="registering"></a>Καταχώρηση


- Μία μισθωτή: Εάν δημιουργείτε μια εφαρμογή του μόνο για την εταιρεία σας, αυτό πρέπει να καταχωρούνται στον κατάλογο της εταιρείας σας, χρησιμοποιώντας την πύλη διαχείρισης του Azure.


- Πολλαπλή μισθωτή: Εάν δημιουργείτε μια εφαρμογή η οποία μπορεί να χρησιμοποιηθεί από χρήστες εκτός της εταιρείας σας, πρέπει να έχει εγγραφεί στο καταλόγου της εταιρείας σας, αλλά επίσης πρέπει να έχει εγγραφεί σε κατάλογο κάθε της εταιρείας που θα χρησιμοποιούν την εφαρμογή. Για να κάνετε την εφαρμογή σας διαθέσιμη στον κατάλογο τους, μπορείτε να συμπεριλάβετε μια διαδικασία εγγραφής για τους πελάτες σας που σας επιτρέπει να τη συγκατάθεσή σας για την εφαρμογή σας. Όταν κάνουν εγγραφή για την εφαρμογή σας, θα εμφανιστεί με ένα παράθυρο διαλόγου που εμφανίζει τα δικαιώματα που απαιτεί την εφαρμογή και, στη συνέχεια, την επιλογή για να δώσετε τη συγκατάθεσή σας. Ανάλογα με τα απαιτούμενα δικαιώματα, ο διαχειριστής στην εταιρεία άλλα ενδέχεται να απαιτείται για να σας δώσει τη συγκατάθεσή. Όταν συγκατάθεση του χρήστη ή διαχειριστή, η εφαρμογή έχει καταχωρηθεί στον κατάλογο τους. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Ενσωμάτωση εφαρμογών με το Azure Active Directory](active-directory-integrating-applications.md).

Μετά την εγγραφή της εφαρμογής, πρέπει να ρυθμιστεί ώστε να χρησιμοποιούν πρωτόκολλο έμμεσα εκχώρηση 2.0 OAuth. Από προεπιλογή, αυτό το πρωτόκολλο είναι απενεργοποιημένη για εφαρμογές. Για να ενεργοποιήσετε το πρωτόκολλο έμμεσα εκχώρηση OAuth2 για την εφαρμογή σας, κάντε λήψη του δήλωση εφαρμογής από την πύλη διαχείρισης του Azure, ορίστε την τιμή "oauth2AllowImplicitFlow" στην τιμή true και, στη συνέχεια, αποστείλετε το δήλωσης πίσω στην πύλη του. Για λεπτομερείς οδηγίες, ανατρέξτε στο θέμα [Ενεργοποίηση διακριτικό 2.0 έμμεσα εκχώρηση για μία μόνο σελίδα εφαρμογές](active-directory-integrating-applications.md).


#### <a name="token-expiration"></a>Λήξη διακριτικού

Όταν χρησιμοποιείτε ADAL.js για να διαχειριστείτε τον έλεγχο ταυτότητας με Azure AD, μπορείτε να επωφεληθείτε από πολλές δυνατότητες που διευκολύνουν την ανανέωση ενός διακριτικού έχει λήξει, καθώς και γρήγορα τα διακριτικά για επιπλέον web API πόροι που μπορεί να ονομάζεται από την εφαρμογή. Όταν ο χρήστης με επιτυχία πραγματοποιεί έλεγχο ταυτότητας με Azure AD, δημιουργείται μια περίοδος λειτουργίας με ασφάλεια με ένα cookie για το χρήστη μεταξύ του προγράμματος περιήγησης και Azure AD. Είναι σημαντικό να λάβετε υπόψη ότι η περίοδος λειτουργίας υπάρχει μεταξύ του χρήστη και Azure AD και δεν μεταξύ του χρήστη και της εφαρμογής web που εκτελείται στο διακομιστή. Όταν λήγει η ενός διακριτικού ADAL.js χρησιμοποιεί αυτήν την περίοδο λειτουργίας για να αποκτήσετε σιωπηρά έναν νέο κωδικό. Αυτό γίνεται με τη χρήση ενός κρυφού iFrame για να στέλνετε και να λαμβάνετε την αίτηση που χρησιμοποιεί το πρωτόκολλο έμμεσα εκχώρηση OAuth. ADAL.js επίσης να χρησιμοποιήσετε το ίδιο μηχανισμό απόκτησης σιωπηρά διακριτικά πρόσβασης από το Azure AD για άλλες web API πόρους που τις κλήσεις εφαρμογής με την προϋπόθεση ότι αυτοί οι πόροι υποστήριξης σταυρό origin πόρων κοινής χρήσης (CORS), έχετε καταχωρήσει στον κατάλογο του χρήστη, καθώς και τυχόν απαιτείται συγκατάθεση δόθηκε από το χρήστη κατά την είσοδο.


### <a name="native-application-to-web-api"></a>Εγγενή εφαρμογή για να API Web


Αυτή η ενότητα περιγράφει μια εγγενή εφαρμογή που καλεί μια API web εκ μέρους ενός χρήστη. Αυτό το σενάριο είναι ενσωματωμένη στην, πληκτρολογήστε εκχώρηση κώδικα εξουσιοδότησης διακριτικό 2.0 με μια δημόσια προγράμματος-πελάτη, όπως περιγράφεται στην ενότητα 4.1 της [προδιαγραφής διακριτικό 2.0](http://tools.ietf.org/html/rfc6749). Τα εγγενή εφαρμογή λαμβάνει ένα διακριτικό πρόσβασης για το χρήστη, χρησιμοποιώντας το πρωτόκολλο διακριτικό 2.0. Αυτό το διακριτικό πρόσβασης, στη συνέχεια, θα σταλεί στην αίτηση για το API, το οποίο επιτρέπει στο χρήστη και επιστρέφει την επιθυμητή πόρων στο web.

#### <a name="diagram"></a>Διάγραμμα

![Εγγενή εφαρμογή για να API διαγράμματος στο Web](./media/active-directory-authentication-scenarios/native_app_to_web_api.png)

#### <a name="authentication-flow-for-native-application-to-api"></a>Έλεγχος ταυτότητας ροής για εγγενή εφαρμογή για να API

#### <a name="description-of-protocol-flow"></a>Περιγραφή της ροής πρωτοκόλλου


Εάν χρησιμοποιείτε τις βιβλιοθήκες ελέγχου ταυτότητας AD, περισσότερες από τις λεπτομέρειες πρωτοκόλλου περιγράφεται παρακάτω αντιμετωπίζονται για εσάς, όπως το αναδυόμενο παράθυρο προγράμματος περιήγησης, διακριτικού σε cache και διαχείριση των διακριτικά ανανέωσης.

1. Χρήση ενός προγράμματος περιήγησης αναδυόμενο, την εγγενή εφαρμογή κάνει μια αίτηση στο τελικό σημείο εξουσιοδότησης στο Azure AD. Αυτή η αίτηση περιλαμβάνει το Αναγνωριστικό υπολογιστή-πελάτη και την ανακατεύθυνση URI της εγγενούς εφαρμογής όπως φαίνεται στην πύλη διαχείρισης, και την εφαρμογή Αναγνωριστικό URI για το API web. Εάν ο χρήστης δεν έχει ήδη πραγματοποιήσει είσοδο, θα σας ζητηθεί να εισέλθετε ξανά


2. Azure AD πραγματοποιεί έλεγχο ταυτότητας χρήστη. Εάν πρόκειται για μια εφαρμογή πολλών μισθωτή και συγκατάθεση είναι απαραίτητο να χρησιμοποιήσετε την εφαρμογή, ο χρήστης θα πρέπει να πραγματοποιούν συγκατάθεση εάν αυτές δεν το έχετε κάνει ήδη. Μετά την παροχή της άδειας και κατά την επιτυχή έλεγχο ταυτότητας, Azure AD θέματα μια απάντηση κώδικα εξουσιοδότησης ξανά σε URI ανακατεύθυνσης την εφαρμογή-πελάτη.


3. Όταν Azure AD ζητήματα μια απόκριση κώδικα εξουσιοδότησης προς την ανακατεύθυνση URI, την εφαρμογή-πελάτη σταματά αλληλεπίδραση προγράμματος περιήγησης και εξάγει τον κωδικό εξουσιοδότησης από την απάντηση. Με αυτόν τον κωδικό εξουσιοδότησης, την εφαρμογή-πελάτη στέλνει μια πρόσκληση σε Azure AD διακριτικού τελικό σημείο που περιλαμβάνει τον κωδικό εξουσιοδότησης, λεπτομέρειες σχετικά με την εφαρμογή-πελάτη (Αναγνωριστικό υπολογιστή-πελάτη και redirect URI) και την επιθυμητή πόρων (εφαρμογή Αναγνωριστικό URI για το API web).


4. Τον κωδικό εξουσιοδότησης και πληροφορίες σχετικά με το API web και εφαρμογή προγράμματος-πελάτη επικυρώνονται από Azure AD. Κατά την επιτυχημένη επικύρωση, Azure AD επιστρέφει δύο διακριτικά: ένα διακριτικό πρόσβασης JWT και ενός διακριτικού ανανέωση JWT. Επιπλέον, Azure AD επιστρέφει βασικές πληροφορίες για το χρήστη, όπως το εμφανιζόμενο όνομα και μισθωτή αναγνωριστικού.


5. Μέσω HTTPS, η εφαρμογή προγράμματος-πελάτη χρησιμοποιεί το επιστρεφόμενο διακριτικό πρόσβασης JWT για να προσθέσετε τη συμβολοσειρά JWT με ονομασία "Φορέα" στην κεφαλίδα της εξουσιοδότησης της αίτησης για το API στο web. Το API web, στη συνέχεια, επικυρώσει το διακριτικό JWT και εάν η επικύρωση είναι επιτυχής, επιστρέφει την επιθυμητή πόρων.


6. Όταν λήξει το διακριτικό πρόσβασης, την εφαρμογή-πελάτη θα λάβετε ένα μήνυμα σφάλματος που δηλώνει ο χρήστης πρέπει να ελέγχουν την ταυτότητα ξανά. Εάν η εφαρμογή έχει ένα έγκυρο ανανέωση διακριτικό, μπορεί να χρησιμοποιηθεί για να αποκτήσετε έναν νέο κωδικό πρόσβασης χωρίς ερώτηση στο χρήστη για να συνδεθείτε ξανά. Εάν λήξει το διακριτικό ανανέωση, η εφαρμογή θα πρέπει να αλληλεπιδραστικά πάλι τον έλεγχο ταυτότητας χρήστη.


> [AZURE.NOTE] Το διακριτικό ανανέωση εκδοθεί από Azure AD μπορεί να χρησιμοποιηθεί για πρόσβαση σε πολλούς πόρους. Για παράδειγμα, εάν έχετε μια εφαρμογή προγράμματος-πελάτη που έχει δικαίωμα να καλέσετε δύο web APIs, το διακριτικό ανανέωσης μπορεί να χρησιμοποιηθεί για να αποκτήσετε διακριτικού για τα άλλα API web καθώς και μια πρόσβαση.


#### <a name="code-samples"></a>Δείγματα κώδικα


Δείτε τα δείγματα κώδικα για εγγενής της εφαρμογής Web API σενάρια. Και να τις ελέγχετε συχνά--προσθέτουμε νέες δείγματα πάντα. [Εγγενή εφαρμογή για να Web API](active-directory-code-samples.md#native-application-to-web-api).


#### <a name="registering"></a>Καταχώρηση


- Μία μισθωτή: Τόσο τα εγγενή εφαρμογών και web API πρέπει να έχει εγγραφεί στο ίδιο κατάλογο στο Azure AD. Το API web μπορεί να ρυθμιστεί για να εμφανίσετε ένα σύνολο δικαιωμάτων που χρησιμοποιούνται για να περιορίσετε την εγγενή εφαρμογή access για τους πόρους. Η εφαρμογή προγράμματος-πελάτη, στη συνέχεια, επιλέγει τα δικαιώματα που θέλετε από το αναπτυσσόμενο μενού "Δικαιώματα σε άλλες εφαρμογές" στην πύλη διαχείρισης του Azure.


- Πολλαπλή μισθωτή: Πρώτα, την εγγενή εφαρμογή μόνο ποτέ καταχωρηθεί σε ο προγραμματιστής ή τον κατάλογο του publisher. Δεύτερον, την εγγενή εφαρμογή έχει ρυθμιστεί για να υποδείξετε ότι τα δικαιώματα που απαιτεί να λειτουργεί. Αυτή η λίστα απαιτούμενα δικαιώματα εμφανίζεται σε ένα παράθυρο διαλόγου όταν ο χρήστης ή διαχειριστής στον κατάλογο προορισμού παρέχει τη συγκατάθεσή με την εφαρμογή, η οποία κάνει διαθέσιμο σε οργανισμού τους. Ορισμένες εφαρμογές απαιτούν δικαιώματα μόνο σε επίπεδο χρήστη, τα οποία μπορεί να συγκατάθεση από οποιονδήποτε χρήστη στον οργανισμό για να. Άλλες εφαρμογές απαιτούν δικαιώματα επιπέδου διαχειριστή, τα οποία δεν είναι δυνατό να συγκατάθεση ενός χρήστη στην εταιρεία να. Μόνο ένας διαχειριστής καταλόγου να δώσετε συγκατάθεση για τις εφαρμογές που απαιτούν αυτό το επίπεδο δικαιωμάτων. Όταν ο χρήστης ή ο διαχειριστής συγκατάθεση, μόνο το API web έχει καταχωρηθεί στον κατάλογο τους. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Ενσωμάτωση εφαρμογών με το Azure Active Directory](active-directory-integrating-applications.md).


#### <a name="token-expiration"></a>Λήξη διακριτικού


Όταν την εγγενή εφαρμογή χρησιμοποιεί τον κώδικά της εξουσιοδότησης για να λάβετε μια πρόσβαση JWT διακριτικού, λαμβάνει επίσης ενός διακριτικού ανανέωση JWT. Όταν λήξει το διακριτικό πρόσβασης, το διακριτικό ανανέωσης μπορεί να χρησιμοποιηθεί για εκ νέου τον έλεγχο ταυτότητας χρήστη χωρίς να χρειάζεται να συνδεθείτε ξανά. Αυτό το διακριτικό ανανέωση, στη συνέχεια, χρησιμοποιείται για τον έλεγχο ταυτότητας χρήστη, που έχει ως αποτέλεσμα ένα νέο κωδικό πρόσβασης και το διακριτικό ανανέωσης.





### <a name="web-application-to-web-api"></a>Εφαρμογή Web στο Web API


Αυτή η ενότητα περιγράφει μια εφαρμογή web που πρέπει να λάβετε πόρους από ένα API web. Σε αυτό το σενάριο, υπάρχουν δύο τύποι ταυτότητας που μπορούν να χρησιμοποιούν την εφαρμογή web για τον έλεγχο ταυτότητας και να καλέσετε το API web: ταυτότητα εφαρμογής ή μια ταυτότητα χρήστη ανάθεση.

*Ταυτότητα της εφαρμογής:* Αυτό το σενάριο χρησιμοποιεί 2.0 διακριτικό εκχώρηση διαπιστευτήρια προγράμματος-πελάτη για τον έλεγχο ταυτότητας με την εφαρμογή και να αποκτάτε πρόσβαση στο web API. Όταν χρησιμοποιείτε μια εφαρμογή ταυτότητα, web API μόνο μπορεί να εντοπίσει ότι η εφαρμογή web κλήση, ως web API δεν λαμβάνει πληροφορίες σχετικά με το χρήστη. Εάν η εφαρμογή λαμβάνει πληροφορίες σχετικά με το χρήστη, θα σταλεί μέσω του πρωτοκόλλου εφαρμογής και δεν είναι υπογεγραμμένο από Azure AD. Το API web εμπιστεύεται ότι η εφαρμογή web με έλεγχο ταυτότητας χρήστη. Για αυτόν το λόγο, αυτό το μοτίβο ονομάζεται μια αξιόπιστη υποσυστήματος.

*Πληρεξούσιοι ταυτότητα χρήστη:* Αυτό το σενάριο μπορεί να πραγματοποιηθεί με δύο τρόπους: σύνδεση OpenID και εκχώρηση κώδικα εξουσιοδότησης διακριτικό 2.0 με ένα πρόγραμμα-πελάτη εμπιστευτικές. Η εφαρμογή web λαμβάνει ένα διακριτικό πρόσβασης για το χρήστη, το οποίο αποδείξει για το API που με επιτυχία έλεγχος ταυτότητας του χρήστη στην εφαρμογή web και ότι η εφαρμογή web δεν μπορούν να λαμβάνουν μια ταυτότητα χρήστη πληρεξούσιου για να καλέσετε το API web στο web. Αυτό το διακριτικό πρόσβασης θα σταλεί στην αίτηση για το API, το οποίο επιτρέπει στο χρήστη και επιστρέφει την επιθυμητή πόρων στο web.

#### <a name="diagram"></a>Διάγραμμα

![Εφαρμογή Web διάγραμμα Web API](./media/active-directory-authentication-scenarios/web_app_to_web_api.png)



#### <a name="description-of-protocol-flow"></a>Περιγραφή της ροής πρωτοκόλλου

Τόσο η ταυτότητα της εφαρμογής και τύπων ταυτότητα χρήστη ανάθεση περιγράφονται στην παρακάτω ροή. Η βασική διαφορά μεταξύ τους είναι ότι η ταυτότητα χρήστη ανάθεση πρώτα πρέπει να αποκτήσετε έναν κωδικό εξουσιοδότησης πριν από το χρήστη να εισόδου και να αποκτήσει πρόσβαση στο Web API.

##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a>Εκχώρηση διαπιστευτήρια ταυτότητα της εφαρμογής με το διακριτικό 2.0 προγράμματος-πελάτη

1. Ένας χρήστης έχει συνδεθεί στη Azure AD στην εφαρμογή web (ανατρέξτε στο θέμα πρόγραμμα [Περιήγησης Web σε εφαρμογή Web](#web-browser-to-web-application) παραπάνω).


2. Η εφαρμογή web πρέπει να αποκτήσετε ένα διακριτικό πρόσβασης, έτσι ώστε να μπορούν να τον έλεγχο ταυτότητας για το API web και να ανακτήσετε την επιθυμητή πόρων. Κάνει μια αίτηση Azure AD διακριτικού τελικό σημείο, παρέχοντας τα διαπιστευτήρια, Αναγνωριστικό υπολογιστή-πελάτη και την εφαρμογή web του API URI Αναγνωριστικό.


3. Azure AD πραγματοποιεί έλεγχο ταυτότητας της εφαρμογής και επιστρέφει ένα διακριτικό πρόσβασης JWT που χρησιμοποιείται για να καλέσετε το API web.


4. Μέσω HTTPS, η εφαρμογή web χρησιμοποιεί το επιστρεφόμενο διακριτικό πρόσβασης JWT για να προσθέσετε τη συμβολοσειρά JWT με ονομασία "Φορέα" στην κεφαλίδα της εξουσιοδότησης της αίτησης για το API στο web. Το API web, στη συνέχεια, επικυρώσει το διακριτικό JWT και εάν η επικύρωση είναι επιτυχής, επιστρέφει την επιθυμητή πόρων.

##### <a name="delegated-user-identity-with-openid-connect"></a>Σύνδεση ταυτότητα χρήστη ανάθεση με OpenID

1. Ένας χρήστης είναι συνδεδεμένος στο σε μια εφαρμογή web χρησιμοποιώντας Azure AD (ανατρέξτε στην ενότητα [Πρόγραμμα περιήγησης Web σε εφαρμογή Web](#web-browser-to-web-application) παραπάνω). Εάν ο χρήστης της εφαρμογής web δεν έχει ακόμη δεχθεί να επιτρέπει στην εφαρμογή web για να καλέσετε το API web εκ μέρους του, ο χρήστης θα πρέπει να τη συγκατάθεσή σας. Η εφαρμογή θα εμφανίσει τα δικαιώματα που απαιτεί και εάν κάποιο από αυτά είναι τα δικαιώματα επιπέδου διαχειριστή, κανονική χρήστη στον κατάλογο δεν θα μπορείτε να τη συγκατάθεσή σας. Αυτή η διαδικασία συγκατάθεση ισχύει μόνο για εφαρμογές πολλών μισθωτών, όχι μόνο μισθωτή εφαρμογές, όπως η εφαρμογή θα έχετε ήδη τα απαραίτητα δικαιώματα. Όταν ο χρήστης πραγματοποιήσει είσοδο, την εφαρμογή web έλαβε ένα Αναγνωριστικό διακριτικό με πληροφορίες σχετικά με το χρήστη, καθώς και έναν κωδικό εξουσιοδότησης.


2. Χρησιμοποιώντας τον κωδικό εξουσιοδότησης εκδοθεί από Azure AD, η εφαρμογή web στέλνει μια πρόσκληση σε Azure AD διακριτικού τελικό σημείο που περιλαμβάνει τον κωδικό εξουσιοδότησης, λεπτομέρειες σχετικά με την εφαρμογή-πελάτη (Αναγνωριστικό υπολογιστή-πελάτη και redirect URI) και την επιθυμητή πόρων (εφαρμογή Αναγνωριστικό URI για το API web).


3. Τον κωδικό εξουσιοδότησης και πληροφορίες σχετικά με την εφαρμογή web και το API web επικυρώνονται από Azure AD. Κατά την επιτυχημένη επικύρωση, Azure AD επιστρέφει δύο διακριτικά: ένα διακριτικό πρόσβασης JWT και ενός διακριτικού ανανέωση JWT.


4. Μέσω HTTPS, η εφαρμογή web χρησιμοποιεί το επιστρεφόμενο διακριτικό πρόσβασης JWT για να προσθέσετε τη συμβολοσειρά JWT με ονομασία "Φορέα" στην κεφαλίδα της εξουσιοδότησης της αίτησης για το API στο web. Το API web, στη συνέχεια, επικυρώσει το διακριτικό JWT και εάν η επικύρωση είναι επιτυχής, επιστρέφει την επιθυμητή πόρων.

##### <a name="delegated-user-identity-with-oauth-20-authorization-code-grant"></a>Ταυτότητα χρήστη ανάθεση με εκχώρηση κώδικα εξουσιοδότησης διακριτικό 2.0

1. Ένας χρήστης έχει ήδη πραγματοποιήσει είσοδο σε μια εφαρμογή web, του οποίου τον έλεγχο ταυτότητας μηχανισμό είναι ανεξάρτητο από Azure AD.


2. Η εφαρμογή web απαιτεί έναν κωδικό εξουσιοδότησης για να αποκτήσετε ένα διακριτικό πρόσβασης, ώστε να εκδίδει μια αίτηση μέσω του προγράμματος περιήγησης Azure AD εξουσιοδότησης τελικό σημείο, παρέχοντας το Αναγνωριστικό υπολογιστή-πελάτη και ανακατευθύνει URI για την εφαρμογή web μετά την επιτυχή έλεγχο ταυτότητας. Ο χρήστης που πραγματοποιεί είσοδο σε Azure AD.


3. Εάν ο χρήστης της εφαρμογής web δεν έχει ακόμη δεχθεί να επιτρέπει στην εφαρμογή web για να καλέσετε το API web εκ μέρους του, ο χρήστης θα πρέπει να τη συγκατάθεσή σας. Η εφαρμογή θα εμφανίσει τα δικαιώματα που απαιτεί και εάν κάποιο από αυτά είναι τα δικαιώματα επιπέδου διαχειριστή, κανονική χρήστη στον κατάλογο δεν θα μπορείτε να τη συγκατάθεσή σας. Αυτή η διαδικασία συγκατάθεση ισχύει μόνο για εφαρμογές πολλών μισθωτών, όχι μόνο μισθωτή εφαρμογές, όπως η εφαρμογή θα έχετε ήδη τα απαραίτητα δικαιώματα.


4. Αφού ο χρήστης έχει δεχθεί, η εφαρμογή web λαμβάνει τον κωδικό εξουσιοδότησης που χρειάζεται να αποκτήσετε ένα διακριτικό πρόσβασης.


5. Χρησιμοποιώντας τον κωδικό εξουσιοδότησης εκδοθεί από Azure AD, η εφαρμογή web στέλνει μια πρόσκληση σε Azure AD διακριτικού τελικό σημείο που περιλαμβάνει τον κωδικό εξουσιοδότησης, λεπτομέρειες σχετικά με την εφαρμογή-πελάτη (Αναγνωριστικό υπολογιστή-πελάτη και redirect URI) και την επιθυμητή πόρων (εφαρμογή Αναγνωριστικό URI για το API web).


6. Τον κωδικό εξουσιοδότησης και πληροφορίες σχετικά με την εφαρμογή web και το API web επικυρώνονται από Azure AD. Κατά την επιτυχημένη επικύρωση, Azure AD επιστρέφει δύο διακριτικά: ένα διακριτικό πρόσβασης JWT και ενός διακριτικού ανανέωση JWT.


7. Μέσω HTTPS, η εφαρμογή web χρησιμοποιεί το επιστρεφόμενο διακριτικό πρόσβασης JWT για να προσθέσετε τη συμβολοσειρά JWT με ονομασία "Φορέα" στην κεφαλίδα της εξουσιοδότησης της αίτησης για το API στο web. Το API web, στη συνέχεια, επικυρώσει το διακριτικό JWT και εάν η επικύρωση είναι επιτυχής, επιστρέφει την επιθυμητή πόρων.

#### <a name="code-samples"></a>Δείγματα κώδικα

Δείτε τα δείγματα κώδικα για την εφαρμογή Web για το API Web σενάρια. Και να τις ελέγχετε συχνά--προσθέτουμε νέες δείγματα πάντα. Web [εφαρμογή Web API](active-directory-code-samples.md#web-application-to-web-api).


#### <a name="registering"></a>Καταχώρηση

- Μία μισθωτή: Τόσο για την ταυτότητα της εφαρμογής και ανάθεση χρήστη ταυτότητα περιπτώσεις, η εφαρμογή web και το API web πρέπει να καταχωρούνται στον ίδιο κατάλογο στο Azure AD. Το API web μπορεί να ρυθμιστεί για να εμφανίσετε ένα σύνολο δικαιωμάτων που χρησιμοποιούνται για να περιορίσετε την πρόσβαση της εφαρμογής web για τους πόρους. Εάν χρησιμοποιείται ένας τύπος ταυτότητας χρήστη ανάθεση, της εφαρμογής web πρέπει να επιλέξετε τα δικαιώματα που θέλετε από το αναπτυσσόμενο μενού "Δικαιώματα σε άλλες εφαρμογές" στην πύλη διαχείρισης του Azure. Αυτό το βήμα δεν απαιτείται εάν ο τύπος ταυτότητα της εφαρμογής που χρησιμοποιείται.


- Πολλαπλή μισθωτή: Πρώτα, η εφαρμογή web έχει ρυθμιστεί για να υποδείξετε ότι τα δικαιώματα που απαιτεί να λειτουργεί. Αυτή η λίστα απαιτούμενα δικαιώματα εμφανίζεται σε ένα παράθυρο διαλόγου όταν ο χρήστης ή διαχειριστής στον κατάλογο προορισμού παρέχει τη συγκατάθεσή με την εφαρμογή, η οποία κάνει διαθέσιμο σε οργανισμού τους. Ορισμένες εφαρμογές απαιτούν δικαιώματα μόνο σε επίπεδο χρήστη, τα οποία μπορεί να συγκατάθεση από οποιονδήποτε χρήστη στον οργανισμό για να. Άλλες εφαρμογές απαιτούν δικαιώματα επιπέδου διαχειριστή, τα οποία δεν είναι δυνατό να συγκατάθεση ενός χρήστη στην εταιρεία να. Μόνο ένας διαχειριστής καταλόγου να δώσετε συγκατάθεση για τις εφαρμογές που απαιτούν αυτό το επίπεδο δικαιωμάτων. Όταν συγκατάθεση του χρήστη ή διαχειριστή, η εφαρμογή web και το API web και τα δύο καταχωρούνται στον κατάλογο τους.

#### <a name="token-expiration"></a>Λήξη διακριτικού

Όταν η εφαρμογή web χρησιμοποιεί τον κώδικά της εξουσιοδότησης για να λάβετε μια πρόσβαση JWT διακριτικού, λαμβάνει επίσης ενός διακριτικού ανανέωση JWT. Όταν λήξει το διακριτικό πρόσβασης, το διακριτικό ανανέωσης μπορεί να χρησιμοποιηθεί για εκ νέου τον έλεγχο ταυτότητας χρήστη χωρίς να χρειάζεται να συνδεθείτε ξανά. Αυτό το διακριτικό ανανέωση, στη συνέχεια, χρησιμοποιείται για τον έλεγχο ταυτότητας χρήστη, που έχει ως αποτέλεσμα ένα νέο κωδικό πρόσβασης και το διακριτικό ανανέωσης.


### <a name="daemon-or-server-application-to-web-api"></a>Μονού ή εφαρμογή διακομιστή για API Web


Αυτή η ενότητα περιγράφει μια εφαρμογή μονού ή server που πρέπει να λάβετε πόρους από ένα API web. Υπάρχουν δύο δευτερεύουσες σενάρια που ισχύουν για αυτήν την ενότητα: μια μονού που πρέπει να καλέσετε μια web API, ενσωματωμένη σε τύπο εκχώρηση διαπιστευτήρια 2.0 διακριτικό προγράμματος-πελάτη; και μια εφαρμογή διακομιστή (όπως ένα API web) που πρέπει να καλέσετε μια API, δημιουργείται στο διακριτικό 2.0 On-Behalf-Of πρόχειρη προδιαγραφή web.

Για το σενάριο όταν μια εφαρμογή υπηρεσίας πρέπει να καλέσετε μια web API, είναι σημαντικό να κατανοήσετε μερικά πράγματα. Πρώτα, παρέμβαση του χρήστη δεν είναι δυνατή με μια εφαρμογή υπηρεσίας, που απαιτεί η εφαρμογή να έχει το δικό της ταυτότητας. Ένα παράδειγμα μιας εφαρμογής υπηρεσίας είναι μια μαζική εργασία ή μια υπηρεσία λειτουργικό σύστημα που εκτελείται στο παρασκήνιο. Αυτός ο τύπος της εφαρμογής ζητά ένα διακριτικό πρόσβασης χρησιμοποιώντας την ταυτότητα της εφαρμογής και παρουσίαση του προγράμματος-πελάτη Αναγνωριστικό, διαπιστευτηρίων (κωδικός πρόσβασης ή πιστοποιητικό) και η εφαρμογή Αναγνωριστικό URI για Azure AD. Μετά την επιτυχή έλεγχο ταυτότητας, το μονού λαμβάνει ένα διακριτικό πρόσβασης από το Azure AD, που χρησιμοποιείται, στη συνέχεια, για να καλέσετε το API web.

Για το σενάριο όταν μια εφαρμογή διακομιστή πρέπει να καλέσετε μια web API, είναι χρήσιμο να χρησιμοποιήσετε ένα παράδειγμα. Φανταστείτε ότι ένας χρήστης έχει ελεγχθεί η ταυτότητά σε μια εφαρμογή εγγενών και αυτή η εφαρμογή εγγενούς πρέπει να καλέσετε μια API web. Azure AD θέματα ένα διακριτικό πρόσβασης JWT για να καλέσετε το API web. Εάν το API web πρέπει να καλέσετε API web άλλο ροής, μπορεί να χρησιμοποιήσει τη ροή σε λογαριασμό-του για να αναθέσετε την ταυτότητα του χρήστη και τον έλεγχο ταυτότητας στο Web δευτερεύουσες API.

#### <a name="diagram"></a>Διάγραμμα

![Μονού ή εφαρμογή διακομιστή στο διάγραμμα Web API](./media/active-directory-authentication-scenarios/daemon_server_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a>Περιγραφή της ροής πρωτοκόλλου

##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a>Εκχώρηση διαπιστευτήρια ταυτότητα της εφαρμογής με το διακριτικό 2.0 προγράμματος-πελάτη

1. Πρώτα, η εφαρμογή του διακομιστή πρέπει να τον έλεγχο ταυτότητας με Azure AD ως μόνη της, χωρίς αλληλεπίδραση human όπως ένα αλληλεπιδραστικό εισόδου στο παράθυρο διαλόγου. Κάνει μια αίτηση Azure AD διακριτικού τελικό σημείο, παρέχοντας τα διαπιστευτήρια, Αναγνωριστικό υπολογιστή-πελάτη και η εφαρμογή URI Αναγνωριστικό.


2. Azure AD πραγματοποιεί έλεγχο ταυτότητας της εφαρμογής και επιστρέφει ένα διακριτικό πρόσβασης JWT που χρησιμοποιείται για να καλέσετε το API web.


3. Μέσω HTTPS, η εφαρμογή web χρησιμοποιεί το επιστρεφόμενο διακριτικό πρόσβασης JWT για να προσθέσετε τη συμβολοσειρά JWT με ονομασία "Φορέα" στην κεφαλίδα της εξουσιοδότησης της αίτησης για το API στο web. Το API web, στη συνέχεια, επικυρώσει το διακριτικό JWT και εάν η επικύρωση είναι επιτυχής, επιστρέφει την επιθυμητή πόρων.


##### <a name="delegated-user-identity-with-oauth-20-on-behalf-of-draft-specification"></a>Ταυτότητα χρήστη ανάθεση με το διακριτικό 2.0 στο λογαριασμό-του Πρόχειρου προδιαγραφή

Η ροή αναφέρονται παρακάτω προϋποθέτει ότι ένας χρήστης έχει γίνει έλεγχος ταυτότητας σε άλλη εφαρμογή (όπως μια εγγενή εφαρμογή) και την ταυτότητα χρήστη έχει χρησιμοποιηθεί για να αποκτήσετε ένα διακριτικό πρόσβασης για το πρώτο επίπεδο web API.

1. Τα εγγενή εφαρμογή στέλνει το διακριτικό πρόσβασης για το πρώτο επίπεδο web API.


2. Το API web πρώτης επιπέδων στέλνει μια πρόσκληση σε Azure AD διακριτικού τελικό σημείο, παρέχοντας του προγράμματος-πελάτη Αναγνωριστικό και τα διαπιστευτήρια, καθώς και διακριτικό πρόσβασης του χρήστη. Επιπλέον, η αίτηση αποστέλλεται με ένα on_behalf_of παράμετρο που υποδηλώνει το web API ζητά νέα διακριτικών για να καλέσετε μια API ροής web εκ μέρους του αρχικού χρήστη.


3. Azure AD επαληθεύει ότι ένα JWT ανανέωση διακριτικό στο Web πρώτης επιπέδων API web πρώτης επιπέδων API έχει δικαιώματα για να αποκτήσετε πρόσβαση στο web δευτερεύουσες API και επικυρώσει την αίτηση, επιστρέφει ένα διακριτικό πρόσβασης JWT και.


4. Μέσω HTTPS, το API web πρώτης επιπέδων κλήσεων, στη συνέχεια, το API web δευτερεύουσες προσαρτώντας τη συμβολοσειρά διακριτικού στην κεφαλίδα της εξουσιοδότησης στην πρόσκληση σε. Το πρώτο επίπεδο web API να συνεχίσετε για να καλέσετε το API web δεύτερου επιπέδου, με την προϋπόθεση ότι το διακριτικό πρόσβασης και ανανέωση διακριτικά είναι έγκυρα.

#### <a name="code-samples"></a>Δείγματα κώδικα

Δείτε τα δείγματα κώδικα για μονού ή εφαρμογή διακομιστή για το API Web σενάρια. Και να τις ελέγχετε συχνά--προσθέτουμε νέες δείγματα πάντα. [Διακομιστής ή εφαρμογή υπηρεσίας στο Web API](active-directory-code-samples.md#server-or-daemon-application-to-web-api)

#### <a name="registering"></a>Καταχώρηση

- Μία μισθωτή: Τόσο για την ταυτότητα της εφαρμογής και ανάθεση χρήστη ταυτότητα περιπτώσεις, η εφαρμογή μονού ή server πρέπει να καταχωρούνται στον ίδιο κατάλογο στο Azure AD. Το API web μπορεί να ρυθμιστεί για να εμφανίσετε ένα σύνολο δικαιωμάτων που χρησιμοποιούνται για να περιορίσετε το μονού ή του διακομιστή πρόσβασης για τους πόρους. Εάν χρησιμοποιείται ένας τύπος ταυτότητας ανάθεση χρήστη, η εφαρμογή του διακομιστή πρέπει να επιλέξετε τα δικαιώματα που θέλετε από το αναπτυσσόμενο μενού "Δικαιώματα σε άλλες εφαρμογές" στην πύλη διαχείρισης του Azure. Αυτό το βήμα δεν απαιτείται εάν ο τύπος ταυτότητα της εφαρμογής που χρησιμοποιείται.


- Πολλών μισθωτή: Πρώτα, η εφαρμογή μονού ή server έχει ρυθμιστεί για να υποδείξετε ότι τα δικαιώματα που απαιτούνται για να είναι λειτουργική. Αυτή η λίστα απαιτούμενα δικαιώματα εμφανίζεται σε ένα παράθυρο διαλόγου όταν ο χρήστης ή διαχειριστής στον κατάλογο προορισμού παρέχει τη συγκατάθεσή με την εφαρμογή, η οποία κάνει διαθέσιμο σε οργανισμού τους. Ορισμένες εφαρμογές απαιτούν δικαιώματα μόνο σε επίπεδο χρήστη, τα οποία μπορεί να συγκατάθεση από οποιονδήποτε χρήστη στον οργανισμό για να. Άλλες εφαρμογές απαιτούν δικαιώματα επιπέδου διαχειριστή, τα οποία δεν είναι δυνατό να συγκατάθεση ενός χρήστη στην εταιρεία να. Μόνο ένας διαχειριστής καταλόγου να δώσετε συγκατάθεση για τις εφαρμογές που απαιτούν αυτό το επίπεδο δικαιωμάτων. Όταν ο χρήστης ή ο διαχειριστής συγκατάθεση, και τα δύο από το web APIs καταχωρηθεί στον κατάλογο τους.

#### <a name="token-expiration"></a>Λήξη διακριτικού

Κατά την πρώτη εφαρμογή χρησιμοποιεί τον κώδικά της εξουσιοδότησης για να λάβετε μια πρόσβαση JWT διακριτικού, λαμβάνει επίσης ενός διακριτικού ανανέωση JWT. Όταν λήξει το διακριτικό πρόσβασης, το διακριτικό ανανέωσης μπορεί να χρησιμοποιηθεί για εκ νέου τον έλεγχο ταυτότητας χρήστη χωρίς ερώτηση για τα διαπιστευτήρια. Αυτό το διακριτικό ανανέωση, στη συνέχεια, χρησιμοποιείται για τον έλεγχο ταυτότητας χρήστη, που έχει ως αποτέλεσμα ένα νέο κωδικό πρόσβασης και το διακριτικό ανανέωσης.

## <a name="see-also"></a>Δείτε επίσης

[Οδηγός καταλόγου Azure Active Directory για προγραμματιστές](active-directory-developers-guide.md)

[Δείγματα κώδικα καταλόγου Azure Active Directory](active-directory-code-samples.md)

[Σημαντικές πληροφορίες σχετικά με την είσοδο αναστροφής κλειδιού στο Azure AD](active-directory-signing-key-rollover.md)

[Διακριτικό 2.0 στο Azure AD](https://msdn.microsoft.com/library/azure/dn645545.aspx)
