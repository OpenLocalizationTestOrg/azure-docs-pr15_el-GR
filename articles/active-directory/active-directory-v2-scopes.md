<properties
    pageTitle="Azure AD v2.0 εύρους, δικαιώματα και συγκατάθεση | Microsoft Azure"
    description="Μια περιγραφή της άδειας σε το τελικό σημείο v2.0 Azure AD, συμπεριλαμβανομένων των εύρους, δικαιώματα και συγκατάθεση."
    services="active-directory"
    documentationCenter=""
    authors="dstrockis"
    manager="mbaldwin"
    editor=""/>

<tags
    ms.service="active-directory"
    ms.workload="identity"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="09/30/2016"
    ms.author="dastrock"/>

# <a name="scopes-permissions--consent-in-the-v20-endpoint"></a>Εύρος, δικαιώματα και συγκατάθεση το τελικό σημείο v2.0

Εφαρμογές που ενοποιούνται με το Azure AD ακολουθήστε ένα μοντέλο συγκεκριμένο εξουσιοδότησης που επιτρέπει στους χρήστες για να ελέγξετε τον τρόπο εφαρμογής να αποκτήσετε πρόσβαση στα δεδομένα τους.  Η εφαρμογή v2.0 της αυτό το μοντέλο εξουσιοδότησης έχει ενημερωθεί, αλλάζοντας τον τρόπο εφαρμογής πρέπει να αλληλεπιδράσετε με Azure AD.  Αυτό το θέμα καλύπτει τις βασικές έννοιες των αυτό το μοντέλο άδειας, συμπεριλαμβανομένης της εύρους, δικαιώματα και συγκατάθεση.

> [AZURE.NOTE]
    Δεν όλα τα σενάρια Azure Active Directory και δυνατότητες που υποστηρίζονται από το τελικό σημείο v2.0.  Για να καθορίσετε εάν θα πρέπει να χρησιμοποιήσετε το τελικό σημείο v2.0, διαβάστε σχετικά με [τους περιορισμούς v2.0](active-directory-v2-limitations.md).

## <a name="scopes--permissions"></a>Εύρος και δικαιώματα

Azure AD υλοποιεί το πρωτόκολλο εξουσιοδότησης [διακριτικό 2.0](active-directory-v2-protocols.md) , το οποίο είναι μια μέθοδος επιτρέποντας σε μια εφαρμογή τρίτου κατασκευαστή για πρόσβαση σε πόρους web που φιλοξενείται εκ μέρους ενός χρήστη.  Οποιοσδήποτε πόρος web που φιλοξενείται που ενσωματώνεται στο Azure AD θα έχει ένα αναγνωριστικό πόρου ή **URI Αναγνωριστικό εφαρμογής**.  Για παράδειγμα, ορισμένες από τους πόρους που φιλοξενείται στο web της Microsoft περιλαμβάνουν:

- Το Office 365 ενοποιημένο σύστημα αλληλογραφίας API:`https://outlook.office.com`
- Το API Azure AD γραφήματος:`https://graph.windows.net`
- Το Microsoft Graph:`https://graph.microsoft.com`

Το ίδιο ισχύει για οποιαδήποτε 3η πάρτι πόρους στους οποίους έχει ενσωματωμένο με το Azure AD.  Οποιονδήποτε από αυτούς τους πόρους, επίσης, να ορίσετε ένα σύνολο δικαιωμάτων που μπορούν να χρησιμοποιηθούν για να διαιρέσετε τη λειτουργικότητα αυτόν τον πόρο σε μικρότερο μέγεθος μπλοκ προς τα επάνω.  Ως παράδειγμα, το Microsoft Graph έχει ορίσει μερικά δικαιώματα:

- Ανάγνωση του ημερολογίου ενός χρήστη
- Εγγραφή στο ημερολόγιο του χρήστη
- Αποστολή αλληλογραφίας ως χρήστης
- [+ περισσότερα](https://graph.microsoft.io)

Ορίζοντας αυτά τα δικαιώματα, ο πόρος μπορεί να έχουν λεπτομερή έλεγχο των δεδομένων και τον τρόπο εκτίθεται στον εξωτερικό κόσμο.  Μια εφαρμογή τρίτου κατασκευαστή, στη συνέχεια, να ζητήσετε αυτά τα δικαιώματα από ένα τελικού χρήστη - και ο τελικός χρήστης πρέπει να εγκρίνει τα δικαιώματα πριν από την εφαρμογή μπορεί να λειτουργήσει για λογαριασμό τους.  Από chunking λειτουργίες του πόρου σε μικρότερες σύνολα δικαιωμάτων, μπορεί να δημιουργηθεί εφαρμογές τρίτων κατασκευαστών για να ζητήσετε μόνο τα συγκεκριμένα δικαιώματα που χρειάζονται για να εκτελέσετε τους δασμού.  Επίσης επιτρέπει στους τελικούς χρήστες να γνωρίζουν ακριβώς τον τρόπο εφαρμογής χρήσης δεδομένων τους, ώστε να είναι πιο σίγουροι ότι η εφαρμογή δεν συμπεριφέρεται με κακόβουλες επιθέσεις.

Στο Azure AD και OAuth, αυτά τα δικαιώματα είναι γνωστό ως **εύρους**.  Μπορείτε επίσης να δείτε τους αναφέρεται ως **oAuth2Permissions**.  Εμβέλεια παρουσιάζεται στο Azure AD ως μια τιμή συμβολοσειράς.  Συνεχίζοντας με το Microsoft Graph παράδειγμα, η τιμή εμβέλειας για κάθε δικαίωμα είναι:

- Ανάγνωση του ημερολογίου ενός χρήστη:`Calendar.Read`
- Εγγραφή στο ημερολόγιο του χρήστη:`Mail.ReadWrite`
- Αποστολή αλληλογραφίας ως χρήστης με δικαιώματα:`Mail.Send`

Μια εφαρμογή να ζητήσετε αυτά τα δικαιώματα, ορίζοντας το εύρος στο αιτήσεις για το τελικό σημείο v2.0, όπως περιγράφεται παρακάτω.

## <a name="openid-connect-scopes"></a>Σύνδεση OpenId εύρους

Η εφαρμογή v2.0 της OpenID σύνδεση περιλαμβάνει μερικές ευδιάκριτο εύρους που δεν ισχύουν για οποιοδήποτε συγκεκριμένο πόρο - `openid`, `email`, `profile`, και `offline_access`.

#### <a name="openid"></a>OpenId

Εάν μια εφαρμογή εκτελεί είσοδος με χρήση της [Σύνδεσης OpenID](active-directory-v2-protocols.md#openid-connect-sign-in-flow), πρέπει να ζητήσει από το `openid` εύρος.  Το `openid` εύρος θα εμφανίζεται στην οθόνη συγκατάθεση λογαριασμό εργασίας ως το δικαίωμα "Είσοδος στο" και στην προσωπική οθόνη συγκατάθεση λογαριασμό Microsoft ως το δικαίωμα "Προβολή του προφίλ σας και να συνδεθείτε με εφαρμογές και υπηρεσίες χρησιμοποιώντας το λογαριασμό της Microsoft".  Αυτό το δικαίωμα επιτρέπει σε μια εφαρμογή για να λάβετε ένα μοναδικό αναγνωριστικό για το χρήστη με τη μορφή του `sub` διεκδίκηση.  Επίσης, να να εξασφαλίζει πρόσβαση εφαρμογή το τελικό σημείο πληροφορίες χρήστη.  Το `openid` εμβέλειας μπορεί επίσης να χρησιμοποιηθεί σε το τελικό σημείο διακριτικού v2.0 να αποκτήσετε id_tokens, τα οποία μπορούν να χρησιμοποιηθούν για την ασφάλιση HTTP κλήσεις μεταξύ διαφορετικά στοιχεία της εφαρμογής.

#### <a name="email"></a>Μήνυμα ηλεκτρονικού ταχυδρομείου

Το `email` εμβέλειας μπορεί να συμπεριληφθεί μαζί με το `openid` εμβέλεια και τυχόν άλλους χρήστες.  Να εξασφαλίζει πρόσβαση εφαρμογής του χρήστη την κύρια διεύθυνση ηλεκτρονικού ταχυδρομείου με τη μορφή του `email` διεκδίκηση.  Το `email` διεκδίκηση θα μόνο περιλαμβάνεται στο διακριτικά εάν μια διεύθυνση ηλεκτρονικού ταχυδρομείου είναι συσχετισμένη με το λογαριασμό χρήστη, ο οποίος δεν είναι πάντα πεζών και κεφαλαίων γραμμάτων.  Εάν χρησιμοποιείτε το `email` εύρος, την εφαρμογή σας θα πρέπει να προετοιμαστείτε για να χειριστείτε την υπόθεση στην οποία το `email` διεκδίκηση δεν υπάρχει στο διακριτικό.

#### <a name="profile"></a>Προφίλ

Το `profile` εμβέλειας μπορεί να συμπεριληφθεί μαζί με το `openid` εμβέλεια και τυχόν άλλους χρήστες.  Να εξασφαλίζει πρόσβαση εφαρμογή πληθώρα πληροφοριών σχετικά με το χρήστη.  Αυτό περιλαμβάνει, αλλά δεν περιορίζεται σε συγκεκριμένο όνομα του χρήστη, επώνυμο, προτιμώμενη username, Αναγνωριστικό αντικειμένου και ούτω καθεξής.  Για μια πλήρη λίστα των απαιτήσεων προφίλ διαθέσιμες στο id_tokens για ένα συγκεκριμένο χρήστη, ανατρέξτε στην [αναφορά διακριτικού v2.0](active-directory-v2-tokens.md).

#### <a name="offlineaccess"></a>Offline_access

Το [ `offline_access` εμβέλεια](http://openid.net/specs/openid-connect-core-1_0.html#OfflineAccess) επιτρέπει την εφαρμογή σας για πρόσβαση σε πόρους εκ μέρους του χρήστη για ένα εκτεταμένο χρονικό διάστημα.  Στην οθόνη συγκατάθεση λογαριασμό εργασίας, αυτό το εύρος θα εμφανίζεται ως το δικαίωμα "Οποιαδήποτε στιγμή πρόσβαση στα δεδομένα σας".  Στο το προσωπικό Microsoft συγκατάθεση οθόνη λογαριασμός, θα εμφανίζεται ως το δικαίωμα "Πρόσβαση τα στοιχεία σας οποιαδήποτε στιγμή από".  Όταν ένας χρήστης εγκρίνει το `offline_access` εύρος, την εφαρμογή σας θα είναι ενεργοποιημένες για τη λήψη διακριτικά Ανανέωση από το τελικό σημείο διακριτικού v2.0.  Ανανεώστε τα διακριτικά είναι μεγάλης διάρκειας και να επιτρέψετε την εφαρμογή σας να αποκτήσετε νέα διακριτικά πρόσβασης όπως παλιότερα λήξει.

Εάν η εφαρμογή σας δεν ζητήσει η `offline_access` εύρος, αυτό δεν θα λαμβάνετε refresh_tokens.  Αυτό σημαίνει ότι κατά την εξαργύρωση ενός authorization_code της [ροής κώδικα εξουσιοδότησης διακριτικό 2.0](active-directory-v2-protocols.md#oauth2-authorization-code-flow), θα λαμβάνετε μόνο ξανά μια access_token από το `/token` τελικού σημείου.  Access_token που θα εξακολουθεί να ισχύει για ένα σύντομο χρονικό διάστημα (συνήθως μία ώρα), αλλά τελικά θα λήξει.  Επιστροφή AT που χρονική στιγμή, την εφαρμογή σας θα πρέπει να ανακατευθύνετε το χρήστη του `/authorize` τελικό σημείο για να ανακτήσετε μια νέα authorization_code.  Κατά τη διάρκεια αυτής της ανακατεύθυνσης, ο χρήστης μπορεί να ή ίσως να μην χρειάζεται να εισαγάγετε ξανά τα διαπιστευτήριά τους ή εκ νέου τη συγκατάθεσή σας για να δικαιώματα, ανάλογα με το τον τύπο της εφαρμογής.

Για περισσότερες πληροφορίες σχετικά με τον τρόπο για τη λήψη και χρήση ανανέωση διακριτικά, ανατρέξτε στην [αναφορά πρωτόκολλο v2.0](active-directory-v2-protocols.md).


## <a name="requesting-individual-user-consent"></a>Υποβολή αίτησης συγκατάθεση μεμονωμένου χρήστη

Σε ένα αίτημα εξουσιοδότησης [OpenID σύνδεση ή 2.0 διακριτικό](active-directory-v2-protocols.md) , μια εφαρμογή να ζητήσετε τα δικαιώματα που χρειάζεται χρησιμοποιώντας το `scope` ερώτημα παραμέτρων.  Για παράδειγμα, όταν ένας χρήστης πραγματοποιεί σε μια εφαρμογή, η εφαρμογή θα στείλετε μια αίτηση όπως το εξής (με αλλαγές γραμμών για αναγνωσιμότητα):

```
GET https://login.microsoftonline.com/common/oauth2/v2.0/authorize?
client_id=6731de76-14a6-49ae-97bc-6eba6914391e
&response_type=code
&redirect_uri=http%3A%2F%2Flocalhost%2Fmyapp%2F
&response_mode=query
&scope=
https%3A%2F%2Fgraph.microsoft.com%2Fcalendar.read%20
https%3A%2F%2Fgraph.microsoft.com%2Fmail.send
&state=12345
```

Το `scope` παράμετρος είναι μια λίστα διαχωρισμένες με εύρους που ζητά την εφαρμογή.  Κάθε μεμονωμένα εμβέλεια υποδεικνύεται προσαρτώντας την τιμή εμβέλεια αναγνωριστικό του πόρου (URI Αναγνωριστικό εφαρμογής).  Την αίτηση παραπάνω υποδεικνύει ότι η εφαρμογή χρειάζεται δικαιώματα ανάγνωσης ημερολόγιο του χρήστη και αποστολής ηλεκτρονικού ταχυδρομείου με το χρήστη.

Αφού ο χρήστης εισαγάγει τα διαπιστευτήριά τους, θα δείτε το τελικό σημείο v2.0 για μια εγγραφή που ταιριάζει από **τη συγκατάθεσή σας χρήστη**.  Εάν ο χρήστης δεν έχει δεχθεί σε οποιαδήποτε από τα δικαιώματα που ζητήθηκαν στο παρελθόν, το τελικό σημείο v2.0 ζητήστε από το χρήστη για να εκχωρήσετε τα δικαιώματα που ζητήθηκαν.  

![Στιγμιότυπο οθόνης συγκατάθεση λογαριασμό εργασίας](../media/active-directory-v2-flows/work_account_consent.png)

Όταν ο χρήστης εγκρίνει το δικαίωμα, ώστε ο χρήστης δεν χρειάζεται να εκ νέου τη συγκατάθεσή σας σε επόμενες εισόδου πρόσθετα θα καταγραφεί συγκατάθεσης.

## <a name="requesting-consent-for-an-entire-tenant"></a>Υποβολή αίτησης συγκατάθεση για ένα ολόκληρο το μισθωτή

Συχνά όταν μια εταιρεία αγοράζει μια άδεια χρήσης ή τη συνδρομή σε μια εφαρμογή, που επιθυμούν να παράσχετε πλήρως για τους εργαζομένους.  Ως μέρος αυτής της διαδικασίας, ένας διαχειριστής εταιρείας μπορεί να εκχωρήσει συγκατάθεση για αυτήν την εφαρμογή για εκτέλεση ενεργειών εκ μέρους οποιονδήποτε υπάλληλο.  Εκχωρώντας συγκατάθεση για ένα ολόκληρο το μισθωτή, των υπαλλήλων της εταιρείας που δεν θα αντιμετωπίσετε οθόνης συγκατάθεση για αυτήν την εφαρμογή.

Για να ζητήσετε συγκατάθεση για όλους τους χρήστες στο μισθωτή, την εφαρμογή σας να χρησιμοποιήσετε τη **Διαχείριση συγκατάθεση τελικού σημείου**, που περιγράφεται παρακάτω.

## <a name="admin-restricted-scopes"></a>Περιορισμένο εύρος

Ορισμένα δικαιώματα υψηλής δικαίωμα σε το περιβάλλον εμπορικής προσαρμογής του Microsoft μπορούν να επισημανθούν ως **περιορισμένο διαχείρισης**.  Όπως εύρους παραδείγματα:

- Ανάγνωση ενός organizaion καταλόγου δεδομένων:`Directory.Read`
- Εγγραφή δεδομένων σε μια εταιρεία καταλόγου:`Directory.ReadWrite`
- Ομάδες ασφαλείας ανάγνωσης στον κατάλογο του οργανισμού:`Groups.Read.All`

Όταν ένας χρήστης καταναλωτή μπορεί να εκχωρήσει σε μια εφαρμογή πρόσβασης σε αυτά, χρήστες του οργανισμού περιορίζονται από την εκχώρηση πρόσβασης για το ίδιο σύνολο δεδομένων διάκριση πεζών-κεφαλαίων εταιρείας.  Εάν η εφαρμογή σας ζητήσει πρόσβαση σε ένα από αυτά τα δικαιώματα από ένα εταιρικό χρήστη, ο χρήστης θα λάβετε ένα μήνυμα σφάλματος που δηλώνει ότι πρόκειται για μη εξουσιοδοτημένη για να δώσετε τη συγκατάθεσή σας για την εφαρμογή δικαιωμάτων.

Εάν η εφαρμογή σας απαιτεί πρόσβαση σε αυτά τα περιορισμένο εύρος για εταιρείες, που θα πρέπει να τους ζητήσετε απευθείας από ένα διαχειριστή εταιρείας επίσης χρησιμοποιεί το **τελικό σημείο συγκατάθεση διαχείρισης**, που περιγράφεται παρακάτω.

Όταν ένα διαχειριστή του εκχωρεί αυτά τα δικαιώματα μέσω του τελικού σημείου συγκατάθεση διαχείρισης, συγκατάθεση θα εκχωρηθούν για όλους τους χρήστες στο μισθωτή, όπως περιγράφεται παραπάνω.

## <a name="using-the-admin-consent-endpoint"></a>Χρησιμοποιώντας το τελικό σημείο συγκατάθεση διαχείρισης

Ακολουθώντας αυτά τα βήματα, θα μπορούν να συγκεντρώσετε δικαιώματα για όλους τους χρήστες σε μια δεδομένη μισθωτή, συμπεριλαμβανομένων των περιορισμένο εύρος της εφαρμογής σας.  Για να δείτε ένα δείγμα κώδικα που υλοποιεί τα παρακάτω βήματα λεπτομερώς, ανατρέξτε στο [δείγμα περιορισμένο εύρος διαχείρισης](https://github.com/Azure-Samples/active-directory-dotnet-admin-restricted-scopes-v2).

#### <a name="request-the-permissions-in-the-app-registration-portal"></a>Αίτηση για τα δικαιώματα στην πύλη καταχώρηση εφαρμογής

- Εάν δεν το έχετε κάνει ήδη, μεταβείτε στην εφαρμογή σας με [apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)ή να [δημιουργήσετε μια εφαρμογή](active-directory-v2-app-registration.md) .
- Εντοπίστε την ενότητα **Microsoft Graph δικαιώματα** και προσθέστε τα δικαιώματα που απαιτεί την εφαρμογή σας.
- Βεβαιωθείτε ότι για να **αποθηκεύσετε** την καταχώρηση εφαρμογής

#### <a name="recommended-sign-the-user-into-your-app"></a>Προτεινόμενα: Πραγματοποιήστε είσοδο στο χρήστη στο την εφαρμογή σας

Συνήθως όταν δημιουργείτε μια εφαρμογή που χρησιμοποιεί ο διαχειριστής συγκατάθεση τελικό σημείο, η εφαρμογή θα πρέπει να έχετε μια σελίδα/προβολή που επιτρέπει ο διαχειριστής για να εγκρίνετε την εφαρμογή δικαιωμάτων.  Αυτή η σελίδα μπορεί να είναι μέρος της εγγραφής στην εφαρμογή ροής, μέρος των ρυθμίσεων της εφαρμογής ή μια αποκλειστική ροής "σύνδεση".  Σε πολλές περιπτώσεις, έχει νόημα για την εφαρμογή για να εμφανίσετε αυτό "σύνδεση" Προβολή μόνο αφού ένας χρήστης έχει συνδεθεί με έναν εταιρικό ή σχολικό λογαριασμό Microsoft που διαθέτετε.

Σχετικά με την είσοδο στο χρήστη στην εφαρμογή σας επιτρέπει να προσδιορίζετε τη organziation στην οποία ανήκει ο διαχειριστής πριν να τους ζητήσετε να εγκρίνουν τα απαραίτητα δικαιώματα.  Ενώ δεν είναι απολύτως απαραίτητο, μπορεί να σας βοηθήσει να δημιουργήσετε μια πιο διαισθητική εμπειρία για τους χρήστες του οργανισμού.  Για να υπογράψετε το χρήστη στο, ακολουθήστε τα [προγράμματα εκμάθησης για το πρωτόκολλο v2.0](active-directory-v2-protocols.md).

#### <a name="request-the-permissions-from-a-directory-admin"></a>Αίτηση για τα δικαιώματα από ένα διαχειριστή καταλόγου

Όταν είστε έτοιμοι για να ζητήσετε δικαιώματα από το διαχειριστή της εταιρείας, μπορείτε να ανακατευθύνετε το χρήστη να v2.0 **διαχείρισης συγκατάθεση τελικού σημείου**.

```
// Line breaks for legibility only

GET https://login.microsoftonline.com/{tenant}/adminconsent?
client_id=6731de76-14a6-49ae-97bc-6eba6914391e
&state=12345
&redirect_uri=http://localhost/myapp/permissions
```

```
// Pro Tip: Try pasting the below request in a browser!
```

```
https://login.microsoftonline.com/common/adminconsent?client_id=6731de76-14a6-49ae-97bc-6eba6914391e&state=12345&redirect_uri=http://localhost/myapp/permissions
```

| Παράμετρος | | Περιγραφή |
| ----------------------- | ------------------------------- | --------------- |
| μισθωτή | απαιτείται | Ο μισθωτής καταλόγου που θέλετε να ζητήσετε δικαιώματα από.  Μπορεί να παρέχεται σε μορφή φιλικό όνομα ή guid. |
| client_id | απαιτείται | Το αναγνωριστικό εφαρμογής ότι η πύλη εγγραφής ([apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)), στους οποίους έχουν ανατεθεί την εφαρμογή σας. |
| redirect_uri | απαιτείται | Το σημείο όπου θέλετε την απάντηση που θα σταλεί σε εφαρμογή σας για το χειρισμό redirect_uri.  Αυτό πρέπει να αντιστοιχεί ακριβώς ένα από τα redirect_uris που έχουν καταχωρηθεί στην πύλη. |
| κατάσταση | Συνιστάται | Μια τιμή που περιλαμβάνονται στην αίτηση που θα επιστραφεί επίσης στην διακριτικού απάντηση.  Μπορεί να είναι μια συμβολοσειρά οποιοδήποτε περιεχόμενο που θέλετε.  Η κατάσταση χρησιμοποιείται για την κωδικοποίηση πληροφοριών σχετικά με την κατάσταση του χρήστη στην εφαρμογή πριν από την αίτηση ελέγχου ταυτότητας προέκυψε, όπως τη σελίδα ή την προβολή που είχαν στην. |

Σε αυτό το σημείο, Azure AD θα επιβάλει ότι μόνο ένας διαχειριστής μισθωτή να συνδεθώ στο για να ολοκληρώσετε την αίτηση.  Ο διαχειριστής θα σας ζητηθεί να εγκρίνουν όλα τα δικαιώματα που έχετε ζητήσει για την εφαρμογή σας στην πύλη εγγραφής. 

##### <a name="successful-response"></a>Επιτυχής απόκρισης
Εάν ο διαχειριστής εγκρίνει τα δικαιώματα για την εφαρμογή σας, θα είναι επιτυχής απάντηση:

```
GET http://localhost/myapp/permissions?tenant=a8990e1f-ff32-408a-9f8e-78d3b9139b95&state=state=12345&admin_consent=True
```

| Παράμετρος | Περιγραφή |
| ----------------------- | ------------------------------- | --------------- |
| μισθωτή | Ο μισθωτής καταλόγου που παραχωρηθεί τα δικαιώματα εφαρμογής σας το ζητήσει, σε μορφή guid. |
| κατάσταση | Μια τιμή που περιλαμβάνονται στην αίτηση που θα επιστραφεί επίσης στην διακριτικού απάντηση.  Μπορεί να είναι μια συμβολοσειρά οποιοδήποτε περιεχόμενο που θέλετε.  Η κατάσταση χρησιμοποιείται για την κωδικοποίηση πληροφοριών σχετικά με την κατάσταση του χρήστη στην εφαρμογή πριν από την αίτηση ελέγχου ταυτότητας προέκυψε, όπως τη σελίδα ή την προβολή που είχαν στην. |
| admin_consent | Θα οριστεί σε `True`. |



##### <a name="error-response"></a>Απόκριση σφάλμα
Εάν ο διαχειριστής δεν εγκρίνει τα δικαιώματα για την εφαρμογή σας, θα αποτυχίας απάντηση:

```
GET http://localhost/myapp/permissions?error=permission_denied&error_description=The+admin+canceled+the+request
```

| Παράμετρος | Περιγραφή |
| ----------------------- | ------------------------------- | --------------- |
| Σφάλμα | Μια συμβολοσειρά κωδικό σφάλματος που μπορεί να χρησιμοποιηθεί για την ταξινόμηση των τύπων σφάλματα που προκύπτουν και μπορεί να χρησιμοποιηθεί προκειμένου να αντιμετωπίζεται σφάλματα. |
| error_description | Ένα συγκεκριμένο μήνυμα σφάλματος που μπορεί να σας βοηθήσει ο προγραμματιστής Προσδιορισμός της αρχικής αιτίας ενός σφάλματος.  |

Αφού έχετε λάβει μια επιτυχημένη απόκριση από το τελικό σημείο συγκατάθεση διαχείρισης, της εφαρμογής σας έχει συγκεντρώσει τα δικαιώματα του ζητήθηκε.  Τώρα μπορείτε να μετακινήσετε σε αίτηση ενός διακριτικού για τον πόρο που θέλετε, όπως περιγράφεται παρακάτω.

## <a name="using-permissions"></a>Χρήση δικαιωμάτων

Αφού ο χρήστης συγκατάθεση για δικαιώματα για την εφαρμογή σας, την εφαρμογή σας μπορεί να αποκτήσει διακριτικά πρόσβασης που αντιπροσωπεύει την εφαρμογή δικαιώματα πρόσβασης σε έναν πόρο σε ορισμένες χωρητικότητα.  Ένα διακριτικό πρόσβασης δεδομένη μπορεί να χρησιμοποιηθεί μόνο για μια μεμονωμένη resorce, αλλά κωδικοποιημένη μέσα σε αυτό θα κάθε δικαιωμάτων που της εφαρμογής σας έχει παραχωρηθεί για το συγκεκριμένο πόρο.  Για να αποκτήσετε ένα διακριτικό πρόσβασης, την εφαρμογή σας να κάνετε μια αίτηση στο τελικό σημείο διακριτικού v2.0:

```
POST common/oauth2/v2.0/token HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/json

{
    "grant_type": "authorization_code",
    "client_id": "6731de76-14a6-49ae-97bc-6eba6914391e",
    "scope": "https://outlook.office.com/mail.read https://outlook.office.com/mail.send",
    "code": "AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq..."
    "redirect_uri": "https://localhost/myapp",
    "client_secret": "zc53fwe80980293klaj9823"  // NOTE: Only required for web apps
}
```

Το διακριτικό πρόσβασης που προκύπτει, στη συνέχεια, μπορεί να χρησιμοποιηθεί σε αιτήσεις HTTP στον πόρο - αυτό θα αξιόπιστα επισημαίνει στον πόρο ότι η εφαρμογή σας έχει τα κατάλληλα δικαιώματα για να εκτελέσετε μια συγκεκριμένη εργασία.  

Για περισσότερες λεπτομέρειες σχετικά με το πρωτόκολλο OAuth 2.0 και πώς μπορείτε να αποκτήσετε διακριτικά πρόσβασης, ανατρέξτε στο άρθρο [αναφορά πρωτόκολλο v2.0 τελικού σημείου](active-directory-v2-protocols.md).
