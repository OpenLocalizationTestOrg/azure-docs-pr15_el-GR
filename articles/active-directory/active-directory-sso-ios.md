<properties
    pageTitle="Πώς μπορείτε να ενεργοποιήσετε την εφαρμογή σταυρό SSO σε iOS χρησιμοποιώντας ADAL | Microsoft Azure"
    description="Μάθετε πώς μπορείτε να χρησιμοποιήσετε τις δυνατότητες του ADAL SDK για να ενεργοποιήσετε καθολικής σύνδεσης σε εφαρμογές σας. "
    services="active-directory"
    documentationCenter=""
    authors="brandwe"
    manager="mbaldwin"
    editor=""/>

<tags
    ms.service="active-directory"
    ms.workload="identity"
    ms.tgt_pltfrm="ios"
    ms.devlang="objective-c"
    ms.topic="article"
    ms.date="09/16/2016"
    ms.author="brandwe"/>


# <a name="how-to-enable-cross-app-sso-on-ios-using-adal"></a>Πώς μπορείτε να ενεργοποιήσετε την εφαρμογή σταυρό SSO σε iOS χρησιμοποιώντας ADAL


Παροχή καθολική σύνδεση (SSO), έτσι ώστε οι χρήστες θα πρέπει να εισαγάγετε τα διαπιστευτήριά τους μόνο μία φορά και έχετε αυτόματα αυτά τα διαπιστευτήρια εργασία σε εφαρμογές τώρα αναμένεται από τους πελάτες. Είναι δύσκολο να εισαγάγετε το όνομα χρήστη και τον κωδικό πρόσβασης σε μια μικρή οθόνη, συχνά φορές σε συνδυασμό με μια επιπλέον παραγόντων (2FA) όπως μια τηλεφωνική κλήση ή μια texted κώδικα, έχει ως αποτέλεσμα γρήγορης μη ικανοποίησης εάν ένας χρήστης έχει να το κάνετε αυτό περισσότερες από μία φορά για το προϊόν σας.

Επιπλέον, εάν μπορείτε να αξιοποιήσετε μια πλατφόρμα ταυτότητας που μπορεί να χρησιμοποιεί άλλες εφαρμογές, όπως λογαριασμοί του Microsoft ή εταιρικό λογαριασμό από το Office 365, οι πελάτες αναμενόμενο ότι αυτές διαπιστευτήρια που θα είναι διαθέσιμη για χρήση σε όλες τις εφαρμογές τους ανεξάρτητα από τον προμηθευτή.

Την πλατφόρμα Microsoft ταυτότητα, μαζί με το SDK ταυτότητα της Microsoft, δεν όλων των αυτό σκληρή εργασία για εσάς και σας δίνει τη δυνατότητα να θα ενθουσιάσει τους πελάτες σας με SSO είτε στο δικό σας οικογένεια προγραμμάτων των εφαρμογών του ή, όπως και με μας broker δυνατοτήτων και των εφαρμογών υπηρεσία ελέγχου ταυτότητας, σε ολόκληρη τη συσκευή.

Αυτή η αναλυτική παρουσίαση σας ενημερώνει για τον τρόπο ρύθμισης παραμέτρων μας SDK μέσα από την εφαρμογή για την παροχή αυτού του οφέλους στους πελάτες σας.

Αυτή η αναλυτική παρουσίαση ισχύει για:

* Καταλόγου Azure Active Directory
* B2C καταλόγου Azure Active Directory
* B2B καταλόγου Azure Active Directory
* Υπό όρους πρόσβασης καταλόγου Azure Active Directory


Σημειώστε ότι το έγγραφο παρακάτω προϋποθέτει που γνωρίζουν τον τρόπο [παροχής εφαρμογές στην πύλη του παλαιού τύπου για Azure Active Directory](./develop/active-directory-how-to-integrate.md) , καθώς και έχετε συνδέσει την εφαρμογή σας με το [Microsoft ταυτότητας iOS SDK](https://github.com/AzureAD/azure-activedirectory-library-for-objc).

## <a name="sso-concepts-in-the-microsoft-identity-platform"></a>Έννοιες SSO της πλατφόρμας Microsoft ταυτότητας

### <a name="microsoft-identity-brokers"></a>Μεσίτες ταυτότητα της Microsoft

Microsoft παρέχει στις εφαρμογές για κινητές συσκευές κάθε πλατφόρμα που επιτρέπουν την γεφύρωση διαπιστευτηρίων σε εφαρμογές από διαφορετικούς προμηθευτές, καθώς και επιτρέπει την ειδική βελτιωμένες δυνατότητες που απαιτούν μια ενιαία θέση ασφαλής από πού να επικυρώσετε διαπιστευτήρια. Ονομάζουμε αυτές οι **μεσίτες**. Στο iOS και Android αυτά παρέχονται μέσω με δυνατότητα λήψης εφαρμογές ότι οι πελάτες εγκαταστήσετε ξεχωριστά ή μπορεί να είναι δυνατή η προώθηση στη συσκευή από μια εταιρεία που διαχειρίζεται ορισμένα ή όλα από τη συσκευή για τους υπάλληλο. Αυτές οι μεσίτες υποστηρίζει τη Διαχείριση ασφαλείας μόνο για ορισμένες εφαρμογές ή ολόκληρη τη συσκευή που βασίζεται σε τι επιθυμούν οι διαχειριστές IT. Στα Windows, αυτή η λειτουργία παρέχεται από μια επιλογή λογαριασμού ενσωματωμένη στο λειτουργικό σύστημα, γνωστό τεχνικά ως μεσολαβητή Web ελέγχου ταυτότητας.

Για να κατανοήσετε πώς χρησιμοποιούμε αυτά τα μεσίτες και πώς οι πελάτες σας ενδέχεται να δείτε τους τους login ροής για την πλατφόρμα ταυτότητας Microsoft Διαβάστε παρακάτω για περισσότερες πληροφορίες.

### <a name="patterns-for-logging-in-on-mobile-devices"></a>Μοτίβα για τη σύνδεση σε κινητές συσκευές

Πρόσβαση σε διαπιστευτήρια σε συσκευές ακολουθήστε δύο βασικά μοτίβα για την πλατφόρμα ταυτότητα της Microsoft:

* Μη-broker Βοήθεια συνδέσεις
* Μεσολαβητής Βοήθεια συνδέσεις

#### <a name="non-broker-assisted-logins"></a>Μη-broker Βοήθεια συνδέσεις

Μη-broker Βοήθεια συνδέσεις είναι εμπειρίες σύνδεσης που πραγματοποιούνται ευθυγραμμισμένο με την εφαρμογή και να χρησιμοποιήσετε την τοπική αποθήκευση από τη συσκευή για αυτήν την εφαρμογή. Αυτός ο χώρος αποθήκευσης μπορεί να είναι κοινόχρηστη σε εφαρμογές, αλλά τα διαπιστευτήρια που συνδέονται στενά με στην εφαρμογή ή στην οικογένεια προγραμμάτων των εφαρμογών με χρήση διαπιστευτηρίων που. Αυτή είναι η εμπειρία πιθανότατα έχετε αντιμετωπίσει σε πολλές εφαρμογές για κινητές συσκευές όπου μπορείτε να εισαγάγετε ένα όνομα χρήστη και κωδικό πρόσβασης στην ίδια την εφαρμογή.

Αυτές οι συνδέσεις έχουν τα ακόλουθα πλεονεκτήματα:

-  Υπάρχει εμπειρία χρήστη εντελώς μέσα από την εφαρμογή.
-  Διαπιστευτήρια μπορεί να είναι κοινόχρηστη σε εφαρμογές που είναι συνδεδεμένοι με το ίδιο πιστοποιητικό, παρέχοντας ένα μεμονωμένο εμπειρία εισόδου για την οικογένεια προγραμμάτων των εφαρμογών.
-  Στοιχείο ελέγχου γύρω από την εμπειρία της σύνδεσης παρέχεται με την εφαρμογή πριν και μετά την είσοδο.

Αυτές οι συνδέσεις έχουν τα ακόλουθα μειονεκτήματα:

- Δεν είναι δυνατό να είναι η εμπειρία χρήστη καθολικής σύνδεσης σε σε όλες τις εφαρμογές που χρησιμοποιούν μια ταυτότητα της Microsoft, μόνο σε αυτές τις ταυτότητες της Microsoft που είναι ανήκει και έχετε ρυθμίσει τις παραμέτρους της εφαρμογής σας.
- Η εφαρμογή σας δεν μπορεί να χρησιμοποιηθεί με πιο σύνθετες δυνατότητες επιχειρηματικής όπως υπό όρους πρόσβασης ή χρησιμοποιήστε την οικογένεια InTune προϊόντων.
- Εφαρμογή σας δεν υποστηρίζει έλεγχο ταυτότητας βάσει πιστοποιητικού για τους επαγγελματίες χρήστες.

Ακολουθεί μια αναπαράσταση του τρόπου λειτουργίας του Microsoft SDK ταυτότητας με τον κοινόχρηστο χώρο αποθήκευσης από τις εφαρμογές σας για να ενεργοποιήσετε την SSO:

```
+------------+ +------------+  +-------------+
|            | |            |  |             |
|   App 1    | |   App 2    |  |   App 3     |
|            | |            |  |             |
|            | |            |  |             |
+------------+ +------------+  +-------------+
| Azure SDK  | | Azure SDK  |  | Azure SDK   |
+------------+-+------------+--+-------------+
|                                            |
|            App Shared Storage              |
+--------------------------------------------+
```

#### <a name="broker-assisted-logins"></a>Μεσολαβητής Βοήθεια συνδέσεις

Συνδέσεις μέσω Broker είναι εμπειρίες σύνδεσης που προκύπτουν μέσα από την εφαρμογή broker και να χρησιμοποιήσετε το χώρο αποθήκευσης και την ασφάλεια του broker για κοινή χρήση διαπιστευτηρίων σε όλες τις εφαρμογές στη συσκευή που αξιοποιήσετε της πλατφόρμας Microsoft ταυτότητα. Αυτό σημαίνει ότι τις εφαρμογές σας θα βασίζεται σε broker προκειμένου να εισέλθετε χρήστες. Στο iOS και Android αυτά παρέχονται μέσω με δυνατότητα λήψης εφαρμογές ότι οι πελάτες εγκαταστήσετε ξεχωριστά ή μπορεί να είναι δυνατή η προώθηση στη συσκευή από μια εταιρεία που διαχειρίζεται τη συσκευή για το χρήστη. Ένα παράδειγμα αυτού του τύπου της εφαρμογής είναι η υπηρεσία ελέγχου ταυτότητας Azure εφαρμογή σε iOS. Στα Windows, αυτή η λειτουργία παρέχεται από μια επιλογή λογαριασμού ενσωματωμένη στο λειτουργικό σύστημα, γνωστό τεχνικά ως μεσολαβητή Web ελέγχου ταυτότητας.
Η εμπειρία διαφέρει ανάλογα με την πλατφόρμα και μερικές φορές μπορεί να είναι ενδέχεται να χρήστες διακόψουν Εάν δεν γίνεται σωστά. Είστε πιθανώς εξοικειωμένοι με αυτό το μοτίβο εάν έχετε εγκαταστήσει την εφαρμογή Facebook και χρησιμοποιήσετε τη λειτουργία σύνδεσης Facebook σε μια άλλη εφαρμογή. Της πλατφόρμας Microsoft ταυτότητας αξιοποιεί το ίδιο μοτίβο.

Για iOS αυτό οδηγεί σε "Μετάβαση" κίνησης όπου η εφαρμογή σας αποστέλλεται στο φόντο κατά τις εφαρμογές Azure υπηρεσία ελέγχου ταυτότητας διατίθεται σε πρώτο πλάνο για το χρήστη για να επιλέξετε το λογαριασμό που θέλουν να πραγματοποιείτε είσοδο.  

Για Android και Windows την επιλογή λογαριασμού εμφανίζεται επάνω από την εφαρμογή που είναι λιγότερο ενδέχεται να διακόψουν το χρήστη.

#### <a name="how-the-broker-gets-invoked"></a>Πώς το broker λαμβάνει κλήση

Εάν ένα συμβατό broker είναι εγκατεστημένο στη συσκευή, όπως στην εφαρμογή Azure υπηρεσία ελέγχου ταυτότητας, το Microsoft SDK ταυτότητας θα κάνουν αυτόματα η εργασία της κλήση broker για εσάς όταν ένας χρήστης δηλώνει επιθυμούν να συνδεθείτε χρησιμοποιώντας οποιονδήποτε λογαριασμό από την πλατφόρμα Microsoft ταυτότητα. Αυτό μπορεί να έναν προσωπικό λογαριασμό Microsoft, έναν εταιρικό ή σχολικό λογαριασμό σας ή ένα λογαριασμό που παρέχετε και κεντρικού υπολογιστή στο Azure χρησιμοποιώντας τα προϊόντα μας B2C και B2B. Με τη χρήση εξαιρετικά ασφαλείς αλγόριθμοι και κρυπτογράφησης θα σας να βεβαιωθείτε ότι τα διαπιστευτήρια είναι ζητηθούν και παραδόθηκε Επιστροφή στην εφαρμογή σας με ασφαλή τρόπο. Τα ακριβή τεχνικών λεπτομερειών των μηχανισμών αυτών δεν δημοσιεύτηκε αλλά έχουν αναπτυχθεί με συνεργασίας από τις μηλιές και Google.

**Ο προγραμματιστής έχει την επιλογή εάν Microsoft SDK ταυτότητας καλεί το broker ή χρησιμοποιεί τη ροή μη broker Βοήθεια.** Ωστόσο εάν ο προγραμματιστής επιλέξει να μην χρησιμοποιήσετε τη ροή μέσω broker χάσετε το όφελος των αξιοποίηση διαπιστευτήρια SSO ότι ο χρήστης μπορεί να έχετε ήδη προσθέσει στη συσκευή, καθώς και αποτρέπει την εφαρμογή από τις που χρησιμοποιείται με τους πελάτες, όπως η Access υπό όρους, οι δυνατότητες διαχείρισης Intune, η Microsoft παρέχει δυνατότητες επιχειρηματικής και με βάση πιστοποιητικό ελέγχου ταυτότητας.

Αυτές οι συνδέσεις έχουν τα ακόλουθα πλεονεκτήματα:

-  Χρήστης αντιμετωπίζει SSO σε όλες τις εφαρμογές τους ανεξάρτητα από τον προμηθευτή.
-  Η εφαρμογή σας να αξιοποιήσετε πιο σύνθετες δυνατότητες επιχειρηματικής όπως υπό όρους πρόσβασης ή να χρησιμοποιήσετε την οικογένεια InTune προϊόντων.
-  Η εφαρμογή σας μπορεί να υποστηρίζει έλεγχο ταυτότητας πιστοποιητικού που βασίζεται για τους επαγγελματίες χρήστες.
- Εμπειρία πολύ πιο ασφαλής εισόδου ως την ταυτότητα της εφαρμογής και ο χρήστης έχουν επαληθευτεί από την εφαρμογή broker με αλγόριθμους πρόσθετη ασφάλεια και κρυπτογράφηση.

Αυτές οι συνδέσεις έχουν τα ακόλουθα μειονεκτήματα:

- Στο iOS ο χρήστης μεταπηδά από την εμπειρία της εφαρμογής σας ενώ επιλέγονται διαπιστευτήρια.
- Απώλεια τη δυνατότητα να διαχειρίζεστε την εμπειρία σύνδεσης για τους πελάτες σας στην εφαρμογή σας.



Ακολουθεί μια αναπαράσταση του τρόπου λειτουργίας του Microsoft SDK ταυτότητας με τις εφαρμογές broker για να ενεργοποιήσετε την SSO:

```
+------------+ +------------+   +-------------+
|            | |            |   |             |
|   App 1    | |   App 2    |   |   Someone   |
|            | |            |   |    Else's   |
|            | |            |   |     App     |
+------------+ +------------+   +-------------+
| Azure SDK  | | Azure SDK  |   | Azure SDK   |
+-----+------+-+-----+------+-  +-------+-----+
      |              |                  |
      |       +------v------+           |
      |       |             |           |
      |       | Microsoft   |           |
      +-------> Broker      |^----------+
              | Application
              |             |
              +-------------+
              |             |
              |   Broker    |
              |   Storage   |
              |             |
              +-------------+
```

Ενεργοποιηθεί με αυτές τις πληροφορίες φόντου θα πρέπει να κατανοήσετε καλύτερα και να υλοποιήσετε SSO στην εφαρμογή σας χρησιμοποιώντας την πλατφόρμα Microsoft ταυτότητας και SDK.


## <a name="enabling-cross-app-sso-using-adal"></a>Ενεργοποίηση σταυρό εφαρμογή SSO χρησιμοποιώντας ADAL

Εδώ θα χρησιμοποιήσουμε το ADAL iOS SDK για να:

- Ενεργοποιήστε την επιλογή μη broker Βοήθεια SSO για την οικογένεια εφαρμογών
- Ενεργοποίηση υποστήριξης για βοήθεια broker SSO

### <a name="turning-on-sso-for-non-broker-assisted-sso"></a>Ενεργοποίηση SSO για μη broker Βοήθεια SSO

Για βοήθεια SSO μη broker σε εφαρμογές του Microsoft SDK ταυτότητας Διαχείριση πολλές από την πολυπλοκότητα του SSO για εσάς. Περιλαμβάνονται και μπορείτε να βρείτε το σωστό χρήστη στο cache και τη διατήρηση μιας λίστας με χρήστες συνδεδεμένος για να υποβάλετε ερώτημα.

Για να ενεργοποιήσετε SSO σε εφαρμογές που διαθέτετε πρέπει να κάνετε τα εξής:

1. Βεβαιωθείτε ότι όλοι οι χρήστες σας εφαρμογές ίδιο Αναγνωριστικό υπολογιστή-πελάτη ή αναγνωριστικό εφαρμογής.
* Βεβαιωθείτε ότι όλες τις εφαρμογές σας κοινή χρήση το ίδιο πιστοποιητικό υπογραφής από την Apple, έτσι ώστε να μπορείτε να κάνετε κοινή χρήση keychains
* Αίτηση για το ίδιο δικαίωμα αλυσίδας κλειδιών για κάθε μία από τις εφαρμογές σας.
* Ενημερώστε το SDK ταυτότητας Microsoft σχετικά με την κοινόχρηστη αλυσίδα κλειδιών που θέλετε να χρησιμοποιήσετε.

#### <a name="using-the-same-client-id--application-id-for-all-the-applications-in-your-suite-of-apps"></a>Χρησιμοποιώντας το ίδιο Αναγνωριστικό υπολογιστή-πελάτη / ΑΝΑΓΝΩΡΙΣΤΙΚΌ εφαρμογής για όλες τις εφαρμογές σας οικογένειας προγραμμάτων των εφαρμογών

Με τη σειρά για την πλατφόρμα ταυτότητας Microsoft να γνωρίζετε ότι που επιτρέπεται να κάνετε κοινή χρήση διακριτικά σε εφαρμογές σας, κάθε μία από τις εφαρμογές σας θα πρέπει να κάνετε κοινή χρήση ίδιο Αναγνωριστικό υπολογιστή-πελάτη ή αναγνωριστικό εφαρμογής. Αυτό είναι το μοναδικό αναγνωριστικό που δόθηκε κατά την καταχώρηση πρώτη εφαρμογή σας στην πύλη.

Ίσως αναρωτιέστε πώς θα εντοπίσετε διαφορετικές εφαρμογές στην υπηρεσία Microsoft ταυτότητας εάν που χρησιμοποιεί το ίδιο αναγνωριστικό εφαρμογής. Η απάντηση είναι με την **Ανακατεύθυνση URIs**. Κάθε εφαρμογή μπορεί να έχει πολλές URIs ανακατεύθυνση καταχωρηθεί στην πύλη του προσθήκης λογαριασμών. Κάθε εφαρμογή με την οικογένεια προγραμμάτων θα έχει ένα διαφορετικό URI ανακατεύθυνσης. Είναι ένα παράδειγμα του τρόπου εμφανίζεται κάτω από:

App1 Redirect URI:`x-msauth-mytestiosapp://com.myapp.mytestapp`

App2 Redirect URI:`x-msauth-mytestiosapp://com.myapp.mytestapp2`

App3 Redirect URI:`x-msauth-mytestiosapp://com.myapp.mytestapp3`

....

Αυτά είναι ένθετες κάτω από το ίδιο Αναγνωριστικό υπολογιστή-πελάτη / Αναγνωριστικό εφαρμογής και την αναζήτηση με βάση την ανακατεύθυνση URI που θα επιστρέψετε στο μας στη ρύθμιση παραμέτρων σας SDK.

```
+-------------------+
|                   |
|  Client ID        |
+---------+---------+
          |
          |           +-----------------------------------+
          |           |  App 1 Redirect URI               |
          +----------^+                                   |
          |           +-----------------------------------+
          |
          |           +-----------------------------------+
          +----------^+  App 2 Redirect URI               |
          |           |                                   |
          |           +-----------------------------------+
          |
          +----------^+-----------------------------------+
                      |  App 3 Redirect URI               |
                      |                                   |
                      +-----------------------------------+

```


*Σημειώστε ότι τη μορφή των αυτά τα URI ανακατεύθυνση εξηγούνται παρακάτω. Μπορείτε να χρησιμοποιήσετε οποιαδήποτε URI ανακατεύθυνση, εκτός εάν θέλετε να υποστηρίζει το broker, οπότε αυτές πρέπει να μοιάζει με τα παραπάνω*



#### <a name="create-keychain-sharing-between-applications"></a>Δημιουργία αλυσίδας κλειδιών κοινής χρήσης μεταξύ εφαρμογών

Ενεργοποίηση κοινή χρήση αλυσίδας κλειδιών είναι πέρα από το πεδίο αυτού του εγγράφου και καλύπτεται από την Apple στο έγγραφό τους [Προσθήκη δυνατοτήτων](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html). Τι είναι το σημαντικό είναι ότι μπορείτε να αποφασίσετε τι θέλετε αλυσίδα κλειδιών σας κλήση και να προσθέσετε αυτή τη δυνατότητα σε όλες τις εφαρμογές σας.

Όταν έχετε δικαιώματα ρυθμίσετε σωστά που θα πρέπει να βλέπετε το αρχείο στον κατάλογο του έργου σας έχει δικαίωμα `entitlements.plist` που περιέχει κάτι που μοιάζει με τα εξής:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>keychain-access-groups</key>
    <array>
        <string>$(AppIdentifierPrefix)com.myapp.mytestapp</string>
        <string>$(AppIdentifierPrefix)com.myapp.mycache</string>
    </array>
</dict>
</plist>
```

Όταν έχετε το δικαίωμα αλυσίδας κλειδιών με δυνατότητα σε κάθε μία από τις εφαρμογές σας και είστε έτοιμοι να χρησιμοποιήσετε SSO, ενημερώστε Microsoft SDK ταυτότητας αλυσίδα κλειδιών σας, χρησιμοποιώντας την ακόλουθη ρύθμιση στο σας `ADAuthenticationSettings` με την εξής ρύθμιση:

```
defaultKeychainSharingGroup=@"com.myapp.mycache";
```

> [AZURE.WARNING]
Όταν κάνετε κοινή χρήση μιας αλυσίδας κλειδιών κατά μήκος τις εφαρμογές σας οποιαδήποτε εφαρμογή μπορεί να διαγραφή χρηστών ή Χειρότερο διαγράψετε όλα τα διακριτικά σε εφαρμογή σας. Αυτό είναι ιδιαίτερα καταστροφικές εάν έχετε εφαρμογές που βασίζονται σε τα διακριτικά για εργασία στο παρασκήνιο. Κοινή χρήση μιας αλυσίδας κλειδιών σημαίνει ότι πρέπει να είναι πολύ Προσέξτε σε κάθε κατάργηση λειτουργίες μέσω του Microsoft SDK ταυτότητα.

Αυτό είναι! Το Microsoft SDK ταυτότητας τώρα θα κοινή χρήση διαπιστευτηρίων σε όλες τις εφαρμογές σας. Επίσης θα είναι κοινόχρηστη λίστα χρηστών μεταξύ παρουσιών της εφαρμογής.

### <a name="turning-on-sso-for-broker-assisted-sso"></a>Ενεργοποίηση SSO για broker Βοήθεια SSO

Η δυνατότητα για μια εφαρμογή για να χρησιμοποιήσετε οποιαδήποτε broker που είναι εγκατεστημένο στη συσκευή είναι **απενεργοποιημένη από προεπιλογή**. Για να χρησιμοποιήσετε την εφαρμογή σας με το broker που πρέπει να κάνετε ορισμένες πρόσθετες ρυθμίσεις παραμέτρων και να προσθέσετε κάποιον κώδικα στην εφαρμογή σας.

Τα βήματα για να παρακολουθήσετε είναι:

1. Ενεργοποίηση της λειτουργίας broker σε κλήση του κώδικα της εφαρμογής σας στο SDK MS.
2. Δημιουργήστε μια νέα redirect URI και δώστε που για την εφαρμογή και την εγγραφή σας εφαρμογή.
3. Καταχώρηση ενός συνδυασμού διεύθυνσης URL.
4. Υποστήριξη iOS9: Προσθέστε ένα δικαίωμα στο αρχείο info.plist.


#### <a name="step-1-enable-broker-mode-in-your-application"></a>Βήμα 1: Ενεργοποίηση της λειτουργίας broker στην εφαρμογή σας
Η δυνατότητα για την εφαρμογή σας για να χρησιμοποιήσετε το broker ενεργοποιείται όταν δημιουργείτε το "περιβάλλον" ή την αρχική ρύθμιση του αντικειμένου σας τον έλεγχο ταυτότητας. Μπορείτε να το κάνετε αυτό, ορίζοντας τον τύπο τα διαπιστευτήριά σας στον κώδικά σας:

```
/*! See the ADCredentialsType enumeration definition for details */
@propertyADCredentialsType credentialsType;
```
Το `AD_CREDENTIALS_AUTO` η ρύθμιση επιτρέπει στο Microsoft SDK ταυτότητα για να δοκιμάσετε να καλέσετε broker, `AD_CREDENTIALS_EMBEDDED` θα εμποδίσει το Microsoft SDK ταυτότητας κλήση για να το broker.

#### <a name="step-2-registering-a-url-scheme"></a>Βήμα 2: Καταχώρηση σε συνδυασμό διεύθυνσης URL
Της πλατφόρμας Microsoft ταυτότητας χρησιμοποιεί διευθύνσεις URL για να καλέσετε broker και, στη συνέχεια, να επαναφέρετε τον έλεγχο πίσω στην εφαρμογή σας. Για να ολοκληρώσετε αυτήν χρόνο αποστολής και επιστροφής πρέπει σε συνδυασμό διεύθυνση URL που έχουν καταχωρηθεί για την εφαρμογή σας που θα γνωρίζει την πλατφόρμα Microsoft ταυτότητα. Αυτό μπορεί να είναι εκτός από τυχόν άλλα προγράμματα εφαρμογής που ενδέχεται να έχετε καταχωρήσει προηγουμένως με την εφαρμογή σας.

> [AZURE.WARNING]
Σας συνιστούμε να πραγματοποιήσετε αρκετά μοναδικό για να ελαχιστοποιήσετε τις πιθανότητες από άλλη εφαρμογή χρησιμοποιώντας το ίδιο σχήμα διεύθυνση URL του συνδυασμού διεύθυνσης URL. Apple δεν επιβάλλει τη μοναδικότητα συνδυασμούς URL που έχουν καταχωρηθεί στο app store.

Ακολουθεί ένα παράδειγμα του πώς εμφανίζεται στη ρύθμιση παραμέτρων του έργου σας. Αυτό μπορεί να γίνει και στο XCode καθώς και:

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>CFBundleURLName</key>
        <string>com.myapp.mytestapp</string>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>x-msauth-mytestiosapp</string>
        </array>
    </dict>
</array>
```

#### <a name="step-3-establish-a-new-redirect-uri-with-your-url-scheme"></a>Βήμα 3: Δημιουργήστε μια νέα redirect URI με το συνδυασμό διεύθυνσης URL

Για να βεβαιωθείτε ότι θα σας επιστρέφει πάντα τα διακριτικά διαπιστευτηρίων για τη σωστή εφαρμογή, πρέπει να βεβαιωθείτε ότι ονομάζουμε πίσω στην εφαρμογή σας με τον τρόπο που μπορεί να επαληθεύσει το λειτουργικό σύστημα για iOS. Το λειτουργικό σύστημα iOS αναφορών για εφαρμογές broker Microsoft το Αναγνωριστικό πακέτο της εφαρμογής την κλήση. Αυτό δεν είναι δυνατό να πλαστογραφηθεί από μια εφαρμογή επικίνδυνο. Γι ' αυτό, θα σας αξιοποιήσετε αυτήν μαζί με το URI μας broker εφαρμογής για να βεβαιωθείτε ότι τα διακριτικά επιστρέφονται τη σωστή εφαρμογή του. Απαιτείται να καθορίσετε αυτό URI δύο μοναδικές ανακατεύθυνσης στην εφαρμογή σας και να ορίσετε ως URI ανακατεύθυνση στην πύλη μας προγραμματιστής.

Η ανακατεύθυνση URI πρέπει να είναι στη σωστή μορφή:

`<app-scheme>://<your.bundle.id>`

ex: *x-msauth-mytestiosapp://com.myapp.mytestapp*

Αυτό URI ανακατεύθυνση πρέπει να έχει καθοριστεί σε με την [πύλη του Azure κλασική](https://manage.windowsazure.com/)την εγγραφή σας εφαρμογή. Για περισσότερες πληροφορίες σχετικά με την καταχώρηση εφαρμογής Azure AD, ανατρέξτε στο θέμα [ολοκλήρωση με Azure Active Directory](./develop/active-directory-how-to-integrate.md).


##### <a name="step-3a-add-a-redirect-uri-in-your-app-and-dev-portal-to-support-certificate-based-authentication"></a>Βήμα 3α: Προσθήκη μιας URI ανακατεύθυνσης στην πύλη εφαρμογή και προγραμματιστές να υποστηρίζει έλεγχο ταυτότητας βάσει πιστοποιητικού

Για την υποστήριξη πιστοποιητικού έλεγχος ταυτότητας με βάση μια δεύτερη "msauth" πρέπει να έχει εγγραφεί σε εφαρμογή σας και του [Azure κλασική πύλη](https://manage.windowsazure.com/) για το χειρισμό πιστοποιητικό ελέγχου ταυτότητας, εάν θέλετε να προσθέσετε αυτήν την υποστήριξη στην εφαρμογή σας.

`msauth://code/<broker-redirect-uri-in-url-encoded-form>`

ex: *msauth://code/x-msauth-mytestiosapp%3A%2F%2Fcom.myapp.mytestapp*


#### <a name="step-4-ios9-add-a-configuration-parameter-to-your-app"></a>Βήμα 4: iOS9: Προσθήκη μιας παραμέτρου ρύθμισης παραμέτρων για την εφαρμογή σας

ADAL χρησιμοποιεί – canOpenURL: για να ελέγξετε εάν το broker είναι εγκατεστημένο στη συσκευή. Στο iOS 9 Apple κλειδωμένος από το τι να αναζητήσετε συνδυασμοί μια εφαρμογή. Θα πρέπει να προσθέσετε "msauth" στην ενότητα LSApplicationQueriesSchemes σας `info.plist file`.

<key>LSApplicationQueriesSchemes</key>
<array>
     <string>msauth</string>
</array>

### <a name="youve-configured-sso"></a>Έχετε ρυθμίσει τις παραμέτρους SSO!

Τώρα Microsoft SDK ταυτότητας θα αυτόματα κοινή χρήση διαπιστευτηρίων σε εφαρμογές σας και κλήση broker εάν υπάρχει στη συσκευή τους.
