<properties
    pageTitle="Αντιμετώπιση προβλημάτων υποβαθμισμένο κατάστασης στη Διαχείριση κίνηση Azure"
    description="Τρόπος αντιμετώπισης προβλημάτων προφίλ διαχείρισης κίνηση όταν να εμφανίζεται ως υποβαθμισμένο κατάστασης."
    services="traffic-manager"
    documentationCenter=""
    authors="sdwheeler"
    manager="carmonm"
    editor=""
/>
<tags
    ms.service="traffic-manager"
    ms.devlang="na"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="infrastructure-services"
    ms.date="10/11/2016"
    ms.author="sewhee"
/>

# <a name="troubleshooting-degraded-state-on-azure-traffic-manager"></a>Αντιμετώπιση προβλημάτων υποβαθμισμένο κατάστασης στη Διαχείριση κίνηση Azure

Σε αυτό το άρθρο περιγράφει τον τρόπο αντιμετώπισης προφίλ του Azure κίνηση Manager που εμφανίζει μια υποβαθμίζονται κατάσταση. Για αυτό το σενάριο, λάβετε υπόψη σας ότι έχετε ρυθμίσει τις παραμέτρους ενός προφίλ διαχείρισης κίνηση που δείχνει σε ορισμένες από τις υπηρεσίες cloudapp.net φιλοξενούνται. Όταν επιλέγετε την εύρυθμη λειτουργία της τον προϊστάμενό σας κίνηση, μπορείτε να δείτε ότι η κατάσταση υποβιβάζεται.

![κατάσταση υποβαθμίζονται](./media/traffic-manager-troubleshooting-degraded/traffic-manager-degraded.png)

Εάν μεταβείτε στην καρτέλα τελικά σημεία του αυτό το προφίλ, θα δείτε ένα ή περισσότερα από τα τελικά σημεία με κατάσταση χωρίς σύνδεση:

![εργασία χωρίς σύνδεση](./media/traffic-manager-troubleshooting-degraded/traffic-manager-offline.png)

## <a name="understanding-traffic-manager-probes"></a>Κατανόηση της διαχείρισης κίνηση καθετήρες

- Διαχείριση κίνηση θεωρεί ότι ένα τελικό σημείο για να ONLINE μόνο κατά τη δοκιμή του λαμβάνει μια απόκριση HTTP 200 πίσω από τη διαδρομή δοκιμή του. Άλλη-200 απάντηση είναι ένα σφάλμα.
- Ανακατεύθυνση 30 x αποτυγχάνει, ακόμα και εάν η διεύθυνση URL ανακατεύθυνσης επιστρέφει μια 200.
- Για καθετήρες HTTPs, αγνοούνται σφάλματα πιστοποιητικού.
- Το περιεχόμενό της διαδρομής δοκιμή του δεν έχει σημασία, με την προϋπόθεση ότι επιστρέφεται μια 200. Διερεύνηση μιας διεύθυνσης URL σε ορισμένες στατικό περιεχόμενο, όπως "/ favicon.ico" είναι μια τεχνική κοινές. Δυναμικό περιεχόμενο, όπως και οι σελίδες ASP, ενδέχεται να μην επιστρέφει πάντα 200, ακόμα και όταν η εφαρμογή είναι σε καλή κατάσταση.
- Βέλτιστη πρακτική είναι να ορίσετε τη διαδρομή δοκιμή του σε κάτι που διαθέτει αρκετό λογικής για να καθορίσετε ότι η τοποθεσία είναι προς τα επάνω ή προς τα κάτω. Στο προηγούμενο παράδειγμα, ρυθμίζοντας τη διαδρομή σε "/ favicon.ico", που είναι διαθέσιμες μόνο δοκιμών που w3wp.exe να ανταποκρίνεται. Αυτή η δοκιμή του δεν μπορεί να υποδεικνύουν ότι η εφαρμογή web που είναι σε καλή κατάσταση. Θα είναι η καλύτερη επιλογή για να ορίσετε μια διαδρομή σε μια κάτι όπως "/ Probe.aspx" που έχει λογική για να προσδιορίσετε την εύρυθμη λειτουργία της τοποθεσίας. Για παράδειγμα, που θα μπορούσε να χρησιμοποιήστε μετρητές επιδόσεων για χρήση της CPU ή να μετρήσετε το πλήθος των αποτυχημένων αιτήσεων. Ή μπορεί να προσπαθείτε να αποκτήσετε πρόσβαση σε πόρους βάσεων δεδομένων ή την κατάσταση λειτουργίας για να βεβαιωθείτε ότι λειτουργεί η εφαρμογή web.
- Εάν είναι υποβαθμισμένο όλα τα τελικά σημεία σε ένα προφίλ, στη συνέχεια, Διαχείριση κίνηση αντιμετωπίζει όλα τα τελικά σημεία ως σε καλή κατάσταση και διαδρομές κίνησης σε όλα τα τελικά σημεία. Αυτή η συμπεριφορά εξασφαλίζει ότι προβλήματα με το μηχανισμό διερεύνησης δεν έχει ως αποτέλεσμα μια ολοκληρωμένη μη διαθεσιμότητα της υπηρεσίας σας.

## <a name="troubleshooting"></a>Αντιμετώπιση προβλημάτων

Για να αντιμετωπίσετε αποτυχία δοκιμή του, χρειάζεστε ένα εργαλείο που εμφανίζεται ο κωδικός κατάστασης HTTP αποστολέα από τη διεύθυνση URL δοκιμή του. Υπάρχουν πολλά διαθέσιμα εργαλεία που σας δείχνουν τα ανεπεξέργαστα απόκριση HTTP.

* [Fiddler](http://www.telerik.com/fiddler)
* [καμπύλη](https://curl.haxx.se/)
* [wget](http://gnuwin32.sourceforge.net/packages/wget.htm)

Επίσης, μπορείτε να χρησιμοποιήσετε την καρτέλα δικτύου από τα εργαλεία εντοπισμού F12 στον Internet Explorer για να προβάλετε τις απαντήσεις HTTP.

Για αυτό το παράδειγμα για να δείτε την απάντηση από διεύθυνση URL μας δοκιμή του: http://watestsdp2008r2.cloudapp.net:80/Διερεύνηση. Το παρακάτω παράδειγμα PowerShell απεικονίζει το πρόβλημα.

```powershell
    Invoke-WebRequest 'http://watestsdp2008r2.cloudapp.net/Probe' -MaximumRedirection 0 -ErrorAction SilentlyContinue | Select-Object StatusCode,StatusDescription
```

Παράδειγμα εξόδου:

```text
    StatusCode StatusDescription
    ---------- -----------------
            301 Moved Permanently
```

Παρατηρήστε ότι θα σας λάβει απόκριση redirect. Όπως αναφέρθηκε προηγουμένως, οποιαδήποτε StatusCode εκτός από 200 θεωρείται αποτυχία. Διαχείριση κίνηση αλλάζει την κατάσταση τελικού σημείου σε χωρίς σύνδεση. Για να επιλύσετε το πρόβλημα, ελέγξτε τις ρυθμίσεις παραμέτρων τοποθεσίας Web για να βεβαιωθείτε ότι το πρώτο γράμμα κάθε λέξης StatusCode μπορεί να επιστραφεί από τη διαδρομή δοκιμή του. Ρυθμίστε ξανά τη διερεύνηση Manager κίνηση για να υποδείξετε μια διαδρομή που επιστρέφει μια 200.

Εάν σας δοκιμή του χρησιμοποιεί το πρωτόκολλο HTTPS, ίσως χρειαστεί να απενεργοποιήσετε το πιστοποιητικό ελέγχου για να αποφύγετε σφάλματα SSL/TLS κατά τον έλεγχο. Οι παρακάτω προτάσεις PowerShell απενεργοποιήσετε την επικύρωση πιστοποιητικών για την τρέχουσα περίοδο λειτουργίας PowerShell:

```powershell
    add-type @"
    using System.Net;
    using System.Security.Cryptography.X509Certificates;
    public class TrustAllCertsPolicy : ICertificatePolicy {
        public bool CheckValidationResult(
        ServicePoint srvPoint, X509Certificate certificate,
        WebRequest request, int certificateProblem) {
        return true;
        }
    }
    "@
    [System.Net.ServicePointManager]::CertificatePolicy = New-Object TrustAllCertsPolicy
```

## <a name="next-steps"></a>Επόμενα βήματα

[Σχετικά με τη Διαχείριση κίνηση κυκλοφορίας μεθόδων δρομολόγησης](traffic-manager-routing-methods.md)

[Τι είναι η διαχείριση κυκλοφορία](traffic-manager-overview.md)

[Υπηρεσίες cloud](http://go.microsoft.com/fwlink/?LinkId=314074)

[Εφαρμογές Azure Web](https://azure.microsoft.com/documentation/services/app-service/web/)

[Λειτουργίες στη Διαχείριση κίνηση (REST API υλικό αναφοράς)](http://go.microsoft.com/fwlink/?LinkId=313584)

[Cmdlet διαχείρισης κίνηση του Azure][1]

[1]: https://msdn.microsoft.com/library/mt125941(v=azure.200).aspx
