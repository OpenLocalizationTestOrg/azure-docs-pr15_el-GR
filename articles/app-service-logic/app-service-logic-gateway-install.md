<properties
   pageTitle="Εφαρμογές λογικής εγκατάσταση πύλης δεδομένων εσωτερικής εγκατάστασης | Microsoft Azure"
   description="Πληροφορίες σχετικά με τον τρόπο για να εγκαταστήσετε την πύλη δεδομένων εσωτερικής εγκατάστασης για χρήση σε μια εφαρμογή για λογική."
   services="logic-apps"
   documentationCenter=".net,nodejs,java"
   authors="jeffhollan"
   manager="erikre"
   editor=""/>

<tags
   ms.service="logic-apps"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="integration"
   ms.date="07/05/2016"
   ms.author="jehollan"/>

# <a name="install-the-on-premises-data-gateway-for-logic-apps"></a>Εγκατάσταση της πύλης δεδομένων εσωτερικής εγκατάστασης για τις εφαρμογές της λογικής

## <a name="installation-and-configuration"></a>Εγκατάσταση και ρύθμιση παραμέτρων

### <a name="prerequisites"></a>Προαπαιτούμενα στοιχεία

Ελάχιστο:

* Διαίρεσης 4,5 .NET framework
* την έκδοση 64 bit των Windows 7 ή Windows Server 2008 R2 (ή νεότερη έκδοση)

Προτεινόμενα:

* 8 πυρήνα CPU
* 8 GB μνήμης
* έκδοση 64 bit των Windows 2012 R2 (ή νεότερη έκδοση)

Σχετικά θέματα:

* Δεν μπορείτε να εγκαταστήσετε μια πύλη σε έναν ελεγκτή τομέα.
* Πρέπει να εγκαταστήσετε μια πύλη σε έναν υπολογιστή, όπως φορητό υπολογιστή, που μπορεί να έχει απενεργοποιηθεί, σε κατάσταση αναστολής λειτουργίας, ή δεν είναι συνδεδεμένος στο Internet, επειδή η πύλη δεν είναι δυνατό να εκτελεστεί κάτω από οποιαδήποτε από αυτές τις περιπτώσεις. Επίσης, να επιδόσεων πύλης μπορεί να υποστεί μέσω ασύρματης δικτύου.

### <a name="install-a-gateway"></a>Εγκατάσταση μιας πύλης

Μπορείτε να λάβετε το [πρόγραμμα εγκατάστασης για την πύλη δεδομένων εσωτερικής εγκατάστασης εδώ](http://go.microsoft.com/fwlink/?LinkID=820931&clcid=0x409).

Καθορισμός **πύλης δεδομένων εσωτερικής εγκατάστασης** ως τη λειτουργία, συνδεθείτε με τον εταιρικό ή σχολικό λογαριασμό, και, στη συνέχεια, είτε ρυθμίσετε μια νέα πύλη ή μετεγκατάσταση, επαναφέρετε ή να αναλάβετε τον έλεγχο ενός υπάρχοντος πύλης.

* Για να ρυθμίσετε τις παραμέτρους μιας πύλης, πληκτρολογήστε ένα **όνομα** για το και ένα **κλειδί αποκατάστασης**, και, στη συνέχεια, κάντε κλικ ή πατήστε **Ρύθμιση παραμέτρων**.

    Καθορίστε έναν αριθμό-κλειδί αποκατάστασης που περιέχει τουλάχιστον οκτώ χαρακτήρες και διατηρήστε την επιλογή σε ασφαλές σημείο. Εάν θέλετε να μετεγκαταστήσετε, να επαναφέρετε ή να αναλάβετε την πύλη, θα χρειαστεί αυτό το κλειδί.

* Για να μετεγκαταστήσετε, να επαναφέρετε ή να αναλάβετε τον έλεγχο ενός υπάρχοντος πύλης, δώστε το κλειδί αποκατάστασης που έχει καθοριστεί κατά τη δημιουργία της πύλης.

### <a name="restart-the-gateway"></a>Επανεκκίνηση της πύλης

Η πύλη εκτελείται ως υπηρεσία των Windows και, όπως συμβαίνει με οποιαδήποτε άλλη υπηρεσία των Windows, μπορείτε να ξεκινήσετε και να διακόψετε την με πολλούς τρόπους. Για παράδειγμα, μπορείτε να ανοίξετε μια γραμμή εντολών με αναβαθμισμένα δικαιώματα στον υπολογιστή όπου εκτελείται η πύλη και, στη συνέχεια, εκτελέστε μία από αυτές τις εντολές:

* Για να διακόψετε την υπηρεσία, εκτέλεση αυτής της εντολής:

    `net stop PBIEgwService`

* Για να ξεκινήσετε την υπηρεσία, εκτέλεση αυτής της εντολής:

    `net start PBIEgwService`

### <a name="configure-a-firewall-or-proxy"></a>Ρύθμιση παραμέτρων του τείχους προστασίας ή διακομιστή μεσολάβησης

Για πληροφορίες σχετικά με το πώς να δώσετε πληροφορίες διακομιστή μεσολάβησης για την πύλη, ανατρέξτε στο θέμα [Ρύθμιση παραμέτρων διακομιστή μεσολάβησης](https://powerbi.microsoft.com/en-us/documentation/powerbi-gateway-proxy/).

Μπορείτε να επαληθεύσετε εάν το τείχος προστασίας ή διακομιστή μεσολάβησης, ενδεχομένως να αποκλείουν συνδέσεις, εκτελώντας την ακόλουθη εντολή από μια γραμμή εντολών του PowerShell. Αυτό θα ελέγξετε συνδεσιμότητας με το Azure Bus υπηρεσίας. Αυτό μόνο ελέγχει τη συνδεσιμότητα του δικτύου και δεν διαθέτει σχετίζεται με την υπηρεσία cloud server ή της πύλης. Βοηθά να προσδιορίσετε αν ο υπολογιστής σας πραγματικά να μπορούν να μεταβούν στο Internet.

`Test-NetConnection -ComputerName watchdog.servicebus.windows.net -Port 9350`

Τα αποτελέσματα θα πρέπει να μοιάζει με αυτό το παράδειγμα. Εάν **TcpTestSucceeded** δεν είναι αληθής, ενδέχεται να έχει αποκλειστεί από ένα τείχος προστασίας.

```
ComputerName           : watchdog.servicebus.windows.net
RemoteAddress          : 70.37.104.240
RemotePort             : 5672
InterfaceAlias         : vEthernet (Broadcom NetXtreme Gigabit Ethernet - Virtual Switch)
SourceAddress          : 10.120.60.105
PingSucceeded          : False
PingReplyDetails (RTT) : 0 ms
TcpTestSucceeded       : True
```

Εάν θέλετε να είναι πλήρη, αντικαταστήστε τις τιμές **όνομα υπολογιστή** και τη **θύρα** με αυτούς που αναφέρονται στην ενότητα [Ρύθμιση παραμέτρων θύρες](#configure-ports) αργότερα σε αυτό το θέμα.

Το τείχος προστασίας μπορεί επίσης να εμποδίζει τις συνδέσεις που κάνει την Bus υπηρεσίας Azure στα κέντρα δεδομένων Azure. Εάν πρόκειται για την περίπτωση, θα θέλετε να whitelist (Κατάργηση του αποκλεισμού) όλες οι διευθύνσεις IP για την περιοχή σας για αυτά τα κέντρα δεδομένων. Μπορείτε να λάβετε μια λίστα με [διευθύνσεις Azure IP εδώ](https://www.microsoft.com/download/details.aspx?id=41653).

### <a name="configure-ports"></a>Ρύθμιση παραμέτρων θύρες

Η πύλη δημιουργεί μια σύνδεση εξερχομένων σε Bus υπηρεσίας Azure. Επικοινωνεί σε εξερχομένων θύρες: TCP 443 (προεπιλογή), 5671, 5672, 9350 έως και 9354. Η πύλη δεν απαιτεί θύρες εισερχομένων.

Μάθετε περισσότερα σχετικά με τις [υβριδικές λύσεις](../service-bus-messaging/service-bus-fundamentals-hybrid-solutions.md).

| ΟΝΌΜΑΤΑ ΤΟΜΈΩΝ | ΘΎΡΕΣ ΕΞΕΡΧΟΜΈΝΩΝ | ΠΕΡΙΓΡΑΦΉ |
| ----- | ------ | ------ |
| *. analysis.windows.net | 443 | HTTPS |
| *. login.windows.net | 443 | HTTPS |
| *. servicebus.windows.net |5671 5672 | Για προχωρημένους μηνυμάτων Protocol (AMQP) |
| *. servicebus.windows.net | 443, 9350 9354 | Ακροατών στην υπηρεσία Bus μετάδοση μέσω TCP (απαιτεί 443 για διακριτικού απόκτηση ελέγχου πρόσβασης) |
| *. frontend.clouddatahub.net | 443 | HTTPS |
| *. core.windows.net | 443 | HTTPS |
| Login.microsoftonline.com | 443 | HTTPS |
| *. msftncsi.com | 443 | Χρησιμοποιείται για τη δοκιμή σύνδεσης στο internet, εάν η πύλη δεν είναι προσβάσιμη από την υπηρεσία Power BI. |

Εάν πρέπει να λευκή λίστα διευθύνσεων IP αντί για τους τομείς, λήψης και χρησιμοποιήστε τη [λίστα περιοχές διευθύνσεων IP του Microsoft Azure κέντρου δεδομένων](https://www.microsoft.com/download/details.aspx?id=41653). Σε ορισμένες περιπτώσεις, οι συνδέσεις Azure Service Bus θα πραγματοποιηθεί με διεύθυνση IP αντί για τα ονόματα τομέα πλήρως προσδιορισμένη.

### <a name="sign-in-account"></a>Είσοδος στο λογαριασμό

Οι χρήστες θα συνδεθείτε με είτε έναν εταιρικό ή σχολικό λογαριασμό. Πρόκειται για τον εταιρικό λογαριασμό σας. Εάν έχετε εγγραφεί για μια προσφορά του Office 365 και δεν παρέχουν το ηλεκτρονικό ταχυδρομείο σας πραγματική εργασία, αυτό μπορεί να μοιάζει με jeff@contoso.onmicrosoft.com. Το λογαριασμό σας, μέσα σε μια υπηρεσία cloud, αποθηκεύεται μέσα σε ένα μισθωτή στο Azure Active Directory (AAD). Στις περισσότερες περιπτώσεις, UPN του λογαριασμού σας AAD θα ταιριάζουν με τη διεύθυνση ηλεκτρονικού ταχυδρομείου.

### <a name="windows-service-account"></a>Λογαριασμός υπηρεσίας Windows

Η πύλη δεδομένων εσωτερικής εγκατάστασης έχει ρυθμιστεί να χρησιμοποιεί NT SERVICE\PBIEgwService για τα διαπιστευτήρια σύνδεσης υπηρεσίας Windows. Από προεπιλογή, αυτό δεν έχει στα δεξιά του αρχείου καταγραφής ως υπηρεσία. Αυτό είναι στο περιβάλλον του υπολογιστή στον οποίο εγκαθιστάτε την πύλη.

Αυτό δεν είναι το λογαριασμό που χρησιμοποιείται για τη σύνδεση προελεύσεων δεδομένων εσωτερικής εγκατάστασης ή τον εταιρικό ή σχολικό λογαριασμό με τον οποίο μπορείτε να εισέλθετε στο cloud services.

##<a name="frequently-asked-questions"></a>Συνήθεις ερωτήσεις

### <a name="general"></a>Γενικά

**Ερώτηση**: ποια αρχεία προέλευσης δεδομένων της πύλης υποστηρίζει;<br/>
**Απάντηση**: το αυτό σύνταξη SQL Server.

**Ερώτηση**: χρειάζομαι μια πύλη για προελεύσεις δεδομένων στο cloud, όπως SQL Azure; <br/>
**Απάντηση**: όχι. Μια πύλη συνδέεται με μόνο προελεύσεις δεδομένων εσωτερικής εγκατάστασης.

**Ερώτηση**: Τι είναι η πραγματική υπηρεσία των Windows που ονομάζεται;<br/>
**Απάντηση**: σε υπηρεσίες, η πύλη ονομάζεται υπηρεσία πύλης του Power BI για μεγάλες επιχειρήσεις.

**Ερώτηση**: υπάρχουν οποιαδήποτε εισερχόμενες συνδέσεις για την πύλη από το cloud; <br/>
**Απάντηση**: όχι. Η πύλη χρησιμοποιεί εξερχόμενες συνδέσεις για να Bus υπηρεσίας Azure.

**Ερώτηση**: Τι γίνεται εάν να αποκλείσω εξερχόμενες συνδέσεις; Τι πρέπει να ανοίξετε; <br/>
**Απάντηση**: ανατρέξτε στο θέμα θύρες και κεντρικούς υπολογιστές που χρησιμοποιεί την πύλη.


**Ερώτηση**: Η της πύλης πρέπει να έχει εγκατασταθεί στον ίδιο υπολογιστή με το αρχείο προέλευσης δεδομένων; <br/>
**Απάντηση**: όχι. Η πύλη θα συνδεθείτε στην προέλευση δεδομένων χρησιμοποιώντας τις πληροφορίες σύνδεσης που παρέχεται. Θεωρήστε ότι η πύλη είναι μια εφαρμογή προγράμματος-πελάτη με αυτήν την έννοια. Το απλώς θα πρέπει να είναι σε θέση να συνδεθείτε με το όνομα του διακομιστή που παρέχεται.


**Ερώτηση**: Τι είναι το λανθάνων χρόνος εκτέλεσης ερωτημάτων σε μια προέλευση δεδομένων από την πύλη; Τι είναι η καλύτερη αρχιτεκτονική; <br/>
**Απάντηση**: για να μειώσετε την αδράνεια δικτύου, εγκαταστήστε την πύλη όσο πιο κοντά στην προέλευση δεδομένων όσο το δυνατόν. Εάν μπορείτε να εγκαταστήσετε την πύλη στην προέλευση δεδομένων πραγματικού, αυτό θα Ελαχιστοποίηση το λανθάνοντος χρόνου που έχει εισαχθεί. Εξετάστε το ενδεχόμενο καθώς και τα κέντρα δεδομένων. Για παράδειγμα, εάν υπηρεσία σας χρησιμοποιεί το κέντρο δεδομένων η.π.α. Δυτική και έχετε SQL Server που φιλοξενούνται σε μια Εικονική Azure, θα θέλετε να έχουν καθώς και η Εικονική Azure στα Δυτική ΗΠΑ. Αυτό θα Ελαχιστοποίηση λανθάνοντος χρόνου και να αποφύγετε χρεώσεων εξόδου σε η Εικονική Azure.


**Ερώτηση**: υπάρχουν τις απαιτήσεις για το εύρος ζώνης δικτύου; <br/>
**Απάντηση**: συνιστάται να έχουν καλή μετάδοσης για τη σύνδεση δικτύου σας. Κάθε περιβάλλον είναι διαφορετικό, και την ποσότητα των δεδομένων που στέλνεται θα επηρεάσει τα αποτελέσματα. Χρήση ExpressRoute μπορεί να βοηθήσει για να εξασφαλίσετε ένα επίπεδο μετάδοσης μεταξύ της εσωτερικής εγκατάστασης και τα κέντρα δεδομένων Azure.

Μπορείτε να χρησιμοποιήσετε την εφαρμογή Azure ταχύτητα δοκιμής εργαλείο τρίτου κατασκευαστή για να μετρήσετε τι είναι το μεταγωγή.


**Ερώτηση**: να εκτελέσετε την πύλη υπηρεσία των Windows με ένα λογαριασμό Azure Active Directory; <br/>
**Απάντηση**: όχι. Η υπηρεσία των Windows πρέπει να έχετε έναν έγκυρο λογαριασμό των Windows. Από προεπιλογή, θα εκτελείται με το αναγνωριστικό ΑΣΦΑΛΕΊΑΣ υπηρεσίας, NT SERVICE\PBIEgwService.


**Ερώτηση**: πώς αποτελέσματα στέλνονται πίσω στο cloud; <br/>
**Απάντηση**: Αυτή η ενέργεια εκτελείται κατά το Azure Bus υπηρεσίας. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα Πώς λειτουργεί.


**Ερώτηση**: πού αποθηκεύονται τα διαπιστευτήριά μου; <br/>
**Απάντηση**: τα διαπιστευτήρια που καταχωρείτε για μια προέλευση δεδομένων αποθηκεύονται κρυπτογραφημένα στην υπηρεσία cloud πύλης. Τα διαπιστευτήρια αποκρυπτογράφηση με την πύλη εσωτερικής εγκατάστασης.

### <a name="high-availabilitydisaster-recovery"></a>Υψηλή διαθεσιμότητα/αποκατάσταση

**Ερώτηση**: υπάρχουν όλα τα σχέδια για ενεργοποίηση σεναρίων υψηλής διαθεσιμότητας με την πύλη; <br/>
**Απάντηση**: αυτό είναι σε ο χάρτης, αλλά θα σας δεν έχετε ακόμη μια λωρίδα χρόνου.


**Ερώτηση**: ποιες επιλογές είναι διαθέσιμες για αποκατάσταση; <br/>
**Απάντηση**: μπορείτε να χρησιμοποιήσετε το κλειδί αποκατάστασης για να επαναφέρετε ή να μετακινήσετε μια πύλη. Κατά την εγκατάσταση της πύλης, καθορίστε το κλειδί αποκατάστασης.


**Ερώτηση**: Τι είναι τα πλεονεκτήματα της το κλειδί αποκατάστασης; <br/>
**Απάντηση**: παρέχει ένας τρόπος για να μετεγκαταστήσετε ή ανάκτηση των ρυθμίσεων πύλης μετά από μια καταστροφή.

### <a name="troubleshooting"></a>Αντιμετώπιση προβλημάτων

**Ερώτηση**: πού βρίσκονται τα αρχεία καταγραφής πύλης; <br/>
**Απάντηση**: ανατρέξτε στο θέμα εργαλεία αργότερα σε αυτό το θέμα.


**Ερώτηση**: πώς μπορώ να δω τα ερωτήματα που που αποστέλλονται με την προέλευση δεδομένων εσωτερικής εγκατάστασης; <br/>
**Απάντηση**: μπορείτε να ενεργοποιήσετε την ανίχνευση του ερωτήματος, που περιλαμβάνει τα ερωτήματα που στέλνεται. Να θυμάστε ότι για να αλλάξετε την αρχική τιμή κατά τη διαδικασία αντιμετώπισης προβλημάτων. Κλείσετε το ερώτημα με δυνατότητα ανίχνευσης θα προκαλέσει τα αρχεία καταγραφής, ώστε να είναι μεγαλύτερο.

Μπορείτε επίσης να ανατρέξετε σε εργαλεία που διαθέτει το αρχείο προέλευσης δεδομένων για ερωτήματα ανίχνευση. Για παράδειγμα, μπορείτε να χρησιμοποιήσετε συμβάντα εκτεταμένης ή SQL Profiler για SQL Server και των υπηρεσιών ανάλυσης.

## <a name="how-the-gateway-works"></a>Πώς λειτουργεί η πύλη

Όταν ένας χρήστης αλληλεπιδρά με ένα στοιχείο που είναι συνδεδεμένη με μια προέλευση δεδομένων εσωτερικής εγκατάστασης:

1. Η υπηρεσία cloud δημιουργεί ένα ερώτημα, μαζί με το κρυπτογραφημένο διαπιστευτήρια για την προέλευση δεδομένων, και στέλνει το ερώτημα στην ουρά για την πύλη για την επεξεργασία.
1. Η υπηρεσία αναλύει το ερώτημα και προωθεί την πρόσκληση για να το Azure Bus υπηρεσίας.
1. Η πύλη δεδομένων εσωτερικής εγκατάστασης σταθμοσκοπεί Azure Service Bus για αιτήσεων σε εκκρεμότητα.
1. Η πύλη λαμβάνει το ερώτημα, αποκρυπτογραφεί τα διαπιστευτήρια και συνδέεται με τα αρχεία προέλευσης δεδομένων με αυτά τα διαπιστευτήρια.
1. Η πύλη στέλνει το ερώτημα με την προέλευση δεδομένων για εκτέλεση.
1. Τα αποτελέσματα αποστέλλονται από την προέλευση δεδομένων ξανά για την πύλη και, στη συνέχεια, στην την υπηρεσία cloud. Στη συνέχεια, την υπηρεσία χρησιμοποιεί τα αποτελέσματα.

## <a name="troubleshooting"></a>Αντιμετώπιση προβλημάτων

### <a name="update-to-the-latest-version"></a>Ενημέρωση στην πιο πρόσφατη έκδοση

Πολλά θέματα να εντοπίσει κατά την έκδοση πύλης έχει λήξει.  Είναι μια καλή πρακτική γενικά για να βεβαιωθείτε ότι βρίσκεστε στην πιο πρόσφατη έκδοση.  Εάν δεν έχετε ενημερώσει την πύλη για ένα μήνα, ή το μήκος, που μπορεί να θέλετε να μπορείτε να εγκαταστήσετε την πιο πρόσφατη έκδοση της πύλης και δείτε εάν μπορείτε να αναπαραγάγετε το ζήτημα.

### <a name="error-failed-to-add-user-to-group--2147463168-pbiegwservice-performance-log-users-"></a>Σφάλμα: Απέτυχε η προσθήκη χρηστών σε ομάδα. (-2147463168 PBIEgwService επιδόσεων καταγραφής χρήστες)

Ενδέχεται να λάβετε αυτό το σφάλμα εάν προσπαθείτε να εγκαταστήσετε την πύλη σε έναν ελεγκτή τομέα, η οποία δεν υποστηρίζεται. Θα χρειαστεί να αναπτύξετε την πύλη σε έναν υπολογιστή που δεν είναι ελεγκτή τομέα.

## <a name="tools"></a>Εργαλεία

### <a name="collecting-logs-from-the-gateway-configurator"></a>Συλλογή αρχείων καταγραφής από το διαμορφωτή πύλης

Μπορείτε να συλλέξετε πολλά αρχεία καταγραφής για την πύλη. Ξεκινούν πάντα με τα αρχεία καταγραφής!

#### <a name="installer-logs"></a>Αρχεία καταγραφής του προγράμματος εγκατάστασης

`%localappdata%\Temp\Power_BI_Gateway_–Enterprise.log`

#### <a name="configuration-logs"></a>Ρύθμιση παραμέτρων αρχείων καταγραφής

`%localappdata%\Microsoft\Power BI Enterprise Gateway\GatewayConfigurator.log`

#### <a name="enterprise-gateway-service-logs"></a>Αρχεία καταγραφής από την υπηρεσία πύλης για μεγάλες επιχειρήσεις

`C:\Users\PBIEgwService\AppData\Local\Microsoft\Power BI Enterprise Gateway\EnterpriseGateway.log`

#### <a name="event-logs"></a>Αρχεία καταγραφής συμβάντων

Τα αρχεία καταγραφής από την πύλη διαχείρισης δεδομένων και PowerBIGateway βρίσκονται στην περιοχή **εφαρμογή αρχεία καταγραφής και υπηρεσιών**.

### <a name="fiddler-trace"></a>Ανίχνευση fiddler

[Fiddler](http://www.telerik.com/fiddler) είναι ένα δωρεάν εργαλείο από Telerik που παρακολουθεί την κυκλοφορία HTTP.  Μπορείτε να δείτε το πίσω και να τέταρτο με το Power BI υπηρεσίας από υπολογιστή-πελάτη. Αυτό μπορεί να εμφανίζονται σφάλματα και άλλες σχετικές πληροφορίες.

## <a name="next-steps"></a>Επόμενα βήματα
- [Δημιουργήστε μια σύνδεση εσωτερικής εγκατάστασης σε λογική εφαρμογών](app-service-logic-gateway-connection.md)
- [Δυνατοτήτων ενσωμάτωσης για μεγάλες επιχειρήσεις](app-service-logic-enterprise-integration-overview.md)
- [Γραμμές σύνδεσης λογικής εφαρμογών](../connectors/apis-list.md)