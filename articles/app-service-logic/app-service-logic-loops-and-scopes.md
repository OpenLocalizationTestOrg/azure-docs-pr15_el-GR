<properties
   pageTitle="Εφαρμογές λογικής επαναλήψεις, τα πεδία και Debatching | Microsoft Azure"
   description="Επανάληψη εφαρμογής λογικής, το αντικείμενο και debatching έννοιες"
   services="logic-apps"
   documentationCenter=".net,nodejs,java"
   authors="jeffhollan"
   manager="dwrede"
   editor=""/>

<tags
   ms.service="logic-apps"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="integration"
   ms.date="05/14/2016"
   ms.author="jehollan"/>
   
# <a name="logic-apps-loops-scopes-and-debatching"></a>Εφαρμογές λογικής επαναλήψεις, τα πεδία και Debatching
  
>[AZURE.NOTE] Αυτή η έκδοση του άρθρου ισχύει σχήμα λογικής εφαρμογές 2016-04-01-προεπισκόπηση και νεότερες εκδόσεις.  Έννοιες είναι παρόμοια για παλαιότερες σχήματα, αλλά εύρους μόνο είναι διαθέσιμο για αυτό το σχήμα και νεότερες εκδόσεις.
  
## <a name="foreach-loop-and-arrays"></a>Επανάληψη ForEach και τους πίνακες
  
Λογική εφαρμογών σάς επιτρέπει να επανάληψη βάσει ενός συνόλου δεδομένων και εκτελεί μια ενέργεια για κάθε στοιχείο.  Αυτό είναι δυνατό μέσω του `foreach` ενέργεια.  Στο εργαλείο σχεδίασης, μπορείτε να καθορίσετε για να προσθέσετε ένα για κάθε βρόχο.  Μετά την επιλογή που θέλετε να επαναλάβετε πάνω από έναν πίνακα, μπορείτε να αρχίσετε να προσθέτετε ενέργειες.  Αυτήν τη στιγμή που περιορίζονται σε μία μόνο ενέργεια ανά foreach βρόχου, αλλά αυτός ο περιορισμός θα άρση τις προσεχείς εβδομάδες.  Μία φορά μέσα στο βρόχο μπορείτε να αρχίσετε να καθορίσετε τι θα συμβεί σε κάθε τιμή του πίνακα.

Εάν χρησιμοποιείτε προβολής κώδικα, μπορείτε να καθορίσετε ένα για κάθε βρόχο όπως παρακάτω.  Αυτό είναι ένα παράδειγμα ενός για κάθε βρόχος που στέλνει ένα μήνυμα ηλεκτρονικού ταχυδρομείου για κάθε διεύθυνση ηλεκτρονικού ταχυδρομείου που περιέχει 'microsoft.com':

```
{
    "email_filter": {
        "type": "query",
        "inputs": {
            "from": "@triggerBody()['emails']",
            "where": "@contains(item()['email'], 'microsoft.com')
        }
    },
    "forEach_email": {
        "type": "foreach",
        "foreach": "@body('email_filter')",
        "actions": {
            "send_email": {
                "type": "ApiConnection",
                "inputs": {
                "body": {
                    "to": "@item()",
                    "from": "me@contoso.com",
                    "message": "Hello, thank you for ordering"
                }
                "host": {
                    "connection": {
                        "id": "@parameters('$connections')['office365']['connection']['id']"
                    }
                }
                }
            }
        },
        "runAfter":{
            "email_filter": [ "Succeeded" ]
        }
    }
}
```
  
  A `foreach` ενέργεια να επαναλάβετε έως 5.000 γραμμές πίνακα επάνω.  Κάθε διαδοχικών προσεγγίσεων να εκτελείτε παράλληλα, επομένως ίσως χρειαστεί να προσθέσετε μηνύματα σε ουρά αν είναι απαραίτητο το στοιχείο ελέγχου ροής.
  
## <a name="until-loop"></a>Μέχρι την επανάληψη
  
  Μπορείτε να εκτελέσετε μια ενέργεια ή μια σειρά από ενέργειες μέχρι να ικανοποιείται μια συνθήκη.  Το πιο συνηθισμένο σενάριο για αυτό καλεί ένα τελικό σημείο μέχρι να φτάσετε την απάντηση που αναζητάτε.  Στο εργαλείο σχεδίασης, μπορείτε να καθορίσετε για να προσθέσετε μια μέχρι την επανάληψη.  Μετά την προσθήκη ενέργειες μέσα σε βρόχο, μπορείτε να ορίσετε τη συνθήκη εξόδου, καθώς και ο βρόχος όρια.  Υπάρχει μια καθυστέρηση 1 λεπτό μεταξύ κύκλους βρόχο.
  
  Εάν χρησιμοποιείτε προβολής κώδικα, μπορείτε να καθορίσετε μια μέχρι να βρόχος αρέσει κάτω από.  Αυτό είναι ένα παράδειγμα κλήσεις ορίου HTTP μέχρι ο οργανισμός απόκρισης έχει την τιμή "Ολοκληρώθηκε".  Αυτό θα ολοκληρωθεί όταν είτε 
  
  * Απόκριση HTTP έχει κατάσταση "Ολοκληρώθηκε"
  * Έχει επιχειρούσε για 1 ώρα
  * Το έχει προσαρτηθεί 100 φορές
  
  ```
  {
      "until_successful":{
        "type": "until",
        "expression": "@equals(actions('http')['status'], 'Completed'),
        "limit": {
            "count": 100,
            "timeout": "PT1H"
        },
        "actions": {
            "create_resource": {
                "type": "http",
                "inputs": {
                    "url": "http://provisionRseource.com",
                    "body": {
                        "resourceId": "@triggerBody()"
                    }
                }
            }
        }
      }
  }
  ```
  
## <a name="spliton-and-debatching"></a>SplitOn και Debatching

Μερικές φορές ένα έναυσμα ενδέχεται να εμφανιστεί ένας πίνακας με τα στοιχεία που θέλετε να debatch και να ξεκινήσετε μια ροή εργασίας ανά στοιχείο.  Αυτό μπορεί να πραγματοποιηθεί μέσω του `spliton` εντολή.  Από προεπιλογή, εάν σας swagger έναυσμα καθορίζει μια φορτίο που είναι ένας πίνακας, μια `spliton` θα προστεθεί και να ξεκινήσετε μια εκτέλεση ανά στοιχείο.  SplitOn μπορούν να προστεθούν μόνο σε ένα έναυσμα.  Αυτό μπορεί να είναι με μη αυτόματο τρόπο ρυθμιστεί ή παρακαμφθούν στην προβολή code ορισμού.  Αυτήν τη στιγμή να debatch SplitOn πινάκων έως 5.000 στοιχεία.  Δεν μπορείτε να έχετε μια `spliton` και υλοποίηση επίσης το μοτίβο απόκριση syncronous.  Όλες οι ροές εργασίας που ονομάζεται που έχει μια `response` ενέργεια επιπλέον `spliton` θα εκτελεστεί λήψη και να στείλετε ένα άμεσο `202 Accepted` απόκρισης.  

SplitOn μπορεί να οριστεί στην προβολή κώδικα ως το παρακάτω παράδειγμα.  Αυτό λαμβάνει ένα πίνακα στοιχεία και debatches σε κάθε γραμμή.

```
{
    "myDebatchTrigger": {
        "type": "Http",
        "inputs": {
            "url": "http://getNewCustomers",
        },
        "recurrence": {
            "frequency": "Second",
            "interval": 15
        },
        "spliton": "@triggerBody()['rows']"
    }
}
```

## <a name="scopes"></a>Εύρους

Είναι δυνατή η ομαδοποίηση μιας σειράς ενεργειών συνεργασία με ένα εύρος.  Αυτό είναι ιδιαίτερα χρήσιμο για την εφαρμογή του χειρισμού εξαιρέσεων.  Στη σχεδίαση μπορείτε να προσθέσετε ένα νέο πεδίο και να αρχίσετε να προσθέτετε τυχόν ενέργειες μέσα σε αυτό.  Μπορείτε να ορίσετε επιλογές εύρους στην προβολή κώδικα όπως το εξής:


```
{
    "myScope": {
        "type": "scope",
        "actions": {
            "call_bing": {
                "type": "http",
                "inputs": {
                    "url": "http://www.bing.com"
                }
            }
        }
    }
}
```
