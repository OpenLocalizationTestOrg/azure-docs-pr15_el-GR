<properties
   pageTitle="Εφαρμογές λογικής ως τελικά σημεία δυνατή η κλήση"
   description="Πώς μπορείτε να δημιουργήσετε και να ρυθμίσετε τις παραμέτρους ενεργοποιήσουν τελικά σημεία και να τις χρησιμοποιήσετε σε μια εφαρμογή λογικής στο Azure εφαρμογής υπηρεσίας"
   services="logic-apps"
   documentationCenter=".net,nodejs,java"
   authors="jeffhollan"
   manager="erikre"
   editor=""/>

<tags
   ms.service="logic-apps"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="integration"
   ms.date="10/18/2016"
   ms.author="jehollan"/>


# <a name="logic-apps-as-callable-endpoints"></a>Εφαρμογές λογικής ως τελικά σημεία δυνατή η κλήση

Λογική εφαρμογές εγγενώς μπορεί να εκθέσει μια συγχρονισμένη ορίου HTTP ως έναυσμα.  Μπορείτε επίσης να χρησιμοποιήσετε το μοτίβο των δυνατή η κλήση τελικά σημεία για να καλέσετε λογικής εφαρμογές ως ένθετη ροή εργασίας μέσω της ενέργειας "ροής εργασίας" σε μια εφαρμογή για λογική.

Υπάρχουν 3 τύποι εναυσμάτων που μπορεί να λάβει προσκλήσεις:

* Αίτηση
* ApiConnectionWebhook
* HttpWebhook

Για το υπόλοιπο αυτού του άρθρου, θα χρησιμοποιήσουμε **αίτηση** ως παράδειγμα, αλλά όλες οι αρχές τον ίδιο τρόπο ισχύουν για τους άλλους τύπους εναύσματα 2.

## <a name="adding-a-trigger-to-your-definition"></a>Προσθήκη ένα έναυσμα ορισμού του
Το πρώτο βήμα είναι να προσθέσετε ένα έναυσμα για τον ορισμό της εφαρμογής λογικής που μπορεί να λάβει εισερχόμενες αιτήσεις.  Μπορείτε να πραγματοποιήσετε αναζήτηση στη σχεδίαση για "Αίτηση HTTP" για να προσθέσετε την κάρτα έναυσμα. Μπορείτε να ορίσετε μια πρόσκληση σε σώμα JSON σχήματος και το εργαλείο σχεδίασης θα δημιουργήσουν διακριτικά για την ανάλυση και μεταβίβαση δεδομένων από τη μη αυτόματη έναυσμα μέσω της ροής εργασίας.  Μπορώ να χρησιμοποιώντας ένα εργαλείο όπως [jsonschema.net](http://jsonschema.net) για να δημιουργήσετε ένα σχήμα JSON από ένα δείγμα φορτίο σώμα.

![Καρτέλα έναυσμα αίτησης][2]

Αφού αποθηκεύσετε τον ορισμό της εφαρμογής λογικής, μια διεύθυνση URL επιστροφής κλήσης θα δημιουργηθούν παρόμοιο με αυτό:
 
``` text
https://prod-03.eastus.logic.azure.com:443/workflows/080cb66c52ea4e9cabe0abf4e197deff/triggers/myendpointtrigger?*signature*...
```

Αυτή η διεύθυνση URL περιέχει έναν αριθμό-κλειδί συσχετισμών Ασφαλείας στο τις παραμέτρους του ερωτήματος που χρησιμοποιούνται για τον έλεγχο ταυτότητας.

Μπορείτε επίσης να λάβετε αυτό το τελικό σημείο στην πύλη του Azure:

![][1]

Ή, καλώντας:

``` text
POST https://management.azure.com/{resourceID of your logic app}/triggers/myendpointtrigger/listCallbackURL?api-version=2015-08-01-preview
```

### <a name="security-for-the-trigger-url"></a>Ασφάλεια για τη διεύθυνση URL εναυσμάτων

Διευθύνσεις URL επιστροφής κλήσης εφαρμογή λογικής δημιουργούνται με ασφάλεια χρησιμοποιώντας μια υπογραφή πρόσβασης σε κοινή χρήση.  Η υπογραφή είναι πέρασε ως παραμέτρου ερωτήματος και πρέπει να επικυρώνονται πριν από την εφαρμογή λογικής θα εφαρμόζεται.  Δημιουργείται μέσω ένα μοναδικό συνδυασμό ενός μυστικού κλειδιού ανά εφαρμογή λογικής, το όνομα του εναύσματος και τη λειτουργία που εκτελούνται.  Εκτός εάν κάποιος χρήστης έχει πρόσβαση στο κλειδί εφαρμογής μυστικού λογικής, δεν θα είναι μπορούν να δημιουργούν μια έγκυρη ψηφιακή υπογραφή.

## <a name="calling-the-logic-app-triggers-endpoint"></a>Κλήση του εναύσματος εφαρμογή λογικής τελικού σημείου

Αφού δημιουργήσετε το τελικό σημείο για το έναυσμα, μπορείτε να ενεργοποιήσετε το μέσω ενός `POST` για την πλήρη διεύθυνση URL. Μπορείτε να συμπεριλάβετε επιπλέον κεφαλίδες και το περιεχόμενο στο σώμα.

Εάν ο τύπος περιεχομένου είναι `application/json` , στη συνέχεια, θα μπορείτε να ιδιότητες αναφοράς από μέσα στην πρόσκληση. Διαφορετικά, θα αντιμετωπιστεί ως ενιαία δυαδικό που μπορούν να περάσουν προς άλλες API, αλλά δεν μπορούν να αναφέρονται εντός της ροής εργασίας χωρίς να μετατρέψετε το περιεχόμενο.  Για παράδειγμα, εάν περάσετε `application/xml` περιεχομένου που μπορούν να χρησιμοποιήσουν `@xpath()` για να κάνετε μια εξαγωγή xpath, ή `@json()` για να μετατρέψετε από XML JSON.  Περισσότερες πληροφορίες σχετικά με την εργασία με περιεχόμενο τύπων [μπορεί να είναι εδώ](app-service-logic-content-type.md)

Επιπλέον, μπορείτε να καθορίσετε ένα σχήμα JSON στον ορισμό. Αυτό θα κάνει το εργαλείο σχεδίασης για τη δημιουργία των διακριτικών που, στη συνέχεια, μπορείτε να περάσετε σε βήματα.  Για παράδειγμα θα κάνει τα εξής μια `title` και `name` διακριτικό που είναι διαθέσιμες στη σχεδίαση:

```
{
    "properties":{
        "title": {
            "type": "string"
        },
        "name": {
            "type": "string"
        }
    },
    "required": [
        "title",
        "name"
    ],
    "type": "object"
}
```

## <a name="referencing-the-content-of-the-incoming-request"></a>Το περιεχόμενο της εισερχόμενης πρόσκλησης σε αναφορά

Το `@triggerOutputs()` συνάρτηση θα εξόδου τα περιεχόμενα της εισερχόμενης αίτησης. Για παράδειγμα, θα είναι όπως:

```
{
    "headers" : {
        "content-type" : "application/json"
    },
    "body" : {
        "myprop" : "a value"
    }
}
```

Μπορείτε να χρησιμοποιήσετε το `@triggerBody()` συντόμευση για να αποκτήσετε πρόσβαση του `body` ιδιότητα συγκεκριμένα. 

## <a name="responding-to-the-request"></a>Απάντηση στην πρόσκληση σε

Για ορισμένες αιτήσεις που ξεκινά μια εφαρμογή λογικής, ενδέχεται να θέλετε να απαντήσετε με κάποιο περιεχόμενο τον καλούντα. Υπάρχει ένας νέος τύπος ενέργειας που ονομάζεται την **Απάντηση** που μπορούν να χρησιμοποιηθούν για τη δημιουργία του κωδικού κατάστασης, σώμα και κεφαλίδων για την απάντησή σας. Σημειώστε ότι εάν υπάρχει κανένα σχήμα **απόκρισης** , το τελικό σημείο εφαρμογής λογικής θα *αμέσως* απάντηση με **202 αποδεκτοί**.

![Η ενέργεια απόκριση HTTP][3]

``` json
"Response": {
            "conditions": [],
            "inputs": {
                "body": {
                    "name": "@{triggerBody()['name']}",
                    "title": "@{triggerBody()['title']}"
                },
                "headers": {
                    "content-type": "application/json"
                },
                "statusCode": 200
            },
            "type": "Response"
        }
```

Απαντήσεις έχουν τα εξής:

| Ιδιότητα | Περιγραφή |
| -------- | ----------- |
| statusCode | Ο κωδικός κατάστασης HTTP για να απαντήσετε στην πρόσκληση σε εισερχόμενα. Μπορεί να είναι οποιαδήποτε έγκυρη κατάσταση κώδικα που ξεκινά με 2xx, 4xx ή 5xx. Δεν επιτρέπονται 3xx κωδικοί κατάστασης. | 
| σώμα | Ένα αντικείμενο σώμα που μπορεί να είναι μια συμβολοσειρά, ένα αντικείμενο JSON ή ακόμα και δυαδικό περιεχόμενο στα οποία γίνεται αναφορά από ένα προηγούμενο βήμα. | 
| κεφαλίδες | Μπορείτε να ορίσετε οποιονδήποτε αριθμό κεφαλίδων που θα συμπεριληφθούν στην απάντηση | 

Όλα τα βήματα στην εφαρμογή λογικής που απαιτούνται για την απόκριση πρέπει να ολοκληρώσετε μέσα σε *60 δευτερόλεπτα* για την αρχική αίτηση για να λάβετε την απάντηση **, εκτός εάν η ροή εργασίας ονομάζεται ως ένθετη λογική εφαρμογής**. Εάν καμία ενέργεια απάντηση φτάσει μέσα σε 60 δευτερόλεπτα, στη συνέχεια, η εισερχόμενη αίτηση θα λήξει το χρονικό όριο και λαμβάνετε μια απάντηση **408 προγράμματος-πελάτη χρονικού ορίου** HTTP.  Για τις εφαρμογές ένθετων λογικής, το γονικό στοιχείο λογικής εφαρμογή θα συνεχίσουν να περιμένετε απάντηση μέχρι να ολοκληρωθεί, ανεξάρτητα από το χρονικό διάστημα που χρειάζεται.

## <a name="advanced-endpoint-configuration"></a>Ρύθμιση παραμέτρων ορίου για προχωρημένους

Λογική εφαρμογών έχουν ενσωματωμένη υποστήριξη για το τελικό σημείο άμεση πρόσβαση και να χρησιμοποιείτε πάντα την `POST` μέθοδο για να ξεκινήσετε μια εκτέλεση της λογικής εφαρμογής. Η εφαρμογή **Ακρόασης HTTP** API προηγουμένως επίσης υποστηρίζεται αλλαγή τμήματα της διεύθυνσης URL και τη μέθοδο HTTP. Μπορείτε να ακόμα και ρύθμιση του πρόσθετη ασφάλεια ή ένα προσαρμοσμένο τομέα, προσθέτοντας τον κεντρικό υπολογιστή εφαρμογής API (της εφαρμογής Web που φιλοξενείται στην εφαρμογή API). 

Αυτή η λειτουργία είναι διαθέσιμη μέσω **API διαχείρισης**:
* [Να αλλάξετε τη μέθοδο της αίτησης](https://msdn.microsoft.com/library/azure/dn894085.aspx#SetRequestMethod)
* [Αλλάξτε τα τμήματα της διεύθυνσης URL της αίτησης](https://msdn.microsoft.com/library/azure/7406a8ce-5f9c-4fae-9b0f-e574befb2ee9#RewriteURL)
* Ρύθμιση του API διαχείρισης τομέων στην καρτέλα **Ρύθμιση παραμέτρων** στην πύλη του κλασική Azure
* Ρύθμιση πολιτικής για να ελέγξετε για βασικό έλεγχο ταυτότητας (**απαιτείται σύνδεση**)

## <a name="summary-of-migration-from-2014-12-01-preview"></a>Σύνοψη της μετεγκατάστασης από 2014-12-01-preview

|  2014-12-01-preview | 2016-06-01 |
|---------------------|--------------------|
| Κάντε κλικ στην εφαρμογή **Ακρόασης HTTP** API | Κάντε κλικ στην εντολή **μη αυτόματη έναυσμα** (χωρίς εφαρμογή API απαιτείται) |
| Ακρόασης HTTP τη ρύθμιση "*στέλνει αυτόματα απάντηση*" | Είτε περιλαμβάνουν μια ενέργεια **Απάντηση** ή δεν στον ορισμό της ροής εργασίας |
| Ρύθμιση παραμέτρων basic ή διακριτικό έλεγχο ταυτότητας | μέσω API διαχείρισης |
| Ρύθμιση παραμέτρων μέθοδος HTTP | μέσω API διαχείρισης |
| Ρύθμιση παραμέτρων σχετική διαδρομή | μέσω API διαχείρισης |
| Αναφορά εισερχόμενης σώμα μέσω`@triggerOutputs().body.Content` | Αναφορά μέσω`@triggerOutputs().body` |
| Η ενέργεια **HTTP αποστολή απόκρισης** στη λειτουργία ακρόασης HTTP | Κάντε κλικ στην **Απάντηση σε μια αίτηση HTTP** (χωρίς εφαρμογή API απαιτείται)


[1]: ./media/app-service-logic-http-endpoint/manualtriggerurl.png
[2]: ./media/app-service-logic-http-endpoint/manualtrigger.png
[3]: ./media/app-service-logic-http-endpoint/response.png
