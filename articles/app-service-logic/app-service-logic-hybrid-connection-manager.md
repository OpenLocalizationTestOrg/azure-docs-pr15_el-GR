<properties 
    pageTitle="Χρήση της διαχείρισης σύνδεσης υβριδική | Microsoft Azure" 
    description="Εγκατάσταση και ρύθμιση παραμέτρων της διαχείρισης σύνδεσης υβριδική και σύνδεση με γραμμές σύνδεσης εσωτερικής εγκατάστασης σε εφαρμογές της λογικής" 
    services="app-service\logic" 
    documentationCenter=".net,nodejs,java"
    authors="MandiOhlinger" 
    manager="anneta" 
    editor=""/>

<tags 
    ms.service="logic-apps" 
    ms.workload="integration" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="10/18/2016" 
    ms.author="mandia"/>

# <a name="connect-to-on-premises-connectors-using-the-hybrid-connection-manager"></a>Σύνδεση με γραμμές σύνδεσης εσωτερικής εγκατάστασης χρησιμοποιώντας τη Διαχείριση σύνδεσης υβριδική

>[AZURE.NOTE] Αυτή η έκδοση του άρθρου ισχύει για λογική εφαρμογές 2014 12-01-προεπισκόπηση σχήματος έκδοση. Λογική εφαρμογές γενικής διαθεσιμότητας (GA) χρησιμοποιεί μια πύλη για συνδεσιμότητα εσωτερικής εγκατάστασης. Διαβάστε περισσότερα σχετικά με τα νέα [πύλη](app-service-logic-gateway-connection.md) και [Λογική GA εφαρμογές](https://azure.microsoft.com/documentation/services/logic-apps/).

Για να χρησιμοποιήσετε ένα σύστημα εσωτερικής εγκατάστασης, λογική εφαρμογών χρησιμοποιεί τη Διαχείριση σύνδεσης υβριδική. Ορισμένες γραμμές σύνδεσης να συνδεθείτε σε ένα σύστημα εσωτερικής εγκατάστασης, όπως SQL Server, SAP, το SharePoint και ούτω καθεξής. 

Η διαχείριση σύνδεσης υβριδική (HCM) είναι ένα κλικ-μία φορά installer που είναι εγκατεστημένη σε ένα διακομιστή των υπηρεσιών IIS στο δίκτυο σας, πίσω από το τείχος προστασίας. Χρησιμοποιώντας μια μετάδοση Azure Service Bus, HCM πραγματοποιεί έλεγχο ταυτότητας του συστήματος εσωτερικής εγκατάστασης με τη γραμμή σύνδεσης στο Azure. 

> [AZURE.NOTE] Διαχείριση συνδέσεων υβριδική απαιτείται μόνο εάν συνδέεστε με έναν πόρο στην εσωτερική εγκατάσταση πίσω από το τείχος προστασίας. Εάν δεν συνδέεστε σε ένα σύστημα εσωτερικής εγκατάστασης, στη συνέχεια, δεν χρειάζεστε τη Διαχείριση σύνδεσης υβριδική.

Για να ξεκινήσετε, πρέπει:

- Azure Service Bus μεταγωγής χώρος ονομάτων συσχετισμών Ασφαλείας συμβολοσειρά σύνδεσης. Δείτε [Τις τιμές Bus υπηρεσίας](https://azure.microsoft.com/pricing/details/service-bus/) για να προσδιορίσετε ποια σειρά περιλαμβάνει αναμετάδοση.
- Εσωτερικής εισόδου πληροφορίες συστήματος, όπως το όνομα χρήστη και τον κωδικό πρόσβασης. Για παράδειγμα, εάν συνδέεστε σε έναν SQL Server εσωτερικής εγκατάστασης, χρειάζεστε το λογαριασμό σύνδεσης του SQL Server και τον κωδικό πρόσβασης.
- Εσωτερικής στοιχεία διακομιστή, συμπεριλαμβανομένων των θύρα αριθμό και ένα όνομα διακομιστή. Για παράδειγμα, εάν συνδέεστε σε έναν SQL Server εσωτερικής εγκατάστασης, χρειάζεστε το όνομα του SQL Server και τον αριθμό θύρας TCP.

## <a name="get-the-service-bus-connection-string"></a>Λάβετε τη συμβολοσειρά σύνδεσης Bus υπηρεσίας

Στην πύλη του Azure, αντιγράψτε το ριζικό κατάλογο της υπηρεσίας Bus συσχετισμών Ασφαλείας συμβολοσειρά σύνδεσης. Αυτήν τη συμβολοσειρά σύνδεσης συνδέεται το Azure σύνδεσης με το σύστημα εσωτερικής εγκατάστασης. 

1. Στην [πύλη του Azure κλασική](http://go.microsoft.com/fwlink/p/?LinkID=213885), επιλέξτε το πεδίο ονόματος Bus υπηρεσίας και επιλέξτε **Πληροφορίες σύνδεσης**:

    ![][SB_ConnectInfo]

2. Αντιγράψτε τη συμβολοσειρά σύνδεσης συσχετισμών Ασφαλείας:

    ![][SB_SAS]

## <a name="install-the-hybrid-connection-manager"></a>Εγκατάσταση της υβριδικής διαχείρισης σύνδεσης

1. Στην [πύλη του Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040), επιλέξτε τη γραμμή σύνδεσης που δημιουργήσατε. Για να το ανοίξετε, μπορείτε να επιλέξετε **Αναζήτηση**, επιλέξτε **API εφαρμογές**και, στη συνέχεια, επιλέξτε τη γραμμή σύνδεσης ή την εφαρμογή API. 
<br/><br/>
Σε **Υβριδική σύνδεσης**, τη ρύθμιση είναι **ελλιπής**:
<br/>
![][2] 

2. Επιλέξτε **σύνδεση υβριδική**. Συμβολοσειρά σύνδεσης υπηρεσίας Bus προηγουμένως πληκτρολογήσατε εμφανίζεται.
3. Αντιγράψτε τη **συμβολοσειρά πρωτεύοντος ρύθμισης παραμέτρων**:
<br/>
![][PrimaryConfigString]

4. Στην περιοχή **Διαχείριση σύνδεσης υβριδική εσωτερικής εγκατάστασης**, μπορείτε να λάβετε την υβριδική διαχείρισης σύνδεσης ή να το εγκαταστήσετε απευθείας από την πύλη. 
<br/><br/>
Για να εγκαταστήσετε απευθείας από την πύλη, μεταβείτε στο διακομιστή των υπηρεσιών IIS εσωτερικής εγκατάστασης, μεταβείτε στην πύλη του και επιλέξτε **λήψη και ρύθμιση παραμέτρων**.
<br/><br/>
Για να κάνετε λήψη της διαχείρισης σύνδεσης υβριδική, μεταβείτε στο διακομιστή εσωτερικής εγκατάστασης των υπηρεσιών IIS και μεταβείτε στην **εφαρμογή ένα κλικ** (http://hybridclickonce.azurewebsites.net/install/Microsoft.Azure.BizTalk.Hybrid.ClickOnce.application). Η εγκατάσταση ξεκινά αυτόματα, ώστε να μπορείτε να το εκτελέσετε.

5. Στο παράθυρο **Διαμόρφωση ακρόασης** , πληκτρολογήστε την **Κύρια συμβολοσειράς ρύθμισης παραμέτρων** που επικολλήσατε προηγουμένως (στο βήμα 3) και επιλέξτε **εγκατάσταση**.

Όταν έχει ολοκληρωθεί η εγκατάσταση, το παρακάτω εμφανίζει:
<br/>
![][3] 

Τώρα όταν κάνετε περιήγηση στη γραμμή σύνδεσης ξανά, την κατάσταση σύνδεσης υβριδική είναι **συνδεδεμένος**. Ίσως χρειαστεί να κλείσετε τη γραμμή σύνδεσης και το ανοίξετε ξανά:
<br/>
![][4] 

> [AZURE.NOTE] Για να αλλάξετε τη συμβολοσειρά σύνδεσης δευτερεύοντα, εκτελέστε ξανά τη σύνδεση υβριδική διαμόρφωση και πληκτρολογήστε τη **Δευτερεύουσα συμβολοσειράς ρύθμισης παραμέτρων**.


## <a name="tcp-ports-and-security"></a>Θύρες TCP και την ασφάλεια

Όταν δημιουργείτε μια σύνδεση υβριδική, δημιουργείται μια τοποθεσία Web στο διακομιστή των υπηρεσιών IIS τοπικά εσωτερικής εγκατάστασης. Ο διακομιστής των υπηρεσιών IIS μπορεί να έχει ένα DMZ. Τις απαιτήσεις θύρας TCP στο διακομιστή των υπηρεσιών IIS περιλαμβάνουν τα εξής:

Θύρες TCP | Γιατί
--- | ---
 | Απαιτούνται χωρίς εισερχόμενες θύρες TCP.
9350 - 9354 | Αυτές οι θύρες χρησιμοποιούνται για τη μετάδοση δεδομένων. Ο διευθυντής μεταγωγής Bus υπηρεσίας probes θύρα 9350 για να προσδιορίσετε εάν η συνδεσιμότητα TCP είναι διαθέσιμη. Εάν είναι διαθέσιμη, στη συνέχεια, θεωρείται ότι θύρα 9352 είναι επίσης διαθέσιμες. Κίνηση δεδομένων καλύπτει τη θύρα 9352. <br/><br/>Να επιτρέπονται οι εξερχόμενες συνδέσεις σε αυτές τις θύρες.
5671 | Όταν η θύρα 9352 χρησιμοποιείται για την κίνηση δεδομένων, θύρα 5671 χρησιμοποιείται ως το το κανάλι ελέγχου. <br/><br/>Να επιτρέπονται οι εξερχόμενες συνδέσεις σε αυτήν τη θύρα. 
80, 443 | Εάν δεν μπορεί να χρησιμοποιηθεί θύρες 9352 και 5671, *στη συνέχεια,* θύρες 80 και 443 είναι οι εναλλακτικών θύρες χρησιμοποιούνται για μετάδοση των δεδομένων και το κανάλι ελέγχου.<br/><br/>Να επιτρέπονται οι εξερχόμενες συνδέσεις σε αυτές τις θύρες.
Θύρα σύστημα εσωτερικής εγκατάστασης | Στο σύστημα στην εσωτερική εγκατάσταση, ανοίξτε τη θύρα που χρησιμοποιείται από το σύστημα. Για παράδειγμα, SQL Server συνήθως χρησιμοποιεί τη θύρα 1433. Άνοιγμα αυτής της θύρας TCP.

[Φιλοξενία πίσω από ένα τείχος προστασίας με Bus υπηρεσίας](http://msdn.microsoft.com/library/azure/ee706729.aspx)

## <a name="troubleshooting"></a>Αντιμετώπιση προβλημάτων

![][HCMFlow]

### <a name="on-premises-troubleshooting"></a>Εσωτερικής εγκατάστασης αντιμετώπισης προβλημάτων

1. Στο διακομιστή των υπηρεσιών IIS, επιβεβαιώστε το ρόλο web των υπηρεσιών IIS έχει εγκατασταθεί και όλων των υπηρεσιών IIS είναι αποτελέσματα.
2. Στο διακομιστή των υπηρεσιών IIS, επιβεβαιώστε τη Διαχείριση σύνδεσης υβριδική έχει εγκατασταθεί και εκτελείται:
 - Στη διαχείριση των υπηρεσιών IIS (inetmgr), η τοποθεσία Web ***MicrosoftAzureBizTalkHybridListener*** πρέπει να αναφέρεται και να εκτελείται. 
 - Αυτή η τοποθεσία Web χρησιμοποιεί το ***HybridListenerAppPool*** που εκτελείται ως λογαριασμός *NetworkService* τοπικός χρήστης ενσωματωμένα. Θα πρέπει να ξεκινήσει επίσης αυτήν την ταυτότητα.
3. Στο διακομιστή των υπηρεσιών IIS, επιβεβαιώστε τη γραμμή σύνδεσης έχει εγκατασταθεί και εκτελείται: 
 - Δημιουργείται μια τοποθεσία Web για τη σύνδεση. Για παράδειγμα, εάν έχετε δημιουργήσει μια γραμμή σύνδεσης SQL, υπάρχει μια τοποθεσία Web ***MicrosoftSqlConnector_nnn*** . Στη διαχείριση των υπηρεσιών IIS (inetmgr), επιβεβαιώστε αυτήν την τοποθεσία Web είναι παρατίθενται και αποτελέσματα. 
 - Αυτή η τοποθεσία Web χρησιμοποιεί το δικό του χώρο συγκέντρωσης εφαρμογών των υπηρεσιών IIS με το όνομα ***HybridAppPoolnnn***. Αυτή η ταυτότητα εκτελείται ως λογαριασμός *NetworkService* τοπικός χρήστης ενσωματωμένες. Αυτό τοποθεσιών Web και ταυτότητα πρέπει και τα δύο είναι αποτελέσματα. 
 - Αναζητήστε την τοπική γραμμή σύνδεσης. Για παράδειγμα, εάν η τοποθεσία Web σας σύνδεσης χρησιμοποιεί θύρα 6569, μεταβείτε στο http://localhost:6569. Ένα προεπιλεγμένο έγγραφο δεν έχει ρυθμιστεί, ώστε μια `HTTP Error 403.14 - Forbidden error` αναμένεται.
4. Στο τείχος προστασίας, επιβεβαιώστε τις θύρες TCP που αναφέρονται σε αυτό το θέμα είναι ανοιχτά.
5. Δείτε το σύστημα προέλευσης ή προορισμού:
 - Ορισμένα συστήματα εσωτερικής απαιτούν επιπλέον εξάρτηση αρχεία. Για παράδειγμα, εάν συνδέεστε στο SAP εσωτερικής εγκατάστασης, ορισμένα πρόσθετα αρχεία SAP πρέπει να έχει εγκατασταθεί στο διακομιστή των υπηρεσιών IIS.
 - Έλεγχος συνδεσιμότητας με το σύστημα με το λογαριασμό σύνδεσης. Για παράδειγμα, τη θύρα TCP που χρησιμοποιείται από το σύστημα πρέπει να είναι ανοιχτό, όπως θύρα 1433 για τον SQL Server. Ο λογαριασμός σύνδεσης που καταχωρήσατε στην πύλη του Azure πρέπει να έχετε πρόσβαση στο δίκτυο.
6. Στο διακομιστή των υπηρεσιών IIS, ελέγξτε τα αρχεία καταγραφής συμβάντων για τυχόν σφάλματα. 
7. Εκκαθάριση και επαναλάβετε την εγκατάσταση της υβριδικής διαχείρισης σύνδεσης: 
 - Στις υπηρεσίες IIS, διαγράψτε με μη αυτόματο τρόπο την τοποθεσία Web της σύνδεσης και ο χώρος συγκέντρωσης εφαρμογών. 
 - Εκτελέστε ξανά το υβριδικό διαχείρισης σύνδεσης και επιβεβαιώστε εισαγωγή τη σωστή **Πρωτεύον συμβολοσειράς ρύθμισης παραμέτρων** για τη σύνδεση.



### <a name="in-the-azure-classic-portal"></a>Στην κλασική πύλη του Azure

1. Επιβεβαιώστε ότι το πεδίο ονόματος Bus υπηρεσίας έχει μια **ενεργή** κατάσταση.
2. Όταν δημιουργείτε τη γραμμή σύνδεσης, πληκτρολογήστε τη συμβολοσειρά σύνδεσης συσχετισμών Ασφαλείας Bus υπηρεσίας. Εισαγάγετε τη συμβολοσειρά σύνδεσης ACS.


## <a name="faq"></a>ΣΥΝΉΘΕΙΣ ΕΡΩΤΉΣΕΙΣ

**ΕΡΏΤΗΣΗ**: υπάρχουν δύο διαχειριστές σύνδεσης υβριδική. Ποια είναι η διαφορά; 

**Απάντηση**: υπάρχει η τεχνολογία [Υβριδική συνδέσεις](../biztalk-services/integration-hybrid-connection-overview.md) που χρησιμοποιείται κυρίως από εφαρμογές Web (πρώην τοποθεσίες Web που διαθέτετε) και οι εφαρμογές του Mobile (πρώην κινητές υπηρεσίες) για να συνδεθείτε με εσωτερικής εγκατάστασης. Αυτή η Διαχείριση συνδέσεων υβριδική είναι το δικό της [ρύθμισης](../biztalk-services/integration-hybrid-connection-create-manage.md) και χρησιμοποιεί μια υπηρεσία BizTalk Azure (στο παρασκήνιο). Υποστηρίζει μόνο πρωτόκολλα TCP και HTTP.

Με γραμμές σύνδεσης Azure εφαρμογής υπηρεσίας, έχουμε επίσης μια υβριδική διαχείρισης σύνδεσης.  Λειτουργεί αυτή η διαχείριση σύνδεσης υβριδική *μην* χρησιμοποιήσετε ένα Azure BizTalk υπηρεσίας (στο παρασκήνιο) και υποστηρίζει περισσότερα από τα πρωτόκολλα TCP και HTTP. Δείτε τη [λίστα εφαρμογών API και γραμμών σύνδεσης](app-service-logic-connectors-list.md).

Και τα δύο Χρησιμοποιήστε Azure Bus υπηρεσίας για να συνδεθείτε με το σύστημα εσωτερικής εγκατάστασης.

**ΕΡΏΤΗΣΗ**: κατά τη δημιουργία προσαρμοσμένης εφαρμογής API, μπορώ να χρησιμοποιήσω τη Διαχείριση εφαρμογών υπηρεσίας υβριδική σύνδεσης για να συνδεθείτε στην εσωτερική εγκατάσταση; 

**Απάντηση**: δεν με την παραδοσιακή έννοια. Μπορείτε να χρησιμοποιήσετε μια ενσωματωμένη γραμμή σύνδεσης, ρύθμιση παραμέτρων διαχείρισης εφαρμογής υπηρεσίας υβριδική σύνδεσης για να συνδεθείτε με το σύστημα εσωτερικής εγκατάστασης. Στη συνέχεια, χρησιμοποιήστε αυτή η γραμμή σύνδεσης με την προσαρμοσμένη εφαρμογή API, ενδεχομένως χρησιμοποιώντας μια εφαρμογή λογικής. Προς το παρόν, δεν μπορείτε να αναπτύξετε ή να δημιουργήσετε το δικό σας υβριδική εφαρμογής API (όπως η γραμμή σύνδεσης SQL ή αρχείο σύνδεσης).

Εάν το προσαρμοσμένο API χρησιμοποιεί μια θύρα TCP ή HTTP, μπορείτε να χρησιμοποιήσετε [Υβριδικό συνδέσεις](../biztalk-services/integration-hybrid-connection-overview.md) και τη Διαχείριση σύνδεσης υβριδική. Σε αυτό το σενάριο, χρησιμοποιείται μια υπηρεσία BizTalk Azure. [Σύνδεση με τον SQL Server εσωτερικής εγκατάστασης από μια εφαρμογή web](../app-service-web/web-sites-hybrid-connection-connect-on-premises-sql-server.md) μπορεί να σας βοηθήσουν.  


## <a name="read-more"></a>Διαβάστε περισσότερα

[Παρακολούθηση εφαρμογών σας λογικής](app-service-logic-monitor-your-logic-apps.md)<br/>
[Λειτουργία Bus τιμολόγησης](https://azure.microsoft.com/pricing/details/service-bus/)



[SB_ConnectInfo]: ./media/app-service-logic-hybrid-connection-manager/SB_ConnectInfo.png
[SB_SAS]: ./media/app-service-logic-hybrid-connection-manager/SB_SAS.png
[PrimaryConfigString]: ./media/app-service-logic-hybrid-connection-manager/PrimaryConfigString.png
[HCMFlow]: ./media/app-service-logic-hybrid-connection-manager/HCMFlow.png
[2]: ./media/app-service-logic-hybrid-connection-manager/BrowseSetupIncomplete.jpg
[3]: ./media/app-service-logic-hybrid-connection-manager/HybridSetup.jpg
[4]: ./media/app-service-logic-hybrid-connection-manager/BrowseSetupComplete.jpg

 
