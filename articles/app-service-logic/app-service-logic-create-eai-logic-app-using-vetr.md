<properties
   pageTitle="Δημιουργία εφαρμογής λογικής EAI χρησιμοποιώντας VETR σε εφαρμογές της λογικής στο Azure εφαρμογής υπηρεσίας | Microsoft Azure"
   description="Επικυρώστε, κωδικοποίηση και Μετασχηματισμός δυνατότητες των υπηρεσιών BizTalk XML"
   services="logic-apps"
   documentationCenter=".net,nodejs,java"
   authors="rajeshramabathiran"
   manager="erikre"
   editor=""/>

<tags
   ms.service="logic-apps"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="04/20/2016"
   ms.author="rajram"/>


# <a name="create-eai-logic-app-using-vetr"></a>Δημιουργία εφαρμογής λογικής EAI χρησιμοποιώντας VETR

[AZURE.INCLUDE [app-service-logic-version-message](../../includes/app-service-logic-version-message.md)]

Περισσότερα σενάρια ενοποίησης εφαρμογής για μεγάλες επιχειρήσεις (EAI) μεσολαβούν δεδομένων μεταξύ μιας προέλευσης και προορισμού. Τα σενάρια συχνά έχουν ένα κοινό σύνολο απαιτήσεις:

- Βεβαιωθείτε ότι τα δεδομένα από διαφορετικά συστήματα έχουν μορφοποιηθεί σωστά.
- Εκτέλεση "αναζήτησης" σε εισερχόμενα δεδομένα για τη λήψη αποφάσεων.
- Μετατροπή δεδομένων από μια μορφή σε μια άλλη. Για παράδειγμα, μετατροπή δεδομένων από ένα σύστημα CRM μορφή δεδομένων σε ένα σύστημα ERP μορφή δεδομένων.
- Δρομολόγηση δεδομένων στο σύστημα ή εφαρμογή που θέλετε.

Σε αυτό το άρθρο σάς δείχνει ένα κοινό μοτίβο ενοποίησης: "Μονόπλευρη μήνυμα διαμεσολάβησης" ή VETR (επικύρωση, Enrich, μετασχηματισμού, δρομολόγηση). Το μοτίβο VETR mediates δεδομένων μεταξύ μιας οντότητας προέλευσης και προορισμού οντότητα. Συνήθως προέλευσης και προορισμού οι προελεύσεις δεδομένων.

Εξετάστε το ενδεχόμενο μια τοποθεσία Web που δέχεται παραγγελίες. Οι χρήστες δημοσιεύουν καταχωρήσεις παραγγελίες στο σύστημα μέσω HTTP. Τι συμβαίνει στο παρασκήνιο, το σύστημα επικυρώσει τα εισερχόμενα δεδομένα για ακρίβειας Κανονικοποιεί το και εξακολουθεί να εμφανίζεται το σε μια υπηρεσία Bus ουρά για περαιτέρω επεξεργασία. Το σύστημα μεταφέρει παραγγελίες απενεργοποίηση ουρά, περιμένετε σε συγκεκριμένη μορφή. Έτσι, η ροή να ολοκληρωμένες είναι:

**HTTP** → **επικύρωση** → **Μετασχηματισμός** → **Bus υπηρεσίας**

![Βασικές VETR ροής][1]

Οι παρακάτω εφαρμογές API BizTalk διευκολυνθείτε στη δημιουργία αυτό το μοτίβο:

* **Έναυσμα HTTP** - προέλευσης στο συμβάν ενεργοποίησης μηνύματος
* **Επικύρωση** - επικυρώσει ακρίβειας των εισερχόμενων δεδομένων
* **Μετασχηματισμός** - μετασχηματισμούς δεδομένα από εισερχόμενες μορφή σε μορφή απαιτείται από το σύστημα ροής
* **Γραμμή σύνδεσης υπηρεσίας Bus** - όπου τα δεδομένα αποστέλλονται οντότητα προορισμού


## <a name="constructing-the-basic-vetr-pattern"></a>Η κατασκευή το βασικό μοτίβο VETR
### <a name="the-basics"></a>Τα βασικά στοιχεία

Στην πύλη του Azure, επιλέξτε **+ Δημιουργία**, επιλέξτε **Web + Mobile**και, στη συνέχεια, επιλέξτε **Εφαρμογή λογικής**. Επιλέξτε ένα όνομα, θέση, συνδρομή, ομάδα πόρων, και μια θέση που λειτουργεί. Ομάδες πόρων λειτουργεί ως κοντέινερ για εφαρμογές του Office; Όλοι οι πόροι για την εφαρμογή σας, μεταβείτε στην ίδια ομάδα πόρων.

Στη συνέχεια, ας προσθέσουμε εναυσμάτων και ενέργειες.


## <a name="add-http-trigger"></a>Προσθήκη έναυσμα HTTP
1. Στα **Πρότυπα λογικής εφαρμογών**, επιλέξτε **Δημιουργία από την αρχή**.
1. Επιλέξτε **Ακρόασης HTTP** από τη συλλογή για να δημιουργήσετε ένα νέο πρόγραμμα ακρόασης. Καλέστε την **HTTP1**.
2. Ορισμός του **Αυτόματη αποστολή απόκρισης;** τη ρύθμιση FALSE (ψευδής). Ρυθμίστε τις παραμέτρους της ενέργειας έναυσμα, ορίζοντας _HTTP μέθοδο_ για την _ΚΑΤΑΧΏΡΗΣΗ_ και τη ρύθμιση _Σχετική διεύθυνση URL_ για να _/OneWayPipeline_:  
    ![Έναυσμα HTTP][2]
3. Επιλέξτε το πράσινο σημάδι ελέγχου για να ολοκληρώσετε το έναυσμα.

## <a name="add-validate-action"></a>Προσθήκη επικύρωση ενέργειας

Τώρα, ας εισαγάγετε ενέργειες που εκτελείται κάθε φορά που ενεργοποιείται το έναυσμα — δηλαδή, κάθε φορά που λαμβάνεται μια κλήση σε το τελικό σημείο HTTP.

1. Προσθήκη **Επικύρωσης XML BizTalk** από τη συλλογή και ονομάστε το _(Validate1)_ για να δημιουργήσετε μια περίοδο λειτουργίας.
2. Ρυθμίστε τις παραμέτρους σε ένα σχήμα XSD για να επικυρώσει τα εισερχόμενα μηνύματα XML. Επιλέξτε την ενέργεια _επικύρωση_ και επιλέξτε _triggers('httplistener').outputs. Περιεχομένου_ ως η τιμή για την παράμετρο _inputXml_ .

Τώρα, η ενέργεια επικύρωση είναι η πρώτη ενέργεια μετά της ακρόασης HTTP: 

![Εφαρμογή επικύρωσης BizTalk XML][3]

Ομοίως, ας προσθέσουμε τα υπόλοιπα από τις ενέργειες. 

## <a name="add-transform-action"></a>Προσθήκη ενεργειών μετασχηματισμού
Ας ρύθμιση παραμέτρων μετασχηματισμούς θα κανονικοποιηθεί τα εισερχόμενα δεδομένα.

1. Προσθήκη **Υπηρεσίας μετασχηματισμός BizTalk** από τη συλλογή.
2. Για να ρυθμίσετε τις παραμέτρους ενός μετασχηματισμού για να μετατρέψετε τα εισερχόμενα μηνύματα XML, επιλέξτε την ενέργεια **Μετασχηματισμός** με την ενέργεια για την εκτέλεση όταν αυτό το API καλείται. Επιλέξτε ```triggers(‘httplistener’).outputs.Content``` ως η τιμή για το _inputXml_. *Αντιστοίχιση* είναι μια προαιρετική παράμετρος, επειδή τα εισερχόμενα δεδομένα συμφωνεί με το τι έχει ρυθμιστεί και εφαρμόζονται μόνο αυτές που ταιριάζει με το σχήμα.
3. Τέλος, ο μετασχηματισμός εκτελείται μόνο εάν η επικύρωση είναι επιτυχής. Για να ρυθμίσετε αυτή η συνθήκη, επιλέξτε το εικονίδιο γραναζιού στην επάνω δεξιά γωνία και επιλέξτε _Προσθήκη συνθήκης πρέπει να πληρούνται_. Ορίστε τη συνθήκη σε ```equals(actions('xmlvalidator').status,'Succeeded')```:  

![Οι μετασχηματισμοί BizTalk][4]


## <a name="add-service-bus-connector"></a>Προσθήκη σύνδεσης Bus υπηρεσίας
Στη συνέχεια, προσθέστε τον προορισμό — μιας υπηρεσίας ουράς Bus — για την εγγραφή δεδομένων σε.

1. Προσθέστε μια **Γραμμή σύνδεσης Bus υπηρεσίας** από τη συλλογή. Ορίστε το **όνομα** σε _Servicebus1_, ρύθμιση **Συμβολοσειρά σύνδεσης** στη συμβολοσειρά σύνδεσης για να την παρουσία της υπηρεσίας bus, ορίστε **Όνομα οντότητα** στην _ουρά_και παραλείψετε το **όνομα της συνδρομής**.
2. Επιλέξτε την ενέργεια **Αποστολή μηνύματος** και ορίστε το πεδίο **περιεχομένου** για την ενέργεια σε _actions('transformservice').outputs. OutputXml_.
3. Ορίστε το πεδίο **Τύπου περιεχομένου** σε *εφαρμογή/xml*:  

![Υπηρεσία Bus][5]


## <a name="send-http-response"></a>Αποστολή απόκρισης HTTP
Μετά την ολοκλήρωση διοχέτευσης επεξεργασίας, στείλετε ξανά μια απόκριση HTTP για την επιτυχία και την αποτυχία με τα παρακάτω βήματα:

1. Προσθέστε μια **Ακρόασης HTTP** από τη συλλογή και επιλέξτε την ενέργεια **Αποστολή απόκρισης HTTP** .
2. Ορίστε το **Αναγνωριστικό απόκρισης** για να στείλετε *το μήνυμα*.
2. Ορισμός **Απόκριση περιεχομένου** για την *ολοκλήρωση της επεξεργασίας διοχέτευσης*.
3. **Κωδικός κατάστασης απόκρισης** σε *200* για να υποδείξετε HTTP 200 OK.
4. Επιλέξτε το αναπτυσσόμενο μενού στην επάνω δεξιά γωνία και επιλέξτε **Προσθήκη συνθήκης πρέπει να πληρούνται**.  Ορίστε τη συνθήκη με την εξής παράσταση:  
    ```@equals(actions('azureservicebusconnector').status,'Succeeded')```  <br/>
5. Επαναλάβετε αυτά τα βήματα για να στείλετε μια απόκριση HTTP σε περίπτωση αποτυχίας καθώς και. Αλλαγή **συνθήκη** με την εξής παράσταση:  
```@not(equals(actions('azureservicebusconnector').status,'Succeeded'))``` <br/>
6. Επιλέξτε **OK** , στη συνέχεια, **Δημιουργία**.



## <a name="completion"></a>Ολοκλήρωση
Κάθε φορά που κάποιος σας στείλει ένα μήνυμα για να το τελικό σημείο HTTP, ενεργοποιεί την εφαρμογή και εκτελεί τις ενέργειες που μόλις δημιουργήσατε. Για τη Διαχείριση οποιαδήποτε όπως λογικής εφαρμογών που δημιουργία, επιλέξτε **Αναζήτηση** στην πύλη του Azure και επιλέξτε **Λογικής εφαρμογές**. Επιλέξτε την εφαρμογή σας για να δείτε περισσότερες πληροφορίες.

Μερικά χρήσιμα θέματα:

[Διαχείριση και την παρακολούθηση τις εφαρμογές API και τις γραμμές σύνδεσης](app-service-logic-monitor-your-connectors.md)  <br/>
[Παρακολούθηση εφαρμογών σας λογικής](app-service-logic-monitor-your-logic-apps.md)

<!--image references -->
[1]: ./media/app-service-logic-create-EAI-logic-app-using-VETR/BasicVETR.PNG
[2]: ./media/app-service-logic-create-EAI-logic-app-using-VETR/HTTPListener.PNG
[3]: ./media/app-service-logic-create-EAI-logic-app-using-VETR/BizTalkXMLValidator.PNG
[4]: ./media/app-service-logic-create-EAI-logic-app-using-VETR/BizTalkTransforms.PNG
[5]: ./media/app-service-logic-create-EAI-logic-app-using-VETR/AzureServiceBus.PNG
