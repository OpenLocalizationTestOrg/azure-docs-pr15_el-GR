<properties 
    pageTitle="Πώς μπορείτε να υλοποιήσετε περιήγηση με συνθήκη στο πλαίσιο Αναζήτηση Azure | Microsoft Azure | κατηγορίες περιήγησης αναζήτησης" 
    description="Προσθήκη περιήγηση με συνθήκη για τις εφαρμογές που ενοποιούνται με το Azure αναζήτησης, μια υπηρεσία cloud φιλοξενούνται αναζήτησης στο Microsoft Azure." 
    services="search" 
    documentationCenter="" 
    authors="HeidiSteen" 
    manager="mblythe" 
    editor=""/>

<tags 
    ms.service="search" 
    ms.devlang="rest-api" 
    ms.workload="search" 
    ms.topic="article" 
    ms.tgt_pltfrm="na" 
    ms.date="10/17/2016" 
    ms.author="heidist"/>

#<a name="how-to-implement-faceted-navigation-in-azure-search"></a>Πώς μπορείτε να υλοποιήσετε περιήγηση με συνθήκη στο πλαίσιο Αναζήτηση Azure

Περιήγηση με συνθήκη είναι μηχανισμό φιλτραρίσματος που παρέχει περιήγησης αυτο-άμεση λεπτομερούς έρευνας σε εφαρμογές αναζήτησης. Ενώ ο όρος 'περιήγηση με συνθήκη' δεν μπορεί να είναι εξοικειωμένοι, είναι σχεδόν ενός δεδομένου ότι έχετε χρησιμοποιήσει πριν από. Όπως δείχνει το παρακάτω παράδειγμα, περιήγηση με συνθήκη είναι τίποτε από τις κατηγορίες που χρησιμοποιούνται για το φιλτράρισμα αποτελεσμάτων.

## <a name="what-it-looks-like"></a>Πώς εμφανίζεται

 ![][1]
  
Όψεις μπορούν να σας βοηθήσουν να βρείτε αυτό που αναζητάτε, εξασφαλίζοντας ότι δεν θα λάβετε μηδενικών αποτελεσμάτων. Ως προγραμματιστές, όψεις σάς επιτρέπουν να εμφανίζουν τα πιο χρήσιμες κριτήρια αναζήτησης για περιήγηση του σώματος αναζήτησης. Στις εφαρμογές ηλεκτρονικό κατάστημα λιανικής πώλησης, περιήγηση με συνθήκη είναι ενσωματωμένη συχνά μέσω σήματα, τμήματα (υποδήματα του παιδιού), μέγεθος, τιμή, δημοτικότητας και χαρακτηρισμούς. 

Εφαρμογή περιήγηση με συνθήκη διαφέρει κατά μήκος των τεχνολογιών αναζήτησης και μπορεί να είναι πολύ σύνθετη. Στο πλαίσιο Αναζήτηση Azure, περιήγηση με συνθήκη είναι ενσωματωμένη στιγμή ερώτημα, χρησιμοποιώντας πεδία που αποδίδονται προηγουμένως καθοριστεί του σχήματος. Στα ερωτήματα που δημιουργεί την εφαρμογή σας, ένα ερώτημα πρέπει να στείλετε *Παράμετροι ερωτήματος όψη* προκειμένου να λαμβάνουν τις τιμές φίλτρου όψη διαθέσιμη για το συγκεκριμένο σύνολο αποτελεσμάτων εγγράφου. Για να αποκόψετε στην πραγματικότητα το αποτέλεσμα του εγγράφου ορίστε, πρέπει να εφαρμόσετε την εφαρμογή ενός `$filter` παράσταση.

Όσον αφορά την ανάπτυξη εφαρμογών, σύνταξη κώδικα που κατασκευάζει ερωτήματα αποτελεί τον όγκο της εργασίας. Πολλές από τις συμπεριφορές εφαρμογή που θέλετε από την περιήγηση με συνθήκη παρέχεται από την υπηρεσία, συμπεριλαμβανομένων των ενσωματωμένη υποστήριξη για τη ρύθμιση του περιοχές και γρήγορα μετρήσεις για όψη αποτελέσματα. Η υπηρεσία περιλαμβάνει επίσης ορθολογική τις προεπιλεγμένες ρυθμίσεις που σας βοηθούν να αποφύγετε δομές δύσχρηστες περιήγησης. 

Σε αυτό το άρθρο περιέχει τις ακόλουθες ενότητες:

- [Πώς μπορείτε να το δημιουργήσετε](#howtobuildit)
- [Δημιουργήστε το επίπεδο παρουσίασης](#presentationlayer)
- [Δημιουργήστε το ευρετήριο](#buildindex)
- [Έλεγχος για ποιότητα των δεδομένων](#checkdata)
- [Δημιουργία του ερωτήματος](#buildquery)
- [Συμβουλές σχετικά με τον τρόπο ελέγχου περιήγηση με συνθήκη](#tips)
- [Περιήγηση με συνθήκη με βάση τις τιμές της περιοχής](#rangefacets)
- [Περιήγηση με συνθήκη που βασίζονται σε GeoPoints](#geofacets)
- [Δοκιμή](#tryitout)

##<a name="why-use-it"></a>Γιατί να χρησιμοποιήσετε το
Η πιο αποτελεσματική εφαρμογές αναζήτησης έχουν πολλές μοντέλα επικοινωνίας εκτός από το ένα πλαίσιο αναζήτησης. Περιήγηση με συνθήκη είναι ένα σημείο εναλλακτικές εισόδου για την αναζήτηση, σας δίνει τη δυνατότητα μια εύχρηστη εναλλακτική λύση για να πληκτρολογείτε παραστάσεις σύνθετης αναζήτησης με μη αυτόματο τρόπο.

##<a name="know-the-fundamentals"></a>Μάθετε τα βασικά στοιχεία

Εάν είστε εξοικειωμένοι με αναζήτηση ανάπτυξης, είναι ο καλύτερος τρόπος για να θεωρήσετε περιήγηση με συνθήκη που εμφανίζει τις δυνατότητες για αυτο-άμεση αναζήτηση. Είναι ένας τύπος εμπειρία αναζήτησης Διερεύνηση, με βάση προκαθορισμένες φίλτρα, που χρησιμοποιούνται για τον περιορισμό γρήγορα προς τα κάτω αποτελέσματα αναζήτησης μέσω του σημείου-και-κάντε κλικ στην επιλογή Ενέργειες. 

**Μοντέλο επικοινωνίας**

Η εμπειρία αναζήτησης για περιήγηση με συνθήκη είναι επαναληπτικού, οπότε ας ξεκινήστε από την κατανόηση ως ακολουθία ερωτήματα που συνταχθεί απάντηση ενεργειών του χρήστη.

Το αρχικό σημείο είναι μια σελίδα της εφαρμογής που παρέχει περιήγηση με συνθήκη, συνήθως τοποθετείται στο περιφέρεια. Περιήγηση με συνθήκη είναι συχνά μια δομή δέντρου, με πλαίσια ελέγχου για κάθε τιμή ή με δυνατότητα επιλογής κειμένου. 

1.  Ένα ερώτημα που αποστέλλονται σε αναζήτηση Azure Καθορίζει τη δομή περιήγηση με συνθήκη μέσω μία ή περισσότερες παραμέτρους ερωτήματος όψη. Για παράδειγμα, ενδέχεται να περιλαμβάνουν το ερώτημα `facet=Rating`, ενδεχομένως με ένα `:values` ή `:sort` την επιλογή για να βελτιώσετε περαιτέρω την παρουσίαση.
2.  Το επίπεδο παρουσίασης αποδίδει μια σελίδα αναζήτησης που παρέχει περιήγηση με συνθήκη, χρησιμοποιώντας το όψεις που καθορίζεται στην αίτηση.
3.  Δίνεται μια δομή περιήγηση με συνθήκη που περιλαμβάνει χαρακτηρισμού, ο χρήστης κάνει κλικ στο κουμπί "4" για να υποδείξει ότι πρέπει να εμφανίζονται μόνο τα προϊόντα με χαρακτηρισμό 4 ή νεότερη έκδοση. 
4.  Απάντηση, η εφαρμογή στέλνει ένα ερώτημα που περιλαμβάνει`$filter=Rating ge 4` 
5.  Το επίπεδο παρουσίασης ενημερώνει τη σελίδα, που εμφανίζει ένα σύνολο αποτελεσμάτων μειωμένη, που περιέχει μόνο των στοιχείων που ικανοποιούν τα κριτήρια του νέου (σε αυτήν την περίπτωση, προϊόντα χαρακτηρισμός 4 και νεότερες εκδόσεις).

Μια όψη είναι μιας παραμέτρου ερωτήματος, αλλά μην συγχέετε το με η είσοδος στο ερώτημα. Χρησιμοποιείται ποτέ ως κριτηρίων επιλογής σε ένα ερώτημα. Αντί για αυτό, θεωρήστε ότι όψη παράμετροι ερωτήματος ως εισροές στη δομή περιήγησης που παρέχεται πίσω στην απάντηση. Για κάθε παράμετρο ερωτήματος όψη που παρέχετε, αναζήτηση Azure αξιολογεί είναι το πλήθος των εγγράφων στα μερική αποτελέσματα για κάθε τιμή όψη.

Ειδοποίηση το `$filter` στο βήμα 4. Αυτή είναι μια σημαντική πτυχή της περιήγηση με συνθήκη. Παρόλο που τα φίλτρα και όψεις είναι ανεξάρτητα από το API, θα πρέπει τόσο για παράδοση της εμπειρίας σκοπεύετε. 

**Σχεδίαση μοτίβα**

Στον κώδικα της εφαρμογής, το μοτίβο είναι να χρησιμοποιήσετε όψη παράμετροι ερωτήματος για να επιστρέψετε τη δομή περιήγηση με συνθήκη μαζί με τα αποτελέσματα όψη, καθώς και μια παράσταση $filter που χειρίζεται το συμβάν κάντε κλικ στην επιλογή. Σκεφτείτε το `$filter` παράσταση ως τον κώδικα πίσω από την πραγματική περικοπής των αποτελεσμάτων αναζήτησης επιστρέφονται στο επίπεδο της παρουσίασης. Δίνεται μια όψη χρώματα, κάνοντας κλικ στο κόκκινο χρώμα έχει υλοποιηθεί μέσω ενός `$filter` παράσταση που επιλέγει μόνο τα στοιχεία που έχουν ένα χρώμα με κόκκινο χρώμα. 

**Βασικά στοιχεία του ερωτήματος στο πλαίσιο Αναζήτηση Azure**

Στο πλαίσιο Αναζήτηση Azure, μια αίτηση καθορίζεται έως μία ή περισσότερες παραμέτρους ερωτήματος (ανατρέξτε στο θέμα [Αναζήτηση εγγράφων](http://msdn.microsoft.com/library/azure/dn798927.aspx) για μια περιγραφή για κάθε μία). Καμία από τις παραμέτρους ερωτήματος δεν είναι απαραίτητα, αλλά πρέπει να έχετε τουλάχιστον μία για ένα ερώτημα για να είναι έγκυρες.

Ακρίβεια, γενικά κατανοητή ως τη δυνατότητα να φιλτράρετε σημασία επισκέψεων στην τοποθεσία, είναι δυνατό έως μία ή και τα δύο από τα παρακάτω παραστάσεις:

- **Αναζήτηση =**<br/>
Η τιμή αυτής της παραμέτρου αποτελεί την έκφραση αναζήτησης. Μπορεί να είναι ένα ενιαίο κείμενο ή μια παράσταση σύνθετης αναζήτησης που περιλαμβάνει πολλές τους όρους και τους τελεστές. Στο διακομιστή, έκφραση αναζήτησης χρησιμοποιείται για την αναζήτηση πλήρους κειμένου, υποβολή ερωτημάτων με δυνατότητα αναζήτησης πεδία στο ευρετήριο αντίστοιχων όρους, επιστρέφει αποτελέσματα με τη σειρά κατάταξης. Εάν ορίσετε `search` στην τιμή null, ερωτήματος εκτέλεσης είναι επάνω σε ολόκληρο το ευρετήριο (δηλαδή, `search=*`). Σε αυτήν την περίπτωση, άλλα στοιχεία του ερωτήματος, όπως ένα `$filter` ή βαθμολογίας προφίλ, θα είναι το κύριο παράγοντες που επηρεάζουν τα έγγραφα που επιστρέφονται `($filter`) και με ποια σειρά (`scoringProfile` ή `$orderb`y).

- **$filter =**<br/>
Ένα φίλτρο είναι ένας μηχανισμός ισχυρή για τον περιορισμό του μεγέθους των αποτελεσμάτων αναζήτησης με βάση τις τιμές των χαρακτηριστικών συγκεκριμένο έγγραφο. A `$filter` είναι αξιολογηθεί πρώτο, ακολουθούμενο από faceting λογικής που δημιουργείται από τις διαθέσιμες τιμές και το αντίστοιχο υπολογίζεται για κάθε τιμή

Σύνθετη αναζήτηση παραστάσεις θα μείωση τις επιδόσεις του ερωτήματος. Εάν είναι δυνατόν, χρησιμοποιούν παραστάσεις φίλτρου καλά κατασκευαστεί για να αυξήσετε την ακρίβεια και Βελτιώστε την απόδοση του ερωτήματος.

Για να κατανοήσετε καλύτερα πώς ένα φίλτρο προσθέτει μεγαλύτερη ακρίβεια, σύγκριση μιας έκφρασης σύνθετης αναζήτησης σε ένα που περιλαμβάνει μια παράσταση φίλτρου:

- `GET /indexes/hotel/docs?search=lodging budget +Seattle –motel +parking`

- `GET /indexes/hotel/docs?search=lodging&$filter=City eq ‘Seattle’ and Parking and Type ne ‘motel’`

Παρόλο που και οι δύο ερωτήματα είναι έγκυρες, η δεύτερη είναι προϊσταμένου Εάν αναζητάτε μη motels με στάθμευσης στο Σιάτλ. Το πρώτο ερώτημα βασίζεται σε αυτές τις συγκεκριμένες λέξεις που αναφέρεται ή δεν αναφέρεται σε πεδία συμβολοσειρά, όπως όνομα, περιγραφή και οποιοδήποτε άλλο πεδίο που περιέχει τα δεδομένα με δυνατότητα αναζήτησης. Το δεύτερο ερώτημα αναζητά την ακριβή αντιστοιχία βρίσκει στη δομημένα δεδομένα και είναι πιθανό να είναι πολύ πιο ακριβείς.

Στις εφαρμογές που περιλαμβάνουν περιήγηση με συνθήκη, θα θέλετε να βεβαιωθείτε ότι κάθε ενέργεια χρήστη επάνω σε μια δομή περιήγηση με συνθήκη συνοδεύεται από ένα απομόνωση των αποτελεσμάτων αναζήτησης, επίτευξη μέσω μια παράσταση φίλτρου.

<a name="howtobuildit"></a>
##<a name="how-to-build-it"></a>Πώς μπορείτε να το δημιουργήσετε

Περιήγηση με συνθήκη στο πλαίσιο Αναζήτηση Azure έχει υλοποιηθεί σε κώδικα της εφαρμογής σας που δημιουργεί την αίτηση, αλλά βασίζεται σε προκαθορισμένα στοιχεία του σχήματος.

Προκαθορισμένες στην αναζήτησή σας ευρετήριο είναι το `Facetable [true|false]` χαρακτηριστικό ευρετήριο, ρύθμιση σε επιλεγμένα πεδία για να ενεργοποιήσετε ή να απενεργοποιήσετε τη χρήση τους σε δομή περιήγηση με συνθήκη. Χωρίς `"Facetable" = true`, ένα πεδίο δεν μπορεί να χρησιμοποιηθεί στο παράθυρο περιήγησης όψη.

Στιγμή ερωτήματος, κώδικα της εφαρμογής σας δημιουργεί μια αίτηση που περιλαμβάνει `facet=[string]`, μια παράμετρος αίτηση που παρέχει το πεδίο να όψη από. Ένα ερώτημα μπορεί να έχει πολλές δραστηριότητες, όπως είναι οι `&facet=color&facet=category&facet=rating`, κάθε μία από τις διαχωρισμένα με ένα χαρακτήρα εμπορικό και (&).

Κώδικα της εφαρμογής πρέπει να δημιουργήσετε ένα `$filter` παράσταση για να χειριστείτε τα συμβάντα κάντε κλικ στην επιλογή στην περιήγηση με συνθήκη. A `$filter` μειώνει τα αποτελέσματα αναζήτησης, χρησιμοποιώντας την τιμή του ως κριτήρια φίλτρου.

Αναζήτηση Azure επιστρέφει τα αποτελέσματα αναζήτησης, ανά τους όρους που εισάγονται από το χρήστη, μαζί με τις ενημερώσεις για τη δομή περιήγηση με συνθήκη. Στο πλαίσιο Αναζήτηση Azure, περιήγηση με συνθήκη είναι μια κατασκευή ενός επιπέδου, με τιμές όψη, και Μετρά πόσες αποτελεσμάτων βρεθούν για κάθε μία.

Το επίπεδο παρουσίασης στον κώδικά σας παρέχει της εμπειρίας χρήστη. Αυτό θα πρέπει να αναφέρετε τα μέρη που απαρτίζουν την περιήγηση με συνθήκη, όπως την ετικέτα, τιμές, πλαίσια ελέγχου και το πλήθος. Το Azure Search REST API είναι agnostic πλατφόρμα, οπότε χρησιμοποιήστε οποιαδήποτε γλώσσα και την πλατφόρμα που θέλετε. Είναι σημαντικό να περιλαμβάνουν στοιχεία περιβάλλοντος εργασίας Χρήστη που υποστηρίζει αυξάνονται ανανέωσης, με κατάσταση ενημερωμένο περιβάλλον εργασίας Χρήστη, όπως κάθε επιπλέον όψη είναι επιλεγμένο. 

Στις ενότητες που ακολουθούν, θα κάνουμε μια πιο κοντινή ματιά στην πώς να δημιουργείτε κάθε τμήμα, ξεκινώντας από το επίπεδο παρουσίασης.

<a name="presentationlayer"></a>
##<a name="build-the-presentation-layer"></a>Δημιουργήστε το επίπεδο παρουσίασης

Εργασία πίσω από το επίπεδο την παρουσίασή σας βοηθά να αποκαλύψετε απαιτήσεις που μπορεί να λείπουν διαφορετικά και έχετε κατανοήσει ποιες δυνατότητες είναι απαραίτητες για την εμπειρία αναζήτησης.

Όσον αφορά την περιήγηση με συνθήκη, σελίδα σας web ή την εφαρμογή εμφανίζει τη δομή περιήγηση με συνθήκη εντοπίσει εισαγωγή από το χρήστη στη σελίδα και εισάγει τα στοιχεία που αλλάζουν. 

Για τις εφαρμογές web, AJAX χρησιμοποιείται συνήθως στο επίπεδο παρουσίαση επειδή σας επιτρέπει να ανανεώσετε τις αλλαγές βηματική. Μπορείτε επίσης να χρησιμοποιήσετε ASP.NET MVC ή οποιαδήποτε πλατφόρμα απεικόνιση που μπορούν να συνδεθούν σε μια υπηρεσία αναζήτησης Azure μέσω HTTP. Το δείγμα εφαρμογής που αναφέρονται σε αυτό το άρθρο-- **Καταλόγου AdventureWorks** – τυχαίνει να είναι μια εφαρμογή του ASP.NET MVC.

Το παρακάτω παράδειγμα, που λαμβάνονται από το αρχείο **index.cshtml** της εφαρμογής δείγμα, δημιουργεί μια δυναμική δομή HTML για την εμφάνιση περιήγηση με συνθήκη στη σελίδα των αποτελεσμάτων αναζήτησης. Στο δείγμα, περιήγηση με συνθήκη είναι ενσωματωμένο στο τη σελίδα αποτελεσμάτων αναζήτησης και εμφανίζεται αφού ο χρήστης έχει υποβληθεί έναν όρο αναζήτησης.

Ειδοποίηση ότι κάθε όψη έχει μια ετικέτα (χρώματα, κατηγορίες, τιμές), μια σύνδεση σε ένα πεδίο με συνθήκη (χρώμα, ΌνομαΚατηγορίας, listPrice) και ένα `.count` παράμετρος, που χρησιμοποιείται για να επιστρέψει τον αριθμό των στοιχείων που έχουν ως αποτέλεσμα όψη που βρέθηκε.

  ![][2]
 

> [AZURE.TIP] Κατά τη σχεδίαση της σελίδας αποτελεσμάτων αναζήτησης, μην ξεχάσετε να προσθέσετε μηχανισμό για την εκκαθάριση του όψεις. Εάν χρησιμοποιείτε τα πλαίσια ελέγχου, οι χρήστες μπορούν να intuit εύκολα πώς μπορείτε να καταργήσετε τα φίλτρα. Για άλλες διατάξεις, ίσως χρειαστεί ένα μοτίβο δυναμικής διαδρομής ή μια άλλη creative προσέγγιση. Για παράδειγμα, στην εφαρμογή του δείγματος AdventureWorks καταλόγου, μπορείτε να κάνετε κλικ στον τίτλο, AdventureWorks καταλόγου, για να επαναφέρετε τη σελίδα αναζήτησης.

<a name="buildindex"></a>
##<a name="build-the-index"></a>Δημιουργήστε το ευρετήριο

Faceting είναι ενεργοποιημένη με βάση το πεδίο από το πεδίο στο ευρετήριο, μέσω αυτού του χαρακτηριστικού ευρετήριο: `"Facetable": true`.  
Όλοι οι τύποι πεδίων που θα μπορούσε να είναι δυνατόν να χρησιμοποιηθεί με περιήγηση με συνθήκη είναι `Facetable` από προεπιλογή. Οι τύποι πεδίων περιλαμβάνουν `Edm.String`, `Edm.DateTimeOffset`, και όλους τους τύπους αριθμητικό πεδίο (ουσιαστικά, όλοι οι τύποι πεδίων είναι facetable εκτός από `Edm.GeographyPoint`, που δεν μπορούν να χρησιμοποιηθούν σε περιήγηση με συνθήκη). 

Όταν δημιουργείτε ένα ευρετήριο, βέλτιστη πρακτική για περιήγηση με συνθήκη είναι απενεργοποίησης ρητά faceting για τα πεδία που πρέπει να χρησιμοποιούνται ποτέ ως μια όψη.  Συγκεκριμένα, πρέπει να έχει οριστεί συμβολοσειρά πεδία για singleton τιμές, όπως ένα όνομα Αναγνωριστικό ή προϊόν, `"Facetable": false` για να αποτρέψετε τη χρήση τους έγιναν κατά λάθος (και ανενεργή) σε μια περιήγηση με συνθήκη.

Ακολουθεί η διάταξη για την εφαρμογή δείγμα καταλόγου AdventureWorks (αποκοπεί από ορισμένες ιδιότητες για να μειώσετε το συνολικό μέγεθος):

 ![][3]
 
Λάβετε υπόψη ότι `Facetable` είναι απενεργοποιημένη για τα πεδία συμβολοσειρά που δεν πρέπει να χρησιμοποιηθεί ως όψεις, όπως ένα Αναγνωριστικό ή όνομα. Ενεργοποίηση faceting απενεργοποίηση όπου δεν τη χρειάζεστε σάς βοηθά να διατηρήσετε μικρό το μέγεθος του ευρετηρίου και, γενικά βελτιώνει τις επιδόσεις.

> [AZURE.TIP] Ως βέλτιστη πρακτική, συμπεριλάβετε το πλήρες σύνολο χαρακτηριστικών ευρετηρίου για κάθε πεδίο. Παρόλο που `Facetable` είναι ενεργοποιημένη από προεπιλογή για σχεδόν όλα τα πεδία, τη ρύθμιση σκόπιμα κάθε χαρακτηριστικό μπορεί να σας βοηθήσει να σκεφθείτε έως τις επιπτώσεις όταν κάθε σχήμα απόφασης. 

<a name="checkdata"></a>
##<a name="check-for-data-quality"></a>Έλεγχος για ποιότητα των δεδομένων 

Κατά την ανάπτυξη οποιαδήποτε εφαρμογή του επίκεντρο τα δεδομένα, προετοιμασία των δεδομένων είναι συχνά ένα από τα μεγαλύτερο τμήματα της εργασίας. Εφαρμογές αναζήτησης δεν αποτελούν εξαίρεση. Την ποιότητα των δεδομένων σας έχει άμεση σχέση με εάν τη δομή περιήγηση με συνθήκη στιγμή της επέλευσης όπως θα περιμένατε, καθώς και την αποτελεσματικότητα στο βοηθώντας σας να δημιουργήσετε φίλτρα που Μειώστε το αποτέλεσμα ρύθμιση.

Στο πεδίο Αναζήτηση Azure του σώματος αναζήτησης διαμορφώνεται από τα έγγραφα που συμπληρώνουν ένα ευρετήριο. Έγγραφα παρέχουν τις τιμές που χρησιμοποιούνται για τον υπολογισμό όψεις. Εάν θέλετε να όψη με εμπορικής επωνυμίας ή τιμής, κάθε έγγραφο πρέπει να περιέχει τιμές για το *BrandName* και *ProductPrice* που είναι έγκυρες, συνεπή και παραγωγικοί ως επιλογή φίλτρο.

Μερικά υπενθυμίσεις που πρέπει να χρησιμοποιήσετε για παρατίθενται παρακάτω:

- Για κάθε πεδίο που θέλετε να όψη από, ζητήστε από τον εαυτό σας αν περιέχει τιμές που είναι κατάλληλα ως φίλτρα στην αυτο-άμεση αναζήτηση. Οι τιμές πρέπει να είναι σύντομο περιγραφικό και αρκετά χαρακτηριστική να προσφέρουν μια σαφής επιλογή μεταξύ των ανταγωνιστικών επιλογών.
- Ορθογραφικά λάθη ή σχεδόν αντίστοιχες τιμές. Εάν όψη σε χρώμα και τιμές πεδίων περιλαμβάνουν πορτοκαλί και Ornage (ένα ορθογραφικό λάθος), μια όψη που βασίζεται στο πεδίο χρώμα θα σηκώστε και τα δύο.
- Μεικτό κείμενο πεζών-κεφαλαίων επίσης να wreak χάος στην περιήγηση με συνθήκη, με πορτοκαλί και πορτοκαλί που εμφανίζονται ως δύο διαφορετικές τιμές. 
- Μεμονωμένη και πληθυντικούς εκδόσεις του την ίδια τιμή μπορεί να έχει ως αποτέλεσμα μια ξεχωριστή όψη για κάθε μία.

Όπως μπορείτε να φανταστείτε, επιμέλεια κατά την προετοιμασία των δεδομένων είναι βασικές πτυχή της αποτελεσματικές περιήγηση με συνθήκη.

<a name="buildquery"></a>
##<a name="build-the-query"></a>Δημιουργία του ερωτήματος

Ο κώδικας που γράφετε για τη δημιουργία ερωτημάτων πρέπει να καθορίσετε όλα τα μέρη του ένα έγκυρο ερώτημα, όπως εκφράσεων αναζήτησης, όψεις, φίλτρα, βαθμολογίας προφίλ – οτιδήποτε χρησιμοποιείται για τη διατύπωση αίτησης. Σε αυτήν την ενότητα, θα εξερευνήσουμε όπου όψεις χωρά σε ένα ερώτημα και πώς χρησιμοποιούνται τα φίλτρα με όψεις για να παρέχουν ένα σύνολο αποτελεσμάτων μειωμένη.

Ένα παράδειγμα συχνά είναι ένα καλό σημείο για να ξεκινήσετε. Το παρακάτω παράδειγμα, που λαμβάνονται από το αρχείο **CatalogSearch.cs** , δημιουργεί μια αίτηση που δημιουργεί περιήγησης όψη βάσει χρώματος, κατηγορία και την τιμή. 

Παρατηρήστε ότι είναι αναπόσπαστο σε αυτήν την εφαρμογή δείγμα όψεις. Την εμπειρία αναζήτησης στον κατάλογο AdventureWorks σχεδιάζεται γύρω από την περιήγηση με συνθήκη και φίλτρα. Αυτό είναι σαφή στη θέση εμφανείς περιήγηση με συνθήκη στη σελίδα. Το δείγμα εφαρμογής περιλαμβάνει παραμέτρους URI για όψεις ("Χρώμα", "κατηγορία", "τιμές") ως ιδιότητες στη μέθοδο αναζήτησης (όπως συνταχθεί στην εφαρμογή δείγμα).

  ![][4]
 
Μιας παραμέτρου ερωτήματος όψη έχει οριστεί σε ένα πεδίο και ανάλογα με τον τύπο δεδομένων, μπορεί να είναι περισσότερο με παραμέτρους με κόμματα λίστα που περιλαμβάνει `count:<integer>`, `sort:<>`, `intervals:<integer>`, και `values:<list>`. Μια λίστα τιμών υποστηρίζεται για αριθμητικά δεδομένα κατά τη ρύθμιση περιοχές. Για λεπτομέρειες χρήσης, ανατρέξτε στο θέμα [Αναζήτηση εγγράφων (Azure API αναζήτησης)](http://msdn.microsoft.com/library/azure/dn798927.aspx) .

Μαζί με όψεις, την αίτηση τυποποιημένη από την εφαρμογή σας θα πρέπει επίσης να δημιουργήσετε φίλτρα για να περιορίσετε το σύνολο των υποψηφίου έγγραφα που βασίζονται σε μια επιλογή τιμή όψη. Για ένα χώρο αποθήκευσης ποδηλάτων, περιήγηση με συνθήκη παρέχει ενδείξεις σε ερωτήσεις όπως "Τι χρωμάτων, κατασκευαστές και τους τύπους των ποδηλάτων είναι διαθέσιμες", ενώ το φιλτράρισμα απαντήσεις σε ερωτήσεις όπως "ποια ακριβή ποδήλατα είναι κόκκινα, Ποδήλατα βουνού, σε αυτό τιμή περιοχή".

Όταν ένας χρήστης κάνει κλικ "Κόκκινο" για να υποδείξει ότι πρέπει να εμφανίζονται μόνο τα προϊόντα κόκκινο, να περιλαμβάνει το επόμενο ερώτημα στέλνει την εφαρμογή `$filter=Color eq ‘Red’`.

## <a name="best-practices-for-faceted-navigation"></a>Βέλτιστες πρακτικές για την περιήγηση με συνθήκη

Η παρακάτω λίστα συνοψίζει ορισμένες βέλτιστες πρακτικές.

- **Ακρίβεια**<br/>
Χρησιμοποιήστε φίλτρα. Εάν χρησιμοποιείτε μόνο εκφράσεων αναζήτησης από μόνο του, ρίζας μπορεί να προκαλέσει ένα έγγραφο που θα επιστραφεί που δεν έχει την τιμή ακριβείς όψη σε οποιοδήποτε από τα πεδία. 

- **Τα πεδία προορισμού**<br/>
Στο με συνθήκη Διερεύνηση, που συνήθως θέλετε να περιλαμβάνει μόνο τα έγγραφα που διαθέτουν την τιμή του σε ένα συγκεκριμένο πεδίο (με συνθήκη), δεν οπουδήποτε σε όλα τα πεδία με δυνατότητα αναζήτησης. Προσθήκη ενός φίλτρου ενισχύει το πεδίο προορισμού κατευθύνοντας την υπηρεσία για να πραγματοποιήσετε αναζήτηση μόνο στο πεδίο με συνθήκη για μια τιμή που ταιριάζει.

- **Απόδοση ευρετηρίου**<br/>
Εάν η εφαρμογή σας χρησιμοποιεί αποκλειστικά περιήγηση με συνθήκη (δηλαδή, δεν υπάρχει πλαίσιο αναζήτησης), μπορείτε να επισημάνετε το πεδίο ως `searchable=false`, `facetable=true` για να δημιουργήσετε ένα πιο συμπυκνωμένος ευρετήριο. Επιπλέον, η δημιουργία ευρετηρίου παρουσιάζεται μόνο σε ολόκληρο όψη τιμές, χωρίς αλλαγή word ή η δημιουργία ευρετηρίου των στοιχείων μιας τιμής πολλών λέξεων.

- **Επιδόσεων**<br/>
Φίλτρα περιορισμό του συνόλου εγγράφων υποψηφίου για την αναζήτηση και αποκλεισμός τους από την κατάταξη. Εάν έχετε ένα μεγάλο σύνολο εγγράφων, χρησιμοποιώντας μια διερεύνησης πολύ επιλεκτική όψη προς τα κάτω συχνά περιλαμβάνει σημαντικά καλύτερες επιδόσεις.


<a name="tips"></a> 
##<a name="tips-on-how-to-control-faceted-navigation"></a>Συμβουλές σχετικά με τον τρόπο ελέγχου περιήγηση με συνθήκη

Ακολουθεί ένα φύλλο συμβουλή με οδηγίες σχετικά με συγκεκριμένα θέματα.

**Προσθήκη ετικετών για κάθε πεδίο στο παράθυρο περιήγησης όψη**

Ετικέτες συνήθως ορίζονται στην HTML ή φόρμα (**index.cshtml** στην εφαρμογή δείγμα). Υπάρχει καμία API στο πλαίσιο Αναζήτηση Azure όψη περιήγησης ετικέτες ή οποιοδήποτε άλλο είδος μετα-δεδομένων.

**Ορισμός τα πεδία που μπορούν να χρησιμοποιηθούν ως όψη**

Ανάκληση ότι το σχήμα του δείκτη προσδιορίζει ποια πεδία είναι διαθέσιμα για χρήση ως μια όψη. Υπό την προϋπόθεση ότι το πεδίο είναι facetable, το ερώτημα καθορίζει ποια πεδία για να όψη από. Το πεδίο σύμφωνα με τις οποίες είστε faceting παρέχει τις τιμές που εμφανίζονται κάτω από την ετικέτα. 

Οι τιμές που εμφανίζονται κάτω από κάθε ετικέτα ανακτώνται από το ευρετήριο. Για παράδειγμα, εάν το πεδίο όψη είναι *χρώμα*, τις τιμές που είναι διαθέσιμες για το φιλτράρισμα επιπλέον θα τις τιμές για αυτό το πεδίο (κόκκινο, μαύρο, κ.ο.κ.).

Για αριθμητικούς και DateTime μόνο τιμές, μπορείτε να ορίσετε ρητά τιμές στο πεδίο όψη (για παράδειγμα, `facet=Rating,values:1|2|3|4|5`). Μια λίστα τιμών επιτρέπεται για αυτούς τους τύπους πεδίων για να απλοποιήσετε το διαχωρισμό των αποτελεσμάτων όψη σε συνεχόμενες περιοχές τιμών (είτε περιοχές βάσει αριθμητικών τιμών ή χρονικών περιόδων). 

**Αποκοπή όψη αποτελεσμάτων**

Αποτελέσματα όψη είναι έγγραφα που βρίσκονται στα αποτελέσματα αναζήτησης που συμφωνούν με έναν όρο όψη. Στο παρακάτω παράδειγμα, στα αποτελέσματα αναζήτησης για *υπολογιστική cloud*, 254 στοιχεία έχουν επίσης *εσωτερικό προδιαγραφή* ως τύπο περιεχομένου. Τα στοιχεία δεν είναι απαραίτητα αμοιβαία αποκλειόμενα. Εάν ένα στοιχείο ικανοποιεί τα κριτήρια του δύο φίλτρων, υπολογίζεται σε κάθε μία. Αυτό είναι εφικτό όταν faceting στην `Collection(Edm.String)` πεδία, τα οποία χρησιμοποιούνται συχνά για την υλοποίηση της προσθήκης ετικετών του εγγράφου.

        Search term: "cloud computing"
        Content type
           Internal specification (254)
           Video (10) 

Σε γενικές γραμμές, εάν διαπιστώσετε ότι αποτελέσματα όψη μόνιμα είναι πολύ μεγάλο, συνιστάται να προσθέτετε περισσότερα φίλτρα, όπως εξηγείται στις προηγούμενες ενότητες, για να δώσετε τους χρήστες της εφαρμογής σας περισσότερες επιλογές για να περιορίσετε τα αποτελέσματα της αναζήτησης.

**Όριο στοιχείων στο παράθυρο περιήγησης όψη**

Για κάθε πεδίο με συνθήκη στο δέντρο περιήγησης, υπάρχει ένα προεπιλεγμένο όριο των 10 τιμές. Αυτή η προεπιλογή έχει νόημα για δομές περιήγησης, επειδή διατηρεί τη λίστα τιμών σε διαχειρίσιμα μέγεθος. Μπορείτε να παρακάμψετε την προεπιλεγμένη αντιστοιχίζοντας μια τιμή για να μετρήσετε.

- `&facet=city,count:5`Καθορίζει ότι μόνο τα πρώτα 5 πόλεις που βρίσκεται στο επάνω μέρος αποτελεσμάτων κατάταξης επιστρέφονται ως αποτέλεσμα όψη. Δεδομένο έναν όρο αναζήτησης "αεροδρόμιο" και 32 συμφωνίες, στην περίπτωση που καθορίζει το ερώτημα `&facet=city,count:5`, μόνο τα πρώτα πέντε μοναδικό πόλεις με τα περισσότερα έγγραφα στα αποτελέσματα αναζήτησης περιλαμβάνονται στα αποτελέσματα όψη.

Ειδοποίηση η διάκριση μεταξύ όψη αποτελεσμάτων και των αποτελεσμάτων αναζήτησης. Αποτελέσματα αναζήτησης είναι όλα τα έγγραφα που ταιριάζουν με το ερώτημα. Αποτελέσματα όψη είναι τις συμφωνίες για κάθε τιμή όψη. Στο παράδειγμα, αποτελέσματα αναζήτησης θα περιλαμβάνουν ονόματα πόλη που δεν είναι στη λίστα ταξινόμηση όψη (5 στο παράδειγμά μας). Αποτελέσματα που έχουν φιλτραριστεί μέσω περιήγηση με συνθήκη γίνονται ορατά στο χρήστη όταν ο συνάδελφός καταργεί όψεις ή επιλέγει άλλες δραστηριότητες εκτός από την πόλη. 

> [AZURE.NOTE] Συζητάτε `count` όταν υπάρχει περισσότερους από έναν τύπους μπορεί να είναι περίπλοκη. Ο παρακάτω πίνακας παρέχει μια σύντομη περίληψη πώς χρησιμοποιούνται οι τον όρο στο API αναζήτησης Azure, δείγματα κώδικα και τεκμηρίωση. 

- `@colorFacet.count`<br/>
Στον κώδικα της παρουσίασης, θα πρέπει να μπορείτε να δείτε μια παράμετρος count σε την όψη, εμφανίζει τον αριθμό των αποτελεσμάτων όψη. Στα αποτελέσματα όψη, πλήθος σημαίνει ότι ο αριθμός των εγγράφων που αντιστοιχούν στον όρο όψη ή περιοχή.

- `&facet=City,count:12`<br/>
Σε ένα ερώτημα όψη, μπορείτε να ορίσετε καταμέτρηση σε μια τιμή.  Η προεπιλογή είναι 10, αλλά μπορείτε να τη ρυθμίσετε μεγαλύτερη ή μικρότερη. Ρύθμιση `count:12` λαμβάνει επάνω 12 αντιστοιχεί στα αποτελέσματα όψη από το πλήθος των εγγράφων.

- "`@odata.count`"<br/>
Στην απάντηση ερωτήματος, αυτή η τιμή υποδεικνύει τον αριθμό των στοιχείων που ταιριάζει στα αποτελέσματα αναζήτησης. Κατά μέσο όρο, είναι μεγαλύτερο από το άθροισμα όλων των αποτελεσμάτων όψη συνδυαστεί, λόγω της παρουσίας των στοιχείων που ταιριάζουν με τον όρο αναζήτησης, αλλά έχετε καμία συμφωνίες τιμή όψη.


**Επίπεδα στην περιήγηση με συνθήκη** 

Όπως σημειώθηκε, δεν υπάρχει απευθείας υποστήριξη για την ένθεση όψεις σε μια ιεραρχία. Έξοδος από το πλαίσιο, περιήγηση με συνθήκη υποστηρίζει μόνο ένα επίπεδο των φίλτρων. Ωστόσο, υπάρχουν λύσεις. Μπορείτε να κωδικοποιήσετε μια όψη ιεραρχική δομή σε μια `Collection(Edm.String)` με μία καταχώρηση οδηγούν ανά ιεραρχία. Εφαρμογή αυτή η λύση είναι πέρα από το πεδίο αυτού του άρθρου, αλλά μπορείτε να διαβάσετε σχετικά με τις συλλογές [OData με βάση ένα παράδειγμα](http://msdn.microsoft.com/library/ff478141.aspx). 

**Επικυρώστε πεδία**

Εάν δημιουργείτε τη λίστα των όψεις δυναμικά που βασίζεται σε μη αξιόπιστη χρήστη, είτε πρέπει να επαληθεύσετε ότι τα ονόματα των πεδίων με συνθήκη είναι έγκυρη ή διαφυγής τα ονόματα κατά τη δημιουργία διευθύνσεις URL που χρησιμοποιεί ένα από τα `Uri.EscapeDataString()` στο .NET ή στην ισοδύναμη αξία σε την πλατφόρμα σας της επιλογής.

**Καταμετρά στα αποτελέσματα όψη**

Όταν προσθέτετε ένα φίλτρο σε ένα ερώτημα με συνθήκη, ενδέχεται να θέλετε να διατηρήσετε τη δήλωση όψη (για παράδειγμα, `facet=Rating&$filter=Rating ge 4`). Τεχνικά, όψη = χαρακτηρισμού δεν είναι απαραίτητο, αλλά διατήρηση του επιστρέφει το πλήθος των τιμών όψη για τους χαρακτηρισμούς 4 και νεότερη έκδοση. Για παράδειγμα, εάν ένας χρήστης κάνει κλικ στο κουμπί "4" και το ερώτημα περιλαμβάνει ένα φίλτρο για μεγαλύτερο ή ίσο με "4", καταμετρά επιστρέφονται για κάθε χαρακτηρισμό που είναι 4 και προς τα επάνω.  

**Sharding συνέπειες στη καταμετρά όψη**

Σε ορισμένες περιπτώσεις, ίσως διαπιστώσετε ότι όψη δεν συμφωνεί με τα σύνολα αποτελεσμάτων (ανατρέξτε στο θέμα [Περιήγηση με συνθήκη στο πλαίσιο Αναζήτηση Azure (φόρουμ δημοσίευση)](https://social.msdn.microsoft.com/Forums/azure/06461173-ea26-4e6a-9545-fbbd7ee61c8f/faceting-on-azure-search?forum=azuresearch)).

Καταμετρά όψη μπορεί να είναι ακριβής λόγω της αρχιτεκτονικής sharding. Κάθε ευρετήριο αναζήτησης έχει πολλές shards, κάθε μία από τις αναφορές και τα όψεις επάνω Ν από έγγραφο απογραφή, το οποίο, στη συνέχεια, συνδυάζονται σε ένα μεμονωμένο αποτέλεσμα. Εάν κάποια shards έχετε πολλές αντίστοιχες τιμές, ενώ άλλοι χρήστες έχουν μικρότερο, μπορεί να διαπιστώσετε ότι ορισμένες τιμές όψη λείπουν ή στην περιοχή-μέτρηση στα αποτελέσματα.

Παρόλο που αυτή η συμπεριφορά μπορεί να αλλάξει ανά πάσα στιγμή, εάν αντιμετωπίσετε αυτήν τη συμπεριφορά σήμερα, μπορείτε να επιλύσετε το από τεχνητά διόγκωση το πλήθος:<number> σε πολύ μεγάλο αριθμό για να επιβάλετε τις αναφορές πλήρους από κάθε shard. Εάν η τιμή του πλήθους: είναι μεγαλύτερο από ή ίσο με τον αριθμό των μοναδικών τιμών στο πεδίο, που είναι εγγυημένη ακριβή αποτελέσματα. Ωστόσο, όταν υπολογίζεται εγγράφου είναι πολύ υψηλό, υπάρχει επιδόσεις, επομένως, χρησιμοποιείται αυτή η επιλογή judiciously.

<a name="rangefacets"></a>
##<a name="facet-navigation-based-on-a-range-values"></a>Περιήγηση όψη που βασίζεται σε μια περιοχή τιμών

Faceting πάνω από περιοχές είναι μια συνηθισμένη απαίτηση εφαρμογής αναζήτησης. Περιοχές που υποστηρίζονται για αριθμητικά δεδομένα και τις τιμές ημερομηνίας/ώρας. Μπορείτε να διαβάσετε περισσότερα σχετικά με κάθε προσέγγιση στην [Αναζήτηση εγγράφων (Azure API αναζήτησης)](http://msdn.microsoft.com/library/azure/dn798927.aspx).

Azure αναζήτησης απλοποιεί περιοχή κατασκευή, παρέχοντας δύο προσεγγίσεις για τον υπολογισμό μιας περιοχής. Για δύο αυτές προσεγγίσεις, αναζήτηση Azure δημιουργεί τις κατάλληλες περιοχές που δίνονται τα δεδομένα εισόδου που έχετε δώσει. Για παράδειγμα, εάν καθορίσετε τιμές περιοχή 10 | 20 | 30, αυτό θα δημιουργήσει αυτόματα περιοχές 0-10, 10-20, 20-30. Το δείγμα εφαρμογής καταργεί οποιαδήποτε χρονικά διαστήματα που είναι κενά. 

**Προσέγγιση 1: Χρησιμοποιήστε την παράμετρο χρονικού διαστήματος**<br/>
Για να ορίσετε όψεις τιμή $10 διαστήματα, θα πρέπει να καθορίσετε:`&facet=price,interval:10`


**Προσέγγιση 2: Χρήση μιας λίστας τιμών**<br/>
Για αριθμητικά δεδομένα, μπορείτε να χρησιμοποιήσετε μια λίστα τιμών.  Εξετάστε την περιοχή όψη για listPrice, απόδοσης ως εξής:

  ![][5]

Στην περιοχή έχει καθοριστεί στο αρχείο **CatalogSearch.cs** χρησιμοποιώντας μια λίστα τιμών:

    facet=listPrice,values:10|25|100|500|1000|2500

Κάθε περιοχή έχει δημιουργηθεί με 0 ως σημείο εκκίνησης, μια τιμή από τη λίστα ως τελικού σημείου, και κατόπιν περικόπτεται στην προηγούμενη περιοχή για να δημιουργήσετε ξεχωριστή χρονικά διαστήματα. Azure αναζήτησης θα το κάνετε αυτό ως μέρος του περιήγηση με συνθήκη. Δεν χρειάζεται να συντάξετε κώδικα για τη Δόμηση κάθε χρονικό διάστημα.

### <a name="build-a-filter-for-facet-ranges"></a>Δημιουργήστε ένα φίλτρο για περιοχές όψη ###

Για να φιλτράρετε τα έγγραφα που βασίζονται σε περιοχή επιλεγμένες από το χρήστη, μπορείτε να χρησιμοποιήσετε το `"ge"` και `"lt"` φιλτράρισμα τελεστές σε μια παράσταση δύο τμημάτων που καθορίζει τα τελικά σημεία της περιοχής. Για παράδειγμα, εάν ο χρήστης επιλέγει την περιοχή 10-25, το φίλτρο θα `$filter=listPrice ge 10 and listPrice lt 25`.

Στην εφαρμογή του δείγματος, η παράσταση φίλτρου χρησιμοποιεί **priceFrom** και **priceTo** παραμέτρους για να ορίσετε τα τελικά σημεία. Η μέθοδος **Δημιουργία φίλτρου** σε **CatalogSearch.cs** περιέχει την παράσταση φίλτρου που θα σας δώσει τα έγγραφα σε μια περιοχή.

  ![][6]

<a name="geofacets"></a> 
##<a name="filtered-navigation-based-on-geopoints"></a>Φιλτραρισμένες περιήγησης που βασίζονται σε GeoPoints

Το κοινό για να δείτε τα φίλτρα που μπορείτε να επιλέξετε ένα χώρο αποθήκευσης, εστιατόριο ή προορισμού με βάση την απόσταση από την τρέχουσα θέση σας θα σας βοηθήσουν. Ενώ αυτόν τον τύπο φίλτρου μπορεί να μοιάζει με περιήγηση με συνθήκη, είναι στην πραγματικότητα απλώς ένα φίλτρο. Εδώ θα σας να το αναφέρετε για όσους από εσάς αναζητάτε συγκεκριμένα υλοποίηση συμβουλές για το συγκεκριμένο πρόβλημα συγκεκριμένο σχεδίασης.

Υπάρχουν δύο συναρτήσεις σε Γεωχωρικά στο Azure αναζήτησης, **geo.distance** και **geo.intersects**.

- Η συνάρτηση **geo.distance** επιστρέφει την απόσταση σε χιλιόμετρα μεταξύ δύο σημείων, μία που ένα πεδίο και μία μια σταθερά που διαβιβάζεται ως μέρος του φίλτρου. 

- Η συνάρτηση **geo.intersects** επιστρέφει true εάν είναι ένα δεδομένο σημείο μέσα σε μια δεδομένη πολύγωνο, όπου το σημείο είναι ένα πεδίο και το πολύγωνο έχει καθοριστεί ως μια σταθερή λίστα με τις συντεταγμένες που εισήχθησαν ως τμήμα του φίλτρου.

Μπορείτε να βρείτε παραδείγματα φίλτρο στη [σύνταξη έκφρασης OData (Azure αναζήτηση)](http://msdn.microsoft.com/library/azure/dn798921.aspx).

<a name="tryitout"></a>
##<a name="try-it-out"></a>Δοκιμή

Azure επίδειξη αναζήτησης Adventure Works στο Codeplex περιέχει τα παραδείγματα που αναφέρονται σε αυτό το άρθρο. Καθώς εργάζεστε με αποτελέσματα αναζήτησης, παρακολουθήστε τη διεύθυνση URL για αλλαγές στο ερώτημα κατασκευή. Αυτή η εφαρμογή θα συμβεί για να προσαρτήσετε όψεις URI κατά την επιλογή κάθε μία.

1.  Ρυθμίστε τις παραμέτρους του δείγματος εφαρμογής για να χρησιμοποιήσετε το διεύθυνση URL της υπηρεσίας και το api-κλειδί. 

    Παρατηρήστε ότι το σχήμα που έχει οριστεί στο αρχείο Program.cs του CatalogIndexer έργου. Καθορίζει facetable πεδία για χρώμα, listPrice, μέγεθος, πάχος, ΌνομαΚατηγορίας και modelName.  Μόνο μερικές από αυτές τις (χρώμα, listPrice, ΌνομαΚατηγορίας) είναι στην πραγματικότητα υλοποιηθεί σε περιήγηση με συνθήκη.

3.  Εκτελέστε την εφαρμογή. 

    Αρχικά, απλώς το πλαίσιο αναζήτησης είναι ορατό. Μπορείτε να κάντε κλικ στο κουμπί Αναζήτηση αμέσως, για να λάβετε όλα τα αποτελέσματα ή να πληκτρολογήσετε έναν όρο αναζήτησης.

    ![][7]
 
4.  Πληκτρολογήστε έναν όρο αναζήτησης, όπως ποδηλάτων, και κάντε κλικ στο κουμπί **Αναζήτηση**. Το ερώτημα εκτελείται γρήγορα.
 
    Μια δομή περιήγηση με συνθήκη επιστρέφεται επίσης με τα αποτελέσματα αναζήτησης.  Στη διεύθυνση URL, όψεις για τα χρώματα, κατηγορίες και τις τιμές είναι null. Στη σελίδα αποτελεσμάτων αναζήτησης, τη δομή περιήγηση με συνθήκη περιλαμβάνει υπολογίζεται για κάθε αποτέλεσμα όψη.

     ![][8]
 
5.  Κάντε κλικ σε ένα χρώμα, κατηγορία και περιοχή τιμών. Όψεις είναι null σε μια αναζήτηση στο αρχικό, αλλά όπως και αν χρειαστεί στις τιμές, τα αποτελέσματα της αναζήτησης αποκόπτονται των στοιχείων που δεν είναι πλέον αντιστοιχούν. Παρατηρήστε ότι το URI παίρνει τις αλλαγές στο ερώτημά σας.

    ![][9]
 
6.  Για να καταργήσετε το ερώτημα με συνθήκη, έτσι ώστε να μπορείτε να δοκιμάσετε συμπεριφορές διαφορετικό ερώτημα, κάντε κλικ στην επιλογή **Κατάλογος AdventureWorks** στο επάνω μέρος της σελίδας.

    ![][10]
 
<a name="nextstep"></a>
##<a name="next-step"></a>Επόμενο βήμα

Για να ελέγξετε τις γνώσεις σας, μπορείτε να προσθέσετε ένα πεδίο όψη για *modelName*. Το ευρετήριο είναι ήδη ορίσει για αυτό όψη, ώστε να απαιτούνται καμία αλλαγή στο ευρετήριο. Αλλά θα πρέπει να τροποποιήσετε τον κώδικα HTML για να συμπεριλάβετε μια νέα όψη για μοντέλα, και προσθέστε το πεδίο όψη στην κατασκευή ερωτήματος.

Για περισσότερες πληροφορίες σχετικά με αρχές σχεδίασης για περιήγηση με συνθήκη, συνιστάται να τις παρακάτω συνδέσεις:

- [Σχεδίαση για την αναζήτηση με συνθήκη](http://www.uie.com/articles/faceted_search/)
- [Σχεδίαση μοτίβα: Περιήγηση με συνθήκη](http://alistapart.com/article/design-patterns-faceted-navigation)

Μπορείτε επίσης να δείτε [Πολλά επίπεδα κατάρρευση αναζήτησης Azure](http://channel9.msdn.com/Events/TechEd/Europe/2014/DBI-B410). Στο 45:25, υπάρχει μια επίδειξη σχετικά με τον τρόπο για την υλοποίηση όψεις.

<!--Anchors-->
[How to build it]: #howtobuildit
[Build the presentation layer]: #presentationlayer
[Build the index]: #buildindex
[Check for data quality]: #checkdata
[Build the query]: #buildquery
[Tips on how to control faceted navigation]: #tips
[Faceted navigation based on range values]: #rangefacets
[Faceted navigation based on GeoPoints]: #geofacets
[Try it out]: #tryitout

<!--Image references-->
[1]: ./media/search-faceted-navigation/Facet-1-slide.PNG
[2]: ./media/search-faceted-navigation/Facet-2-CSHTML.PNG
[3]: ./media/search-faceted-navigation/Facet-3-schema.PNG
[4]: ./media/search-faceted-navigation/Facet-4-SearchMethod.PNG
[5]: ./media/search-faceted-navigation/Facet-5-Prices.PNG
[6]: ./media/search-faceted-navigation/Facet-6-buildfilter.PNG
[7]: ./media/search-faceted-navigation/Facet-7-appstart.png
[8]: ./media/search-faceted-navigation/Facet-8-appbike.png
[9]: ./media/search-faceted-navigation/Facet-9-appbikefaceted.png
[10]: ./media/search-faceted-navigation/Facet-10-appTitle.png

<!--Link references-->
[Designing for Faceted Search]: http://www.uie.com/articles/faceted_search/
[Design Patterns: Faceted Navigation]: http://alistapart.com/article/design-patterns-faceted-navigation
[Create your first application]: search-create-first-solution.md
[OData expression syntax (Azure Search)]: http://msdn.microsoft.com/library/azure/dn798921.aspx
[Azure Search Adventure Works Demo]: https://azuresearchadventureworksdemo.codeplex.com/
[http://www.odata.org/documentation/odata-version-2-0/overview/]: http://www.odata.org/documentation/odata-version-2-0/overview/ 
[Faceting on Azure Search forum post]: ../faceting-on-azure-search.md?forum=azuresearch
[Search Documents (Azure Search API)]: http://msdn.microsoft.com/library/azure/dn798927.aspx

 