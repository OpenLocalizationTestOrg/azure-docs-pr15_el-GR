<properties
    pageTitle="Αποστολή δεδομένων στο πλαίσιο Αναζήτηση Azure χρησιμοποιώντας το REST API | Microsoft Azure | Υπηρεσία αναζήτησης φιλοξενούμενη cloud"
    description="Μάθετε πώς μπορείτε να στείλετε δεδομένα σε ένα ευρετήριο στο πλαίσιο Αναζήτηση Azure χρησιμοποιώντας το REST API."
    services="search"
    documentationCenter=""
    authors="ashmaka"
    manager="jhubbard"
    editor=""
    tags=""/>

<tags
    ms.service="search"
    ms.devlang="rest-api"
    ms.workload="search"
    ms.topic="get-started-article"
    ms.tgt_pltfrm="na"
    ms.date="08/29/2016"
    ms.author="ashmaka"/>

# <a name="upload-data-to-azure-search-using-the-rest-api"></a>Αποστολή δεδομένων σε αναζήτηση Azure χρησιμοποιώντας το REST API
> [AZURE.SELECTOR]
- [Επισκόπηση](search-what-is-data-import.md)
- [.NET](search-import-data-dotnet.md)
- [ΥΠΌΛΟΙΠΟ](search-import-data-rest-api.md)

Σε αυτό το άρθρο θα σας δείξουν πώς μπορείτε να χρησιμοποιήσετε το [Azure Search REST API](https://msdn.microsoft.com/library/azure/dn798935.aspx) για εισαγωγή δεδομένων σε ένα ευρετήριο αναζήτησης Azure.

Πριν να ξεκινήσετε αυτόν τον οδηγό, θα πρέπει να έχετε ήδη [δημιουργήσει ένα ευρετήριο αναζήτησης Azure](search-what-is-an-index.md).

Για να προωθήσετε τα έγγραφα στο ευρετήριό σας χρησιμοποιώντας το REST API, θα μπορείτε να εκδώσετε μια αίτηση HTTP POST τελικό σημείο διεύθυνση URL του ευρετηρίου. Στο κυρίως σώμα του σώμα της αίτησης HTTP είναι ένα αντικείμενο JSON που περιέχει τα έγγραφα για να προστεθεί, τροποποιηθεί ή διαγραφεί.

## <a name="i-identify-your-azure-search-services-admin-api-key"></a>Να. Προσδιορισμός κλειδιού api διαχείρισης της υπηρεσίας αναζήτησης Azure σας
Κατά την έκδοση αιτήσεις HTTP σε σχέση με την υπηρεσία χρησιμοποιώντας το REST API, *κάθε* API αίτηση πρέπει να περιλαμβάνει το api-κλειδί που δημιουργήθηκε για την υπηρεσία αναζήτησης που παροχή της υπηρεσίας. Έχετε έναν έγκυρο αριθμό-κλειδί εμπιστευτεί, με βάση ανά αίτηση, μεταξύ της εφαρμογής που στέλνει την αίτηση και την υπηρεσία που χειρίζεται αυτό.

1. Για να βρείτε την υπηρεσία api-κλειδιά πρέπει να συνδεθείτε στην [Πύλη του Azure](https://portal.azure.com/)
2. Μεταβείτε στην υπηρεσία αναζήτησης Azure blade
3. Κάντε κλικ στο εικονίδιο "Πλήκτρα"

Υπηρεσία σας θα έχει *διαχείρισης* και τα *κλειδιά ερωτήματος*.

  - Σας κύριας και δευτερεύουσας *διαχείρισης κλειδιών* εκχώρηση πλήρη δικαιώματα για όλες τις λειτουργίες, συμπεριλαμβανομένης της δυνατότητας για να διαχειριστείτε την υπηρεσία, να δημιουργήσετε και να διαγράψετε τα ευρετήρια, οι δεικτοδότες και προελεύσεις δεδομένων. Υπάρχουν δύο κλειδιά, ώστε να μπορείτε να συνεχίσετε να χρησιμοποιείτε το δευτερεύον κλειδί Εάν αποφασίσετε να δημιουργήσετε ξανά το πρωτεύον κλειδί και το αντίστροφο.
  - Το *ερώτημα πλήκτρα* εκχωρήσετε πρόσβαση μόνο για ανάγνωση σε ευρετήρια και έγγραφα και διανέμονται συνήθως σε εφαρμογές προγράμματος-πελάτη που θεμάτων αιτήσεις αναζήτησης.

Για τους σκοπούς της εισαγωγής δεδομένων σε ένα ευρετήριο, μπορείτε να χρησιμοποιήσετε τον αριθμό-κλειδί πρωτεύον ή δευτερεύον διαχείρισης.

## <a name="ii-decide-which-indexing-action-to-use"></a>II. Αποφασίστε ποια ενέργεια δημιουργίας ευρετηρίου για να χρησιμοποιήσετε
Όταν χρησιμοποιείτε το REST API, θα εκδώσετε αιτήσεις HTTP POST με οργανισμούς αίτηση JSON διεύθυνση URL του του ευρετηρίου αναζήτησης Azure τελικού σημείου. Το αντικείμενο JSON στο σώμα της αίτησης HTTP σας θα περιέχει μόνο έναν πίνακα JSON με το όνομα "τιμή" που περιέχει αντικείμενα JSON που αντιπροσωπεύει τα έγγραφα που θέλετε να προσθέσετε το ευρετήριο, ενημέρωση ή διαγραφή.

Κάθε αντικείμενο JSON στον πίνακα "τιμή" αντιπροσωπεύει ένα έγγραφο για να τοποθετηθούν στο ευρετήριο. Κάθε ένα από αυτά τα αντικείμενα περιέχει αριθμό-κλειδί του εγγράφου και καθορίζει την επιθυμητή ενέργεια δημιουργίας ευρετηρίου (αποστολής, συγχώνευση, διαγραφή, κλπ). Ανάλογα με το ποιο από τα παρακάτω ενέργειες που επιλέγετε, μόνο για ορισμένα πεδία πρέπει να συμπεριλαμβάνονται για κάθε έγγραφο:

@search.action | Περιγραφή | Απαραίτητα πεδία για κάθε έγγραφο | Σημειώσεις
--- | --- | --- | ---
`upload` | Μια `upload` ενέργεια είναι παρόμοια με μια "upsert" όπου το έγγραφο θα εισαχθεί εάν πρόκειται για νέα και θα ενημερωθεί/αντικατασταθεί εάν υπάρχει. | πλήκτρο, καθώς και άλλα πεδία που θέλετε να ορίσετε | Κατά την ενημέρωση/αντικατάσταση ενός υπάρχοντος εγγράφου, οποιοδήποτε πεδίο που δεν έχει καθοριστεί στην πρόσκληση σε θα έχει οριστεί σε του αντίστοιχου πεδίου `null`. Αυτό συμβαίνει ακόμα και όταν το πεδίο έχει οριστεί προηγουμένως σε μια μη μηδενική τιμή.
`merge` | Ενημερώνεται ένα υπάρχον έγγραφο με το καθορισμένο πεδία. Εάν δεν υπάρχει το έγγραφο στο ευρετήριο, θα αποτύχει η συγχώνευση. | πλήκτρο, καθώς και άλλα πεδία που θέλετε να ορίσετε | Οποιοδήποτε πεδίο που καθορίζετε σε μια συγχώνευση, θα αντικαταστήσει το υπάρχον πεδίο στο έγγραφο. Αυτό περιλαμβάνει πεδία του τύπου `Collection(Edm.String)`. Για παράδειγμα, εάν το έγγραφο περιέχει ένα πεδίο `tags` με τιμή `["budget"]` και την εκτέλεση μιας συγχώνευσης με τιμή `["economy", "pool"]` για `tags`, η τελική τιμή της το `tags` πεδίο θα είναι `["economy", "pool"]`. Δεν θα είναι `["budget", "economy", "pool"]`.
`mergeOrUpload` | Αυτή η ενέργεια συμπεριφέρεται σαν `merge` εάν υπάρχει ήδη ένα έγγραφο με τον αριθμό-κλειδί που δίνεται στο ευρετήριο. Εάν το έγγραφο δεν υπάρχει, και συμπεριφέρεται σαν `upload` με ένα νέο έγγραφο. | πλήκτρο, καθώς και άλλα πεδία που θέλετε να ορίσετε | -
`delete` | Καταργεί το καθορισμένο έγγραφο από το ευρετήριο. | μόνο κλειδί | Τα πεδία που καθορίζετε εκτός από το πεδίο κλειδιού θα αγνοούνται. Εάν θέλετε να καταργήσετε ένα μεμονωμένο πεδίο από ένα έγγραφο, χρησιμοποιήστε `merge` αντί για αυτό και απλώς να την τιμή στο πεδίο ρητά null.

## <a name="iii-construct-your-http-request-and-request-body"></a>III. Κατασκευή σας αίτηση HTTP και σώμα αίτησης
Τώρα που έχετε συγκεντρώσατε τις τιμές των πεδίων είναι απαραίτητο για τις ενέργειες ευρετήριο, είστε έτοιμοι για να δημιουργήσετε την πραγματική αίτηση HTTP και σώμα αίτησης JSON για να εισαγάγετε τα δεδομένα σας.

#### <a name="request-and-request-headers"></a>Αίτηση και κεφαλίδες αίτησης
Στη διεύθυνση URL, θα χρειαστεί να παρέχετε το όνομα της υπηρεσίας, όνομα ευρετηρίου ("ξενοδοχεία" σε αυτήν την περίπτωση), καθώς και τη σωστή έκδοση API (η τρέχουσα έκδοση API είναι `2015-02-28` τη στιγμή της δημοσίευσης αυτού του εγγράφου). Θα πρέπει να ορίσετε το `Content-Type` και `api-key` αίτηση κεφαλίδες. Για το τελευταίο, χρησιμοποιήστε μία από την υπηρεσία διαχείρισης κλειδιών.

    POST https://[search service].search.windows.net/indexes/hotels/docs/index?api-version=2015-02-28
    Content-Type: application/json
    api-key: [admin key]

#### <a name="request-body"></a>Σώμα αίτησης

```JSON
{
    "value": [
        {
            "@search.action": "upload",
            "hotelId": "1",
            "baseRate": 199.0,
            "description": "Best hotel in town",
            "description_fr": "Meilleur hôtel en ville",
            "hotelName": "Fancy Stay",
            "category": "Luxury",
            "tags": ["pool", "view", "wifi", "concierge"],
            "parkingIncluded": false,
            "smokingAllowed": false,
            "lastRenovationDate": "2010-06-27T00:00:00Z",
            "rating": 5,
            "location": { "type": "Point", "coordinates": [-122.131577, 47.678581] }
        },
        {
            "@search.action": "upload",
            "hotelId": "2",
            "baseRate": 79.99,
            "description": "Cheapest hotel in town",
            "description_fr": "Hôtel le moins cher en ville",
            "hotelName": "Roach Motel",
            "category": "Budget",
            "tags": ["motel", "budget"],
            "parkingIncluded": true,
            "smokingAllowed": true,
            "lastRenovationDate": "1982-04-28T00:00:00Z",
            "rating": 1,
            "location": { "type": "Point", "coordinates": [-122.131577, 49.678581] }
        },
        {
            "@search.action": "mergeOrUpload",
            "hotelId": "3",
            "baseRate": 129.99,
            "description": "Close to town hall and the river"
        },
        {
            "@search.action": "delete",
            "hotelId": "6"
        }
    ]
}
```

Σε αυτήν την περίπτωση, χρησιμοποιούμε `upload`, `mergeOrUpload`, και `delete` ως μας ενέργειες αναζήτησης.

Ας υποθέσουμε ότι αυτό το παράδειγμα "ξενοδοχεία" ευρετήριο έχει ήδη συμπληρωθεί με έναν αριθμό εγγράφων. Παρατηρήστε πώς δεν έχουμε για να καθορίσετε όλα τα πεδία πιθανές εγγράφων κατά τη χρήση `mergeOrUpload` και πώς θα σας καθοριστεί μόνο τον αριθμό-κλειδί εγγράφου (`hotelId`) κατά τη χρήση `delete`.

Επίσης, σημειώστε ότι μπορείτε μόνο να συμπεριλάβετε έως και έγγραφα 1000 (ή 16 MB) σε μία μόνο αίτηση δημιουργίας ευρετηρίου.

## <a name="iv-understand-your-http-response-code"></a>IV. Κατανόηση του κώδικας απόκρισης HTTP
#### <a name="200"></a>200
Μετά την υποβολή αίτησης επιτυχής δημιουργίας ευρετηρίου θα λάβετε μια απόκριση HTTP με κωδικό κατάστασης της `200 OK`. Στο σώμα JSON της απόκρισης HTTP θα είναι ως εξής:

```JSON
{
    "value": [
        {
            "key": "unique_key_of_document",
            "status": true,
            "errorMessage": null
        },
        ...
    ]
}
```

#### <a name="207"></a>207
Κωδικό κατάστασης `207` θα επιστραφεί όταν τουλάχιστον ένα στοιχείο δεν καταχωρήθηκε με επιτυχία στο ευρετήριο. Στο σώμα JSON της απόκρισης HTTP θα περιέχει πληροφορίες σχετικά με το επιτυχής τα έγγραφα.

```JSON
{
    "value": [
        {
            "key": "unique_key_of_document",
            "status": false,
            "errorMessage": "The search service is too busy to process this document. Please try again later."
        },
        ...
    ]
}
```

> [AZURE.NOTE] Αυτό συνήθως σημαίνει ότι η φόρτωση την υπηρεσία αναζήτησης είναι επικοινωνούν μαζί ένα σημείο όπου η δημιουργία ευρετηρίου αιτήσεις θα ξεκινήσει το για να επιστρέψετε `503` απαντήσεις. Σε αυτήν την περίπτωση, χρησιμοποιούμε ιδιαίτερα προτείνουμε κώδικα του προγράμματος-πελάτη ξανά απενεργοποίηση και περιμένετε πριν να επιχειρήσετε ξανά. Αυτό θα σας δώσει το σύστημα κάποιος χρόνος για να ανακτήσετε, αυξάνοντας τις πιθανότητες να μελλοντικές αιτήσεις θα ολοκληρωθεί με επιτυχία. Γρήγορη επανάληψη τις αιτήσεις μόνο θα παρατείνετε την κατάσταση.

#### <a name="429"></a>429
Κωδικό κατάστασης `429` θα επιστραφεί όταν έχετε υπερβεί το όριο του αριθμού των εγγράφων ανά ευρετήριο.

#### <a name="503"></a>503
Κωδικό κατάστασης `503` θα επιστραφεί Εάν κανένα από τα στοιχεία στην πρόσκληση σε έγινε με επιτυχία στο ευρετήριο. Αυτό το σφάλμα σημαίνει ότι το σύστημα έχει φόρτο εργασίας και δεν μπορεί να είναι η επεξεργασία της αίτησής σας αυτήν τη στιγμή.

> [AZURE.NOTE] Σε αυτήν την περίπτωση, χρησιμοποιούμε ιδιαίτερα προτείνουμε κώδικα του προγράμματος-πελάτη ξανά απενεργοποίηση και περιμένετε πριν να επιχειρήσετε ξανά. Αυτό θα σας δώσει το σύστημα κάποιος χρόνος για να ανακτήσετε, αυξάνοντας τις πιθανότητες να μελλοντικές αιτήσεις θα ολοκληρωθεί με επιτυχία. Γρήγορη επανάληψη τις αιτήσεις μόνο θα παρατείνετε την κατάσταση.

Για περισσότερες πληροφορίες σχετικά με ενέργειες εγγράφου και απαντήσεις επιτυχίας/σφάλματος, ανατρέξτε στο θέμα [Προσθήκη, ενημέρωση, ή να διαγράψετε έγγραφα](https://msdn.microsoft.com/library/azure/dn798930.aspx). Για περισσότερες πληροφορίες σχετικά με άλλους κωδικούς κατάστασης HTTP που μπορεί να επιστραφεί σε περίπτωση αποτυχίας, ανατρέξτε στο θέμα [κωδικοί κατάστασης HTTP (Azure αναζήτηση)](https://msdn.microsoft.com/library/azure/dn798925.aspx).

## <a name="next"></a>Επόμενο
Μετά την προσθήκη του ευρετηρίου αναζήτησης Azure, θα είναι έτοιμη για να ξεκινήσετε την έκδοση ερωτημάτων για να αναζητήσετε έγγραφα. Για λεπτομέρειες, ανατρέξτε στο θέμα [Ευρετήριο αναζήτησης σας Azure ερωτήματος](search-query-overview.md) .
