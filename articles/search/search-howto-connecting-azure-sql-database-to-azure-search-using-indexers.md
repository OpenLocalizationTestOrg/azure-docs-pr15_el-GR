<properties 
    pageTitle="Σύνδεση βάσης δεδομένων Azure SQL με Azure αναζήτησης με χρήση Οι δεικτοδότες | Microsoft Azure | Οι δεικτοδότες" 
    description="Μάθετε πώς μπορείτε να εξαγάγετε δεδομένα από βάση δεδομένων SQL Azure ένα ευρετήριο αναζήτησης Azure χρησιμοποιώντας Οι δεικτοδότες." 
    services="search" 
    documentationCenter="" 
    authors="chaosrealm" 
    manager="pablocas" 
    editor=""/>

<tags 
    ms.service="search" 
    ms.devlang="rest-api" 
    ms.workload="search" 
    ms.topic="article" 
    ms.tgt_pltfrm="na" 
    ms.date="10/27/2016" 
    ms.author="eugenesh"/>

#<a name="connecting-azure-sql-database-to-azure-search-using-indexers"></a>Σύνδεση βάσης δεδομένων SQL Azure με αναζήτηση Azure χρησιμοποιώντας Οι δεικτοδότες

Azure υπηρεσία αναζήτησης είναι μια υπηρεσία αναζήτησης φιλοξενούμενη cloud που σας διευκολύνει να προσφέρετε μια εμπειρία εξαιρετική αναζήτησης. Πριν από την μπορείτε να κάνετε αναζήτηση, πρέπει να συμπληρώσετε ένα ευρετήριο αναζήτησης Azure με τα δεδομένα σας. Εάν τα δεδομένα βρίσκονται σε μια βάση δεδομένων Azure SQL, το νέο **ευρετήριο αναζήτησης Azure για βάση δεδομένων SQL Azure** (ή **Azure SQL ευρετηρίου** για συντομία) να αυτοματοποιήσετε τη διαδικασία δημιουργίας ευρετηρίου. Αυτό σημαίνει ότι έχετε λιγότερο κώδικα για την εγγραφή και την υποδομή λιγότερο για να σας ενδιαφέρουν.

Σε αυτό το άρθρο καλύπτει την μηχανική χρήσης Οι δεικτοδότες, αλλά επίσης περιγράφει τις δυνατότητες που διατίθενται μόνο με βάσεις δεδομένων Azure SQL (για παράδειγμα, ενσωματωμένη παρακολούθηση αλλαγών). Azure αναζήτησης υποστηρίζει επίσης άλλες προελεύσεις δεδομένων, όπως Azure DocumentDB, χώρος αποθήκευσης αντικειμένων blob και το χώρο αποθήκευσης πινάκων. Εάν θέλετε να δείτε υποστήριξη πρόσθετων προελεύσεων δεδομένων, μπορείτε να δώσετε τα σχόλιά σας στο [φόρουμ σχολίων Azure αναζήτησης](https://feedback.azure.com/forums/263029-azure-search/).

## <a name="indexers-and-data-sources"></a>Οι δεικτοδότες και προελεύσεων δεδομένων

Μπορείτε να ρυθμίσετε και να ρυθμίσετε τις παραμέτρους μιας χρησιμοποιώντας ευρετηρίου Azure SQL: 

- Οδηγός εισαγωγής δεδομένων στην [πύλη του Azure](https://portal.azure.com)
- Azure αναζήτησης [.NET SDK](https://msdn.microsoft.com/library/azure/dn951165.aspx)
- Azure Search [REST API](http://go.microsoft.com/fwlink/p/?LinkID=528173)

Σε αυτό το άρθρο, θα χρησιμοποιήσουμε το REST API για να σας δείξουν πώς μπορείτε να δημιουργήσετε και να διαχειριστείτε **αρχεία προέλευσης δεδομένων**και **Οι δεικτοδότες** της. 

Μια **προέλευση δεδομένων** καθορίζει των δεδομένων που θα δημιουργήσετε ευρετήριο, διαπιστευτήρια που απαιτείται για την πρόσβαση σε δεδομένα και τις πολιτικές που αποτελεσματικά τον προσδιορισμό των αλλαγών στα δεδομένα (νέο, έχουν τροποποιηθεί ή διαγραφεί γραμμές). Ορίζεται ως μια ανεξάρτητη πόρων, έτσι ώστε να μπορούν να χρησιμοποιηθούν με πολλούς Οι δεικτοδότες.

Ένα **ευρετήριο** είναι ένας πόρος που συνδέεται προελεύσεις δεδομένων με ευρετήρια αναζήτησης προορισμού. Ένα ευρετήριο χρησιμοποιείται με τους εξής τρόπους:
 
- Εκτελέστε ένα μοναδικό αντίγραφο των δεδομένων για να συμπληρώσετε ένα ευρετήριο.
- Ενημέρωση ευρετηρίου με τις αλλαγές στο αρχείο προέλευσης δεδομένων σε ένα χρονοδιάγραμμα.
- Εκτέλεση σε απαιτήσεων για να ενημερώσετε ένα ευρετήριο, όπως απαιτείται. 

## <a name="when-to-use-azure-sql-indexer"></a>Πότε να χρησιμοποιήσετε το ευρετήριο Azure SQL

Ανάλογα με διάφορους παράγοντες που σχετίζονται με τα δεδομένα σας, τη χρήση του Azure SQL ευρετηρίου ίσως ή ενδέχεται να μην είναι κατάλληλο. Εάν τα δεδομένα σας χωράει τις ακόλουθες απαιτήσεις, μπορείτε να χρησιμοποιήσετε Azure SQL ευρετήριο: 

- Όλα τα δεδομένα που προέρχονται από έναν απλό πίνακα ή προβολή
    - Εάν τα δεδομένα είναι διασκορπίζονται σε πολλούς πίνακες, μπορείτε να δημιουργήσετε μια προβολή και να χρησιμοποιήσετε αυτήν την προβολή με το ευρετήριο. Ωστόσο, εάν χρησιμοποιείτε μια προβολή, δεν θα μπορείτε να χρησιμοποιείτε τον εντοπισμό αλλαγών SQL Server ενσωματωμένο. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [αυτήν την ενότητα](#CaptureChangedRows). 
- Οι τύποι δεδομένων που χρησιμοποιούνται στο αρχείο προέλευσης δεδομένων υποστηρίζονται από το ευρετήριο. Οι περισσότερες αλλά όχι όλα τα SQL τύποι υποστηρίζονται. Για λεπτομέρειες, ανατρέξτε στην ενότητα [Αντιστοίχιση τύπων δεδομένων στο Azure αναζήτησης](http://go.microsoft.com/fwlink/p/?LinkID=528105). 
- Δεν χρειάζεται κοντά σε πραγματικό χρόνο ενημερώσεις για το ευρετήριο, όταν αλλάζει η γραμμή. 
    - Το ευρετήριο να ευρετηρίου εκ νέου πίνακα πολύ κάθε 5 λεπτά. Εάν τα δεδομένα σας αλλάζουν συχνά και τις αλλαγές που πρέπει να αντανακλώνται στο ευρετήριο μέσα σε δευτερόλεπτα ή λεπτά μία, συνιστάται να χρησιμοποιείτε [API ευρετήριο αναζήτησης Azure](https://msdn.microsoft.com/library/azure/dn798930.aspx) απευθείας. 
- Εάν έχετε ένα μεγάλο σύνολο δεδομένων και σχεδιασμός για εκτέλεση το ευρετήριο σε ένα χρονοδιάγραμμα, το σχήμα σάς επιτρέπει να προσδιορίσετε αποτελεσματικά αλλάξει (και διαγραφεί, εάν υπάρχει) γραμμών. Για περισσότερες λεπτομέρειες, ανατρέξτε στην ενότητα "Καταγραφή αλλάξει και διαγραφή γραμμών" παρακάτω. 
- Το μέγεθος του πεδία με ευρετήριο σε μια γραμμή δεν υπερβαίνει το μέγιστο μέγεθος μιας αναζήτησης Azure δημιουργίας ευρετηρίου αίτηση, η οποία είναι 16 MB. 

## <a name="create-and-use-an-azure-sql-indexer"></a>Δημιουργία και χρήση ενός ευρετηρίου Azure SQL

Πρώτα, δημιουργήστε το αρχείο προέλευσης δεδομένων: 

    POST https://myservice.search.windows.net/datasources?api-version=2015-02-28 
    Content-Type: application/json
    api-key: admin-key
    
    { 
        "name" : "myazuresqldatasource",
        "type" : "azuresql",
        "credentials" : { "connectionString" : "Server=tcp:<your server>.database.windows.net,1433;Database=<your database>;User ID=<your user name>;Password=<your password>;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;" },
        "container" : { "name" : "name of the table or view that you want to index" }
    }


Μπορείτε να λάβετε τη συμβολοσειρά σύνδεσης από την [Πύλη κλασική Azure](https://portal.azure.com); Χρησιμοποιήστε το `ADO.NET connection string` την επιλογή.

Στη συνέχεια, δημιουργήστε το ευρετήριο αναζήτησης Azure προορισμού, εάν δεν έχετε ήδη. Μπορείτε να δημιουργήσετε ένα ευρετήριο, χρησιμοποιώντας την [πύλη του περιβάλλοντος εργασίας Χρήστη](https://portal.azure.com) ή τη [Δημιουργία ευρετηρίου API](https://msdn.microsoft.com/library/azure/dn798941.aspx). Βεβαιωθείτε ότι το σχήμα του ευρετηρίου σας προορισμού είναι συμβατά με το σχήμα του πίνακα προέλευσης - δείτε [αντιστοίχιση μεταξύ τους τύπους δεδομένων αναζήτησης SQL και Azure](#TypeMapping).

Τέλος, δημιουργήστε το ευρετήριο, παρέχοντας την ένα όνομα και αναφορά το ευρετήριο δεδομένων προέλευσης και προορισμού:

    POST https://myservice.search.windows.net/indexers?api-version=2015-02-28 
    Content-Type: application/json
    api-key: admin-key
    
    { 
        "name" : "myindexer",
        "dataSourceName" : "myazuresqldatasource",
        "targetIndexName" : "target index name"
    }

Ένα ευρετήριο που δημιουργήθηκε με τον τρόπο αυτό δεν διαθέτει ένα χρονοδιάγραμμα. Εκτελείται αυτόματα όταν όταν δημιουργείται. Μπορείτε να το εκτελέσετε ξανά οποιαδήποτε στιγμή χρησιμοποιώντας μια αίτηση **Εκτέλεση ευρετήριο** :

    POST https://myservice.search.windows.net/indexers/myindexer/run?api-version=2015-02-28 
    api-key: admin-key

Μπορείτε να προσαρμόσετε διάφορες πτυχές των συμπεριφορά ευρετήριο, όπως το μέγεθος δέσμης και το πλήθος των εγγράφων μπορεί να γίνει παράκαμψη πριν από μια εκτέλεση ευρετηρίου αποτυγχάνει. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Δημιουργία ευρετηρίου API](https://msdn.microsoft.com/library/azure/dn946899.aspx).
 
Ίσως χρειαστεί να επιτρέψετε Azure υπηρεσιών για να συνδεθείτε με τη βάση δεδομένων. Για οδηγίες σχετικά με τον τρόπο για να το κάνετε, ανατρέξτε στο θέμα [Σύνδεση από το Azure](https://msdn.microsoft.com/library/azure/ee621782.aspx#ConnectingFromAzure) .

Για να παρακολουθείτε την κατάσταση ευρετηρίου και την εκτέλεση ιστορικού (αριθμός στοιχείων σε ευρετήριο, αποτυχίες, κ.λπ.), χρησιμοποιήστε μια αίτηση **κατάσταση ευρετηρίου** : 

    GET https://myservice.search.windows.net/indexers/myindexer/status?api-version=2015-02-28 
    api-key: admin-key

Η απόκριση θα πρέπει να μοιάζει με το εξής: 

    {
        "@odata.context":"https://myservice.search.windows.net/$metadata#Microsoft.Azure.Search.V2015_02_28.IndexerExecutionInfo",
        "status":"running",
        "lastResult": {
            "status":"success",
            "errorMessage":null,
            "startTime":"2015-02-21T00:23:24.957Z",
            "endTime":"2015-02-21T00:36:47.752Z",
            "errors":[],
            "itemsProcessed":1599501,
            "itemsFailed":0,
            "initialTrackingState":null,
            "finalTrackingState":null 
        },
        "executionHistory":
        [
            {
                "status":"success",
                "errorMessage":null,
                "startTime":"2015-02-21T00:23:24.957Z",
                "endTime":"2015-02-21T00:36:47.752Z",
                "errors":[],
                "itemsProcessed":1599501,
                "itemsFailed":0,
                "initialTrackingState":null,
                "finalTrackingState":null 
            },
            ... earlier history items 
        ]
    }

Ιστορικό εκτέλεσης περιέχει 50 προς τα επάνω από τα πιο πρόσφατα ολοκληρωμένες εκτελέσεις, που ταξινομούνται με αντίστροφη χρονολογική σειρά (έτσι ώστε να την πιο πρόσφατη εκτέλεση βρεθεί πρώτο στην απάντηση). Πρόσθετες πληροφορίες σχετικά με την απόκριση βρίσκονται στο [Γρήγορα την κατάσταση ευρετηρίου](http://go.microsoft.com/fwlink/p/?LinkId=528198)

## <a name="run-indexers-on-a-schedule"></a>Εκτέλεση Οι δεικτοδότες σε ένα χρονοδιάγραμμα

Μπορείτε επίσης να τακτοποιήσετε το ευρετήριο για να εκτελέσετε περιοδικά σε ένα χρονοδιάγραμμα. Για να το κάνετε αυτό, προσθέστε την ιδιότητα **Χρονοδιάγραμμα** κατά τη δημιουργία ή την ενημέρωση του ευρετηρίου. Το παρακάτω παράδειγμα εμφανίζει μια πρόσκληση σε ΘΈΣΗ να ενημερώσετε το ευρετήριο:

    PUT https://myservice.search.windows.net/indexers/myindexer?api-version=2015-02-28 
    Content-Type: application/json
    api-key: admin-key 

    { 
        "dataSourceName" : "myazuresqldatasource",
        "targetIndexName" : "target index name",
        "schedule" : { "interval" : "PT10M", "startTime" : "2015-01-01T00:00:00Z" }
    }

Απαιτείται η παράμετρος **χρονικό διάστημα** . Το χρονικό διάστημα αναφέρεται το χρονικό διάστημα μεταξύ της έναρξης δύο εκτελέσεις διαδοχικές ευρετηρίου. Το διάστημα μικρότερος επιτρεπόμενος είναι 5 λεπτά. μεγαλύτερου είναι μία ημέρα. Αυτό πρέπει να μορφοποιηθούν ως μια τιμή "dayTimeDuration" XSD (περιορισμένα υποσύνολο του μια τιμή [διάρκειας ISO 8601](http://www.w3.org/TR/xmlschema11-2/#dayTimeDuration) ). Το μοτίβο για αυτό είναι: `P(nD)(T(nH)(nM))`. Παραδείγματα: `PT15M` για κάθε 15 λεπτά, `PT2H` για κάθε 2 ώρες.

Το προαιρετικό **ώρα έναρξης** υποδεικνύει πότε θα πρέπει να αρχίσει η προγραμματισμένη εκτελέσεις. Εάν παραλειφθεί, χρησιμοποιείται η τρέχουσα ώρα UTC. Μπορεί να είναι αυτήν τη στιγμή στο παρελθόν – με την οποία έχει προγραμματιστεί πεζών-κεφαλαίων της πρώτης εκτέλεσης όπως αν το ευρετήριο έχει εκτελεστεί συνεχώς από την ώρα έναρξης.  

Να εκτελέσετε μόνο μία εκτέλεση των ένα ευρετήριο κάθε φορά. Εάν ένα ευρετήριο εκτελείται κατά την εκτέλεση είναι προγραμματισμένη, την εκτέλεση αναβάλλεται μέχρι την επόμενη προγραμματισμένη ώρα.

Ας δούμε ένα παράδειγμα για να κάνετε πιο συγκεκριμένες. Ας υποθέσουμε ότι θα σας το παρακάτω χρονοδιάγραμμα ωριαία έχει ρυθμιστεί: 

    "schedule" : { "interval" : "PT1H", "startTime" : "2015-03-01T00:00:00Z" }

Θα δείτε τι συμβαίνει: 

1. Ξεκινά την πρώτη εκτέλεση ευρετηρίου στο ή γύρω από 1 Μαρτίου 2015 12:00 π.μ. UTC.
1. Ας υποθέσουμε ότι η εκτέλεση αυτή σας μεταφέρει 20 λεπτά (ή οποιαδήποτε στιγμή λιγότερο από 1 ώρα).
1. Η δεύτερη εκτέλεση ξεκινά στο ή γύρω από 1 Μαρτίου 2015 1:00 π.μ. 
1. Τώρα, ας υποθέσουμε ότι η εκτέλεση αυτή σας μεταφέρει περισσότερες από μία ώρα – για παράδειγμα, 70 λεπτά – ώστε να ολοκληρώσει περίπου 2:10 π.μ.
1. Είναι τώρα 2:00 π.μ., χρόνου για την τρίτη εκτέλεση για να ξεκινήσετε. Ωστόσο, επειδή η δεύτερη εκτέλεσης από 1 π.μ. εξακολουθούν να εκτελούνται, την τρίτη εκτέλεση παραλείπεται. Ξεκινά την τρίτη εκτέλεση στις 3 π.μ.

Μπορείτε να προσθέσετε, να αλλάξετε ή να διαγράψετε ένα χρονοδιάγραμμα για ένα υπάρχον ευρετήριο, χρησιμοποιώντας μια αίτηση **ΤΟΠΟΘΈΤΗΣΗ ευρετηρίου** . 

<a name="CaptureChangedRows">, /a >
## <a name="capturing-new-changed-and-deleted-rows"></a>Καταγραφή νέες, αλλάξει, και η διαγραφή γραμμών

Εάν ο πίνακας έχει πολλές γραμμές, πρέπει να χρησιμοποιήσετε μια πολιτική εντοπισμού αλλαγή δεδομένων. Αλλαγή εντοπισμού επιτρέπει μια αποτελεσματική ανάκτησης μόνο τα νέα ή τροποποιημένα γραμμών χωρίς να χρειάζεται να εκ νέου δημιουργία ευρετηρίου ολόκληρο τον πίνακα.

### <a name="sql-integrated-change-tracking-policy"></a>SQL ολοκλήρωμα της πολιτικής παρακολούθησης αλλαγών

Εάν η βάση δεδομένων SQL υποστηρίζει [της παρακολούθησης αλλαγών](https://msdn.microsoft.com/library/bb933875.aspx), συνιστάται να χρησιμοποιείτε **SQL ολοκληρωμένη αλλαγή παρακολούθησης πολιτική**. Αυτή είναι η πιο αποτελεσματική πολιτική. Επίσης, να επιτρέπει Azure αναζήτησης για τον προσδιορισμό διαγραμμένες γραμμές χωρίς να χρειάζεται να προσθέσετε μια στήλη ρητή "προσωρινή Διαγραφή" στον πίνακά σας.

Ενσωματωμένη παρακολούθηση αλλαγών υποστηρίζεται ξεκινώντας με τις παρακάτω εκδόσεις βάσης δεδομένων SQL Server:
 
- SQL Server 2008 R2 και νεότερες εκδόσεις, εάν χρησιμοποιείτε το SQL Server σε VM Azure. 
- Azure SQL βάσης δεδομένων V12, αν χρησιμοποιείτε τη βάση δεδομένων SQL Azure.

Όταν χρησιμοποιώντας την πολιτική, παρακολούθησης αλλαγών σε SQL ολοκλήρωμα δεν καθορίσετε μια πολιτική χωριστά δεδομένα διαγραφής εντοπισμού - αυτή η πολιτική έχει ενσωματωμένη υποστήριξη για τον εντοπισμό διαγραφή γραμμών.

Αυτή η πολιτική μπορεί να χρησιμοποιηθεί μόνο με πίνακες. δεν μπορεί να χρησιμοποιηθεί με προβολές. Πρέπει να Ενεργοποίηση παρακολούθησης αλλαγών για τον πίνακα που χρησιμοποιείτε για να χρησιμοποιήσετε αυτή την πολιτική. Ανατρέξτε στο θέμα [Ενεργοποίηση και απενεργοποίηση της παρακολούθησης αλλαγών](https://msdn.microsoft.com/library/bb964713.aspx) για οδηγίες. 

Για να χρησιμοποιήσετε αυτήν την πολιτική, να δημιουργήσετε ή να ενημερώσετε την προέλευση δεδομένων, ως εξής:
 
    { 
        "name" : "myazuresqldatasource",
        "type" : "azuresql",
        "credentials" : { "connectionString" : "connection string" },
        "container" : { "name" : "table or view name" }, 
        "dataChangeDetectionPolicy" : {
           "@odata.type" : "#Microsoft.Azure.Search.SqlIntegratedChangeTrackingPolicy" 
      }
    }

<a name="HighWaterMarkPolicy"></a>
### <a name="high-water-mark-change-detection-policy"></a>Σήμανση νερό υψηλής εντοπισμό αλλαγών πολιτικής

Ενώ η πολιτική SQL ενσωματωμένη παρακολούθηση αλλαγών, συνιστάται, μπορεί να χρησιμοποιηθεί μόνο με πίνακες, δεν προβολές. Εάν χρησιμοποιείτε μια προβολή, μπορείτε να χρησιμοποιήσετε την πολιτική σήμανση νερό υψηλή. Αυτή η πολιτική μπορεί να χρησιμοποιηθεί, εάν τον πίνακα ή προβολή σας περιέχει μια στήλη η οποία πληροί τα ακόλουθα κριτήρια:

- Εισάγει όλα Καθορίστε μια τιμή για τη στήλη. 
- Επίσης, όλες τις ενημερώσεις σε ένα στοιχείο αλλάξετε την τιμή της στήλης. 
- Η τιμή αυτής της στήλης αυξάνεται με κάθε αλλαγή.
- Ερωτήματα με την εξής όπου και όρους ORDER BY μπορεί να εκτελεστεί αποτελεσματικά: `WHERE [High Water Mark Column] > [Current High Water Mark Value] ORDER BY [High Water Mark Column]`.

Για παράδειγμα, μια στήλη με ευρετήριο **rowversion** είναι μια ιδανική επιλογή για τη στήλη σήμανση νερό υψηλή. Για να χρησιμοποιήσετε αυτήν την πολιτική, να δημιουργήσετε ή να ενημερώσετε την προέλευση δεδομένων, ως εξής: 

    { 
        "name" : "myazuresqldatasource",
        "type" : "azuresql",
        "credentials" : { "connectionString" : "connection string" },
        "container" : { "name" : "table or view name" }, 
        "dataChangeDetectionPolicy" : {
           "@odata.type" : "#Microsoft.Azure.Search.HighWaterMarkChangeDetectionPolicy",
           "highWaterMarkColumnName" : "[a row version or last_updated column name]" 
      }
    }

> [AZURE.WARNING] Εάν ο πίνακας προέλευσης δεν διαθέτει ένα ευρετήριο στη στήλη σήμανση νερό υψηλό, τα ερωτήματα που χρησιμοποιούνται από το ευρετήριο SQL μπορεί να λήξει. Συγκεκριμένα, η `ORDER BY [High Water Mark Column]` όρος απαιτεί ένα ευρετήριο για να εκτελέσετε αποτελεσματικά όταν ο πίνακας περιέχει πολλές γραμμές. 

Εάν αντιμετωπίσετε τα σφάλματα χρονικού ορίου, μπορείτε να χρησιμοποιήσετε το `queryTimeout` ρύθμιση παραμέτρων ευρετηρίου για να ορίσετε το χρονικό όριο ερωτήματος σε μια τιμή μεγαλύτερη από το προεπιλεγμένο χρονικό όριο 5 λεπτών. Για παράδειγμα, για να ορίσετε το χρονικό όριο 10 λεπτά, δημιουργία ή ενημέρωση του ευρετηρίου με τις ακόλουθες ρυθμίσεις: 

    {
      ... other indexer definition properties
     "parameters" : { 
            "configuration" : { "queryTimeout" : "00:10:00" } }
    }

Μπορείτε επίσης να απενεργοποιήσετε το `ORDER BY [High Water Mark Column]` όρος. Ωστόσο, αυτό δεν συνιστάται επειδή εάν της εκτέλεσης του ευρετηρίου διακοπεί από ένα σφάλμα, το ευρετήριο έχει για την εκ νέου επεξεργασία όλες τις γραμμές αν εκτελείται αργότερα - ακόμα και αν το ευρετήριο έχει ήδη υποβάλλονται σε επεξεργασία σχεδόν όλες τις γραμμές από το χρόνο που διακόπηκε. Για να απενεργοποιήσετε το `ORDER BY` τον όρο FROM, χρησιμοποιήστε το `disableOrderByHighWaterMarkColumn` τη ρύθμιση στον ορισμό ευρετήριο:  

    {
     ... other indexer definition properties
     "parameters" : { 
            "configuration" : { "disableOrderByHighWaterMarkColumn" : true } }
    }

### <a name="soft-delete-column-deletion-detection-policy"></a>Πολιτική απαλές διαγραφή εντοπισμού Διαγραφή στήλης

Όταν οι γραμμές διαγράφονται από τον πίνακα προέλευσης, που θέλετε πιθανώς να διαγράψετε αυτές τις γραμμές από το ευρετήριο αναζήτησης. Εάν χρησιμοποιείτε την αλλαγή SQL ενσωματωμένη παρακολούθηση της πολιτικής, αυτό είναι πραγματοποιήθηκε φροντίσει για εσάς. Ωστόσο, η αλλαγή υψηλής νερό σήμανση παρακολούθησης πολιτικής δεν σας βοηθήσει με διαγραμμένες γραμμές. Τι να κάνω; 

Εάν οι γραμμές φυσικά καταργούνται από τον πίνακα, Azure αναζήτησης δεν έχει τρόπο να υπολογίσει την παρουσία των εγγραφών που δεν υπάρχουν πλέον.  Ωστόσο, μπορείτε να χρησιμοποιήσετε την τεχνική "απαλών-Διαγραφή" για να διαγράψετε λογικά γραμμές χωρίς να τις καταργήσετε από τον πίνακα. Προσθέστε μια στήλη σε γραμμές του πίνακα ή προβολής και σήμανση ως διαγραμμένο χρησιμοποιώντας αυτήν τη στήλη.

Όταν χρησιμοποιείτε την τεχνική απαλών διαγραφή, μπορείτε να καθορίσετε το απαλών Διαγραφή πολιτικής ως εξής κατά τη δημιουργία ή ενημέρωση της προέλευσης δεδομένων: 

    { 
        …, 
        "dataDeletionDetectionPolicy" : { 
           "@odata.type" : "#Microsoft.Azure.Search.SoftDeleteColumnDeletionDetectionPolicy",
           "softDeleteColumnName" : "[a column name]", 
           "softDeleteMarkerValue" : "[the value that indicates that a row is deleted]" 
        }
    }

Το **softDeleteMarkerValue** πρέπει να είναι μια συμβολοσειρά-Χρησιμοποιήστε τη συμβολοσειρά αναπαράσταση την πραγματική τιμή. Για παράδειγμα, εάν έχετε μια στήλη ακεραίων όπου επισημαίνονται οι διαγραμμένες γραμμές με την τιμή 1, χρησιμοποιήστε `"1"`. Εάν έχετε μια στήλη BIT όπου επισημαίνονται οι διαγραμμένες γραμμές με τη δυαδική τιμή true, χρησιμοποιήστε `"True"`. 

<a name="TypeMapping"></a>
## <a name="mapping-between-sql-data-types-and-azure-search-data-types"></a>Αντιστοίχιση μεταξύ SQL τύπους δεδομένων και τύποι δεδομένων αναζήτησης Azure

|Τύπος δεδομένων SQL | Επιτρέπεται ευρετήριο προορισμού τύπους πεδίων |Σημειώσεις 
|------|-----|----|
|bit|Edm.Boolean, Edm.String| |
|Int, smallint, tinyint |Edm.Int32, Edm.Int64, Edm.String| |
| bigint | Edm.Int64, Edm.String | |
| πραγματικό, Αιώρηση |Edm.Double, Edm.String | |
| smallmoney, δεκαδική αριθμητική χρήματα | Edm.String| Azure αναζήτησης δεν υποστηρίζει τη μετατροπή δεκαδικό τύπων σε Edm.Double επειδή αυτό θα χάσετε ακρίβεια |
| char, nchar, varchar, nvarchar | Edm.String<br/>Collection(EDM.String)|Μια συμβολοσειρά SQL μπορεί να χρησιμοποιηθεί για τη συμπλήρωση ενός πεδίου Collection(Edm.String) αν η συμβολοσειρά αντιπροσωπεύει έναν πίνακα JSON συμβολοσειρών:`["red", "white", "blue"]` | 
|smalldatetime, ημερομηνίας/ώρας, datetime2, ημερομηνία, datetimeoffset |Edm.DateTimeOffset, Edm.String| |
|uniqueidentifer | Edm.String | |
|Γεωγραφία | Edm.GeographyPoint | Υποστηρίζονται μόνο Γεωγραφία παρουσίες του τύπου ΣΗΜΕΊΟ με 4326 SRID (που είναι η προεπιλογή) | | 
|ROWVERSION| Δ/Υ |Γραμμή έκδοσης στήλες δεν μπορεί να είναι αποθηκευμένα στο ευρετήριο αναζήτησης, αλλά μπορούν επίσης να χρησιμοποιηθούν για την παρακολούθηση αλλαγών | |
| ώρα, χρονικό διάστημα, δυαδικό, varbinary, εικόνα, xml, γεωμετρική, τύποι CLR | Δ/Υ |Δεν υποστηρίζεται |

## <a name="configuration-settings"></a>Ρυθμίσεις παραμέτρων

Ευρετήριο SQL εκθέτει πολλές ρυθμίσεις παραμέτρων: 

|Ρύθμιση |Τύπος δεδομένων | Σκοπός | Προεπιλεγμένη τιμή |
|--------|----------|---------|---------------|
| queryTimeout | συμβολοσειρά | Ορίζει το χρονικό όριο για την εκτέλεση του ερωτήματος SQL | 5 λεπτά ("00: 05:00") |
| disableOrderByHighWaterMarkColumn | bool | Έχει ως αποτέλεσμα το ερώτημα SQL που χρησιμοποιείται από την πολιτική σήμανση νερό υψηλής να παραλείψετε ο όρος ORDER BY. Ανατρέξτε στο θέμα [πολιτική σήμανση υψηλής νερό](#HighWaterMarkPolicy) | FALSE | 

Αυτές οι ρυθμίσεις που χρησιμοποιούνται στο το `parameters.configuration` αντικειμένου στον ορισμό ευρετηρίου. Για παράδειγμα, για να ορίσετε το χρονικό όριο ερωτήματος 10 λεπτά, δημιουργία ή ενημέρωση του ευρετηρίου με τις ακόλουθες ρυθμίσεις: 

    {
      ... other indexer definition properties
     "parameters" : { 
            "configuration" : { "queryTimeout" : "00:10:00" } }
    }

## <a name="frequently-asked-questions"></a>Συνήθεις ερωτήσεις

**Q:** Μπορώ να χρησιμοποιήσω ευρετηρίου Azure SQL με βάσεις δεδομένων SQL που εκτελείται σε ΣΠΣ IaaS στο Azure;

Α: Ναι. Ωστόσο, πρέπει να επιτρέψετε την υπηρεσία αναζήτησης για να συνδεθείτε με τη βάση δεδομένων. Για περισσότερες πληροφορίες, ανατρέξτε στο θέμα [Ρύθμιση παραμέτρων σύνδεσης από το ευρετήριο αναζήτησης Azure με τον SQL Server σε μια Εικονική Azure](search-howto-connecting-azure-sql-iaas-to-azure-search-using-indexers.md).


**Q:** Μπορώ να χρησιμοποιήσω ευρετηρίου Azure SQL με βάσεις δεδομένων SQL εκτελείται εσωτερικής εγκατάστασης; 

Α: δεν συνιστάται και δεν υποστηρίζει αυτή, όπως αυτή η ενέργεια απαιτεί να ανοίξετε τις βάσεις δεδομένων για να την κυκλοφορία του Internet. 

**Q:** Μπορώ να χρησιμοποιήσω ευρετηρίου Azure SQL με βάσεις δεδομένων εκτός από το SQL Server που εκτελείται στο IaaS στην Azure; 

Α: Δεν υποστηρίζουμε αυτό το σενάριο, επειδή δεν έχουμε ελέγξει το ευρετήριο με όλες τις βάσεις δεδομένων εκτός από το SQL Server.  

**Q:** Μπορώ να δημιουργήσω πολλές Οι δεικτοδότες εκτελείται σε ένα χρονοδιάγραμμα; 

Α: Ναι. Ωστόσο, μόνο ένα ευρετήριο μπορεί να εκτελείται σε έναν κόμβο κάθε φορά. Εάν χρειάζεστε πολλές Οι δεικτοδότες εκτελείται ταυτόχρονα, εξετάστε το ενδεχόμενο κλίμακας προς τα επάνω της υπηρεσίας αναζήτησης σε περισσότερες από μία μονάδες αναζήτησης. 

**Q:** Η εκτέλεση ενός ευρετηρίου επηρεάζει μου φόρτο εργασίας ερωτήματος; 

Α: Ναι. Ευρετήριο εκτελείται σε έναν από τους κόμβους στην υπηρεσία αναζήτησης και τους πόρους του κόμβου που είναι κοινόχρηστα μεταξύ δημιουργίας ευρετηρίου και εξυπηρετούν κίνηση ερωτημάτων και άλλες αιτήσεις API. Εάν εκτελείτε εντατική φόρτους εργασίας δημιουργίας ευρετηρίου και ερωτήματος και αντιμετωπίσετε μεγάλη ταχύτητα 503 σφάλματα ή αύξηση χρόνους απόκρισης, εξετάστε το ενδεχόμενο κλιμάκωση προς την υπηρεσία αναζήτησης.
