<properties 
    pageTitle="Ταξινόμηση δεδομένων DocumentDB με τη χρήση Order By | Microsoft Azure" 
    description="Μάθετε πώς μπορείτε να χρησιμοποιήσετε ORDER BY σε ερωτήματα DocumentDB στο LINQ και SQL και πώς μπορείτε να καθορίσετε μια πολιτική δημιουργίας ευρετηρίου για ORDER BY ερωτήματα." 
    services="documentdb" 
    authors="arramac" 
    manager="jhubbard" 
    editor="cgronlun" 
    documentationCenter=""/>

<tags 
    ms.service="documentdb" 
    ms.workload="data-services" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="10/03/2016" 
    ms.author="arramac"/>

# <a name="sorting-documentdb-data-using-order-by"></a>Ταξινόμηση δεδομένων DocumentDB με τη χρήση Order By
Microsoft Azure DocumentDB υποστηρίζει κατά την αναζήτηση εγγράφων με χρήση SQL μέσω JSON έγγραφα. Αποτελέσματα ερωτήματος μπορεί να παραγγελθούν χρησιμοποιώντας τον όρο ORDER BY σε προτάσεις ερωτήματος SQL.

Μετά την ανάγνωση αυτό το άρθρο, θα έχετε τη δυνατότητα να απαντούν στα παρακάτω ερωτήματα: 

- Πώς ερωτήματος με κατάταξη κατά;
- Πώς γίνεται η ρύθμιση παραμέτρων πολιτικής δημιουργίας ευρετηρίου για Order By;
- Τι σύντομα επόμενη;

[Δείγματα](#samples) και μια [Συνήθεις Ερωτήσεις](#faq) παρέχονται επίσης.

Για μια ολοκληρωμένη αναφορά στην υποβολή ερωτημάτων SQL, ανατρέξτε στο θέμα το [πρόγραμμα εκμάθησης DocumentDB ερωτήματος](documentdb-sql-query.md).

## <a name="how-to-query-with-order-by"></a>Τρόπος υποβολής ερωτημάτων με σειρά από
Όπως στο ANSI SQL, μπορείτε πλέον να συμπεριλάβετε ένα προαιρετικό Order By στην προτάσεις SQL κατά την υποβολή ερωτήματος DocumentDB. Ο όρος να συμπεριλάβετε ένα προαιρετικό όρισμα Αύξουσας/Φθίνουσας για να καθορίσετε τη σειρά με την οποία πρέπει να είναι δυνατή η ανάκτηση αποτελεσμάτων. 

### <a name="ordering-using-sql"></a>Ταξινόμηση με χρήση SQL
Για παράδειγμα, ακολουθεί ένα ερώτημα για να ανακτήσετε τα 10 σημαντικότερα βιβλία με φθίνουσα σειρά τους τίτλους. 

    SELECT TOP 10 * 
    FROM Books 
    ORDER BY Books.Title DESC

### <a name="ordering-using-sql-with-filtering"></a>Ταξινόμηση με χρήση SQL με το φιλτράρισμα
Μπορείτε να τη διάταξη χρησιμοποιώντας οποιαδήποτε ιδιότητα ένθετο μέσα σε έγγραφα όπως Books.ShippingDetails.Weight και μπορείτε να καθορίσετε πρόσθετα φίλτρα στο τον όρο WHERE σε συνδυασμό με σειρά, όπως σε αυτό το παράδειγμα:

    SELECT * 
    FROM Books 
    WHERE Books.SalePrice > 4000
    ORDER BY Books.ShippingDetails.Weight

### <a name="ordering-using-the-linq-provider-for-net"></a>Ταξινόμηση με χρήση της υπηρεσίας παροχής LINQ για .NET
Χρήση του SDK .NET έκδοση 1.2.0 και νεότερη έκδοση, μπορείτε επίσης να χρησιμοποιήσετε τον όρο OrderBy() ή OrderByDescending() μέσα σε ερωτήματα LINQ όπως σε αυτό το παράδειγμα:

    foreach (Book book in client.CreateDocumentQuery<Book>(UriFactory.CreateDocumentCollectionUri("db", "books"))
        .OrderBy(b => b.PublishTimestamp)
        .Take(100))
    {
        // Iterate through books
    }

DocumentDB υποστηρίζει ταξινόμηση με ένα μεμονωμένο αριθμητικό, συμβολοσειρά ή δυαδική ιδιότητα ανά ερώτημα, με πρόσθετες ερωτήματος τύπους σύντομα διαθέσιμο. Ανατρέξτε στο θέμα [Τι σύντομα επόμενη](#Whats_coming_next) για περισσότερες λεπτομέρειες.

## <a name="configure-an-indexing-policy-for-order-by"></a>Ρύθμιση παραμέτρων πολιτικής δημιουργίας ευρετηρίου για κατάταξη κατά

Ανάκληση ότι DocumentDB υποστηρίζει δύο είδη των ευρετηρίων (κατακερματισμός και περιοχή), που μπορεί να οριστεί για συγκεκριμένες διαδρομές/ιδιότητες, τύπους δεδομένων (συμβολοσειρές αριθμοί) και, σε διαφορετική ακρίβεια τιμές (μέγιστη ακρίβεια ή μια τιμή σταθερής ακρίβειας). Επειδή το DocumentDB χρησιμοποιεί κατακερματισμός ευρετηρίου ως προεπιλεγμένο, πρέπει να δημιουργήσετε μια νέα συλλογή με μια προσαρμοσμένη πολιτική δημιουργίας ευρετηρίου με την περιοχή σε αριθμούς, συμβολοσειρές ή και τα δύο, για να χρησιμοποιήσετε Order By. 

>[AZURE.NOTE] Συμβολοσειρά περιοχή ευρετήρια έχουν εισαχθεί σε 7 ΙΟΥΛΙΟΥ 2015 με REST API έκδοση 2015-06-03. Για να δημιουργήσετε πολιτικές για Order By έναντι συμβολοσειρές, πρέπει να χρησιμοποιήσετε SDK έκδοση 1.2.0 του .NET SDK ή έκδοση 1.1.0 του Python, Node.js ή Java SDK.
>
>Πριν από το REST API έκδοση 2015-06-03, η προεπιλεγμένη πολιτική δημιουργίας ευρετηρίου συλλογής ήταν κατακερματισμός για συμβολοσειρές και αριθμούς. Αυτό έχει αλλάξει σε κατακερματισμός για συμβολοσειρές και περιοχής για τους αριθμούς. 

Για περισσότερες λεπτομέρειες, ανατρέξτε [DocumentDB πολιτικές δημιουργίας ευρετηρίου](documentdb-indexing-policies.md).

### <a name="indexing-for-order-by-against-all-properties"></a>Δημιουργία ευρετηρίου για Order By σε σχέση με όλες τις ιδιότητες
Μάθετε πώς μπορείτε να δημιουργήσετε μια συλλογή με "Όλα περιοχή" Δημιουργία ευρετηρίου για Order By σε σχέση με οποιαδήποτε/όλα αριθμητικές ή συμβολοσειράς ιδιότητες που εμφανίζονται μέσα σε έγγραφα JSON μέσα σε αυτό. Εδώ αντικαταστήσει το προεπιλεγμένο τύπο ευρετηρίου για τιμές συμβολοσειρών σε περιοχή και, στο τη μέγιστη ακρίβεια (-1).
                   
    DocumentCollection books = new DocumentCollection();
    books.Id = "books";
    books.IndexingPolicy = new IndexingPolicy(new RangeIndex(DataType.String) { Precision = -1 });
    
    await client.CreateDocumentCollectionAsync(UriFactory.CreateDatabaseUri("db"), books);  

>[AZURE.NOTE] Σημειώστε ότι Order By μόνο θα επιστρέψει αποτελέσματα των τύπων δεδομένων (συμβολοσειρά και αριθμός) που έχουν καταχωρηθεί στο ευρετήριο με μια RangeIndex. Για παράδειγμα, εάν έχετε την προεπιλεγμένη δημιουργίας ευρετηρίου για την πολιτική η οποία έχει RangeIndex μόνο σε αριθμούς, μια σειρά από σε σχέση με μια διαδρομή με τιμές συμβολοσειρών θα επιστρέψει έγγραφα.

### <a name="indexing-for-order-by-for-a-single-property"></a>Δημιουργία ευρετηρίου για Order By για μία μόνο ιδιότητα
Παρακάτω θα δείτε πώς μπορείτε να δημιουργήσετε μια συλλογή με τη δημιουργία ευρετηρίου για κατάταξη κατά έναντι μόνο την ιδιότητα "Τίτλος", που είναι μια συμβολοσειρά. Υπάρχουν δύο διαδρομές, μία για την ιδιότητα "Τίτλος" ("/ τίτλου /;") με τη δημιουργία ευρετηρίου περιοχής και τον άλλο για κάθε άλλες ιδιότητα με την προεπιλεγμένη δημιουργίας ευρετηρίου συνδυασμό, δηλαδή κατακερματισμός για συμβολοσειρές και περιοχής για τους αριθμούς.                    
    
    booksCollection.IndexingPolicy.IncludedPaths.Add(
        new IncludedPath { 
            Path = "/Title/?", 
            Indexes = new Collection<Index> { 
                new RangeIndex(DataType.String) { Precision = -1 } } 
            });
    
    await client.CreateDocumentCollectionAsync(UriFactory.CreateDatabaseUri("db"), booksCollection);  


## <a name="samples"></a>Δείγματα
Ρίξτε μια ματιά σε αυτό το [έργο δείγματα Github](https://github.com/Azure/azure-documentdb-dotnet/tree/master/samples/code-samples/Queries) που δείχνει πώς μπορείτε να χρησιμοποιήσετε Order By, όπως τη δημιουργία ευρετηρίου πολιτικές και σελιδοποίησης χρησιμοποιώντας Order By. Άνοιγμα αρχείου προέλευσης είναι τα δείγματα και σας προτείνουμε να υποβάλετε αιτήσεις ελκυστική με συνεισφορά που μπορούν να επωφεληθούν άλλους προγραμματιστές DocumentDB. Ανατρέξτε στην οι [οδηγίες συνεισφορά](https://github.com/Azure/azure-documentdb-net/blob/master/Contributing.md) για οδηγίες σχετικά με τον τρόπο για να συνεισφέρετε.  

## <a name="faq"></a>ΣΥΝΉΘΕΙΣ ΕΡΩΤΉΣΕΙΣ

**Τι είναι το αναμενόμενο κατανάλωση αίτηση μονάδας (RU) Order By ερωτημάτων;**

Επειδή το Order By χρησιμοποιεί το ευρετήριο DocumentDB για αναζητήσεις, ο αριθμός των μονάδων αίτηση που καταναλώνεται από Order By ερωτήματα θα είναι παρόμοια με τα ερωτήματα ισοδύναμη χωρίς Order By. Όπως οποιαδήποτε άλλη λειτουργία σε DocumentDB, ο αριθμός των μονάδων αίτηση εξαρτάται από τα μεγέθη/σχήματα με τα έγγραφα, καθώς και την πολυπλοκότητα του ερωτήματος. 


**Τι είναι το αναμενόμενο δημιουργίας ευρετηρίου επιβάρυνσης για Order By;**

Το δημιουργίας ευρετηρίου επιβάρυνσης χώρου αποθήκευσης θα είναι ανάλογα με τον αριθμό των ιδιοτήτων. Σε σενάριο χειρότερης περίπτωσης, το ευρετήριο επιβάρυνσης θα είναι 100% των δεδομένων. Υπάρχει διαφορά στο επιβάρυνσης μετάδοσης (αίτηση μονάδες) μεταξύ περιοχή/κατάταξη κατά τη δημιουργία ευρετηρίου και η δημιουργία ευρετηρίου κατακερματισμός προεπιλογή.

**Πώς μπορώ να ερωτήματος μου υπάρχοντα δεδομένα σε DocumentDB χρησιμοποιώντας Order By;**

Για να ταξινομήσετε τα αποτελέσματα του ερωτήματος με κατάταξη κατά, πρέπει να τροποποιήσετε την πολιτική δημιουργίας ευρετηρίου της συλλογής για να χρησιμοποιήσετε έναν τύπο περιοχής ευρετήριο σε σχέση με την ιδιότητα που χρησιμοποιούνται για την ταξινόμηση. Ανατρέξτε στην ενότητα [Τροποποίηση δημιουργίας ευρετηρίου για την πολιτική](documentdb-indexing-policies.md#modifying-the-indexing-policy-of-a-collection). 

**Τι είναι η τρέχουσα περιορισμοί Order By;**

Order By μπορεί να καθοριστεί μόνο σε σχέση με μια ιδιότητα, είτε αριθμητικό ή συμβολοσειρά όταν είναι περιοχή στο ευρετήριο με τη μέγιστη ακρίβεια (-1).

Δεν μπορείτε να εκτελέσετε τις ακόλουθες ενέργειες:
 
- Κατάταξη κατά με τις ιδιότητες εσωτερικής συμβολοσειρά, όπως αναγνωριστικό _rid και _self: (σύντομα διαθέσιμο).
- Κατάταξη κατά με τις ιδιότητες που προέρχονται από το αποτέλεσμα ενός συνδέσμου εντός εγγράφου (σύντομα διαθέσιμο).
- Κατάταξη κατά πολλές ιδιότητες (σύντομα διαθέσιμο).
- Κατάταξη κατά με τα ερωτήματα σε βάσεις δεδομένων, συλλογές, οι χρήστες, δικαιώματα ή συνημμένα (σύντομα διαθέσιμο).
- Κατάταξη κατά με τις ιδιότητες υπολογισμένη π.χ., το αποτέλεσμα της παράστασης ή μια συνάρτηση UDF/ενσωματωμένη-σε.

Order By είναι δεν υποστηρίζονται αυτήν τη στιγμή για ερωτήματα σταυρό διαμερισμάτων κατά τη χρήση ερωτήματος Explorer στην πύλη του Azure.

## <a name="troubleshooting"></a>Αντιμετώπιση προβλημάτων

Εάν λάβετε ένα μήνυμα σφάλματος ότι Order By δεν υποστηρίζεται, ελέγξτε για να βεβαιωθείτε ότι χρησιμοποιείτε μια έκδοση του [SDK](documentdb-sdk-dotnet.md) που υποστηρίζει Order By. 

## <a name="next-steps"></a>Επόμενα βήματα

Διαχωρίζονται [Github δείγματα έργου](https://github.com/Azure/azure-documentdb-dotnet/tree/master/samples/code-samples/Queries) και να ξεκινήσετε την ταξινόμηση των δεδομένων σας! 

## <a name="references"></a>Αναφορές
* [Αναφορά DocumentDB ερωτήματος](documentdb-sql-query.md)
* [Αναφορά πολιτικής δημιουργίας ευρετηρίου DocumentDB](documentdb-indexing-policies.md)
* [Αναφορά DocumentDB SQL](https://msdn.microsoft.com/library/azure/dn782250.aspx)
* [Σειρά DocumentDB με δείγματα](https://github.com/Azure/azure-documentdb-dotnet/tree/master/samples/code-samples/Queries)
 

